{"version":3,"file":"main.20f1509e59258482ed38.js","mappings":"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","sources":["webpack://mytonwallet/webpack/runtime/create fake namespace object","webpack://mytonwallet/webpack/runtime/load script","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/ieee754/index.js","webpack://mytonwallet/./src/util/decimals.ts","webpack://mytonwallet/./src/util/bigint.ts","webpack://mytonwallet/./src/api/chains/ton/constants.ts","webpack://mytonwallet/./src/util/PostMessageConnector.ts","webpack://mytonwallet/./src/util/Deferred.ts","webpack://mytonwallet/./src/util/dateFormat.ts","webpack://mytonwallet/./src/util/generateUniqueId.ts","webpack://mytonwallet/./node_modules/@capacitor/core/dist/index.js","webpack://mytonwallet/./src/util/withCache.ts","webpack://mytonwallet/./src/util/animation.ts","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/definitions.js","webpack://mytonwallet/./src/util/extensionMessageSerializer.ts","webpack://mytonwallet/./src/config.ts","webpack://mytonwallet/./src/util/getPlatform.ts","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/definitions.js","webpack://mytonwallet/./src/util/schedulers.ts","webpack://mytonwallet/./src/util/launchMediaWorkers.ts","webpack://mytonwallet/./src/util/environment.ts","webpack://mytonwallet/./src/util/handleError.ts","webpack://mytonwallet/./node_modules/buffer/index.js","webpack://mytonwallet/./src/lib/big.js/index.js","webpack://mytonwallet/./src/util/safeExec.ts","webpack://mytonwallet/./src/util/ledger/tab.ts","webpack://mytonwallet/./src/util/createPostMessageInterface.ts","webpack://mytonwallet/./src/util/logs.ts","webpack://mytonwallet/./src/api/types/errors.ts","webpack://mytonwallet/./src/util/random.ts","webpack://mytonwallet/./src/util/assert.ts","webpack://mytonwallet/./src/util/ledger/utils.ts","webpack://mytonwallet/./src/api/chains/ton/contracts/JettonStaking/imports/constants.ts","webpack://mytonwallet/./node_modules/process/browser.js","webpack://mytonwallet/./src/lib/fasterdom/fasterdom.ts","webpack://mytonwallet/./node_modules/base64-js/index.js","webpack://mytonwallet/./src/lib/fasterdom/layoutCauses.ts","webpack://mytonwallet/./src/lib/fasterdom/stricterdom.ts","webpack://mytonwallet/./src/api/providers/extension/config.ts","webpack://mytonwallet/./src/api/providers/worker/connector.ts","webpack://mytonwallet/./src/util/windowProvider/index.ts","webpack://mytonwallet/./src/util/windowEnvironment.ts","webpack://mytonwallet/./src/util/account.ts","webpack://mytonwallet/./src/util/iteratees.ts","webpack://mytonwallet/./src/util/shortenAddress.ts","webpack://mytonwallet/./src/util/windowProvider/methods/capacitorStorage.ts","webpack://mytonwallet/./src/util/windowProvider/methods/ledger.ts","webpack://mytonwallet/./src/util/windowProvider/methods/localStorage.ts","webpack://mytonwallet/webpack/bootstrap","webpack://mytonwallet/webpack/runtime/compat get default export","webpack://mytonwallet/webpack/runtime/define property getters","webpack://mytonwallet/webpack/runtime/ensure chunk","webpack://mytonwallet/webpack/runtime/get javascript chunk filename","webpack://mytonwallet/webpack/runtime/get mini-css chunk filename","webpack://mytonwallet/webpack/runtime/global","webpack://mytonwallet/webpack/runtime/hasOwnProperty shorthand","webpack://mytonwallet/webpack/runtime/make namespace object","webpack://mytonwallet/webpack/runtime/publicPath","webpack://mytonwallet/webpack/runtime/jsonp chunk loading","webpack://mytonwallet/./src/util/arePropsShallowEqual.ts","webpack://mytonwallet/./src/util/debugOverlay.ts","webpack://mytonwallet/./src/util/callbacks.ts","webpack://mytonwallet/./src/util/signals.ts","webpack://mytonwallet/./src/lib/teact/heavyAnimation.ts","webpack://mytonwallet/./src/lib/teact/teact.ts","webpack://mytonwallet/./src/hooks/useForceUpdate.ts","webpack://mytonwallet/./src/hooks/useEffectOnce.ts","webpack://mytonwallet/./src/hooks/usePrevious.ts","webpack://mytonwallet/./src/hooks/useSyncEffect.ts","webpack://mytonwallet/./src/hooks/useUniqueId.ts","webpack://mytonwallet/./src/lib/teact/teactn.tsx","webpack://mytonwallet/./src/global/index.ts","webpack://mytonwallet/./src/util/isEmptyObject.ts","webpack://mytonwallet/./src/util/isViewAccount.ts","webpack://mytonwallet/./src/util/memoize.ts","webpack://mytonwallet/./src/global/selectors/accounts.ts","webpack://mytonwallet/./src/util/ton/transfer.ts","webpack://mytonwallet/./src/global/selectors/dapp.ts","webpack://mytonwallet/./src/util/round.ts","webpack://mytonwallet/./src/global/selectors/tokens.ts","webpack://mytonwallet/./src/util/poisoningHash.ts","webpack://mytonwallet/./src/util/activities/index.ts","webpack://mytonwallet/./src/global/selectors/activities.ts","webpack://mytonwallet/./src/global/types.ts","webpack://mytonwallet/./src/util/chain.ts","webpack://mytonwallet/./src/util/tokens.ts","webpack://mytonwallet/./src/global/selectors/swap.ts","webpack://mytonwallet/./src/util/fee/transferFee.ts","webpack://mytonwallet/./src/util/dns.ts","webpack://mytonwallet/./src/util/isValidAddressOrDomain.ts","webpack://mytonwallet/./src/global/selectors/transfer.ts","webpack://mytonwallet/./src/global/selectors/staking.ts","webpack://mytonwallet/./src/global/selectors/domains.ts","webpack://mytonwallet/./src/global/actions/api/initial.ts","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/index.js","webpack://mytonwallet/./src/util/windowSize.ts","webpack://mytonwallet/./src/util/telegram/index.ts","webpack://mytonwallet/./src/util/authApi/telegram.ts","webpack://mytonwallet/./src/util/authApi/webAuthn.ts","webpack://mytonwallet/./src/util/authApi/index.ts","webpack://mytonwallet/./node_modules/@capacitor/app/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/splash-screen/dist/esm/index.js","webpack://mytonwallet/../../src/index.ts","webpack://mytonwallet/./node_modules/capacitor-plugin-safe-area/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/app-launcher/dist/esm/index.js","webpack://mytonwallet/./src/util/domEvents.ts","webpack://mytonwallet/./src/util/tonConnectEnvironment.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/connector/connector.ts","webpack://mytonwallet/./src/api/tonConnect/types/index.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/tonConnectBridgeApi.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/bridgeApi.ts","webpack://mytonwallet/./src/hooks/useStateRef.ts","webpack://mytonwallet/./src/hooks/useLastCallback.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/InAppBrowserPostMessageAdapter.ts","webpack://mytonwallet/./src/util/url.ts","webpack://mytonwallet/./src/util/base64toHex.ts","webpack://mytonwallet/./src/global/helpers/renderText.tsx","webpack://mytonwallet/./src/util/cacheApi.ts","webpack://mytonwallet/./src/util/formatNumber.ts","webpack://mytonwallet/./src/util/langProvider.ts","webpack://mytonwallet/./src/util/regex.ts","webpack://mytonwallet/./src/hooks/useLang.ts","webpack://mytonwallet/./src/util/buildClassName.ts","webpack://mytonwallet/./src/util/math.ts","webpack://mytonwallet/./src/util/captureEvents.ts","webpack://mytonwallet/./src/util/lethargy.ts","webpack://mytonwallet/./src/util/captureKeyboardListeners.ts","webpack://mytonwallet/./src/util/modalSwipeManager.ts","webpack://mytonwallet/./src/util/trapFocus.ts","webpack://mytonwallet/./src/util/cssColorToHex.ts","webpack://mytonwallet/./node_modules/@capacitor/status-bar/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capacitor/status-bar/dist/esm/index.js","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/navigationbar.events.js","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/index.js","webpack://mytonwallet/./src/util/switchTheme.ts","webpack://mytonwallet/./src/util/capacitor/switchStatusBar.ts","webpack://mytonwallet/./src/hooks/useMediaQuery.ts","webpack://mytonwallet/./src/hooks/useDeviceScreen.ts","webpack://mytonwallet/./src/hooks/useEffectWithPrevDeps.ts","webpack://mytonwallet/./src/hooks/useDelegatedBottomSheet.ts","webpack://mytonwallet/./src/hooks/useDelegatingBottomSheet.ts","webpack://mytonwallet/./src/util/telegram/backButtonManager.ts","webpack://mytonwallet/./src/hooks/useHistoryBack.ts","webpack://mytonwallet/./src/lib/teact/dom-events.ts","webpack://mytonwallet/./src/lib/teact/teact-dom.ts","webpack://mytonwallet/./src/hooks/useSignal.ts","webpack://mytonwallet/./src/hooks/useSignalEffect.ts","webpack://mytonwallet/./src/hooks/useDerivedSignal.ts","webpack://mytonwallet/./src/hooks/useDerivedState.ts","webpack://mytonwallet/./src/hooks/useSyncEffectWithPrevDeps.ts","webpack://mytonwallet/./src/hooks/useShowTransition.ts","webpack://mytonwallet/./src/hooks/useToggleClass.ts","webpack://mytonwallet/./src/components/ui/LoadingDots.module.scss?6dd6","webpack://mytonwallet/./src/components/ui/LoadingDots.tsx","webpack://mytonwallet/./src/components/ui/Button.module.scss?78d5","webpack://mytonwallet/./src/components/ui/Button.tsx","webpack://mytonwallet/./src/components/ui/Portal.ts","webpack://mytonwallet/./src/components/ui/Modal.module.scss?b689","webpack://mytonwallet/./src/components/ui/Modal.tsx","webpack://mytonwallet/./src/hooks/freezeWhenClosed.ts","webpack://mytonwallet/./src/hooks/useHideBrowser.ts","webpack://mytonwallet/./src/components/ui/InAppBrowser.tsx","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/useInAppBrowserBridgeProvider.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/connector/inAppBrowserConnector.ts","webpack://mytonwallet/./src/global/helpers/misc.ts","webpack://mytonwallet/./src/util/openUrl.ts","webpack://mytonwallet/./src/util/renderPromise.ts","webpack://mytonwallet/./src/util/deeplink/constants.ts","webpack://mytonwallet/./src/util/deeplink/index.ts","webpack://mytonwallet/./node_modules/@capacitor/push-notifications/dist/esm/index.js","webpack://mytonwallet/./src/global/selectors/notifications.ts","webpack://mytonwallet/./src/util/capacitor/platform.ts","webpack://mytonwallet/./src/util/capacitor/notifications.ts","webpack://mytonwallet/./src/util/capacitor/index.ts","webpack://mytonwallet/./src/util/biometrics.ts","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/web.js","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/index.js","webpack://mytonwallet/./src/util/haptics.ts","webpack://mytonwallet/./src/util/clipboard.ts","webpack://mytonwallet/./src/util/isMnemonicPrivateKey.ts","webpack://mytonwallet/./src/util/deepDiff.ts","webpack://mytonwallet/./src/util/deepMerge.ts","webpack://mytonwallet/./src/hooks/useBackgroundMode.ts","webpack://mytonwallet/./src/util/multitab.ts","webpack://mytonwallet/./src/global/initialState.ts","webpack://mytonwallet/./src/util/areDeepEqual.ts","webpack://mytonwallet/./src/util/isPartialDeepEqual.ts","webpack://mytonwallet/./src/global/reducers/misc.ts","webpack://mytonwallet/./src/global/helpers/swap.ts","webpack://mytonwallet/./src/global/reducers/swap.ts","webpack://mytonwallet/./src/global/reducers/transfer.ts","webpack://mytonwallet/./src/global/reducers/wallet.ts","webpack://mytonwallet/./src/global/reducers/staking.ts","webpack://mytonwallet/./src/global/reducers/dapp.ts","webpack://mytonwallet/./src/util/activities/order.ts","webpack://mytonwallet/./src/global/reducers/activities.ts","webpack://mytonwallet/./src/global/reducers/nfts.ts","webpack://mytonwallet/./src/global/reducers/vesting.ts","webpack://mytonwallet/./src/global/reducers/cards.ts","webpack://mytonwallet/./src/global/reducers/domains.ts","webpack://mytonwallet/./src/global/reducers/hardware.ts","webpack://mytonwallet/./src/global/actions/api/auth.ts","webpack://mytonwallet/./src/global/helpers/index.ts","webpack://mytonwallet/./src/global/reducers/tokens.ts","webpack://mytonwallet/./src/global/actions/api/wallet.ts","webpack://mytonwallet/./src/api/constants.ts","webpack://mytonwallet/./src/util/fee/getTonOperationFees.ts","webpack://mytonwallet/./src/util/staking/index.ts","webpack://mytonwallet/./src/global/helpers/errors.ts","webpack://mytonwallet/./src/global/helpers/transfer.ts","webpack://mytonwallet/./src/util/getDappConnectionUniqueId.ts","webpack://mytonwallet/./src/global/actions/api/dapps.ts","webpack://mytonwallet/./src/util/fee/swapFee.ts","webpack://mytonwallet/./src/util/bigNumber.ts","webpack://mytonwallet/./src/global/actions/api/staking.ts","webpack://mytonwallet/./src/global/actions/api/swap.ts","webpack://mytonwallet/./src/global/actions/api/tokens.ts","webpack://mytonwallet/./src/util/scamDetection.ts","webpack://mytonwallet/./src/global/actions/api/transfer.ts","webpack://mytonwallet/./src/global/actions/api/nfts.ts","webpack://mytonwallet/./src/global/actions/api/vesting.ts","webpack://mytonwallet/./src/global/actions/api/cards.ts","webpack://mytonwallet/./src/util/createAbortableFunction.ts","webpack://mytonwallet/./src/global/reducers/notifications.ts","webpack://mytonwallet/./src/global/actions/api/notifications.ts","webpack://mytonwallet/./src/global/actions/api/domains.ts","webpack://mytonwallet/./src/global/actions/api/activity.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/initial.ts","webpack://mytonwallet/./node_modules/@capgo/native-audio/dist/esm/index.js","webpack://mytonwallet/./src/util/notificationSound.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/activities.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/dapp.ts","webpack://mytonwallet/./src/util/switchAnimationLevel.ts","webpack://mytonwallet/./src/global/actions/ui/initial.ts","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/index.js","webpack://mytonwallet/./src/util/getIsAppUpdateNeeded.ts","webpack://mytonwallet/./src/hooks/useFlag.ts","webpack://mytonwallet/./src/hooks/useHotkeys.ts","webpack://mytonwallet/./src/util/parseHotkey.ts","webpack://mytonwallet/./src/hooks/useThrottledCallback.ts","webpack://mytonwallet/./src/hooks/useDebouncedCallback.ts","webpack://mytonwallet/./src/hooks/useWindowSize.ts","webpack://mytonwallet/./src/util/authApi/inMemoryPasswordStore.ts","webpack://mytonwallet/./src/util/setReliableTimeout.ts","webpack://mytonwallet/./src/components/ui/helpers/animatedAssets.ts","webpack://mytonwallet/./src/hooks/useFocusAfterAnimation.tsx","webpack://mytonwallet/./src/hooks/useMatchCount.ts","webpack://mytonwallet/./src/components/ui/Checkbox.module.scss?4964","webpack://mytonwallet/./src/components/ui/Checkbox.tsx","webpack://mytonwallet/./src/components/main/modals/LogOutModal.module.scss?5651","webpack://mytonwallet/./src/components/main/modals/LogOutModal.tsx","webpack://mytonwallet/./src/util/buildStyle.ts","webpack://mytonwallet/./src/hooks/useMediaTransition.ts","webpack://mytonwallet/./src/lib/rlottie/RLottie.async.ts","webpack://mytonwallet/./src/util/colors.ts","webpack://mytonwallet/./src/hooks/useHeavyAnimation.ts","webpack://mytonwallet/./src/hooks/usePriorityPlaybackCheck.ts","webpack://mytonwallet/./src/hooks/useSharedIntersectionObserver.ts","webpack://mytonwallet/./src/components/ui/AnimatedSticker.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIcon.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.module.scss?9243","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.tsx","webpack://mytonwallet/./src/components/ui/Input.module.scss?4fb9","webpack://mytonwallet/./src/components/ui/Input.tsx","webpack://mytonwallet/./src/util/cssAnimationEndListeners.ts","webpack://mytonwallet/./src/util/swipeController.ts","webpack://mytonwallet/./src/hooks/usePrevDuringAnimationSimple.ts","webpack://mytonwallet/./src/components/ui/PinPad.module.scss?228e","webpack://mytonwallet/./src/components/ui/PinPadButton.tsx","webpack://mytonwallet/./src/components/ui/Transition.tsx","webpack://mytonwallet/./src/util/forceReflow.ts","webpack://mytonwallet/./src/components/ui/PinPad.tsx","webpack://mytonwallet/./src/components/ui/PasswordForm.module.scss?0d24","webpack://mytonwallet/./src/components/ui/PasswordForm.tsx","webpack://mytonwallet/./src/hooks/useAppTheme.ts","webpack://mytonwallet/./src/util/preloadImage.ts","webpack://mytonwallet/./src/components/ui/Image.tsx","webpack://mytonwallet/./src/components/appLocked/AppLocked.module.scss?8d6b","webpack://mytonwallet/./src/components/appLocked/Logo.tsx","webpack://mytonwallet/./src/components/appLocked/PasswordFormSlide.tsx","webpack://mytonwallet/./src/components/appLocked/UnlockButtonSlide.tsx","webpack://mytonwallet/./src/components/appLocked/AppLocked.tsx","webpack://mytonwallet/./src/global/actions/ui/misc.ts","webpack://mytonwallet/./src/global/actions/ui/dapps.ts","webpack://mytonwallet/./src/global/actions/ui/hardware.ts","webpack://mytonwallet/./src/global/actions/ui/settings.ts","webpack://mytonwallet/./src/global/actions/ui/nfts.ts","webpack://mytonwallet/./src/global/actions/ui/vesting.ts","webpack://mytonwallet/./src/global/actions/ui/tokens.ts","webpack://mytonwallet/./src/global/actions/ui/transfer.ts","webpack://mytonwallet/./src/global/actions/ui/shared.ts","webpack://mytonwallet/./src/global/actions/ui/notifications.ts","webpack://mytonwallet/./src/util/accentColor/constants.ts","webpack://mytonwallet/./src/util/accentColor/index.ts","webpack://mytonwallet/./src/global/actions/ui/cards.ts","webpack://mytonwallet/./src/global/actions/ui/domains.ts","webpack://mytonwallet/./src/global/cache.ts","webpack://mytonwallet/./src/global/init.ts","webpack://mytonwallet/./src/util/bigintPatch.ts","webpack://mytonwallet/./src/util/betterView.ts","webpack://mytonwallet/./src/electron/types.ts","webpack://mytonwallet/./src/util/focusScroll.ts","webpack://mytonwallet/./src/util/activeTabMonitor.ts","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/share/dist/esm/index.js","webpack://mytonwallet/./src/util/share.ts","webpack://mytonwallet/./src/hooks/useCurrentOrPrev.ts","webpack://mytonwallet/./src/components/ui/Dropdown.module.scss?3afe","webpack://mytonwallet/./src/components/ui/DropdownItemContent.tsx","webpack://mytonwallet/./src/util/captureEscKeyListener.ts","webpack://mytonwallet/./src/components/ui/Menu.module.scss?ed87","webpack://mytonwallet/./src/hooks/useMenuPosition.ts","webpack://mytonwallet/./src/components/ui/Menu.tsx","webpack://mytonwallet/./src/hooks/useVirtualBackdrop.ts","webpack://mytonwallet/./src/components/ui/DropdownMenu.tsx","webpack://mytonwallet/./src/components/ui/ModalHeader.tsx","webpack://mytonwallet/./src/components/ui/IFrameBrowser.tsx","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/useIFrameBridgeProvider.ts","webpack://mytonwallet/./src/components/ui/IFrameBrowser.module.scss?ece8","webpack://mytonwallet/./src/hooks/useIntersectionObserver.ts","webpack://mytonwallet/./src/hooks/useAppIntersectionObserver.ts","webpack://mytonwallet/./src/hooks/useInterval.ts","webpack://mytonwallet/./src/hooks/useTimeout.ts","webpack://mytonwallet/./src/components/AppInactive.module.scss?fa93","webpack://mytonwallet/./src/components/AppInactive.tsx","webpack://mytonwallet/./src/hooks/useScrolledState.ts","webpack://mytonwallet/./src/components/ui/Emoji.module.scss?1c66","webpack://mytonwallet/./src/components/ui/Emoji.tsx","webpack://mytonwallet/./src/components/settings/Settings.module.scss?98b7","webpack://mytonwallet/./src/components/settings/SettingsAbout.tsx","webpack://mytonwallet/./src/components/auth/Auth.module.scss?dc00","webpack://mytonwallet/./src/components/auth/AuthCheckPassword.tsx","webpack://mytonwallet/./src/components/ui/SuggestionList.module.scss?e7a6","webpack://mytonwallet/./src/components/ui/SuggestionList.tsx","webpack://mytonwallet/./src/components/common/InputMnemonic.module.scss?8c11","webpack://mytonwallet/./src/components/common/InputMnemonic.tsx","webpack://mytonwallet/./src/components/common/backup/BackUpContent.module.scss?30c9","webpack://mytonwallet/./src/components/common/backup/CheckWordsForm.tsx","webpack://mytonwallet/./src/components/common/backup/CheckWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthCheckWords.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmPin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBackup.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateNativeBiometrics.tsx","webpack://mytonwallet/./src/hooks/usePasswordValidation.ts","webpack://mytonwallet/./src/components/ui/CreatePasswordForm.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePassword.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatingWallet.tsx","webpack://mytonwallet/./src/components/auth/AuthBackupWarning.tsx","webpack://mytonwallet/./src/components/auth/AuthDisclaimer.tsx","webpack://mytonwallet/./src/components/auth/AuthImportMnemonic.tsx","webpack://mytonwallet/./src/hooks/useClipboardPaste.ts","webpack://mytonwallet/./src/components/auth/AuthImportViewAccount.tsx","webpack://mytonwallet/./src/components/common/backup/SafetyRulesContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSafetyRules.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsList.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSecretWords.tsx","webpack://mytonwallet/./src/components/auth/AuthStart.tsx","webpack://mytonwallet/./src/components/auth/Auth.tsx","webpack://mytonwallet/./src/components/ui/Spinner.module.scss?099b","webpack://mytonwallet/./src/components/ui/Spinner.tsx","webpack://mytonwallet/./src/components/ui/ListItem.module.scss?d4c4","webpack://mytonwallet/./src/components/ui/ListItem.tsx","webpack://mytonwallet/./src/components/auth/AuthImportWalletModal.tsx","webpack://mytonwallet/./src/util/resolveSlideTransitionName.ts","webpack://mytonwallet/./src/hooks/useModalTransitionKeys.ts","webpack://mytonwallet/./src/hooks/useCachedImage.ts","webpack://mytonwallet/./src/hooks/useAsync.ts","webpack://mytonwallet/./src/util/getCachedImageUrl.ts","webpack://mytonwallet/./src/hooks/useCardCustomization.ts","webpack://mytonwallet/./src/components/main/sections/Header/AccountButton.module.scss?95ab","webpack://mytonwallet/./src/components/main/sections/Header/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButton.module.scss?29d1","webpack://mytonwallet/./src/components/common/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButtonWrapper.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.module.scss?bcee","webpack://mytonwallet/./src/components/ledger/LedgerConfirmOperation.tsx","webpack://mytonwallet/./src/components/ui/Dropdown.tsx","webpack://mytonwallet/./src/components/ledger/LedgerConnect.tsx","webpack://mytonwallet/./src/components/ui/Skeleton.tsx","webpack://mytonwallet/./src/components/ui/Skeleton.module.scss?021e","webpack://mytonwallet/./src/components/ui/IconWithTooltip.module.scss?91f0","webpack://mytonwallet/./src/components/ui/IconWithTooltip.tsx","webpack://mytonwallet/./src/components/dapps/Dapp.module.scss?bf14","webpack://mytonwallet/./src/components/dapps/DappInfo.tsx","webpack://mytonwallet/./src/components/dapps/DappPassword.tsx","webpack://mytonwallet/./src/components/dapps/DappConnectModal.tsx","webpack://mytonwallet/./src/components/dapps/DappInfoWithAccount.tsx","webpack://mytonwallet/./src/components/dapps/DappSkeletonWithContent.tsx","webpack://mytonwallet/./src/components/dapps/DappSignDataInitial.tsx","webpack://mytonwallet/./src/components/common/TransferResult.module.scss?a52a","webpack://mytonwallet/./src/components/dapps/DappTransferComplete.tsx","webpack://mytonwallet/./src/components/dapps/DappSignDataModal.tsx","webpack://mytonwallet/./src/util/getPseudoRandomNumber.ts","webpack://mytonwallet/./src/util/swap/getSwapRate.ts","webpack://mytonwallet/./src/util/swap/getChainNetworkIcon.ts","webpack://mytonwallet/./src/components/ui/helpers/assetLogos.ts","webpack://mytonwallet/./src/components/common/TokenIcon.module.scss?68c8","webpack://mytonwallet/./src/components/common/TokenIcon.tsx","webpack://mytonwallet/./src/components/common/SensitiveDataMask.tsx","webpack://mytonwallet/./src/components/common/SensitiveDataMask.module.scss?6696","webpack://mytonwallet/./src/components/ui/SensitiveData.module.scss?5be5","webpack://mytonwallet/./src/components/ui/SensitiveData.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activity.module.scss?f503","webpack://mytonwallet/./src/components/main/sections/Content/ActivityStatusIcon.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Swap.tsx","webpack://mytonwallet/./src/util/getLocalAddressName.ts","webpack://mytonwallet/./src/components/main/sections/Content/Transaction.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activity.tsx","webpack://mytonwallet/./src/components/dapps/DappLedgerWarning.tsx","webpack://mytonwallet/./src/components/transfer/NftInfo.module.scss?aa0a","webpack://mytonwallet/./src/components/transfer/NftInfo.tsx","webpack://mytonwallet/./src/hooks/useLongPress.ts","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.module.scss?f4ba","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.tsx","webpack://mytonwallet/./src/components/ui/MenuBackdrop.tsx","webpack://mytonwallet/./src/components/ui/MenuBackdrop.module.scss?85b7","webpack://mytonwallet/./src/components/ui/InteractiveTextField.module.scss?844c","webpack://mytonwallet/./src/components/ui/InteractiveTextField.tsx","webpack://mytonwallet/./src/components/dapps/DappAmountField.tsx","webpack://mytonwallet/./src/components/dapps/DappTransactionPayload.tsx","webpack://mytonwallet/./src/components/dapps/DappTransaction.tsx","webpack://mytonwallet/./src/components/ui/Fee.module.scss?5335","webpack://mytonwallet/./src/components/ui/Fee.tsx","webpack://mytonwallet/./src/components/ui/FeeLine.tsx","webpack://mytonwallet/./src/components/ui/FeeLine.module.scss?c0f3","webpack://mytonwallet/./src/components/dapps/DappTransferInitial.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferModal.tsx","webpack://mytonwallet/./src/components/Dialogs.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.module.scss?0ba5","webpack://mytonwallet/./src/components/electron/ElectronHeader.module.scss?adc9","webpack://mytonwallet/./src/components/electron/ElectronHeader.tsx","webpack://mytonwallet/./src/hooks/useElectronDrag.ts","webpack://mytonwallet/./src/util/telegram/hooks/useTelegramMiniAppSwipeToClose.ts","webpack://mytonwallet/./src/components/explore/helpers/utils.ts","webpack://mytonwallet/./src/hooks/useHorizontalScroll.ts","webpack://mytonwallet/./src/hooks/usePrevious2.ts","webpack://mytonwallet/./src/components/explore/Category.module.scss?4c23","webpack://mytonwallet/./src/components/explore/Category.tsx","webpack://mytonwallet/./src/util/memo.ts","webpack://mytonwallet/./src/components/explore/DappFeed.module.scss?4d73","webpack://mytonwallet/./src/components/explore/DappFeedItem.tsx","webpack://mytonwallet/./src/components/explore/Explore.module.scss?3005","webpack://mytonwallet/./src/components/explore/DappFeed.tsx","webpack://mytonwallet/./src/components/ui/MenuItem.module.scss?fd35","webpack://mytonwallet/./src/components/ui/MenuItem.tsx","webpack://mytonwallet/./src/components/explore/Site.tsx","webpack://mytonwallet/./src/components/explore/ExploreSearchSuggestions.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.module.scss?9a46","webpack://mytonwallet/./src/components/explore/SiteList.tsx","webpack://mytonwallet/./src/components/explore/SiteList.module.scss?5590","webpack://mytonwallet/./src/components/explore/Explore.tsx","webpack://mytonwallet/./src/components/ledger/LedgerSelectWallets.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.tsx","webpack://mytonwallet/./src/components/main/helpers/calcSafeAreaTop.ts","webpack://mytonwallet/./src/hooks/useElementVisibility.ts","webpack://mytonwallet/./src/hooks/usePreventPinchZoomGesture.ts","webpack://mytonwallet/./src/components/common/TransactionBanner.module.scss?99c4","webpack://mytonwallet/./src/components/common/TransactionBanner.tsx","webpack://mytonwallet/./src/hooks/useQrScannerSupport.ts","webpack://mytonwallet/./src/components/transfer/Transfer.module.scss?40cb","webpack://mytonwallet/./src/components/ui/AddressBookItem.tsx","webpack://mytonwallet/./src/components/ui/AddressBook.tsx","webpack://mytonwallet/./src/components/ui/AddressInput.module.scss?066a","webpack://mytonwallet/./src/components/ui/AddressInput.tsx","webpack://mytonwallet/./src/components/domain/RenewDomainModal.module.scss?bf4b","webpack://mytonwallet/./src/components/domain/LinkingDomainModal.tsx","webpack://mytonwallet/./src/components/transfer/NftChips.tsx","webpack://mytonwallet/./src/components/transfer/NftChips.module.scss?1471","webpack://mytonwallet/./src/components/domain/RenewDomainModal.tsx","webpack://mytonwallet/./src/util/ton/formatTransferUrl.ts","webpack://mytonwallet/./src/components/common/SelectTokenButton.module.scss?97ef","webpack://mytonwallet/./src/components/common/SelectTokenButton.tsx","webpack://mytonwallet/./src/util/swap/getChainNetworkName.ts","webpack://mytonwallet/./src/components/common/TokenSelector.module.scss?759b","webpack://mytonwallet/./src/components/common/TokenSelector.tsx","webpack://mytonwallet/./src/components/ui/helpers/buildContentHtml.ts","webpack://mytonwallet/./src/hooks/useFontScale.ts","webpack://mytonwallet/./src/components/ui/RichNumberInput.tsx","webpack://mytonwallet/./src/util/saveCaretPosition.ts","webpack://mytonwallet/./src/components/receive/ReceiveModal.module.scss?beea","webpack://mytonwallet/./src/components/receive/InvoiceModal.tsx","webpack://mytonwallet/./src/util/animateHorizontalScroll.ts","webpack://mytonwallet/./src/components/ui/Tab.tsx","webpack://mytonwallet/./src/components/ui/Tab.module.scss?eb4d","webpack://mytonwallet/./src/components/ui/TabList.tsx","webpack://mytonwallet/./src/components/ui/TabList.module.scss?8978","webpack://mytonwallet/./src/components/receive/content/TonActions.module.scss?fcb4","webpack://mytonwallet/./src/components/receive/content/TonActions.tsx","webpack://mytonwallet/./src/hooks/useQrCode.ts","webpack://mytonwallet/./src/components/receive/content/TonContent.tsx","webpack://mytonwallet/./src/components/receive/content/TronActions.tsx","webpack://mytonwallet/./src/components/receive/content/TronContent.tsx","webpack://mytonwallet/./src/components/receive/Content.tsx","webpack://mytonwallet/./src/components/receive/ReceiveModal.tsx","webpack://mytonwallet/./src/components/common/TransferResult.tsx","webpack://mytonwallet/./src/global/helpers/getHelpCenterUrl.ts","webpack://mytonwallet/./src/components/ui/hooks/useAmountInputState.ts","webpack://mytonwallet/./src/components/staking/hooks/useTokenDropdown.ts","webpack://mytonwallet/./src/hooks/useTransitionActiveKey.ts","webpack://mytonwallet/./src/components/ui/AmountInputMaxButton.module.scss?2744","webpack://mytonwallet/./src/components/ui/AmountInputMaxButton.tsx","webpack://mytonwallet/./src/components/ui/TokenDropdown.module.scss?d4fd","webpack://mytonwallet/./src/components/ui/TokenDropdown.tsx","webpack://mytonwallet/./src/components/ui/AmountInput.module.scss?1bdd","webpack://mytonwallet/./src/components/ui/AmountInput.tsx","webpack://mytonwallet/./src/global/helpers/number.ts","webpack://mytonwallet/./src/components/ui/RichNumberField.tsx","webpack://mytonwallet/./src/components/staking/Staking.module.scss?5f25","webpack://mytonwallet/./src/components/staking/StakingInitial.tsx","webpack://mytonwallet/./src/util/ton/calcJettonStakingApr.ts","webpack://mytonwallet/./src/components/staking/StakeModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.module.scss?734c","webpack://mytonwallet/./src/components/staking/StakingProfitItem.tsx","webpack://mytonwallet/./src/components/staking/StakingProfileItem.module.scss?092e","webpack://mytonwallet/./src/components/staking/StakingInfoContent.tsx","webpack://mytonwallet/./src/components/staking/StakingInfoModal.tsx","webpack://mytonwallet/./src/components/staking/UnstakeModal.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.module.scss?8e42","webpack://mytonwallet/./src/components/main/helpers/calcVestingAmountByStatus.ts","webpack://mytonwallet/./src/components/vesting/VestingModal.module.scss?2a82","webpack://mytonwallet/./src/components/vesting/VestingModal.tsx","webpack://mytonwallet/./src/components/vesting/VestingPasswordModal.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/helpers/sendMenu.ts","webpack://mytonwallet/./src/components/common/FeeDetailsModal.module.scss?8cde","webpack://mytonwallet/./src/components/common/FeeDetailsModal.tsx","webpack://mytonwallet/./src/components/swap/Swap.module.scss?9ed7","webpack://mytonwallet/./src/components/swap/components/SwapSubmitButton.tsx","webpack://mytonwallet/./src/hooks/useAsyncResolvers.ts","webpack://mytonwallet/./src/components/swap/SwapDexChooser.module.scss?b649","webpack://mytonwallet/./src/components/swap/SwapDexChooser.tsx","webpack://mytonwallet/./src/components/swap/SwapSettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapInitial.tsx","webpack://mytonwallet/./src/util/text.ts","webpack://mytonwallet/./src/components/transfer/CommentSection.tsx","webpack://mytonwallet/./src/components/transfer/TransferInitial.tsx","webpack://mytonwallet/./src/hooks/useContextMenuHandlers.ts","webpack://mytonwallet/./src/components/ui/WithContextMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.module.scss?b2d4","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.module.scss?a3a8","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.tsx","webpack://mytonwallet/./src/util/calcChangeValue.ts","webpack://mytonwallet/./src/components/main/sections/Card/helpers/calculateFullBalance.ts","webpack://mytonwallet/./src/hooks/useUpdateIndicator.ts","webpack://mytonwallet/./src/components/ui/ClockIcon.module.scss?42cd","webpack://mytonwallet/./src/components/ui/ClockIcon.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardButton.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardButton.module.scss?f674","webpack://mytonwallet/./src/components/ui/AnimatedCounter.tsx","webpack://mytonwallet/./src/components/ui/AnimatedCounter.module.scss?5cb5","webpack://mytonwallet/./src/components/main/sections/Card/Card.module.scss?fdf3","webpack://mytonwallet/./src/components/main/sections/Card/CardAddress.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CurrencySwitcherMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.module.scss?8b12","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardManager.tsx","webpack://mytonwallet/./src/components/main/helpers/cardColors.ts","webpack://mytonwallet/./src/components/common/TokenPriceChart.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.module.scss?014e","webpack://mytonwallet/./src/components/main/sections/Card/TokenCard.tsx","webpack://mytonwallet/./src/components/main/sections/Card/Card.tsx","webpack://mytonwallet/./src/components/main/sections/Card/helpers/getSensitiveDataMaskSkinFromCardNft.ts","webpack://mytonwallet/./src/components/main/helpers/scrollableContainer.ts","webpack://mytonwallet/./src/components/main/modals/HideNftModal.tsx","webpack://mytonwallet/./src/hooks/useInfiniteScroll.ts","webpack://mytonwallet/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://mytonwallet/./src/components/ui/InfiniteScroll.tsx","webpack://mytonwallet/./src/util/resetScroll.ts","webpack://mytonwallet/./src/components/main/sections/Content/Activities.module.scss?215b","webpack://mytonwallet/./src/components/main/sections/Content/hooks/useActivityListEntry.ts","webpack://mytonwallet/./src/components/main/sections/Content/ActivityListItem.tsx","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.module.scss?1d3d","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activities.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Token.module.scss?2972","webpack://mytonwallet/./src/components/main/sections/Content/Token.tsx","webpack://mytonwallet/./src/components/main/sections/Content/hooks/useTokenContextMenu.ts","webpack://mytonwallet/./src/components/main/sections/Content/Assets.module.scss?2b3b","webpack://mytonwallet/./src/components/main/sections/Content/Assets.tsx","webpack://mytonwallet/./src/hooks/useVesting.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.module.scss?fecc","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.tsx","webpack://mytonwallet/./src/components/ui/Radio.tsx","webpack://mytonwallet/./src/components/ui/Radio.module.scss?1611","webpack://mytonwallet/./src/components/mediaViewer/hooks/useNftMenu.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.module.scss?7d45","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Nft.module.scss?a2fa","webpack://mytonwallet/./src/components/main/sections/Content/Nft.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Nfts.tsx","webpack://mytonwallet/./src/components/main/sections/Content/NftSelectionHeader.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Content.module.scss?df0c","webpack://mytonwallet/./src/components/main/sections/Content/Content.tsx","webpack://mytonwallet/./src/components/main/sections/Header/AccountRenameModal.tsx","webpack://mytonwallet/./src/components/main/sections/Header/AccountSelector.module.scss?89af","webpack://mytonwallet/./src/components/main/sections/Header/AccountSelector.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/Buttons.module.scss?78bd","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/AppLockButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/QrScannerButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/SettingsButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/ToggleFullscreenButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/ToggleLayoutButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/ToggleSensitiveDataButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/Header.module.scss?b631","webpack://mytonwallet/./src/components/main/sections/Header/Header.tsx","webpack://mytonwallet/./src/hooks/useBrowserUiColor.ts","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.module.scss?104f","webpack://mytonwallet/./src/components/main/sections/Warnings/BackupWarning.tsx","webpack://mytonwallet/./src/components/ui/Collapsible.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/RenewDomainWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/SecurityWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/TronScamWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.tsx","webpack://mytonwallet/./src/components/main/Main.tsx","webpack://mytonwallet/./src/components/main/Main.module.scss?6d95","webpack://mytonwallet/./src/components/main/modals/AddAccountPasswordModal.tsx","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.module.scss?8d66","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.tsx","webpack://mytonwallet/./src/components/auth/MnemonicCheck.tsx","webpack://mytonwallet/./src/components/auth/MnemonicList.tsx","webpack://mytonwallet/./src/components/auth/MnemonicPrivateKey.tsx","webpack://mytonwallet/./src/components/auth/SafetyRules.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.module.scss?7942","webpack://mytonwallet/./src/components/main/modals/NftAttributesModal.module.scss?d684","webpack://mytonwallet/./src/components/main/modals/NftAttributesModal.tsx","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.tsx","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.module.scss?8236","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.module.scss?87fb","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.module.scss?77a6","webpack://mytonwallet/./src/hooks/usePrevDuringAnimation.ts","webpack://mytonwallet/./src/components/common/Countdown.module.scss?d513","webpack://mytonwallet/./src/components/common/Countdown.tsx","webpack://mytonwallet/./src/components/common/SwapTokensInfo.module.scss?7d2b","webpack://mytonwallet/./src/components/common/SwapTokensInfo.tsx","webpack://mytonwallet/./src/components/common/TransactionFee.tsx","webpack://mytonwallet/./src/components/common/TransactionFee.module.scss?5d5d","webpack://mytonwallet/./src/components/main/modals/TransactionModal.module.scss?6dca","webpack://mytonwallet/./src/components/main/modals/SwapActivityModal.tsx","webpack://mytonwallet/./src/components/common/TransactionAmount.module.scss?8894","webpack://mytonwallet/./src/components/common/TransactionAmount.tsx","webpack://mytonwallet/./src/components/main/modals/TransactionModal.tsx","webpack://mytonwallet/./src/components/main/modals/UnhideNftModal.tsx","webpack://mytonwallet/./src/components/ui/Notification.tsx","webpack://mytonwallet/./src/components/ui/Notification.module.scss?743a","webpack://mytonwallet/./src/components/main/Notifications.tsx","webpack://mytonwallet/./src/hooks/useHideBottomBar.ts","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.module.scss?e839","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.module.scss?afa2","webpack://mytonwallet/./src/components/mediaViewer/helpers/ghostAnimation.ts","webpack://mytonwallet/./src/components/ui/ShowTransition.tsx","webpack://mytonwallet/./src/components/mediaViewer/Actions.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaInfo.tsx","webpack://mytonwallet/./src/hooks/useSignalRef.ts","webpack://mytonwallet/./src/components/mediaViewer/hooks/useZoomChangeSignal.ts","webpack://mytonwallet/./src/components/mediaViewer/Media.tsx","webpack://mytonwallet/./src/components/mediaViewer/Slides.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.tsx","webpack://mytonwallet/./src/util/isElementInViewport.ts","webpack://mytonwallet/./src/components/mintCard/CardPros.module.scss?2970","webpack://mytonwallet/./src/components/mintCard/CardPros.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardModal.module.scss?777c","webpack://mytonwallet/./src/components/mintCard/CardRoster.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardModal.tsx","webpack://mytonwallet/./src/components/ui/Switcher.tsx","webpack://mytonwallet/./src/components/ui/Switcher.module.scss?8b13","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.module.scss?14ce","webpack://mytonwallet/./src/components/settings/biometrics/TurnOff.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOffWarning.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOn.tsx","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsTurnOn.tsx","webpack://mytonwallet/./src/components/settings/SettingsAppearance.tsx","webpack://mytonwallet/./src/util/getAccentColorsFromNfts.ts","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.tsx","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.module.scss?34ea","webpack://mytonwallet/./src/components/ui/Draggable.tsx","webpack://mytonwallet/./src/components/ui/Draggable.module.scss?804f","webpack://mytonwallet/./src/components/settings/SettingsTokens.tsx","webpack://mytonwallet/./src/components/settings/SettingsAssets.tsx","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.module.scss?141f","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.tsx","webpack://mytonwallet/./src/components/settings/SettingsDapps.tsx","webpack://mytonwallet/./src/util/getBuildPlatform.ts","webpack://mytonwallet/./src/components/settings/SettingsDeveloperOptions.tsx","webpack://mytonwallet/./src/components/settings/SettingsDisclaimer.tsx","webpack://mytonwallet/./src/components/settings/nfts/HiddenByUserNft.tsx","webpack://mytonwallet/./src/components/settings/nfts/ProbablyScamNft.tsx","webpack://mytonwallet/./src/components/settings/SettingsHiddenNfts.tsx","webpack://mytonwallet/./src/components/settings/SettingsLanguage.tsx","webpack://mytonwallet/./src/components/settings/SettingsPushNotifications.tsx","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/index.js","webpack://mytonwallet/./src/components/settings/backup/Backup.tsx","webpack://mytonwallet/./src/components/common/backup/PrivateKeyContent.tsx","webpack://mytonwallet/./src/components/settings/backup/Backup.module.scss?612f","webpack://mytonwallet/./src/components/settings/backup/BackupPrivateKey.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSafetyRules.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSecretWords.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsToggle.tsx","webpack://mytonwallet/./src/components/settings/SettingsSecurity.tsx","webpack://mytonwallet/./src/components/settings/SettingsTokenList.tsx","webpack://mytonwallet/./src/components/settings/SettingsWalletVersion.tsx","webpack://mytonwallet/./src/components/settings/Settings.tsx","webpack://mytonwallet/./src/components/settings/SettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapBlockchain.tsx","webpack://mytonwallet/./src/components/common/SwapResult.module.scss?5045","webpack://mytonwallet/./src/components/common/SwapResult.tsx","webpack://mytonwallet/./src/components/swap/SwapComplete.tsx","webpack://mytonwallet/./src/components/swap/SwapPassword.tsx","webpack://mytonwallet/./src/components/swap/SwapWaitTokens.tsx","webpack://mytonwallet/./src/components/swap/SwapModal.tsx","webpack://mytonwallet/./src/components/transfer/TransferComplete.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.module.scss?aa7f","webpack://mytonwallet/./src/components/transfer/TransferConfirm.tsx","webpack://mytonwallet/./src/components/transfer/TransferMultiNftProcess.tsx","webpack://mytonwallet/./src/components/transfer/TransferPassword.tsx","webpack://mytonwallet/./src/components/transfer/TransferModal.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.module.scss?8c12","webpack://mytonwallet/./src/components/ui/LoadingOverlay.tsx","webpack://mytonwallet/./src/components/ui/LoadingOverlay.module.scss?7efd","webpack://mytonwallet/./src/components/App.module.scss?a9d3","webpack://mytonwallet/./src/components/App.tsx","webpack://mytonwallet/./src/util/electron.ts","webpack://mytonwallet/./src/index.tsx","webpack://mytonwallet/./src/util/fonts.ts"],"sourcesContent":["var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"mytonwallet:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/**\n * @since 0.0.1\n */\nexport var BarcodeFormat;\n(function (BarcodeFormat) {\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Aztec\"] = \"AZTEC\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Codabar\"] = \"CODABAR\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code39\"] = \"CODE_39\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code93\"] = \"CODE_93\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code128\"] = \"CODE_128\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"DataMatrix\"] = \"DATA_MATRIX\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean8\"] = \"EAN_8\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean13\"] = \"EAN_13\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Itf\"] = \"ITF\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Pdf417\"] = \"PDF_417\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"QrCode\"] = \"QR_CODE\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcA\"] = \"UPC_A\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcE\"] = \"UPC_E\";\n})(BarcodeFormat || (BarcodeFormat = {}));\n/**\n * @since 0.0.1\n */\nexport var BarcodeValueType;\n(function (BarcodeValueType) {\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"CalendarEvent\"] = \"CALENDAR_EVENT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"ContactInfo\"] = \"CONTACT_INFO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"DriversLicense\"] = \"DRIVERS_LICENSE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Email\"] = \"EMAIL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Geo\"] = \"GEO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Isbn\"] = \"ISBN\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Phone\"] = \"PHONE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Product\"] = \"PRODUCT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Sms\"] = \"SMS\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Text\"] = \"TEXT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Url\"] = \"URL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Wifi\"] = \"WIFI\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Unknown\"] = \"UNKNOWN\";\n})(BarcodeValueType || (BarcodeValueType = {}));\n/**\n * @since 7.0.0\n */\nexport var Resolution;\n(function (Resolution) {\n    /**\n     * @since 7.0.0\n     */\n    Resolution[Resolution[\"640x480\"] = 0] = \"640x480\";\n    /**\n     * @since 7.0.0\n     */\n    Resolution[Resolution[\"1280x720\"] = 1] = \"1280x720\";\n    /**\n     * @since 7.0.0\n     */\n    Resolution[Resolution[\"1920x1080\"] = 2] = \"1920x1080\";\n    /**\n     * @since 7.2.0\n     */\n    Resolution[Resolution[\"3840x2160\"] = 3] = \"3840x2160\";\n})(Resolution || (Resolution = {}));\n/**\n * @since 0.0.1\n */\nexport var LensFacing;\n(function (LensFacing) {\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Front\"] = \"FRONT\";\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Back\"] = \"BACK\";\n})(LensFacing || (LensFacing = {}));\n/**\n * @since 5.1.0\n */\nexport var GoogleBarcodeScannerModuleInstallState;\n(function (GoogleBarcodeScannerModuleInstallState) {\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"PENDING\"] = 1] = \"PENDING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOADING\"] = 2] = \"DOWNLOADING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"CANCELED\"] = 3] = \"CANCELED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"COMPLETED\"] = 4] = \"COMPLETED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"FAILED\"] = 5] = \"FAILED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"INSTALLING\"] = 6] = \"INSTALLING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOAD_PAUSED\"] = 7] = \"DOWNLOAD_PAUSED\";\n})(GoogleBarcodeScannerModuleInstallState || (GoogleBarcodeScannerModuleInstallState = {}));\n/**\n * @since 7.0.0\n */\nexport var AddressType;\n(function (AddressType) {\n    /**\n     * @since 7.0.0\n     */\n    AddressType[AddressType[\"HOME\"] = 0] = \"HOME\";\n    /**\n     * @since 7.0.0\n     */\n    AddressType[AddressType[\"UNKNOWN\"] = 1] = \"UNKNOWN\";\n    /**\n     * @since 7.0.0\n     */\n    AddressType[AddressType[\"WORK\"] = 2] = \"WORK\";\n})(AddressType || (AddressType = {}));\n/**\n * @since 7.0.0\n */\nexport var EmailFormatType;\n(function (EmailFormatType) {\n    /**\n     * @since 7.0.0\n     */\n    EmailFormatType[EmailFormatType[\"HOME\"] = 0] = \"HOME\";\n    /**\n     * @since 7.0.0\n     */\n    EmailFormatType[EmailFormatType[\"UNKNOWN\"] = 1] = \"UNKNOWN\";\n    /**\n     * @since 7.0.0\n     */\n    EmailFormatType[EmailFormatType[\"WORK\"] = 2] = \"WORK\";\n})(EmailFormatType || (EmailFormatType = {}));\n/**\n * @since 7.0.0\n */\nexport var PhoneFormatType;\n(function (PhoneFormatType) {\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"FAX\"] = 0] = \"FAX\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"HOME\"] = 1] = \"HOME\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"MOBILE\"] = 2] = \"MOBILE\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"UNKNOWN\"] = 3] = \"UNKNOWN\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"WORK\"] = 4] = \"WORK\";\n})(PhoneFormatType || (PhoneFormatType = {}));\n/**\n * @since 7.0.0\n */\nexport var WifiEncryptionType;\n(function (WifiEncryptionType) {\n    /**\n     * @since 7.0.0\n     */\n    WifiEncryptionType[WifiEncryptionType[\"OPEN\"] = 1] = \"OPEN\";\n    /**\n     * @since 7.0.0\n     */\n    WifiEncryptionType[WifiEncryptionType[\"WEP\"] = 2] = \"WEP\";\n    /**\n     * @since 7.0.0\n     */\n    WifiEncryptionType[WifiEncryptionType[\"WPA\"] = 3] = \"WPA\";\n})(WifiEncryptionType || (WifiEncryptionType = {}));\n//# sourceMappingURL=definitions.js.map","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","import { TONCOIN } from '../config';\nimport { Big } from '../lib/big.js';\n\nBig.RM = 0; // RoundDown\nBig.NE = -100000; // Disable exponential form\nBig.PE = 100000; // Disable exponential form\n\nconst ten = Big(10);\n\nexport function fromDecimal(value: string | number, decimals?: number) {\n  return BigInt(Big(value).mul(ten.pow(decimals ?? TONCOIN.decimals)).round().toString());\n}\n\nexport function toDecimal(value: bigint | number, decimals?: number, noFloor = false) {\n  return toBig(value, decimals ?? TONCOIN.decimals, noFloor).toString();\n}\n\nexport function toBig(value: bigint | number, decimals: number = TONCOIN.decimals, noFloor = false) {\n  return Big(value.toString()).div(ten.pow(decimals)).round(decimals, noFloor ? Big.roundHalfUp : undefined);\n}\n\nexport function roundDecimal(value: string, decimals: number) {\n  return Big(value).round(decimals).toString();\n}\n","import { ONE_TON } from '../config';\nimport { fromDecimal } from './decimals';\nimport { randomBytes } from './random';\n\nexport const BIGINT_PREFIX = 'bigint:';\n\nexport function bigintReviver(this: any, key: string, value: any) {\n  if (typeof value === 'string' && value.startsWith(BIGINT_PREFIX)) {\n    return BigInt(value.slice(7));\n  }\n  return value;\n}\n\nexport function bigintAbs(value: bigint) {\n  return value === -0n || value < 0n ? -value : value;\n}\n\nexport function bigintSum(values: bigint[]) {\n  let result = 0n;\n  for (const value of values) result += value;\n  return result;\n}\n\nexport function bigintDivideToNumber(value: bigint, num: number) {\n  return (value * ONE_TON) / fromDecimal(num);\n}\n\nexport function bigintMultiplyToNumber(value: bigint, num: number) {\n  return (value * fromDecimal(num)) / ONE_TON;\n}\n\nexport function bigintRandom(bytes: number) {\n  let value = BigInt(0);\n  for (const randomNumber of randomBytes(bytes)) {\n    const randomBigInt = BigInt(randomNumber);\n    value = (value << BigInt(8)) + randomBigInt;\n  }\n  return value;\n}\n\nexport function bigintCountBits(value: bigint) {\n  const binaryString = value.toString(2);\n  return binaryString.length;\n}\n\nexport function bigintMax(value0: bigint, value1: bigint) {\n  return value0 > value1 ? value0 : value1;\n}\n\nexport function bigintMin(value0: bigint, value1: bigint) {\n  return value0 < value1 ? value0 : value1;\n}\n\nexport function bigintMultiplePercent(value: bigint, percent: number) {\n  return (value * fromDecimal(percent / 100)) / ONE_TON;\n}\n","import type { ApiTonWalletVersion, ContractInfo, ContractName } from './types';\n\nimport { JettonStakingGas } from './contracts/JettonStaking/imports/constants';\n\nexport const TON_BIP39_PATH = 'm/44\\'/607\\'/0\\'';\n\nexport const ONE_TON = 1_000_000_000n;\nexport const TOKEN_TRANSFER_AMOUNT = 2000000000n; // 0.05 TON\nexport const TINY_TOKEN_TRANSFER_AMOUNT = 18000000n; // 0.018 TON\nexport const TOKEN_TRANSFER_REAL_AMOUNT = 32100000n; // 0.0321 TON\nexport const TINY_TOKEN_TRANSFER_REAL_AMOUNT = 8000000n; // 0.008 TON\nexport const TINIEST_TOKEN_TRANSFER_REAL_AMOUNT = 3000000n; // 0.003 TON\nexport const TOKEN_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\nexport const CLAIM_MINTLESS_AMOUNT = 20000000n; // 0.02 TON\n\n/** The amount that MyTonWallet attaches to NFT transfers */\nexport const NFT_TRANSFER_AMOUNT = 100000000n; // 0.1 TON\nexport const NFT_TRANSFER_REAL_AMOUNT = 5000000n; // 0.005 TON\nexport const NFT_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\n/**\n * When the NFT contract handles the payload we send, it simply adds its data to the payload. If the resulting payload\n * size becomes greater than the cell capacity, the contract fails to send the NFT. To avoid that, we keep some free\n * space in the payload cell we send. This constant is the size of the free space in bits.\n */\nexport const NFT_PAYLOAD_SAFE_MARGIN = 14 * 8;\n\nexport const TON_GAS = {\n  stakeNominators: ONE_TON,\n  unstakeNominators: ONE_TON,\n  stakeLiquid: ONE_TON,\n  unstakeLiquid: ONE_TON,\n  stakeJettonsForward: JettonStakingGas.STAKE_JETTONS,\n  stakeJettons: JettonStakingGas.STAKE_JETTONS + TOKEN_TRANSFER_AMOUNT,\n  unstakeJettons: JettonStakingGas.UNSTAKE_JETTONS,\n  claimJettons: JettonStakingGas.JETTON_TRANSFER + JettonStakingGas.SIMPLE_UPDATE_REQUEST,\n  changeDns: 15_000_000n, // 0.015 TON\n  stakeEthena: TOKEN_TRANSFER_AMOUNT + 100_000_000n, // 0.15 TON\n  stakeEthenaForward: 100_000_000n, // 0.1 TON\n  unstakeEthena: TOKEN_TRANSFER_AMOUNT + 100_000_000n, // 0.15 TON\n  unstakeEthenaForward: 100_000_000n, // 0.1 TON\n  unstakeEthenaLocked: 150_000_000n, // 0.15 TON\n  unstakeEthenaLockedForward: 70_000_000n, // 0.07 TON\n} as const;\n\nexport const TON_GAS_REAL = {\n  stakeNominators: 1_000_052_853n,\n  unstakeNominators: 148_337_433n,\n  stakeLiquid: 20_251_387n,\n  unstakeLiquid: 18_625_604n,\n  stakeJettons: 74_879_996n,\n  unstakeJettons: 59_971_662n,\n  claimJettons: 57_053_859n,\n  stakeEthena: 116_690_790n,\n  unstakeEthena: 113_210_330n,\n  unstakeEthenaLocked: 37_612_000n,\n};\n\nexport const STAKE_COMMENT = 'd';\nexport const UNSTAKE_COMMENT = 'w';\n\nexport const ATTEMPTS = 5;\n\nexport const DEFAULT_DECIMALS = 9;\nexport const DEFAULT_IS_BOUNCEABLE = true;\nexport const WALLET_IS_BOUNCEABLE = false;\n\n// Fee may change, so we add 5% for more reliability. This is only safe for low-fee blockchains such as TON.\nexport const FEE_FACTOR = 1.05;\n\nexport const ALL_WALLET_VERSIONS: ApiTonWalletVersion[] = [\n  'simpleR1', 'simpleR2', 'simpleR3', 'v2R1', 'v2R2', 'v3R1', 'v3R2', 'v4R2', 'W5',\n];\n\nexport const OUR_FEE_PAYLOAD_BOC = 'te6cckEBAQEABgAACE0jhUPUcYAL';\n\nexport const RAW_ADDRESS_LENGTH = 66;\n\nexport enum Workchain {\n  MasterChain = -1,\n  BaseChain = 0,\n}\n\nexport const WORKCHAIN = Workchain.BaseChain;\nexport const TRANSFER_TIMEOUT_SEC = 600; // 10 min.\n\nexport const DEFAULT_MAX_MESSAGES = 4;\nexport const LEDGER_MAX_MESSAGES = 1;\nexport const W5_MAX_MESSAGES = 255;\n\nexport const LEDGER_VESTING_SUBWALLET_ID = 0x10C;\n\nexport enum OpCode {\n  Comment = 0,\n  Encrypted = 0x2167da4b,\n  OurFee = 0x4d238543,\n  Bounced = 0xffffffff,\n}\n\nexport enum JettonOpCode {\n  Transfer = 0xf8a7ea5,\n  TransferNotification = 0x7362d09c,\n  InternalTransfer = 0x178d4519,\n  Excesses = 0xd53276db,\n  Burn = 0x595f07bc,\n  BurnNotification = 0x7bdd97de,\n}\n\nexport enum NftOpCode {\n  TransferOwnership = 0x5fcc3d14,\n  OwnershipAssigned = 0x05138d91,\n  Excesses = 0xd53276db,\n}\n\nexport enum LiquidStakingOpCode {\n  // Pool\n  RequestLoan = 0xe642c965,\n  LoanRepayment = 0xdfdca27b,\n  Deposit = 0x47d54391,\n  Withdraw = 0x319B0CDC,\n  Withdrawal = 0x0a77535c,\n  DeployController = 0xb27edcad,\n  Touch = 0x4bc7c2df,\n  Donate = 0x73affe21,\n  // NFT\n  DistributedAsset = 0xdb3b8abd,\n  // Jetton\n  Vote = 0x69fb306c,\n}\n\nexport enum JettonStakingOpCode {\n  UnstakeRequest = 0x499a9262,\n  ClaimRewards = 0x78d9f109,\n}\n\nexport enum VestingV1OpCode {\n  AddWhitelist = 0x7258a69b,\n}\n\nexport enum SingleNominatorOpCode {\n  Withdraw = 0x1000,\n  ChangeValidator = 0x1001,\n}\n\nexport enum DnsOpCode {\n  ChangeRecord = 0x4eb1f0f9,\n}\n\nexport enum TeleitemOpCode {\n  Ok = 0xa37a0983,\n}\n\nexport enum OtherOpCode {\n  TokenBridgePaySwap = 0x8,\n}\n\nexport enum ContractType {\n  Wallet = 'wallet',\n  Staking = 'staking',\n}\n\nexport enum DnsCategory {\n  DnsNextResolver = 'dns_next_resolver',\n  Wallet = 'wallet',\n  Site = 'site',\n  BagId = 'storage',\n  Unknown = 'unknown',\n}\n\nexport const EXCESS_OP_CODES = [\n  JettonOpCode.Excesses,\n  TeleitemOpCode.Ok,\n];\n\nexport const DNS_CATEGORY_HASH_MAP = {\n  dns_next_resolver: '19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff',\n  wallet: 'e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b',\n  site: 'fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe',\n  storage: '49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7',\n} as const;\n\nexport const KnownContracts: Record<ContractName, ContractInfo> = {\n  simpleR1: {\n    name: 'simpleR1',\n    hash: '3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd',\n    type: ContractType.Wallet,\n  },\n  simpleR2: {\n    name: 'simpleR2',\n    hash: '672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df',\n    type: ContractType.Wallet,\n  },\n  simpleR3: {\n    name: 'simpleR3',\n    hash: 'd95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52',\n    type: ContractType.Wallet,\n  },\n  v2R1: {\n    name: 'v2R1',\n    hash: 'fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029',\n    type: ContractType.Wallet,\n  },\n  v2R2: {\n    name: 'v2R2',\n    hash: 'b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983',\n    type: ContractType.Wallet,\n  },\n  v3R1: {\n    name: 'v3R1',\n    hash: '11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6',\n    type: ContractType.Wallet,\n  },\n  v3R2: {\n    name: 'v3R2',\n    hash: 'df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14',\n    type: ContractType.Wallet,\n  },\n  v4R1: {\n    name: 'v4R1',\n    hash: '1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf',\n    type: ContractType.Wallet,\n  },\n  v4R2: {\n    name: 'v4R2',\n    hash: '5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1',\n    type: ContractType.Wallet,\n  },\n  W5: {\n    name: 'W5',\n    hash: '7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5',\n    type: ContractType.Wallet,\n  },\n  highloadV2: {\n    name: 'highloadV2',\n    hash: 'fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e',\n    type: ContractType.Wallet,\n  },\n  nominatorPool: {\n    name: 'nominatorPool',\n    hash: '26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff',\n    type: ContractType.Staking,\n  },\n  multisig: {\n    name: 'multisig',\n    hash: '45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2',\n    type: ContractType.Wallet,\n  },\n  multisigV2: {\n    name: 'multisigV2',\n    hash: 'eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97',\n    type: ContractType.Wallet,\n  },\n  vesting: {\n    name: 'vesting',\n    hash: '69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83',\n    type: ContractType.Wallet,\n  },\n  multisigNew: {\n    name: 'multisigNew',\n    hash: '7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f',\n    type: ContractType.Wallet,\n  },\n  dedustPool: {\n    name: 'dedustPool',\n    hash: 'f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62',\n    isSwapAllowed: true,\n  },\n  dedustVaultNative: {\n    name: 'dedustVaultNative',\n    hash: '64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQAYqo4u7VF0fa4DPAebk4g9lBytj2VFny7pzXR0trjtXQaO\n  dedustVaultJetton: {\n    name: 'dedustVaultJetton',\n    hash: '5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307',\n    isSwapAllowed: true,\n  },\n  stonPtonWallet: {\n    name: 'stonPtonWallet',\n    hash: '6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880',\n    isSwapAllowed: true,\n  },\n  stonRouter: {\n    name: 'stonRouter',\n    hash: '14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da',\n    isSwapAllowed: true,\n  },\n  stonRouterV2_1: {\n    name: 'stonRouterV2_1',\n    hash: 'd61cb7fb7bee0cc414286a482fccdec53c3f8717e4aae4fc362d98ab6254e6cd',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_1: {\n    name: 'stonPoolV2_1',\n    hash: '16cc513c380e329f45d54f294787e2030e289799eca138961c1cd7e26e882c7c',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQCS4UEa5UaJLzOyyKieqQOQ2P9M-7kXpkO5HnP3Bv250cN3\n  stonRouterV2_2: {\n    name: 'stonRouterV2_2',\n    hash: '094b5084111addda1b6fac7007c8a8f85ff4ccc63475815ab3dfa3b5b4c6b102',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQBSNX_5mSikBVttWhIaIb0f8jJU7fL6kvyyFVppd7dWRO6M\n  stonRouterV2_2_alt: {\n    name: 'stonRouterV2_2_alt',\n    hash: 'd41e7563afa05ee008655e190920d3f53de9cab4c2d4e10ee1d0f158e95e52e5',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_2: {\n    name: 'stonPoolV2_2',\n    hash: '11eaf6db706e63adf9327897aaa845c77a631856abfc14375837f19b617cacb4',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQBiLHuQjDj4fNyCD7Ch5HwpNGldlb5g-LMwQ1kStQ4NM5kv\n  stonPtonWalletV2: {\n    name: 'stonPtonWalletV2',\n    hash: '2761042202032258de9eb1b672e1ec2e4f13b2af00700195801ada33f7ced1b6',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQC_-t0nCnOFMdp7E7qPxAOCbCWGFz-e3pwxb6tTvFmshjt5\n  toncoRouter: {\n    name: 'toncoRouter',\n    hash: '9b9891eaa7db7becc6ccdda1bd9a8d25dc3df2817d57e4b27ec003daf81a4439',\n    isSwapAllowed: true,\n  },\n};\n","import { decodeExtensionMessage, encodeExtensionMessage } from './extensionMessageSerializer';\nimport generateUniqueId from './generateUniqueId';\nimport { logDebugError } from './logs';\n\nexport interface CancellableCallback {\n  (\n    ...args: any[]\n  ): void;\n\n  isCanceled?: boolean;\n  acceptsBuffer?: boolean;\n}\n\ntype InitData = {\n  channel?: string;\n  type: 'init';\n  args: any[];\n};\n\ntype CallMethodData = {\n  channel?: string;\n  type: 'callMethod';\n  messageId?: string;\n  name: string;\n  args: any;\n  withCallback?: boolean;\n};\n\nexport type OriginMessageData = InitData | CallMethodData | {\n  channel?: string;\n  type: 'cancelProgress';\n  messageId: string;\n};\n\nexport interface OriginMessageEvent extends MessageEvent {\n  data: OriginMessageData;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nexport type ApiUpdate = { type: string } & any;\n\nexport type WorkerMessageData = {\n  channel?: string;\n  type: 'update';\n  update: ApiUpdate;\n} | {\n  channel?: string;\n  type: 'methodResponse';\n  messageId: string;\n  response?: any;\n  error?: { message: string };\n} | {\n  channel?: string;\n  type: 'methodCallback';\n  messageId: string;\n  callbackArgs: any[];\n} | {\n  channel?: string;\n  type: 'unhandledError';\n  error?: { message: string; stack?: string };\n};\n\nexport interface WorkerMessageEvent {\n  data: WorkerMessageData;\n}\n\ninterface RequestStates {\n  messageId: string;\n  resolve: AnyToVoidFunction;\n  reject: AnyToVoidFunction;\n  callback: AnyToVoidFunction;\n}\n\ntype InputRequestTypes = Record<string, AnyFunction>;\n\ntype Values<T> = T[keyof T];\nexport type RequestTypes<T extends InputRequestTypes> = Values<{\n  [Name in keyof (T)]: {\n    name: Name & string;\n    args: Parameters<T[Name]>;\n  }\n}>;\n\nclass ConnectorClass<T extends InputRequestTypes> {\n  private requestStates = new Map<string, RequestStates>();\n\n  private requestStatesByCallback = new Map<AnyToVoidFunction, RequestStates>();\n\n  constructor(\n    public target: Worker | Window | chrome.runtime.Port | DedicatedWorkerGlobalScope,\n    private onUpdate?: (update: ApiUpdate) => void,\n    private channel?: string,\n    private shouldUseJson?: boolean,\n    private targetOrigin = '*',\n  ) {\n  }\n\n  public destroy() {\n  }\n\n  init(...args: any[]) {\n    this.postMessage({\n      type: 'init',\n      args,\n    });\n  }\n\n  request(messageData: RequestTypes<T>) {\n    const { requestStates, requestStatesByCallback } = this;\n\n    const messageId = generateUniqueId();\n    const payload: CallMethodData = {\n      type: 'callMethod',\n      messageId,\n      ...messageData,\n    };\n\n    const requestState = { messageId } as RequestStates;\n\n    // Re-wrap type because of `postMessage`\n    const promise = new Promise<any>((resolve, reject) => {\n      Object.assign(requestState, { resolve, reject });\n    });\n\n    if (typeof payload.args[payload.args.length - 1] === 'function') {\n      payload.withCallback = true;\n\n      const callback = payload.args.pop() as AnyToVoidFunction;\n      requestState.callback = callback;\n      requestStatesByCallback.set(callback, requestState);\n    }\n\n    requestStates.set(messageId, requestState);\n    promise\n      .catch(() => undefined)\n      .finally(() => {\n        requestStates.delete(messageId);\n\n        if (requestState.callback) {\n          requestStatesByCallback.delete(requestState.callback);\n        }\n      });\n\n    this.postMessage(payload);\n\n    return promise;\n  }\n\n  cancelCallback(progressCallback: CancellableCallback) {\n    progressCallback.isCanceled = true;\n\n    const { messageId } = this.requestStatesByCallback.get(progressCallback) || {};\n    if (!messageId) {\n      return;\n    }\n\n    this.postMessage({\n      type: 'cancelProgress',\n      messageId,\n    });\n  }\n\n  onMessage(data: WorkerMessageData | string) {\n    try {\n      data = decodeExtensionMessage(data);\n    } catch (err: any) {\n      logDebugError('PostMessageConnector: Failed to parse message', err);\n      return;\n    }\n\n    const { requestStates, channel } = this;\n    if (data.channel !== channel) {\n      return;\n    }\n\n    if (data.type === 'update' && this.onUpdate) {\n      this.onUpdate(data.update);\n    }\n    if (data.type === 'methodResponse') {\n      const requestState = requestStates.get(data.messageId);\n      if (requestState) {\n        if (data.error) {\n          requestState.reject(data.error);\n        } else {\n          requestState.resolve(data.response);\n        }\n      }\n    } else if (data.type === 'methodCallback') {\n      const requestState = requestStates.get(data.messageId);\n      requestState?.callback?.(...data.callbackArgs);\n    } else if (data.type === 'unhandledError') {\n      const error = new Error(data.error?.message);\n      if (data.error?.stack) {\n        error.stack = data.error.stack;\n      }\n      throw error;\n    }\n  }\n\n  private postMessage(data: OriginMessageData) {\n    data.channel = this.channel;\n\n    let rawData: OriginMessageData | string = data;\n    if (this.shouldUseJson) {\n      rawData = encodeExtensionMessage(data);\n    }\n\n    if ('open' in this.target) { // Is Window\n      this.target.postMessage(rawData, this.targetOrigin);\n    } else {\n      this.target.postMessage(rawData);\n    }\n  }\n}\n\n/**\n * Allows to call functions, provided by another messenger (a window, a worker), in this messenger.\n * The other messenger must provide the functions using `createPostMessageInterface`.\n */\nexport function createConnector<T extends InputRequestTypes>(\n  worker: Worker | Window | DedicatedWorkerGlobalScope,\n  onUpdate?: (update: ApiUpdate) => void,\n  channel?: string,\n  targetOrigin?: string,\n) {\n  const connector = new ConnectorClass<T>(worker, onUpdate, channel, undefined, targetOrigin);\n\n  function handleMessage({ data }: WorkerMessageEvent | MessageEvent) {\n    connector.onMessage(data);\n  }\n\n  worker.addEventListener('message', handleMessage as any); // TS weirdly complains here\n\n  connector.destroy = () => {\n    worker.removeEventListener('message', handleMessage as any);\n  };\n\n  return connector;\n}\n\n/**\n * Allows to call functions, provided by the extension service worker, in this window.\n * The service worker must provide the functions using `createExtensionInterface`.\n */\nexport function createExtensionConnector(\n  name: string,\n  onUpdate?: (update: ApiUpdate) => void,\n  getInitArgs?: () => any,\n  channel?: string,\n) {\n  const connector = new ConnectorClass(connect(), onUpdate, channel, true);\n\n  function connect() {\n    const port = self.chrome.runtime.connect({ name });\n\n    port.onMessage.addListener((data: string | WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connector.target = connect();\n      connector.init(getInitArgs?.());\n    });\n\n    return port;\n  }\n\n  connector.init(getInitArgs?.());\n\n  return connector;\n}\n\n/**\n * Allows to call functions, provided by a window, in this service worker.\n * The window must provide the functions using `createReverseExtensionInterface`.\n *\n * Warning: the connector is able to send messages only when the popup window is open.\n */\nexport function createReverseExtensionConnector(portName: string) {\n  const nullWorker = {\n    postMessage() {\n      throw new Error('The popup window is not connected');\n    },\n  } as Pick<Worker, 'postMessage'> as Worker;\n\n  const connector = new ConnectorClass(nullWorker, undefined, undefined, true);\n\n  chrome.runtime.onConnect.addListener((port) => {\n    if (port.name !== portName) {\n      return;\n    }\n\n    connector.target = port;\n\n    port.onMessage.addListener((data: string | WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    port.onDisconnect.addListener(() => {\n      connector.target = nullWorker;\n    });\n  });\n\n  return connector;\n}\n\nexport type Connector<T extends InputRequestTypes = InputRequestTypes> = ReturnType<typeof createConnector<T>>;\n","export default class Deferred<T = void> {\n  promise: Promise<T>;\n\n  reject!: (reason?: any) => void;\n\n  resolve!: (value: T | PromiseLike<T>) => void;\n\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n  }\n\n  static resolved(): Deferred<void>;\n  static resolved<T>(value: T): Deferred<T>;\n  static resolved<T>(value?: T): Deferred<T | void> {\n    const deferred = new Deferred<T | void>();\n    deferred.resolve(value);\n    return deferred;\n  }\n}\n","import type { LangCode } from '../global/types';\nimport type { LangFn } from './langProvider';\n\nimport withCache from './withCache';\n\nexport const SECOND = 1000;\nexport const MINUTE = SECOND * 60;\nexport const HOUR = MINUTE * 60;\nexport const DAY = HOUR * 24;\nexport const YEAR = 365 * DAY;\n\nconst formatDayToStringWithCache = withCache((\n  langCode: LangCode,\n  dayStartAt: number,\n  noYear?: boolean,\n  monthFormat: 'short' | 'long' | 'numeric' | false = 'short',\n  noDay?: boolean,\n  withTime = false,\n) => {\n  return new Date(dayStartAt).toLocaleString(\n    langCode,\n    {\n      year: noYear ? undefined : 'numeric',\n      month: monthFormat || undefined,\n      day: noDay ? undefined : 'numeric',\n      hour: withTime ? 'numeric' : undefined,\n      minute: withTime ? 'numeric' : undefined,\n      hourCycle: 'h23',\n    },\n  );\n});\n\nexport function formatRelativeHumanDateTime(\n  langCode: LangCode = 'en',\n  time: number,\n) {\n  const total = time - Date.now();\n  const minutes = Math.floor((total / 1000 / 60) % 60);\n  const hours = Math.floor((total / (1000 * 3600)) % 24);\n  const days = Math.floor(total / 1000 / 3600 / 24);\n\n  const rtf = new Intl.RelativeTimeFormat(langCode, {\n    localeMatcher: 'best fit',\n    numeric: 'always',\n    style: 'long',\n  });\n\n  const result: string[] = [];\n\n  if (days > 0) {\n    const [daysPlural, daysValue] = rtf.formatToParts(days, 'day').reverse();\n    result.push(`${daysValue.value}${daysPlural.value}`.replace(' ', '\\u00A0'));\n  }\n  if (hours > 0) {\n    const [hoursPlural, hoursValue] = rtf.formatToParts(hours, 'hour').reverse();\n    result.push(`${hoursValue.value}${hoursPlural.value}`.replace(' ', '\\u00A0'));\n  }\n  if (minutes > 0) {\n    const [minutesPlural, minutesValue] = rtf.formatToParts(minutes, 'minute').reverse();\n    result.push(`${minutesValue.value}${minutesPlural.value}`.replace(' ', '\\u00A0'));\n  }\n\n  return result.join(' ');\n}\n\nexport function formatHumanDay(lang: LangFn, datetime: string | number) {\n  if (isToday(datetime)) {\n    return lang('Today');\n  }\n\n  if (isYesterday(datetime)) {\n    return lang('Yesterday');\n  }\n\n  return formatFullDay(lang.code!, datetime);\n}\n\nexport function formatFullDay(langCode: LangCode, datetime: string | number | Date) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const noYear = date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, dayStartAt, noYear, 'long');\n}\n\nexport function formatShortDay(langCode: LangCode, datetime: string | number | Date, withTime = false, noYear = false) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const todayStartAt = getDayStartAt(today);\n  const noDate = withTime && dayStartAt === todayStartAt;\n  const targetAt = withTime ? getMinuteStart(date).getTime() : dayStartAt;\n\n  noYear ||= date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, targetAt, noYear, !noDate && 'short', noDate, withTime);\n}\n\nexport function formatTime(datetime: string | number) {\n  const date = new Date(datetime);\n\n  return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n}\n\nexport function getCountDaysToDate(datetime: string | number | Date) {\n  const today = new Date();\n  const date = datetime instanceof Date ? datetime\n    : new Date(datetime);\n\n  return Math.ceil((date.getTime() - today.getTime()) / DAY);\n}\n\nexport function getDayStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}\n\nexport function getDayStartAt(datetime: number | Date) {\n  return getDayStart(datetime).getTime();\n}\n\nexport function getMinuteStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setSeconds(0, 0);\n  return date;\n}\n\nfunction isToday(datetime: string | number) {\n  return getDayStartAt(new Date()) === getDayStartAt(new Date(datetime));\n}\n\nfunction isYesterday(datetime: string | number) {\n  const yesterday = new Date();\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  return getDayStartAt(yesterday) === getDayStartAt(new Date(datetime));\n}\n","export default function generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2);\n}\n","/*! Capacitor: https://capacitorjs.com/ - MIT License */\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    const getPlatform = () => {\n        return capCustomPlatform !== null ? capCustomPlatform.name : getPlatformId(win);\n    };\n    const isNativePlatform = () => getPlatform() !== 'web';\n    const isPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const getPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find((h) => h.name === pluginName); };\n    const handleError = (err) => win.console.error(err);\n    const registeredPlugins = new Map();\n    const registerPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null && !jsImplementation && 'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find((m) => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then((impl) => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair \n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise((resolve) => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([...Object.keys(jsImplementations), ...(pluginHeader ? [platform] : [])]),\n        });\n        return proxy;\n    };\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = (filePath) => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor() {\n        this.listeners = {};\n        this.retainedEventArguments = {};\n        this.windowListeners = {};\n    }\n    addListener(eventName, listenerFunc) {\n        let firstListener = false;\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n            firstListener = true;\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        if (firstListener) {\n            this.sendRetainedArgumentsForEvent(eventName);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data, retainUntilConsumed) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            if (retainUntilConsumed) {\n                let args = this.retainedEventArguments[eventName];\n                if (!args) {\n                    args = [];\n                }\n                args.push(data);\n                this.retainedEventArguments[eventName] = args;\n            }\n            return;\n        }\n        listeners.forEach((listener) => listener(data));\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: (event) => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n    sendRetainedArgumentsForEvent(eventName) {\n        const args = this.retainedEventArguments[eventName];\n        if (!args) {\n            return;\n        }\n        delete this.retainedEventArguments[eventName];\n        args.forEach((arg) => {\n            this.notifyListeners(eventName, arg);\n        });\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach((cookie) => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0 ? `domain=${options.url}` : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie.replace(/^ +/, '').replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0 ? base64String.split(',')[1] : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map((k) => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach((str) => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') || options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') || typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, ExceptionCode, WebPlugin, WebView, buildRequestInit, registerPlugin };\n//# sourceMappingURL=index.js.map\n","const cache = new WeakMap<AnyFunction, Map<string, any>>();\n\nexport default function withCache<T extends AnyFunction>(fn: T) {\n  return (...args: Parameters<T>): ReturnType<T> => {\n    let fnCache = cache.get(fn);\n    const cacheKey = args.map(String).join('_');\n\n    if (fnCache) {\n      const cached = fnCache.get(cacheKey);\n      if (cached) {\n        return cached;\n      }\n    } else {\n      fnCache = new Map();\n      cache.set(fn, fnCache);\n    }\n\n    const newValue = fn(...args);\n\n    fnCache.set(cacheKey, newValue);\n\n    return newValue;\n  };\n}\n","import type { Scheduler } from './schedulers';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\n\ninterface AnimationInstance {\n  isCancelled: boolean;\n}\n\ntype TickFunction = () => boolean | undefined;\n\nlet currentInstance: AnimationInstance | undefined;\n\nexport function animateSingle(tick: TickFunction, schedulerFn: Scheduler, instance?: AnimationInstance) {\n  if (!instance) {\n    if (currentInstance && !currentInstance.isCancelled) {\n      currentInstance.isCancelled = true;\n    }\n\n    instance = { isCancelled: false };\n    currentInstance = instance;\n  }\n\n  if (!instance.isCancelled && tick()) {\n    schedulerFn(() => {\n      animateSingle(tick, schedulerFn, instance);\n    });\n  }\n}\n\nexport function cancelSingleAnimation() {\n  const dumbScheduler = (cb: AnyFunction) => cb;\n  const dumbCb = () => undefined;\n\n  animateSingle(dumbCb, dumbScheduler);\n}\n\nexport function animate(tick: TickFunction, schedulerFn: Scheduler) {\n  schedulerFn(() => {\n    if (tick()) {\n      animate(tick, schedulerFn);\n    }\n  });\n}\n\nexport function animateInstantly(tick: TickFunction, schedulerFn: Scheduler) {\n  if (tick()) {\n    schedulerFn(() => {\n      animateInstantly(tick, schedulerFn);\n    });\n  }\n}\n\ntype TimingFn = (t: number) => number;\n\ntype AnimateNumberProps<T extends number | number[]> = {\n  to: T;\n  from: T;\n  duration: number;\n  onUpdate: (value: T) => void;\n  timing?: TimingFn;\n  onEnd?: (isCanceled?: boolean) => void;\n};\n\nexport const timingFunctions = {\n  linear: (t: number) => t,\n  easeIn: (t: number) => t ** 1.675,\n  easeOut: (t: number) => -1 * t ** 1.675,\n  easeInOut: (t: number) => 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1),\n  easeInQuad: (t: number) => t * t,\n  easeOutQuad: (t: number) => t * (2 - t),\n  easeInOutQuad: (t: number) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\n  easeInCubic: (t: number) => t ** 3,\n  easeOutCubic: (t: number) => (--t) * t * t + 1,\n  easeInOutCubic: (t: number) => (t < 0.5 ? 4 * t ** 3 : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1),\n  easeInQuart: (t: number) => t ** 4,\n  easeOutQuart: (t: number) => 1 - (--t) * t ** 3,\n  easeInOutQuart: (t: number) => (t < 0.5 ? 8 * t ** 4 : 1 - 8 * (--t) * t ** 3),\n  easeInQuint: (t: number) => t ** 5,\n  easeOutQuint: (t: number) => 1 + (--t) * t ** 4,\n  easeInOutQuint: (t: number) => (t < 0.5 ? 16 * t ** 5 : 1 + 16 * (--t) * t ** 4),\n};\n\nexport function animateNumber<T extends number | number[]>({\n  timing = timingFunctions.linear,\n  onUpdate,\n  duration,\n  onEnd,\n  from,\n  to,\n}: AnimateNumberProps<T>) {\n  const t0 = Date.now();\n\n  let isCanceled = false;\n\n  animateInstantly(() => {\n    if (isCanceled) return false;\n\n    const t1 = Date.now();\n    const t = Math.min((t1 - t0) / duration, 1);\n\n    const progress = timing(t);\n    if (typeof from === 'number' && typeof to === 'number') {\n      onUpdate((from + ((to - from) * progress)) as T);\n    } else if (Array.isArray(from) && Array.isArray(to)) {\n      const result = from.map((f, i) => f + ((to[i] - f) * progress));\n      onUpdate(result as T);\n    }\n\n    if (t === 1) {\n      onEnd?.();\n    }\n\n    return t < 1;\n  }, requestMeasure);\n\n  return () => {\n    isCanceled = true;\n    onEnd?.(true);\n  };\n}\n\nexport function applyStyles(element: HTMLElement, css: Record<string, string>) {\n  Object.assign(element.style, css);\n}\n","export var ImpactStyle;\n(function (ImpactStyle) {\n    /**\n     * A collision between large, heavy user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Heavy\"] = \"HEAVY\";\n    /**\n     * A collision between moderately sized user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Medium\"] = \"MEDIUM\";\n    /**\n     * A collision between small, light user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Light\"] = \"LIGHT\";\n})(ImpactStyle || (ImpactStyle = {}));\nexport var NotificationType;\n(function (NotificationType) {\n    /**\n     * A notification feedback type indicating that a task has completed successfully\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Success\"] = \"SUCCESS\";\n    /**\n     * A notification feedback type indicating that a task has produced a warning\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Warning\"] = \"WARNING\";\n    /**\n     * A notification feedback type indicating that a task has failed\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Error\"] = \"ERROR\";\n})(NotificationType || (NotificationType = {}));\n//# sourceMappingURL=definitions.js.map","import type { OriginMessageData, WorkerMessageData } from './PostMessageConnector';\n\nimport { BIGINT_PREFIX } from './bigint';\n\nexport const UNDEFINED_PREFIX = 'undefined:';\n\nfunction extensionMessageReplacer(this: any, key: string, value: any) {\n  if (value === undefined) {\n    return `${UNDEFINED_PREFIX}marker`;\n  }\n\n  // Bigint is replaced by patching `toJSON` method\n\n  return value;\n}\n\nfunction extensionMessageReviver(this: any, key: string, value: any) {\n  // Handle bigint values\n  if (typeof value === 'string' && value.startsWith(BIGINT_PREFIX)) {\n    return BigInt(value.slice(BIGINT_PREFIX.length));\n  }\n\n  // Handle undefined values\n  if (typeof value === 'string' && value.startsWith(UNDEFINED_PREFIX)) {\n    return undefined;\n  }\n\n  return value;\n}\n\nexport function encodeExtensionMessage(data: OriginMessageData | WorkerMessageData) {\n  return JSON.stringify(data, extensionMessageReplacer);\n}\n\nexport function decodeExtensionMessage<T extends OriginMessageData | WorkerMessageData>(data: string | T): T {\n  if (typeof data === 'string') {\n    return JSON.parse(data, extensionMessageReviver);\n  }\n  return data;\n}\n","import type { ApiTonWalletVersion } from './api/chains/ton/types';\nimport type {\n  ApiBaseCurrency,\n  ApiLiquidStakingState,\n  ApiNftMarketplace,\n  ApiNominatorsStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n  ApiTokenWithPrice,\n} from './api/types';\nimport type { AutolockValueType, LangCode, LangItem, TokenPeriod } from './global/types';\n\nexport const APP_ENV = process.env.APP_ENV;\n\nexport const IS_CORE_WALLET = process.env.IS_CORE_WALLET === '1';\nexport const APP_NAME = process.env.APP_NAME || (IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet');\nexport const APP_VERSION = process.env.APP_VERSION!;\nexport const APP_COMMIT_HASH = process.env.APP_COMMIT_HASH!;\nexport const APP_ENV_MARKER = APP_ENV === 'staging' ? 'Beta' : APP_ENV === 'development' ? 'Dev' : undefined;\nexport const EXTENSION_NAME = IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet  My TON Wallet';\nexport const EXTENSION_DESCRIPTION = IS_CORE_WALLET\n  ? 'Set up your own TON Wallet on The Open Network'\n  // eslint-disable-next-line @stylistic/max-len\n  : 'The most feature-rich TON+TRON wallet: multi-accounts, multi-send, Telegram Gifts and other collectibles, TON DNS+Proxy, and more.';\n\nexport const DEBUG = APP_ENV !== 'production' && APP_ENV !== 'perf' && APP_ENV !== 'test';\nexport const DEBUG_MORE = false;\nexport const DEBUG_API = false;\nexport const DEBUG_VIEW_ACCOUNTS = false;\n\nexport const IS_PRODUCTION = APP_ENV === 'production';\nexport const IS_TEST = APP_ENV === 'test';\nexport const IS_PERF = APP_ENV === 'perf';\nexport const IS_EXTENSION = process.env.IS_EXTENSION === '1';\nexport const IS_FIREFOX_EXTENSION = process.env.IS_FIREFOX_EXTENSION === '1';\nexport const IS_OPERA_EXTENSION = process.env.IS_OPERA_EXTENSION === '1';\nexport const IS_PACKAGED_ELECTRON = process.env.IS_PACKAGED_ELECTRON === '1';\nexport const IS_CAPACITOR = process.env.IS_CAPACITOR === '1';\nexport const IS_ANDROID_DIRECT = process.env.IS_ANDROID_DIRECT === '1';\nexport const IS_AIR_APP = process.env.IS_AIR_APP === '1';\nexport const IS_TELEGRAM_APP = process.env.IS_TELEGRAM_APP === '1';\n\nexport const ELECTRON_HOST_URL = 'https://dumb-host';\nexport const INACTIVE_MARKER = '[Inactive]';\nexport const PRODUCTION_URL = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\nexport const BETA_URL = IS_CORE_WALLET ? 'https://beta.wallet.ton.org' : 'https://beta.mytonwallet.app';\nexport const APP_INSTALL_URL = 'https://get.mytonwallet.io/';\nexport const APP_REPO_URL = 'https://github.com/mytonwallet-org/mytonwallet';\nexport const BASE_URL = process.env.BASE_URL;\n\nexport const BOT_USERNAME = process.env.BOT_USERNAME || 'MyTonWalletBot';\n\nexport const SWAP_FEE_ADDRESS = process.env.SWAP_FEE_ADDRESS || 'UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp';\nexport const DIESEL_ADDRESS = process.env.DIESEL_ADDRESS || 'UQC9lQOaEHC6YASiJJ2NrKEOlITMMQmc8j0_iZEHy-4sl3tG';\n\nexport const STRICTERDOM_ENABLED = DEBUG && !IS_PACKAGED_ELECTRON;\n\nexport const DEBUG_ALERT_MSG = 'Shoot!\\nSomething went wrong, please see the error details in Dev Tools Console.';\n\nexport const PIN_LENGTH = 4;\nexport const NATIVE_BIOMETRICS_USERNAME = IS_CORE_WALLET ? 'TonWallet' : 'MyTonWallet';\nexport const NATIVE_BIOMETRICS_SERVER = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\n\nexport const IS_BIP39_MNEMONIC_ENABLED = !IS_CORE_WALLET;\nexport const MNEMONIC_COUNT = 24;\nexport const MNEMONIC_COUNTS = IS_BIP39_MNEMONIC_ENABLED ? [12, 24] : [24];\n\nexport const PRIVATE_KEY_HEX_LENGTH = 64;\nexport const MNEMONIC_CHECK_COUNT = 3;\n\nexport const MOBILE_SCREEN_MAX_WIDTH = 700; // px\n\nexport const ANIMATION_END_DELAY = 50;\n\nexport const ANIMATED_STICKER_TINY_ICON_PX = 16;\nexport const ANIMATED_STICKER_ICON_PX = 30;\nexport const ANIMATED_STICKER_TINY_SIZE_PX = 70;\nexport const ANIMATED_STICKER_SMALL_SIZE_PX = 110;\nexport const ANIMATED_STICKER_MIDDLE_SIZE_PX = 120;\nexport const ANIMATED_STICKER_DEFAULT_PX = 150;\nexport const ANIMATED_STICKER_BIG_SIZE_PX = 156;\nexport const ANIMATED_STICKER_HUGE_SIZE_PX = 192;\n\nexport const DEFAULT_PORTRAIT_WINDOW_SIZE = { width: 368, height: 770 };\nexport const DEFAULT_LANDSCAPE_WINDOW_SIZE = { width: 980, height: 788 };\nexport const DEFAULT_LANDSCAPE_ACTION_TAB_ID = 0;\nexport const TRANSACTION_ADDRESS_SHIFT = 4;\n\nexport const WHOLE_PART_DELIMITER = ''; // https://www.compart.com/en/unicode/U+202F\n\nexport const DEFAULT_SLIPPAGE_VALUE = 5;\n\nexport const GLOBAL_STATE_CACHE_DISABLED = false;\nexport const GLOBAL_STATE_CACHE_KEY = IS_CORE_WALLET ? 'tonwallet-global-state' : 'mytonwallet-global-state';\n\nexport const ANIMATION_LEVEL_MIN = 0;\nexport const ANIMATION_LEVEL_MED = 1;\nexport const ANIMATION_LEVEL_MAX = 2;\nexport const ANIMATION_LEVEL_DEFAULT = ANIMATION_LEVEL_MAX;\nexport const THEME_DEFAULT = 'system';\n\nexport const MAIN_ACCOUNT_ID = '0-ton-mainnet';\n\nexport const TONCENTER_MAINNET_URL = process.env.TONCENTER_MAINNET_URL || 'https://toncenter.mytonwallet.org';\nexport const TONCENTER_MAINNET_KEY = process.env.TONCENTER_MAINNET_KEY;\nexport const ELECTRON_TONCENTER_MAINNET_KEY = process.env.ELECTRON_TONCENTER_MAINNET_KEY;\nexport const TONAPIIO_MAINNET_URL = process.env.TONAPIIO_MAINNET_URL || 'https://tonapiio.mytonwallet.org';\n\nexport const TONCENTER_TESTNET_URL = process.env.TONCENTER_TESTNET_URL || 'https://toncenter-testnet.mytonwallet.org';\nexport const TONCENTER_TESTNET_KEY = process.env.TONCENTER_TESTNET_KEY;\nexport const ELECTRON_TONCENTER_TESTNET_KEY = process.env.ELECTRON_TONCENTER_TESTNET_KEY;\nexport const TONAPIIO_TESTNET_URL = process.env.TONAPIIO_TESTNET_URL || 'https://tonapiio-testnet.mytonwallet.org';\n\nexport const BRILLIANT_API_BASE_URL = process.env.BRILLIANT_API_BASE_URL || 'https://api.mytonwallet.org';\nexport const PROXY_API_BASE_URL = process.env.PROXY_API_BASE_URL || 'https://api.mytonwallet.org/proxy';\nexport const IPFS_GATEWAY_BASE_URL = 'https://ipfs.io/ipfs/';\nexport const SSE_BRIDGE_URL = 'https://tonconnectbridge.mytonwallet.org/bridge/';\n\nexport const TRON_MAINNET_API_URL = process.env.TRON_MAINNET_API_URL || 'https://tronapi.mytonwallet.org';\nexport const TRON_TESTNET_API_URL = process.env.TRON_TESTNET_API_URL || 'https://api.shasta.trongrid.io';\n\nexport const FRACTION_DIGITS = 9;\nexport const SHORT_FRACTION_DIGITS = 2;\n\nexport const MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT = 3;\n\nexport const SUPPORT_USERNAME = 'mysupport';\nexport const MTW_TIPS_CHANNEL_NAME: Partial<Record<LangCode, string>> = {\n  en: 'MyTonWalletTips',\n  ru: 'MyTonWalletTipsRu',\n};\nexport const NFT_MARKETPLACE_TITLES: Record<ApiNftMarketplace, string> = {\n  getgems: 'Getgems',\n  fragment: 'Fragment',\n};\nexport const MTW_STATIC_BASE_URL = 'https://static.mytonwallet.org';\nexport const MTW_CARDS_BASE_URL = `${MTW_STATIC_BASE_URL}/cards/`;\nexport const MTW_CARDS_MINT_BASE_URL = `${MTW_STATIC_BASE_URL}/mint-cards/`;\nexport const MYTONWALLET_PROMO_URL = 'https://mytonwallet.io/';\nexport const MYTONWALLET_MULTISEND_DAPP_URL = 'https://multisend.mytonwallet.io/';\nexport const TELEGRAM_WEB_URL = 'https://web.telegram.org/a/';\nexport const NFT_MARKETPLACE_URL = 'https://getgems.io/';\nexport const NFT_MARKETPLACE_TITLE = NFT_MARKETPLACE_TITLES.getgems;\nexport const GETGEMS_BASE_MAINNET_URL = 'https://getgems.io/';\nexport const GETGEMS_BASE_TESTNET_URL = 'https://testnet.getgems.io/';\nexport const EMPTY_HASH_VALUE = 'NOHASH';\n\nexport const IFRAME_WHITELIST = [\n  'http://localhost:*', 'https://tonscan.org',\n];\nexport const SUBPROJECT_URL_MASK = 'https://*.mytonwallet.io';\n\nexport const CHANGELLY_SUPPORT_EMAIL = 'support@changelly.com';\nexport const CHANGELLY_LIVE_CHAT_URL = 'https://changelly.com/';\nexport const CHANGELLY_SECURITY_EMAIL = 'security@changelly.com';\nexport const CHANGELLY_TERMS_OF_USE = 'https://changelly.com/terms-of-use';\nexport const CHANGELLY_PRIVACY_POLICY = 'https://changelly.com/privacy-policy';\nexport const CHANGELLY_AML_KYC = 'https://changelly.com/aml-kyc';\nexport const CHANGELLY_WAITING_DEADLINE = 3 * 60 * 60 * 1000; // 3 hours\n\nexport const PROXY_HOSTS = process.env.PROXY_HOSTS;\n\nexport const TINY_TRANSFER_MAX_COST = 0.01;\n\nexport const IMAGE_CACHE_NAME = 'mtw-image';\nexport const LANG_CACHE_NAME = 'mtw-lang-232';\n\nexport const LANG_LIST: LangItem[] = [{\n  langCode: 'en',\n  name: 'English',\n  nativeName: 'English',\n  rtl: false,\n}, {\n  langCode: 'es',\n  name: 'Spanish',\n  nativeName: 'Espaol',\n  rtl: false,\n}, {\n  langCode: 'ru',\n  name: 'Russian',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'zh-Hans',\n  name: 'Chinese (Simplified)',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'zh-Hant',\n  name: 'Chinese (Traditional)',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'tr',\n  name: 'Turkish',\n  nativeName: 'Trke',\n  rtl: false,\n}, {\n  langCode: 'de',\n  name: 'German',\n  nativeName: 'Deutsch',\n  rtl: false,\n}, {\n  langCode: 'th',\n  name: 'Thai',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'uk',\n  name: 'Ukrainian',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'pl',\n  name: 'Polish',\n  nativeName: 'Polski',\n  rtl: false,\n}];\n\nexport const IS_STAKING_DISABLED = IS_CORE_WALLET;\nexport const VALIDATION_PERIOD_MS = 65_536_000; // 18.2 h.\nexport const ONE_TON = 1_000_000_000n;\nexport const DEFAULT_FEE = 15_000_000n; // 0.015 TON\nexport const UNSTAKE_TON_GRACE_PERIOD = 20 * 60 * 1000; // 20 m.\n\nexport const STAKING_POOLS = process.env.STAKING_POOLS ? process.env.STAKING_POOLS.split(' ') : [];\nexport const LIQUID_POOL = process.env.LIQUID_POOL || 'EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o';\nexport const LIQUID_JETTON = process.env.LIQUID_JETTON || 'EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE';\nexport const STAKING_MIN_AMOUNT = ONE_TON;\nexport const NOMINATORS_STAKING_MIN_AMOUNT = 10_000n * ONE_TON;\nexport const MIN_ACTIVE_STAKING_REWARDS = 100_000_000n; // 0.1 MY\n\nexport const TONCONNECT_PROTOCOL_VERSION = 2;\nexport const TONCONNECT_WALLET_JSBRIDGE_KEY = IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet';\nexport const EMBEDDED_DAPP_BRIDGE_CHANNEL = 'embedded-dapp-bridge';\n\nexport const NFT_FRAGMENT_COLLECTIONS = [\n  '0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2', // Anonymous Telegram Numbers\n  '0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2', // Telegram Usernames\n];\nexport const NFT_FRAGMENT_GIFT_IMAGE_TO_URL_REGEX = /^https?:\\/\\/nft\\.(fragment\\.com\\/gift\\/[\\w-]+-\\d+)\\.\\w+$/i;\nexport const TELEGRAM_GIFTS_SUPER_COLLECTION = 'super:telegram-gifts';\n\nexport const MTW_CARDS_WEBSITE = 'https://cards.mytonwallet.io';\nexport const MTW_CARDS_COLLECTION = 'EQCQE2L9hfwx1V8sgmF9keraHx1rNK9VmgR1ctVvINBGykyM';\nexport const TON_DNS_COLLECTION = 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz';\nexport const TON_DNS_RENEWAL_WARNING_DAYS = 14;\nexport const TON_DNS_RENEWAL_NFT_WARNING_DAYS = 30;\n\nexport const TONCOIN = {\n  name: 'Toncoin',\n  symbol: 'TON',\n  slug: 'toncoin',\n  decimals: 9,\n  chain: 'ton',\n  cmcSlug: 'toncoin',\n} as const;\n\nexport const TRX = {\n  name: 'TRON',\n  symbol: 'TRX',\n  slug: 'trx',\n  decimals: 6,\n  chain: 'tron',\n  cmcSlug: 'tron',\n} as const;\n\nexport const MYCOIN = {\n  name: 'MyTonWallet Coin',\n  symbol: 'MY',\n  slug: 'ton-eqcfvnlrbn',\n  decimals: 9,\n  chain: 'ton',\n  minterAddress: 'EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w',\n} as const;\n\nexport const MYCOIN_TESTNET = {\n  ...MYCOIN,\n  slug: 'ton-kqawlxpebw',\n  minterAddress: 'kQAWlxpEbwhCDFX9gp824ee2xVBhAh5VRSGWfbNFDddAbQoQ',\n} as const;\n\nexport const CHAIN_CONFIG = {\n  ton: {\n    isMemoSupported: true,\n    isDnsSupported: true,\n    addressRegex: /^([-\\w_]{48}|0:[\\da-h]{64})$/i,\n    addressPrefixRegex: /^([-\\w_]{1,48}|0:[\\da-h]{0,64})$/i,\n    nativeToken: TONCOIN,\n  },\n  tron: {\n    isMemoSupported: false,\n    isDnsSupported: false,\n    addressRegex: /^T[1-9A-HJ-NP-Za-km-z]{33}$/,\n    addressPrefixRegex: /^T[1-9A-HJ-NP-Za-km-z]{0,33}$/,\n    nativeToken: TRX,\n    mainnet: {\n      apiUrl: TRON_MAINNET_API_URL,\n      usdtAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    },\n    testnet: {\n      apiUrl: TRON_TESTNET_API_URL,\n      usdtAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    },\n  },\n} as const;\n\nexport const TRC20_USDT_MAINNET_SLUG = 'tron-tr7nhqjekq';\nexport const TRC20_USDT_TESTNET_SLUG = 'tron-tg3xxyexbk';\nexport const TON_USDT_SLUG = 'ton-eqcxe6mutq';\nexport const STAKED_TON_SLUG = 'ton-eqcqc6ehrj';\nexport const STAKED_MYCOIN_SLUG = 'ton-eqcbzvsfwq';\nexport const TRX_SWAP_COUNT_FEE_ADDRESS = 'TW2LXSebZ7Br1zHaiA2W1zRojDkDwjGmpw';\nexport const MYCOIN_STAKING_POOL = 'EQC3roTiRRsoLzfYVK7yVVoIZjTEqAjQU3ju7aQ7HWTVL5o5';\n\nexport const ETHENA_STAKING_VAULT = 'EQChGuD1u0e7KUWHH5FaYh_ygcLXhsdG2nSHPXHW8qqnpZXW';\nexport const ETHENA_STAKING_MIN_AMOUNT = 1_000_000; // 1 USDe\n// eslint-disable-next-line @stylistic/max-len\nexport const ETHENA_ELIGIBILITY_CHECK_URL = 'https://t.me/id_app/start?startapp=cQeewNnc3pVphUcwY63WruKMQDpgePd1E7eMVoqphMZAdGoU9jwS4qRqrM1kSeaqrAiiDiC3EYAJPwZDGWqxZpw5vtGxmHma59XEt';\n\n// In cross-chain swaps, only a few TON/TRON tokens are available.\n// Its not optimal to request swap history for all the others.\nexport const SWAP_CROSSCHAIN_SLUGS = new Set([\n  TONCOIN.slug,\n  TON_USDT_SLUG,\n  TRX.slug,\n  TRC20_USDT_MAINNET_SLUG,\n]);\n\nexport const STON_PTON_ADDRESS = 'EQCM3B12QK1e4yZSf8GtBRT0aLMNyEsBc_DhVfRRtOEffLez';\nexport const STON_PTON_SLUG = 'ton-eqcm3b12qk';\n\nexport const DNS_IMAGE_GEN_URL = 'https://dns-image.mytonwallet.org/img?d=';\n\nconst TRC20_USDT = {\n  name: 'Tether USD',\n  symbol: 'USDT',\n  decimals: 6,\n  chain: 'tron',\n} as const;\n\nexport const TON_USDT = {\n  name: 'Tether USD',\n  symbol: 'USD',\n  chain: 'ton',\n  slug: TON_USDT_SLUG,\n  decimals: 6,\n  tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n} as const;\n\nexport const TON_USDE = {\n  name: 'Ethena USDe',\n  symbol: 'USDe',\n  chain: 'ton',\n  tokenAddress: 'EQAIb6KmdfdDR7CN1GBqVJuP25iCnLKCvBlJ07Evuu2dzP5f',\n  slug: 'ton-eqaib6kmdf',\n  decimals: 6,\n  // eslint-disable-next-line @stylistic/max-len\n  image: 'https://imgproxy.toncenter.com/binMwUmcnFtjvgjp4wSEbsECXwfXUwbPkhVvsvpubNw/pr:small/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvVVNEZS5wbmc',\n} as const;\n\nexport const TON_TSUSDE = {\n  name: 'Ethena tsUSDe',\n  symbol: 'tsUSDe',\n  chain: 'ton',\n  tokenAddress: 'EQDQ5UUyPHrLcQJlPAczd_fjxn8SLrlNQwolBznxCdSlfQwr',\n  slug: 'ton-eqdq5uuyph',\n  decimals: 6,\n  // eslint-disable-next-line @stylistic/max-len\n  image: 'https://cache.tonapi.io/imgproxy/vGZJ7erwsWPo7DpVG_V7ygNn7VGs0szZXcNLHB_l0ms/rs:fill:200:200:1/g:no/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvdHNVU0RlLnBuZw.webp',\n} as const;\n\nexport const ALL_STAKING_POOLS = [\n  LIQUID_POOL,\n  MYCOIN_STAKING_POOL,\n  ETHENA_STAKING_VAULT,\n  TON_TSUSDE.tokenAddress,\n];\n\nexport const DEFAULT_ENABLED_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug, TRC20_USDT_TESTNET_SLUG, TRC20_USDT_MAINNET_SLUG,\n] as string[];\n\n// Toncoin, USDT TON, TRX, USDT TRC20\nexport const DEFAULT_ENABLED_TOKEN_COUNT = 4;\n\nexport const PRIORITY_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug,\n] as string[];\n\nconst COMMON_TOKEN = {\n  isFromBackend: true,\n  price: 0,\n  priceUsd: 0,\n  percentChange24h: 0,\n};\n\nexport const TOKEN_INFO: Record<string, ApiTokenWithPrice> = {\n  toncoin: {\n    ...TONCOIN,\n    isFromBackend: true,\n    price: 3.1,\n    priceUsd: 3.1,\n    percentChange24h: 0,\n  },\n  trx: {\n    ...TRX,\n    ...COMMON_TOKEN,\n  },\n  [TRC20_USDT_MAINNET_SLUG]: { // mainnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_MAINNET_SLUG,\n    tokenAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    ...COMMON_TOKEN,\n  },\n  [TRC20_USDT_TESTNET_SLUG]: { // testnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_TESTNET_SLUG,\n    tokenAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    ...COMMON_TOKEN,\n  },\n  [TON_USDT_SLUG]: {\n    ...TON_USDT,\n    // eslint-disable-next-line @stylistic/max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    slug: TON_USDT_SLUG,\n    ...COMMON_TOKEN,\n  },\n  [MYCOIN.slug]: {\n    ...MYCOIN,\n    // eslint-disable-next-line @stylistic/max-len\n    image: 'https://cache.tonapi.io/imgproxy/Qy038wCBKISofJ0hYMlj6COWma330cx3Ju1ZSPM2LRU/rs:fill:200:200:1/g:no/aHR0cHM6Ly9teXRvbndhbGxldC5pby9sb2dvLTI1Ni1ibHVlLnBuZw.webp',\n    ...COMMON_TOKEN,\n  },\n  [TON_USDE.slug]: {\n    ...TON_USDE,\n    ...COMMON_TOKEN,\n  },\n  [TON_TSUSDE.slug]: {\n    ...TON_TSUSDE,\n    ...COMMON_TOKEN,\n  },\n};\n\nexport const TOKEN_WITH_LABEL: Record<string, string> = {\n  [TRC20_USDT_MAINNET_SLUG]: 'TRC-20',\n  [TRC20_USDT_TESTNET_SLUG]: 'TRC-20',\n  [TON_USDT_SLUG]: 'TON',\n};\n\nexport const INIT_SWAP_ASSETS: Record<string, ApiSwapAsset> = {\n  toncoin: {\n    name: 'Toncoin',\n    symbol: TONCOIN.symbol,\n    chain: TONCOIN.chain,\n    slug: TONCOIN.slug,\n    decimals: TONCOIN.decimals,\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n  [TON_USDT_SLUG]: {\n    name: 'Tether USD',\n    symbol: 'USD',\n    chain: 'ton',\n    slug: TON_USDT_SLUG,\n    decimals: 9,\n    // eslint-disable-next-line @stylistic/max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n};\n\nexport const DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_FIRST_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_SECOND_TOKEN_SLUG = TON_USDT_SLUG;\nexport const DEFAULT_TRANSFER_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG = TRC20_USDT_MAINNET_SLUG;\nexport const SWAP_DEX_LABELS: Record<ApiSwapDexLabel, string> = {\n  dedust: 'DeDust',\n  ston: 'STON.fi',\n};\n\nexport const MULTITAB_DATA_CHANNEL_NAME = IS_CORE_WALLET ? 'tw-multitab' : 'mtw-multitab';\nexport const ACTIVE_TAB_STORAGE_KEY = IS_CORE_WALLET ? 'tw-active-tab' : 'mtw-active-tab';\n\nexport const INDEXED_DB_NAME = 'keyval-store';\nexport const INDEXED_DB_STORE_NAME = 'keyval';\n\nexport const WINDOW_PROVIDER_CHANNEL = 'windowProvider';\nexport const WINDOW_PROVIDER_PORT = `${IS_CORE_WALLET ? 'TonWallet' : 'MyTonWallet'}_popup_reversed`;\n\nexport const SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY = IS_CORE_WALLET;\nexport const PORTRAIT_MIN_ASSETS_TAB_VIEW = 4;\nexport const LANDSCAPE_MIN_ASSETS_TAB_VIEW = 6;\n\nexport const DEFAULT_PRICE_CURRENCY = 'USD';\nexport const CURRENCIES: Record<ApiBaseCurrency, { name: string; decimals: number; shortSymbol?: string }> = {\n  USD: { name: 'US Dollar', decimals: 2, shortSymbol: '$' },\n  EUR: { name: 'Euro', decimals: 2, shortSymbol: '' },\n  RUB: { name: 'Ruble', decimals: 2, shortSymbol: '' },\n  CNY: { name: 'Yuan', decimals: 2, shortSymbol: '' },\n  BTC: { name: 'Bitcoin', decimals: 9 },\n  [TONCOIN.symbol]: { name: 'Toncoin', decimals: 9 },\n};\n\nexport const BURN_ADDRESS = 'UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ';\n\nexport const DEFAULT_WALLET_VERSION: ApiTonWalletVersion = 'W5';\nexport const POPULAR_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R1', 'v3R2', 'v4R2', 'W5'];\nexport const LEDGER_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R2', 'v4R2'];\n\nexport const DEFAULT_TIMEOUT = 10000;\nexport const DEFAULT_RETRIES = 3;\nexport const DEFAULT_ERROR_PAUSE = 500;\n\nexport const HISTORY_PERIODS: TokenPeriod[] = ['1D', '7D', '1M', '3M', '1Y', 'ALL'];\n\nexport const BROWSER_HISTORY_LIMIT = 10;\n\nexport const NFT_BATCH_SIZE = 4;\nexport const NOTCOIN_VOUCHERS_ADDRESS = 'EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW';\nexport const BURN_CHUNK_DURATION_APPROX_SEC = 30;\nexport const NOTCOIN_FORWARD_TON_AMOUNT = 30000000n; // 0.03 TON\nexport const NOTCOIN_EXCHANGERS = [\n  'EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2',\n  'EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ',\n  'EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s',\n  'EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm',\n  'EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd',\n  'EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD',\n  'EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p',\n  'EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO',\n  'EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe',\n  'EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-',\n  'EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu',\n  'EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH',\n  'EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy',\n  'EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT',\n  'EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu',\n  'EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw',\n] as const;\n\nexport const CLAIM_ADDRESS = 'EQB3zOTvPi1PmwdcTpqSfFKZnhi1GNKEVJM-LdoAirdLtash';\nexport const CLAIM_AMOUNT = 30000000n; // 0.03 TON\nexport const CLAIM_COMMENT = 'claim';\n\nexport const MINT_CARD_ADDRESS = 'EQBpst3ZWJ9Dqq5gE2YH-yPsFK_BqMOmgi7Z_qK6v7WbrPWv';\nexport const MINT_CARD_COMMENT = 'Mint card';\nexport const MINT_CARD_REFUND_COMMENT = 'Refund';\n\n// eslint-disable-next-line @stylistic/max-len\nexport const RE_LINK_TEMPLATE = /((ftp|https?):\\/\\/)?(?<host>(www\\\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z][-a-zA-Z0-9]{1,62})\\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g;\n// eslint-disable-next-line @stylistic/max-len\nexport const RE_TG_BOT_MENTION = /telegram[:\\s-]*((@[a-z0-9_]+)|(https:\\/\\/)?(t\\.me|telegram\\.me|telegram\\.dog)\\/[a-z0-9_]+)/mig;\n\nexport const STARS_SYMBOL = '';\n\nexport const GIVEAWAY_CHECKIN_URL = process.env.GIVEAWAY_CHECKIN_URL || 'https://giveaway.mytonwallet.io';\n\nexport const AUTOLOCK_OPTIONS_LIST = [\n  {\n    value: 'never',\n    name: 'Disabled',\n    selectedName: 'Disabled',\n    period: 0,\n  },\n  {\n    value: '1',\n    name: '30 seconds',\n    selectedName: 'If away for 30 sec',\n    period: 30_000,\n  },\n  {\n    value: '2',\n    name: '3 minutes',\n    selectedName: 'If away for 3 min',\n    period: 60_000 * 3,\n  },\n  {\n    value: '3',\n    name: '10 minutes',\n    selectedName: 'If away for 10 min',\n    period: 60_000 * 10,\n  },\n] as const;\n\nexport const AUTO_CONFIRM_DURATION_MINUTES = 5;\n\nexport const PRICELESS_TOKEN_HASHES = new Set([\n  '173e31eee054cb0c76f77edc7956bed766bf48a1f63bd062d87040dcd3df700f', // FIVA SY tsTON EQAxGi9Al7hamLAORroxGkvfap6knGyzI50ThkP3CLPLTtOZ\n  '5226dd4e6db9af26b24d5ca822bc4053b7e08152f923932abf25030c7e38bb42', // FIVA PT tsTON EQAkxIRGXgs2vD2zjt334MBjD3mXg2GsyEZHfzuYX_trQkFL\n  'fea2c08a704e5192b7f37434927170440d445b87aab865c3ea2a68abe7168204', // FIVA YT tsTON EQAcy60qg22RCq87A_qgYK8hooEgjCZ44yxhdnKYdlWIfKXL\n  'e691cf9081a8aeb22ed4d94829f6626c9d822752e035800b5543c43f83d134b5', // FIVA LP tsTON EQD3BjCjxuf8mu5kvxajVbe-Ila1ScZZlAi03oS7lMmAJjM3\n  '301ce25925830d713b326824e552e962925c4ff45b1e3ea21fc363a459a49b43', // FIVA SY eUSDT EQDi9blCcyT-k8iMpFMYY0t7mHVyiCB50ZsRgyUECJDuGvIl\n  '02250f83fbb8624d859c2c045ac70ee2b3b959688c3d843aec773be9b36dbfc3', // FIVA PT eUSDT EQBzVrYkYPHx8D_HPfQacm1xONa4XSRxl826vHkx_laP2HOe\n  'dba3adb2c917db80fd71a6a68c1fc9e12976491a8309d5910f9722efc084ce4d', // FIVA YT eUSDT EQCwUSc2qrY5rn9BfFBG9ARAHePTUvITDl97UD0zOreWzLru\n  '7da9223b90984d6a144e71611a8d7c65a6298cad734faed79438dc0f7a8e53d1', // FIVA LP eUSDT EQBNlIZxIbQGQ78cXgG3VRcyl8A0kLn_6BM9kabiHHhWC4qY\n  'ddf80de336d580ab3c11d194f189c362e2ca1225cae224ea921deeaba7eca818', // tsUSDe EQDQ5UUyPHrLcQJlPAczd_fjxn8SLrlNQwolBznxCdSlfQwr\n  'eb9d9891a32ec94425c09735f6ade73f4c171da0091f874d6e9d25247d583990', // Affluent TON Lending Vault EQADQ6JcK0NMuNM5uwCcS9bjcn2RTvcxYIZjNlhIhywUrfBN\n  'f66c149de251ffd031bdb34b79abe43a062ba16b815433691e3ec40a77f01d71', // Affluent Ethena Multiply Vault EQDXmtbt1-WSP00tSh6N6FH-4lX7LbnrjORClmtmuZqg4Ymm\n  'bca42dbdcbc0d885aaffb1eeeb027d9f338c2dd68701a05641c1d1c3171a7400', // Affluent TON Multiply Vault EQDtxQqkgIRQQR5hWlrQxiJMtLwjR3rEYNUBbEcvPDwCs1Ng\n]);\n\nexport const STAKED_TOKEN_SLUGS = new Set([\n  STAKED_TON_SLUG,\n  STAKED_MYCOIN_SLUG,\n  TON_TSUSDE.slug,\n]);\n\nexport const DEFAULT_OUR_SWAP_FEE = 0.875;\n\nexport const DEFAULT_STAKING_STATE: ApiLiquidStakingState = {\n  type: 'liquid',\n  id: 'liquid',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: LIQUID_POOL,\n  tokenBalance: 0n,\n  unstakeRequestAmount: 0n,\n  instantAvailable: 0n,\n  start: 0,\n  end: 0,\n};\n\nexport const DEFAULT_NOMINATORS_STAKING_STATE: ApiNominatorsStakingState = {\n  type: 'nominators',\n  id: 'nominators',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: 'Ef8dgIOIRyCLU0NEvF8TD6Me3wrbrkS1z3Gpjk3ppd8m8-s_',\n  start: 0,\n  end: 0,\n  pendingDepositAmount: 0n,\n};\n\nexport const SWAP_API_VERSION = 3;\nexport const TONCENTER_ACTIONS_VERSION = 'v1';\n\nexport const JVAULT_URL = 'https://jvault.xyz';\n\nexport const HELP_CENTER_URL = {\n  home: {\n    en: 'https://help.mytonwallet.io/',\n    ru: 'https://help.mytonwallet.io/ru',\n  },\n  domainScam: {\n    en: 'https://help.mytonwallet.io/intro/scams/.ton-domain-scams',\n    // eslint-disable-next-line @stylistic/max-len\n    ru: 'https://help.mytonwallet.io/ru/baza-znanii/moshennichestvo-i-skamy/moshennichestvo-s-ispolzovaniem-domenov-.ton',\n  },\n  seedScam: {\n    en: 'https://help.mytonwallet.io/intro/scams/leaked-seed-phrases',\n    ru: 'https://help.mytonwallet.io/ru/baza-znanii/moshennichestvo-i-skamy/slitye-sid-frazy',\n  },\n  ethenaStaking: {\n    en: 'https://help.mytonwallet.io/intro/staking/what-is-usde-how-does-usde-staking-work',\n    ru: 'https://help.mytonwallet.io/ru/baza-znanii/steiking/chto-takoe-usde-kak-rabotaet-steiking-usde',\n  },\n};\n\nconst ALL_TON_DNS_ZONES = [\n  {\n    suffixes: ['ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-\\da-z]{4,126}$/i,\n    resolver: 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz',\n    collectionName: 'TON DNS Domains',\n  },\n  {\n    suffixes: ['t.me'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-_\\da-z]{4,32}$/i,\n    resolver: 'EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi',\n    isTelemint: true,\n    collectionName: 'Telegram Usernames',\n  },\n  {\n    suffixes: ['vip', 'ton.vip', 'vip.ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}?[\\da-z]{1,24}$/i,\n    resolver: 'EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS',\n    collectionName: 'VIP DNS Domains',\n    isUnofficial: true,\n  },\n  {\n    suffixes: ['gram'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[\\da-z]{1,127}$/i,\n    resolver: 'EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ',\n    collectionName: 'GRAM DNS Domains',\n    isUnofficial: true,\n  },\n];\n\nexport const TON_DNS_ZONES = IS_CORE_WALLET\n  ? ALL_TON_DNS_ZONES.filter(({ isUnofficial }) => !isUnofficial)\n  : ALL_TON_DNS_ZONES;\n\nexport const DEFAULT_AUTOLOCK_OPTION: AutolockValueType = '3';\nexport const WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION = 2;\n\nexport const UNKNOWN_TOKEN = {\n  symbol: '[Unknown]',\n  decimals: 9,\n} as const;\n","export function getPlatform() {\n  const { userAgent, platform } = window.navigator;\n\n  if (/Android/.test(userAgent)) return 'Android';\n\n  if (/Linux/.test(platform)) return 'Linux';\n\n  const iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  if (\n    iosPlatforms.indexOf(platform) !== -1\n    // For new IPads with M1 chip and IPadOS platform returns \"MacIntel\"\n    || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2))\n  ) {\n    return 'iOS';\n  }\n\n  const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  if (macosPlatforms.indexOf(platform) !== -1) return 'macOS';\n\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  if (windowsPlatforms.indexOf(platform) !== -1) return 'Windows';\n\n  return undefined;\n}\n","export var Directory;\n(function (Directory) {\n    /**\n     * The Documents directory.\n     * On iOS it's the app's documents directory.\n     * Use this directory to store user-generated content.\n     * On Android it's the Public Documents folder, so it's accessible from other apps.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * On Android 11 or newer the app can only access the files/folders the app created.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Documents\"] = \"DOCUMENTS\";\n    /**\n     * The Data directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Data\"] = \"DATA\";\n    /**\n     * The Library directory.\n     * On iOS it will use the Library directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.1.0\n     */\n    Directory[\"Library\"] = \"LIBRARY\";\n    /**\n     * The Cache directory.\n     * Can be deleted in cases of low memory, so use this directory to write app-specific files.\n     * that your app can re-create easily.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Cache\"] = \"CACHE\";\n    /**\n     * The external directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory on the primary shared/external\n     * storage device where the application can place persistent files it owns.\n     * These files are internal to the applications, and not typically visible\n     * to the user as media.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"External\"] = \"EXTERNAL\";\n    /**\n     * The external storage directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the primary shared/external storage directory.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * It's not accesible on Android 11 or newer.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"ExternalStorage\"] = \"EXTERNAL_STORAGE\";\n})(Directory || (Directory = {}));\nexport var Encoding;\n(function (Encoding) {\n    /**\n     * Eight-bit UCS Transformation Format\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF8\"] = \"utf8\";\n    /**\n     * Seven-bit ASCII, a.k.a. ISO646-US, a.k.a. the Basic Latin block of the\n     * Unicode character set\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"ASCII\"] = \"ascii\";\n    /**\n     * Sixteen-bit UCS Transformation Format, byte order identified by an\n     * optional byte-order mark\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF16\"] = \"utf16\";\n})(Encoding || (Encoding = {}));\n/**\n * @deprecated Use `Directory`.\n * @since 1.0.0\n */\nexport const FilesystemDirectory = Directory;\n/**\n * @deprecated Use `Encoding`.\n * @since 1.0.0\n */\nexport const FilesystemEncoding = Encoding;\n//# sourceMappingURL=definitions.js.map","import Deferred from './Deferred';\n\nexport type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\n/**\n * An important feature of this throttle implementation is that it waits for `fn` to finish before scheduling the new\n * execution. That is, `fn` never gets executed in parallel with itself.\n */\nexport function throttle<F extends AnyFunction>(\n  fn: F,\n  ms: number | (() => Promise<void>),\n  shouldRunFirst = true,\n) {\n  let args: Parameters<F> | undefined;\n  let isRunning = false;\n\n  async function scheduleFn() {\n    await (typeof ms === 'function' ? ms() : pause(ms));\n    void runFn();\n  }\n\n  async function runFn() {\n    if (!args) {\n      isRunning = false;\n      return;\n    }\n\n    try {\n      const localArgs = args;\n      args = undefined;\n      await fn(...localArgs);\n    } finally {\n      // Voiding the promise to let the error produced by `fn` be thrown immediately\n      void scheduleFn();\n    }\n  }\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!isRunning) {\n      isRunning = true;\n\n      if (shouldRunFirst) {\n        void runFn();\n      } else {\n        void scheduleFn();\n      }\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 35; // < 30 FPS\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    void Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nconst IDLE_TIMEOUT = 500;\n\nlet onIdleCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onIdle(callback: NoneToVoidFunction) {\n  if (!self.requestIdleCallback) {\n    onTickEnd(callback);\n    return;\n  }\n\n  if (!onIdleCallbacks) {\n    onIdleCallbacks = [callback];\n\n    requestIdleCallback((deadline) => {\n      const currentCallbacks = onIdleCallbacks!;\n      onIdleCallbacks = undefined;\n\n      while (currentCallbacks.length) {\n        const cb = currentCallbacks.shift()!;\n        cb();\n\n        if (!deadline.timeRemaining()) break;\n      }\n\n      if (currentCallbacks.length) {\n        if (onIdleCallbacks) {\n          // Prepend the remaining callbacks if the next pass is already planned\n          onIdleCallbacks = currentCallbacks.concat(onIdleCallbacks);\n        } else {\n          currentCallbacks.forEach(onIdle);\n        }\n      }\n    }, { timeout: IDLE_TIMEOUT });\n  } else {\n    onIdleCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n\nexport async function waitFor(cb: () => boolean, interval: number, attempts: number) {\n  let i = 0;\n  let result = cb();\n\n  while (!result && i < attempts) {\n    await pause(interval);\n\n    i++;\n    result = cb();\n  }\n\n  return result;\n}\n\nexport function setCancellableTimeout(ms: number, cb: NoneToVoidFunction) {\n  const timeoutId = setTimeout(cb, ms);\n  return () => clearTimeout(timeoutId);\n}\n\n/**\n * Returns a function that executes every given functions (tasks) with limited concurrency (not more than\n * `maxConcurrency` at a time). The tasks are executed in the same order that they are given. Unlike throttle, executes\n * every given task.\n */\nexport function createTaskQueue(maxConcurrency = 1) {\n  const queue: AnyAsyncFunction[] = [];\n  let concurrency = 0;\n\n  const runTasks = async () => {\n    concurrency++;\n    while (queue.length) {\n      const task = queue.shift()!;\n      await task(); // Expected never to throw, because the errors are caught below\n    }\n    concurrency--;\n  };\n\n  /** Schedules execution of the given function right now. The returned promise settles with the task result. */\n  const run = <T>(task: () => MaybePromise<T>): Promise<T> => {\n    const deferred = new Deferred<T>();\n    queue.push(async () => {\n      try {\n        deferred.resolve(await task());\n      } catch (err) {\n        deferred.reject(err);\n      }\n    });\n\n    if (concurrency < maxConcurrency) {\n      void runTasks();\n    }\n\n    return deferred.promise;\n  };\n\n  /** Returns the same task function, but with limited concurrency */\n  const wrap = <Args extends unknown[], Return>(\n    task: (...args: Args) => MaybePromise<Return>,\n  ): (...args: Args) => Promise<Return> => {\n    return (...args: Args) => run(() => task(...args));\n  };\n\n  return { run, wrap };\n}\n\n/**\n * Returns a function that prevents `actions` from running in parallel with itself. If the `action` is already running,\n * queues, the next call will be queued. Unlike `throttle`, never skips the calls.\n */\nexport function forbidConcurrency<Args extends unknown[], Return>(\n  action: (...args: Args) => MaybePromise<Return>,\n): (...args: Args) => Promise<Return> {\n  return createTaskQueue(1).wrap(action);\n}\n","import type { MediaWorkerApi } from '../lib/mediaWorker/index.worker';\nimport type { Connector } from './PostMessageConnector';\n\nimport { IS_TEST } from '../config';\n\nimport { createConnector } from './PostMessageConnector';\n\nexport const MAX_WORKERS = Math.min(navigator.hardwareConcurrency || 4, 4);\n\nlet instances: {\n  worker: Worker;\n  connector: Connector<MediaWorkerApi>;\n}[] | undefined;\n\nexport default function launchMediaWorkers() {\n  if (IS_TEST) return [];\n  if (!instances) {\n    instances = new Array(MAX_WORKERS).fill(undefined).map(\n      () => {\n        const worker = new Worker(new URL('../lib/mediaWorker/index.worker.ts', import.meta.url));\n        const connector = createConnector<MediaWorkerApi>(worker);\n        return { worker, connector };\n      },\n    );\n  }\n\n  return instances;\n}\n\nexport function requestMediaWorker(payload: Parameters<Connector<MediaWorkerApi>['request']>[0], index: number) {\n  return launchMediaWorkers()[index].connector.request(payload);\n}\n","import { IS_EXTENSION } from '../config';\n\nexport const IS_EXTENSION_PAGE_SCRIPT = IS_EXTENSION\n  && !['chrome-extension:', 'moz-extension:'].includes(self.location.protocol);\n","import { APP_ENV, DEBUG_ALERT_MSG } from '../config';\nimport { SECOND } from './dateFormat';\nimport { IS_EXTENSION_PAGE_SCRIPT } from './environment';\nimport { logDebugError } from './logs';\nimport { throttle } from './schedulers';\n\nconst shouldShowAlert = (APP_ENV === 'development' || APP_ENV === 'staging')\n  && typeof window === 'object'\n  && !IS_EXTENSION_PAGE_SCRIPT;\n\nconst throttledAlert = throttle((message) => window.alert(message), 10 * SECOND);\n\nself.addEventListener('error', handleErrorEvent);\nself.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nexport function handleError(err: Error | string) {\n  logDebugError('handleError', err);\n\n  const message = typeof err === 'string' ? err : err.message;\n  const stack = typeof err === 'object' ? err.stack : undefined;\n\n  if (message.endsWith('Failed to import rlottie-wasm.js')) {\n    return;\n  }\n\n  if (shouldShowAlert) {\n    throttledAlert(`${DEBUG_ALERT_MSG}\\n\\n${(message) || err}\\n${stack}`);\n  }\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","/*\n *  big.js v6.2.1\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\n *  Copyright (c) 2022 Michael Mclaughlin\n *  https://github.com/MikeMcl/big.js/LICENCE.md\n */\n\n\n/************************************** EDITABLE DEFAULTS *****************************************/\n\n\n  // The default values below must be integers within the stated ranges.\n\n  /*\n   * The maximum number of decimal places (DP) of the results of operations involving division:\n   * div and sqrt, and pow with negative exponents.\n   */\nvar DP = 20,          // 0 to MAX_DP\n\n  /*\n   * The rounding mode (RM) used when rounding to the above decimal places.\n   *\n   *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\n   *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\n   *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\n   *  3  Away from zero.                                  (ROUND_UP)\n   */\n  RM = 1,             // 0, 1, 2 or 3\n\n  // The maximum value of DP and Big.DP.\n  MAX_DP = 1E6,       // 0 to 1000000\n\n  // The maximum magnitude of the exponent argument to the pow method.\n  MAX_POWER = 1E6,    // 1 to 1000000\n\n  /*\n   * The negative exponent (NE) at and beneath which toString returns exponential notation.\n   * (JavaScript numbers: -7)\n   * -1000000 is the minimum recommended exponent value of a Big.\n   */\n  NE = -7,            // 0 to -1000000\n\n  /*\n   * The positive exponent (PE) at and above which toString returns exponential notation.\n   * (JavaScript numbers: 21)\n   * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\n   */\n  PE = 21,            // 0 to 1000000\n\n  /*\n   * When true, an error will be thrown if a primitive number is passed to the Big constructor,\n   * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\n   * primitive number without a loss of precision.\n   */\n  STRICT = false,     // true or false\n\n\n/**************************************************************************************************/\n\n\n  // Error messages.\n  NAME = '[big.js] ',\n  INVALID = NAME + 'Invalid ',\n  INVALID_DP = INVALID + 'decimal places',\n  INVALID_RM = INVALID + 'rounding mode',\n  DIV_BY_ZERO = NAME + 'Division by zero',\n\n  // The shared prototype object.\n  P = {},\n  UNDEFINED = void 0,\n  NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\n\n\n/*\n * Create and return a Big constructor.\n */\nfunction _Big_() {\n\n  /*\n   * The Big constructor and exported function.\n   * Create and return a new instance of a Big number object.\n   *\n   * n {number|string|Big} A numeric value.\n   */\n  function Big(n) {\n    var x = this;\n\n    // Enable constructor usage without new.\n    if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n);\n\n    // Duplicate.\n    if (n instanceof Big) {\n      x.s = n.s;\n      x.e = n.e;\n      x.c = n.c.slice();\n    } else {\n      if (typeof n !== 'string') {\n        if (Big.strict === true && typeof n !== 'bigint') {\n          throw TypeError(INVALID + 'value');\n        }\n\n        // Minus zero?\n        n = n === 0 && 1 / n < 0 ? '-0' : String(n);\n      }\n\n      parse(x, n);\n    }\n\n    // Retain a reference to this Big constructor.\n    // Shadow Big.prototype.constructor which points to Object.\n    x.constructor = Big;\n  }\n\n  Big.prototype = P;\n  Big.DP = DP;\n  Big.RM = RM;\n  Big.NE = NE;\n  Big.PE = PE;\n  Big.strict = STRICT;\n  Big.roundDown = 0;\n  Big.roundHalfUp = 1;\n  Big.roundHalfEven = 2;\n  Big.roundUp = 3;\n\n  return Big;\n}\n\n\n/*\n * Parse the number or string value passed to a Big constructor.\n *\n * x {Big} A Big number instance.\n * n {number|string} A numeric value.\n */\nfunction parse(x, n) {\n  var e, i, nl;\n\n  if (!NUMERIC.test(n)) {\n    throw Error(INVALID + 'number');\n  }\n\n  // Determine sign.\n  x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\n\n  // Decimal point?\n  if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\n\n  // Exponential form?\n  if ((i = n.search(/e/i)) > 0) {\n\n    // Determine exponent.\n    if (e < 0) e = i;\n    e += +n.slice(i + 1);\n    n = n.substring(0, i);\n  } else if (e < 0) {\n\n    // Integer.\n    e = n.length;\n  }\n\n  nl = n.length;\n\n  // Determine leading zeros.\n  for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\n\n  if (i == nl) {\n\n    // Zero.\n    x.c = [x.e = 0];\n  } else {\n\n    // Determine trailing zeros.\n    for (; nl > 0 && n.charAt(--nl) == '0';);\n    x.e = e - i - 1;\n    x.c = [];\n\n    // Convert string to array of digits without leading/trailing zeros.\n    for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\n  }\n\n  return x;\n}\n\n\n/*\n * Round Big x to a maximum of sd significant digits using rounding mode rm.\n *\n * x {Big} The Big to round.\n * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\n * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n * [more] {boolean} Whether the result of division was truncated.\n */\nfunction round(x, sd, rm, more) {\n  var xc = x.c;\n\n  if (rm === UNDEFINED) rm = x.constructor.RM;\n  if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\n    throw Error(INVALID_RM);\n  }\n\n  if (sd < 1) {\n    more =\n      rm === 3 && (more || !!xc[0]) || sd === 0 && (\n      rm === 1 && xc[0] >= 5 ||\n      rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\n    );\n\n    xc.length = 1;\n\n    if (more) {\n\n      // 1, 0.1, 0.01, 0.001, 0.0001 etc.\n      x.e = x.e - sd + 1;\n      xc[0] = 1;\n    } else {\n\n      // Zero.\n      xc[0] = x.e = 0;\n    }\n  } else if (sd < xc.length) {\n\n    // xc[sd] is the digit after the digit that may be rounded up.\n    more =\n      rm === 1 && xc[sd] >= 5 ||\n      rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\n        (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\n      rm === 3 && (more || !!xc[0]);\n\n    // Remove any digits after the required precision.\n    xc.length = sd;\n\n    // Round up?\n    if (more) {\n\n      // Rounding up may mean the previous digit has to be rounded up.\n      for (; ++xc[--sd] > 9;) {\n        xc[sd] = 0;\n        if (sd === 0) {\n          ++x.e;\n          xc.unshift(1);\n          break;\n        }\n      }\n    }\n\n    // Remove trailing zeros.\n    for (sd = xc.length; !xc[--sd];) xc.pop();\n  }\n\n  return x;\n}\n\n\n/*\n * Return a string representing the value of Big x in normal or exponential notation.\n * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\n */\nfunction stringify(x, doExponential, isNonzero) {\n  var e = x.e,\n    s = x.c.join(''),\n    n = s.length;\n\n  // Exponential notation?\n  if (doExponential) {\n    s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\n\n  // Normal notation.\n  } else if (e < 0) {\n    for (; ++e;) s = '0' + s;\n    s = '0.' + s;\n  } else if (e > 0) {\n    if (++e > n) {\n      for (e -= n; e--;) s += '0';\n    } else if (e < n) {\n      s = s.slice(0, e) + '.' + s.slice(e);\n    }\n  } else if (n > 1) {\n    s = s.charAt(0) + '.' + s.slice(1);\n  }\n\n  return x.s < 0 && isNonzero ? '-' + s : s;\n}\n\n\n// Prototype/instance methods\n\n\n/*\n * Return a new Big whose value is the absolute value of this Big.\n */\nP.abs = function () {\n  var x = new this.constructor(this);\n  x.s = 1;\n  return x;\n};\n\n\n/*\n * Return 1 if the value of this Big is greater than the value of Big y,\n *       -1 if the value of this Big is less than the value of Big y, or\n *        0 if they have the same value.\n */\nP.cmp = function (y) {\n  var isneg,\n    x = this,\n    xc = x.c,\n    yc = (y = new x.constructor(y)).c,\n    i = x.s,\n    j = y.s,\n    k = x.e,\n    l = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\n\n  // Signs differ?\n  if (i != j) return i;\n\n  isneg = i < 0;\n\n  // Compare exponents.\n  if (k != l) return k > l ^ isneg ? 1 : -1;\n\n  j = (k = xc.length) < (l = yc.length) ? k : l;\n\n  // Compare digit by digit.\n  for (i = -1; ++i < j;) {\n    if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\n  }\n\n  // Compare lengths.\n  return k == l ? 0 : k > l ^ isneg ? 1 : -1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\n * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.div = function (y) {\n  var x = this,\n    Big = x.constructor,\n    a = x.c,                  // dividend\n    b = (y = new Big(y)).c,   // divisor\n    k = x.s == y.s ? 1 : -1,\n    dp = Big.DP;\n\n  if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n\n  // Divisor is zero?\n  if (!b[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  // Dividend is 0? Return +-0.\n  if (!a[0]) {\n    y.s = k;\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  var bl, bt, n, cmp, ri,\n    bz = b.slice(),\n    ai = bl = b.length,\n    al = a.length,\n    r = a.slice(0, bl),   // remainder\n    rl = r.length,\n    q = y,                // quotient\n    qc = q.c = [],\n    qi = 0,\n    p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\n\n  q.s = k;\n  k = p < 0 ? 0 : p;\n\n  // Create version of divisor with leading zero.\n  bz.unshift(0);\n\n  // Add zeros to make remainder as long as divisor.\n  for (; rl++ < bl;) r.push(0);\n\n  do {\n\n    // n is how many times the divisor goes into current remainder.\n    for (n = 0; n < 10; n++) {\n\n      // Compare divisor and remainder.\n      if (bl != (rl = r.length)) {\n        cmp = bl > rl ? 1 : -1;\n      } else {\n        for (ri = -1, cmp = 0; ++ri < bl;) {\n          if (b[ri] != r[ri]) {\n            cmp = b[ri] > r[ri] ? 1 : -1;\n            break;\n          }\n        }\n      }\n\n      // If divisor < remainder, subtract divisor from remainder.\n      if (cmp < 0) {\n\n        // Remainder can't be more than 1 digit longer than divisor.\n        // Equalise lengths using divisor with extra leading zero?\n        for (bt = rl == bl ? b : bz; rl;) {\n          if (r[--rl] < bt[rl]) {\n            ri = rl;\n            for (; ri && !r[--ri];) r[ri] = 9;\n            --r[ri];\n            r[rl] += 10;\n          }\n          r[rl] -= bt[rl];\n        }\n\n        for (; !r[0];) r.shift();\n      } else {\n        break;\n      }\n    }\n\n    // Add the digit n to the result array.\n    qc[qi++] = cmp ? n : ++n;\n\n    // Update the remainder.\n    if (r[0] && cmp) r[rl] = a[ai] || 0;\n    else r = [a[ai]];\n\n  } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\n\n  // Leading zero? Do not remove if result is simply zero (qi == 1).\n  if (!qc[0] && qi != 1) {\n\n    // There can't be more than one zero.\n    qc.shift();\n    q.e--;\n    p--;\n  }\n\n  // Round?\n  if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\n\n  return q;\n};\n\n\n/*\n * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\n */\nP.eq = function (y) {\n  return this.cmp(y) === 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than the value of Big y, otherwise return\n * false.\n */\nP.gt = function (y) {\n  return this.cmp(y) > 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\n * return false.\n */\nP.gte = function (y) {\n  return this.cmp(y) > -1;\n};\n\n\n/*\n * Return true if the value of this Big is less than the value of Big y, otherwise return false.\n */\nP.lt = function (y) {\n  return this.cmp(y) < 0;\n};\n\n\n/*\n * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\n * return false.\n */\nP.lte = function (y) {\n  return this.cmp(y) < 1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big minus the value of Big y.\n */\nP.minus = P.sub = function (y) {\n  var i, j, t, xlty,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  // Signs differ?\n  if (a != b) {\n    y.s = -b;\n    return x.plus(y);\n  }\n\n  var xc = x.c.slice(),\n    xe = x.e,\n    yc = y.c,\n    ye = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (yc[0]) {\n      y.s = -b;\n    } else if (xc[0]) {\n      y = new Big(x);\n    } else {\n      y.s = 1;\n    }\n    return y;\n  }\n\n  // Determine which is the bigger number. Prepend zeros to equalise exponents.\n  if (a = xe - ye) {\n\n    if (xlty = a < 0) {\n      a = -a;\n      t = xc;\n    } else {\n      ye = xe;\n      t = yc;\n    }\n\n    t.reverse();\n    for (b = a; b--;) t.push(0);\n    t.reverse();\n  } else {\n\n    // Exponents equal. Check digit by digit.\n    j = ((xlty = xc.length < yc.length) ? xc : yc).length;\n\n    for (a = b = 0; b < j; b++) {\n      if (xc[b] != yc[b]) {\n        xlty = xc[b] < yc[b];\n        break;\n      }\n    }\n  }\n\n  // x < y? Point xc to the array of the bigger number.\n  if (xlty) {\n    t = xc;\n    xc = yc;\n    yc = t;\n    y.s = -y.s;\n  }\n\n  /*\n   * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\n   * needs to start at yc.length.\n   */\n  if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\n\n  // Subtract yc from xc.\n  for (b = i; j > a;) {\n    if (xc[--j] < yc[j]) {\n      for (i = j; i && !xc[--i];) xc[i] = 9;\n      --xc[i];\n      xc[j] += 10;\n    }\n\n    xc[j] -= yc[j];\n  }\n\n  // Remove trailing zeros.\n  for (; xc[--b] === 0;) xc.pop();\n\n  // Remove leading zeros and adjust exponent accordingly.\n  for (; xc[0] === 0;) {\n    xc.shift();\n    --ye;\n  }\n\n  if (!xc[0]) {\n\n    // n - n = +0\n    y.s = 1;\n\n    // Result must be zero.\n    xc = [ye = 0];\n  }\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big modulo the value of Big y.\n */\nP.mod = function (y) {\n  var ygtx,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  if (!y.c[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  x.s = y.s = 1;\n  ygtx = y.cmp(x) == 1;\n  x.s = a;\n  y.s = b;\n\n  if (ygtx) return new Big(x);\n\n  a = Big.DP;\n  b = Big.RM;\n  Big.DP = Big.RM = 0;\n  x = x.div(y);\n  Big.DP = a;\n  Big.RM = b;\n\n  return this.minus(x.times(y));\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big negated.\n */\nP.neg = function () {\n  var x = new this.constructor(this);\n  x.s = -x.s;\n  return x;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big plus the value of Big y.\n */\nP.plus = P.add = function (y) {\n  var e, k, t,\n    x = this,\n    Big = x.constructor;\n\n  y = new Big(y);\n\n  // Signs differ?\n  if (x.s != y.s) {\n    y.s = -y.s;\n    return x.minus(y);\n  }\n\n  var xe = x.e,\n    xc = x.c,\n    ye = y.e,\n    yc = y.c;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (!yc[0]) {\n      if (xc[0]) {\n        y = new Big(x);\n      } else {\n        y.s = x.s;\n      }\n    }\n    return y;\n  }\n\n  xc = xc.slice();\n\n  // Prepend zeros to equalise exponents.\n  // Note: reverse faster than unshifts.\n  if (e = xe - ye) {\n    if (e > 0) {\n      ye = xe;\n      t = yc;\n    } else {\n      e = -e;\n      t = xc;\n    }\n\n    t.reverse();\n    for (; e--;) t.push(0);\n    t.reverse();\n  }\n\n  // Point xc to the longer array.\n  if (xc.length - yc.length < 0) {\n    t = yc;\n    yc = xc;\n    xc = t;\n  }\n\n  e = yc.length;\n\n  // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\n  for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\n\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\n\n  if (k) {\n    xc.unshift(k);\n    ++ye;\n  }\n\n  // Remove trailing zeros.\n  for (e = xc.length; xc[--e] === 0;) xc.pop();\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a Big whose value is the value of this Big raised to the power n.\n * If n is negative, round to a maximum of Big.DP decimal places using rounding\n * mode Big.RM.\n *\n * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\n */\nP.pow = function (n) {\n  var x = this,\n    one = new x.constructor('1'),\n    y = one,\n    isneg = n < 0;\n\n  if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\n    throw Error(INVALID + 'exponent');\n  }\n\n  if (isneg) n = -n;\n\n  for (;;) {\n    if (n & 1) y = y.times(x);\n    n >>= 1;\n    if (!n) break;\n    x = x.times(x);\n  }\n\n  return isneg ? one.div(y) : y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\n * significant digits using rounding mode rm, or Big.RM if rm is not specified.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.prec = function (sd, rm) {\n  if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n    throw Error(INVALID + 'precision');\n  }\n  return round(new this.constructor(this), sd, rm);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\n * using rounding mode rm, or Big.RM if rm is not specified.\n * If dp is negative, round to an integer which is a multiple of 10**-dp.\n * If dp is not specified, round to 0 decimal places.\n *\n * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.round = function (dp, rm) {\n  if (dp === UNDEFINED) dp = 0;\n  else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n  return round(new this.constructor(this), dp + this.e + 1, rm);\n};\n\n\n/*\n * Return a new Big whose value is the square root of the value of this Big, rounded, if\n * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.sqrt = function () {\n  var r, c, t,\n    x = this,\n    Big = x.constructor,\n    s = x.s,\n    e = x.e,\n    half = new Big('0.5');\n\n  // Zero?\n  if (!x.c[0]) return new Big(x);\n\n  // Negative?\n  if (s < 0) {\n    throw Error(NAME + 'No square root');\n  }\n\n  // Estimate.\n  s = Math.sqrt(x + '');\n\n  // Math.sqrt underflow/overflow?\n  // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\n  if (s === 0 || s === 1 / 0) {\n    c = x.c.join('');\n    if (!(c.length + e & 1)) c += '0';\n    s = Math.sqrt(c);\n    e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\n    r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\n  } else {\n    r = new Big(s + '');\n  }\n\n  e = r.e + (Big.DP += 4);\n\n  // Newton-Raphson iteration.\n  do {\n    t = r;\n    r = half.times(t.plus(x.div(t)));\n  } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\n\n  return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big times the value of Big y.\n */\nP.times = P.mul = function (y) {\n  var c,\n    x = this,\n    Big = x.constructor,\n    xc = x.c,\n    yc = (y = new Big(y)).c,\n    a = xc.length,\n    b = yc.length,\n    i = x.e,\n    j = y.e;\n\n  // Determine sign of result.\n  y.s = x.s == y.s ? 1 : -1;\n\n  // Return signed 0 if either 0.\n  if (!xc[0] || !yc[0]) {\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  // Initialise exponent of result as x.e + y.e.\n  y.e = i + j;\n\n  // If array xc has fewer digits than yc, swap xc and yc, and lengths.\n  if (a < b) {\n    c = xc;\n    xc = yc;\n    yc = c;\n    j = a;\n    a = b;\n    b = j;\n  }\n\n  // Initialise coefficient array of result with zeros.\n  for (c = new Array(j = a + b); j--;) c[j] = 0;\n\n  // Multiply.\n\n  // i is initially xc.length.\n  for (i = b; i--;) {\n    b = 0;\n\n    // a is yc.length.\n    for (j = a + i; j > i;) {\n\n      // Current sum of products at this digit position, plus carry.\n      b = c[j] + yc[i] * xc[j - i - 1] + b;\n      c[j--] = b % 10;\n\n      // carry\n      b = b / 10 | 0;\n    }\n\n    c[j] = b;\n  }\n\n  // Increment result exponent if there is a final carry, otherwise remove leading zero.\n  if (b) ++y.e;\n  else c.shift();\n\n  // Remove trailing zeros.\n  for (i = c.length; !c[--i];) c.pop();\n  y.c = c;\n\n  return y;\n};\n\n\n/*\n * Return a string representing the value of this Big in exponential notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toExponential = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), ++dp, rm);\n    for (; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, true, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big in normal notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n *\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\n */\nP.toFixed = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), dp + x.e + 1, rm);\n\n    // x.e may have changed if the value is rounded up.\n    for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, false, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Omit the sign for negative zero.\n */\nP[Symbol.for('nodejs.util.inspect.custom')] = P.toJSON = P.toString = function () {\n  var x = this,\n    Big = x.constructor;\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\n};\n\n\n/*\n * Return the value of this Big as a primitve number.\n */\nP.toNumber = function () {\n  var n = Number(stringify(this, true, true));\n  if (this.constructor.strict === true && !this.eq(n.toString())) {\n    throw Error(NAME + 'Imprecise conversion');\n  }\n  return n;\n};\n\n\n/*\n * Return a string representing the value of this Big rounded to sd significant digits using\n * rounding mode rm, or Big.RM if rm is not specified.\n * Use exponential notation if sd is less than the number of digits necessary to represent\n * the integer part of the value in normal notation.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toPrecision = function (sd, rm) {\n  var x = this,\n    Big = x.constructor,\n    n = x.c[0];\n\n  if (sd !== UNDEFINED) {\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n      throw Error(INVALID + 'precision');\n    }\n    x = round(new Big(x), sd, rm);\n    for (; x.c.length < sd;) x.c.push(0);\n  }\n\n  return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Include the sign for negative zero.\n */\nP.valueOf = function () {\n  var x = this,\n    Big = x.constructor;\n  if (Big.strict === true) {\n    throw Error(NAME + 'valueOf disallowed');\n  }\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\n};\n\n\n// Export\n\n\nexport var Big = _Big_();\n\n/// <reference types=\"https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/big.js/index.d.ts\" />\nexport default Big;\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\ntype SafeExecOptions = {\n  rescue?: (err: Error) => void;\n  always?: NoneToVoidFunction;\n  shouldIgnoreError?: boolean;\n};\n\nexport async function safeExecAsync<T extends AnyAsyncFunction>(\n  cb: T,\n  options?: SafeExecOptions,\n): Promise<ReturnType<T> | undefined> {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return await cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n\nexport default function safeExec<T extends AnyFunction>(cb: T, options?: SafeExecOptions): ReturnType<T> | undefined {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export const DETACHED_TAB_URL = '#detached';\n\nlet ledgerTabId: number | undefined;\n\n/**\n * In order to connect to Ledger, the webapp needs to get the user permission to use the HID device. Chrome doesn't ask\n * the user to choose a device when the code runs in the extension popup: https://issues.chromium.org/issues/40233645.\n * So in case of extension we open a browser tab which asks the permission. The tab runs the same webapp but with a\n * limited UI. Once the user grants the permission, the extension can continue connecting to Ledger inside the popup.\n */\nexport function openLedgerTab() {\n  return createLedgerTab();\n}\n\nexport function closeLedgerTab() {\n  if (!ledgerTabId) return;\n\n  chrome.tabs.query({ active: true }, () => {\n    if (!ledgerTabId) return;\n\n    void chrome.tabs.remove(ledgerTabId);\n  });\n}\n\nexport async function closeThisTab() {\n  const tab = await chrome.tabs.getCurrent();\n  if (!tab?.id) return;\n  await chrome.tabs.remove(tab.id);\n}\n\nexport function onLedgerTabClose(id: number, onClose: () => void) {\n  const listener = (closedTabId: number) => {\n    if (closedTabId !== id) {\n      return;\n    }\n\n    ledgerTabId = undefined;\n    chrome.tabs.onRemoved.removeListener(listener);\n    onClose();\n  };\n\n  chrome.tabs.onRemoved.addListener(listener);\n}\n\nasync function createLedgerTab() {\n  const tab = await chrome.tabs.create({ url: `index.html${DETACHED_TAB_URL}`, active: true });\n  await chrome.windows.update(tab.windowId, { focused: true });\n\n  ledgerTabId = tab.id!;\n\n  return ledgerTabId;\n}\n","import type InAppBrowserPostMessageAdapter from './embeddedDappBridge/provider/InAppBrowserPostMessageAdapter';\nimport type {\n  ApiUpdate,\n  CancellableCallback,\n  OriginMessageData,\n  OriginMessageEvent,\n  WorkerMessageData,\n} from './PostMessageConnector';\n\nimport { decodeExtensionMessage, encodeExtensionMessage } from './extensionMessageSerializer';\nimport { logDebugError } from './logs';\n\ndeclare const self: WorkerGlobalScope;\n\nconst callbackState = new Map<string, CancellableCallback>();\n\ntype ApiConfig =\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n  ((name: string, ...args: any[]) => any | [any, ArrayBuffer[]])\n  | Record<string, AnyFunction>;\ntype SendToOrigin = (data: WorkerMessageData, transferables?: Transferable[]) => void;\n\n/**\n * Provides functions, defined in this messenger (a window, a worker), to another messenger.\n * The other messenger can call the functions using `createConnector`.\n */\nexport function createPostMessageInterface(\n  api: ApiConfig,\n  channel?: string,\n  target: DedicatedWorkerGlobalScope | Worker | InAppBrowserPostMessageAdapter = self as DedicatedWorkerGlobalScope,\n  shouldIgnoreErrors?: boolean,\n) {\n  function sendToOrigin(data: WorkerMessageData, transferables?: Transferable[]) {\n    data.channel = channel;\n\n    if (transferables) {\n      target.postMessage(data, transferables);\n    } else {\n      target.postMessage(data);\n    }\n  }\n\n  if (!shouldIgnoreErrors) {\n    handleErrors(sendToOrigin);\n  }\n\n  function handleMessage(e: OriginMessageEvent) {\n    if (e.data?.channel === channel) {\n      void onMessage(api, e.data, sendToOrigin);\n    }\n  }\n\n  // Correct for any target, but TypeScript weirdly complains\n  (target as DedicatedWorkerGlobalScope).addEventListener('message', handleMessage);\n\n  return () => {\n    (target as DedicatedWorkerGlobalScope).removeEventListener('message', handleMessage);\n  };\n}\n\n/**\n * Provides functions, defined in the main window, to an IFrame.\n */\nexport function createReverseIFrameInterface(\n  api: ApiConfig,\n  targetOrigin: string,\n  target: Window,\n  channel?: string,\n) {\n  function sendToOrigin(data: WorkerMessageData, transferables?: Transferable[]) {\n    data.channel = channel;\n\n    if (transferables) {\n      throw new Error('Cannot send `Transferable` to `Window`');\n    } else {\n      target.postMessage(data, targetOrigin);\n    }\n  }\n\n  function handleMessage(e: OriginMessageEvent) {\n    if (targetOrigin && e.origin !== targetOrigin) return;\n\n    if (e.data?.channel === channel) {\n      void onMessage(api, e.data, sendToOrigin);\n    }\n  }\n\n  window.addEventListener('message', handleMessage);\n\n  return () => {\n    window.removeEventListener('message', handleMessage);\n  };\n}\n\n/**\n * Provides functions, defined in this extension service worker, to a window.\n * The window can call the functions using `createExtensionConnector`.\n */\nexport function createExtensionInterface(\n  portName: string,\n  api: ApiConfig,\n  channel?: string,\n  cleanUpdater?: (onUpdate: (update: ApiUpdate) => void) => void,\n  withAutoInit = false,\n) {\n  chrome.runtime.onConnect.addListener((port) => {\n    if (port.name !== portName) {\n      return;\n    }\n\n    const url = port.sender?.url;\n    const origin = url ? new URL(url).origin : undefined;\n\n    const dAppUpdater = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n\n    function sendToOrigin(data: WorkerMessageData) {\n      data.channel = channel;\n      port.postMessage(encodeExtensionMessage(data));\n    }\n\n    handleErrors(sendToOrigin);\n\n    port.onMessage.addListener((data: OriginMessageData | string) => {\n      data = decodeExtensionMessage(data);\n      if (data.channel === channel) {\n        void onMessage(api, data, sendToOrigin, dAppUpdater, origin);\n      }\n    });\n\n    port.onDisconnect.addListener(() => {\n      cleanUpdater?.(dAppUpdater);\n    });\n\n    if (withAutoInit) {\n      void onMessage(api, { type: 'init', args: [] }, sendToOrigin, dAppUpdater);\n    }\n  });\n}\n\n/**\n * Provides functions, defined in this window, to the extension service worker.\n * The service worker can call the functions using `createReverseExtensionConnector`.\n */\nexport function createReverseExtensionInterface(\n  portName: string,\n  api: ApiConfig,\n) {\n  let port: chrome.runtime.Port;\n\n  function sendToServiceWorker(data: WorkerMessageData) {\n    port.postMessage(encodeExtensionMessage(data));\n  }\n\n  function connect() {\n    port = chrome.runtime.connect({ name: portName });\n\n    port.onMessage.addListener((data: OriginMessageData | string) => {\n      data = decodeExtensionMessage(data);\n      void onMessage(api, data, sendToServiceWorker);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connect();\n    });\n  }\n\n  connect();\n}\n\nasync function onMessage(\n  api: ApiConfig,\n  data: OriginMessageData,\n  sendToOrigin: SendToOrigin,\n  onUpdate?: (update: ApiUpdate) => void,\n  origin?: string,\n) {\n  if (!onUpdate) {\n    onUpdate = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n  }\n\n  switch (data.type) {\n    case 'init': {\n      const { args } = data;\n      const promise = typeof api === 'function'\n        ? api('init', origin, onUpdate, ...args)\n        : api.init?.(onUpdate, ...args);\n      await promise;\n\n      break;\n    }\n    case 'callMethod': {\n      const {\n        messageId, name, args, withCallback,\n      } = data;\n      try {\n        // This method is probably from another worker\n        if (typeof api !== 'function' && !api[name]) return;\n\n        if (messageId && withCallback) {\n          const callback = (...callbackArgs: any[]) => {\n            const lastArg = callbackArgs[callbackArgs.length - 1];\n\n            sendToOrigin({\n              type: 'methodCallback',\n              messageId,\n              callbackArgs,\n            }, isTransferable(lastArg) ? [lastArg] : undefined);\n          };\n\n          callbackState.set(messageId, callback);\n\n          args.push(callback as never);\n        }\n\n        const response = typeof api === 'function'\n          ? await api(name, origin, ...args)\n          : await api[name](...args);\n        const { arrayBuffer } = (typeof response === 'object' && response && 'arrayBuffer' in response) || {};\n\n        if (messageId) {\n          sendToOrigin(\n            {\n              type: 'methodResponse',\n              messageId,\n              response,\n            },\n            arrayBuffer ? [arrayBuffer] : undefined,\n          );\n        }\n      } catch (err: any) {\n        logDebugError(name, err);\n\n        if (messageId) {\n          sendToOrigin({\n            type: 'methodResponse',\n            messageId,\n            error: { message: err.message },\n          });\n        }\n      }\n\n      if (messageId) {\n        callbackState.delete(messageId);\n      }\n\n      break;\n    }\n    case 'cancelProgress': {\n      const callback = callbackState.get(data.messageId);\n      if (callback) {\n        callback.isCanceled = true;\n      }\n\n      break;\n    }\n  }\n}\n\nfunction isTransferable(obj: any) {\n  return obj instanceof ArrayBuffer || obj instanceof ImageBitmap;\n}\n\nfunction handleErrors(sendToOrigin: SendToOrigin) {\n  self.onerror = (e) => {\n    const message = e.error?.message || 'Uncaught exception in worker';\n    logDebugError(message, e.error);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.error?.stack,\n      },\n    });\n  };\n\n  self.addEventListener('unhandledrejection', (e) => {\n    const message = e.reason?.message || 'Unhandled rejection in worker';\n    logDebugError(message, e.reason);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.reason?.stack,\n      },\n    });\n  });\n}\n","import { DEBUG, DEBUG_API } from '../config';\nimport { AssertionError } from './assert';\n\nexport interface Log {\n  message: string;\n  args: any[];\n  time: number; // Passing data from the worker to the application as a date object is not supported\n  level: 'debug' | 'debugError';\n}\n\nconst MAX_LOG_LENGTH = 999;\nconst logs: Log[] = [];\n\nexport function errorReplacer(_: string, value: any) {\n  if (value instanceof Error) {\n    return {\n      name: value.name,\n      message: value.message,\n      stack: value.stack,\n      metadata: value instanceof AssertionError ? value.metadata : undefined,\n    };\n  }\n  return value;\n}\n\nexport function addLog(log: Omit<Log, 'time'>) {\n  if (logs.length > MAX_LOG_LENGTH) {\n    logs.shift();\n  }\n\n  logs.push({\n    ...log,\n    args: log.args.map((arg) => JSON.stringify(arg, errorReplacer)),\n    time: Date.now(),\n  });\n}\n\nexport function getLogs() {\n  return logs;\n}\n\nexport function logDebugError(message: string, ...args: any[]) {\n  addLog({ message, level: 'debugError', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.error(`[DEBUG][${message}]`, ...args);\n  }\n}\n\nexport function logDebug(message: any, ...args: any[]) {\n  addLog({ message, level: 'debug', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log(`[DEBUG] ${message}`, ...args);\n  }\n}\n\nexport function logDebugApi(message: any, obj1: any, obj2?: any) {\n  if (DEBUG_API) {\n    // eslint-disable-next-line no-console\n    console.debug(`[DEBUG] ${message}`);\n    // eslint-disable-next-line no-console\n    if (obj1) console.dir(obj1);\n    // eslint-disable-next-line no-console\n    if (obj2) console.dir(obj2);\n  }\n}\n\nexport function logSelfXssWarnings() {\n  const selfXssWarnings: AnyLiteral = {\n    en: 'WARNING! This console can be a way for bad people to take over your crypto wallet through something called '\n      + 'a Self-XSS attack. So, don\\'t put in or paste code you don\\'t understand. Stay safe!',\n    ru: '!             '\n      + '  Self-XSS.       ,    .  !',\n    es: 'ADVERTENCIA! Esta consola puede ser una forma en que las personas malintencionadas se apoderen de su '\n      + 'billetera de criptomonedas mediante un ataque llamado Self-XSS. Por lo tanto, '\n      + 'no introduzca ni pegue cdigo que no comprenda. Cudese!',\n    zh: 'Self-XSS',\n  };\n\n  const langCode = navigator.language.split('-')[0];\n  const text = selfXssWarnings[langCode] || selfXssWarnings.en;\n\n  // eslint-disable-next-line no-console\n  console.log('%c%s', 'color: red; background: yellow; font-size: 18px;', text);\n}\n","export enum ApiCommonError {\n  Unexpected = 'Unexpected',\n  ServerError = 'ServerError',\n  DebugError = 'DebugError',\n  UnsupportedVersion = 'UnsupportedVersion',\n  InvalidPassword = 'InvalidPassword',\n}\n\nexport enum ApiAuthError {\n  InvalidMnemonic = 'InvalidMnemonic',\n  InvalidAddress = 'InvalidAddress',\n  DomainNotResolved = 'DomainNotResolved',\n}\n\nexport enum ApiTransactionDraftError {\n  InvalidAmount = 'InvalidAmount',\n  InvalidToAddress = 'InvalidToAddress',\n  InsufficientBalance = 'InsufficientBalance',\n  InvalidStateInit = 'InvalidStateInit',\n  DomainNotResolved = 'DomainNotResolved',\n  WalletNotInitialized = 'WalletNotInitialized',\n  InvalidAddressFormat = 'InvalidAddressFormat',\n  InactiveContract = 'InactiveContract',\n}\n\nexport enum ApiTransactionError {\n  PartialTransactionFailure = 'PartialTransactionFailure',\n  IncorrectDeviceTime = 'IncorrectDeviceTime',\n  InsufficientBalance = 'InsufficientBalance',\n  UnsuccesfulTransfer = 'UnsuccesfulTransfer',\n  WrongAddress = 'WrongAddress',\n  WrongNetwork = 'WrongNetwork',\n  ConcurrentTransaction = 'ConcurrentTransaction',\n}\n\nexport enum ApiHardwareError {\n  /** Used when the Ledger TON app needs to be updated to support this transaction */\n  HardwareOutdated = 'HardwareOutdated',\n  BlindSigningNotEnabled = 'BlindSigningNotEnabled',\n  RejectedByUser = 'RejectedByUser',\n  ProofTooLarge = 'ProofTooLarge',\n}\n\nexport type ApiAnyDisplayError =\n  | ApiCommonError\n  | ApiAuthError\n  | ApiTransactionDraftError\n  | ApiTransactionError\n  | ApiHardwareError;\n","export function random(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport function sample<T>(arr: T[]) {\n  return arr[random(0, arr.length - 1)];\n}\n\nexport function randomBytes(size: number) {\n  return self.crypto.getRandomValues(new Uint8Array(size));\n}\n\nexport function randomBase64(byteSize: number) {\n  return Buffer.from(randomBytes(byteSize)).toString('base64');\n}\n","export class AssertionError extends Error {\n  constructor(\n    message: string,\n    // Any additional information for the error to help debug it. Don't put sensitive information here.\n    public metadata?: unknown,\n  ) {\n    super(message);\n  }\n}\n\nexport function assert(condition: boolean, message: string, metadata?: unknown) {\n  if (!condition) {\n    throw new AssertionError(message, metadata);\n  }\n}\n","import type { ApiNetwork, ApiTonWallet } from '../../api/types';\n\nimport { WORKCHAIN, Workchain } from '../../api/chains/ton/constants';\n\nconst BROKEN_CONNECTION_ERRORS = new Set(['DisconnectedDeviceDuringOperation', 'TransportRaceCondition']);\n\nexport function getLedgerAccountPathByWallet(network: ApiNetwork, wallet: ApiTonWallet, workchain?: Workchain) {\n  return getLedgerAccountPathByIndex(wallet.index, network !== 'mainnet', workchain);\n}\n\nexport function getLedgerAccountPathByIndex(index: number, isTestnet: boolean, workchain = WORKCHAIN) {\n  const network = isTestnet ? 1 : 0;\n  const chain = workchain === Workchain.MasterChain ? 255 : 0;\n  return [44, 607, network, chain, index, 0];\n}\n\nexport function isLedgerConnectionBroken(error: string) {\n  return BROKEN_CONNECTION_ERRORS.has(error);\n}\n","import type { Address, Dictionary } from '@ton/core';\n\nexport type AddrList = Dictionary<Address, boolean>;\n\nexport const JettonStakingOpCodes = {\n  GET_STATIC_DATA: 0X2FCB26A2,\n  REPORT_STATIC_DATA: 0X8B771735,\n  GET_STORAGE_DATA: 0X5B88E5CC,\n  REPORT_STORAGE_DATA: 0XAAB4A8EF,\n  EXCESSES: 0XD53276DB,\n\n  // Jettons,\n  TRANSFER_JETTON: 0X0F8A7EA5,\n  INTERNAL_TRANSFER: 0X178D4519,\n  TRANSFER_NOTIFICATION: 0X7362D09C,\n  PROVIDE_WALLET_ADDRESS: 0X2C76B973,\n  TAKE_WALLET_ADDRESS: 0XD1735400,\n  BURN_JETTON: 0X595F07BC,\n\n  // Staking pool,\n  STAKE_JETTONS: 0XE3A06989,\n  ADD_REWARDS: 0XDB16AC95,\n  SEND_CLAIMED_REWARDS: 0X44BC1FE3,\n  SEND_UNSTAKED_JETTONS: 0XFB232BC3,\n  APPROVE_STAKE: 0X919DE781,\n  CANCEL_STAKE: 0X9EADA1D9,\n  ADD_REWARD_JETTONS: 0X10676AE7,\n  CLAIM_COMMISSIONS: 0XBCA8F067,\n  REQUEST_UPDATE_REWARDS: 0XF5C5BAA3,\n\n  // Staked jetton wallet,\n  CLAIM_REWARDS: 0X78D9F109,\n  RECEIVE_JETTONS: 0XD68A4AC1,\n  UNSTAKE_JETTONS: 0X499A9262,\n  UNSTAKE_REQUEST: 0X0168D4B7,\n  CANCEL_UNSTAKE_REQUEST: 0XA4910F1A,\n  UPDATE_REWARDS: 0XAE9307CE,\n  CONFIRM_TRANSFER: 0XBC85EB11,\n\n  // Pools admin,\n  DEPLOY_NEW_POOL: 0XDA861F17,\n  SEND_COMMISSIONS: 0XB96ADAEA,\n  SET_CODE: 0xe2d2d211,\n  CHANGE_CREATION_FEE: 0x66D5528B,\n  CHANGE_CONTENT: 0x0ec29200,\n  UPDATE_CODES: 0x85c923cf,\n};\n\nexport const JettonStakingGas = {\n  MIN_RESERVE: 20_000_000n,\n  DEPLOY_POOL: 340_000_000n,\n  NOTIFICATION: 340_000_000n,\n  JETTON_TRANSFER: 55_000_000n,\n  BURN_JETTONS: 340_000_000n,\n  STAKE_JETTONS: 300_000_000n, // It was 340000000n\n  UNSTAKE_JETTONS: 340_000_000n,\n  CANCEL_UNSTAKE: 340_000_000n,\n  SEND_COMMISSIONS: 340_000_000n,\n  SIMPLE_UPDATE_REQUEST: 340_000_000n,\n  ADD_REWARDS: 340_000_000n,\n  APPROVE_TRANSFER: 340_000_000n,\n  SAVE_UPDATED_REWARDS: 340_000_000n,\n  MIN_EXCESS: 10_000_000n,\n  SEND_STAKED_JETTONS: 630_000_000n,\n};\n\nexport const Dividers = {\n  COMMISSION_DIVIDER: 10000n,\n  REWARDS_DIVIDER: 1000,\n  DISTRIBUTION_SPEED_DIVIDER: BigInt(24 * 60 * 60),\n  DISTRIBUTED_REWARDS_DIVIDER: 100000000000000000000000000000000000000n,\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import safeExec from '../../util/safeExec';\nimport { fastRaf, throttleWith } from '../../util/schedulers';\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  void Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","// https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n\nexport default {\n  Element: {\n    props: [\n      'clientLeft', 'clientTop', 'clientWidth', 'clientHeight',\n      'scrollWidth', 'scrollHeight', 'scrollLeft', 'scrollTop',\n    ] as const,\n    methods: [\n      'getClientRects', 'getBoundingClientRect',\n      'scrollBy', 'scrollTo', 'scrollIntoView', 'scrollIntoViewIfNeeded',\n    ] as const,\n  },\n  HTMLElement: {\n    props: [\n      'offsetLeft', 'offsetTop', 'offsetWidth', 'offsetHeight', 'offsetParent',\n      'innerText',\n    ] as const,\n    methods: ['focus'] as const,\n  },\n  window: {\n    props: [\n      'scrollX', 'scrollY',\n      'innerHeight', 'innerWidth',\n    ] as const,\n    methods: ['getComputedStyle'] as const,\n  },\n  VisualViewport: {\n    props: [\n      'height', 'width', 'offsetTop', 'offsetLeft',\n    ] as const,\n  },\n  Document: {\n    props: ['scrollingElement'] as const,\n    methods: ['elementFromPoint'] as const,\n  },\n  HTMLInputElement: {\n    methods: ['select'] as const,\n  },\n  MouseEvent: {\n    props: ['layerX', 'layerY', 'offsetX', 'offsetY'] as const,\n  },\n  Range: {\n    methods: ['getClientRects', 'getBoundingClientRect'] as const,\n  },\n};\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nconst forcedMutationAllowedFor = new Set<Node>();\n\nexport function forceMutation(cb: () => any, nodes: Node | Node[]) {\n  if (phase !== 'measure') {\n    throw new Error('The current phase is \\'mutate\\'');\n  }\n\n  if (isStrict) {\n    if (Array.isArray(nodes)) {\n      nodes.forEach((node) => {\n        forcedMutationAllowedFor.add(node);\n      });\n    } else {\n      forcedMutationAllowedFor.add(nodes);\n    }\n  }\n\n  return cb();\n}\n\nexport function suppressStrict(cb: () => any) {\n  if (!isStrict) {\n    return cb();\n  }\n\n  disableStrict();\n  const result = cb();\n  enableStrict();\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (forcedMutationAllowedFor.has(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n\n    forcedMutationAllowedFor.clear();\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","import { IS_CORE_WALLET } from '../../../config';\n\nexport const POPUP_PORT = IS_CORE_WALLET ? 'TonWallet_popup' : 'MyTonWallet_popup';\nexport const CONTENT_SCRIPT_PORT = IS_CORE_WALLET ? 'TonWallet_contentScript' : 'MyTonWallet_contentScript';\nexport const PAGE_CONNECTOR_CHANNEL = IS_CORE_WALLET ? 'TonWallet_pageConnector' : 'MyTonWallet_pageConnector';\n","import type { Connector } from '../../../util/PostMessageConnector';\nimport type { ApiInitArgs, OnApiUpdate } from '../../types';\nimport type { AllMethodArgs, AllMethodResponse, AllMethods } from '../../types/methods';\n\nimport { logDebugApi, logDebugError } from '../../../util/logs';\nimport { createConnector, createExtensionConnector } from '../../../util/PostMessageConnector';\nimport { pause } from '../../../util/schedulers';\nimport { IS_IOS } from '../../../util/windowEnvironment';\nimport { createWindowProvider, createWindowProviderForExtension } from '../../../util/windowProvider';\nimport { POPUP_PORT } from '../extension/config';\n\nconst HEALTH_CHECK_TIMEOUT = 150;\nconst HEALTH_CHECK_MIN_DELAY = 5000; // 5 sec\n\nlet updateCallback: OnApiUpdate;\nlet worker: Worker | undefined;\nlet connector: Connector | undefined;\nlet isInitialized = false;\n\nexport function initApi(onUpdate: OnApiUpdate, initArgs: ApiInitArgs | (() => ApiInitArgs)) {\n  updateCallback = onUpdate;\n\n  if (!connector) {\n    // We use process.env.IS_EXTENSION instead of IS_EXTENSION in order to remove the irrelevant code during bundling\n    if (process.env.IS_EXTENSION) {\n      const getInitArgs = typeof initArgs === 'function' ? initArgs : () => initArgs;\n      connector = createExtensionConnector(POPUP_PORT, onUpdate, getInitArgs as () => ApiInitArgs);\n\n      createWindowProviderForExtension();\n    } else {\n      worker = new Worker(\n        /* webpackChunkName: \"worker\" */ new URL('./provider.ts', import.meta.url),\n      );\n      connector = createConnector(worker, onUpdate);\n\n      createWindowProvider(worker);\n    }\n  }\n\n  if (!isInitialized) {\n    if (!process.env.IS_EXTENSION && IS_IOS) {\n      setupIosHealthCheck();\n    }\n    isInitialized = true;\n  }\n\n  const args = typeof initArgs === 'function' ? initArgs() : initArgs;\n  return connector.init(args);\n}\n\nexport async function callApi<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  if (!connector) {\n    logDebugError('API is not initialized when calling', fnName);\n    return undefined;\n  }\n\n  try {\n    const result = await (connector.request({\n      name: fnName,\n      args,\n    }) as Promise<AllMethodResponse<T>>);\n\n    logDebugApi(`callApi: ${fnName}`, args, result);\n\n    return result;\n  } catch (err) {\n    return undefined;\n  }\n}\n\nexport function callApiWithThrow<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  return (connector!.request({\n    name: fnName,\n    args,\n  }) as AllMethodResponse<T>);\n}\n\nconst startedAt = Date.now();\n\n// Workaround for iOS sometimes stops interacting with worker\nfunction setupIosHealthCheck() {\n  window.addEventListener('focus', () => {\n    void ensureWorkerPing();\n    // Sometimes a single check is not enough\n    setTimeout(() => ensureWorkerPing(), 1000);\n  });\n}\n\nasync function ensureWorkerPing() {\n  let isResolved = false;\n\n  try {\n    await Promise.race([\n      callApiWithThrow('ping'),\n      pause(HEALTH_CHECK_TIMEOUT)\n        .then(() => (isResolved ? undefined : Promise.reject(new Error('HEALTH_CHECK_TIMEOUT')))),\n    ]);\n  } catch (err) {\n    logDebugError('ensureWorkerPing', err);\n\n    if (Date.now() - startedAt >= HEALTH_CHECK_MIN_DELAY) {\n      worker?.terminate();\n      worker = undefined;\n      connector = undefined;\n      updateCallback({ type: 'requestReconnectApi' });\n    }\n  } finally {\n    isResolved = true;\n  }\n}\n","import { WINDOW_PROVIDER_CHANNEL, WINDOW_PROVIDER_PORT } from '../../config';\nimport { createPostMessageInterface, createReverseExtensionInterface } from '../createPostMessageInterface';\nimport * as windowMethods from './methods';\n\nexport function createWindowProvider(worker: Worker) {\n  createPostMessageInterface(windowMethods, WINDOW_PROVIDER_CHANNEL, worker, true);\n}\n\nexport function createWindowProviderForExtension() {\n  createReverseExtensionInterface(WINDOW_PROVIDER_PORT, windowMethods);\n}\n","import type { LangCode } from '../global/types';\n\nimport {\n  IS_CAPACITOR, IS_CORE_WALLET, IS_EXTENSION, IS_FIREFOX_EXTENSION, IS_TELEGRAM_APP, LANG_LIST,\n} from '../config';\nimport { requestForcedReflow } from '../lib/fasterdom/fasterdom';\nimport { DETACHED_TAB_URL } from './ledger/tab';\nimport { getPlatform } from './getPlatform';\n\nconst TELEGRAM_MOBILE_PLATFORM = new Set(['android', 'android_x', 'ios']);\n\nfunction isIPad() {\n  const { userAgent, platform } = window.navigator;\n  return platform === 'iPad'\n    || userAgent.includes('iPad')\n    || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2));\n}\n\nfunction getBrowserLanguage(): LangCode {\n  if (IS_CORE_WALLET) return 'en';\n\n  const { language } = navigator;\n  const lang = language.startsWith('zh')\n    ? (language.endsWith('TW') || language.endsWith('HK') ? 'zh-Hant' : 'zh-Hans')\n    : language.substring(0, 2);\n\n  return (LANG_LIST.some(({ langCode }) => langCode === lang) ? lang : 'en') as LangCode;\n}\n\nexport const IS_PWA = (\n  window.matchMedia('(display-mode: standalone)').matches\n  || (window.navigator as any).standalone\n  || document.referrer.includes('android-app://')\n);\n\nexport const PLATFORM_ENV = getPlatform();\nexport const IS_MAC_OS = PLATFORM_ENV === 'macOS';\nexport const IS_WINDOWS = PLATFORM_ENV === 'Windows';\nexport const IS_LINUX = PLATFORM_ENV === 'Linux';\nexport const IS_IOS = PLATFORM_ENV === 'iOS';\nexport const IS_ANDROID = PLATFORM_ENV === 'Android';\nexport const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nexport const IS_OPERA = navigator.userAgent.includes(' OPR/');\nexport const IS_EDGE = navigator.userAgent.includes(' Edg/');\nexport const IS_FIREFOX = navigator.userAgent.includes('Firefox/');\nexport const IS_TOUCH_ENV = window.matchMedia('(pointer: coarse)').matches;\nexport const IS_CHROME_EXTENSION = Boolean(window.chrome?.system);\nexport const IS_ELECTRON = Boolean(window.electron);\nexport const IS_WEB = !IS_CAPACITOR && !IS_ELECTRON && !IS_EXTENSION && !IS_TELEGRAM_APP;\nexport const DEFAULT_LANG_CODE = 'en';\nexport const USER_AGENT_LANG_CODE = getBrowserLanguage();\nexport const DPR = window.devicePixelRatio || 1;\nexport const IS_LEDGER_SUPPORTED = IS_CAPACITOR\n  || !(IS_CORE_WALLET || IS_IOS || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\nexport const IS_LEDGER_EXTENSION_TAB = global.location.hash.startsWith(DETACHED_TAB_URL);\n// Disable biometric auth on electron for now until this issue is fixed:\n// https://github.com/electron/electron/issues/24573\nexport const IS_BIOMETRIC_AUTH_SUPPORTED = Boolean(\n  !IS_CAPACITOR && !IS_TELEGRAM_APP && window.navigator.credentials && (!IS_ELECTRON || IS_MAC_OS),\n);\nexport const IS_DELEGATED_BOTTOM_SHEET = IS_CAPACITOR && global.location.search.startsWith('?bottom-sheet');\nexport const IS_DELEGATING_BOTTOM_SHEET = IS_CAPACITOR && IS_IOS && !IS_DELEGATED_BOTTOM_SHEET && !isIPad();\nexport const IS_MULTITAB_SUPPORTED = 'BroadcastChannel' in window && !IS_LEDGER_EXTENSION_TAB;\nexport const IS_DAPP_SUPPORTED = IS_EXTENSION || IS_ELECTRON || IS_CAPACITOR;\nexport const IS_IOS_APP = IS_IOS && IS_CAPACITOR;\nexport const IS_ANDROID_APP = IS_ANDROID && IS_CAPACITOR;\n\n// Note: As of 27-11-2023, Firefox does not support readText()\n// Note: As of 22-02-2023, clipboard functionality is only available to the Telegram partners\n// https://github.com/Telegram-Mini-Apps/telegram-apps/issues/609#issuecomment-2571435311\nexport const IS_CLIPBOARDS_SUPPORTED = !(IS_FIREFOX || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\n\nexport const REM = parseInt(getComputedStyle(document.documentElement).fontSize, 10);\nexport const STICKY_CARD_INTERSECTION_THRESHOLD = -3 * REM;\n\nexport function setScrollbarWidthProperty() {\n  const el = document.createElement('div');\n  el.style.cssText = 'overflow-x: hidden; overflow-y: scroll; visibility:hidden; position:absolute;';\n  el.classList.add('custom-scroll');\n  document.body.appendChild(el);\n\n  requestForcedReflow(() => {\n    const width = el.offsetWidth - el.clientWidth;\n\n    return () => {\n      document.documentElement.style.setProperty('--scrollbar-width', `${width}px`);\n      el.remove();\n    };\n  });\n}\n\nexport function getIsMobileTelegramApp() {\n  return IS_TELEGRAM_APP && TELEGRAM_MOBILE_PLATFORM.has(window.Telegram?.WebApp.platform ?? '');\n}\n","import type { AccountIdParsed, ApiNetwork } from '../api/types';\nimport type { Account } from '../global/types';\n\nimport { shortenAddress } from './shortenAddress';\n\nexport function parseAccountId(accountId: string): AccountIdParsed {\n  const parts = accountId.split('-');\n  const [id, network = 'mainnet'] = (parts.length === 3 ? [parts[0], parts[2]] : parts) as [string, ApiNetwork];\n  return { id: Number(id), network };\n}\n\nexport function buildAccountId(account: AccountIdParsed) {\n  const { id, network } = account;\n  return `${id}-${network}`;\n}\n\nexport function getMainAccountAddress(addressByChain: Account['addressByChain']) {\n  return addressByChain.ton ?? Object.values(addressByChain).find(Boolean);\n}\n\nexport function getAccountTitle(account: Account) {\n  return account.title || shortenAddress(getMainAccountAddress(account.addressByChain) ?? '');\n}\n","type CollectionByKey<Member> = Record<number | string, Member>;\ntype GroupedByKey<Member> = Record<number | string, Member[]>;\n\ntype OrderDirection =\n  'asc'\n  | 'desc';\n\ntype OrderCallback<T> = (member: T) => unknown;\n\nexport function buildCollectionByKey<T extends AnyLiteral>(collection: readonly T[], key: keyof T): CollectionByKey<T> {\n  return collection.reduce((byKey: CollectionByKey<T>, member: T) => {\n    byKey[member[key]] = member;\n\n    return byKey;\n  }, {});\n}\n\nexport function groupBy<T extends AnyLiteral>(collection: readonly T[], key: keyof T): GroupedByKey<T> {\n  return collection.reduce((byKey: GroupedByKey<T>, member: T) => {\n    const groupKey = member[key];\n\n    if (!byKey[groupKey]) {\n      byKey[groupKey] = [member];\n    } else {\n      byKey[groupKey].push(member);\n    }\n\n    return byKey;\n  }, {});\n}\n\nexport function mapValues<R, M>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => R,\n): CollectionByKey<R> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<R>, key, index) => {\n    newByKey[key] = callback(byKey[key], key, index, byKey);\n    return newByKey;\n  }, {});\n}\n\nexport function pick<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    result[key] = object[key];\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function pickTruthy<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    if (object[key]) {\n      result[key] = object[key];\n    }\n\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function omit<T extends object, K extends keyof T>(object: T, keys: K[]): Omit<T, K> {\n  const stringKeys = new Set(keys.map(String));\n  const savedKeys = Object.keys(object)\n    .filter((key) => !stringKeys.has(key)) as Array<Exclude<keyof T, K>>;\n\n  return pick(object, savedKeys);\n}\n\nexport function omitUndefined<T extends object>(object: T): T {\n  return Object.keys(object).reduce((result, stringKey) => {\n    const key = stringKey as keyof T;\n    if (object[key] !== undefined) {\n      result[key] = object[key];\n    }\n    return result;\n  }, {} as T);\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    if (aValue === bValue) return 0;\n\n    const condition = isAsc ? aValue > bValue : aValue < bValue;\n    return condition ? 1 : -1;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function compact<T>(array: T[]) {\n  return array.filter(Boolean);\n}\n\nexport function areSortedArraysEqual<T>(array1: readonly T[], array2: readonly T[]) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => item === array2[i]);\n}\n\nexport function split<T>(array: T[], chunkSize: number) {\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n\nexport function cloneDeep<T>(value: T): T {\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(cloneDeep) as typeof value;\n  }\n\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key as keyof T] = cloneDeep(value[key as keyof T]);\n    return acc;\n  }, {} as T);\n}\n\nexport function isLiteralObject(value: any): value is AnyLiteral {\n  return isObject(value) && !Array.isArray(value);\n}\n\nfunction isObject(value: any): value is object {\n  // eslint-disable-next-line no-null/no-null\n  return typeof value === 'object' && value !== null;\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): T | undefined {\n  let cursor = array.length;\n\n  while (cursor--) {\n    if (predicate(array[cursor], cursor, array)) {\n      return array[cursor];\n    }\n  }\n\n  return undefined;\n}\n\nexport function range(start: number, end: number) {\n  const arr: number[] = [];\n  for (let i = start; i < end;) {\n    arr.push(i++);\n  }\n  return arr;\n}\n\nexport function fromKeyValueArrays<T>(keys: string[], values: T[] | T) {\n  return keys.reduce((acc, key, index) => {\n    acc[key] = Array.isArray(values) ? values[index] : values;\n    return acc;\n  }, {} as Record<string, T>);\n}\n\nexport function extractKey<T, K extends keyof T>(array: readonly T[], key: K): T[K][] {\n  return array.map((value) => value[key]);\n}\n\nexport function findDifference<T>(array1: Iterable<T>, array2: Iterable<T>): T[] {\n  const set2 = new Set(array2);\n  const diff: T[] = [];\n\n  for (const element of array1) {\n    if (!set2.has(element)) {\n      diff.push(element);\n    }\n  }\n\n  return diff;\n}\n\nexport function filterValues<M>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => boolean,\n): CollectionByKey<M> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<M>, key, index) => {\n    if (callback(byKey[key], key, index, byKey)) {\n      newByKey[key] = byKey[key];\n    }\n\n    return newByKey;\n  }, {});\n}\n\nexport function uniqueByKey<T>(array: T[], key: keyof T, shouldKeepFirst?: boolean) {\n  if (shouldKeepFirst) {\n    array = Array.from(array);\n    array.reverse();\n  }\n\n  const result = [...new Map(array.map((item) => [item[key], item])).values()];\n\n  if (shouldKeepFirst) {\n    result.reverse();\n  }\n\n  return result;\n}\n\nexport function intersection<T>(x: Set<T>, y: Set<T>): Set<T> {\n  const result = new Set<T>();\n  for (const elem of y) {\n    if (x.has(elem)) {\n      result.add(elem);\n    }\n  }\n  return result;\n}\n\nexport function swapKeysAndValues<\n  K extends string | number,\n  V extends keyof any,\n>(object: Record<K, V>): Record<V, `${K}`> {\n  const result = {} as any;\n  for (const [key, value] of Object.entries(object)) {\n    result[value as any] = key;\n  }\n  return result;\n}\n\n/**\n * `arr1` and `arr2` must be sorted according to `compareFn`, otherwise the result is not guaranteed.\n * `deduplicateEqual` doesn't remove duplicates if the input arrays contain duplicates.\n */\nexport function mergeSortedArrays<T>(\n  arr1: readonly T[],\n  arr2: readonly T[],\n  compareFn: (item1: T, item2: T) => number,\n  deduplicateEqual?: boolean,\n): T[] {\n  let index1 = 0;\n  let index2 = 0;\n  const result: T[] = [];\n\n  while (index1 < arr1.length && index2 < arr2.length) {\n    const compareResult = compareFn(arr1[index1], arr2[index2]);\n\n    if (compareResult === 0) {\n      result.push(arr1[index1]);\n      if (!deduplicateEqual) {\n        result.push(arr2[index2]);\n      }\n      index1++;\n      index2++;\n    } else if (compareResult < 0) {\n      result.push(arr1[index1]);\n      index1++;\n    } else {\n      result.push(arr2[index2]);\n      index2++;\n    }\n  }\n\n  for (; index1 < arr1.length; index1++) {\n    result.push(arr1[index1]);\n  }\n  for (; index2 < arr2.length; index2++) {\n    result.push(arr2[index2]);\n  }\n\n  return result;\n}\n","import withCache from './withCache';\n\nexport const MEANINGFUL_CHAR_LENGTH = 6;\nconst FILLER = '';\nconst FILLER_LENGTH = FILLER.length;\n\nexport const shortenAddress = withCache((address: string, shift = MEANINGFUL_CHAR_LENGTH, fromRight = shift) => {\n  if (!address) return undefined;\n\n  if (address.length <= shift + fromRight + FILLER_LENGTH) return address;\n\n  return `${address.slice(0, shift)}${FILLER}${address.slice(-fromRight)}`;\n});\n","import type { SecureStoragePluginPlugin } from 'capacitor-secure-storage-plugin';\n\nimport type { StorageKey } from '../../../api/storages/types';\n\nimport { IS_CAPACITOR } from '../../../config';\n\nlet SecureStoragePlugin: SecureStoragePluginPlugin | undefined;\nlet resolvePromise: AnyFunction;\n\nconst promise = new Promise((resolve) => {\n  resolvePromise = resolve;\n});\n\nexport async function init() {\n  if (IS_CAPACITOR && !SecureStoragePlugin) {\n    ({ SecureStoragePlugin } = await import(\n      /* webpackChunkName: \"capacitorSecureStorage\" */ 'capacitor-secure-storage-plugin',\n    ));\n    resolvePromise();\n  }\n}\n\nexport async function capacitorStorageGetItem(key: StorageKey) {\n  await promise;\n  return (await SecureStoragePlugin!.get({ key }).catch((err) => {\n    const message = typeof err === 'string' ? err : err.message;\n    if (message.includes('key does not exist')) {\n      return undefined;\n    } else {\n      throw err;\n    }\n  }))?.value;\n}\n\nexport async function capacitorStorageSetItem(key: StorageKey, value: string) {\n  await promise;\n  return SecureStoragePlugin!.set({ key, value });\n}\n\nexport async function capacitorStorageRemoveItem(key: StorageKey) {\n  await promise;\n  return SecureStoragePlugin!.remove({ key });\n}\n\nexport async function capacitorStorageClear() {\n  await promise;\n  return SecureStoragePlugin!.clear();\n}\n\nexport async function capacitorStorageKeys() {\n  await promise;\n  return SecureStoragePlugin!.keys();\n}\n","// String is used instead of Buffer, because Buffer can't be transferred to/from worker.\n// Uint8Array is not used because it can't be transferred to/from extension service worker.\nexport async function exchangeWithLedger(apduBase64: string): Promise<string> {\n  const { getTransport } = await import('../../ledger');\n  const transport = getTransport();\n  if (!transport) {\n    throw new Error('Ledger transport is not initialized');\n  }\n\n  const apduBuffer = Buffer.from(apduBase64, 'base64');\n  const response = await transport.exchange(apduBuffer);\n  return response.toString('base64');\n}\n","import { pick } from '../../iteratees';\n\nexport function localStorageGetItem(key: string) {\n  return localStorage.getItem(key);\n}\n\nexport function localStorageSetItem(key: string, value: string) {\n  return localStorage.setItem(key, value);\n}\n\nexport function localStorageRemoveItem(key: string) {\n  return localStorage.removeItem(key);\n}\n\nexport function localStorageClear() {\n  return localStorage.clear();\n}\n\nexport function localStorageGetAll() {\n  return { ...localStorage };\n}\n\nexport function localStorageGetMany(keys: string[]) {\n  return pick(localStorage, keys);\n}\n\nexport function localStorageSetMany(items: AnyLiteral) {\n  Object.assign(localStorage, items);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"88\":\"624986b76c0ad075690b\",\"104\":\"d3d0658321759c7a1c20\",\"106\":\"4f3d72aecd28d192bbee\",\"148\":\"d4136b6a5ecf56ede3d7\",\"168\":\"f08bfcfdc8c60a24e8ed\",\"196\":\"47374b197e148f7562b8\",\"201\":\"a9df2475054636d04195\",\"215\":\"02897e46fb157ff77165\",\"283\":\"8137301fc53480049325\",\"408\":\"4a5a307a8a814b280078\",\"411\":\"f3fddccbfc7a4f1d09cc\",\"477\":\"b487be8764000f2f30c2\",\"513\":\"ebadc095aa3ee931d37b\",\"524\":\"f055ebad971af5edae12\",\"542\":\"8b97033f3a252281472f\",\"564\":\"652088edade4d9ed67f5\",\"580\":\"82f879326ce5b9c846f1\",\"629\":\"d8e60592f4b3a77ef9da\",\"642\":\"1938687e07080d228ce8\",\"789\":\"ee1e19d801c1e8bfab4d\",\"800\":\"ec0c359c4355f20d60bd\",\"803\":\"e64555837e9884c2e1de\",\"884\":\"b0155df7dd4719a9838e\",\"895\":\"91b32485bcc6a9f2cef6\",\"897\":\"b0aa8daaa0f11c289b24\",\"909\":\"425f7d2af5d72d1cad8d\",\"941\":\"9b59e9f6286e558142d5\",\"949\":\"10c81af08aa931279b35\",\"956\":\"1c3822f193a3d67e6aa6\",\"988\":\"5ebba37989fff908c5a9\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0,\n\t840: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmytonwallet\"] = self[\"webpackChunkmytonwallet\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function logUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral, msg: string, debugKey = '') {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    // eslint-disable-next-line no-console\n    console.log(`${msg} LENGTH`);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log(msg);\n  currentKeys.forEach((prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      // eslint-disable-next-line no-console\n      console.log(debugKey, prop, ':', currentProps[prop], '=>', newProps[prop]);\n    }\n  });\n}\n","import { animate } from './animation';\nimport { fastRaf, throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.append(`${dateFormatted}: ${text}`, document.createElement('br'));\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = '';\n  Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .forEach(([key, { value, lastUpdateAt }]) => {\n      const content = document.createElement('span');\n      content.style.background = lastUpdateAt > halfSecondAgo ? 'lightgreen' : '';\n      content.textContent = `${key}: ${Math.round(value)}`;\n      const parent = document.createElement('div');\n      parent.style.background = `#ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}`;\n      parent.append(content);\n      loggerEl.append(parent);\n    });\n}\n\nexport function debugFps() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  let ticks: number[] = [];\n  let lastFrameAt = performance.now();\n\n  animate(() => {\n    const now = performance.now();\n    ticks.push(now - lastFrameAt);\n    lastFrameAt = now;\n\n    if (ticks.length > 100) {\n      ticks = ticks.slice(-100);\n    }\n\n    const avg = ticks.reduce((acc, t) => acc + t, 0) / ticks.length;\n    loggerEl!.textContent = `${Math.round(1000 / avg)} FPS`;\n    return true;\n  }, fastRaf);\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 12px; color: black;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n\nexport class EventEmitter {\n  private channels = new Map<string, CallbackManager>();\n\n  on(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).addCallback(handler);\n    return this;\n  }\n\n  removeListener(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).removeCallback(handler);\n    return this;\n  }\n\n  emit(name: string, ...args: any) {\n    this.resolveChannel(name).runCallbacks(...args);\n    return this;\n  }\n\n  private resolveChannel(name: string) {\n    let channel = this.channels.get(name);\n    if (!channel) {\n      channel = createCallbackManager();\n      this.channels.set(name, channel);\n    }\n\n    return channel;\n  }\n}\n","import type { CallbackManager } from './callbacks';\n\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = any> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: NoneToVoidFunction) => NoneToVoidFunction;\n  once: (cb: NoneToVoidFunction) => NoneToVoidFunction;\n});\n\nexport type SignalSetter = (newValue: any) => void;\n\nexport function isSignal(obj: any): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function once(effect: NoneToVoidFunction) {\n    const unsub = subscribe(() => {\n      unsub();\n      effect();\n    });\n\n    return unsub;\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n    once,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","import { onIdle, throttleWith } from '../../util/schedulers';\nimport { createSignal } from '../../util/signals';\nimport { requestMeasure } from '../fasterdom/fasterdom';\n\nconst AUTO_END_TIMEOUT = 1000;\n\nlet counter = 0;\nlet counterBlocking = 0;\n\nconst [getIsAnimating, setIsAnimating] = createSignal(false);\nconst [getIsBlockingAnimating, setIsBlockingAnimating] = createSignal(false);\n\nexport const getIsHeavyAnimating = getIsAnimating;\nexport { getIsBlockingAnimating };\n\nexport function beginHeavyAnimation(duration = AUTO_END_TIMEOUT, isBlocking = false) {\n  counter++;\n\n  if (counter === 1) {\n    setIsAnimating(true);\n  }\n\n  if (isBlocking) {\n    counterBlocking++;\n\n    if (counterBlocking === 1) {\n      setIsBlockingAnimating(true);\n    }\n  }\n\n  const timeout = window.setTimeout(onEnd, duration);\n\n  let hasEnded = false;\n\n  function onEnd() {\n    if (hasEnded) return;\n    hasEnded = true;\n\n    clearTimeout(timeout);\n\n    counter--;\n\n    if (counter === 0) {\n      setIsAnimating(false);\n    }\n\n    if (isBlocking) {\n      counterBlocking--;\n\n      if (counterBlocking === 0) {\n        setIsBlockingAnimating(false);\n      }\n    }\n  }\n\n  return onEnd;\n}\n\nexport function onFullyIdle(cb: NoneToVoidFunction) {\n  onIdle(() => {\n    if (getIsAnimating()) {\n      requestMeasure(() => {\n        onFullyIdle(cb);\n      });\n    } else {\n      cb();\n    }\n  });\n}\n\nexport function throttleWithFullyIdle<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onFullyIdle, fn);\n}\n","import type { ReactElement } from 'react';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../../util/debugOverlay';\nimport { orderBy } from '../../util/iteratees';\nimport safeExec from '../../util/safeExec';\nimport { throttleWith } from '../../util/schedulers';\nimport { createSignal, isSignal, type Signal } from '../../util/signals';\nimport { requestMeasure, requestMutation } from '../fasterdom/fasterdom';\nimport { getIsBlockingAnimating } from './heavyAnimation';\n\nexport { getIsHeavyAnimating, beginHeavyAnimation, onFullyIdle } from './heavyAnimation';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\n\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualType {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualType.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualType.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualType.Tag;\n  target?: HTMLElement | SVGElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualType.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualType.Fragment;\n  children: VirtualElementChildren;\n  placeholderTarget?: Comment;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\nexport interface RefObject<T = unknown> {\n  current: T;\n  onChange?: NoneToVoidFunction;\n}\n\nexport type ElementRef<T = HTMLElement> = RefObject<T | undefined>;\n\nexport enum MountState {\n  Mounting,\n  Mounted,\n  Unmounted,\n}\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  mountState: MountState;\n  context?: Record<string, Signal<unknown>>;\n  hooks?: {\n    state?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects?: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly unknown[];\n        schedule?: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: readonly unknown[];\n      }[];\n    };\n    refs?: {\n      cursor: number;\n      byCursor: RefObject[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | undefined\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nexport type Context<T> = {\n  defaultValue?: T;\n  contextId: string;\n  Provider: FC<{ value: T; children: TeactNode }>;\n};\n\nconst Fragment = Symbol('Fragment');\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet contextCounter = 0;\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return (\n    $element.type === VirtualType.Tag\n    || $element.type === VirtualType.Component\n    || $element.type === VirtualType.Fragment\n  );\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualType.Fragment,\n    children: buildChildren(children, true),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  if (children?.length) {\n    props.children = children.length === 1 ? children[0] : children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: -1,\n    $element: undefined as unknown as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props,\n    mountState: MountState.Unmounted,\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children?: VirtualElementChildren,\n): VirtualElementComponent {\n  return {\n    type: VirtualType.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: children ? buildChildren(children, true) : [],\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualType.Tag,\n    tag,\n    props,\n    children: buildChildren(children),\n  };\n}\n\nfunction buildChildren(children: any[], noEmpty = false): VirtualElement[] {\n  const cleanChildren = dropEmptyTail(children, noEmpty);\n  const newChildren = [];\n\n  for (let i = 0, l = cleanChildren.length; i < l; i++) {\n    const child = cleanChildren[i];\n    if (Array.isArray(child)) {\n      newChildren.push(...buildChildren(child, noEmpty));\n    } else {\n      newChildren.push(buildChildElement(child));\n    }\n  }\n\n  return newChildren;\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  return !child && child !== 0;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return { type: VirtualType.Empty };\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return {\n      type: VirtualType.Text,\n      value: String(child),\n    };\n  }\n}\n\nconst DEBUG_components: AnyLiteral = { TOTAL: { name: 'TOTAL', renders: 0 } };\n\nconst DEBUG_memos: Record<string, { key: string; calls: number; misses: number; hitRate: number }> = {};\nconst DEBUG_MEMOS_CALLS_THRESHOLD = 20;\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(\n    Object\n      .values(DEBUG_components)\n      .map(({ avgRenderTime, ...state }) => {\n        return { ...state, ...(avgRenderTime !== undefined && { avgRenderTime: Number(avgRenderTime.toFixed(2)) }) };\n      }),\n    'renders',\n    'desc',\n  ));\n\n  // eslint-disable-next-line no-console\n  console.warn('MEMOS', orderBy(\n    Object\n      .values(DEBUG_memos)\n      .filter(({ calls }) => calls >= DEBUG_MEMOS_CALLS_THRESHOLD)\n      .map((state) => ({ ...state, hitRate: Number(state.hitRate.toFixed(2)) })),\n    'hitRate',\n    'asc',\n  ));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsCaptured = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  if (getIsBlockingAnimating()) {\n    getIsBlockingAnimating.once(runUpdatePassOnRaf);\n    return;\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    runImmediateEffects?.();\n  });\n});\n\nexport function captureImmediateEffects() {\n  if (areImmediateEffectsCaptured) {\n    return undefined;\n  }\n\n  areImmediateEffectsCaptured = true;\n  return runCapturedImmediateEffects;\n}\n\nfunction runCapturedImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n\n  areImmediateEffectsCaptured = false;\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: unknown;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    if (componentInstance.hooks) {\n      if (componentInstance.hooks.state) {\n        componentInstance.hooks.state.cursor = 0;\n      }\n      if (componentInstance.hooks.effects) {\n        componentInstance.hooks.effects.cursor = 0;\n      }\n      if (componentInstance.hooks.memos) {\n        componentInstance.hooks.memos.cursor = 0;\n      }\n      if (componentInstance.hooks.refs) {\n        componentInstance.hooks.refs.cursor = 0;\n      }\n    }\n\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          name: componentName,\n          renders: 0,\n          avgRenderTime: 0,\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n\n      const { renders, avgRenderTime } = DEBUG_components[componentName];\n      DEBUG_components[componentName].avgRenderTime = (avgRenderTime * renders + duration) / (renders + 1);\n      DEBUG_components[componentName].renders++;\n      DEBUG_components.TOTAL.renders++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error while rendering component ${componentInstance.name}`, componentInstance);\n\n      newRenderedValue = componentInstance.renderedValue;\n    },\n  });\n\n  if (componentInstance.mountState === MountState.Mounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n  componentInstance.$element = buildComponentElement(componentInstance, children);\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if ($old.type === VirtualType.Text && $new.type === VirtualType.Text) {\n    return $old.value !== $new.value;\n  } else if ($old.type === VirtualType.Tag && $new.type === VirtualType.Tag) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if ($old.type === VirtualType.Component && $new.type === VirtualType.Component) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  componentInstance.id = ++lastComponentId;\n  componentInstance.mountState = MountState.Mounting;\n  renderComponent(componentInstance);\n  componentInstance.mountState = MountState.Mounted;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  if (componentInstance.hooks?.effects) {\n    for (const effect of componentInstance.hooks.effects.byCursor) {\n      if (effect.cleanup) {\n        safeExec(effect.cleanup);\n      }\n\n      effect.cleanup = undefined;\n      effect.releaseSignals?.();\n    }\n  }\n\n  componentInstance.mountState = MountState.Unmounted;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  const {\n    effects, state, memos, refs,\n  } = componentInstance.hooks || {};\n\n  if (effects) {\n    for (const hook of effects.byCursor) {\n      hook.schedule = undefined;\n      hook.cleanup = undefined;\n      hook.releaseSignals = undefined;\n      hook.dependencies = undefined;\n    }\n  }\n\n  if (state) {\n    for (const hook of state.byCursor) {\n      hook.value = undefined;\n      hook.nextValue = undefined;\n\n      hook.setter = undefined as any;\n    }\n  }\n\n  if (memos) {\n    for (const hook of memos.byCursor) {\n      hook.value = undefined;\n\n      hook.dependencies = undefined as any;\n    }\n  }\n\n  if (refs) {\n    for (const hook of refs.byCursor) {\n      hook.current = undefined;\n      hook.onChange = undefined;\n    }\n  }\n\n  componentInstance.hooks = undefined;\n\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  if (componentInstance.hooks?.state) {\n    for (const hook of componentInstance.hooks.state.byCursor) {\n      hook.value = hook.nextValue;\n    }\n  }\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.state) {\n    renderingInstance.hooks.state = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n  const componentInstance = renderingInstance;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: (newValue: ((current: T) => T) | T) => {\n        if (componentInstance.mountState === MountState.Unmounted) {\n          return;\n        }\n\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].nextValue);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          // eslint-disable-next-line no-console\n          console.log(\n            '[Teact.useState]',\n            DEBUG_resolveComponentName(componentInstance.Component),\n            `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n            byCursor[cursor].nextValue,\n          );\n        }\n      },\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly unknown[],\n  debugKey?: string,\n) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const effectConfig = byCursor[cursor];\n  const componentInstance = renderingInstance;\n\n  function schedule() {\n    scheduleEffect(componentInstance, cursor, effect, isLayout);\n  }\n\n  if (dependencies && effectConfig?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== effectConfig.dependencies![i])) {\n      if (DEBUG && debugKey) {\n        const causedBy = dependencies.reduce<string[]>((res, newValue, i) => {\n          const prevValue = effectConfig.dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${String(prevValue)} => ${String(newValue)}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal, i) => signal.subscribe(() => {\n      if (debugKey) {\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by signal #${i} new value:`, signal());\n      }\n\n      byCursor[cursor].schedule!();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      for (const cleanup of cleanups) {\n        cleanup();\n      }\n    };\n  }\n\n  if (effectConfig) effectConfig.schedule = undefined; // Help GC\n\n  byCursor[cursor] = {\n    ...effectConfig,\n    dependencies,\n    schedule,\n  };\n\n  if (!effectConfig) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nfunction scheduleEffect(\n  componentInstance: ComponentInstance,\n  cursor: number,\n  effect: Effect,\n  isLayout: boolean,\n) {\n  const { byCursor } = componentInstance.hooks!.effects!;\n  const cleanup = byCursor[cursor]?.cleanup;\n  const cleanupsContainer = isLayout ? pendingLayoutCleanups : pendingCleanups;\n  const effectsContainer = isLayout ? pendingLayoutEffects : pendingEffects;\n  const effectId = `${componentInstance.id}_${cursor}`;\n\n  if (cleanup) {\n    const runEffectCleanup = () => safeExec(() => {\n      if (componentInstance.mountState === MountState.Unmounted) {\n        return;\n      }\n\n      let DEBUG_startAt: number | undefined;\n      if (DEBUG) {\n        DEBUG_startAt = performance.now();\n      }\n\n      cleanup();\n\n      if (DEBUG) {\n        const duration = performance.now() - DEBUG_startAt!;\n        const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n        if (duration > DEBUG_EFFECT_THRESHOLD) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n          );\n        }\n      }\n    }, {\n      rescue: () => {\n        // eslint-disable-next-line no-console\n        console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`,\n          componentInstance);\n      },\n      always: () => {\n        byCursor[cursor].cleanup = undefined;\n      },\n    });\n\n    cleanupsContainer.set(effectId, runEffectCleanup);\n  }\n\n  const runEffect = () => safeExec(() => {\n    if (componentInstance.mountState === MountState.Unmounted) {\n      return;\n    }\n\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`, componentInstance);\n    },\n  });\n\n  effectsContainer.set(effectId, runEffect);\n\n  runUpdatePassOnRaf();\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly unknown[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly unknown[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useUnmountCleanup(cleanup: NoneToVoidFunction) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      cleanup,\n    };\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useMemo<T>(\n  resolver: () => T,\n  dependencies: readonly unknown[],\n  debugKey?: string,\n  debugHitRateKey?: string,\n): T {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.memos) {\n    renderingInstance.hooks.memos = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  let DEBUG_state: typeof DEBUG_memos[string] | undefined;\n  if (DEBUG && debugHitRateKey) {\n    const instanceKey = `${debugHitRateKey}#${renderingInstance.id}`;\n\n    DEBUG_state = DEBUG_memos[instanceKey];\n    if (!DEBUG_state) {\n      DEBUG_state = {\n        key: instanceKey, calls: 0, misses: 0, hitRate: 0,\n      };\n      DEBUG_memos[instanceKey] = DEBUG_state;\n    }\n\n    DEBUG_state.calls++;\n    DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n  }\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG) {\n      if (debugKey) {\n        const msg = `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`;\n        if (!byCursor[cursor]) {\n          // eslint-disable-next-line no-console\n          console.log(`${msg} [first render]`);\n        } else {\n          logUnequalProps(byCursor[cursor].dependencies, dependencies, msg, debugKey);\n        }\n      }\n\n      if (DEBUG_state) {\n        DEBUG_state.misses++;\n        DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n\n        if (\n          DEBUG_state.calls % 10 === 0\n          && DEBUG_state.calls >= DEBUG_MEMOS_CALLS_THRESHOLD\n          && DEBUG_state.hitRate < 0.25\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn(\n\n            `[Teact] ${DEBUG_state.key}: Hit rate is ${DEBUG_state.hitRate.toFixed(2)} for ${DEBUG_state.calls} calls`,\n          );\n        }\n      }\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: unknown[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): RefObject<T>;\nexport function useRef<T>(): RefObject<T | undefined>; // TT way (empty is `undefined`)\nexport function useRef<T>(initial: null): RefObject<T | null>; // React way (empty is `null`)\n\nexport function useRef<T>(initial?: T | null) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.refs) {\n    renderingInstance.hooks.refs = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function createContext<T>(defaultValue?: T): Context<T> {\n  const contextId = String(contextCounter++);\n\n  function TeactContextProvider(props: { value: T; children: TeactNode }) {\n    const [getValue, setValue] = useSignal(props.value ?? defaultValue);\n    // Create a new object to avoid mutations in the parent context\n    renderingInstance.context = { ...renderingInstance.context };\n\n    renderingInstance.context[contextId] = getValue;\n    setValue(props.value);\n    return props.children;\n  }\n\n  TeactContextProvider.DEBUG_contentComponentName = contextId;\n\n  const context = {\n    defaultValue,\n    contextId,\n    Provider: TeactContextProvider,\n  };\n\n  return context;\n}\n\nexport function useContextSignal<T>(context: Context<T>) {\n  const [getDefaultValue] = useSignal(context.defaultValue);\n\n  return renderingInstance.context?.[context.contextId] as Signal<T> || getDefaultValue;\n}\n\nexport function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n\nexport function memo<T extends FC_withDebug>(Component: T, debugKey?: string) {\n  function TeactMemoWrapper(props: Props) {\n    return useMemo(\n      () => createElement(Component, props),\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      Object.values(props),\n      debugKey,\n      DEBUG_MORE ? DEBUG_resolveComponentName(renderingInstance.Component) : undefined,\n    );\n  }\n\n  TeactMemoWrapper.DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n  return TeactMemoWrapper as T;\n}\n\nexport function DEBUG_resolveComponentName(Component: FC_withDebug) {\n  const { name, DEBUG_contentComponentName } = Component;\n\n  if (name === 'TeactNContainer') {\n    return `container>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactMemoWrapper') {\n    return `memo>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactContextProvider') {\n    return `context>id${DEBUG_contentComponentName}`;\n  }\n\n  return name + (DEBUG_contentComponentName ? `>${DEBUG_contentComponentName}` : '');\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useForceUpdate = () => {\n  const [, setTrigger] = useState<boolean>(false);\n\n  return useCallback(() => {\n    setTrigger((trigger) => !trigger);\n  }, []);\n};\n\nexport default useForceUpdate;\n","import { useEffect } from '../lib/teact/teact';\n\nfunction useEffectOnce(effect: React.EffectCallback) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useEffect(effect, []);\n}\n\nexport default useEffectOnce;\n","import { useRef } from '../lib/teact/teact';\n\n// Deprecated. Use `usePrevious2` instead\nfunction usePrevious<T>(next: T): T | undefined;\nfunction usePrevious<T>(next: T, shouldSkipUndefined: true): Exclude<T, undefined> | undefined;\nfunction usePrevious<T>(next: T, shouldSkipUndefined?: boolean): Exclude<T, undefined> | undefined;\nfunction usePrevious<T>(next: T, shouldSkipUndefined?: boolean) {\n  const ref = useRef<T>();\n  const { current } = ref;\n  if (!shouldSkipUndefined || next !== undefined) {\n    ref.current = next;\n  }\n\n  return current;\n}\n\nexport default usePrevious;\n","import { useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\nimport usePrevious from './usePrevious';\n\nexport default function useSyncEffect<const T extends readonly any[]>(\n  effect: (args: T | readonly []) => NoneToVoidFunction | void,\n  dependencies: T,\n) {\n  const prevDeps = usePrevious<T>(dependencies);\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  if (!prevDeps || dependencies.some((d, i) => d !== prevDeps[i])) {\n    cleanupRef.current?.();\n    cleanupRef.current = effect(prevDeps || []) ?? undefined;\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupRef.current?.();\n    };\n  });\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport generateUniqueId from '../util/generateUniqueId';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function useUniqueId(prefix = '') {\n  const idRef = useRef<string>();\n\n  useSyncEffect(() => {\n    idRef.current = prefix + generateUniqueId();\n  }, [prefix]);\n\n  return idRef.current!;\n}\n","import type { FC, FC_withDebug, Props } from './teact';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport arePropsShallowEqual, { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { handleError } from '../../util/handleError';\nimport { orderBy } from '../../util/iteratees';\nimport { throttleWithTickEnd } from '../../util/schedulers';\nimport React, { DEBUG_resolveComponentName, getIsHeavyAnimating, useUnmountCleanup } from './teact';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport default React;\n\ninterface Container {\n  mapStateToProps: MapStateToProps<any>;\n  activationFn?: ActivationFn<any>;\n  stuckTo?: any;\n  ownProps: Props;\n  mappedProps?: Props;\n  forceUpdate: VoidFunction;\n  DEBUG_updates: number;\n  DEBUG_componentName: string;\n}\n\ntype GlobalState =\n  AnyLiteral\n  & { DEBUG_randomId?: number };\ntype ActionNames = string;\ntype ActionPayload = any;\n\nexport interface ActionOptions {\n  forceOnHeavyAnimation?: boolean;\n  // Workaround for iOS gesture history navigation\n  forceSyncOnIOs?: boolean;\n  forceOutdated?: boolean;\n}\n\ntype Actions = Record<ActionNames, (payload?: ActionPayload, options?: ActionOptions) => void>;\n\ntype ActionHandler = (\n  global: GlobalState,\n  actions: Actions,\n  payload: any,\n) => GlobalState | void | Promise<void>;\n\ntype MapStateToProps<OwnProps = undefined> = (global: GlobalState, ownProps: OwnProps) => AnyLiteral;\ntype StickToFirstFn = (value: any) => boolean;\ntype ActivationFn<OwnProps = undefined> = (\n  global: GlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn,\n) => boolean;\n// TODO: Add callback to typify\ntype GlobalCallback = (global: any) => void;\n\nlet currentGlobal = {\n  isInited: false,\n} as GlobalState;\n\nlet DEBUG_currentRandomId: number | undefined;\n\nconst DEBUG_invalidateGlobalOnTickEnd = throttleWithTickEnd(() => {\n  DEBUG_currentRandomId = Math.random();\n});\n\nconst actionHandlers: Record<string, ActionHandler[]> = {};\nconst callbacks: GlobalCallback[] = [updateContainers];\nconst actions = {} as Actions;\nconst containers = new Map<string, Container>();\n\nconst runCallbacksThrottled = throttleWithTickEnd(runCallbacks);\n\nlet forceOnHeavyAnimation = true;\n\nfunction runCallbacks() {\n  if (forceOnHeavyAnimation) {\n    forceOnHeavyAnimation = false;\n  } else if (getIsHeavyAnimating()) {\n    getIsHeavyAnimating.once(runCallbacksThrottled);\n    return;\n  }\n\n  callbacks.forEach((cb) => cb(currentGlobal));\n}\n\nexport function setUntypedGlobal(newGlobal?: GlobalState, options?: ActionOptions) {\n  if (typeof newGlobal === 'object' && newGlobal !== currentGlobal) {\n    if (DEBUG) {\n      if (\n        !options?.forceOutdated\n        && newGlobal.DEBUG_randomId && newGlobal.DEBUG_randomId !== DEBUG_currentRandomId\n      ) {\n        throw new Error('[TeactN.setGlobal] Attempt to set an outdated global');\n      }\n\n      DEBUG_currentRandomId = Math.random();\n    }\n\n    currentGlobal = newGlobal;\n\n    if (options?.forceSyncOnIOs) {\n      forceOnHeavyAnimation = true;\n      runCallbacks();\n    } else {\n      if (options?.forceOnHeavyAnimation) {\n        forceOnHeavyAnimation = true;\n      }\n\n      runCallbacksThrottled();\n    }\n  }\n}\n\nexport function getUntypedGlobal() {\n  if (DEBUG) {\n    currentGlobal = {\n      ...currentGlobal,\n      DEBUG_randomId: DEBUG_currentRandomId,\n    };\n    DEBUG_invalidateGlobalOnTickEnd();\n  }\n\n  return currentGlobal;\n}\n\nexport function getUntypedActions() {\n  return actions;\n}\n\nexport function forceOnHeavyAnimationOnce() {\n  forceOnHeavyAnimation = true;\n}\n\nlet actionQueue: NoneToVoidFunction[] = [];\n\nfunction handleAction(name: string, payload?: ActionPayload, options?: ActionOptions) {\n  actionQueue.push(() => {\n    actionHandlers[name]?.forEach((handler) => {\n      const response = handler(DEBUG ? getUntypedGlobal() : currentGlobal, actions, payload);\n      if (!response || typeof response.then === 'function') {\n        return;\n      }\n\n      setUntypedGlobal(response as GlobalState, options);\n    });\n  });\n\n  if (actionQueue.length === 1) {\n    try {\n      while (actionQueue.length) {\n        actionQueue[0]();\n        actionQueue.shift();\n      }\n    } finally {\n      actionQueue = [];\n    }\n  }\n}\n\nfunction updateContainers() {\n  let DEBUG_startAt: number | undefined;\n  if (DEBUG) {\n    DEBUG_startAt = performance.now();\n  }\n\n  for (const container of containers.values()) {\n    const {\n      mapStateToProps, ownProps, mappedProps, forceUpdate,\n    } = container;\n\n    if (!activateContainer(container, currentGlobal, ownProps)) {\n      continue;\n    }\n\n    let newMappedProps;\n\n    try {\n      newMappedProps = mapStateToProps(currentGlobal, ownProps);\n    } catch (err: any) {\n      handleError(err);\n\n      return;\n    }\n\n    if (DEBUG) {\n      if (Object.values(newMappedProps).some(Number.isNaN)) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          // eslint-disable-next-line @stylistic/max-len\n          `[TeactN] Some of \\`${container.DEBUG_componentName}\\` mappers contain NaN values. This may cause redundant updates because of incorrect equality check.`,\n        );\n      }\n    }\n\n    if (Object.keys(newMappedProps).length && !arePropsShallowEqual(mappedProps!, newMappedProps)) {\n      if (DEBUG_MORE) {\n        logUnequalProps(\n          mappedProps!,\n          newMappedProps,\n          `[TeactN] Will update ${container.DEBUG_componentName} caused by:`,\n        );\n      }\n\n      container.mappedProps = newMappedProps;\n      container.DEBUG_updates++;\n\n      forceUpdate();\n    }\n  }\n\n  if (DEBUG) {\n    const updateTime = performance.now() - DEBUG_startAt!;\n    if (updateTime > 7) {\n      // eslint-disable-next-line no-console\n      console.warn(`[TeactN] Slow containers update: ${Math.round(updateTime)} ms`);\n    }\n  }\n}\n\nexport function addUntypedActionHandler(name: ActionNames, handler: ActionHandler) {\n  if (!actionHandlers[name]) {\n    actionHandlers[name] = [];\n\n    actions[name] = (payload?: ActionPayload, options?: ActionOptions) => {\n      handleAction(name, payload, options);\n    };\n  }\n\n  actionHandlers[name].push(handler);\n}\n\nexport function addCallback(cb: GlobalCallback) {\n  callbacks.push(cb);\n}\n\nexport function removeCallback(cb: GlobalCallback) {\n  const index = callbacks.indexOf(cb);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n  }\n}\n\nexport function withUntypedGlobal<OwnProps extends AnyLiteral>(\n  mapStateToProps: MapStateToProps<OwnProps> = () => ({}),\n  activationFn?: ActivationFn<OwnProps>,\n) {\n  return (Component: FC) => {\n    function TeactNContainer(props: OwnProps) {\n      const id = useUniqueId();\n      const forceUpdate = useForceUpdate();\n\n      useUnmountCleanup(() => {\n        containers.delete(id);\n      });\n\n      let container = containers.get(id)!;\n      if (!container) {\n        container = {\n          mapStateToProps,\n          activationFn,\n          ownProps: props,\n          forceUpdate,\n          DEBUG_updates: 0,\n          DEBUG_componentName: Component.name,\n        };\n\n        containers.set(id, container);\n      }\n\n      if (\n        (!container.mappedProps || !arePropsShallowEqual(container.ownProps, props))\n        && activateContainer(container, currentGlobal, props)\n      ) {\n        try {\n          container.mappedProps = mapStateToProps(currentGlobal, props);\n        } catch (err: any) {\n          handleError(err);\n        }\n      }\n\n      container.ownProps = props;\n\n      return <Component {...container.mappedProps} {...props} />;\n    }\n\n    (TeactNContainer as FC_withDebug).DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n    return TeactNContainer;\n  };\n}\n\nfunction activateContainer(container: Container, global: GlobalState, props: Props) {\n  const { activationFn, stuckTo } = container;\n  if (!activationFn) {\n    return true;\n  }\n\n  return activationFn(global, props, (stickTo: any) => {\n    if (stuckTo) {\n      return stuckTo === stickTo;\n    } else if (stickTo !== undefined) {\n      container.stuckTo = stickTo;\n    }\n\n    return true;\n  });\n}\n\nexport function typify<\n  ProjectGlobalState,\n  ActionPayloads,\n>() {\n  type ProjectActionNames = keyof ActionPayloads;\n\n  // When payload is allowed to be `undefined` we consider it optional\n  type ProjectActions = {\n    [ActionName in ProjectActionNames]:\n    (undefined extends ActionPayloads[ActionName] ? (\n      (payload?: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ) : (\n      (payload: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ))\n  };\n\n  type ActionHandlers = {\n    [ActionName in keyof ActionPayloads]: (\n      global: ProjectGlobalState,\n      actions: ProjectActions,\n      payload: ActionPayloads[ActionName],\n    ) => ProjectGlobalState | void | Promise<void>;\n  };\n\n  return {\n    getGlobal: getUntypedGlobal as <T extends ProjectGlobalState>() => T,\n    setGlobal: setUntypedGlobal as (state: ProjectGlobalState, options?: ActionOptions) => void,\n    getActions: getUntypedActions as () => ProjectActions,\n    addActionHandler: addUntypedActionHandler as <ActionName extends ProjectActionNames>(\n      name: ActionName,\n      handler: ActionHandlers[ActionName],\n    ) => void,\n    withGlobal: withUntypedGlobal as <OwnProps extends AnyLiteral>(\n      mapStateToProps: (global: ProjectGlobalState, ownProps: OwnProps) => AnyLiteral,\n      activationFn?: (global: ProjectGlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn) => boolean,\n    ) => (Component: FC) => FC<OwnProps>,\n  };\n}\n\nif (DEBUG) {\n  (window as any).getGlobal = getUntypedGlobal;\n  (window as any).setGlobal = setUntypedGlobal;\n  (window as any).getActions = getUntypedActions;\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'GLOBAL CONTAINERS',\n      orderBy(\n        Array.from(containers.values())\n          .map(({ DEBUG_componentName, DEBUG_updates }) => ({ DEBUG_componentName, DEBUG_updates })),\n        'DEBUG_updates',\n        'desc',\n      ),\n    );\n  });\n}\n","import { typify } from '../lib/teact/teactn';\n\nimport type { ActionPayloads, GlobalState } from './types';\n\nconst typed = typify<GlobalState, ActionPayloads>();\n\nexport const getGlobal = typed.getGlobal;\nexport const setGlobal = typed.setGlobal;\nexport const getActions = typed.getActions;\nexport const addActionHandler = typed.addActionHandler;\nexport const withGlobal = typed.withGlobal;\n","export default function isEmptyObject(obj: object) {\n  return !isKeyCountGreater(obj, 0);\n}\n\nexport function isKeyCountGreater(obj: object, countToOutnumber: number) {\n  if (countToOutnumber < 0) return true;\n  let keyCount = 0;\n\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      keyCount++;\n      if (keyCount > countToOutnumber) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n","import type { AccountType } from '../global/types';\n\nimport { DEBUG_VIEW_ACCOUNTS } from '../config';\n\nexport default function isViewAccount(accountType?: AccountType) {\n  return !DEBUG_VIEW_ACCOUNTS && accountType === 'view';\n}\n","import { areSortedArraysEqual } from './iteratees';\n\nconst cache = new WeakMap<AnyFunction, {\n  lastArgs: any[];\n  lastResult: any;\n  lastTime: number;\n  isDisabledUntil?: number;\n}>();\n\nexport default function memoize<F extends AnyFunction>(fn: F, ttlSeconds?: number) {\n  const wrapper = (...args: Parameters<F>): ReturnType<F> => {\n    const cached = cache.get(fn);\n    const now = Date.now();\n\n    if (cached) {\n      const isCacheDisabled = cached.isDisabledUntil && cached.isDisabledUntil > now;\n      const isStale = ttlSeconds && cached.lastTime + (ttlSeconds * 1000) < now;\n\n      if (!isCacheDisabled && !isStale && areSortedArraysEqual(cached.lastArgs, args)) {\n        return cached.lastResult;\n      }\n    }\n\n    const result = fn(...args);\n    cache.set(fn, {\n      ...cached,\n      lastArgs: args,\n      lastResult: result,\n      lastTime: now,\n    });\n    return result;\n  };\n\n  wrapper.disableCache = (seconds: number) => {\n    const cached = cache.get(fn);\n    if (cached) {\n      cached.isDisabledUntil = Date.now() + (seconds * 1000);\n    }\n  };\n\n  return wrapper;\n}\n","import type { ApiChain, ApiNetwork } from '../../api/types';\nimport type {\n  Account, AccountSettings, AccountState, GlobalState, UserToken,\n} from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport { isKeyCountGreater } from '../../util/isEmptyObject';\nimport isViewAccount from '../../util/isViewAccount';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\n\nexport function selectAccounts(global: GlobalState) {\n  return global.accounts?.byId;\n}\n\nexport const selectNetworkAccountsMemoized = memoize((network: ApiNetwork, accountsById?: Record<string, Account>) => {\n  if (!accountsById) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    Object.entries(accountsById).filter(([accountId]) => parseAccountId(accountId).network === network),\n  );\n});\n\nexport function selectNetworkAccounts(global: GlobalState) {\n  return selectNetworkAccountsMemoized(selectCurrentNetwork(global), global.accounts?.byId);\n}\n\nexport function selectCurrentNetwork(global: GlobalState) {\n  return global.settings.isTestnet ? 'testnet' : 'mainnet';\n}\n\nexport function selectCurrentAccount(global: GlobalState) {\n  return selectAccount(global, global.currentAccountId!);\n}\n\nexport function selectAccount(global: GlobalState, accountId: string) {\n  return selectAccounts(global)?.[accountId];\n}\n\nexport function selectAccountOrAuthAccount(global: GlobalState, accountId: string) {\n  const account = selectAccount(global, accountId);\n  if (account) {\n    return account;\n  }\n\n  for (const account of [global.auth.firstNetworkAccount, global.auth.secondNetworkAccount]) {\n    if (account?.accountId === accountId) {\n      return account;\n    }\n  }\n\n  return undefined;\n}\n\nexport function selectCurrentAccountState(global: GlobalState) {\n  return selectAccountState(global, global.currentAccountId!);\n}\n\nexport function selectAccountState(global: GlobalState, accountId: string): AccountState | undefined {\n  return global.byAccountId[accountId];\n}\n\nexport function selectAccountSettings(global: GlobalState, accountId: string): AccountSettings | undefined {\n  return global.settings.byAccountId[accountId];\n}\n\nexport function selectCurrentAccountSettings(global: GlobalState) {\n  return selectAccountSettings(global, global.currentAccountId!);\n}\n\nfunction isHardwareAccount(account: Account) {\n  return account.type === 'hardware';\n}\n\nexport function selectIsHardwareAccount(global: GlobalState): boolean; // To prevent passing accountId=undefined by accident\nexport function selectIsHardwareAccount(global: GlobalState, accountId: string): boolean;\nexport function selectIsHardwareAccount(global: GlobalState, accountId?: string) {\n  const account = selectAccount(global, accountId ?? global.currentAccountId!);\n  return Boolean(account) && isHardwareAccount(account);\n}\n\nexport function selectAllHardwareAccounts(global: GlobalState, network: ApiNetwork) {\n  const accounts = selectAccounts(global);\n\n  return Object.entries(accounts ?? {}).reduce<Account[]>((accounts, [accountId, account]) => {\n    if (isHardwareAccount(account) && parseAccountId(accountId).network === network) {\n      accounts.push(account);\n    }\n    return accounts;\n  }, []);\n}\n\nexport function selectIsOneAccount(global: GlobalState) {\n  return Object.keys(selectAccounts(global) || {}).length === 1;\n}\n\nexport const selectEnabledTokensCountMemoizedFor = withCache((accountId: string) => memoize((tokens?: UserToken[]) => {\n  return (tokens ?? []).filter(({ isDisabled }) => !isDisabled).length;\n}));\n\nexport function selectLedgerAccountIndexToImport(global: GlobalState, network: ApiNetwork) {\n  const hardwareAccounts = selectAllHardwareAccounts(global, network);\n  const hardwareAccountIndexes = hardwareAccounts?.map((account) => account.ledger!.index)\n    .sort((a, b) => a - b);\n\n  if (hardwareAccountIndexes.length === 0 || hardwareAccountIndexes[0] !== 0) {\n    return -1;\n  }\n\n  if (hardwareAccountIndexes.length === 1) {\n    return 0;\n  }\n\n  for (let i = 1; i < hardwareAccountIndexes.length; i++) {\n    if (hardwareAccountIndexes[i] - hardwareAccountIndexes[i - 1] !== 1) {\n      return i - 1;\n    }\n  }\n\n  return hardwareAccountIndexes.length - 1;\n}\n\nfunction isMnemonicAccount(account: Account) {\n  return account.type === 'mnemonic';\n}\n\nexport function selectIsMnemonicAccount(global: GlobalState) {\n  const account = selectCurrentAccount(global);\n  return Boolean(account) && isMnemonicAccount(account);\n}\n\nconst selectIsPasswordPresentMemoized = memoize((accounts: Record<string, Account> | undefined) => {\n  return Object.values(accounts ?? {}).some(isMnemonicAccount);\n});\n\nexport function selectIsPasswordPresent(global: GlobalState) {\n  return selectIsPasswordPresentMemoized(selectAccounts(global));\n}\n\nexport function selectAccountIdByAddress(\n  global: GlobalState,\n  chain: ApiChain,\n  address: string,\n): string | undefined {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) return undefined;\n\n  const requiredAccount = Object.entries(accounts)\n    .find(([accountId, account]) => (account.addressByChain[chain] === address ? accountId : undefined));\n\n  return requiredAccount?.[0];\n}\n\n// Slow, not to be used in `withGlobal`\nexport function selectVestingPartsReadyToUnfreeze(global: GlobalState, accountId: string) {\n  const vesting = selectAccountState(global, accountId)?.vesting?.info || [];\n\n  return vesting.reduce((acc, currentVesting) => {\n    currentVesting.parts.forEach((part) => {\n      if (part.status === 'ready') {\n        acc.push({\n          id: currentVesting.id,\n          partId: part.id,\n        });\n      }\n    });\n\n    return acc;\n  }, [] as { id: number; partId: number }[]);\n}\n\nexport function selectCurrentAccountNftByAddress(global: GlobalState, nftAddress: string) {\n  return selectAccountNftByAddress(global, global.currentAccountId!, nftAddress);\n}\n\nexport function selectAccountNftByAddress(global: GlobalState, accountId: string, nftAddress: string) {\n  return selectAccountState(global, accountId)?.nfts?.byAddress?.[nftAddress];\n}\n\nexport function selectIsMultichainAccount(global: GlobalState, accountId: string) {\n  const addressByChain = selectAccount(global, accountId)?.addressByChain;\n  return Boolean(addressByChain) && isKeyCountGreater(addressByChain, 1);\n}\n\nexport function selectIsMultisigAccount(global: GlobalState, accountId: string, chain: ApiChain) {\n  const account = selectAccount(global, accountId);\n  return Boolean(account?.isMultisigByChain?.[chain]);\n}\n\nexport function selectHasSession(global: GlobalState) {\n  return Boolean(global.currentAccountId);\n}\n\nexport function selectIsBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind !== 'password';\n}\n\nexport function selectIsNativeBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind === 'native-biometrics';\n}\n\nexport function selectIsAllowSuspiciousActions(global: GlobalState, accountId: string) {\n  const accountSettings = selectAccountSettings(global, accountId);\n\n  return accountSettings?.isAllowSuspiciousActions ?? false;\n}\n\nexport function selectIsCurrentAccountViewMode(global: GlobalState) {\n  const { type } = selectCurrentAccount(global) || {};\n\n  return isViewAccount(type);\n}\n\nexport function selectDoesAccountSupportNft(global: GlobalState) {\n  const account = selectCurrentAccount(global);\n  return Boolean(account?.addressByChain.ton);\n}\n","import type {\n  ApiAccountWithTon,\n  ApiNftTransferPayload,\n  ApiParsedPayload,\n  ApiTokensTransferNonStandardPayload,\n  ApiTokensTransferPayload,\n} from '../../api/types';\n\nimport { DEFAULT_MAX_MESSAGES, LEDGER_MAX_MESSAGES, W5_MAX_MESSAGES } from '../../api/chains/ton/constants';\n\nexport function isNftTransferPayload(payload: ApiParsedPayload | undefined): payload is ApiNftTransferPayload {\n  return payload?.type === 'nft:transfer';\n}\n\nexport function isTokenTransferPayload(\n  payload: ApiParsedPayload | undefined,\n): payload is ApiTokensTransferPayload | ApiTokensTransferNonStandardPayload {\n  return payload?.type === 'tokens:transfer' || payload?.type === 'tokens:transfer-non-standard';\n}\n\n/** How many messages can be sent in a single transaction */\nexport function getMaxMessagesInTransaction(account: ApiAccountWithTon, ignoreLedger?: boolean) {\n  const { type, ton: { version } } = account;\n\n  if (type === 'ledger' && !ignoreLedger) {\n    return LEDGER_MAX_MESSAGES;\n  } else if (version === 'W5') {\n    return W5_MAX_MESSAGES;\n  } else {\n    return DEFAULT_MAX_MESSAGES;\n  }\n}\n","import type { ApiDappTransfer, ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { STON_PTON_SLUG, TONCOIN, UNKNOWN_TOKEN } from '../../config';\nimport memoize from '../../util/memoize';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\nimport { selectCurrentAccountState } from './accounts';\n\nconst selectCurrentDappTransferTotalsMemoized = memoize((\n  transactions: ApiDappTransfer[] | undefined,\n) => {\n  const amountsBySlug: Record<string, bigint> = {};\n  const addSlugAmount = (tokenSlug: string, amount: bigint) => {\n    amountsBySlug[tokenSlug] = (amountsBySlug[tokenSlug] ?? 0n) + amount;\n  };\n\n  let isScam = false;\n  let isDangerous = false;\n  let nftCount = 0;\n\n  for (const transaction of transactions ?? []) {\n    if (transaction.isScam) isScam = true;\n    if (transaction.isDangerous) isDangerous = true;\n\n    addSlugAmount(TONCOIN.slug, transaction.amount + transaction.networkFee);\n\n    if (isTokenTransferPayload(transaction.payload)) {\n      addSlugAmount(transaction.payload.slug, transaction.payload.amount);\n    } else if (isNftTransferPayload(transaction.payload)) {\n      nftCount++;\n    }\n  }\n\n  return {\n    amountsBySlug,\n    isScam,\n    isDangerous,\n    nftCount,\n  };\n});\n\nconst selectDappTransferInsufficientTokensMemoized = memoize((\n  amountsBySlug: Record<string, bigint>,\n  balances: Record<string, bigint> | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice> | undefined,\n): string | undefined => {\n  if (!balances || !tokensBySlug) {\n    return undefined;\n  }\n\n  const insufficientTokens: string[] = [];\n\n  for (const [slug, requiredAmount] of Object.entries(amountsBySlug)) {\n    const token = tokensBySlug[slug] ?? UNKNOWN_TOKEN;\n\n    const balanceSlug = slug === STON_PTON_SLUG ? TONCOIN.slug : slug;\n    const availableBalance = balances[balanceSlug] ?? 0n;\n\n    if (availableBalance < requiredAmount) {\n      const symbol = slug === STON_PTON_SLUG ? TONCOIN.symbol : token.symbol;\n      insufficientTokens.push(symbol);\n    }\n  }\n\n  return insufficientTokens.length > 0 ? insufficientTokens.join(', ') : undefined;\n});\n\nexport function selectCurrentDappTransferTotals(global: GlobalState) {\n  const { transactions } = global.currentDappTransfer;\n  return selectCurrentDappTransferTotalsMemoized(transactions);\n}\n\nexport function selectDappTransferInsufficientTokens(global: GlobalState): string | undefined {\n  const accountState = selectCurrentAccountState(global);\n  const balances = accountState?.balances?.bySlug;\n  const tokensBySlug = global.tokenInfo.bySlug;\n  const { amountsBySlug } = selectCurrentDappTransferTotals(global);\n\n  return selectDappTransferInsufficientTokensMemoized(amountsBySlug, balances, tokensBySlug);\n}\n","import type { RoundingMode } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function round(value: number | string, precision = 0, roundingMode: RoundingMode = Big.roundHalfUp) {\n  const bn = new Big(value);\n\n  return bn.round(precision, roundingMode).toNumber();\n}\n\nexport function floor(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundDown);\n}\n\nexport function ceil(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundUp);\n}\n","import type { ApiBalanceBySlug, ApiChain } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserToken } from '../types';\n\nimport {\n  DEFAULT_ENABLED_TOKEN_COUNT,\n  DEFAULT_ENABLED_TOKEN_SLUGS,\n  MYCOIN,\n  MYCOIN_TESTNET,\n  PRICELESS_TOKEN_HASHES,\n  PRIORITY_TOKEN_SLUGS,\n  TINY_TRANSFER_MAX_COST,\n  TONCOIN,\n} from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { round } from '../../util/round';\nimport withCache from '../../util/withCache';\nimport { selectAccountSettings, selectAccountState, selectCurrentAccountState } from './accounts';\n\nfunction getIsNewAccount(balancesBySlug: ApiBalanceBySlug, tokenInfo: GlobalState['tokenInfo']) {\n  return Object.keys(balancesBySlug).length === DEFAULT_ENABLED_TOKEN_COUNT && (\n    Object.entries(balancesBySlug).every(([slug, balance]) => {\n      const { decimals, priceUsd } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const hasCost = balanceBig.mul(priceUsd ?? 0).lt(TINY_TRANSFER_MAX_COST);\n\n      return hasCost;\n    })\n  );\n}\n\nexport const selectAccountTokensMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  accountSettings: AccountSettings = {},\n  isSortByValueEnabled: boolean = false,\n  areTokensWithNoCostHidden: boolean = false,\n) => {\n  const isNewAccount = getIsNewAccount(balancesBySlug, tokenInfo);\n\n  return Object\n    .entries(balancesBySlug)\n    .filter(([slug]) => (slug in tokenInfo.bySlug && !accountSettings.deletedSlugs?.includes(slug)))\n    .map(([slug, balance]) => {\n      const {\n        symbol, name, image, decimals, cmcSlug, color, chain, tokenAddress, codeHash,\n        type, price = 0, percentChange24h = 0, priceUsd,\n      } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const totalValue = balanceBig.mul(price).round(decimals).toString();\n      const hasCost = balanceBig.mul(priceUsd ?? 0).gte(TINY_TRANSFER_MAX_COST);\n      const isPricelessTokenWithBalance = PRICELESS_TOKEN_HASHES.has(codeHash!) && balance > 0n;\n\n      const isEnabled = (\n        (isNewAccount && DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug))\n        || !areTokensWithNoCostHidden\n        || (areTokensWithNoCostHidden && hasCost)\n        || isPricelessTokenWithBalance\n        || accountSettings.alwaysShownSlugs?.includes(slug)\n      );\n\n      const isDisabled = !isEnabled || accountSettings.alwaysHiddenSlugs?.includes(slug);\n\n      return {\n        chain,\n        symbol,\n        slug,\n        amount: balance,\n        name,\n        image,\n        price,\n        priceUsd,\n        decimals,\n        change24h: round(percentChange24h / 100, 4),\n        isDisabled,\n        cmcSlug,\n        totalValue,\n        color,\n        tokenAddress,\n        codeHash,\n        type,\n      } satisfies UserToken as UserToken;\n    })\n    .sort((tokenA, tokenB) => {\n      if (isSortByValueEnabled || !accountSettings.orderedSlugs) {\n        const priorityA = PRIORITY_TOKEN_SLUGS.indexOf(tokenA.slug);\n        const priorityB = PRIORITY_TOKEN_SLUGS.indexOf(tokenB.slug);\n\n        // If both tokens are prioritized and their balances match\n        if (priorityA !== -1 && priorityB !== -1 && tokenA.totalValue === tokenB.totalValue) {\n          return priorityA - priorityB;\n        }\n\n        // If one token is prioritized and the other is not\n        if (priorityA !== -1 && priorityB === -1) return -1;\n        if (priorityB !== -1 && priorityA === -1) return 1;\n\n        return Number(tokenB.totalValue) - Number(tokenA.totalValue);\n      }\n\n      const indexA = accountSettings.orderedSlugs.indexOf(tokenA.slug);\n      const indexB = accountSettings.orderedSlugs.indexOf(tokenB.slug);\n      return indexA - indexB;\n    });\n}));\n\nexport function selectCurrentAccountTokens(global: GlobalState) {\n  return selectAccountTokens(global, global.currentAccountId!);\n}\n\nexport function selectCurrentAccountTokenBalance(global: GlobalState, slug: string) {\n  return selectCurrentAccountState(global)?.balances?.bySlug[slug] ?? 0n;\n}\n\nexport function selectCurrentToncoinBalance(global: GlobalState) {\n  return selectCurrentAccountTokenBalance(global, TONCOIN.slug);\n}\n\nexport function selectAccountTokens(global: GlobalState, accountId: string) {\n  const balancesBySlug = selectAccountState(global, accountId)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectAccountSettings(global, accountId);\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    global.tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectAccountTokenBySlug(global: GlobalState, slug: string) {\n  const accountTokens = selectCurrentAccountTokens(global);\n  return accountTokens?.find((token) => token.slug === slug);\n}\n\nexport function selectTokenAddress(global: GlobalState, slug: string) {\n  if (slug === TONCOIN.slug) return undefined;\n  return selectToken(global, slug).tokenAddress!;\n}\n\nexport function selectToken(global: GlobalState, slug: string) {\n  return global.tokenInfo.bySlug[slug];\n}\n\nexport function selectMycoin(global: GlobalState) {\n  const { isTestnet } = global.settings;\n  return selectToken(global, isTestnet ? MYCOIN_TESTNET.slug : MYCOIN.slug);\n}\n\nexport function selectTokenByMinterAddress(global: GlobalState, minter: string) {\n  return Object.values(global.tokenInfo.bySlug).find((token) => token.tokenAddress === minter);\n}\n\nexport function selectChainTokenWithMaxBalanceSlow(global: GlobalState, chain: ApiChain): UserToken | undefined {\n  return (selectCurrentAccountTokens(global) ?? [])\n    .filter((token) => token.chain === chain)\n    .reduce((maxToken, currentToken) => {\n      const currentBalance = currentToken.priceUsd * Number(currentToken.amount);\n      const maxBalance = maxToken ? maxToken.priceUsd * Number(maxToken.amount) : 0;\n\n      return currentBalance > maxBalance ? currentToken : maxToken;\n    });\n}\n","import type { ApiTransaction } from '../api/types';\n\nimport { TRANSACTION_ADDRESS_SHIFT } from '../config';\nimport { shortenAddress } from './shortenAddress';\n\nconst cache = new Map<string, {\n  timestamp: number;\n  amount: bigint;\n  address: string;\n}>();\n\nfunction getKey(address: string) {\n  return shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)!;\n}\n\nfunction addToCache(address: string, amount: bigint, timestamp: number) {\n  const key = getKey(address);\n\n  cache.set(key, {\n    address,\n    amount,\n    timestamp,\n  });\n}\n\nfunction getFromCache(address: string) {\n  const key = getKey(address);\n\n  return cache.get(key);\n}\n\nexport function updatePoisoningCache(tx: ApiTransaction) {\n  const { fromAddress: address, amount, timestamp } = tx;\n\n  const cached = getFromCache(address);\n\n  if (!cached || cached.timestamp < timestamp || (cached.timestamp === timestamp && cached.amount > amount)) {\n    addToCache(address, amount, timestamp);\n  }\n}\n\nexport function getIsTransactionWithPoisoning(tx: ApiTransaction) {\n  const { fromAddress: address } = tx;\n\n  const cached = getFromCache(address);\n\n  return cached && cached.address !== address;\n}\n\nexport function clearPoisoningCache() {\n  cache.clear();\n}\n","import type { ApiActivity, ApiTransaction, ApiTransactionActivity, ApiTransactionType } from '../../api/types';\nimport type { LangFn } from '../langProvider';\n\nimport { ALL_STAKING_POOLS, BURN_ADDRESS } from '../../config';\nimport { extractKey, groupBy } from '../iteratees';\nimport { getIsTransactionWithPoisoning } from '../poisoningHash';\n\ntype UnusualTxType = 'backend-swap' | 'local' | 'additional';\n\ntype TranslationTenses = [past: string, present: string, future: string];\n\nconst TRANSACTION_TYPE_TITLES: Partial<Record<ApiTransactionType & keyof any, TranslationTenses>> = {\n  stake: ['Staked', 'Staking', '$stake_action'],\n  unstake: ['Unstaked', 'Unstaking', '$unstake_action'],\n  unstakeRequest: ['Requested Unstake', 'Requesting Unstake', '$request_unstake_action'],\n  callContract: ['Called Contract', 'Calling Contract', '$call_contract_action'],\n  excess: ['Excess', 'Excess', 'Excess'],\n  contractDeploy: ['Deployed Contract', 'Deploying Contract', '$deploy_contract_action'],\n  bounced: ['Bounced', 'Bouncing', '$bounce_action'],\n  mint: ['Minted', 'Minting', '$mint_action'],\n  burn: ['Burned', 'Burning', '$burn_action'],\n  auctionBid: ['NFT Auction Bid', 'Bidding at NFT Auction', 'NFT Auction Bid '],\n  dnsChangeAddress: ['Updated Address', 'Updating Address', '$update_address_action'],\n  dnsChangeSite: ['Updated Site', 'Updating Site', '$update_site_action'],\n  dnsChangeSubdomains: ['Updated Subdomains', 'Updating Subdomains', '$update_subdomains_action'],\n  dnsChangeStorage: ['Updated Storage', 'Updating Storage', '$update_storage_action'],\n  dnsDelete: ['Deleted Domain Record', 'Deleting Domain Record', '$delete_domain_record_action'],\n  dnsRenew: ['Renewed Domain', 'Renewing Domain', '$renew_domain_action'],\n  liquidityDeposit: ['Provided Liquidity', 'Providing Liquidity', '$provide_liquidity_action'],\n  liquidityWithdraw: ['Withdrawn Liquidity', 'Withdrawing Liquidity', '$withdraw_liquidity_action'],\n};\n\nexport const STAKING_TRANSACTION_TYPES = new Set<ApiTransactionType | undefined>([\n  'stake', 'unstake', 'unstakeRequest',\n]);\n\nexport const DNS_TRANSACTION_TYPES = new Set<ApiTransactionType | undefined>([\n  'dnsChangeAddress', 'dnsChangeSite', 'dnsChangeStorage', 'dnsChangeSubdomains', 'dnsDelete', 'dnsRenew',\n]);\n\nexport function parseTxId(txId: string): {\n  hash: string;\n  subId?: string;\n  type?: UnusualTxType;\n} {\n  const [hash, subId, type] = txId.split(':') as [string, string | undefined, UnusualTxType | undefined];\n  return { hash, type, subId };\n}\n\nexport function getIsTxIdLocal(txId: string) {\n  return txId.endsWith(':local');\n}\n\nexport function getIsBackendSwapId(id: string) {\n  return id.endsWith(':backend-swap');\n}\n\nexport function buildBackendSwapId(backendId: string) {\n  return buildTxId(backendId, undefined, 'backend-swap');\n}\n\nexport function buildLocalTxId(hash: string, subId?: number) {\n  return buildTxId(hash, subId, 'local');\n}\n\nexport function buildTxId(hash: string, subId?: number | string, type?: UnusualTxType) {\n  if (!type && subId === undefined) return hash;\n  if (type === undefined) return `${hash}:${subId}`;\n  return `${hash}:${subId ?? ''}:${type}`;\n}\n\nexport function getActivityTokenSlugs(activity: ApiActivity): string[] {\n  switch (activity.kind) {\n    case 'transaction': {\n      if (activity.nft) return []; // We don't want NFT activities to get into any token activity list\n      return [activity.slug];\n    }\n    case 'swap': {\n      return [activity.from, activity.to];\n    }\n  }\n}\n\nexport function getIsActivitySuitableForFetchingTimestamp(activity: ApiActivity | undefined) {\n  return !!activity\n    && !getIsTxIdLocal(activity.id)\n    && !getIsBackendSwapId(activity.id)\n    && !getIsActivityPending(activity);\n}\n\nexport function getTransactionTitle(\n  { type, isIncoming, nft }: ApiTransaction,\n  tense: 'past' | 'present' | 'future',\n  translate: LangFn,\n) {\n  const tenseIndex = tense === 'past' ? 0 : tense === 'present' ? 1 : 2;\n  let titles: TranslationTenses;\n\n  if (type === 'nftTrade') {\n    titles = isIncoming\n      ? ['Sold NFT', 'Selling NFT', '$sell_nft_action']\n      : ['Bought NFT', 'Buying NFT', '$buy_nft_action'];\n  } else if (type && TRANSACTION_TYPE_TITLES[type]) {\n    titles = TRANSACTION_TYPE_TITLES[type];\n  } else {\n    titles = isIncoming\n      ? ['Received', 'Receiving', '$receive_action']\n      : ['Sent', 'Sending', '$send_action'];\n  }\n\n  let title = translate(titles[tenseIndex]);\n\n  if (nft && (!type || type === 'mint' || type === 'burn')) {\n    title += ' NFT';\n  }\n\n  return title;\n}\n\nexport function isScamTransaction(transaction: ApiTransaction) {\n  return Boolean(transaction.metadata?.isScam)\n    || (transaction.isIncoming && getIsTransactionWithPoisoning(transaction));\n}\n\nexport function shouldShowTransactionComment(transaction: ApiTransaction) {\n  return Boolean(transaction.comment || transaction.encryptedComment)\n    && !STAKING_TRANSACTION_TYPES.has(transaction.type)\n    && !isScamTransaction(transaction);\n}\n\nexport function getTransactionAmountDisplayMode({ type, amount, nft }: ApiTransaction) {\n  const isPlainTransfer = type === undefined && !nft;\n  if (!amount && !isPlainTransfer) {\n    return 'hide';\n  }\n  return type === 'stake' || type === 'unstake'\n    ? 'noSign'\n    : 'normal';\n}\n\n/** Returns the UI sections where the address should be shown */\nexport function shouldShowTransactionAddress(transaction: ApiTransactionActivity): ('list' | 'modal')[] {\n  const { type, isIncoming, nft, toAddress, fromAddress, extra } = transaction;\n\n  if (type === 'nftTrade') {\n    return extra?.marketplace ? ['list'] : [];\n  }\n\n  const shouldHide = isOurStakingTransaction(transaction)\n    || type === 'burn'\n    || (!isIncoming && nft && toAddress === nft.address)\n    || (isIncoming && type === 'excess' && fromAddress === BURN_ADDRESS);\n\n  return shouldHide ? [] : ['list', 'modal'];\n}\n\n/** \"Our\" is staking that can be controlled with MyTonWallet app */\nexport function isOurStakingTransaction({ type, isIncoming, toAddress, fromAddress }: ApiTransaction) {\n  return STAKING_TRANSACTION_TYPES.has(type) && ALL_STAKING_POOLS.includes(isIncoming ? fromAddress : toAddress);\n}\n\nexport function shouldShowTransactionAnnualYield(transaction: ApiTransaction) {\n  return transaction.type === 'stake' && isOurStakingTransaction(transaction);\n}\n\nexport function getIsActivityWithHash(activity: ApiTransactionActivity) {\n  return !getIsTxIdLocal(activity.id) || !activity.extra?.withW5Gasless;\n}\n\nexport function getIsActivityPending(activity: ApiActivity) {\n  // \"Pending\" is a blockchain term. The activities originated by our backend are never considered pending in this sense.\n  return (activity.status === 'pending' || activity.status === 'pendingTrusted') && !getIsBackendSwapId(activity.id);\n}\n\n/**\n * Sometimes activity ids change. This function finds the new id withing `nextActivities` for each activity in\n * `prevActivities`. Currently only local and pending activity ids change, so it's enough to provide only such\n * activities in `prevActivities`.\n *\n * The ids should be unique within each input array. The returned map has previous activity ids as keys and next\n * activity ids as values. If the map has no value for a previous id, it means that there is no matching next activity.\n * The values may be not unique.\n */\nexport function getActivityIdReplacements(prevActivities: ApiActivity[], nextActivities: ApiActivity[]) {\n  // Each previous activity must fall into either of the groups, otherwise the resulting map will falsely miss previous ids\n  const prevLocalActivities: ApiActivity[] = [];\n  const prevChainActivities: ApiActivity[] = [];\n\n  for (const activity of prevActivities) {\n    const group = getIsTxIdLocal(activity.id) ? prevLocalActivities : prevChainActivities;\n    group.push(activity);\n  }\n\n  return {\n    ...getLocalActivityIdReplacements(prevLocalActivities, nextActivities),\n    ...getChainActivityIdReplacements(prevChainActivities, nextActivities),\n  };\n}\n\n/** Replaces local activity ids. See `getActivityIdReplacements` for more details. */\nfunction getLocalActivityIdReplacements(prevLocalActivities: ApiActivity[], nextActivities: ApiActivity[]) {\n  const idReplacements: Record<string, string> = {};\n\n  if (!prevLocalActivities.length) {\n    return idReplacements;\n  }\n\n  const nextActivityIds = new Set(extractKey(nextActivities, 'id'));\n  const nextChainActivities = nextActivities.filter((activity) => !getIsTxIdLocal(activity.id));\n\n  for (const localActivity of prevLocalActivities) {\n    const { id: prevId } = localActivity;\n\n    // Try a direct id match\n    if (nextActivityIds.has(prevId)) {\n      idReplacements[prevId] = prevId;\n      continue;\n    }\n\n    // Otherwise, try to find a match by a heuristic\n    const chainActivity = nextChainActivities.find((chainActivity) => {\n      return doesLocalActivityMatch(localActivity, chainActivity);\n    });\n    if (chainActivity) {\n      idReplacements[prevId] = chainActivity.id;\n    }\n\n    // Otherwise, there is no match\n  }\n\n  return idReplacements;\n}\n\n/** Replaces chain (i.e. not local) activity ids. See `getActivityIdReplacements` for more details. */\nfunction getChainActivityIdReplacements(prevActivities: ApiActivity[], nextActivities: ApiActivity[]) {\n  const idReplacements: Record<string, string> = {};\n\n  if (!prevActivities.length) {\n    return idReplacements;\n  }\n\n  const nextActivityIds = new Set(extractKey(nextActivities, 'id'));\n  const nextActivitiesByMessageHash = groupBy(nextActivities, 'externalMsgHashNorm');\n\n  for (const { id: prevId, externalMsgHashNorm } of prevActivities) {\n    // Try a direct id match\n    if (nextActivityIds.has(prevId)) {\n      idReplacements[prevId] = prevId;\n      continue;\n    }\n\n    // Otherwise, match by the message hash\n    if (externalMsgHashNorm) {\n      const nextSubActivities = nextActivitiesByMessageHash[externalMsgHashNorm];\n      if (nextSubActivities?.length) {\n        idReplacements[prevId] = nextSubActivities[0].id;\n\n        // Leaving 1 activity in each group to ensure there is a match for the further prev activities with the same hash\n        if (nextSubActivities.length > 1) {\n          nextSubActivities.shift();\n        }\n      }\n    }\n\n    // Otherwise, there is no match\n  }\n\n  return idReplacements;\n}\n\n/** Decides whether the local activity matches the activity from the blockchain */\nexport function doesLocalActivityMatch(localActivity: ApiActivity, chainActivity: ApiActivity) {\n  if (localActivity.extra?.withW5Gasless) {\n    if (localActivity.kind === 'transaction' && chainActivity.kind === 'transaction') {\n      return !chainActivity.isIncoming && localActivity.normalizedAddress === chainActivity.normalizedAddress\n        && localActivity.amount === chainActivity.amount\n        && localActivity.slug === chainActivity.slug;\n    } else if (localActivity.kind === 'swap' && chainActivity.kind === 'swap') {\n      return localActivity.from === chainActivity.from\n        && localActivity.to === chainActivity.to\n        && localActivity.fromAmount === chainActivity.fromAmount;\n    }\n  }\n\n  if (localActivity.externalMsgHashNorm) {\n    return localActivity.externalMsgHashNorm === chainActivity.externalMsgHashNorm && !chainActivity.shouldHide;\n  }\n\n  return parseTxId(localActivity.id).hash === parseTxId(chainActivity.id).hash;\n}\n","import type { ApiActivity, ApiActivityTimestamps, ApiChain } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { getIsActivitySuitableForFetchingTimestamp, getIsTxIdLocal } from '../../util/activities';\nimport { compact, findLast, mapValues } from '../../util/iteratees';\nimport { selectAccountState } from './accounts';\n\nexport function selectNewestActivityTimestamps(global: GlobalState, accountId: string): ApiActivityTimestamps {\n  return mapValues(\n    selectAccountState(global, accountId)?.activities?.newestActivitiesBySlug || {},\n    ({ timestamp }) => timestamp,\n  );\n}\n\nexport function selectLastActivityTimestamp(\n  global: GlobalState,\n  accountId: string,\n  tokenSlug?: string,\n): number | undefined {\n  const activities = selectAccountState(global, accountId)?.activities;\n  if (!activities) return undefined;\n\n  const { byId, idsMain, idsBySlug } = activities;\n  const ids = (tokenSlug ? idsBySlug?.[tokenSlug] : idsMain) || [];\n  const txId = findLast(ids, (id) => getIsActivitySuitableForFetchingTimestamp(byId[id]));\n  if (!txId) return undefined;\n\n  return byId[txId].timestamp;\n}\n\nexport function selectLocalActivitiesSlow(global: GlobalState, accountId: string) {\n  const { byId = {}, localActivityIds = [] } = global.byAccountId[accountId]?.activities ?? {};\n\n  return compact(localActivityIds.map((id) => byId[id]));\n}\n\n/** Doesn't include local activities */\nexport function selectPendingActivitiesSlow(global: GlobalState, accountId: string, chain: ApiChain) {\n  const { byId = {}, pendingActivityIds = {} } = global.byAccountId[accountId]?.activities ?? {};\n  const ids = pendingActivityIds[chain] ?? [];\n\n  return compact(ids.map((id) => byId[id]));\n}\n\nexport function selectRecentNonLocalActivitiesSlow(global: GlobalState, accountId: string, maxCount: number) {\n  const { byId = {}, idsMain = [] } = global.byAccountId[accountId]?.activities ?? {};\n  const result: ApiActivity[] = [];\n\n  for (const id of idsMain) {\n    if (result.length >= maxCount) {\n      break;\n    }\n    if (getIsTxIdLocal(id)) {\n      continue;\n    }\n    const activity = byId[id];\n    if (activity) {\n      result.push(activity);\n    }\n  }\n\n  return result;\n}\n\nexport function selectIsHistoryEndReached(global: GlobalState, accountId: string, tokenSlug?: string) {\n  const accountState = selectAccountState(global, accountId);\n  const { isMainHistoryEndReached, isHistoryEndReachedBySlug } = accountState?.activities ?? {};\n\n  return tokenSlug\n    ? !!isHistoryEndReachedBySlug?.[tokenSlug]\n    : !!isMainHistoryEndReached;\n}\n\n/** If returns `undefined`, the activities haven't been loaded yet. If returns `[]`, there are no activities. */\nexport function selectActivityHistoryIds(global: GlobalState, accountId: string, tokenSlug?: string) {\n  const { idsMain, idsBySlug } = selectAccountState(global, accountId)?.activities ?? {};\n\n  return tokenSlug\n    ? idsBySlug?.[tokenSlug]\n    : idsMain;\n}\n","import type { SignDataPayload } from '@tonconnect/protocol';\nimport type { TeactNode } from '../lib/teact/teact';\n\nimport type { ApiFetchEstimateDieselResult, ApiTonWalletVersion } from '../api/chains/ton/types';\nimport type { ApiTonConnectProof } from '../api/tonConnect/types';\nimport type {\n  ApiAccountConfig,\n  ApiActivity,\n  ApiAnyDisplayError,\n  ApiBalanceBySlug,\n  ApiBaseCurrency,\n  ApiChain,\n  ApiCountryCode,\n  ApiDapp,\n  ApiDappPermissions,\n  ApiDappTransfer,\n  ApiEmulationResult,\n  ApiHistoryList,\n  ApiImportAddressByChain,\n  ApiLedgerDriver,\n  ApiMtwCardType,\n  ApiNetwork,\n  ApiNft,\n  ApiNotificationsAccountValue,\n  ApiPriceHistoryPeriod,\n  ApiSite,\n  ApiSiteCategory,\n  ApiStakingHistory,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n  ApiSwapEstimateVariant,\n  ApiSwapVersion,\n  ApiTokenType,\n  ApiTokenWithPrice,\n  ApiUpdate,\n  ApiUpdateDappCloseLoading,\n  ApiUpdateDappConnect,\n  ApiUpdateDappLoading,\n  ApiUpdateDappSendTransactions,\n  ApiUpdateDappSignData,\n  ApiUpdateWalletVersions,\n  ApiVestingInfo,\n  ApiWalletWithVersionInfo,\n} from '../api/types';\nimport type { AUTOLOCK_OPTIONS_LIST } from '../config';\nimport type { AuthConfig } from '../util/authApi/types';\nimport type { CapacitorPlatform } from '../util/capacitor/platform';\nimport type { LedgerTransport, LedgerWalletInfo } from '../util/ledger/types';\n\nexport type IAnchorPosition = {\n  x: number;\n  y: number;\n};\n\nexport type AnimationLevel = 0 | 1 | 2;\nexport type Theme = 'light' | 'dark' | 'system';\nexport type AppTheme = 'dark' | 'light';\nexport type AppLayout = 'portrait' | 'landscape';\nexport type DialogAction = 'openBluetoothSettings' | 'signOutAll';\n\nexport type NotificationType = {\n  icon?: string;\n  message: string;\n};\n\nexport type DialogType = {\n  title?: string;\n  message: string | TeactNode;\n  entities?: Record<string, any>;\n  noBackdropClose?: boolean;\n  isInAppLock?: boolean;\n  buttons?: {\n    confirm: { title?: string; action?: DialogAction; isDestructive?: boolean };\n    cancel?: { title?: string };\n  };\n};\n\nexport type LangCode = 'en' | 'es' | 'ru' | 'zh-Hant' | 'zh-Hans' | 'tr' | 'de' | 'th' | 'uk' | 'pl';\n\nexport interface LangItem {\n  langCode: LangCode;\n  name: string;\n  nativeName: string;\n  rtl: boolean;\n}\n\nexport interface LangString {\n  zeroValue?: string;\n  oneValue?: string;\n  twoValue?: string;\n  fewValue?: string;\n  manyValue?: string;\n  otherValue?: string;\n}\n\nexport type LangPack = Record<string, string | LangString>;\n\nexport type StakingStatus = 'active' | 'unstakeRequested';\n\nexport type AuthMethod = 'createAccount' | 'importMnemonic' | 'importHardwareWallet';\n\ninterface AuthAccount {\n  accountId: string;\n  addressByChain: Partial<Record<ApiChain, string>>;\n  network?: ApiNetwork;\n}\n\ntype SignOutLevel = 'account' | 'network' | 'all';\n\nexport enum AppState {\n  Auth,\n  Main,\n  Explore,\n  Settings,\n  Ledger,\n  Inactive,\n}\n\nexport enum AuthState {\n  none,\n  createWallet,\n  checkPassword,\n  createPin,\n  confirmPin,\n  createBiometrics,\n  confirmBiometrics,\n  createNativeBiometrics,\n  createPassword,\n  createBackup,\n  disclaimerAndBackup,\n  importWalletCheckPassword,\n  importWallet,\n  importWalletCreatePin,\n  importWalletConfirmPin,\n  importWalletCreateNativeBiometrics,\n  importWalletCreateBiometrics,\n  importWalletConfirmBiometrics,\n  importWalletCreatePassword,\n  disclaimer,\n  ready,\n  about,\n  safetyRules,\n  mnemonicPage,\n  checkWords,\n  importViewAccount,\n}\n\nexport enum BiometricsState {\n  None,\n  TurnOnPasswordConfirmation,\n  TurnOnRegistration,\n  TurnOnVerification,\n  TurnOnComplete,\n  TurnOffWarning,\n  TurnOffBiometricConfirmation,\n  TurnOffCreatePassword,\n  TurnOffComplete,\n}\n\nexport enum TransferState {\n  None,\n  WarningHardware,\n  Initial,\n  Confirm,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport const enum ScamWarningType {\n  SeedPhrase = 1,\n  DomainLike,\n}\n\nexport enum SignDataState {\n  None,\n  Initial,\n  Password,\n  Complete,\n}\n\nexport enum DomainRenewalState {\n  None,\n  Initial,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport enum DomainLinkingState {\n  None,\n  Initial,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport enum SwapState {\n  None,\n  Initial,\n  Blockchain,\n  Password,\n  WaitTokens,\n  Complete,\n  SelectTokenFrom,\n  SelectTokenTo,\n}\n\nexport enum SwapInputSource {\n  In,\n  Out,\n}\n\nexport enum SwapErrorType {\n  UnexpectedError,\n  InvalidPair,\n  NotEnoughLiquidity,\n\n  ChangellyMinSwap,\n  ChangellyMaxSwap,\n  NotEnoughForFee,\n  TooSmallAmount,\n}\n\nexport enum SwapType {\n  OnChain,\n  CrosschainFromWallet,\n  CrosschainToWallet,\n}\n\nexport enum DappConnectState {\n  Info,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum HardwareConnectState {\n  Connect,\n  Connecting,\n  Failed,\n  ConnectedWithSeveralWallets,\n  ConnectedWithSingleWallet,\n  WaitingForRemoteTab,\n}\n\nexport enum StakingState {\n  None,\n\n  StakeInitial,\n  StakePassword,\n  StakeConnectHardware,\n  StakeConfirmHardware,\n  StakeComplete,\n\n  UnstakeInitial,\n  UnstakePassword,\n  UnstakeConnectHardware,\n  UnstakeConfirmHardware,\n  UnstakeComplete,\n\n  ClaimPassword,\n  ClaimConnectHardware,\n  ClaimConfirmHardware,\n  ClaimComplete,\n}\n\nexport enum VestingUnfreezeState {\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum SettingsState {\n  Initial,\n  PushNotifications,\n  Appearance,\n  Assets,\n  Security,\n  Dapps,\n  Language,\n  About,\n  Disclaimer,\n  NativeBiometricsTurnOn,\n  SelectTokenList,\n  WalletVersion,\n  LedgerConnectHardware,\n  LedgerSelectWallets,\n  HiddenNfts,\n  BackupWallet,\n}\n\nexport enum MintCardState {\n  Initial,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Done,\n}\n\nexport enum ActiveTab {\n  Receive,\n  Transfer,\n  Swap,\n  Stake,\n}\n\nexport enum ContentTab {\n  Assets,\n  Activity,\n  Explore,\n  Nft,\n}\n\nexport enum MediaType {\n  Nft,\n}\n\nexport type UserToken = {\n  amount: bigint;\n  name: string;\n  symbol: string;\n  image?: string;\n  slug: string;\n  price: number;\n  priceUsd: number;\n  decimals: number;\n  change24h: number;\n  chain: ApiChain;\n  tokenAddress?: string;\n  isDisabled?: boolean;\n  canSwap?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  totalValue: string;\n  type?: ApiTokenType;\n  color?: string;\n  codeHash?: string;\n};\n\nexport type UserSwapToken = Omit<UserToken, 'change24h' | 'chain'> & {\n  chain: ApiChain | (string & {});\n  isPopular: boolean;\n};\n\nexport type TokenPeriod = '1D' | '7D' | '1M' | '3M' | '1Y' | 'ALL';\n\nexport type PriceHistoryPeriods = Partial<Record<ApiPriceHistoryPeriod, ApiHistoryList>>;\n\nexport type DieselStatus = 'not-available' | 'not-authorized' | 'pending-previous' | 'available' | 'stars-fee';\n\nexport type AccountType = 'mnemonic' | 'hardware' | 'view';\n\nexport interface Account {\n  title?: string;\n  type: AccountType;\n  addressByChain: Partial<Record<ApiChain, string>>;\n  domainByChain?: Partial<Record<ApiChain, string>>;\n  isMultisigByChain?: Partial<Record<ApiChain, boolean>>;\n  ledger?: {\n    index: number;\n    driver: ApiLedgerDriver;\n  };\n}\n\nexport type AssetPairs = Record<string, {\n  isReverseProhibited?: boolean;\n  isMultichain?: boolean;\n}>;\n\nexport interface AccountState {\n  balances?: {\n    bySlug: ApiBalanceBySlug;\n  };\n  activities?: {\n    byId: Record<string, ApiActivity>;\n    /**\n     * The array values are sorted by the activity type (newest to oldest).\n     * Undefined means that the activities haven't been loaded, [] means that there are no activities.\n     */\n    idsMain?: string[];\n    /** The record values follow the same rules as `idsMain` */\n    idsBySlug?: Record<string, string[]>;\n    newestActivitiesBySlug?: Record<string, ApiActivity>;\n    isMainHistoryEndReached?: boolean;\n    isHistoryEndReachedBySlug?: Record<string, boolean>;\n    localActivityIds?: string[];\n    /** Doesn't include the local activities */\n    pendingActivityIds?: Partial<Record<ApiChain, string[]>>;\n    /**\n     * May be false when the actual activities are actually loaded (when the app has been loaded from the cache).\n     * The initial activities should be considered loaded if `idsMain` is not undefined.\n     */\n    areInitialActivitiesLoaded?: Partial<Record<ApiChain, boolean>>;\n  };\n  nfts?: {\n    byAddress?: Record<string, ApiNft>;\n    orderedAddresses?: string[];\n    currentCollectionAddress?: string;\n    selectedAddresses?: string[];\n    dnsExpiration?: Record<string, number>;\n    linkedAddressByAddress?: Record<string, string>;\n    collectionTabs?: string[];\n    wasTelegramGiftsAutoAdded?: boolean;\n  };\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  isUnhideNftModalOpen?: boolean;\n  selectedNftToUnhide?: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  currentNftForAttributes?: ApiNft;\n  dappLastOpenedDatesByUrl?: Record<string, number>;\n  isBackupRequired?: boolean;\n  currentTokenSlug?: string;\n  currentActivityId?: string;\n  currentTokenPeriod?: TokenPeriod;\n  savedAddresses?: SavedAddress[];\n  activeContentTab?: ContentTab;\n  landscapeActionsActiveTabIndex?: ActiveTab;\n  activitiesUpdateStartedAt?: number;\n  balanceUpdateStartedAt?: number;\n\n  // Staking\n  staking?: {\n    stakingId?: string;\n    stateById?: Record<string, ApiStakingState>;\n    totalProfit?: bigint;\n    shouldUseNominators?: boolean;\n  };\n\n  vesting?: {\n    info: ApiVestingInfo[];\n    isLoading?: boolean;\n    isConfirmRequested?: boolean;\n    error?: string;\n    unfreezeRequestedIds?: { id: number; partId: number }[];\n    unfreezeState?: VestingUnfreezeState;\n  };\n\n  stakingHistory?: ApiStakingHistory;\n  browserHistory?: string[];\n\n  isDieselAuthorizationStarted?: boolean;\n  isLongUnstakeRequested?: boolean;\n  isCardMinting?: boolean;\n  receiveModalChain?: ApiChain;\n  invoiceTokenSlug?: string;\n\n  dapps?: ApiDapp[];\n  currentSiteCategoryId?: number;\n\n  config?: ApiAccountConfig;\n}\n\nexport interface AccountSettings {\n  orderedSlugs?: string[];\n  alwaysShownSlugs?: string[];\n  alwaysHiddenSlugs?: string[];\n  deletedSlugs?: string[];\n  importedSlugs?: string[];\n  // These NFTs should be saved in the settings for immediate use after launching the application,\n  // without synchronizing the wallet history or complex state caching\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  accentColorIndex?: number;\n  isAllowSuspiciousActions?: boolean;\n}\n\nexport interface SavedAddress {\n  name: string;\n  address: string;\n  chain: ApiChain;\n}\n\nexport interface NftTransfer {\n  name?: string;\n  address: string;\n  thumbnail: string;\n  collectionName?: string;\n}\n\nexport type GlobalState = {\n  DEBUG_randomId?: number;\n\n  appState: AppState;\n\n  auth: {\n    state: AuthState;\n    biometricsStep?: 1 | 2;\n    method?: AuthMethod;\n    isLoading?: boolean;\n    mnemonic?: string[];\n    mnemonicCheckIndexes?: number[];\n    hardwareSelectedIndices?: number[];\n    error?: string;\n    password?: string;\n    isImportModalOpen?: boolean;\n    firstNetworkAccount?: AuthAccount;\n    secondNetworkAccount?: AuthAccount;\n    forceAddingTonOnlyAccount?: boolean;\n  };\n\n  biometrics: {\n    state: BiometricsState;\n    error?: string;\n    password?: string;\n  };\n\n  nativeBiometricsError?: string;\n\n  hardware: {\n    hardwareState: HardwareConnectState;\n    hardwareWallets?: LedgerWalletInfo[];\n    isLedgerConnected?: boolean;\n    isTonAppConnected?: boolean;\n    availableTransports?: LedgerTransport[];\n    lastUsedTransport?: LedgerTransport;\n  };\n\n  currentTransfer: {\n    state: TransferState;\n    isLoading?: boolean;\n    // Should be ignored when `nfts` is defined and not empty\n    tokenSlug: string;\n    toAddress?: string;\n    toAddressName?: string;\n    resolvedAddress?: string;\n    error?: string;\n    // Should be ignored when `nfts` is defined and not empty\n    amount?: bigint;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    fee?: bigint;\n    realFee?: bigint;\n    comment?: string;\n    binPayload?: string;\n    /**\n     * This is the legacy dapp transaction sending mechanism. The transaction originates in the `sendTransaction`\n     * function of the `src/api/extensionMethods/legacy.ts` file.\n     */\n    promiseId?: string;\n    txId?: string;\n    rawPayload?: string;\n    stateInit?: string;\n    shouldEncrypt?: boolean;\n    isToNewAddress?: boolean;\n    isScam?: boolean;\n    nfts?: ApiNft[];\n    sentNftsCount?: number;\n    isMemoRequired?: boolean;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    diesel?: ApiFetchEstimateDieselResult;\n    withDiesel?: boolean;\n    isGaslessWithStars?: boolean;\n    // This field is used to display a scam warning in the UI only because `Dialogs` are not displayed in iOS\n    // due to NBS specifics. Undefined means closed.\n    scamWarningType?: ScamWarningType;\n  };\n\n  currentSwap: {\n    isMaxAmount?: boolean;\n    state: SwapState;\n    swapId?: string;\n    slippage: number;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    amountOut?: string;\n    amountOutMin?: string;\n    priceImpact?: number;\n    activityId?: string;\n    error?: string;\n    errorType?: SwapErrorType;\n    shouldResetOnClose?: boolean;\n    isLoading?: boolean;\n    /**\n     * When is `true`, does several things: shows the estimating indicator in the UI, blocks the form submission, and\n     * instructs the UI and the actions to perform an estimation regardless.\n     */\n    isEstimating?: boolean;\n    inputSource?: SwapInputSource;\n    toAddress?: string;\n    payinAddress?: string;\n    payoutAddress?: string;\n    payinExtraId?: string;\n    limits?: {\n      fromMin?: string;\n      fromMax?: string;\n    };\n    dieselStatus?: DieselStatus;\n    estimates?: ApiSwapEstimateVariant[];\n    // This property is necessary to ensure that when the DEX with the best rate changes,\n    // the user's selection remains unchanged\n    isDexLabelChanged?: true;\n    currentDexLabel?: ApiSwapDexLabel;\n    bestRateDexLabel?: ApiSwapDexLabel;\n    // Fees. Undefined values mean that these fields are unknown.\n    networkFee?: string;\n    realNetworkFee?: string;\n    swapFee?: string;\n    swapFeePercent?: number;\n    ourFee?: string;\n    ourFeePercent?: number;\n    dieselFee?: string;\n    shouldShowAllPairs?: boolean;\n  };\n\n  currentSignature?: {\n    promiseId: string;\n    dataHex: string;\n    error?: string;\n    isSigned?: boolean;\n  };\n\n  exploreData?: {\n    categories: ApiSiteCategory[];\n    sites: ApiSite[];\n  };\n\n  currentDappTransfer: {\n    state: TransferState;\n    isSse?: boolean;\n    promiseId?: string;\n    isLoading?: boolean;\n    transactions?: ApiDappTransfer[];\n    /** What else should happen after submitting the transactions (in addition to the transactions) */\n    emulation?: Pick<ApiEmulationResult, 'activities' | 'realFee'>;\n    /** Unix seconds */\n    validUntil?: number;\n    vestingAddress?: string;\n    viewTransactionOnIdx?: number;\n    dapp?: ApiDapp;\n    error?: string;\n  };\n\n  currentDappSignData: {\n    state: SignDataState;\n    isSse?: boolean;\n    promiseId?: string;\n    isLoading?: boolean;\n    dapp?: ApiDapp;\n    payloadToSign?: SignDataPayload;\n    error?: string;\n  };\n\n  currentDomainRenewal: {\n    addresses?: string[];\n    state: DomainRenewalState;\n    isLoading?: boolean;\n    error?: string;\n    // There's only one commission because the transaction has no change\n    realFee?: bigint;\n    txId?: string;\n  };\n\n  currentDomainLinking: {\n    address?: string;\n    state: DomainLinkingState;\n    isLoading?: boolean;\n    error?: string;\n    realFee?: bigint;\n    walletAddress?: string;\n    walletAddressName?: string;\n    resolvedWalletAddress?: string;\n    txId?: string;\n  };\n\n  dappConnectRequest?: {\n    state: DappConnectState;\n    isSse?: boolean;\n    promiseId?: string;\n    accountId?: string;\n    dapp: ApiDapp;\n    permissions?: ApiDappPermissions;\n    proof?: ApiTonConnectProof;\n    error?: string;\n  };\n\n  currentStaking: {\n    state: StakingState;\n    isLoading?: boolean;\n    isUnstaking?: boolean;\n    amount?: bigint;\n    tokenAmount?: bigint;\n    fee?: bigint;\n    error?: string;\n  };\n\n  stakingDefault: ApiStakingState;\n\n  accounts?: {\n    byId: Record<string, Account>;\n    isLoading?: boolean;\n    error?: string;\n  };\n\n  tokenInfo: {\n    bySlug: Record<string, ApiTokenWithPrice>;\n  };\n\n  swapTokenInfo: {\n    bySlug: Record<string, ApiSwapAsset>;\n    /** Whether the API has loaded and provided the tokens */\n    isLoaded?: true;\n  };\n\n  swapVersion: ApiSwapVersion;\n\n  swapPairs?: {\n    bySlug: Record<string, AssetPairs>;\n  };\n\n  tokenPriceHistory: {\n    bySlug: Record<string, PriceHistoryPeriods>;\n  };\n\n  byAccountId: Record<string, AccountState>;\n\n  walletVersions?: {\n    currentVersion: ApiTonWalletVersion;\n    byId: Record<string, ApiWalletWithVersionInfo[]>;\n  };\n\n  settings: {\n    state: SettingsState;\n    theme: Theme;\n    animationLevel: AnimationLevel;\n    langCode: LangCode;\n    byAccountId: Record<string, AccountSettings>;\n    areTinyTransfersHidden?: boolean;\n    canPlaySounds?: boolean;\n    isInvestorViewEnabled?: boolean;\n    isTonProxyEnabled?: boolean;\n    isTonMagicEnabled?: boolean;\n    isDeeplinkHookEnabled?: boolean;\n    isPasswordNumeric?: boolean; // Backwards compatibility for non-numeric passwords from older versions\n    isTestnet?: boolean;\n    isSecurityWarningHidden?: boolean;\n    areTokensWithNoCostHidden: boolean;\n    isSortByValueEnabled?: boolean;\n    importToken?: {\n      isLoading?: boolean;\n      token?: UserToken | UserSwapToken;\n    };\n    authConfig?: AuthConfig;\n    baseCurrency?: ApiBaseCurrency;\n    isAppLockEnabled?: boolean;\n    autolockValue?: AutolockValueType;\n    isAutoConfirmEnabled?: boolean;\n    isSensitiveDataHidden?: true;\n  };\n\n  dialogs: DialogType[];\n  notifications: NotificationType[];\n  currentAccountId?: string;\n  isAddAccountModalOpen?: boolean;\n  isBackupWalletModalOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  areSettingsOpen?: boolean;\n  isExploreOpen?: boolean;\n  isAppUpdateAvailable?: boolean;\n  // Force show the \"Update MyTonWallet\" pop-up on all platforms\n  isAppUpdateRequired?: boolean;\n  confettiRequestedAt?: number;\n  isPinAccepted?: boolean;\n  chainForOnRampWidgetModal?: ApiChain;\n  isInvoiceModalOpen?: boolean;\n  isReceiveModalOpen?: boolean;\n  isVestingModalOpen?: boolean;\n  shouldForceAccountEdit?: boolean;\n  isIncorrectTimeNotificationReceived?: boolean;\n  currentBrowserOptions?: {\n    url: string;\n    title?: string;\n    subtitle?: string;\n    keepNBSOpen?: boolean;\n  };\n\n  currentMintCard?: {\n    type?: ApiMtwCardType;\n    state?: MintCardState;\n    error?: string;\n    isLoading?: boolean;\n  };\n\n  currentQrScan?: {\n    currentTransfer?: GlobalState['currentTransfer'];\n    currentSwap?: GlobalState['currentSwap'];\n    currentDomainLinking?: GlobalState['currentDomainLinking'];\n  };\n\n  latestAppVersion?: string;\n  stateVersion: number;\n  restrictions: {\n    isLimitedRegion: boolean;\n    isSwapDisabled: boolean;\n    isOnRampDisabled: boolean;\n    isNftBuyingDisabled: boolean;\n    isCopyStorageEnabled?: boolean;\n    supportAccountsCount?: number;\n    countryCode?: ApiCountryCode;\n  };\n\n  mediaViewer: {\n    mediaId?: string;\n    mediaType?: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n\n  isLoadingOverlayOpen?: boolean;\n\n  pushNotifications: {\n    isAvailable?: boolean;\n    userToken?: string;\n    platform?: CapacitorPlatform;\n    enabledAccounts: Record<string, Partial<ApiNotificationsAccountValue>>;\n  };\n\n  isAppLockActive?: boolean;\n  isManualLockActive?: boolean;\n  appLockHideBiometrics?: boolean;\n  // The app is open in fullscreen mode in Telegram MiniApp on mobile\n  isFullscreen?: boolean;\n};\n\nexport interface ActionPayloads {\n  // Initial\n  init: undefined;\n  initApi: undefined;\n  afterInit: undefined;\n  apiUpdate: ApiUpdate;\n  resetAuth: undefined;\n  startCreatingWallet: undefined;\n  afterCheckMnemonic: undefined;\n  skipCheckMnemonic: undefined;\n  restartCheckMnemonicIndexes: { worldsCount: number };\n  cancelDisclaimer: undefined;\n  afterCreatePassword: { password: string; isPasswordNumeric?: boolean };\n  startCreatingBiometrics: undefined;\n  afterCreateBiometrics: undefined;\n  skipCreateBiometrics: undefined;\n  cancelCreateBiometrics: undefined;\n  afterCreateNativeBiometrics: undefined;\n  skipCreateNativeBiometrics: undefined;\n  createPin: { pin: string; isImporting: boolean };\n  confirmPin: { isImporting: boolean };\n  cancelConfirmPin: { isImporting: boolean };\n  startImportingWallet: undefined;\n  afterImportMnemonic: { mnemonic: string[] };\n  startImportingHardwareWallet: { driver: ApiLedgerDriver };\n  confirmDisclaimer: undefined;\n  afterConfirmDisclaimer: undefined;\n  cleanAuthError: undefined;\n  openAbout: undefined;\n  closeAbout: undefined;\n  startImportViewAccount: undefined;\n  closeImportViewAccount: undefined;\n  openAuthImportWalletModal: undefined;\n  closeAuthImportWalletModal: undefined;\n  openAuthBackupWalletModal: undefined;\n  openMnemonicPage: undefined;\n  openCreateBackUpPage: undefined;\n  openCheckWordsPage: undefined;\n  closeCheckWordsPage: { isBackupCreated?: boolean } | undefined;\n  initializeHardwareWalletModal: undefined;\n  initializeHardwareWalletConnection: { transport: LedgerTransport };\n  createHardwareAccounts: undefined;\n  addHardwareAccounts: {\n    wallets: ({ accountId: string; address: string; walletInfo: LedgerWalletInfo } | undefined)[];\n  };\n  loadMoreHardwareWallets: { lastIndex: number };\n  createAccount: { password: string; isImporting: boolean; isPasswordNumeric?: boolean; version?: ApiTonWalletVersion };\n  afterSelectHardwareWallets: { hardwareSelectedIndices: number[] };\n  resetApiSettings: { areAllDisabled?: boolean } | undefined;\n  checkAppVersion: undefined;\n  importAccountByVersion: { version: ApiTonWalletVersion };\n  importViewAccount: { addressByChain: ApiImportAddressByChain };\n\n  selectToken: { slug?: string } | undefined;\n  openBackupWalletModal: undefined;\n  closeBackupWalletModal: undefined;\n  setIsBackupRequired: { isMnemonicChecked: boolean };\n  openHardwareWalletModal: undefined;\n  closeHardwareWalletModal: undefined;\n  resetHardwareWalletConnect: undefined;\n  setTransferScreen: { state: TransferState };\n  setTransferAmount: { amount?: bigint };\n  setTransferToAddress: { toAddress?: string };\n  setTransferComment: { comment?: string };\n  setTransferShouldEncrypt: { shouldEncrypt?: boolean };\n  startTransfer: {\n    isPortrait?: boolean;\n    tokenSlug?: string;\n    amount?: bigint;\n    toAddress?: string;\n    comment?: string;\n    nfts?: ApiNft[];\n    binPayload?: string;\n    stateInit?: string;\n  } | undefined;\n  changeTransferToken: { tokenSlug: string; withResetAmount?: boolean };\n  fetchTransferFee: {\n    tokenSlug: string;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    binPayload?: string;\n    stateInit?: string;\n  };\n  fetchNftFee: {\n    toAddress: string;\n    nfts: ApiNft[];\n    comment?: string;\n  };\n  submitTransferInitial: {\n    tokenSlug: string;\n    amount: bigint;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    nfts?: ApiNft[];\n    withDiesel?: boolean;\n    isBase64Data?: boolean;\n    binPayload?: string;\n    isGaslessWithStars?: boolean;\n    stateInit?: string;\n  };\n  submitTransferConfirm: undefined;\n  submitTransfer: { password?: string } | undefined;\n  clearTransferError: undefined;\n  cancelTransfer: { shouldReset?: boolean } | undefined;\n  showTransferScamWarning: { type: ScamWarningType };\n  dismissTransferScamWarning: undefined;\n  showDialog: DialogType;\n  dismissDialog: undefined;\n  showError: { error?: ApiAnyDisplayError | string };\n  showNotification: { message: string; icon?: string };\n  dismissNotification: undefined;\n  initLedgerPage: undefined;\n  afterSignIn: undefined;\n  signOut: { level: SignOutLevel };\n  cancelCaching: undefined;\n  afterSignOut: { shouldReset?: boolean } | undefined;\n  addAccount: { method: AuthMethod; password: string; isAuthFlow?: boolean };\n  addAccount2: { method: AuthMethod; password: string };\n  switchAccount: { accountId: string; newNetwork?: ApiNetwork };\n  renameAccount: { accountId: string; title: string };\n  clearAccountError: undefined;\n  clearAccountLoading: undefined;\n  setIsAccountLoading: { isLoading: true | undefined };\n  verifyHardwareAddress: undefined;\n  authorizeDiesel: undefined;\n  fetchTransferDieselState: { tokenSlug: string };\n  setIsAuthLoading: { isLoading: true | undefined };\n\n  fetchPastActivities: { slug?: string; shouldLoadWithBudget?: boolean };\n  showActivityInfo: { id: string };\n  showAnyAccountTx: { txId: string; accountId: string; network: ApiNetwork };\n  showAnyAccountTokenActivity: { slug: string; accountId: string; network: ApiNetwork };\n  showTokenActivity: { slug: string };\n  closeActivityInfo: { id: string };\n  fetchActivityDetails: { id: string };\n  fetchNftsFromCollection: { collectionAddress: string };\n  openNftCollection: { address: string };\n  closeNftCollection: undefined;\n  selectNfts: { addresses: string[] };\n  selectAllNfts: { collectionAddress?: string };\n  clearNftSelection: { address: string };\n  clearNftsSelection: undefined;\n  addCollectionTab: { collectionAddress: string; isAuto?: boolean };\n  removeCollectionTab: { collectionAddress: string };\n  burnNfts: { nfts: ApiNft[] };\n  addNftsToBlacklist: { addresses: ApiNft['address'][] };\n  addNftsToWhitelist: { addresses: ApiNft['address'][] };\n  removeNftSpecialStatus: { address: ApiNft['address'] };\n  openUnhideNftModal: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  closeUnhideNftModal: undefined;\n  openHideNftModal: {\n    addresses: ApiNft['address'][];\n    isCollection: boolean;\n  };\n  closeHideNftModal: undefined;\n  openNftAttributesModal: { nft: ApiNft };\n  closeNftAttributesModal: undefined;\n\n  openExplore: undefined;\n  closeExplore: undefined;\n\n  closeAnyModal: undefined;\n  submitSignature: { password: string };\n  clearSignatureError: undefined;\n  cancelSignature: undefined;\n\n  addSavedAddress: { address: string; name: string; chain: ApiChain };\n  removeFromSavedAddress: { address: string; chain: ApiChain };\n  checkTransferAddress: { address?: string };\n\n  setCurrentTokenPeriod: { period: TokenPeriod };\n  openAddAccountModal: { forceAddingTonOnlyAccount: boolean } | undefined;\n  closeAddAccountModal: undefined;\n\n  setLandscapeActionsActiveTabIndex: { index: ActiveTab };\n  setActiveContentTab: { tab: ContentTab };\n\n  // BottomBar actions\n  switchToWallet: undefined;\n  switchToExplore: undefined;\n  switchToSettings: undefined;\n\n  requestConfetti: undefined;\n  setIsPinAccepted: undefined;\n  clearIsPinAccepted: undefined;\n\n  requestOpenQrScanner: undefined;\n  closeQrScanner: undefined;\n  handleQrCode: { data: string };\n\n  // Staking\n  startStaking: { tokenSlug: string } | undefined;\n  startUnstaking: { stakingId: string } | undefined;\n  setStakingScreen: { state: StakingState };\n  submitStakingInitial: { amount?: bigint; isUnstaking?: boolean } | undefined;\n  submitStaking: { password?: string; isUnstaking?: boolean } | undefined;\n  clearStakingError: undefined;\n  cancelStaking: undefined;\n  fetchStakingHistory: undefined;\n  fetchStakingFee: { amount: bigint };\n  openStakingInfo: undefined;\n  openAnyAccountStakingInfo: { accountId: string; network: ApiNetwork; stakingId: string };\n  closeStakingInfo: undefined;\n  changeCurrentStaking: { stakingId: string; shouldReopenModal?: boolean };\n  startStakingClaim: { stakingId: string } | undefined;\n  submitStakingClaim: { password?: string } | undefined;\n  cancelStakingClaim: undefined;\n  openStakingInfoOrStart: undefined;\n\n  // Settings\n  openSettings: undefined;\n  openSettingsWithState: { state: SettingsState };\n  setSettingsState: { state?: SettingsState };\n  closeSettings: undefined;\n  setTheme: { theme: Theme };\n  setAnimationLevel: { level: AnimationLevel };\n  toggleTinyTransfersHidden: { isEnabled?: boolean } | undefined;\n  toggleInvestorView: { isEnabled?: boolean } | undefined;\n  toggleCanPlaySounds: { isEnabled?: boolean } | undefined;\n  toggleTonProxy: { isEnabled: boolean };\n  toggleTonMagic: { isEnabled: boolean };\n  toggleDeeplinkHook: { isEnabled: boolean };\n  startChangingNetwork: { network: ApiNetwork };\n  changeNetwork: { network: ApiNetwork };\n  changeLanguage: { langCode: LangCode };\n  closeSecurityWarning: undefined;\n  toggleTokensWithNoCost: { isEnabled: boolean };\n  toggleSortByValue: { isEnabled: boolean };\n  updateOrderedSlugs: { orderedSlugs: string[] };\n  rebuildOrderedSlugs: undefined;\n  toggleTokenVisibility: { slug: string; shouldShow: boolean };\n  addToken: { token: UserToken };\n  deleteToken: { slug: string };\n  importToken: { address: string; isSwap?: boolean };\n  resetImportToken: undefined;\n  closeBiometricSettings: undefined;\n  openBiometricsTurnOn: undefined;\n  openBiometricsTurnOffWarning: undefined;\n  openBiometricsTurnOff: undefined;\n  enableBiometrics: { password: string };\n  disableBiometrics: { password: string; isPasswordNumeric?: boolean };\n  enableNativeBiometrics: { password: string };\n  disableNativeBiometrics: undefined;\n  changeBaseCurrency: { currency: ApiBaseCurrency };\n  clearNativeBiometricsError: undefined;\n  copyStorageData: undefined;\n  setAppLockValue: { value?: AutolockValueType; isEnabled: boolean };\n  setIsManualLockActive: { isActive?: boolean; shouldHideBiometrics?: boolean };\n  setIsAutoConfirmEnabled: { isEnabled: boolean };\n  setIsAllowSuspiciousActions: { isEnabled: boolean };\n  setInMemoryPassword: { password?: string; isFinalCall?: boolean; force?: boolean };\n  openSettingsHardwareWallet: undefined;\n  apiUpdateWalletVersions: ApiUpdateWalletVersions;\n\n  // Account Settings\n  setCardBackgroundNft: { nft: ApiNft };\n  clearCardBackgroundNft: undefined;\n  checkCardNftOwnership: undefined;\n  installAccentColorFromNft: { nft: ApiNft };\n  clearAccentColorFromNft: undefined;\n\n  // TON Connect common\n  apiUpdateDappLoading: ApiUpdateDappLoading;\n  apiUpdateDappCloseLoading: ApiUpdateDappCloseLoading;\n\n  // TON Connect connection\n  submitDappConnectRequestConfirm: { accountId: string; password?: string };\n  clearDappConnectRequestError: undefined;\n  cancelDappConnectRequestConfirm: undefined;\n  clearDappConnectRequestConfirm: undefined;\n  setDappConnectRequestState: { state: DappConnectState };\n  apiUpdateDappConnect: ApiUpdateDappConnect;\n\n  // TON Connect transfer\n  setDappTransferScreen: { state: TransferState };\n  showDappTransferTransaction: { transactionIdx: number };\n  submitDappTransferConfirm: undefined;\n  submitDappTransfer: { password?: string } | undefined;\n  clearDappTransferError: undefined;\n  cancelDappTransfer: undefined;\n  closeDappTransfer: undefined;\n  clearDappTransfer: undefined;\n  apiUpdateDappSendTransaction: ApiUpdateDappSendTransactions;\n\n  // TON Connect SignData\n  setDappSignDataScreen: { state: SignDataState };\n  submitDappSignDataConfirm: undefined;\n  submitDappSignData: { password?: string } | undefined;\n  clearDappSignDataError: undefined;\n  cancelDappSignData: undefined;\n  closeDappSignData: undefined;\n  clearDappSignData: undefined;\n  apiUpdateDappSignData: ApiUpdateDappSignData;\n\n  getDapps: undefined;\n  deleteAllDapps: undefined;\n  deleteDapp: { url: string; uniqueId: string };\n  loadExploreSites: { isLandscape: boolean };\n  updateDappLastOpenedAt: { url: string };\n\n  addSiteToBrowserHistory: { url: string };\n  removeSiteFromBrowserHistory: { url: string };\n  openBrowser: { url: string; title?: string; subtitle?: string; keepNBSOpen?: boolean };\n  closeBrowser: undefined;\n  openSiteCategory: { id: number };\n  closeSiteCategory: undefined;\n  switchAccountAndOpenUrl: {\n    accountId?: string;\n    network?: ApiNetwork;\n    url: string;\n    isExternal?: boolean;\n    title?: string;\n    subtitle?: string;\n  };\n\n  // Swap\n  submitSwap: { password: string };\n  startSwap: {\n    state?: SwapState;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    toAddress?: string;\n  } | undefined;\n  cancelSwap: { shouldReset?: boolean } | undefined;\n  setDefaultSwapParams: { tokenInSlug?: string; tokenOutSlug?: string; withResetAmount?: boolean } | undefined;\n  switchSwapTokens: undefined;\n  setSwapTokenIn: { tokenSlug: string };\n  setSwapTokenOut: { tokenSlug: string };\n  setSwapAmountIn: { amount?: string; isMaxAmount?: boolean };\n  setSwapAmountOut: { amount?: string };\n  setSlippage: { slippage: number };\n  estimateSwap: undefined;\n  setSwapScreen: { state: SwapState };\n  clearSwapError: undefined;\n  submitSwapCex: { password: string };\n  setSwapCexAddress: { toAddress: string };\n  addSwapToken: { token: UserSwapToken };\n  toggleSwapSettingsModal: { isOpen: boolean };\n  updatePendingSwaps: undefined;\n  setSwapDex: { dexLabel: ApiSwapDexLabel };\n\n  openOnRampWidgetModal: { chain: ApiChain };\n  closeOnRampWidgetModal: undefined;\n\n  // MediaViewer\n  openMediaViewer: {\n    mediaId: string;\n    mediaType: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n  closeMediaViewer: undefined;\n\n  openReceiveModal: { chain: ApiChain } | undefined;\n  closeReceiveModal: undefined;\n  setReceiveActiveTab: { chain: ApiChain };\n  openInvoiceModal: { tokenSlug: string } | undefined;\n  changeInvoiceToken: { tokenSlug: string };\n  closeInvoiceModal: undefined;\n\n  loadPriceHistory: { slug: string; period: ApiPriceHistoryPeriod; currency?: ApiBaseCurrency };\n\n  showIncorrectTimeError: undefined;\n\n  openLoadingOverlay: undefined;\n  closeLoadingOverlay: undefined;\n\n  loadMycoin: undefined;\n  openVestingModal: undefined;\n  closeVestingModal: undefined;\n  startClaimingVesting: undefined;\n  submitClaimingVesting: { password?: string } | undefined;\n  clearVestingError: undefined;\n  cancelClaimingVesting: undefined;\n\n  openMintCardModal: undefined;\n  closeMintCardModal: undefined;\n  startCardMinting: { type: ApiMtwCardType };\n  submitMintCard: { password?: string } | undefined;\n  clearMintCardError: undefined;\n\n  submitAppLockActivityEvent: undefined;\n\n  toggleNotifications: { isEnabled: boolean };\n  renameNotificationAccount: { accountId: string };\n  toggleNotificationAccount: { accountId: string };\n  createNotificationAccount: { accountId: string; withAbort?: boolean };\n  tryAddNotificationAccount: { accountId: string };\n  deleteNotificationAccount: { accountId: string; withAbort?: boolean };\n  deleteAllNotificationAccounts: undefined | { accountIds: string[] };\n  registerNotifications: { userToken: string; platform: CapacitorPlatform };\n\n  openFullscreen: undefined;\n  closeFullscreen: undefined;\n  setAppLayout: { layout: AppLayout };\n\n  setIsSensitiveDataHidden: { isHidden: boolean };\n\n  openDomainRenewalModal: { accountId?: string; network?: ApiNetwork; addresses: string[] };\n  startDomainsRenewal: undefined;\n  checkDomainsRenewalDraft: { nfts: ApiNft[] };\n  submitDomainsRenewal: { password?: string } | undefined;\n  clearDomainsRenewalError: undefined;\n  cancelDomainsRenewal: undefined;\n\n  openDomainLinkingModal: { address: string };\n  startDomainLinking: undefined;\n  checkDomainLinkingDraft: { nft: ApiNft };\n  submitDomainLinking: { password?: string } | undefined;\n  clearDomainLinkingError: undefined;\n  cancelDomainLinking: undefined;\n\n  checkLinkingAddress: { address?: string };\n  setDomainLinkingWalletAddress: { address?: string };\n  setIsAppLockActive: { isActive: boolean };\n}\n\nexport enum LoadMoreDirection {\n  Forwards,\n  Backwards,\n}\n\nexport type AutolockValueType = (typeof AUTOLOCK_OPTIONS_LIST[number])['value'];\n","import type { ApiChain } from '../api/types';\n\nimport { CHAIN_CONFIG } from '../config';\n\nexport function getChainConfig<T extends ApiChain>(chain: T) {\n  return CHAIN_CONFIG[chain];\n}\n\nexport function findChainConfig(chain: any) {\n  return chain in CHAIN_CONFIG ? CHAIN_CONFIG[chain as ApiChain] : undefined;\n}\n","import type { ApiChain, ApiToken, ApiTokenWithPrice } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { CHAIN_CONFIG, PRICELESS_TOKEN_HASHES, STAKED_TOKEN_SLUGS, TONCOIN } from '../config';\nimport { getChainConfig } from './chain';\nimport { pick } from './iteratees';\n\nconst chainByNativeSlug = Object.fromEntries(\n  Object.entries(CHAIN_CONFIG).map(([chain, { nativeToken }]) => [nativeToken.slug, chain]),\n) as Record<string, ApiChain>;\n\nexport function getIsNativeToken(slug?: string) {\n  return slug ? slug in chainByNativeSlug : false;\n}\n\nexport function getIsTonToken(slug: string, withNative?: boolean) {\n  return Boolean(slug.startsWith('ton-') || (withNative && slug === TONCOIN.slug));\n}\n\nexport function getNativeToken(chain: ApiChain): ApiToken {\n  return getChainConfig(chain).nativeToken;\n}\n\nexport function getChainBySlug(slug: string) {\n  const items = slug.split('-');\n  return items.length > 1 ? items[0] as ApiChain : chainByNativeSlug[slug];\n}\n\nexport function getIsServiceToken(token?: ApiToken) {\n  const { type, codeHash = '', slug = '' } = token ?? {};\n\n  return type === 'lp_token'\n    || STAKED_TOKEN_SLUGS.has(slug)\n    || PRICELESS_TOKEN_HASHES.has(codeHash);\n}\n\nexport function buildUserToken(token: ApiTokenWithPrice | ApiToken): UserToken {\n  return {\n    ...pick(token, [\n      'symbol',\n      'slug',\n      'name',\n      'image',\n      'decimals',\n      'keywords',\n      'chain',\n      'tokenAddress',\n      'type',\n    ]),\n    amount: 0n,\n    totalValue: '0',\n    price: 0,\n    priceUsd: 0,\n    change24h: 0,\n  };\n}\n","import type { ApiBalanceBySlug, ApiSwapAsset } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserSwapToken } from '../types';\nimport { SwapType } from '../types';\n\nimport { DEFAULT_SWAP_FIRST_TOKEN_SLUG, DEFAULT_SWAP_SECOND_TOKEN_SLUG, IS_CORE_WALLET } from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { getChainBySlug } from '../../util/tokens';\nimport withCache from '../../util/withCache';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsHardwareAccount,\n} from './accounts';\nimport { selectAccountTokensMemoizedFor } from './tokens';\n\nfunction createTokenList(\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  balancesBySlug: ApiBalanceBySlug,\n  sortFn: (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => number,\n  filterFn?: (token: ApiSwapAsset) => boolean,\n): UserSwapToken[] {\n  return Object.entries(swapTokenInfo.bySlug)\n    .filter(([, token]) => !filterFn || filterFn(token))\n    .map(([slug, {\n      symbol, name, image,\n      decimals, keywords, chain,\n      tokenAddress, isPopular, color, price = 0, priceUsd = 0,\n    }]) => {\n      const amount = balancesBySlug[slug] ?? 0n;\n      const totalValue = toBig(amount, decimals).mul(price).toString();\n\n      return {\n        symbol,\n        slug,\n        amount,\n        price,\n        priceUsd,\n        name,\n        image,\n        decimals,\n        isDisabled: false,\n        canSwap: true,\n        isPopular,\n        keywords,\n        totalValue,\n        color,\n        chain,\n        tokenAddress,\n      } satisfies UserSwapToken;\n    })\n    .sort(sortFn);\n}\n\nconst selectPopularTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const popularTokenOrder = [\n      'TON',\n      'USD',\n      'USDT',\n      'BTC',\n      'ETH',\n      'jUSDT',\n      'jWBTC',\n    ];\n    const orderMap = new Map(popularTokenOrder.map((item, index) => [item, index]));\n\n    const filterFn = (token: ApiSwapAsset) => token.isPopular;\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => {\n      const orderIndexA = orderMap.has(tokenA.symbol) ? orderMap.get(tokenA.symbol)! : popularTokenOrder.length;\n      const orderIndexB = orderMap.has(tokenB.symbol) ? orderMap.get(tokenB.symbol)! : popularTokenOrder.length;\n\n      return orderIndexA - orderIndexB;\n    };\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn, filterFn);\n  },\n));\n\nconst selectSwapTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => (\n      tokenA.name.trim().toLowerCase().localeCompare(tokenB.name.trim().toLowerCase())\n    );\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn);\n  },\n));\n\nconst selectAccountTokensForSwapMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  accountSettings: AccountSettings,\n  isSortByValueEnabled = false,\n  areTokensWithNoCostHidden = false,\n) => {\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  ).filter((token) => token.slug in swapTokenInfo.bySlug && !token.isDisabled);\n}));\n\nexport function selectAvailableUserForSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensForSwapMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.tokenInfo,\n    global.swapTokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectPopularTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectPopularTokensMemoizedFor(global.currentAccountId!)(balancesBySlug, global.swapTokenInfo);\n}\n\nexport function selectSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectSwapTokensMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.swapTokenInfo,\n  );\n}\n\nexport function selectCurrentSwapTokenIn(global: GlobalState) {\n  const { tokenInSlug } = global.currentSwap;\n  return tokenInSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenInSlug];\n}\n\nexport function selectCurrentSwapTokenOut(global: GlobalState) {\n  const { tokenOutSlug } = global.currentSwap;\n  return tokenOutSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenOutSlug];\n}\n\nexport function selectSwapType(global: GlobalState) {\n  const {\n    tokenInSlug = DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n    tokenOutSlug = DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  } = global.currentSwap;\n  const tokenInChain = getChainBySlug(tokenInSlug);\n  const tokenOutChain = getChainBySlug(tokenOutSlug);\n\n  if (tokenInChain === 'ton' && tokenOutChain === 'ton') {\n    return SwapType.OnChain;\n  }\n\n  const { addressByChain } = selectCurrentAccount(global) ?? { addressByChain: {} };\n\n  if (tokenInChain in addressByChain) {\n    return SwapType.CrosschainFromWallet;\n  }\n\n  return SwapType.CrosschainToWallet;\n}\n\nexport function selectIsSwapDisabled(global: GlobalState) {\n  return IS_CORE_WALLET\n    || global.restrictions.isSwapDisabled\n    || global.settings.isTestnet\n    || selectIsHardwareAccount(global);\n}\n","import type { ApiCheckTransactionDraftResult, ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { FeePrecision, FeeTerms } from './types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintMax, bigintMin } from '../bigint';\nimport { getIsNativeToken } from '../tokens';\n\ntype ApiFee = Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee' | 'diesel'> & {\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n};\n\nexport type ExplainedTransferFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the transfer. The wallet must have it on the balance to send the transfer.\n   * Show this in the transfer form when the input amount is  the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: bigint;\n  /**\n   * Whether the full token balance can be transferred despite the fee.\n   * If yes, the fee will be taken from the transferred amount.\n   */\n  canTransferFullBalance: boolean;\n};\n\ntype AvailableDiesel = ApiFetchEstimateDieselResult & { amount: bigint };\ntype ApiFeeWithDiesel = ApiFee & { diesel: AvailableDiesel };\n\ntype MaxTransferAmountInput = {\n  /** The wallet balance of the transferred token. Undefined means that it's unknown. */\n  tokenBalance: bigint | undefined;\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n  /** The full fee terms calculated by `explainApiTransferFee`. Undefined means that they're unknown. */\n  fullFee: FeeTerms<bigint> | undefined;\n  /** Whether the full token balance can be transferred despite the fee. */\n  canTransferFullBalance: boolean;\n};\n\ntype BalanceSufficientForTransferInput = Omit<MaxTransferAmountInput, 'tokenSlug'> & {\n  /** The wallet balance of the native token of the transfer chain. Undefined means that it's unknown. */\n  nativeTokenBalance: bigint | undefined;\n  /** The transferred amount. Use 0 for NFT transfers. Undefined means that it's unspecified. */\n  transferAmount: bigint | undefined;\n};\n\n/**\n * Converts the transfer fee data returned from API into data that is ready to be displayed in the transfer form UI.\n */\nexport function explainApiTransferFee(input: ApiFee): ExplainedTransferFee {\n  return shouldUseDiesel(input)\n    ? explainGaslessTransferFee(input)\n    : explainGasfullTransferFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the transfer.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxTransferAmount({\n  tokenBalance,\n  tokenSlug,\n  fullFee,\n  canTransferFullBalance,\n}: MaxTransferAmountInput): bigint | undefined {\n  if (tokenBalance === undefined) {\n    return undefined;\n  }\n\n  // Returning the full balance when the fee is unknown for a better UX\n  if (canTransferFullBalance || !fullFee) {\n    return tokenBalance;\n  }\n\n  let fee = fullFee.token ?? 0n;\n  if (getIsNativeToken(tokenSlug)) {\n    // When the token is native, both `token` and `native` refer to the same currency, so they should be added\n    fee += fullFee.native ?? 0n;\n  }\n\n  return bigintMax(tokenBalance - fee, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to transfer the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForTransfer({\n  tokenBalance,\n  nativeTokenBalance,\n  transferAmount,\n  fullFee,\n  canTransferFullBalance,\n}: BalanceSufficientForTransferInput) {\n  if (transferAmount === undefined || tokenBalance === undefined || nativeTokenBalance === undefined || !fullFee) {\n    return undefined;\n  }\n\n  const isFullTokenTransfer = transferAmount === tokenBalance && canTransferFullBalance;\n  const tokenRequiredAmount = (fullFee.token ?? 0n) + (isFullTokenTransfer ? 0n : transferAmount);\n  const nativeTokenRequiredAmount = fullFee.native ?? 0n;\n\n  return tokenRequiredAmount <= tokenBalance && nativeTokenRequiredAmount <= nativeTokenBalance;\n}\n\nexport function isDieselAvailable(diesel: ApiFetchEstimateDieselResult): diesel is AvailableDiesel {\n  return diesel.status !== 'not-available' && diesel.amount !== undefined;\n}\n\nexport function getDieselTokenAmount(diesel: ApiFetchEstimateDieselResult) {\n  return diesel.status === 'stars-fee' ? 0n : (diesel.amount ?? 0n);\n}\n\nfunction shouldUseDiesel(input: ApiFee): input is ApiFeeWithDiesel {\n  return input.diesel !== undefined && isDieselAvailable(input.diesel);\n}\n\n/**\n * Converts the data of a transfer not involving diesel\n */\nfunction explainGasfullTransferFee(input: ApiFee) {\n  const result: ExplainedTransferFee = {\n    isGasless: false,\n    canTransferFullBalance: input.tokenSlug === TONCOIN.slug,\n  };\n\n  if (input.fee !== undefined) {\n    result.fullFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'lessThan',\n      terms: { native: input.fee },\n      nativeSum: input.fee,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realFee !== undefined) {\n    result.realFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'approximate',\n      terms: { native: input.realFee },\n      nativeSum: input.realFee,\n    };\n  }\n\n  if (input.fee !== undefined && input.realFee !== undefined) {\n    result.excessFee = input.fee - input.realFee;\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel transfer data\n */\nfunction explainGaslessTransferFee({ diesel }: ApiFeeWithDiesel) {\n  const isStarsDiesel = diesel.status === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n  const realFeeInDiesel = convertFee(diesel.realFee, diesel.nativeAmount, diesel.amount);\n  // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n  const dieselRealFee = bigintMin(diesel.amount, realFeeInDiesel);\n  // Cover the remaining real fee with the native token.\n  const nativeRealFee = bigintMax(0n, diesel.realFee - diesel.nativeAmount);\n\n  return {\n    isGasless: true,\n    canTransferFullBalance: false,\n    fullFee: {\n      precision: 'lessThan',\n      terms: {\n        [dieselKey]: diesel.amount,\n        native: diesel.remainingFee,\n      },\n      nativeSum: diesel.nativeAmount + diesel.remainingFee,\n    },\n    realFee: {\n      precision: 'approximate',\n      terms: {\n        [dieselKey]: dieselRealFee,\n        native: nativeRealFee,\n      },\n      nativeSum: diesel.realFee,\n    },\n    excessFee: diesel.nativeAmount + diesel.remainingFee - diesel.realFee,\n  } satisfies ExplainedTransferFee;\n}\n\n/**\n * `exampleFromAmount` and `exampleToAmount` define the exchange rate used to convert `amount`.\n * `exampleFromAmount` is defined in the same currency as `amount`. Mustn't be 0.\n * `exampleToAmount` is defined in the currency you want to get.\n */\nfunction convertFee(\n  amount: bigint,\n  exampleFromAmount: bigint,\n  exampleToAmount: bigint,\n) {\n  const exchangeRate = Big(exampleToAmount.toString()).div(exampleFromAmount.toString());\n  return BigInt(Big(amount.toString()).mul(exchangeRate).round().toString());\n}\n","import type { ApiNft } from '../api/types';\n\nimport { TON_DNS_COLLECTION, TON_DNS_RENEWAL_WARNING_DAYS, TON_DNS_ZONES } from '../config';\nimport { getCountDaysToDate } from './dateFormat';\n\nexport function isDnsDomain(value: string) {\n  return getDnsDomainZone(value) !== undefined;\n}\n\nexport function getDnsDomainZone(domain: string) {\n  for (const zone of TON_DNS_ZONES) {\n    const { suffixes, baseFormat } = zone;\n\n    // Iterating the zones in reverse to prioritize longer zones when multiple zones match (assuming the zones go from\n    // the shortest to the longest). For example, `test.ton.vip` matches both `vip` and `ton.vip`, and `ton.vip` must be\n    // used.\n    for (let i = suffixes.length - 1; i >= 0; i--) {\n      const suffix = suffixes[i];\n      if (!domain.endsWith(`.${suffix}`)) {\n        continue;\n      }\n\n      const base = domain.slice(0, -suffix.length - 1);\n      if (!baseFormat.test(base)) {\n        continue;\n      }\n\n      return { base, zone };\n    }\n  }\n\n  return undefined;\n}\n\nexport function getDnsZoneByCollection(collectionAddress: string) {\n  return TON_DNS_ZONES.find((zone) => zone.resolver === collectionAddress);\n}\n\nexport function isTonDnsNft(nft: ApiNft | undefined): nft is ApiNft {\n  return nft?.collectionAddress === TON_DNS_COLLECTION;\n}\n\nexport function getTonDnsExpirationDate(nft: ApiNft | undefined, dnsExpiration: Record<string, number> | undefined) {\n  return isTonDnsNft(nft) ? dnsExpiration?.[nft.address] : undefined;\n}\n\nexport function filterExpiringDomains(\n  nftAddresses: string[],\n  nftByAddress?: Record<string, ApiNft>,\n  dnsExpiration?: Record<string, number>,\n) {\n  const expiringDomains: ApiNft[] = [];\n\n  if (nftByAddress && dnsExpiration) {\n    for (const address of nftAddresses) {\n      const nft = nftByAddress[address];\n      if (getCountDaysToDate(getTonDnsExpirationDate(nft, dnsExpiration) ?? Infinity) <= TON_DNS_RENEWAL_WARNING_DAYS) {\n        expiringDomains.push(nft);\n      }\n    }\n  }\n\n  return expiringDomains;\n}\n\nexport function getDomainsExpirationDate(\n  nfts: (string | ApiNft)[],\n  nftByAddress?: Record<string, ApiNft>,\n  dnsExpiration?: Record<string, number>,\n) {\n  if (!dnsExpiration) {\n    return undefined;\n  }\n\n  return nfts.reduce<number | undefined>(\n    (minDate, nftOrAddress) => {\n      const nft = typeof nftOrAddress === 'string' ? nftByAddress?.[nftOrAddress] : nftOrAddress;\n      const expirationDate = getTonDnsExpirationDate(nft, dnsExpiration);\n      return expirationDate\n        ? Math.min(expirationDate, minDate ?? Infinity)\n        : minDate;\n    },\n    undefined,\n  );\n}\n","import type { ApiChain } from '../api/types';\n\nimport { getChainConfig } from './chain';\nimport { isDnsDomain } from './dns';\n\nexport function isValidAddressOrDomain(address: string, chain: ApiChain, allowPrefix?: boolean) {\n  const config = getChainConfig(chain);\n  return address && (\n    config[allowPrefix ? 'addressPrefixRegex' : 'addressRegex'].test(address)\n    || (config.isDnsSupported && isDnsDomain(address))\n  );\n}\n","import type { GlobalState } from '../types';\n\nimport { explainApiTransferFee, getMaxTransferAmount } from '../../util/fee/transferFee';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug } from '../../util/tokens';\nimport { selectCurrentAccount } from './accounts';\nimport { selectChainTokenWithMaxBalanceSlow, selectCurrentAccountTokenBalance } from './tokens';\n\nexport function selectCurrentTransferMaxAmount(global: GlobalState) {\n  const { currentTransfer } = global;\n  const tokenBalance = selectCurrentAccountTokenBalance(global, currentTransfer.tokenSlug);\n  const { fullFee, canTransferFullBalance } = explainApiTransferFee(currentTransfer);\n  return getMaxTransferAmount({\n    tokenBalance,\n    tokenSlug: currentTransfer.tokenSlug,\n    fullFee: fullFee?.terms,\n    canTransferFullBalance,\n  });\n}\n\n/**\n * Returns the token slug that should be set to current transfer form to keep the token in sync with the \"to\" address\n */\nexport function selectTokenMatchingCurrentTransferAddressSlow(global: GlobalState): string {\n  const { tokenSlug: currentTokenSlug, toAddress } = global.currentTransfer;\n  const currentChain = getChainBySlug(currentTokenSlug);\n\n  if (!toAddress) {\n    return currentTokenSlug;\n  }\n\n  // First try to match a chain by the full address, then by the prefix.\n  // Because a valid TRON address is a prefix of a valid TON address, and we want to match TRON in this case.\n  for (const isCheckingPrefix of [false, true]) {\n    // If the current token already matches the address, no need to change it\n    if (!toAddress || isValidAddressOrDomain(toAddress, currentChain, isCheckingPrefix)) {\n      return currentTokenSlug;\n    }\n\n    // Otherwise, find the best token of the address's chain\n    const availableChains = selectCurrentAccount(global)?.addressByChain;\n    if (availableChains) {\n      for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n        if (!isValidAddressOrDomain(toAddress, chain, isCheckingPrefix)) {\n          continue;\n        }\n\n        const token = selectChainTokenWithMaxBalanceSlow(global, chain);\n        if (token) return token.slug;\n      }\n    }\n  }\n\n  // If the address matches no available chain, don't change the selected token\n  return currentTokenSlug;\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { DEFAULT_NOMINATORS_STAKING_STATE, IS_STAKING_DISABLED, TONCOIN } from '../../config';\nimport { buildCollectionByKey } from '../../util/iteratees';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\nimport { selectAccountState } from './accounts';\n\nconst selectAccountStakingStatesMemoizedFor = withCache((accountId: string) => memoize((\n  stateDefault: ApiStakingState,\n  stateById?: Record<string, ApiStakingState>,\n) => {\n  const states = stateById ? Object.values(stateById) : undefined;\n  return states?.length ? states : [stateDefault];\n}));\n\nexport function selectAccountStakingStates(global: GlobalState, accountId: string) {\n  const { stateById } = selectAccountState(global, accountId)?.staking ?? {};\n  return selectAccountStakingStatesMemoizedFor(accountId)(global.stakingDefault, stateById);\n}\n\nconst selectAccountStakingStatesBySlugMemoizedFor = withCache((accountId: string) => memoize(\n  (stakingStates: ApiStakingState[]) => buildCollectionByKey(stakingStates, 'tokenSlug'),\n));\n\nexport function selectAccountStakingStatesBySlug(global: GlobalState, accountId: string) {\n  return selectAccountStakingStatesBySlugMemoizedFor(accountId)(selectAccountStakingStates(global, accountId));\n}\n\nexport function selectAccountStakingState(global: GlobalState, accountId: string): ApiStakingState {\n  const { stateById, stakingId, shouldUseNominators } = selectAccountState(global, accountId)?.staking ?? {};\n\n  if (!stateById || !stakingId || !(stakingId in stateById)) {\n    return shouldUseNominators ? DEFAULT_NOMINATORS_STAKING_STATE : global.stakingDefault;\n  }\n\n  return stateById[stakingId];\n}\n\nexport function selectAccountStakingHistory(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return stakingState.tokenSlug === TONCOIN.slug ? accountState?.stakingHistory : undefined;\n}\n\nexport function selectAccountStakingTotalProfit(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return (stakingState.tokenSlug === TONCOIN.slug ? accountState?.staking?.totalProfit : undefined) ?? 0n;\n}\n\nexport function selectIsStakingDisabled(global: GlobalState) {\n  return Boolean(IS_STAKING_DISABLED || global.settings.isTestnet);\n}\n","import type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { isTonDnsNft } from '../../util/dns';\nimport { selectCurrentAccountState } from './accounts';\n\nexport function selectTonDnsLinkedAddress(global: GlobalState, nft: ApiNft | undefined) {\n  const { linkedAddressByAddress } = selectCurrentAccountState(global)?.nfts || {};\n\n  return isTonDnsNft(nft) ? linkedAddressByAddress?.[nft.address] : undefined;\n}\n","import { DEFAULT_PRICE_CURRENCY, IS_EXTENSION } from '../../../config';\nimport { logDebug } from '../../../util/logs';\nimport {\n  IS_ANDROID_APP, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP,\n} from '../../../util/windowEnvironment';\nimport { callApi, initApi } from '../../../api';\nimport { addActionHandler, getGlobal } from '../../index';\nimport { selectNewestActivityTimestamps } from '../../selectors';\n\naddActionHandler('initApi', async (global, actions) => {\n  logDebug('initApi action called');\n  const accountIds = global.accounts?.byId ? Object.keys(global.accounts.byId) : [];\n  initApi(actions.apiUpdate, {\n    isElectron: IS_ELECTRON,\n    isNativeBottomSheet: IS_DELEGATED_BOTTOM_SHEET,\n    isIosApp: IS_IOS_APP,\n    isAndroidApp: IS_ANDROID_APP,\n    referrer: new URLSearchParams(window.location.search).get('r') ?? undefined,\n    accountIds,\n  });\n\n  await callApi('waitDataPreload');\n\n  const { currentAccountId } = getGlobal();\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const newestActivityTimestamps = selectNewestActivityTimestamps(global, currentAccountId);\n\n  void callApi('activateAccount', currentAccountId, newestActivityTimestamps);\n});\n\naddActionHandler('resetApiSettings', (global, actions, params) => {\n  const isDefaultEnabled = !params?.areAllDisabled;\n\n  if (IS_EXTENSION) {\n    actions.toggleTonMagic({ isEnabled: false });\n    actions.toggleTonProxy({ isEnabled: false });\n  }\n  if (IS_EXTENSION || IS_ELECTRON) {\n    actions.toggleDeeplinkHook({ isEnabled: isDefaultEnabled });\n  }\n  actions.changeBaseCurrency({ currency: DEFAULT_PRICE_CURRENCY });\n});\n","export var BiometryType;\n(function (BiometryType) {\n    // Android, iOS\n    BiometryType[BiometryType[\"NONE\"] = 0] = \"NONE\";\n    // iOS\n    BiometryType[BiometryType[\"TOUCH_ID\"] = 1] = \"TOUCH_ID\";\n    // iOS\n    BiometryType[BiometryType[\"FACE_ID\"] = 2] = \"FACE_ID\";\n    // Android\n    BiometryType[BiometryType[\"FINGERPRINT\"] = 3] = \"FINGERPRINT\";\n    // Android\n    BiometryType[BiometryType[\"FACE_AUTHENTICATION\"] = 4] = \"FACE_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"IRIS_AUTHENTICATION\"] = 5] = \"IRIS_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"MULTIPLE\"] = 6] = \"MULTIPLE\";\n})(BiometryType || (BiometryType = {}));\n/**\n * Keep this in sync with BiometricAuthError in README.md\n * Update whenever `convertToPluginErrorCode` functions are modified\n */\nexport var BiometricAuthError;\n(function (BiometricAuthError) {\n    BiometricAuthError[BiometricAuthError[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_UNAVAILABLE\"] = 1] = \"BIOMETRICS_UNAVAILABLE\";\n    BiometricAuthError[BiometricAuthError[\"USER_LOCKOUT\"] = 2] = \"USER_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_NOT_ENROLLED\"] = 3] = \"BIOMETRICS_NOT_ENROLLED\";\n    BiometricAuthError[BiometricAuthError[\"USER_TEMPORARY_LOCKOUT\"] = 4] = \"USER_TEMPORARY_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"AUTHENTICATION_FAILED\"] = 10] = \"AUTHENTICATION_FAILED\";\n    BiometricAuthError[BiometricAuthError[\"APP_CANCEL\"] = 11] = \"APP_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"INVALID_CONTEXT\"] = 12] = \"INVALID_CONTEXT\";\n    BiometricAuthError[BiometricAuthError[\"NOT_INTERACTIVE\"] = 13] = \"NOT_INTERACTIVE\";\n    BiometricAuthError[BiometricAuthError[\"PASSCODE_NOT_SET\"] = 14] = \"PASSCODE_NOT_SET\";\n    BiometricAuthError[BiometricAuthError[\"SYSTEM_CANCEL\"] = 15] = \"SYSTEM_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_CANCEL\"] = 16] = \"USER_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_FALLBACK\"] = 17] = \"USER_FALLBACK\";\n})(BiometricAuthError || (BiometricAuthError = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from \"@capacitor/core\";\nconst NativeBiometric = registerPlugin(\"NativeBiometric\", {\n    web: () => import(\"./web\").then((m) => new m.NativeBiometricWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeBiometric };\n//# sourceMappingURL=index.js.map","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { applyStyles } from './animation';\nimport { SECOND } from './dateFormat';\nimport safeExec from './safeExec';\nimport { throttle } from './schedulers';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nconst WINDOW_RESIZE_THROTTLE_MS = IS_TELEGRAM_APP ? 25 : 250;\nconst WINDOW_ORIENTATION_CHANGE_THROTTLE_MS = IS_IOS ? 350 : 250;\nconst SAFE_AREA_INITIALIZATION_DELAY = SECOND;\nconst SAFE_AREA_TOLERANCE_HEIGHT_PX = 40;\n\nconst initialHeight = window.innerHeight;\nconst virtualKeyboardOpenListeners: NoneToVoidFunction[] = [];\n\nlet currentWindowSize = updateSizes();\n\nwindow.addEventListener('orientationchange', throttle(() => {\n  currentWindowSize = updateSizes();\n}, WINDOW_ORIENTATION_CHANGE_THROTTLE_MS, false));\n\nif (!IS_IOS) {\n  window.addEventListener('resize', throttle(() => {\n    currentWindowSize = updateSizes();\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nif (IS_CAPACITOR) {\n  void import('@capacitor/keyboard')\n    .then(({ Keyboard }) => {\n      void Keyboard.addListener('keyboardDidShow', async (info) => {\n        await adjustBodyPaddingForKeyboard(info.keyboardHeight);\n\n        for (const cb of virtualKeyboardOpenListeners) {\n          safeExec(cb);\n        }\n      });\n\n      void Keyboard.addListener('keyboardWillHide', () => {\n        void adjustBodyPaddingForKeyboard(0);\n      });\n    });\n}\n\nif ('visualViewport' in window && (IS_IOS || IS_ANDROID)) {\n  window.visualViewport!.addEventListener('resize', throttle((e: Event) => {\n    const target = e.target as VisualViewport;\n\n    // In the TMA application on iOS, the VisualViewport behaves incorrectly,\n    // not taking into account the height of the virtual keyboard.\n    if (IS_IOS && IS_TELEGRAM_APP) {\n      const keyboardHeight = initialHeight - target.height;\n      void adjustBodyPaddingForKeyboard(keyboardHeight > SAFE_AREA_TOLERANCE_HEIGHT_PX ? keyboardHeight : 0)\n        .finally(() => {\n          requestMeasure(() => {\n            currentWindowSize = {\n              ...getWindowSize(),\n              height: target.height,\n            };\n          });\n        });\n    } else {\n      patchVh();\n      currentWindowSize = {\n        ...getWindowSize(),\n        height: target.height,\n      };\n    }\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nexport function updateSizes() {\n  patchVh();\n  patchSafeAreaProperty();\n\n  return getWindowSize();\n}\n\nfunction getWindowSize() {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    screenHeight: window.screen.height,\n    safeAreaTop: getSafeAreaTop(),\n    safeAreaBottom: getSafeAreaBottom(),\n  };\n}\n\nexport default {\n  get: () => currentWindowSize,\n  getIsKeyboardVisible: () => initialHeight > currentWindowSize.height,\n};\n\n// Registers a callback that will be fired each time the virtual keyboard is opened and the <body> size is adjusted\nexport function onVirtualKeyboardOpen(cb: NoneToVoidFunction) {\n  virtualKeyboardOpenListeners.push(cb);\n}\n\nfunction patchVh() {\n  if (!(IS_IOS || IS_ANDROID) || IS_CAPACITOR || (IS_IOS && IS_TELEGRAM_APP)) return;\n\n  const height = IS_IOS ? window.visualViewport!.height + window.visualViewport!.pageTop : window.innerHeight;\n\n  requestMutation(() => {\n    const vh = height * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n  });\n}\n\nfunction adjustBodyPaddingForKeyboard(keyboardHeight: number) {\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      applyStyles(document.body, { paddingBottom: keyboardHeight ? `${keyboardHeight}px` : '' });\n      resolve();\n    });\n  });\n}\n\nfunction patchSafeAreaProperty() {\n  toggleSafeAreaClasses();\n\n  // WebKit has issues with this property on page load\n  // https://bugs.webkit.org/show_bug.cgi?id=191872\n  setTimeout(() => {\n    toggleSafeAreaClasses();\n    updateSafeAreaValues();\n  }, SAFE_AREA_INITIALIZATION_DELAY);\n}\n\nfunction getSafeAreaTop() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-top-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction getSafeAreaBottom() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-bottom-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction toggleSafeAreaClasses() {\n  const { safeAreaTop, safeAreaBottom } = getWindowSize();\n  const { documentElement } = document;\n\n  requestMutation(() => {\n    documentElement.classList.toggle('with-safe-area-top', !Number.isNaN(safeAreaTop) && safeAreaTop > 0);\n    documentElement.classList.toggle('with-safe-area-bottom', !Number.isNaN(safeAreaBottom) && safeAreaBottom > 0);\n  });\n}\n\nfunction updateSafeAreaValues() {\n  const { safeAreaTop, safeAreaBottom } = getWindowSize();\n\n  currentWindowSize = {\n    ...currentWindowSize,\n    safeAreaTop,\n    safeAreaBottom,\n  };\n}\n","import type { Telegram, WebApp } from '@twa-dev/types';\nimport { getActions } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { logDebugError } from '../logs';\nimport { getIsMobileTelegramApp } from '../windowEnvironment';\nimport { updateSizes } from '../windowSize';\n\ndeclare global {\n  interface Window {\n    Telegram: Telegram;\n  }\n}\n\nlet webApp: WebApp | undefined;\nlet isBiometricInited = false;\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\nlet disableSwipeRequests = 0;\n\nexport function initTelegramApp() {\n  webApp = window.Telegram?.WebApp;\n\n  if (!webApp) {\n    logDebugError('[telegram] Can\\'t initialize Telegram Mini-App');\n\n    return;\n  }\n\n  enableTelegramMiniAppSwipeToClose();\n\n  webApp.lockOrientation();\n  webApp.SecondaryButton.setParams({ position: 'bottom' });\n  webApp.BackButton.hide();\n  webApp.SettingsButton.hide();\n  webApp.expand();\n\n  if (getIsMobileTelegramApp()) {\n    webApp.onEvent('safeAreaChanged', updateSafeAreaProperties);\n    webApp.onEvent('contentSafeAreaChanged', updateSafeAreaProperties);\n  }\n\n  webApp.onEvent('viewportChanged', updateViewport);\n  updateSafeAreaProperties();\n  initTelegramAppBiometric();\n\n  webApp.ready();\n}\n\nexport function initTelegramWithGlobal(global: GlobalState) {\n  if (global.isFullscreen) {\n    webApp!.requestFullscreen();\n  }\n\n  webApp!.onEvent('fullscreenChanged', updateFullscreenState);\n  webApp!.onEvent('fullscreenFailed', onFullscreenFailed);\n}\n\nexport function initTelegramAppBiometric() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager || isBiometricInited) return;\n\n  isBiometricInited = true;\n  biometricManager.init(() => {\n    const {\n      isBiometricAvailable, biometricType, isAccessGranted, isAccessRequested,\n    } = biometricManager;\n\n    isNativeBiometricAuthSupported = isBiometricAvailable && (isAccessGranted || !isAccessRequested);\n    if (webApp!.platform === 'ios') {\n      isFaceIdAvailable = biometricType === 'face';\n      isTouchIdAvailable = biometricType === 'finger';\n    }\n  });\n}\n\nexport function getIsTelegramBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsTelegramFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsTelegramTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport function getIsTelegramBiometricsRestricted() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager) return undefined;\n\n  const { isBiometricAvailable, isAccessGranted, isAccessRequested } = biometricManager;\n\n  return isBiometricAvailable && isAccessRequested && !isAccessGranted;\n}\n\nexport function getTelegramApp() {\n  return webApp;\n}\n\nexport function getTelegramAppAsync(): Promise<WebApp | undefined> {\n  return new Promise((resolve) => {\n    window.addEventListener('DOMContentLoaded', () => {\n      resolve(getTelegramApp());\n    });\n  });\n}\n\nfunction updateViewport({ isStateStable }: { isStateStable: boolean }) {\n  if (isStateStable) {\n    updateSizes();\n  }\n}\n\nfunction updateSafeAreaProperties() {\n  const {\n    top, left, right, bottom,\n  } = webApp!.safeAreaInset;\n  const {\n    top: contentTop, left: contentLeft, right: contentRight, bottom: contentBottom,\n  } = webApp!.contentSafeAreaInset;\n\n  document.documentElement.style.setProperty('--safe-area-top', `${top + contentTop}px`);\n  document.documentElement.style.setProperty('--safe-area-left', `${left + contentLeft}px`);\n  document.documentElement.style.setProperty('--safe-area-right', `${right + contentRight}px`);\n  document.documentElement.style.setProperty('--safe-area-bottom', `${bottom + contentBottom}px`);\n}\n\nfunction updateFullscreenState() {\n  if (webApp!.isFullscreen) {\n    getActions().openFullscreen();\n    disableTelegramMiniAppSwipeToClose();\n  } else {\n    getActions().closeFullscreen();\n    enableTelegramMiniAppSwipeToClose();\n  }\n}\n\nfunction onFullscreenFailed(params: { error: 'UNSUPPORTED' | 'ALREADY_FULLSCREEN' }) {\n  enableTelegramMiniAppSwipeToClose();\n  // This error occurs when the user has requested fullscreen, but the application is already open fullscreen.\n  // In this case, we just mark in the global that the application is running in fullscreen mode.\n  if (params.error === 'ALREADY_FULLSCREEN') {\n    getActions().openFullscreen();\n    disableTelegramMiniAppSwipeToClose();\n  }\n}\n\nexport function disableTelegramMiniAppSwipeToClose() {\n  disableSwipeRequests += 1;\n\n  if (disableSwipeRequests === 1) {\n    webApp?.disableVerticalSwipes();\n  }\n}\n\nexport function enableTelegramMiniAppSwipeToClose() {\n  disableSwipeRequests = Math.max(0, disableSwipeRequests - 1);\n\n  if (disableSwipeRequests === 0) {\n    webApp?.enableVerticalSwipes();\n  }\n}\n","import type { BiometricRequestAccessParams } from '@twa-dev/types';\n\nimport { APP_NAME } from '../../config';\nimport { mapValues } from '../iteratees';\nimport safeExec from '../safeExec';\nimport { getTelegramApp } from '../telegram';\n\nfunction requestBiometricAccess(options: BiometricRequestAccessParams) {\n  return new Promise((resolve, reject) => {\n    getTelegramApp()!.BiometricManager.requestAccess(options, (accessGranted) => {\n      if (accessGranted) {\n        resolve(accessGranted);\n      } else {\n        reject(new Error('Access denied'));\n      }\n    });\n  });\n}\n\nexport async function setBiometricCredentials(password: string) {\n  const biometricManager = getTelegramApp()!.BiometricManager;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Access to biometric data has not been granted');\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    biometricManager.updateBiometricToken(password, (updated) => {\n      if (updated) {\n        resolve(password);\n      } else {\n        reject(new Error('Failed to update or save the biometric token'));\n      }\n    });\n  });\n}\n\nexport async function verifyIdentity() {\n  const biometricManager = getTelegramApp()!.BiometricManager;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Biometric access was denied. Please grant access to proceed.');\n    }\n  }\n\n  return new Promise<{ success: boolean; token: string }>((resolve, reject) => {\n    biometricManager.authenticate(\n      { reason: '' },\n      // @ts-ignore Wrong type signature https://github.com/twa-dev/types/pull/12\n      (success: boolean, token: string) => {\n        if (success) {\n          resolve({ success, token });\n        } else {\n          reject(new Error('Biometric authentication failed. Please try again.'));\n        }\n      },\n    );\n  });\n}\n\nexport function signCustomData(\n  initDataFields: AnyLiteral,\n  payload: string,\n  options?: {\n    shouldSignHash?: boolean;\n    isPayloadBinary?: boolean;\n  },\n): Promise<{ result: string; resultUnsafe: AnyLiteral }> {\n  const app = getTelegramApp()!;\n\n  return new Promise((resolve, reject) => {\n    (app as any).invokeCustomMethod('prepareSignedPayload', {\n      init_data: app.initData,\n      init_data_sign_fields: initDataFields,\n      payload,\n      ...(options?.shouldSignHash && { sign_sha256: true }),\n      ...(options?.isPayloadBinary && { is_payload_binary: true }),\n    }, (err: Error, result: string) => {\n      if (result) {\n        resolve({\n          result,\n          resultUnsafe: parseResultUnsafe(result),\n        });\n      } else {\n        reject(err || 'Unknown Error');\n      }\n    });\n  });\n}\n\nfunction parseResultUnsafe(appData: string) {\n  const resultUnsafe = (window.Telegram as any).Utils.urlParseQueryString(appData);\n\n  return mapValues(resultUnsafe, (value: string) => {\n    if ((value.startsWith('{') && value.endsWith('}')) || (value.startsWith('[') && value.endsWith(']'))) {\n      return safeExec(() => JSON.parse(value));\n    }\n\n    return value;\n  });\n}\n","import type { AuthConfig, WebAuthn } from './types';\n\nimport { APP_NAME } from '../../config';\nimport { randomBytes } from '../random';\nimport { pause } from '../schedulers';\n\ndeclare global {\n  interface AuthenticationExtensionsClientInputs {\n    credBlob?: Uint8Array; // max 32 bytes\n    getCredBlob?: boolean;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { salt1: Uint8Array }; // 32-byte random data\n  }\n\n  interface AuthenticationExtensionsClientOutputs {\n    credBlob?: boolean;\n    getCredBlob?: Uint8Array;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { output1: Uint8Array };\n  }\n\n  interface AuthenticatorResponse {\n    getTransports?: () => AuthenticatorTransport[];\n  }\n}\n\nexport interface CredentialCreationResult {\n  type: 'credBlob' | 'userHandle';\n  password: {\n    credBlob: string;\n    userHandle: string;\n  };\n  credential: PublicKeyCredential;\n}\n\nenum PubkeyAlg {\n  Ed25519 = -8,\n  ES256 = -7,\n  RS256 = -257,\n}\n\nconst CREDENTIAL_SIZE = 32;\nconst RP_NAME = APP_NAME;\nconst USER_NAME = APP_NAME;\nconst PAUSE = 300;\nconst CREDENTIAL_TIMEOUT = 120000;\n\nasync function createCredential() {\n  const rpId = window.location.hostname;\n\n  const userHandle = randomBytes(CREDENTIAL_SIZE);\n  const credBlob = randomBytes(CREDENTIAL_SIZE);\n\n  const options: CredentialCreationOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      rp: {\n        name: RP_NAME,\n        id: rpId,\n      },\n      user: {\n        id: userHandle,\n        name: USER_NAME,\n        displayName: RP_NAME,\n      },\n      pubKeyCredParams: [\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.ES256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.RS256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.Ed25519,\n        },\n      ],\n      authenticatorSelection: {\n        requireResidentKey: true,\n        userVerification: 'preferred',\n      },\n      extensions: {\n        credBlob,\n        hmacCreateSecret: true,\n      },\n      timeout: CREDENTIAL_TIMEOUT,\n      excludeCredentials: [],\n    },\n  };\n\n  const credential = (await navigator.credentials.create(options)) as PublicKeyCredential;\n\n  if (!credential) {\n    throw new Error('Missing credential');\n  }\n\n  const extensions = credential.getClientExtensionResults();\n  const type = extensions.credBlob ? 'credBlob' : 'userHandle';\n\n  return {\n    type,\n    password: {\n      credBlob: Buffer.from(credBlob).toString('hex'),\n      userHandle: Buffer.from(userHandle).toString('hex'),\n    },\n    credential,\n  } as CredentialCreationResult;\n}\n\nasync function verify({ credential, password, type }: CredentialCreationResult) {\n  await pause(PAUSE);\n\n  const transports = credential.response\n    && credential.response.getTransports\n    && credential.response.getTransports();\n\n  const credentialId = Buffer.from(credential.rawId).toString('hex');\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: credential.rawId,\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (!assertion) {\n    throw new Error('Missing authentication');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n  let result: string | undefined;\n  switch (type) {\n    case 'userHandle': {\n      if (!response.userHandle) {\n        throw new Error('Missing stored userHandle');\n      }\n      if (!Buffer.from(password.userHandle, 'hex').equals(Buffer.from(response.userHandle))) {\n        throw new Error('Stored blob not equals passed blob');\n      }\n      result = password.userHandle;\n      break;\n    }\n  }\n\n  if (!result) {\n    throw new Error('Missing stored blob');\n  }\n\n  const config: WebAuthn = {\n    kind: 'webauthn',\n    type,\n    credentialId,\n    transports,\n  };\n\n  return { config, password: result };\n}\n\nasync function getPassword(config: AuthConfig) {\n  if (config.kind !== 'webauthn') {\n    throw new Error('Unexpected auth kind');\n  }\n\n  const { credentialId, transports, type } = config;\n\n  const controller = new AbortController();\n  const signal = controller.signal;\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: Buffer.from(credentialId, 'hex'),\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n    signal,\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (signal.aborted) {\n    throw new Error('Verification canceled');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n\n  const extensions = assertion.getClientExtensionResults();\n  if (type === 'userHandle') {\n    if (!response.userHandle) {\n      throw new Error('missing userHandle');\n    }\n    return Buffer.from(response.userHandle).toString('hex');\n  } else {\n    return Buffer.from(extensions.getCredBlob ?? '').toString('hex');\n  }\n}\n\nexport default {\n  createCredential,\n  verify,\n  getPassword,\n};\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { AuthConfig, BiometricsSetupResult } from './types';\nimport type { CredentialCreationResult } from './webAuthn';\n\nimport {\n  APP_NAME, IS_TELEGRAM_APP, NATIVE_BIOMETRICS_SERVER, NATIVE_BIOMETRICS_USERNAME,\n} from '../../config';\nimport { logDebugError } from '../logs';\nimport { randomBytes } from '../random';\nimport {\n  setBiometricCredentials as setTelegramBiometricCredentials,\n  verifyIdentity as verifyTelegramBiometricsIdentity,\n} from './telegram';\nimport webAuthn from './webAuthn';\n\nconst CREDENTIAL_SIZE = 32;\n\nasync function setupBiometrics({ credential }: { credential?: CredentialCreationResult }) {\n  let result: BiometricsSetupResult | undefined;\n\n  try {\n    if (!credential) {\n      const password = Buffer.from(randomBytes(CREDENTIAL_SIZE)).toString('hex');\n      const encryptedPassword = await window.electron?.encryptPassword(password);\n      if (!encryptedPassword) {\n        return result;\n      }\n\n      result = {\n        password,\n        config: {\n          kind: 'electron-safe-storage',\n          encryptedPassword,\n        },\n      };\n    } else {\n      result = await webAuthn.verify(credential);\n    }\n  } catch (err) {\n    logDebugError('setupBiometrics', err);\n  }\n\n  return result;\n}\n\nasync function setupNativeBiometrics(password: string): Promise<BiometricsSetupResult> {\n  if (IS_TELEGRAM_APP) {\n    await setTelegramBiometricCredentials(password);\n\n    return {\n      password,\n      config: { kind: 'native-biometrics' },\n    };\n  }\n\n  await NativeBiometric.setCredentials({\n    username: NATIVE_BIOMETRICS_USERNAME,\n    password,\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n\n  return {\n    password,\n    config: { kind: 'native-biometrics' },\n  };\n}\n\nfunction removeNativeBiometrics() {\n  if (IS_TELEGRAM_APP) {\n    return setTelegramBiometricCredentials('');\n  }\n\n  return NativeBiometric.deleteCredentials({\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n}\n\nasync function getPassword(config: AuthConfig) {\n  let password: string | undefined;\n\n  try {\n    if (config.kind === 'webauthn') {\n      password = await webAuthn.getPassword(config);\n    } else if (config.kind === 'electron-safe-storage') {\n      password = await window.electron?.decryptPassword(config.encryptedPassword);\n    } else if (IS_TELEGRAM_APP && config.kind === 'native-biometrics') {\n      const { success: isVerified, token } = await verifyTelegramBiometricsIdentity();\n\n      if (!isVerified) return undefined;\n      password = token;\n    } else if (config.kind === 'native-biometrics') {\n      const isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        isWeakAuthenticatorAllowed: true,\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n\n      if (!isVerified) return undefined;\n\n      const credentials = await NativeBiometric.getCredentials({\n        server: NATIVE_BIOMETRICS_SERVER,\n      });\n      password = credentials.password;\n    } else {\n      throw new Error('Unexpected auth kind');\n    }\n  } catch (err) {\n    logDebugError('getPassword', err);\n  }\n\n  return password;\n}\n\nexport default {\n  setupBiometrics,\n  setupNativeBiometrics,\n  removeNativeBiometrics,\n  getPassword,\n  webAuthn,\n};\n","import { registerPlugin } from '@capacitor/core';\nconst App = registerPlugin('App', {\n    web: () => import('./web').then(m => new m.AppWeb()),\n});\nexport * from './definitions';\nexport { App };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst SplashScreen = registerPlugin('SplashScreen', {\n    web: () => import('./web').then(m => new m.SplashScreenWeb()),\n});\nexport * from './definitions';\nexport { SplashScreen };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\n\nimport type { AirAppLauncherPlugin } from './definitions';\n\nconst AirAppLauncher = registerPlugin<AirAppLauncherPlugin>('AirAppLauncher');\n\nexport * from './definitions';\nexport { AirAppLauncher };\n","import { registerPlugin } from '@capacitor/core';\nconst SafeArea = registerPlugin('SafeArea', {\n    web: () => import('./web').then(m => new m.SafeAreaWeb()),\n});\nexport * from './definitions';\nexport { SafeArea };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst AppLauncher = registerPlugin('AppLauncher', {\n    web: () => import('./web').then(m => new m.AppLauncherWeb()),\n});\nexport * from './definitions';\nexport { AppLauncher };\n//# sourceMappingURL=index.js.map","import type React from '../lib/teact/teact';\n\nexport const stopEvent = (e: React.UIEvent | Event | React.FormEvent) => {\n  e.stopPropagation();\n  e.preventDefault();\n};\n\nexport function listenOnce<T extends Event = Event>(\n  target: Pick<EventTarget, 'addEventListener' | 'removeEventListener'>,\n  name: string,\n  handler: (event: T) => void,\n) {\n  const handleEvent = (event: Event) => {\n    target.removeEventListener(name, handleEvent);\n    handler(event as T);\n  };\n  target.addEventListener(name, handleEvent);\n}\n","import type { DeviceInfo, Feature } from '@tonconnect/protocol';\n\nimport type { ApiAccountWithTon } from '../api/types';\n\nimport {\n  APP_NAME, IS_EXTENSION, IS_TELEGRAM_APP, TONCONNECT_PROTOCOL_VERSION,\n} from '../config';\nimport packageJson from '../../package.json';\nimport { DEFAULT_MAX_MESSAGES, W5_MAX_MESSAGES } from '../api/chains/ton/constants';\nimport { getMaxMessagesInTransaction } from './ton/transfer';\n\ntype DevicePlatform = DeviceInfo['platform'];\n\n/*\n This function is called in TonConnect `connect` method (where we know the wallet version)\n and in JS Bridge (where no account is selected, so we show maximum number of messages).\n*/\nexport function tonConnectGetDeviceInfo(account?: ApiAccountWithTon): DeviceInfo {\n  const features: Feature[] = [\n    'SendTransaction', // TODO DEPRECATED\n    {\n      name: 'SendTransaction',\n      maxMessages: account ? getTonConnectMaxMessages(account) : W5_MAX_MESSAGES,\n    },\n  ];\n\n  if (!account || account.type !== 'ledger') {\n    features.push({\n      name: 'SignData',\n      types: ['text', 'binary', 'cell'],\n    });\n  }\n\n  return {\n    platform: getPlatform(),\n    appName: APP_NAME,\n    appVersion: packageJson.version,\n    maxProtocolVersion: TONCONNECT_PROTOCOL_VERSION,\n    features,\n  };\n}\n\n/** How many messages can be sent in a single TON Connect transaction sending */\nexport function getTonConnectMaxMessages(account: ApiAccountWithTon) {\n  const { type } = account;\n\n  if (type === 'ledger') {\n    return DEFAULT_MAX_MESSAGES; // TODO Remove after DEXs support the 1 message limit\n  } else {\n    return getMaxMessagesInTransaction(account);\n  }\n}\n\nfunction getPlatform(): DevicePlatform {\n  const { userAgent } = navigator;\n  const platform = navigator.platform || navigator?.userAgentData?.platform || '';\n\n  const macosPlatforms = ['macOS', 'Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  const iphonePlatforms = ['iPhone'];\n  const ipadPlatforms = ['iPad', 'iPod'];\n\n  let devicePlatform: DevicePlatform | undefined;\n\n  if (IS_EXTENSION || IS_TELEGRAM_APP) {\n    devicePlatform = 'browser';\n  } else if (/Android/.test(userAgent)) {\n    devicePlatform = 'android';\n  } else if (iphonePlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'iphone';\n  } else if (ipadPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'ipad';\n  } else if (macosPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'mac';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'windows';\n  } else if (/Linux/.test(platform)) {\n    devicePlatform = 'linux';\n  } else {\n    devicePlatform = 'browser';\n  }\n\n  return devicePlatform;\n}\n","import type { DeviceInfo } from '@tonconnect/protocol';\n\nimport type { BridgeApi } from '../provider/bridgeApi';\nimport type { BrowserTonConnectBridgeMethods } from '../provider/tonConnectBridgeApi';\n\ninterface TonConnectProperties {\n  deviceInfo: DeviceInfo;\n  protocolVersion: number;\n  isWalletBrowser: boolean;\n}\n\ntype ApiMethodName = keyof BridgeApi;\ntype ApiArgs = Parameters<Required<BridgeApi>[ApiMethodName]>;\ntype ApiMethodResponse = ReturnType<Required<BridgeApi>[ApiMethodName]>;\n\ninterface RequestState {\n  resolve: AnyToVoidFunction;\n  reject: AnyToVoidFunction;\n}\n\ninterface OutMessageData {\n  channel: string;\n  messageId: string;\n  type: 'callMethod';\n  name: ApiMethodName;\n  args: ApiArgs;\n}\n\ntype InMessageData = {\n  channel: string;\n  messageId: string;\n  type: 'methodResponse';\n  response?: ApiMethodResponse;\n  error?: { message: string };\n} | {\n  channel: string;\n  messageId: string;\n  type: 'update';\n  update: string;\n};\n\ntype CordovaPostMessageTarget = { postMessage: AnyToVoidFunction };\ntype Handler = (update: string) => void;\n\n/**\n * Allows calling functions, provided by another messenger (the parent window, or the Capacitor main view), in this messenger.\n * The other messenger must provide the functions using `createReverseIFrameInterface`.\n *\n * `PostMessageConnect` is not used here (as any other dependencies) because this needs to be easily stringified.\n */\nexport function initConnector(\n  bridgeKey: string,\n  channel: string,\n  target: Window | CordovaPostMessageTarget,\n  tonConnectProperties: TonConnectProperties,\n) {\n  if ((window as any)[bridgeKey]) return;\n\n  const TON_CONNECT_BRIDGE_METHODS = ['connect', 'restoreConnection', 'disconnect', 'send'] as const;\n\n  const requestStates = new Map<string, RequestState>();\n  const updateHandlers = new Set<Handler>();\n\n  setupPostMessageHandler();\n  setupGlobalOverrides();\n  initTonConnect();\n\n  function setupPostMessageHandler() {\n    window.addEventListener('message', ({ data }) => {\n      const message = data as InMessageData;\n\n      if (message.channel !== channel) {\n        return;\n      }\n\n      if (message.type === 'methodResponse') {\n        const requestState = requestStates.get(message.messageId);\n        if (!requestState) return;\n\n        requestStates.delete(message.messageId);\n\n        if (message.error) {\n          requestState.reject(message.error);\n        } else {\n          requestState.resolve(message.response);\n        }\n      } else if (message.type === 'update') {\n        updateHandlers.forEach((handler) => handler(message.update));\n      }\n    });\n  }\n\n  function setupGlobalOverrides() {\n    window.open = (url) => {\n      url = sanitizeUrl(url);\n      if (url) {\n        void callApi('window:open', { url });\n      }\n\n      // eslint-disable-next-line no-null/no-null\n      return null;\n    };\n\n    window.close = () => {\n      void callApi('window:close');\n    };\n\n    window.addEventListener('click', (e) => {\n      if (!(e.target instanceof HTMLElement)) return;\n\n      const { href, target } = e.target.closest('a') || {};\n      if (href && (target === '_blank' || !href.startsWith('http'))) {\n        e.preventDefault();\n\n        const url = sanitizeUrl(href);\n        if (url) {\n          void callApi('window:open', { url });\n        }\n      }\n    }, false);\n  }\n\n  function initTonConnect() {\n    const methods = Object.fromEntries(TON_CONNECT_BRIDGE_METHODS.map((name) => {\n      return [\n        name,\n        (...args: Parameters<BrowserTonConnectBridgeMethods[typeof name]>) => callApi(`tonConnect:${name}`, ...args),\n      ];\n    }));\n\n    function addUpdateHandler(cb: Handler) {\n      updateHandlers.add(cb);\n\n      return () => {\n        updateHandlers.delete(cb);\n      };\n    }\n\n    (window as any)[bridgeKey] = {\n      tonconnect: {\n        ...tonConnectProperties,\n        ...methods,\n        listen: addUpdateHandler,\n      },\n    };\n  }\n\n  function callApi<ApiMethodName extends keyof BridgeApi>(\n    name: ApiMethodName,\n    ...args: ApiArgs\n  ) {\n    const messageId = generateUniqueId();\n\n    const promise = new Promise<any>((resolve, reject) => {\n      requestStates.set(messageId, { resolve, reject });\n    });\n\n    const messageData: OutMessageData = {\n      channel,\n      messageId,\n      type: 'callMethod',\n      name,\n      args,\n    };\n\n    if ('parent' in target) {\n      target.postMessage(messageData, '*');\n    } else {\n      target.postMessage(JSON.stringify(messageData));\n    }\n\n    return promise;\n  }\n\n  function generateUniqueId() {\n    return Date.now().toString(36) + Math.random().toString(36).slice(2);\n  }\n\n  function sanitizeUrl(url?: string | URL) {\n    if (!url) return undefined;\n\n    // eslint-disable-next-line no-control-regex\n    url = String(url).trim().replace(/[\\x00-\\x1F\\x7F]/g, '');\n\n    if (url.startsWith('//')) {\n      return `https:${url}`;\n    }\n\n    const UNSAFE_PATTERNS = [\n      /^\\s*javascript\\s*:/i,\n      /^\\s*data\\s*:/i,\n      /^\\s*vbscript\\s*:/i,\n      /^\\s*file\\s*:/i,\n      /^\\s*about\\s*:/i,\n      /^\\s*blob\\s*:/i,\n      /^\\s*filesystem\\s*:/i,\n      /^\\s*chrome(-extension)?\\s*:/i,\n      /^\\s*moz-extension\\s*:/i,\n      /^\\s*ms-browser-extension\\s*:/i,\n    ];\n\n    if (UNSAFE_PATTERNS.some((p) => p.test(url))) {\n      return undefined;\n    }\n\n    if (!/^[a-z][a-z0-9+.-]*:/i.test(url)) {\n      return undefined;\n    }\n\n    return url;\n  }\n}\n\nexport const initConnectorString = initConnector.toString();\n","import type { ConnectEventError, ConnectEventSuccess } from '@tonconnect/protocol';\n\nexport interface TransactionPayload {\n  valid_until?: number;\n  network?: CHAIN;\n  from?: string; // https://github.com/ton-blockchain/ton-connect/blob/main/wallet-guidelines.md#multi-accounts\n  messages: TransactionPayloadMessage[];\n}\n\nexport interface TransactionPayloadMessage {\n  address: string;\n  amount: string;\n  payload?: string;\n  stateInit?: string;\n}\n\n// This and the other enums can be imported from @tonconnect/protocol. We copy the enums instead of importing because\n// importing that module increases the compiled code size significantly.\n\nexport enum CONNECT_EVENT_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  MANIFEST_NOT_FOUND_ERROR = 2,\n  MANIFEST_CONTENT_ERROR = 3,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\nexport enum SEND_TRANSACTION_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\nexport type AllErrorCodes = CONNECT_EVENT_ERROR_CODES | SEND_TRANSACTION_ERROR_CODES;\nexport type ConnectEvent = ConnectEventSuccess | ConnectEventError;\n\nexport interface ApiTonConnectProof {\n  timestamp: number;\n  domain: string;\n  payload: string;\n}\n\nexport enum CHAIN {\n  MAINNET = '-239',\n  TESTNET = '-3',\n}\n\nexport interface ApiDappRequestConfirmation {\n  accountId: string;\n  /** Base64. Shall miss when no proof is required. */\n  proofSignature?: string;\n}\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type {\n  AppRequest,\n  ConnectEvent,\n  ConnectEventError,\n  ConnectRequest,\n  RpcMethod,\n  WalletResponse,\n} from '@tonconnect/protocol';\nimport { getActions, getGlobal } from '../../../global';\n\nimport { CONNECT_EVENT_ERROR_CODES, SEND_TRANSACTION_ERROR_CODES } from '../../../api/tonConnect/types';\n\nimport { TONCONNECT_PROTOCOL_VERSION } from '../../../config';\nimport { callApi } from '../../../api';\nimport { logDebugError } from '../../logs';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../windowEnvironment';\n\nexport interface BrowserTonConnectBridgeMethods {\n  connect(protocolVersion: number, message: ConnectRequest): Promise<ConnectEvent>;\n\n  restoreConnection(): Promise<ConnectEvent>;\n\n  disconnect(): Promise<void>;\n\n  send<T extends RpcMethod>(message: AppRequest<T>): Promise<WalletResponse<T>>;\n}\n\nlet requestId = 0;\n\nexport function buildTonConnectBridgeApi(pageUrl: string): BrowserTonConnectBridgeMethods | undefined {\n  const {\n    openLoadingOverlay,\n    closeLoadingOverlay,\n  } = getActions();\n\n  const url = new URL(pageUrl).origin.toLowerCase();\n\n  return {\n    connect: async (protocolVersion, request) => {\n      try {\n        if (protocolVersion > TONCONNECT_PROTOCOL_VERSION) {\n          return buildConnectError(\n            requestId,\n            'Unsupported protocol version',\n            CONNECT_EVENT_ERROR_CODES.BAD_REQUEST_ERROR,\n          );\n        }\n        verifyConnectRequest(request);\n\n        openLoadingOverlay();\n\n        const response = await callApi(\n          'tonConnect_connect',\n          buildDappRequest(url),\n          request,\n          requestId,\n        );\n\n        closeLoadingOverlay();\n\n        requestId++;\n\n        return response;\n      } catch (err: any) {\n        logDebugError('useDAppBridge:connect', err);\n\n        if ('event' in err && 'id' in err && 'payload' in err) {\n          return err;\n        }\n\n        return buildConnectError(\n          requestId,\n          err?.message,\n          CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n        );\n      }\n    },\n\n    restoreConnection: async () => {\n      try {\n        const response = await callApi(\n          'tonConnect_reconnect',\n          buildDappRequest(url),\n          requestId,\n        );\n\n        requestId++;\n\n        return response;\n      } catch (err: any) {\n        logDebugError('useDAppBridge:reconnect', err);\n\n        if ('event' in err && 'id' in err && 'payload' in err) {\n          return err;\n        }\n\n        return buildConnectError(\n          requestId,\n          err?.message,\n          CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n        );\n      }\n    },\n\n    disconnect: async () => {\n      requestId = 0;\n\n      await callApi(\n        'tonConnect_disconnect',\n        buildDappRequest(url),\n        { id: requestId.toString(), method: 'disconnect', params: [] },\n      );\n    },\n\n    send: async <T extends RpcMethod>(request: AppRequest<T>) => {\n      requestId++;\n\n      const global = getGlobal();\n      const isConnected = global.byAccountId[global.currentAccountId!].dapps?.some((dapp) => dapp.url === url);\n\n      if (!isConnected) {\n        return {\n          error: {\n            code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_APP_ERROR,\n            message: 'Unknown app',\n          },\n          id: request.id.toString(),\n        };\n      }\n\n      const dappRequest = buildDappRequest(url);\n\n      try {\n        switch (request.method) {\n          case 'disconnect': {\n            return (await callApi(\n              'tonConnect_disconnect',\n              dappRequest,\n              request,\n            ))!;\n          }\n\n          case 'sendTransaction': {\n            const result = await callApi(\n              'tonConnect_sendTransaction',\n              dappRequest,\n              request,\n            );\n\n            if (IS_DELEGATED_BOTTOM_SHEET) {\n              void BottomSheet.applyScrollPatch();\n            }\n\n            return result!;\n          }\n\n          case 'signData': {\n            return (await callApi(\n              'tonConnect_signData',\n              dappRequest,\n              request,\n            ))!;\n          }\n\n          default: {\n            const anyRequest = request;\n\n            return {\n              id: String(anyRequest.id),\n              error: {\n                code: SEND_TRANSACTION_ERROR_CODES.BAD_REQUEST_ERROR,\n                message: `Method \"${anyRequest.method}\" is not supported`,\n              },\n            };\n          }\n        }\n      } catch (err: any) {\n        logDebugError('useDAppBridge:send', err);\n\n        return {\n          id: String(request.id),\n          error: {\n            code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR,\n            message: err?.message,\n          },\n        };\n      }\n    },\n  };\n}\n\nfunction buildConnectError(\n  id: number,\n  msg = 'Unknown error.',\n  code?: CONNECT_EVENT_ERROR_CODES,\n): ConnectEventError {\n  return {\n    event: 'connect_error',\n    id,\n    payload: {\n      code: code || CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n      message: msg,\n    },\n  };\n}\n\nfunction verifyConnectRequest(request: ConnectRequest) {\n  if (!(request && request.manifestUrl && request.items?.length)) {\n    throw new Error('Wrong request data');\n  }\n}\n\nfunction buildDappRequest(origin: string) {\n  return {\n    url: origin,\n    isUrlEnsured: true,\n    accountId: getGlobal().currentAccountId,\n  };\n}\n","import { getActions } from '../../../global';\n\nimport { openDeeplinkOrUrl } from '../../deeplink';\nimport { buildTonConnectBridgeApi } from './tonConnectBridgeApi';\n\nexport type BridgeApi = ReturnType<typeof buildBridgeApi>;\n\nexport function buildBridgeApi(pageUrl: string) {\n  const { closeBrowser } = getActions();\n\n  const tonConnectApi = buildTonConnectBridgeApi(pageUrl);\n  const prefixedTonConnectApi = tonConnectApi ? prefixApi(tonConnectApi, 'tonConnect:') : undefined;\n\n  return {\n    'window:open'({ url }: { url: string }) {\n      void openDeeplinkOrUrl(url, { isExternal: true, isFromInAppBrowser: true });\n    },\n\n    'window:close'() {\n      closeBrowser();\n    },\n\n    ...prefixedTonConnectApi,\n  };\n}\n\nfunction prefixApi<Api extends { [K in keyof Api]: AnyFunction }, Prefix extends string>(\n  api: Api, prefix: Prefix,\n): { [K in keyof Api as `${Prefix}${string & K}`]: Api[K] } {\n  const newEntries = Object.entries(api).map(([k, v]) => [`${prefix}${k}`, v]);\n\n  return Object.fromEntries(newEntries);\n}\n","import { useRef } from '../lib/teact/teact';\n\n// Allows to use state value as \"silent\" dependency in hooks (not causing updates).\n// Also useful for state values that update frequently (such as controlled input value).\nexport function useStateRef<T>(value: T) {\n  const ref = useRef<T>(value);\n  ref.current = value;\n  return ref;\n}\n","import { useCallback } from '../lib/teact/teact';\n\nimport { useStateRef } from './useStateRef';\n\nexport default function useLastCallback<T extends AnyFunction>(callback?: T) {\n  const ref = useStateRef(callback);\n\n  // No need for ref dependency\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useCallback((...args: Parameters<T>) => ref.current?.(...args), []) as T;\n}\n","export default class InAppBrowserPostMessageAdapter {\n  constructor(private inAppBrowser: Cordova['InAppBrowser']) {\n  }\n\n  addEventListener(eventName: 'message', handler: (event: any) => void) {\n    void this.inAppBrowser.addEventListener(eventName, handler);\n  }\n\n  removeEventListener(eventName: 'message', handler: (event: any) => void) {\n    void this.inAppBrowser.removeEventListener(eventName, handler);\n  }\n\n  postMessage(message: any) {\n    void this.inAppBrowser.executeScript({\n      code: `window.dispatchEvent(new MessageEvent('message', { data: ${JSON.stringify(message)} }));`,\n    });\n  }\n}\n","import type { ApiChain, ApiNft } from '../api/types';\n\nimport { EMPTY_HASH_VALUE, MTW_CARDS_BASE_URL } from '../config';\nimport { base64ToHex } from './base64toHex';\nimport { logDebugError } from './logs';\n\n// Regexp from https://stackoverflow.com/a/3809435\nconst URL_REGEX = /[-a-z0-9@:%._+~#=]{1,256}\\.[a-z0-9()]{1,6}\\b([-a-z0-9()@:%_+.~#?&/=]*)/gi;\nconst VALID_PROTOCOLS = new Set(['http:', 'https:']);\n\n// The configuration does not contain data for NFT addresses, they must be configured separately\nconst EXPLORER_CONFIGURATIONS = {\n  ton: {\n    name: 'Tonscan',\n    base: {\n      mainnet: 'https://tonscan.org/',\n      testnet: 'https://testnet.tonscan.org/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}jetton/{address}',\n    transaction: '{base}tx/{hash}',\n  },\n  tron: {\n    name: 'Tronscan',\n    base: {\n      mainnet: 'https://tronscan.org/#/',\n      testnet: 'https://shasta.tronscan.org/#/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}token20/{address}',\n    transaction: '{base}transaction/{hash}',\n  },\n};\n\nexport function isValidUrl(url: string, validProtocols = VALID_PROTOCOLS) {\n  try {\n    const match = url.match(URL_REGEX);\n    if (!match) return false;\n\n    const urlObject = new URL(url);\n\n    return validProtocols.has(urlObject.protocol);\n  } catch (e) {\n    logDebugError('isValidUrl', e);\n    return false;\n  }\n}\n\nexport function getHostnameFromUrl(url: string) {\n  try {\n    const urlObject = new URL(url);\n\n    return urlObject.hostname;\n  } catch (e) {\n    logDebugError('getHostnameFromUrl', e);\n    return url;\n  }\n}\n\nexport function getExplorerName(chain: ApiChain) {\n  return EXPLORER_CONFIGURATIONS[chain].name;\n}\n\nfunction getExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].base[isTestnet ? 'testnet' : 'mainnet'];\n}\n\nfunction getTokenExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].explorer.replace('{base}', getExplorerBaseUrl(chain, isTestnet));\n}\n\nexport function getExplorerTransactionUrl(\n  chain: ApiChain,\n  transactionHash: string | undefined,\n  isTestnet?: boolean,\n) {\n  if (!transactionHash || transactionHash === EMPTY_HASH_VALUE) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].transaction\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{hash}', chain === 'ton' ? base64ToHex(transactionHash) : transactionHash);\n}\n\nexport function getExplorerAddressUrl(chain: ApiChain, address?: string, isTestnet?: boolean) {\n  if (!address) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].address\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{address}', address);\n}\n\nexport function getExplorerNftCollectionUrl(nftCollectionAddress?: string, isTestnet?: boolean) {\n  if (!nftCollectionAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftCollectionAddress}`;\n}\n\nexport function getExplorerNftUrl(nftAddress?: string, isTestnet?: boolean) {\n  if (!nftAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftAddress}`;\n}\n\nexport function getExplorerTokenUrl(chain: ApiChain, slug?: string, address?: string, isTestnet?: boolean) {\n  if (!slug && !address) return undefined;\n\n  return address\n    ? getTokenExplorerBaseUrl(chain, isTestnet).replace('{address}', address)\n    : `https://coinmarketcap.com/currencies/${slug}/`;\n}\n\nexport function isTelegramUrl(url: string) {\n  return url.startsWith('https://t.me/');\n}\n\nexport function getCardNftImageUrl(nft: ApiNft): string | undefined {\n  return `${MTW_CARDS_BASE_URL}${nft.metadata.mtwCardId}.webp`;\n}\n","export function base64ToHex(base64: string): string {\n  const buffer = Buffer.from(base64, 'base64');\n  return buffer.toString('hex');\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport { compact } from '../../util/iteratees';\n\nexport type TextFilter = ('simple_markdown' | 'br');\n\nconst SIMPLE_MARKDOWN_REGEX = /(\\*\\*|__).+?\\1/g;\n\nexport default function renderText(\n  part: TeactNode,\n  filters: Array<TextFilter> = ['simple_markdown', 'br'],\n): TeactNode[] {\n  if (typeof part !== 'string') {\n    return [part];\n  }\n\n  return compact(filters.reduce((text, filter) => {\n    switch (filter) {\n      case 'simple_markdown':\n        return replaceSimpleMarkdown(text);\n\n      case 'br':\n        return addLineBreaks(text);\n    }\n\n    return text;\n  }, [part] as TeactNode[]));\n}\n\nfunction replaceSimpleMarkdown(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce<TeactNode[]>((result, part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const parts = part.split(SIMPLE_MARKDOWN_REGEX);\n    const entities: string[] = part.match(SIMPLE_MARKDOWN_REGEX) || [];\n    result.push(parts[0]);\n\n    return entities.reduce((entityResult: TeactNode[], entity, i) => {\n      entityResult.push(\n        entity.startsWith('**')\n          ? <b>{entity.replace(/\\*\\*/g, '')}</b>\n          : <i>{entity.replace(/__/g, '')}</i>,\n      );\n\n      const index = i * 2 + 2;\n      if (parts[index]) {\n        entityResult.push(parts[index]);\n      }\n\n      return entityResult;\n    }, result);\n  }, []);\n}\n\nfunction addLineBreaks(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce((result: TeactNode[], part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const splittenParts = part\n      .split(/\\r\\n|\\r|\\n/g)\n      .reduce((parts: TeactNode[], line: string, i, source) => {\n        // This adds non-breaking space if line was indented with spaces, to preserve the indentation\n        const trimmedLine = line.trimStart();\n        const indentLength = line.length - trimmedLine.length;\n        parts.push(String.fromCharCode(160).repeat(indentLength) + trimmedLine);\n\n        if (i !== source.length - 1) {\n          parts.push(<br />);\n        }\n\n        return parts;\n      }, []);\n\n    return [...result, ...splittenParts];\n  }, []);\n}\n","import { ELECTRON_HOST_URL, IS_PACKAGED_ELECTRON } from '../config';\n\nconst cacheApi = self.caches;\n\nexport async function fetch(cacheName: string, key: string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const cache = await cacheApi.open(cacheName);\n    const response = await cache.match(request);\n    if (!response) {\n      return undefined;\n    }\n\n    return await response.json();\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function save(cacheName: string, key: string, data: AnyLiteral | Blob | ArrayBuffer | string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    const cacheData = typeof data === 'string' || data instanceof Blob || data instanceof ArrayBuffer\n      ? data\n      : JSON.stringify(data);\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const response = new Response(cacheData);\n\n    // To avoid the error \"Request scheme 'chrome-extension' is unsupported\"\n    // https://github.com/iamshaunjp/pwa-tutorial/issues/1\n    if (request instanceof Request && request.url.indexOf('chrome-extension') === 0) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.put(request, response);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function remove(cacheName: string, key: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.delete(key);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function clear(cacheName: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    return await cacheApi.delete(cacheName);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n","import type { ApiBaseCurrency, ApiTokenWithPrice } from '../api/types';\n\nimport { CURRENCIES, DEFAULT_PRICE_CURRENCY, WHOLE_PART_DELIMITER } from '../config';\nimport { Big } from '../lib/big.js';\nimport { bigintAbs } from './bigint';\nimport { toDecimal } from './decimals';\nimport withCache from './withCache';\n\nconst SHORT_SYMBOLS = new Set(\n  Object.values(CURRENCIES)\n    .map((currency) => currency.shortSymbol)\n    .filter(Boolean),\n);\n\nexport const formatNumber = withCache((\n  value: number | Big | string,\n  fractionDigits = 2,\n  noTruncate?: boolean,\n) => {\n  let bigValue = new Big(value);\n\n  if (bigValue.eq(0)) return '0';\n\n  const isNegative = bigValue.lt(0);\n  if (isNegative) bigValue = bigValue.neg();\n\n  const method = bigValue.lt(1) ? 'toPrecision' : 'round';\n  let formatted = bigValue[method](fractionDigits, noTruncate ? Big.roundHalfUp : Big.roundDown)\n    .toString()\n    // Remove extra zeros after rounding to the specified accuracy\n    .replace(/(\\.\\d*?)0+$/, '$1')\n    .replace(/\\.$/, '');\n\n  formatted = applyThousandsGrouping(formatted);\n\n  if (isNegative) formatted = `-${formatted}`;\n\n  return formatted;\n});\n\nexport function formatCurrency(\n  value: number | string | Big,\n  currency: string,\n  fractionDigits?: number,\n  noTruncate?: boolean,\n) {\n  const formatted = formatNumber(value, fractionDigits, noTruncate);\n  return addCurrency(formatted, currency);\n}\n\nexport function formatCurrencyExtended(\n  value: number | string, currency: string, noSign = false, fractionDigits?: number, isZeroNegative?: boolean,\n) {\n  const numericValue = Number(value);\n  const isNegative = numericValue === 0 ? isZeroNegative : (numericValue < 0);\n  const prefix = !noSign ? (!isNegative ? '+\\u202F' : '\\u2212\\u202F') : '';\n\n  value = value.toString();\n  return prefix + formatCurrency(noSign ? value : value.replace(/^-/, ''), currency, fractionDigits);\n}\n\nexport function formatCurrencySimple(value: number | bigint | string, currency: string, decimals?: number) {\n  if (typeof value !== 'string') {\n    value = toDecimal(value, decimals);\n  }\n  return addCurrency(value, currency);\n}\n\nfunction addCurrency(value: number | string, currency: string) {\n  return SHORT_SYMBOLS.has(currency)\n    ? `${currency}${value}`.replace(`${currency}-`, `-${currency}`)\n    : `${value} ${currency}`;\n}\n\nexport function getShortCurrencySymbol(currency?: ApiBaseCurrency) {\n  if (!currency) currency = DEFAULT_PRICE_CURRENCY;\n  return CURRENCIES[currency].shortSymbol ?? currency;\n}\n\nfunction applyThousandsGrouping(str: string) {\n  const [wholePart, fractionPart = ''] = str.split('.');\n  const groupedWhole = wholePart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return [groupedWhole, fractionPart].filter(Boolean).join('.');\n}\n\n/** Formats the base currency amount of a transaction */\nexport function formatBaseCurrencyAmount(\n  amount: bigint,\n  baseCurrency: ApiBaseCurrency | undefined,\n  token: Pick<ApiTokenWithPrice, 'decimals' | 'price'>,\n) {\n  const baseCurrencyAmount = Big(toDecimal(bigintAbs(amount), token.decimals, true)).mul(token.price);\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  // The rounding logic should match the original amount rounding logic implemented by formatCurrencyExtended.\n  // It's for cases when the base currency matches the transaction currency.\n  return formatCurrency(baseCurrencyAmount, shortBaseSymbol);\n}\n","import type { TeactNode } from '../lib/teact/teact';\n\nimport type { LangCode, LangPack, LangString } from '../global/types';\n\nimport { IS_PACKAGED_ELECTRON, LANG_CACHE_NAME, LANG_LIST } from '../config';\nimport renderText from '../global/helpers/renderText';\n// @ts-ignore this file is autogenerated\nimport defaultLangPackJson from '../i18n/en.json';\nimport * as cacheApi from './cacheApi';\nimport { createCallbackManager } from './callbacks';\nimport { formatNumber } from './formatNumber';\nimport { escapeStringRegexp } from './regex';\nimport { DEFAULT_LANG_CODE } from './windowEnvironment';\n\nconst defaultLangPack: LangPack = defaultLangPackJson;\n\nexport interface LangFn {\n  (key: string): string;\n\n  (key: string, value: any, format?: 'i', pluralValue?: number): string | TeactNode[];\n\n  isRtl?: boolean;\n  code?: LangCode;\n  langName?: string;\n}\n\nconst {\n  addCallback,\n  removeCallback,\n  runCallbacks,\n} = createCallbackManager();\n\nexport { addCallback, removeCallback };\n\nconst SUBSTITUTION_REGEX = /%\\d?\\$?[sdf@]/g;\nconst PLURAL_OPTIONS = ['value', 'zeroValue', 'oneValue', 'twoValue', 'fewValue', 'manyValue', 'otherValue'] as const;\n// Some rules edited from https://github.com/eemeli/make-plural/blob/master/packages/plurals/cardinals.js\n// de - zeroValue, oneValue, otherValue\n// en - zeroValue, oneValue, otherValue\n// es - zeroValue, oneValue, otherValue\n// pl - zeroValue, oneValue, fewValue, manyValue\n// ru - zeroValue, oneValue, fewValue, manyValue\n// th - zeroValue, otherValue\n// tr - zeroValue, oneValue, otherValue\n// uk - zeroValue, oneValue, fewValue, manyValue\n// zh-Hans - zeroValue, otherValue\n// zh-Hant - zeroValue, otherValue\nconst PLURAL_RULES = {\n  /* eslint-disable @stylistic/max-len */\n  de: (n: number) => (n === 0 ? 1 : (n !== 1 ? 6 : 2)),\n  en: (n: number) => (n === 0 ? 1 : (n !== 1 ? 6 : 2)),\n  es: (n: number) => (n === 0 ? 1 : (n !== 1 ? 6 : 2)),\n  pl: (n: number) => (n === 0 ? 1 : (n === 1 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5)),\n  ru: (n: number) => (n === 0 ? 1 : (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5)),\n  th: (n: number) => (n === 0 ? 1 : 6),\n  tr: (n: number) => (n === 0 ? 1 : (n > 1 ? 6 : 2)),\n  uk: (n: number) => (n === 0 ? 1 : (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5)),\n  'zh-Hans': (n: number) => (n === 0 ? 1 : 6),\n  'zh-Hant': (n: number) => (n === 0 ? 1 : 6),\n  /* eslint-enable @stylistic/max-len */\n};\nconst cache = new Map<string, string>();\nlet langPack: LangPack | undefined;\nlet currentLangCode: string | undefined;\n\nfunction createLangFn() {\n  return ((key: string, value?: any, format?: 'i', pluralValue?: number) => {\n    if (value !== undefined && (typeof value !== 'object' || Array.isArray(value))) {\n      const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n      const cached = cache.get(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`);\n      if (cached) {\n        return cached;\n      }\n    }\n\n    if (!langPack && !defaultLangPack) {\n      return key;\n    }\n\n    const langString = (langPack?.[key]) || (defaultLangPack?.[key]) || key;\n\n    return processTranslation(langString, key, value, format, pluralValue);\n  }) as LangFn;\n}\n\nexport let getTranslation: LangFn = createLangFn();\n\nexport async function setLanguage(langCode: LangCode, callback?: NoneToVoidFunction) {\n  if (langPack && langCode === currentLangCode) {\n    if (callback) {\n      callback();\n    }\n\n    return;\n  }\n\n  let newLangPack = await cacheApi.fetch(LANG_CACHE_NAME, langCode);\n\n  if (!newLangPack) {\n    newLangPack = await fetchRemote(langCode);\n    if (!newLangPack) {\n      return;\n    }\n  }\n\n  cache.clear();\n\n  currentLangCode = langCode;\n  langPack = newLangPack;\n  document.documentElement.lang = langCode;\n\n  const langInfo = LANG_LIST?.find((l) => l.langCode === langCode);\n  getTranslation = createLangFn();\n  getTranslation.isRtl = Boolean(langInfo?.rtl);\n  getTranslation.code = langCode.replace('-raw', '') as LangCode;\n  getTranslation.langName = langInfo?.nativeName;\n\n  if (callback) {\n    callback();\n  }\n\n  runCallbacks();\n}\n\nexport function clearPreviousLangpacks() {\n  const langCachePrefix = LANG_CACHE_NAME.replace(/\\d+$/, '');\n  const langCacheVersion = Number((LANG_CACHE_NAME.match(/\\d+$/) || [0])[0]);\n  for (let i = 0; i < langCacheVersion; i++) {\n    void cacheApi.clear(`${langCachePrefix}${i === 0 ? '' : i}`);\n  }\n}\n\nasync function fetchRemote(langCode: string): Promise<LangPack | undefined> {\n  if (langCode === DEFAULT_LANG_CODE) {\n    return defaultLangPack;\n  }\n\n  const response = await fetch(`${IS_PACKAGED_ELECTRON ? '.' : '..'}/i18n/${langCode}.json`);\n\n  if (!response.ok) {\n    const message = `An error has occured: ${response.status}`;\n    throw new Error(message);\n  }\n\n  const remote = await response.json();\n\n  if (remote) {\n    await cacheApi.save(LANG_CACHE_NAME, langCode, remote);\n    return remote;\n  }\n\n  return undefined;\n}\n\nfunction getPluralOption(amount: number) {\n  const langCode = currentLangCode || DEFAULT_LANG_CODE;\n  const optionIndex = PLURAL_RULES[langCode as keyof typeof PLURAL_RULES]\n    ? PLURAL_RULES[langCode as keyof typeof PLURAL_RULES](amount)\n    : 0;\n\n  return PLURAL_OPTIONS[optionIndex];\n}\n\nfunction processTemplate(template: string, value: any) {\n  value = Array.isArray(value) ? value : [value];\n  const translationSlices = template.split(SUBSTITUTION_REGEX);\n  const initialValue = translationSlices.shift();\n\n  return translationSlices.reduce((result, str, index) => {\n    return `${result}${String(value[index] ?? '')}${str}`;\n  }, initialValue || '');\n}\n\n// Export a function for testing purposes\nexport function processTemplateJsx(template: string, value: Record<string, TeactNode>): TeactNode[] {\n  // Replace all primitive values (strings and numbers)\n  let processedTemplate = template;\n\n  Object.entries(value).forEach(([key, val]) => {\n    if (typeof val === 'string' || typeof val === 'number') {\n      processedTemplate = processedTemplate.replace(\n        new RegExp(`%${escapeStringRegexp(key)}%`, 'g'),\n        String(val),\n      );\n    }\n  });\n\n  // Check if there are any components\n  const hasComponents = Object.values(value).some((val) =>\n    typeof val !== 'string' && typeof val !== 'number',\n  );\n\n  // If no components, just process through renderText\n  if (!hasComponents) {\n    return renderText(processedTemplate);\n  }\n\n  // If there are components, process in parts\n  const parts = processedTemplate.split(/%(\\w+)%/);\n  const result: TeactNode[] = [];\n\n  for (let i = 0; i < parts.length; i++) {\n    if (i % 2 === 0) {\n      // Text part\n      if (parts[i]) {\n        result.push(...renderText(parts[i]));\n      }\n    } else {\n      // Token (between % symbols)\n      const tokenValue = value[parts[i]];\n      if (tokenValue !== undefined) {\n        result.push(tokenValue);\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction processTranslation(\n  langString: LangString | string | undefined, key: string, value?: any, format?: 'i', pluralValue?: number,\n) {\n  const preferredPluralOption = typeof value === 'number' || pluralValue !== undefined\n    ? getPluralOption(pluralValue ?? value)\n    : 'value';\n\n  const template = typeof langString === 'string'\n    ? langString\n    : preferredPluralOption === 'value'\n      // Support cached older `langString` interface\n      ? (typeof langString === 'object' ? (langString as any).value : langString)\n      : typeof langString === 'object'\n        ? langString?.[preferredPluralOption] || langString.otherValue\n        : undefined;\n\n  if (!template || !template.trim() || value === undefined) {\n    return template;\n  }\n\n  const formattedValue = format === 'i' ? formatNumber(value) : value;\n  const result = typeof value === 'object' && !Array.isArray(value)\n    ? processTemplateJsx(template, formattedValue)\n    : processTemplate(template, formattedValue);\n  if (typeof value !== 'object' && typeof result === 'string') {\n    const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n    cache.set(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`, result);\n  }\n\n  return result;\n}\n","// Source: https://github.com/sindresorhus/escape-string-regexp\n\nexport function escapeStringRegexp(string: string) {\n  // Escape characters with special meaning either inside or outside character sets.\n  // Use a simple backslash escape when its always valid, and a `\\xnn` escape when the simpler form would be disallowed by Unicode patterns stricter grammar.\n  return string\n    .replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')\n    .replace(/-/g, '\\\\x2d');\n}\n","import * as langProvider from '../util/langProvider';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nexport type LangFn = langProvider.LangFn;\n\nconst useLang = (): LangFn => {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    return langProvider.addCallback(forceUpdate);\n  });\n\n  return langProvider.getTranslation;\n};\n\nexport default useLang;\n","type Parts = (string | false | undefined)[];\ntype PartsWithGlobals = (string | false | undefined | string[])[];\ntype ClassNameBuilder =\n  ((elementName: string, ...modifiers: PartsWithGlobals) => string)\n  & Record<string, string>;\n\nexport default function buildClassName(...parts: Parts) {\n  return parts.filter(Boolean).join(' ');\n}\n\nexport function createClassNameBuilder(componentName: string) {\n  return ((elementName: string, ...modifiers: PartsWithGlobals) => {\n    const baseName = elementName === '&' ? componentName : `${componentName}__${elementName}`;\n\n    return modifiers.reduce<string[]>((acc, modifier) => {\n      if (modifier) {\n        // A bit hacky way to pass global class names\n        if (Array.isArray(modifier)) {\n          acc.push(...modifier);\n        } else {\n          acc.push(`${baseName}--${modifier}`);\n        }\n      }\n\n      return acc;\n    }, [baseName]).join(' ');\n  }) as ClassNameBuilder;\n}\n","export const clamp = (num: number, min: number, max: number) => (Math.min(max, Math.max(min, num)));\nexport const isBetween = (num: number, min: number, max: number) => (num >= min && num <= max);\nexport const round = (num: number, decimals: number = 0) => Math.round(num * 10 ** decimals) / 10 ** decimals;\nexport const lerp = (start: number, end: number, interpolationRatio: number) => {\n  return (1 - interpolationRatio) * start + interpolationRatio * end;\n};\n\n// Fractional values cause blurry text & canvas. Round to even to keep whole numbers while centering\nexport function roundToNearestEven(value: number) {\n  return Math.round(value / 2) * 2;\n}\n","import { forceMutation } from '../lib/fasterdom/stricterdom';\nimport { Lethargy } from './lethargy';\nimport { clamp, round } from './math';\nimport { debounce } from './schedulers';\nimport { IS_IOS, IS_WINDOWS } from './windowEnvironment';\nimport windowSize from './windowSize';\n\nexport enum SwipeDirection {\n  Up,\n  Down,\n  Left,\n  Right,\n}\n\nexport interface MoveOffsets {\n  dragOffsetX: number;\n  dragOffsetY: number;\n}\n\ninterface CaptureOptions {\n  onCapture?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onRelease?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onDrag?: (\n    e: MouseEvent | TouchEvent | WheelEvent,\n    captureEvent: MouseEvent | TouchEvent | WheelEvent,\n    offsets: MoveOffsets,\n    cancelDrag?: (x: boolean, y: boolean) => void,\n  ) => void;\n  onSwipe?: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean;\n  onZoom?: (e: TouchEvent | WheelEvent, params: {\n    // Absolute zoom level\n    zoom?: number;\n    // Relative zoom factor\n    zoomFactor?: number;\n\n    // center coordinate of the initial pinch\n    initialCenterX: number;\n    initialCenterY: number;\n\n    // offset of the pinch center (current from initial)\n    dragOffsetX: number;\n    dragOffsetY: number;\n\n    // center coordinate of the current pinch\n    currentCenterX: number;\n    currentCenterY: number;\n  }) => void;\n  onClick?: (e: MouseEvent | TouchEvent) => void;\n  onDoubleClick?: (e: MouseEvent | RealTouchEvent | WheelEvent, params: { centerX: number; centerY: number }) => void;\n  excludedClosestSelector?: string;\n  includedClosestSelector?: string;\n  selectorToPreventScroll?: string;\n  withNativeDrag?: boolean;\n  maxZoom?: number;\n  minZoom?: number;\n  doubleTapZoom?: number;\n  initialZoom?: number;\n  isNotPassive?: boolean;\n  withCursor?: boolean;\n  swipeThreshold?: number;\n  withWheelDrag?: boolean;\n}\n\n// https://stackoverflow.com/questions/11287877/how-can-i-get-e-offsetx-on-mobile-ipad\n// Android does not have this value, and iOS has it but as read-only\nexport interface RealTouchEvent extends TouchEvent {\n  pageX?: number;\n  pageY?: number;\n}\n\ntype TSwipeAxis =\n  'x'\n  | 'y'\n  | undefined;\n\nexport const IOS_SCREEN_EDGE_THRESHOLD = 20;\nexport const SWIPE_DIRECTION_THRESHOLD = 10;\nexport const SWIPE_DIRECTION_TOLERANCE = 1.5;\n\nconst MOVE_THRESHOLD = 15;\nconst SWIPE_THRESHOLD_DEFAULT = 20;\nconst RELEASE_WHEEL_ZOOM_DELAY = 150;\nconst RELEASE_WHEEL_DRAG_DELAY = 150;\n\nfunction getDistance(a: Touch, b?: Touch) {\n  if (!b) return 0;\n  return Math.hypot((b.pageX - a.pageX), (b.pageY - a.pageY));\n}\n\nfunction getTouchCenter(a: Touch, b: Touch) {\n  return {\n    x: (a.pageX + b.pageX) / 2,\n    y: (a.pageY + b.pageY) / 2,\n  };\n}\n\nlet lastClickTime = 0;\nconst lethargy = new Lethargy({\n  stability: 5,\n  sensitivity: 25,\n  tolerance: IS_WINDOWS ? 1 : 0.6, // Windows `scrollDelta` does not die down to 0\n  delay: 150,\n});\n\nexport function captureEvents(element: HTMLElement, options: CaptureOptions) {\n  let captureEvent: MouseEvent | RealTouchEvent | WheelEvent | undefined;\n  let hasMoved = false;\n  let hasSwiped = false;\n  let isZooming = false;\n  let initialDistance = 0;\n  let wheelZoom = options.initialZoom ?? 1;\n  let initialDragOffset = {\n    x: 0,\n    y: 0,\n  };\n  let isDragCanceled = {\n    x: false,\n    y: false,\n  };\n  const currentWindowSize = windowSize.get();\n  let initialTouchCenter = {\n    x: currentWindowSize.width / 2,\n    y: currentWindowSize.height / 2,\n  };\n  let initialSwipeAxis: TSwipeAxis | undefined;\n  const minZoom = options.minZoom ?? 1;\n  const maxZoom = options.maxZoom ?? 4;\n\n  function onCapture(e: MouseEvent | RealTouchEvent) {\n    const target = e.target as HTMLElement;\n    const {\n      excludedClosestSelector,\n      includedClosestSelector,\n      withNativeDrag,\n      withCursor,\n      onDrag,\n    } = options;\n\n    if (element !== target && !element.contains(target)) {\n      return;\n    }\n\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {\n      return;\n    }\n\n    if (\n      (excludedClosestSelector && (target.matches(excludedClosestSelector) || target.closest(excludedClosestSelector)))\n      || (\n        includedClosestSelector && !(target.matches(includedClosestSelector) || target.closest(includedClosestSelector))\n      )\n    ) {\n      return;\n    }\n\n    captureEvent = e;\n\n    if (e.type === 'mousedown') {\n      if (!withNativeDrag && onDrag) {\n        e.preventDefault();\n      }\n\n      document.addEventListener('mousemove', onMove);\n      document.addEventListener('mouseup', onRelease);\n    } else if (e.type === 'touchstart') {\n      // We need to always listen on `touchstart` target:\n      // https://stackoverflow.com/questions/33298828/touch-move-event-dont-fire-after-touch-start-target-is-removed\n      target.addEventListener('touchmove', onMove, { passive: true });\n      target.addEventListener('touchend', onRelease, { passive: true });\n      target.addEventListener('touchcancel', onRelease, { passive: true });\n\n      if ('touches' in e) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (e.touches.length === 2) {\n          initialDistance = getDistance(e.touches[0], e.touches[1]);\n          initialTouchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n        }\n      }\n    }\n\n    if (withCursor) {\n      document.body.classList.add('cursor-grabbing');\n    }\n\n    options.onCapture?.(e);\n  }\n\n  function onRelease(e?: MouseEvent | TouchEvent) {\n    if (captureEvent) {\n      if (options.withCursor) {\n        document.body.classList.remove('cursor-grabbing');\n      }\n\n      document.removeEventListener('mouseup', onRelease);\n      document.removeEventListener('mousemove', onMove);\n      (captureEvent.target as HTMLElement).removeEventListener('touchcancel', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchend', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchmove', onMove);\n\n      if (IS_IOS && options.selectorToPreventScroll) {\n        const nodes = Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll));\n\n        forceMutation(() => {\n          nodes.forEach((scrollable) => {\n            scrollable.style.overflow = '';\n          });\n        }, nodes);\n      }\n\n      if (e) {\n        if (hasMoved) {\n          if (options.onRelease) {\n            options.onRelease(e);\n          }\n        } else if (e.type === 'mouseup') {\n          if (options.onDoubleClick && Date.now() - lastClickTime < 300) {\n            options.onDoubleClick(e, {\n              centerX: captureEvent.pageX!,\n              centerY: captureEvent.pageY!,\n            });\n          } else if (options.onClick && (!('button' in e) || e.button === 0)) {\n            options.onClick(e);\n          }\n          lastClickTime = Date.now();\n        }\n      }\n    }\n\n    hasMoved = false;\n    hasSwiped = false;\n    isZooming = false;\n    initialDistance = 0;\n    wheelZoom = clamp(wheelZoom, minZoom, maxZoom);\n    initialSwipeAxis = undefined;\n    initialDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    isDragCanceled = {\n      x: false,\n      y: false,\n    };\n    const newWindowSize = windowSize.get();\n    initialTouchCenter = {\n      x: newWindowSize.width / 2,\n      y: newWindowSize.height / 2,\n    };\n    captureEvent = undefined;\n  }\n\n  function onMove(e: MouseEvent | RealTouchEvent) {\n    if (captureEvent) {\n      if (e.type === 'touchmove' && ('touches' in e)) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (options.onZoom && initialDistance > 0 && e.touches.length === 2) {\n          const endDistance = getDistance(e.touches[0], e.touches[1]);\n          const touchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n          const dragOffsetX = touchCenter.x - initialTouchCenter.x;\n          const dragOffsetY = touchCenter.y - initialTouchCenter.y;\n          const zoomFactor = endDistance / initialDistance;\n          options.onZoom(e, {\n            zoomFactor,\n            initialCenterX: initialTouchCenter.x,\n            initialCenterY: initialTouchCenter.y,\n            dragOffsetX,\n            dragOffsetY,\n            currentCenterX: touchCenter.x,\n            currentCenterY: touchCenter.y,\n          });\n          if (zoomFactor !== 1) hasMoved = true;\n        }\n      }\n\n      const dragOffsetX = e.pageX! - captureEvent.pageX!;\n      const dragOffsetY = e.pageY! - captureEvent.pageY!;\n\n      if (Math.abs(dragOffsetX) >= MOVE_THRESHOLD || Math.abs(dragOffsetY) >= MOVE_THRESHOLD) {\n        hasMoved = true;\n      }\n\n      let shouldPreventScroll = false;\n\n      if (options.onDrag) {\n        options.onDrag(e, captureEvent, {\n          dragOffsetX,\n          dragOffsetY,\n        });\n        shouldPreventScroll = true;\n      }\n\n      if (options.onSwipe && !hasSwiped) {\n        hasSwiped = onSwipe(e, dragOffsetX, dragOffsetY);\n        shouldPreventScroll = hasSwiped;\n      }\n\n      if (IS_IOS && shouldPreventScroll && options.selectorToPreventScroll) {\n        const nodes = Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll));\n\n        forceMutation(() => {\n          nodes.forEach((scrollable) => {\n            scrollable.style.overflow = 'hidden';\n          });\n        }, nodes);\n      }\n    }\n  }\n\n  function onSwipe(e: MouseEvent | RealTouchEvent, dragOffsetX: number, dragOffsetY: number) {\n    // Avoid conflicts with swipe-to-back gestures\n    if (IS_IOS) {\n      const x = 'touches' in e\n        ? e.touches[0].pageX // RealTouchEvent\n        : e.pageX; // Event on iPad or iPhone with connected mouse\n      if (x <= IOS_SCREEN_EDGE_THRESHOLD || x >= windowSize.get().width - IOS_SCREEN_EDGE_THRESHOLD) {\n        return false;\n      }\n    }\n\n    const xAbs = Math.abs(dragOffsetX);\n    const yAbs = Math.abs(dragOffsetY);\n    const threshold = options.swipeThreshold ?? SWIPE_THRESHOLD_DEFAULT;\n\n    let axis: TSwipeAxis | undefined;\n    if (xAbs > yAbs && xAbs >= threshold) {\n      axis = 'x';\n    } else if (yAbs > xAbs && yAbs >= threshold) {\n      axis = 'y';\n    }\n\n    if (!axis) {\n      return false;\n    }\n\n    if (!initialSwipeAxis) {\n      initialSwipeAxis = axis;\n    } else if (initialSwipeAxis !== axis) {\n      // Prevent horizontal swipe after vertical to prioritize scroll\n      return false;\n    }\n\n    return processSwipe(e, axis, dragOffsetX, dragOffsetY, options.onSwipe!);\n  }\n\n  const releaseWheelDrag = debounce(onRelease, RELEASE_WHEEL_DRAG_DELAY, false);\n  const releaseWheelZoom = debounce(onRelease, RELEASE_WHEEL_ZOOM_DELAY, false);\n\n  function onWheelCapture(e: WheelEvent) {\n    if (hasMoved) return;\n    onCapture(e);\n    hasMoved = true;\n    initialTouchCenter = { x: e.x, y: e.y };\n  }\n\n  function onWheelZoom(e: WheelEvent) {\n    if (!options.onZoom) return;\n    onWheelCapture(e);\n    const dragOffsetX = e.x - initialTouchCenter.x;\n    const dragOffsetY = e.y - initialTouchCenter.y;\n    const delta = clamp(e.deltaY, -25, 25);\n    wheelZoom -= delta * 0.01;\n    wheelZoom = clamp(wheelZoom, minZoom * 0.5, maxZoom * 3);\n    isZooming = true;\n    options.onZoom(e, {\n      zoom: round(wheelZoom, 2),\n      initialCenterX: initialTouchCenter.x,\n      initialCenterY: initialTouchCenter.y,\n      dragOffsetX,\n      dragOffsetY,\n      currentCenterX: e.x,\n      currentCenterY: e.y,\n    });\n    releaseWheelZoom(e);\n  }\n\n  function onWheelDrag(e: WheelEvent) {\n    if (!options.onDrag) return;\n    onWheelCapture(e);\n    // Ignore wheel inertia if drag is canceled in this direction\n    if (!isDragCanceled.x || Math.sign(initialDragOffset.x) === Math.sign(e.deltaX)) {\n      initialDragOffset.x -= e.deltaX;\n    }\n    if (!isDragCanceled.y || Math.sign(initialDragOffset.y) === Math.sign(e.deltaY)) {\n      initialDragOffset.y -= e.deltaY;\n    }\n    const { x, y } = initialDragOffset;\n    options.onDrag(e, captureEvent!, {\n      dragOffsetX: x,\n      dragOffsetY: y,\n    }, (dx, dy) => {\n      isDragCanceled = { x: dx, y: dy };\n    });\n    releaseWheelDrag(e);\n  }\n\n  function onWheel(e: WheelEvent) {\n    if (!options.onZoom && !options.onDrag) return;\n    if (options.excludedClosestSelector && (\n      (e.target as HTMLElement).matches(options.excludedClosestSelector)\n      || (e.target as HTMLElement).closest(options.excludedClosestSelector)\n    )) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    const { doubleTapZoom = 3 } = options;\n    if (options.onDoubleClick && Object.is(e.deltaX, -0) && Object.is(e.deltaY, -0) && e.ctrlKey) {\n      onWheelCapture(e);\n      wheelZoom = wheelZoom > 1 ? 1 : doubleTapZoom;\n      options.onDoubleClick(e, { centerX: e.pageX, centerY: e.pageY });\n      hasMoved = false;\n      return;\n    }\n    const metaKeyPressed = e.metaKey || e.ctrlKey || e.shiftKey;\n    if (metaKeyPressed) {\n      onWheelZoom(e);\n    }\n    if (!metaKeyPressed && !isZooming) {\n      // Check if this event produced by user scroll and not by inertia\n      const isUserEvent = lethargy.check(e);\n      if (wheelZoom !== 1 || isUserEvent) {\n        onWheelDrag(e);\n      }\n    }\n  }\n\n  if (options.withWheelDrag) {\n    element.addEventListener('wheel', onWheel);\n  }\n\n  element.addEventListener('mousedown', onCapture);\n  document.body.addEventListener('touchstart', onCapture, { passive: !options.isNotPassive });\n\n  return () => {\n    onRelease();\n    document.body.removeEventListener('touchstart', onCapture);\n    element.removeEventListener('mousedown', onCapture);\n    element.removeEventListener('wheel', onWheel);\n  };\n}\n\nfunction processSwipe(\n  e: Event,\n  currentSwipeAxis: TSwipeAxis,\n  dragOffsetX: number,\n  dragOffsetY: number,\n  onSwipe: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean,\n) {\n  const offsets = { dragOffsetX, dragOffsetY };\n\n  if (currentSwipeAxis === 'x') {\n    if (dragOffsetX < 0) {\n      return onSwipe(e, SwipeDirection.Left, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Right, offsets);\n    }\n  } else if (currentSwipeAxis === 'y') {\n    if (dragOffsetY < 0) {\n      return onSwipe(e, SwipeDirection.Up, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Down, offsets);\n    }\n  }\n\n  return false;\n}\n","/**\n * Lethargy help distinguish between scroll events initiated by the user, and those by inertial scrolling.\n * Lethargy does not have external dependencies.\n *\n * @param stability - Specifies the length of the rolling average.\n * In effect, the larger the value, the smoother the curve will be.\n * This attempts to prevent anomalies from firing 'real' events. Valid values are all positive integers,\n * but in most cases, you would need to stay between 5 and around 30.\n *\n * @param sensitivity - Specifies the minimum value for wheelDelta for it to register as a valid scroll event.\n * Because the tail of the curve have low wheelDelta values,\n * this will stop them from registering as valid scroll events.\n * The unofficial standard wheelDelta is 120, so valid values are positive integers below 120.\n *\n * @param tolerance - Prevent small fluctuations from affecting results.\n * Valid values are decimals from 0, but should ideally be between 0.05 and 0.3.\n *\n * Based on https://github.com/d4nyll/lethargy\n */\n\nexport type LethargyConfig = {\n  stability?: number;\n  sensitivity?: number;\n  tolerance?: number;\n  delay?: number;\n};\n\nexport class Lethargy {\n  stability: number;\n\n  sensitivity: number;\n\n  tolerance: number;\n\n  delay: number;\n\n  lastUpDeltas: Array<number>;\n\n  lastDownDeltas: Array<number>;\n\n  deltasTimestamp: Array<number>;\n\n  constructor({\n    stability = 8,\n    sensitivity = 100,\n    tolerance = 1.1,\n    delay = 150,\n  }: LethargyConfig = {}) {\n    this.stability = stability;\n    this.sensitivity = sensitivity;\n    this.tolerance = tolerance;\n    this.delay = delay;\n    this.lastUpDeltas = new Array(this.stability * 2).fill(0);\n    this.lastDownDeltas = new Array(this.stability * 2).fill(0);\n    this.deltasTimestamp = new Array(this.stability * 2).fill(0);\n  }\n\n  check(e: any) {\n    let lastDelta;\n    e = e.originalEvent || e;\n    if (e.wheelDelta !== undefined) {\n      lastDelta = e.wheelDelta;\n    } else if (e.deltaY !== undefined) {\n      lastDelta = e.deltaY * -40;\n    } else if (e.detail !== undefined || e.detail === 0) {\n      lastDelta = e.detail * -40;\n    }\n    this.deltasTimestamp.push(Date.now());\n    this.deltasTimestamp.shift();\n    if (lastDelta > 0) {\n      this.lastUpDeltas.push(lastDelta);\n      this.lastUpDeltas.shift();\n      return this.isInertia(1);\n    } else {\n      this.lastDownDeltas.push(lastDelta);\n      this.lastDownDeltas.shift();\n      return this.isInertia(-1);\n    }\n  }\n\n  isInertia(direction: number) {\n    const lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n    if (lastDeltas[0] === undefined) return direction;\n    if (\n      this.deltasTimestamp[this.stability * 2 - 2] + this.delay > Date.now()\n      && lastDeltas[0] === lastDeltas[this.stability * 2 - 1]\n    ) {\n      return false;\n    }\n    const lastDeltasOld = lastDeltas.slice(0, this.stability);\n    const lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n    const oldSum = lastDeltasOld.reduce((t, s) => t + s);\n    const newSum = lastDeltasNew.reduce((t, s) => t + s);\n    const oldAverage = oldSum / lastDeltasOld.length;\n    const newAverage = newSum / lastDeltasNew.length;\n    return Math.abs(oldAverage) < Math.abs(newAverage * this.tolerance)\n      && this.sensitivity < Math.abs(newAverage);\n  }\n}\n","type HandlerName = 'onEnter' | 'onBackspace' | 'onDelete' | 'onEsc' | 'onUp' | 'onDown' | 'onLeft' | 'onRight'\n  | 'onTab';\ntype EventHandler = (e: KeyboardEvent) => boolean | void | Promise<void>;\ntype HandlerWithOptions = {\n  handler: (e: KeyboardEvent) => void;\n  shouldPreventDefault?: boolean;\n  noStopPropagation?: boolean;\n};\n\ntype Handler = EventHandler | HandlerWithOptions;\n\ntype CaptureOptions = Partial<Record<HandlerName, Handler>>;\n\nconst keyToHandlerName: Record<string, HandlerName> = {\n  Enter: 'onEnter',\n  Backspace: 'onBackspace',\n  Delete: 'onDelete',\n  Esc: 'onEsc',\n  Escape: 'onEsc',\n  ArrowUp: 'onUp',\n  ArrowDown: 'onDown',\n  ArrowLeft: 'onLeft',\n  ArrowRight: 'onRight',\n  Tab: 'onTab',\n};\n\nconst handlers: Record<HandlerName, Handler[]> = {\n  onEnter: [],\n  onDelete: [],\n  onBackspace: [],\n  onEsc: [],\n  onUp: [],\n  onDown: [],\n  onLeft: [],\n  onRight: [],\n  onTab: [],\n};\n\nexport default function captureKeyboardListeners(options: CaptureOptions) {\n  if (!hasActiveHandlers()) {\n    document.addEventListener('keydown', handleKeyDown, true);\n  }\n\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    if (!option) {\n      return;\n    }\n\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      currentEventHandlers.push(option);\n    }\n  });\n\n  return () => {\n    releaseKeyboardListener(options);\n  };\n}\n\nfunction hasActiveHandlers() {\n  return Object.values(handlers).some((keyHandlers) => Boolean(keyHandlers.length));\n}\n\nfunction handleKeyDown(e: KeyboardEvent) {\n  const handlerName = keyToHandlerName[e.key];\n  if (!handlerName) {\n    return;\n  }\n\n  const { length } = handlers[handlerName];\n  if (!length) {\n    return;\n  }\n\n  const handlerOrOptions = handlers[handlerName][length - 1];\n\n  if (typeof handlerOrOptions === 'function') {\n    void handlerOrOptions(e);\n\n    e.stopPropagation();\n  } else {\n    const { handler, noStopPropagation, shouldPreventDefault } = handlerOrOptions;\n    if (!noStopPropagation) {\n      e.stopPropagation();\n    }\n    if (shouldPreventDefault) {\n      e.preventDefault();\n    }\n    handler(e);\n  }\n}\n\nfunction releaseKeyboardListener(options: CaptureOptions) {\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      const index = currentEventHandlers.findIndex((cb) => {\n        if (typeof cb === 'function') {\n          return cb === option;\n        } else {\n          return option && 'handler' in option && cb.handler === option.handler;\n        }\n      });\n\n      if (index !== -1) {\n        currentEventHandlers.splice(index, 1);\n      }\n    }\n  });\n\n  if (!hasActiveHandlers()) {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  }\n}\n","let counter = 0;\n\nexport function disableSwipeToClose() {\n  counter += 1;\n}\n\nexport function enableSwipeToClose() {\n  counter -= 1;\n}\n\nexport function getIsSwipeToCloseDisabled() {\n  return counter > 0;\n}\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll<HTMLElement>('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    );\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n","export default function cssColorToHex(cssColor: string) {\n  if (/^#[0-9A-F]{6}$/i.test(cssColor)) return cssColor;\n\n  return `#${cssColor.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+\\.{0,1}\\d*))?\\)$/)!\n    .slice(1)\n    .map((n: string, i: number) => (i === 3 ? Math.round(parseFloat(n) * 255) : parseFloat(n))\n      .toString(16)\n      .padStart(2, '0')\n      .replace('NaN', ''))\n    .join('')}`;\n}\n","/// <reference types=\"@capacitor/cli\" />\nexport var Style;\n(function (Style) {\n    /**\n     * Light text for dark backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Dark\"] = \"DARK\";\n    /**\n     * Dark text for light backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Light\"] = \"LIGHT\";\n    /**\n     * The style is based on the device appearance.\n     * If the device is using Dark mode, the statusbar text will be light.\n     * If the device is using Light mode, the statusbar text will be dark.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Default\"] = \"DEFAULT\";\n})(Style || (Style = {}));\nexport var Animation;\n(function (Animation) {\n    /**\n     * No animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"None\"] = \"NONE\";\n    /**\n     * Slide animation during show/hide.\n     * It doesn't work on iOS 15+.\n     *\n     * @deprecated Use Animation.Fade or Animation.None instead.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Slide\"] = \"SLIDE\";\n    /**\n     * Fade animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Fade\"] = \"FADE\";\n})(Animation || (Animation = {}));\n/**\n * @deprecated Use `Animation`.\n * @since 1.0.0\n */\nexport const StatusBarAnimation = Animation;\n/**\n * @deprecated Use `Style`.\n * @since 1.0.0\n */\nexport const StatusBarStyle = Style;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst StatusBar = registerPlugin('StatusBar');\nexport * from './definitions';\nexport { StatusBar };\n//# sourceMappingURL=index.js.map","export var NavigationBarPluginEvents;\n(function (NavigationBarPluginEvents) {\n    /**\n     * Called after the navigation bar is displayed\n     */\n    NavigationBarPluginEvents[\"SHOW\"] = \"onShow\";\n    /**\n     * Called after navigation bar is hidden\n     */\n    NavigationBarPluginEvents[\"HIDE\"] = \"onHide\";\n    /**\n     * Called after navigation bar color is changed\n     */\n    NavigationBarPluginEvents[\"COLOR_CHANGE\"] = \"onColorChange\";\n})(NavigationBarPluginEvents || (NavigationBarPluginEvents = {}));\n//# sourceMappingURL=navigationbar.events.js.map","import { registerPlugin } from '@capacitor/core';\nconst NavigationBar = registerPlugin('NavigationBar', {\n    web: () => import('./web').then(m => new m.NavigationBarWeb()),\n});\nexport * from './definitions';\nexport * from './navigationbar.events';\nexport { NavigationBar };\n//# sourceMappingURL=index.js.map","import { getGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport { switchStatusBar } from './capacitor/switchStatusBar';\nimport cssColorToHex from './cssColorToHex';\nimport { getTelegramApp, getTelegramAppAsync } from './telegram';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\nlet currentTheme: Theme;\nlet forcedDarkStatusBarBackground: boolean | undefined;\n\nexport default function switchTheme(theme: Theme, isInModal?: boolean) {\n  currentTheme = theme;\n\n  setThemeValue();\n  setStatusBarStyle({ isInModal });\n  setThemeColor();\n}\n\nfunction setThemeValue() {\n  const isDarkTheme = currentTheme === 'dark'\n    || (currentTheme === 'system'\n      && (IS_TELEGRAM_APP\n        ? getTelegramApp()?.colorScheme === 'dark'\n        : prefersDark.matches)\n    );\n\n  document.documentElement.classList.toggle('theme-dark', isDarkTheme);\n}\n\nfunction handlePrefersColorSchemeChange() {\n  setThemeValue();\n  setStatusBarStyle();\n}\n\nfunction setThemeColor() {\n  requestMeasure(() => {\n    const color = getComputedStyle(document.documentElement)\n      .getPropertyValue('--color-background-second');\n\n    document\n      .querySelector('meta[name=\"theme-color\"]')\n      ?.setAttribute('content', color);\n  });\n}\n\nexport function setStatusBarStyle(options?: { forceDarkBackground?: boolean; isInModal?: boolean }) {\n  if (IS_TELEGRAM_APP) {\n    requestMeasure(() => {\n      const color = getComputedStyle(document.documentElement)\n        .getPropertyValue('--color-background-second');\n      if (!color) return;\n\n      const hexColor = cssColorToHex(color) as `#${string}`;\n\n      getTelegramApp()?.setHeaderColor(hexColor);\n      getTelegramApp()?.setBackgroundColor(hexColor);\n      getTelegramApp()?.setBottomBarColor(hexColor);\n    });\n\n    return;\n  }\n  if (!IS_CAPACITOR) return;\n\n  if (options?.forceDarkBackground !== undefined) forcedDarkStatusBarBackground = options.forceDarkBackground;\n  switchStatusBar(currentTheme, prefersDark.matches, forcedDarkStatusBarBackground, options?.isInModal);\n}\n\nprefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('themeChanged', onThemeChanged);\n  });\n}\n\nexport function unsubscribeOnTelegramThemeChange() {\n  getTelegramApp()?.offEvent('themeChanged', onThemeChanged);\n}\n\nfunction onThemeChanged() {\n  if (getGlobal().settings.theme === 'system') {\n    handlePrefersColorSchemeChange();\n  }\n}\n","import { StatusBar, Style } from '@capacitor/status-bar';\nimport { NavigationBar } from '@mauricewegner/capacitor-navigation-bar';\n\nimport type { Theme } from '../../global/types';\n\nimport {\n  IS_ANDROID_APP,\n} from '../windowEnvironment';\n\nexport function switchStatusBar(\n  currentAppTheme: Theme, isSystemDark: boolean, forceDarkBackground?: boolean, isModalOpen?: boolean,\n) {\n  const style = forceDarkBackground || currentAppTheme === 'dark'\n    ? Style.Dark\n    : (isSystemDark && currentAppTheme === 'system' ? Style.Dark : Style.Light);\n\n  void StatusBar.setStyle({ style, isModalOpen });\n  if (IS_ANDROID_APP) {\n    void NavigationBar.setColor({\n      color: '#00000000',\n      darkButtons: currentAppTheme === 'light' || (!isSystemDark && currentAppTheme === 'system'),\n    });\n  }\n}\n","/**\n * Pulled from @react-hookz/web library source with some edits to match the code-style and use Teact\n * See https://github.com/react-hookz/web/blob/master/src/useMediaQuery/useMediaQuery.ts\n */\n\nimport type { Dispatch } from 'react';\nimport { useEffect, useState } from '../lib/teact/teact';\n\ntype QueryStateSetter = (matches: boolean) => void;\n\n// eslint-disable-next-line @stylistic/max-len\nconst queriesMap = new Map<string, { mql: MediaQueryList; dispatchers: Set<Dispatch<boolean>>; listener: () => void }>();\n\nconst createQueryEntry = (query: string) => {\n  const mql = matchMedia(query);\n  const dispatchers = new Set<QueryStateSetter>();\n  const listener = () => {\n    dispatchers.forEach((d) => d(mql.matches));\n  };\n\n  if (mql.addEventListener) mql.addEventListener('change', listener, { passive: true });\n  else mql.addListener(listener);\n\n  return {\n    mql,\n    dispatchers,\n    listener,\n  };\n};\n\nconst querySubscribe = (query: string, setState: QueryStateSetter) => {\n  let entry = queriesMap.get(query);\n\n  if (!entry) {\n    entry = createQueryEntry(query);\n    queriesMap.set(query, entry);\n  }\n\n  entry.dispatchers.add(setState);\n  setState(entry.mql.matches);\n};\n\nconst queryUnsubscribe = (query: string, setState: QueryStateSetter): void => {\n  const entry = queriesMap.get(query);\n\n  if (!entry) {\n    return;\n  }\n\n  const { mql, dispatchers, listener } = entry;\n  dispatchers.delete(setState);\n\n  if (!dispatchers.size) {\n    queriesMap.delete(query);\n\n    if (mql.removeEventListener) mql.removeEventListener('change', listener);\n    else mql.removeListener(listener);\n  }\n};\n\ninterface UseMediaQueryOptions {\n  initializeWithValue?: boolean;\n}\n\n/**\n * Tracks the state of CSS media query.\n *\n * @param query CSS media query to track.\n * @param options Hook options:\n * `initializeWithValue` (default: `true`) - Determine media query match state on first render. Setting\n * this to false will make the hook yield `undefined` on first render.\n */\nexport function useMediaQuery(query: string, options?: UseMediaQueryOptions): boolean | undefined {\n  function getInitialState() {\n    if (options?.initializeWithValue ?? true) {\n      let entry = queriesMap.get(query);\n      if (!entry) {\n        entry = createQueryEntry(query);\n        queriesMap.set(query, entry);\n      }\n      return entry.mql.matches;\n    }\n\n    return undefined;\n  }\n\n  const [state, setState] = useState<boolean | undefined>(getInitialState());\n\n  useEffect(() => {\n    querySubscribe(query, setState);\n\n    return () => queryUnsubscribe(query, setState);\n  }, [query]);\n\n  return state;\n}\n","import { MOBILE_SCREEN_MAX_WIDTH } from '../config';\nimport { useMediaQuery } from './useMediaQuery';\n\nlet isPortrait: boolean | undefined;\n\nexport function useDeviceScreen() {\n  isPortrait = useMediaQuery(`(max-width: ${MOBILE_SCREEN_MAX_WIDTH - 0.02}px)`);\n  const isSmallHeight = useMediaQuery('(max-height: 43.5rem)');\n\n  return {\n    isPortrait: Boolean(isPortrait),\n    isSmallHeight,\n    isLandscape: !isPortrait,\n    screenHeight: window.screen.height,\n  };\n}\n\nexport function getIsPortrait() {\n  return isPortrait;\n}\n\nexport function getIsLandscape() {\n  return !isPortrait;\n}\n","import { useEffect, useRef } from '../lib/teact/teact';\n\nconst useEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useEffectWithPrevDeps;\n","import type { HTMLInputTypeAttribute } from 'react';\nimport type { BottomSheetKeys } from '@mytonwallet/native-bottom-sheet';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport { type ElementRef, useEffect, useLayoutEffect, useState } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { setGlobal } from '../global';\n\nimport type { GlobalState } from '../global/types';\n\nimport { bigintReviver } from '../util/bigint';\nimport cssColorToHex from '../util/cssColorToHex';\nimport { setStatusBarStyle } from '../util/switchTheme';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport { useDeviceScreen } from './useDeviceScreen';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst BLUR_TIMEOUT = 50;\nconst COMPACT_MODAL_CSS_SELECTOR = '.is-compact-modal';\n\nconst controlledByMain = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nconst textInputTypes = new Set<HTMLInputTypeAttribute>([\n  'color', 'date', 'datetime-local', 'email', 'month', 'number',\n  'password', 'search', 'tel', 'text', 'time', 'url', 'week',\n]);\n\nlet safeAreaCache: SafeAreaInsets['insets'] | undefined;\nconst safeAreaPromise = SafeArea.getSafeAreaInsets().then(({ insets }) => {\n  safeAreaCache = insets;\n  return safeAreaCache;\n});\n\nlet currentKey: BottomSheetKeys | undefined;\n\nif (IS_DELEGATED_BOTTOM_SHEET) {\n  void BottomSheet.addListener('delegate', ({ key, globalJson }: { key: BottomSheetKeys; globalJson: string }) => {\n    currentKey = key;\n    controlledByMain.get(key)?.();\n\n    setGlobal(\n      JSON.parse(globalJson, bigintReviver) as GlobalState,\n      { forceOutdated: true, forceSyncOnIOs: true },\n    );\n  });\n\n  void BottomSheet.addListener('move', () => {\n    window.dispatchEvent(new Event('viewportmove'));\n  });\n}\n\nlet isForcedFullSize: boolean;\n\nexport function getIsForcedFullSize() {\n  return isForcedFullSize;\n}\n\nexport function useDelegatedBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n  dialogRef: ElementRef<HTMLDivElement>,\n  forceFullNative = false,\n  noResetHeightOnBlur = false,\n) {\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET || !key || key !== currentKey) return;\n\n    if (isOpen) {\n      const dialogEl = dialogRef.current!;\n\n      void BottomSheet.openSelf({\n        key,\n        height: String(dialogEl.offsetHeight),\n        backgroundColor: cssColorToHex(getComputedStyle(dialogEl).backgroundColor),\n      }).then(() => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      });\n    } else if (prevIsOpen) {\n      void BottomSheet.closeSelf({ key });\n      setStatusBarStyle({\n        forceDarkBackground: false,\n      });\n    }\n  }, [isOpen, dialogRef, key, onClose]);\n\n  const isDelegatedAndOpen = IS_DELEGATED_BOTTOM_SHEET && key && isOpen;\n\n  const { screenHeight } = useDeviceScreen();\n  const [safeArea, setSafeArea] = useState(safeAreaCache);\n  void safeAreaPromise.then(setSafeArea);\n  // We use Safe Area plugin instead of CSS `env()` function as it does not depend on modal position\n  const maxHeight = screenHeight - (safeArea?.top || 0);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return;\n\n    dialogRef.current!.style[forceFullNative ? 'maxHeight' : 'height'] = '';\n    dialogRef.current!.style[forceFullNative ? 'height' : 'maxHeight'] = `${maxHeight}px`;\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, maxHeight]);\n\n  useEffectWithPrevDeps(([prevForceFullNative]) => {\n    if (!isDelegatedAndOpen) return;\n\n    isForcedFullSize = forceFullNative;\n\n    // Skip initial opening\n    if (forceFullNative !== undefined && prevForceFullNative === undefined) return;\n\n    void BottomSheet.toggleSelfFullSize({ isFullSize: forceFullNative });\n  }, [forceFullNative, isDelegatedAndOpen]);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return undefined;\n\n    const dialogEl = dialogRef.current!;\n    let blurTimeout: number | undefined;\n\n    function onFocus(e: FocusEvent) {\n      if (!isInput(e.target)) {\n        return;\n      }\n\n      if (blurTimeout) {\n        clearTimeout(blurTimeout);\n        blurTimeout = undefined;\n        return;\n      }\n\n      preventScrollOnFocus(dialogEl);\n\n      void BottomSheet.toggleSelfFullSize({ isFullSize: true });\n    }\n\n    function onBlur(e: FocusEvent) {\n      if (!isInput(e.target) || noResetHeightOnBlur || forceFullNative || isInCompactModal(e.target)) {\n        return;\n      }\n\n      blurTimeout = window.setTimeout(() => {\n        blurTimeout = undefined;\n        void BottomSheet.toggleSelfFullSize({ isFullSize: false });\n      }, BLUR_TIMEOUT);\n    }\n\n    document.addEventListener('focusin', onFocus);\n    document.addEventListener('focusout', onBlur);\n\n    return () => {\n      document.removeEventListener('focusout', onBlur);\n      document.removeEventListener('focusin', onFocus);\n    };\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, noResetHeightOnBlur]);\n}\n\nexport function useOpenFromMainBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    controlledByMain.set(key, open);\n\n    if (currentKey === key) {\n      open();\n    }\n\n    return () => {\n      if (controlledByMain.get(key) === open) {\n        controlledByMain.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n\nexport function openInMain(key: BottomSheetKeys) {\n  void BottomSheet.openInMain({ key });\n}\n\nfunction isInput(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return (el.tagName === 'INPUT' && textInputTypes.has((el as HTMLInputElement).type))\n    || el.tagName === 'TEXTAREA'\n    || (el.tagName === 'DIV' && el.isContentEditable);\n}\n\nfunction isInCompactModal(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return el.matches(COMPACT_MODAL_CSS_SELECTOR) || !!el.closest('.is-compact-modal');\n}\n\nfunction preventScrollOnFocus(el: HTMLDivElement) {\n  el.style.opacity = '0';\n  setTimeout(() => {\n    el.style.opacity = '1';\n  });\n\n  document.documentElement.scrollTop = 0;\n}\n","import type { BottomSheetKeys } from '@mytonwallet/native-bottom-sheet';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport { useEffect } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { getGlobal } from '../global';\n\nimport { pause } from '../util/schedulers';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst RACE_TIMEOUT = 1000;\nconst CLOSING_DURATION = 100;\n\nconst controlledByNative = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  void BottomSheet.prepare();\n\n  void BottomSheet.addListener(\n    'openInMain',\n    ({ key }: { key: BottomSheetKeys }) => {\n      controlledByNative.get(key)?.();\n    },\n  );\n}\n\nlet lastOpenCall = Promise.resolve();\nlet closeCurrent: NoneToVoidFunction | undefined;\n\nexport function useDelegatingBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isPortrait: boolean | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n) {\n  const isDelegating = IS_DELEGATING_BOTTOM_SHEET && key;\n  const shouldOpen = isOpen && isPortrait;\n\n  useEffectWithPrevDeps(([prevShouldOpen]) => {\n    if (!isDelegating) return;\n\n    if (shouldOpen) {\n      closeCurrent?.();\n\n      const closeNext = () => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      };\n\n      closeCurrent = closeNext;\n\n      // Wait until previous call resolves to get an up-to-date global\n      lastOpenCall = Promise.race([\n        lastOpenCall,\n        pause(RACE_TIMEOUT), // Sometimes the last open call is stuck for some unknown reason\n      ])\n        .then(() => {\n          return BottomSheet.delegate({\n            key,\n            globalJson: JSON.stringify(getGlobal()),\n          });\n        })\n        .then(() => {\n          if (closeCurrent === closeNext) {\n            closeCurrent();\n            closeCurrent = undefined;\n          }\n        })\n        .then(() => pause(CLOSING_DURATION));\n    } else if (prevShouldOpen) {\n      void BottomSheet.release({ key });\n    }\n  }, [shouldOpen, isDelegating, key, onClose]);\n\n  return isDelegating && isPortrait;\n}\n\nexport function useOpenFromNativeBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    controlledByNative.set(key, open);\n\n    return () => {\n      if (controlledByNative.get(key) === open) {\n        controlledByNative.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n","import { logDebugError } from '../logs';\nimport { debounce } from '../schedulers';\nimport { getTelegramApp } from './index';\n\ninterface CallbackEntry {\n  id: number;\n  callback: NoneToVoidFunction;\n}\n\nconst runDebounce = debounce((cb) => cb(), 300, false);\nconst callbacks: CallbackEntry[] = [];\nlet isGlobalHandlerAttached = false;\nlet uniqueId = 0;\n\nfunction getNextId() {\n  uniqueId += 1;\n  return uniqueId;\n}\n\nfunction updateBackButtonState() {\n  const backButton = getTelegramApp()!.BackButton;\n\n  if (callbacks.length > 0 && !isGlobalHandlerAttached) {\n    backButton.show();\n    backButton.onClick(handleBackButtonClick);\n    isGlobalHandlerAttached = true;\n  } else if (!callbacks.length && isGlobalHandlerAttached) {\n    backButton.hide();\n    backButton.offClick(handleBackButtonClick);\n    isGlobalHandlerAttached = false;\n  }\n}\n\nexport function registerCallback(cb: NoneToVoidFunction) {\n  const id = getNextId();\n  callbacks.push({ id, callback: cb });\n  runDebounce(updateBackButtonState);\n  return id;\n}\n\nexport function unregisterCallback(id: number) {\n  const index = callbacks.findIndex((entry) => entry.id === id);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n    runDebounce(updateBackButtonState);\n  }\n}\n\nfunction handleBackButtonClick() {\n  if (callbacks.length > 0) {\n    const entry = callbacks.pop()!;\n    try {\n      entry.callback();\n    } catch (err: any) {\n      logDebugError('[handleBackButtonClick]', err);\n    }\n  }\n\n  runDebounce(updateBackButtonState);\n}\n","import { useCallback, useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP, IS_TEST } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport {\n  registerCallback as registerTelegramCallback,\n  unregisterCallback as unregisterTelegramCallback,\n} from '../util/telegram/backButtonManager';\nimport { IS_IOS, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useLastCallback from './useLastCallback';\nimport useSyncEffect from './useSyncEffect';\n\nconst PATH_BASE = `${window.location.pathname}${window.location.search}`;\n\ntype HistoryRecord = {\n  index: number;\n  // Should this record be replaced by the next record (for example Menu)\n  shouldBeReplaced?: boolean;\n  // Mark this record as replaced by the next record. Only used to check if needed to perform effectBack\n  markReplaced?: NoneToVoidFunction;\n  onBack?: NoneToVoidFunction;\n  // Set if the element is closed in the UI, but not in the real history\n  isClosed?: boolean;\n};\n\ntype HistoryOperationGo = {\n  type: 'go';\n  delta: number;\n};\n\ntype HistoryOperationState = {\n  type: 'pushState' | 'replaceState';\n  data: any;\n};\n\ntype HistoryOperation = HistoryOperationGo | HistoryOperationState;\n\n// Needed to dismiss any 'trashed' history records from the previous page reloads.\nconst historyUniqueSessionId = Number(new Date());\n// Reflects real history state, but also contains information on which records should be replaced by the next record and\n// which records are deferred to close on the next operation\nlet historyState: HistoryRecord[];\n// Reflects current real history index\nlet historyCursor: number;\n// If we alter real history programmatically, the popstate event will be fired, which we don't need\nlet isAlteringHistory = false;\n// Unfortunately Safari doesn't really like when there's 2+ consequent history operations in one frame, so we need\n// to delay them to the next raf\nlet deferredHistoryOperations: HistoryOperation[] = [];\nlet deferredPopstateOperations: HistoryOperationState[] = [];\n\n// Do not remove: used for history unit tests\nif (IS_TEST) {\n  (window as any).TEST_getHistoryState = () => historyState;\n  (window as any).TEST_getHistoryCursor = () => historyCursor;\n}\n\nfunction applyDeferredHistoryOperations() {\n  const goOperations = deferredHistoryOperations.filter((op) => op.type === 'go');\n  const stateOperations = deferredHistoryOperations.filter((op) => op.type !== 'go');\n  const goCount = goOperations.reduce((acc, op) => acc + op.delta, 0);\n\n  deferredHistoryOperations = [];\n\n  if (goCount) {\n    window.history.go(goCount);\n\n    // If we have some `state` operations after the `go` operations, we need to wait until the popstate event\n    // so the order of operations is correctly preserved\n    if (stateOperations.length) {\n      deferredPopstateOperations.push(...stateOperations);\n      return;\n    }\n  }\n\n  processStateOperations(stateOperations);\n}\n\nfunction processStateOperations(stateOperations: HistoryOperationState[]) {\n  stateOperations.forEach((op) => window.history[op.type](op.data, ''));\n}\n\nfunction deferHistoryOperation(historyOperation: HistoryOperation) {\n  if (!deferredHistoryOperations.length) {\n    requestMeasure(applyDeferredHistoryOperations);\n  }\n\n  deferredHistoryOperations.push(historyOperation);\n}\n\n// Resets history to the `root` state\nfunction resetHistory() {\n  historyCursor = 0;\n  historyState = [{\n    index: 0,\n    onBack: () => window.history.back(),\n  }];\n\n  if (!IS_LEDGER_EXTENSION_TAB) {\n    window.history.replaceState({ index: 0, historyUniqueSessionId }, '', PATH_BASE);\n  }\n}\n\nresetHistory();\n\nfunction cleanupClosed(alreadyClosedCount = 1) {\n  let countClosed = alreadyClosedCount;\n  for (let i = historyCursor - 1; i > 0; i--) {\n    if (!historyState[i].isClosed) break;\n    countClosed++;\n  }\n  if (countClosed) {\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -countClosed,\n    });\n  }\n  return countClosed;\n}\n\nfunction cleanupTrashedState() {\n  for (let i = historyState.length - 1; i > 0; i--) {\n    if (historyState[i].isClosed) {\n      continue;\n    }\n    historyState[i].onBack?.();\n  }\n\n  resetHistory();\n}\n\nwindow.addEventListener('popstate', ({ state }: PopStateEvent) => {\n  if (isAlteringHistory) {\n    isAlteringHistory = false;\n    if (deferredPopstateOperations.length) {\n      processStateOperations(deferredPopstateOperations);\n      deferredPopstateOperations = [];\n    }\n    return;\n  }\n\n  if (!state) {\n    cleanupTrashedState();\n    return;\n  }\n\n  const { index, historyUniqueSessionId: previousUniqueSessionId } = state;\n  if (previousUniqueSessionId !== historyUniqueSessionId) {\n    cleanupTrashedState();\n    return;\n  }\n\n  // New real history state matches the old virtual one. Not possible in theory, but in practice we have Safari\n  if (index === historyCursor) {\n    return;\n  }\n\n  if (index < historyCursor) {\n    // Navigating back\n    let alreadyClosedCount = 0;\n    for (let i = historyCursor; i > index - alreadyClosedCount; i--) {\n      if (historyState[i].isClosed) {\n        alreadyClosedCount++;\n        continue;\n      }\n      historyState[i].onBack?.();\n    }\n\n    const countClosed = cleanupClosed(alreadyClosedCount);\n    historyCursor += index - historyCursor - countClosed;\n\n    // Can happen when we have deferred a real back for some element (for example Menu), closed via UI,\n    // pressed back button and caused a pushState.\n    if (historyCursor < 0) {\n      historyCursor = 0;\n    }\n  } else if (index > historyCursor) {\n    // Forward navigation is not yet supported\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -(index - historyCursor),\n    });\n  }\n});\n\nexport default function useHistoryBack({\n  isActive,\n  shouldBeReplaced,\n  shouldIgnoreForTelegram,\n  onBack,\n}: {\n  isActive?: boolean;\n  shouldBeReplaced?: boolean;\n  shouldIgnoreForTelegram?: boolean;\n  onBack: NoneToVoidFunction;\n}) {\n  const lastOnBack = useLastCallback(onBack);\n\n  // Active index of the record\n  const indexRef = useRef<number>();\n  const telegramIdRef = useRef<number>();\n  const wasReplaced = useRef(false);\n\n  const isFirstRender = useRef(true);\n\n  const pushState = useCallback((forceReplace = false) => {\n    // Check if the old state should be replaced\n    const shouldReplace = forceReplace || historyState[historyCursor].shouldBeReplaced;\n    indexRef.current = shouldReplace ? historyCursor : ++historyCursor;\n\n    historyCursor = indexRef.current;\n\n    // Mark the previous record as replaced so effectBack doesn't perform back operation on the new record\n    const previousRecord = historyState[indexRef.current];\n    if (previousRecord && !previousRecord.isClosed) {\n      previousRecord.markReplaced?.();\n    }\n\n    historyState[indexRef.current] = {\n      index: indexRef.current,\n      onBack: lastOnBack,\n      shouldBeReplaced,\n      markReplaced: () => {\n        wasReplaced.current = true;\n      },\n    };\n\n    deferHistoryOperation({\n      type: shouldReplace ? 'replaceState' : 'pushState',\n      data: {\n        index: indexRef.current,\n        historyUniqueSessionId,\n      },\n    });\n  }, [lastOnBack, shouldBeReplaced]);\n\n  const processBack = useCallback(() => {\n    // Only process back on open records\n    if (indexRef.current && historyState[indexRef.current] && !wasReplaced.current) {\n      historyState[indexRef.current].isClosed = true;\n      wasReplaced.current = true;\n      if (indexRef.current === historyCursor && !shouldBeReplaced) {\n        historyCursor -= cleanupClosed();\n      }\n    }\n  }, [shouldBeReplaced]);\n\n  // Process back navigation when element is unmounted\n  useEffectOnce(() => {\n    if (IS_IOS) return undefined;\n\n    isFirstRender.current = false;\n    return () => {\n      if (!isActive || wasReplaced.current) return;\n      processBack();\n    };\n  });\n\n  useSyncEffect(([prevIsActive]) => {\n    if (IS_IOS) return;\n    if (prevIsActive === isActive) return;\n    if (isFirstRender.current && !isActive) return;\n\n    if (isActive) {\n      pushState();\n    } else {\n      processBack();\n    }\n  }, [isActive, processBack, pushState]);\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || shouldIgnoreForTelegram || !isActive) return undefined;\n\n    telegramIdRef.current = registerTelegramCallback(lastOnBack);\n\n    return () => {\n      if (telegramIdRef.current !== undefined) {\n        unregisterTelegramCallback(telegramIdRef.current);\n        telegramIdRef.current = undefined;\n      }\n    };\n  }, [isActive, shouldIgnoreForTelegram, onBack]);\n}\n","import { DEBUG } from '../../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<Element, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load', 'error']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<Element, Set<string>>();\n\nexport function addEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function resolveEventType(propName: string, element: Element) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: Element, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: Element, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: Element) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)!.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: Element) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n  delegatedEventTypesByElement.delete(element);\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: Element = realEvent.target as Element;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as Element;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: Element) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import type { ChangeEvent, FocusEvent } from 'react';\n\nimport type { Signal } from '../../util/signals';\nimport type {\n  VirtualElement,\n  VirtualElementChildren,\n  VirtualElementComponent,\n  VirtualElementFragment,\n  VirtualElementParent,\n  VirtualElementReal,\n  VirtualElementTag,\n} from './teact';\n\nimport { DEBUG } from '../../config';\nimport { unique } from '../../util/iteratees';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport {\n  captureImmediateEffects,\n  hasElementChanged,\n  isParentElement,\n  mountComponent,\n  MountState,\n  renderComponent,\n  unmountComponent,\n  VirtualType,\n} from './teact';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\ntype CurrentContext = Record<string, Signal<unknown>>;\n\ntype DOMElement = HTMLElement | SVGElement;\n\nconst SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nconst HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: Record<string, string> = {\n  autoCapitalize: 'autocapitalize',\n  autoComplete: 'autocomplete',\n  autoCorrect: 'autocorrect',\n  autoPlay: 'autoplay',\n  spellCheck: 'spellcheck',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\nconst SELECTION_STATE_ATTRIBUTE = '__teactSelectionState';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\nconst extraStyles = new WeakMap<Element, Record<string, string>>();\n\nlet DEBUG_virtualTreeSize = 1;\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n  const $head = headsByElement.get(parentEl)!;\n  const $renderedChild = renderWithVirtual(parentEl, $head.children[0], $element, $head, {}, 0);\n  runImmediateEffects?.();\n\n  $head.children = $renderedChild ? [$renderedChild] : [];\n\n  if (process.env.APP_ENV === 'perf') {\n    DEBUG_virtualTreeSize = 0;\n    DEBUG_addToVirtualTreeSize($head);\n\n    return DEBUG_virtualTreeSize;\n  }\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: DOMElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    forceMoveToEnd?: boolean;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling, namespace } = options;\n\n  const isCurrentComponent = $current?.type === VirtualType.Component;\n  const isNewComponent = $new?.type === VirtualType.Component;\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = !isCurrentComponent && $current?.type === VirtualType.Fragment;\n  const isNewFragment = !isNewComponent && $new?.type === VirtualType.Fragment;\n\n  if ($new?.type === VirtualType.Tag) {\n    if ($new.tag === 'svg') namespace = SVG_NAMESPACE;\n    if ($new.props.xmlns) namespace = $new.props.xmlns;\n  }\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (\n    !skipComponentUpdate\n    && isNewComponent\n    && ($new as VirtualElementComponent).componentInstance.mountState === MountState.Mounted\n  ) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, currentContext, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(\n          parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n        ) as unknown as typeof $new;\n        currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n        nextSibling, fragment, namespace,\n      });\n    } else {\n      const canSetTextContent = !fragment\n        && !nextSibling\n        && $newAsReal.type === VirtualType.Text\n        && $parent.children.length === 1\n        && !parentEl.firstChild;\n\n      if (canSetTextContent) {\n        parentEl.textContent = $newAsReal.value;\n        $newAsReal.target = parentEl.firstChild!;\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        insertBefore(fragment || parentEl, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, currentContext, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(\n            parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n          ) as unknown as typeof $new;\n          currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n        }\n\n        remount(parentEl, $current, currentContext, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n          nextSibling, fragment, namespace,\n        });\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        remount(parentEl, $current, currentContext, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          currentContext,\n          parentEl,\n          nextSibling,\n          options.forceMoveToEnd,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = $current.type === VirtualType.Tag;\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          setElementRef($current, undefined);\n          setElementRef($newAsTag, currentTarget as DOMElement);\n\n          if (nextSibling || options.forceMoveToEnd) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as DOMElement, namespace);\n          renderChildren(\n            $current, $newAsTag, currentContext, currentTarget as DOMElement, undefined, undefined, namespace,\n          );\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  $element.componentInstance.context = currentContext;\n\n  if (componentInstance.mountState === MountState.Unmounted) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, currentContext, index);\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      currentContext,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  currentContext: CurrentContext,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  },\n) {\n  const { children } = $element;\n\n  // Add a placeholder comment node for empty fragments to maintain position\n  if ($element.type === VirtualType.Fragment && children.length === 0) {\n    const fragmentEl = $element;\n    fragmentEl.placeholderTarget = document.createComment('empty-fragment');\n    insertBefore(options.fragment || parentEl, fragmentEl.placeholderTarget, options.nextSibling);\n    return;\n  }\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $element, currentContext, i, options);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n}\n\nfunction unmountChildren(\n  parentEl: DOMElement, $element: VirtualElementComponent | VirtualElementFragment, currentContext: CurrentContext,\n) {\n  for (const $child of $element.children) {\n    renderWithVirtual(parentEl, $child, undefined, $element, currentContext, -1);\n  }\n}\n\nfunction createNode($element: VirtualElementReal, currentContext: CurrentContext, namespace = HTML_NAMESPACE): Node {\n  if ($element.type === VirtualType.Empty) {\n    return document.createTextNode('');\n  }\n\n  if ($element.type === VirtualType.Text) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children } = $element;\n  const element = document.createElementNS(namespace, tag) as DOMElement;\n\n  processControlled(tag, props);\n\n  for (const key in props) {\n    if (!props.hasOwnProperty(key)) continue;\n\n    if (props[key] !== undefined) {\n      setAttribute(element, key, props[key], namespace);\n    }\n  }\n\n  processUncontrolledOnMount(element, props);\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(element, undefined, $child, $element, currentContext, i, { namespace });\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n\n  return element;\n}\n\nfunction remount(\n  parentEl: DOMElement,\n  $current: VirtualElement,\n  currentContext: CurrentContext,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = $current.type === VirtualType.Component;\n  const isFragment = !isComponent && $current.type === VirtualType.Fragment;\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current, currentContext);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if ($element.type === VirtualType.Component) {\n    unmountComponent($element.componentInstance);\n  } else if ($element.type === VirtualType.Fragment) {\n    // Remove placeholder for empty fragments\n    const fragment = $element;\n    if (fragment.placeholderTarget && fragment.children.length === 0) {\n      fragment.placeholderTarget.parentNode?.removeChild(fragment.placeholderTarget);\n      fragment.placeholderTarget = undefined;\n    }\n  } else {\n    if ($element.type === VirtualType.Tag) {\n      extraClasses.delete($element.target!);\n      setElementRef($element, undefined);\n      removeAllDelegatedListeners($element.target!);\n    }\n\n    $element.target = undefined; // Help GC\n\n    if ($element.type !== VirtualType.Tag) {\n      return;\n    }\n  }\n\n  for (const $child of $element.children) {\n    unmountRealTree($child);\n  }\n}\n\nfunction insertBefore(parentEl: DOMElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if ($current.type === VirtualType.Component || $current.type === VirtualType.Fragment) {\n    if ($current.children.length === 0) {\n      // For empty fragments, use the placeholder node to track position\n      const fragment = $current as VirtualElementFragment;\n      if (fragment.placeholderTarget) {\n        return fragment.placeholderTarget.nextSibling || undefined;\n      }\n      return undefined;\n    }\n\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  return $current.target!.nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent,\n  $new: VirtualElementParent,\n  currentContext: CurrentContext,\n  currentEl: DOMElement,\n  nextSibling?: ChildNode,\n  forceMoveToEnd = false,\n  namespace?: string,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    renderFastListChildren($current, $new, currentContext, currentEl);\n    return;\n  }\n\n  // Handle transitions between empty and non-empty fragments\n  if ($current.type === VirtualType.Fragment && $new.type === VirtualType.Fragment) {\n    const currentFragment = $current;\n    const newFragment = $new;\n\n    // If transitioning from empty to non-empty, use the placeholder's position\n    if (currentFragment.children.length === 0 && newFragment.children.length > 0 && currentFragment.placeholderTarget) {\n      nextSibling = currentFragment.placeholderTarget.nextSibling || undefined;\n      // Remove the placeholder as we're adding real content\n      currentFragment.placeholderTarget.parentNode?.removeChild(currentFragment.placeholderTarget);\n      currentFragment.placeholderTarget = undefined;\n    }\n\n    // If transitioning from non-empty to empty, add a placeholder\n    if (currentFragment.children.length > 0 && newFragment.children.length === 0) {\n      const lastCurrentChild = currentFragment.children[currentFragment.children.length - 1];\n      const siblingAfterFragment = getNextSibling(lastCurrentChild);\n      newFragment.placeholderTarget = document.createComment('empty-fragment');\n      insertBefore(currentEl, newFragment.placeholderTarget, siblingAfterFragment);\n    }\n  }\n\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const currentChildrenLength = currentChildren.length;\n  const newChildrenLength = newChildren.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = fragment && (\n    nextSibling || (lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined)\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $renderedChild = renderWithVirtual(\n      currentEl,\n      currentChildren[i],\n      newChildren[i],\n      $new,\n      currentContext,\n      i,\n      i >= currentChildrenLength ? { fragment, namespace } : { nextSibling, forceMoveToEnd, namespace },\n    );\n\n    if ($renderedChild && $renderedChild !== newChildren[i]) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren(\n  $current: VirtualElementParent, $new: VirtualElementParent, currentContext: CurrentContext, currentEl: DOMElement,\n) {\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const newKeys = new Set();\n  for (const $newChild of newChildren) {\n    const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n    if (DEBUG && isParentElement($newChild)) {\n      // eslint-disable-next-line no-null/no-null\n      if (key === undefined || key === null) {\n        // eslint-disable-next-line no-console\n        console.warn('Missing `key` in `teactFastList`');\n      }\n\n      if ($newChild.type === VirtualType.Fragment) {\n        throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n      }\n    }\n\n    newKeys.add(key);\n  }\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey: Record<string, { $element: VirtualElement; index: number; orderKey?: number }> = {};\n  for (let i = 0, l = currentChildren.length; i < l; i++) {\n    const $currentChild = currentChildren[i];\n\n    let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n    // eslint-disable-next-line no-null/no-null\n    const isKeyPresent = key !== undefined && key !== null;\n\n    // First we process removed children\n    if (isKeyPresent && !newKeys.has(key)) {\n      renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n      continue;\n    } else if (!isKeyPresent) {\n      const $newChild = newChildren[i];\n      const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n      // If a non-key element remains at the same index we preserve it with a virtual `key`\n      if ($newChild && !newChildKey) {\n        key = `${INDEX_KEY_PREFIX}${i}`;\n        // Otherwise, we just remove it\n      } else {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n        continue;\n      }\n    }\n\n    // Then we build up info about remaining children\n    remainingByKey[key] = {\n      $element: $currentChild,\n      index: currentRemainingIndex++,\n      orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n    };\n  }\n\n  let fragmentIndex: number | undefined;\n  let fragmentSize: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  for (let i = 0, l = newChildren.length; i < l; i++) {\n    const $newChild = newChildren[i];\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (fragmentSize === undefined) {\n        fragmentIndex = i;\n        fragmentSize = 0;\n      }\n\n      fragmentSize++;\n      continue;\n    }\n\n    // This prepends new children to the top\n    if (fragmentSize) {\n      renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n      fragmentSize = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && (!newOrderKey || currentChildInfo.orderKey !== newOrderKey)\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    const nextSibling = currentEl.childNodes[isMovingDown ? i + 1 : i];\n    const options = shouldMoveNode ? (nextSibling ? { nextSibling } : { forceMoveToEnd: true }) : undefined;\n\n    const $renderedChild = renderWithVirtual(\n      currentEl, currentChildInfo.$element, $newChild, $new, currentContext, i, options,\n    );\n    if ($renderedChild !== $newChild) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  // This appends new children to the bottom\n  if (fragmentSize) {\n    renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n  }\n}\n\nfunction renderFragment(\n  fragmentIndex: number,\n  fragmentSize: number,\n  parentEl: DOMElement,\n  $parent: VirtualElementParent,\n  currentContext: CurrentContext,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (fragmentSize === 1) {\n    const $child = $parent.children[fragmentIndex];\n    const $renderedChild = renderWithVirtual(\n      parentEl, undefined, $child, $parent, currentContext, fragmentIndex, { nextSibling },\n    );\n    if ($renderedChild !== $child) {\n      $parent.children[fragmentIndex] = $renderedChild;\n    }\n\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  for (let i = fragmentIndex; i < fragmentIndex + fragmentSize; i++) {\n    const $child = $parent.children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, currentContext, i, { fragment });\n    if ($renderedChild !== $child) {\n      $parent.children[i] = $renderedChild;\n    }\n  }\n\n  insertBefore(parentEl, fragment, nextSibling);\n}\n\nfunction setElementRef($element: VirtualElementTag, element: DOMElement | undefined) {\n  const { ref } = $element.props;\n\n  if (typeof ref === 'object') {\n    ref.current = element;\n    ref.onChange?.();\n  } else if (typeof ref === 'function') {\n    ref(element);\n  }\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange, onBlur,\n  } = props;\n\n  props.onChange = undefined;\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n\n        e.currentTarget.dataset[SELECTION_STATE_ATTRIBUTE] = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n  props.onBlur = (e: FocusEvent<HTMLInputElement>) => {\n    delete e.currentTarget.dataset[SELECTION_STATE_ATTRIBUTE];\n\n    onBlur?.(e);\n  };\n}\n\nfunction processUncontrolledOnMount(element: DOMElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes(\n  $current: VirtualElementTag, $new: VirtualElementTag, element: DOMElement, namespace?: string,\n) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  for (const [key, currentValue] of currentEntries) {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  }\n\n  for (const [key, newValue] of newEntries) {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue, namespace);\n    }\n  }\n}\n\nfunction setAttribute(element: DOMElement, key: string, value: any, namespace?: string) {\n  if (key === 'className') {\n    updateClassName(element, value, namespace);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      const selectionStateJson = inputEl.dataset[SELECTION_STATE_ATTRIBUTE];\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    updateStyle(element, value);\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (\n    namespace === SVG_NAMESPACE || key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)\n  ) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: DOMElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    updateStyle(element, '');\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: DOMElement, value: string, namespace?: string) {\n  if (namespace === SVG_NAMESPACE) {\n    element.setAttribute('class', value);\n    return;\n  }\n\n  const htmlElement = element as HTMLElement;\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    htmlElement.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  htmlElement.className = extraArray.join(' ');\n}\n\nfunction updateStyle(element: DOMElement, value: string) {\n  element.style.cssText = value;\n\n  const extraObject = extraStyles.get(element);\n  if (extraObject) {\n    applyExtraStyles(element);\n  }\n}\n\nexport function addExtraClass(element: DOMElement, className: string) {\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: DOMElement, className: string) {\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: DOMElement, className: string, force?: boolean) {\n  if (force === true) {\n    addExtraClass(element, className);\n  } else if (force === false) {\n    removeExtraClass(element, className);\n  } else if (extraClasses.get(element)?.has(className)) {\n    removeExtraClass(element, className);\n  } else {\n    addExtraClass(element, className);\n  }\n}\n\nexport function setExtraStyles(element: DOMElement, styles: Partial<CSSStyleDeclaration> & AnyLiteral) {\n  extraStyles.set(element, styles);\n  applyExtraStyles(element);\n}\n\nfunction applyExtraStyles(element: DOMElement) {\n  const standardStyles = Object.entries(extraStyles.get(element)!).reduce<Record<string, string>>(\n    (acc, [prop, value]) => {\n      if (prop.startsWith('--')) {\n        element.style.setProperty(prop, value);\n      } else {\n        acc[prop] = value;\n      }\n\n      return acc;\n    },\n    {},\n  );\n\n  Object.assign(element.style, standardStyles);\n}\n\nfunction DEBUG_addToVirtualTreeSize($current: VirtualElementParent | VirtualDomHead) {\n  DEBUG_virtualTreeSize += $current.children.length;\n\n  $current.children.forEach(($child) => {\n    if (isParentElement($child)) {\n      DEBUG_addToVirtualTreeSize($child);\n    }\n  });\n}\n\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i), children);\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import { useRef } from '../lib/teact/teact';\n\nimport { createSignal } from '../util/signals';\n\nexport default function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { cleanupEffect, isSignal } from '../util/signals';\nimport useEffectOnce from './useEffectOnce';\n\nexport function useSignalEffect(effect: NoneToVoidFunction, dependencies: readonly any[]) {\n  // The is extracted from `useEffectOnce` to run before all effects\n  const isFirstRun = useRef(true);\n  if (isFirstRun.current) {\n    isFirstRun.current = false;\n\n    dependencies?.forEach((dependency) => {\n      if (isSignal(dependency)) {\n        dependency.subscribe(effect);\n      }\n    });\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupEffect(effect);\n    };\n  });\n}\n","import type { Signal } from '../util/signals';\n\nimport useSignal from './useSignal';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedSignal<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): Signal<T>;\nfunction useDerivedSignal<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): Signal<T>;\nfunction useDerivedSignal<T>(dependency: T): Signal<T>;\n\nfunction useDerivedSignal<T>(resolverOrDependency: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrDependency as Resolver<T> : () => (resolverOrDependency as T);\n  dependencies ??= [resolverOrDependency];\n\n  const [getValue, setValue] = useSignal<T>();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver() {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)(setValue);\n    } else {\n      setValue((currentResolver as SyncResolver<T>)());\n    }\n  }\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSyncEffect(runCurrentResolver, dependencies);\n\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return getValue as Signal<T>;\n}\n\nexport default useDerivedSignal;\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useForceUpdate from './useForceUpdate';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedState<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): T;\nfunction useDerivedState<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): T;\nfunction useDerivedState<T>(signal: Signal<T>): T;\n\nfunction useDerivedState<T>(resolverOrSignal: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrSignal as Resolver<T> : () => ((resolverOrSignal as Signal<T>)());\n  dependencies ??= [resolverOrSignal];\n\n  const valueRef = useRef<T>();\n  const forceUpdate = useForceUpdate();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver(isSync = false) {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)((newValue) => {\n        if (valueRef.current !== newValue) {\n          valueRef.current = newValue;\n          forceUpdate();\n        }\n      });\n    } else {\n      const newValue = (currentResolver as SyncResolver<T>)();\n      if (valueRef.current !== newValue) {\n        valueRef.current = newValue;\n\n        if (!isSync) {\n          forceUpdate();\n        }\n      }\n    }\n  }\n\n  useSyncEffect(() => {\n    runCurrentResolver(true);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return valueRef.current as T;\n}\n\nexport default useDerivedState;\n","import { useRef } from '../lib/teact/teact';\n\nimport useSyncEffect from './useSyncEffect';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useSyncEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useLayoutEffect, useRef, useSignal } from '../lib/teact/teact';\nimport { addExtraClass, toggleExtraClass } from '../lib/teact/teact-dom';\n\nimport type { Signal } from '../util/signals';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport useDerivedSignal from './useDerivedSignal';\nimport useDerivedState from './useDerivedState';\nimport useLastCallback from './useLastCallback';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\nimport useSyncEffectWithPrevDeps from './useSyncEffectWithPrevDeps';\n\nconst CLOSE_DURATION = 350;\n\ntype BaseHookParams<RefType extends HTMLElement> = {\n  isOpen: boolean | undefined;\n  ref?: ElementRef<RefType>;\n  noMountTransition?: boolean;\n  noOpenTransition?: boolean;\n  noCloseTransition?: boolean;\n  closeDuration?: number;\n  className?: string | false;\n  prefix?: string;\n  shouldForceOpen?: boolean;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n};\n\nexport type HookParams<RefType extends HTMLElement> = BaseHookParams<RefType> & {\n  withShouldRender?: never;\n};\n\ntype HookParamsWithShouldRender<RefType extends HTMLElement> = BaseHookParams<RefType> & {\n  withShouldRender: true;\n};\n\ntype HookResult<RefType extends HTMLElement> = {\n  ref: ElementRef<RefType>;\n  getIsClosing: Signal<boolean>;\n};\n\ntype HookResultWithShouldRender<RefType extends HTMLElement> = HookResult<RefType> & {\n  shouldRender: boolean;\n};\n\ntype State =\n  'closed'\n  | 'scheduled-open'\n  | 'open'\n  | 'closing';\n\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParams<RefType>\n): HookResult<RefType>;\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParamsWithShouldRender<RefType>\n): HookResultWithShouldRender<RefType>;\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParams<RefType> | HookParamsWithShouldRender<RefType>,\n): HookResult<RefType> | HookResultWithShouldRender<RefType> {\n  const {\n    isOpen,\n    noMountTransition = false,\n    noOpenTransition = false,\n    noCloseTransition = false,\n    closeDuration = CLOSE_DURATION,\n    className = 'fast',\n    prefix = '',\n    shouldForceOpen,\n    onCloseAnimationEnd,\n  } = params;\n\n  const localRef = useRef<RefType>();\n  const ref = params.ref || localRef;\n  const closingTimeoutRef = useRef<number>();\n  const [getState, setState] = useSignal<State | undefined>();\n  const optionsRef = useStateRef({\n    closeDuration, noMountTransition, noOpenTransition, noCloseTransition,\n  });\n  const onCloseEndLast = useLastCallback(onCloseAnimationEnd);\n\n  useSyncEffectWithPrevDeps(([prevIsOpen]) => {\n    const options = optionsRef.current;\n\n    if (shouldForceOpen) {\n      setState('open');\n      return;\n    }\n\n    if (isOpen) {\n      if (closingTimeoutRef.current) {\n        clearTimeout(closingTimeoutRef.current);\n        closingTimeoutRef.current = undefined;\n      }\n\n      if (options.noOpenTransition || (prevIsOpen === undefined && options.noMountTransition)) {\n        setState('open');\n      } else {\n        setState('scheduled-open');\n        requestMeasure(() => {\n          setState('open');\n        });\n      }\n    } else if (prevIsOpen === undefined || options.noCloseTransition) {\n      setState('closed');\n    } else {\n      setState('closing');\n\n      closingTimeoutRef.current = window.setTimeout(() => {\n        setState('closed');\n        onCloseEndLast();\n      }, options.closeDuration);\n    }\n  }, [isOpen, shouldForceOpen]);\n\n  const applyClassNames = useLastCallback(() => {\n    const element = ref.current;\n    if (!element) return;\n\n    if (className !== false) {\n      addExtraClass(element, 'opacity-transition');\n      addExtraClass(element, className);\n    }\n\n    const state = getState();\n    const shouldRender = state !== 'closed';\n    const hasOpenClass = state === 'open';\n    const isClosing = state === 'closing';\n\n    toggleExtraClass(element, `${prefix}shown`, shouldRender);\n    toggleExtraClass(element, `${prefix}not-shown`, !shouldRender);\n    toggleExtraClass(element, `${prefix}open`, hasOpenClass);\n    toggleExtraClass(element, `${prefix}not-open`, !hasOpenClass);\n    toggleExtraClass(element, `${prefix}closing`, isClosing);\n  });\n\n  // Workaround for Chrome causing forced reflow in the middle of mutation phase when unmounting a focused element.\n  // Due to such forced reflow setting initial class names in the first layout effect causes transitions to start.\n  useSyncEffect(() => {\n    ref.onChange = () => {\n      ref.onChange = undefined;\n      applyClassNames();\n    };\n  }, [applyClassNames, ref]);\n\n  useLayoutEffect(applyClassNames, [applyClassNames, getState]);\n\n  const withShouldRender = 'withShouldRender' in params && params.withShouldRender;\n  const shouldRender = useDerivedState(\n    () => (withShouldRender && getState() !== 'closed'),\n    [withShouldRender, getState],\n  );\n\n  const getIsClosing = useDerivedSignal(() => getState() === 'closing', [getState]);\n\n  if (withShouldRender) {\n    return { ref, shouldRender, getIsClosing };\n  }\n\n  return { ref, getIsClosing };\n}\n","import { useLayoutEffect } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\n\ninterface Options {\n  className: string;\n  isActive?: boolean;\n  element?: HTMLElement | Document;\n}\n\nexport default function useToggleClass({\n  className,\n  isActive,\n  element = document.documentElement,\n}: Options): void {\n  useLayoutEffect(() => {\n    if (!isActive) return;\n\n    addExtraClass(element as HTMLElement, className);\n\n    return () => {\n      removeExtraClass(element as HTMLElement, className);\n    };\n  }, [className, isActive, element]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"esdydUs1\",\"dot\":\"TUSiLENF\",\"dots\":\"Zft9rPYc\",\"doubled\":\"UJzP4d9r\",\"dots-doubled\":\"vpZtb2OQ\",\"dotsDoubled\":\"vpZtb2OQ\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './LoadingDots.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  className?: string;\n  isDoubled?: boolean;\n}\n\nfunction LoadingDots({ isActive, className, isDoubled }: OwnProps) {\n  const { shouldRender, ref } = useShowTransition({\n    isOpen: isActive,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) {\n    // eslint-disable-next-line no-null/no-null\n    return null;\n  }\n\n  return (\n    <div ref={ref} className={buildClassName(styles.root, isDoubled && styles.doubled, className)}>\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n    </div>\n  );\n}\n\nexport default memo(LoadingDots);\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"GpDwnAkE\",\"loadingInit\":\"tZ9ppkji\",\"clicked\":\"A1qGzs0x\",\"isSimple\":\"Cw_ElX3O\",\"isText\":\"d3A7BZDx\",\"primary\":\"Pb9B3sBE\",\"secondary\":\"k1jQrbAk\",\"transparent\":\"nxcFq7cM\",\"disabled\":\"zSwp1moR\",\"destructive\":\"tLZabe0e\",\"sizeSmall\":\"ORqfj0CU\",\"round\":\"PJ7EB5_T\",\"loadingStart\":\"pv1HwapI\",\"loadingDots\":\"_2QYUoJe\"};","import type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport LoadingDots from './LoadingDots';\n\nimport styles from './Button.module.scss';\n\nexport type OwnProps = {\n  ref?: ElementRef<HTMLButtonElement>;\n  children: TeactNode;\n  id?: string;\n  className?: string;\n  style?: string;\n  ariaLabel?: string;\n  forFormId?: string;\n  kind?: 'transparent';\n  isSubmit?: boolean;\n  isPrimary?: boolean;\n  isSecondary?: boolean;\n  isSmall?: boolean;\n  isSimple?: boolean;\n  isText?: boolean;\n  isLoading?: boolean;\n  isDisabled?: boolean;\n  isRound?: boolean;\n  isDestructive?: boolean;\n  shouldStopPropagation?: boolean;\n  onClick?: NoneToVoidFunction;\n  onMouseDown?: (e: React.MouseEvent) => void;\n  onContextMenu?: (e: React.MouseEvent) => void;\n};\n\n// Longest animation duration\nconst CLICKED_TIMEOUT = 400;\n\nfunction Button({\n  ref,\n  children,\n  id,\n  className,\n  style,\n  ariaLabel,\n  forFormId,\n  kind,\n  isSubmit,\n  isPrimary,\n  isSecondary,\n  isSmall,\n  isSimple,\n  isText,\n  isLoading,\n  isDisabled,\n  isRound,\n  isDestructive,\n  shouldStopPropagation,\n  onClick,\n  onMouseDown,\n  onContextMenu,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = useLastCallback((event: React.MouseEvent) => {\n    if (!isDisabled && onClick) {\n      if (shouldStopPropagation) {\n        event.stopPropagation();\n      }\n      onClick();\n    }\n\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT);\n  });\n\n  const loadingClassName = buildClassName(\n    isLoading !== undefined && styles.loadingInit,\n    isLoading && styles.loadingStart,\n  );\n\n  return (\n    <button\n      id={id}\n      ref={ref}\n      type={isSubmit || forFormId ? 'submit' : 'button'}\n      className={buildClassName(\n        styles.button,\n        isPrimary && styles.primary,\n        isSecondary && styles.secondary,\n        isSmall && styles.sizeSmall,\n        isSimple && styles.isSimple,\n        isText && styles.isText,\n        (isDisabled || isLoading) && styles.disabled,\n        loadingClassName,\n        isRound && styles.round,\n        isDestructive && styles.destructive,\n        isClicked && styles.clicked,\n        className,\n        kind && styles[kind],\n      )}\n      style={style}\n      aria-label={ariaLabel}\n      disabled={isDisabled || isLoading}\n      form={forFormId}\n      onClick={handleClick}\n      onMouseDown={onMouseDown}\n      onContextMenu={onContextMenu}\n    >\n      {children}\n      <LoadingDots isActive={isLoading} className={styles.loadingDots} />\n    </button>\n  );\n}\n\nexport default memo(Button);\n","import type { VirtualElement } from '../../lib/teact/teact';\nimport { useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport TeactDOM from '../../lib/teact/teact-dom';\n\ntype OwnProps = {\n  containerId?: string;\n  className?: string;\n  style?: string;\n  children: VirtualElement;\n};\n\nfunction Portal({\n  containerId, className, style, children,\n}: OwnProps): TeactJsx {\n  const elementRef = useRef<HTMLDivElement>();\n  if (!elementRef.current) {\n    elementRef.current = document.createElement('div');\n  }\n\n  useLayoutEffect(() => {\n    const container = document.querySelector<HTMLDivElement>(containerId || '#portals');\n    if (!container) {\n      return undefined;\n    }\n\n    const element = elementRef.current!;\n\n    if (className) {\n      element.className = className;\n    }\n\n    if (style) {\n      element.style.cssText = style;\n    }\n\n    container.appendChild(element);\n\n    return () => {\n      TeactDOM.render(undefined, element);\n      container.removeChild(element);\n    };\n  }, [className, style, containerId]);\n\n  return TeactDOM.render(children, elementRef.current);\n}\n\nexport default Portal;\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"bei20BXo\",\"inAppLock\":\"rhy5UM19\",\"error\":\"ycQPrkNy\",\"dialog\":\"lCrWZOJa\",\"backdrop\":\"BRHUYooL\",\"slideUpAnimation\":\"ciD50Ivv\",\"container\":\"pI0zvyZ_\",\"forceBottomSheet\":\"zXbZnJvJ\",\"content\":\"ikANOLRm\",\"noBackdrop\":\"JdyYzya2\",\"compact\":\"OIC6BQI4\",\"header\":\"LB42p81C\",\"header_wideContent\":\"_ijqgHQC\",\"headerWideContent\":\"_ijqgHQC\",\"header_back\":\"F2CCACcS\",\"headerBack\":\"F2CCACcS\",\"header_backIcon\":\"IubryJoO\",\"headerBackIcon\":\"IubryJoO\",\"menuButton\":\"nz22xGPo\",\"menuIcon\":\"NiajLgHY\",\"closeButton\":\"Oj6lWSUo\",\"closeIcon\":\"VPuUZtvp\",\"title\":\"ZDSNp0nr\",\"singleTitle\":\"Sv8Bhg5M\",\"contentCompact\":\"ulAHEr0t\",\"text\":\"FumpDc7T\",\"text_centered\":\"PRVdJNuh\",\"textCentered\":\"PRVdJNuh\",\"text_noExtraMargin\":\"JNEqsMcb\",\"textNoExtraMargin\":\"JNEqsMcb\",\"buttons\":\"PWLeFX8Z\",\"footerButtons\":\"fXtMQ4nZ\",\"footerButtonFullWidth\":\"KMr7BHAz\",\"buttonsInsideContentWithScroll\":\"SCBITBKB\",\"buttonsNoExtraSpace\":\"vyEjC2QK\",\"button\":\"pvjzjt3q\",\"buttonHalfWidth\":\"EhlEYVbZ\",\"buttonFullWidth\":\"zRgM4gqF\",\"shortButton\":\"QFWfMoly\",\"transition\":\"ELmioinr\",\"transitionSlide\":\"OXFBF6TX\",\"transitionContentWrapper\":\"N1r_Lya9\",\"transitionContent\":\"W4ZdBtyi\",\"transitionContent_simple\":\"qGdeWGzL\",\"transitionContentSimple\":\"qGdeWGzL\"};","import type { BottomSheetKeys } from '@mytonwallet/native-bottom-sheet';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type { ElementRef, RefObject, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  beginHeavyAnimation,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { ANIMATION_END_DELAY, IS_EXTENSION, IS_TELEGRAM_APP } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { getIsSwipeToCloseDisabled } from '../../util/modalSwipeManager';\nimport { createSignal } from '../../util/signals';\nimport {\n  disableTelegramMiniAppSwipeToClose,\n  enableTelegramMiniAppSwipeToClose,\n} from '../../util/telegram';\nimport trapFocus from '../../util/trapFocus';\nimport { IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport freezeWhenClosed from '../../hooks/freezeWhenClosed';\nimport { getIsForcedFullSize, useDelegatedBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDelegatingBottomSheet } from '../../hooks/useDelegatingBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHideBrowser from '../../hooks/useHideBrowser';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useToggleClass from '../../hooks/useToggleClass';\n\nimport Button from './Button';\nimport { getInAppBrowser } from './InAppBrowser';\nimport Portal from './Portal';\n\nimport styles from './Modal.module.scss';\n\ntype OwnProps = {\n  title?: string | TeactNode;\n  className?: string;\n  dialogClassName?: string;\n  titleClassName?: string;\n  contentClassName?: string;\n  isOpen?: boolean;\n  isCompact?: boolean;\n  nativeBottomSheetKey?: BottomSheetKeys;\n  forceFullNative?: boolean; // Always open in \"full\" size\n  noResetFullNativeOnBlur?: boolean; // Don't reset \"full\" size on blur\n  isInAppLock?: boolean;\n  forceBottomSheet?: boolean;\n  noBackdrop?: boolean;\n  noBackdropClose?: boolean;\n  header?: any;\n  hasCloseButton?: boolean;\n  children: TeactNode;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n  onEnter?: NoneToVoidFunction;\n  dialogRef?: ElementRef<HTMLDivElement>;\n};\n\ntype StateProps = {\n  isTemporarilyClosed: boolean;\n};\n\nexport const CLOSE_DURATION = 350;\nexport const CLOSE_DURATION_PORTRAIT = IS_ANDROID ? 200 : 500;\nconst SCROLL_CONTENT_CHECK_THRESHOLD_MS = 500;\n\nconst [getModalCloseSignal, setModalCloseSignal] = createSignal<number>(Date.now());\n\nexport function closeModal() {\n  setModalCloseSignal(Date.now());\n}\n\n// Track open modals with nativeBottomSheetKey\nconst openNativeBottomSheetModals = new Set<BottomSheetKeys>();\n\nexport function getIsAnyNativeBottomSheetModalOpen(): boolean {\n  return openNativeBottomSheetModals.size > 0;\n}\n\nfunction Modal({\n  dialogRef,\n  title,\n  className,\n  dialogClassName,\n  titleClassName,\n  contentClassName,\n  isOpen: doesWantToBeOpened,\n  isTemporarilyClosed,\n  isCompact,\n  nativeBottomSheetKey,\n  forceFullNative,\n  forceBottomSheet,\n  isInAppLock,\n  noResetFullNativeOnBlur,\n  noBackdrop,\n  noBackdropClose,\n  header,\n  hasCloseButton,\n  children,\n  onClose: onCloseProp,\n  onCloseAnimationEnd,\n  onEnter,\n}: OwnProps & StateProps): TeactJsx {\n  const isOpen = doesWantToBeOpened && !isTemporarilyClosed;\n  const onClose = useLastCallback(() => {\n    if (isTemporarilyClosed && doesWantToBeOpened) {\n      return undefined;\n    }\n\n    return onCloseProp();\n  });\n\n  const lang = useLang();\n\n  const modalRef = useRef<HTMLDivElement>();\n  const localDialogRef = useRef<HTMLDivElement>();\n  const swipeDownDateRef = useRef<number>();\n  dialogRef ||= localDialogRef;\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHideBrowser(isOpen, isCompact);\n\n  const animationDuration = (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n\n  const isSlideUp = !isCompact && isPortrait;\n\n  useHistoryBack({ isActive: isOpen, onBack: onClose, shouldIgnoreForTelegram: isCompact });\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || !isOpen || isCompact) return undefined;\n\n    disableTelegramMiniAppSwipeToClose();\n\n    return enableTelegramMiniAppSwipeToClose;\n  }, [isCompact, isOpen]);\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    // Expand NBS to full size for a compact modal inside NBS\n    if (IS_DELEGATED_BOTTOM_SHEET && isCompact && (prevIsOpen || isOpen) && !getIsForcedFullSize()) {\n      void BottomSheet.toggleSelfFullSize({ isFullSize: !!isOpen });\n    }\n  }, [isOpen, isCompact]);\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET || !isOpen) return undefined;\n\n    return getModalCloseSignal.subscribe(onClose);\n  }, [isOpen, onClose]);\n\n  useEffect(\n    () => (isOpen ? captureKeyboardListeners({\n      onEsc: { handler: onClose, shouldPreventDefault: IS_EXTENSION },\n      ...(onEnter && { onEnter }),\n    }) : undefined),\n    [isOpen, onClose, onEnter],\n  );\n  useEffect(() => (isOpen && modalRef.current ? trapFocus(modalRef.current) : undefined), [isOpen]);\n  useToggleClass({ className: 'is-modal-open', isActive: !isCompact && isOpen });\n\n  useLayoutEffect(() => (\n    isOpen ? beginHeavyAnimation(animationDuration) : undefined\n  ), [animationDuration, isOpen]);\n\n  // Track modal state for modals with nativeBottomSheetKey\n  useEffect(() => {\n    if (!nativeBottomSheetKey) return;\n\n    if (isOpen) {\n      openNativeBottomSheetModals.add(nativeBottomSheetKey);\n    } else {\n      openNativeBottomSheetModals.delete(nativeBottomSheetKey);\n    }\n\n    return () => {\n      openNativeBottomSheetModals.delete(nativeBottomSheetKey);\n    };\n  }, [isOpen, nativeBottomSheetKey]);\n\n  // Make sure to hide browser before presenting modals\n  const [isBrowserHidden, setIsBrowserHidden] = useState(false);\n  useEffect(() => {\n    const browser = getInAppBrowser();\n    if (!isOpen) {\n      setIsBrowserHidden(false); // Reset to re-hide it next time\n      // Before showing browser, make sure that closed modals are updated state properly\n      requestAnimationFrame(() => {\n        browser?.show();\n      });\n      return;\n    }\n\n    void browser?.hide().then(() => {\n      setIsBrowserHidden(true);\n    });\n  }, [isOpen]);\n\n  const isDelegatingToNative = useDelegatingBottomSheet(\n    nativeBottomSheetKey,\n    isPortrait,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose,\n  );\n\n  useDelegatedBottomSheet(\n    nativeBottomSheetKey,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose,\n    dialogRef,\n    forceFullNative,\n    noResetFullNativeOnBlur,\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isOpen || !isPortrait || !isSlideUp || IS_DELEGATED_BOTTOM_SHEET || isDelegatingToNative) {\n      return undefined;\n    }\n\n    return captureEvents(modalRef.current!, {\n      excludedClosestSelector: '.capture-scroll',\n      onSwipe: (e: Event, direction: SwipeDirection) => {\n        if (direction === SwipeDirection.Down && getCanCloseModal(swipeDownDateRef, e.target as HTMLElement)) {\n          onClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [isOpen, isPortrait, isSlideUp, isDelegatingToNative, onClose]);\n\n  const { shouldRender } = useShowTransition({\n    ref: modalRef,\n    isOpen: isOpen && !isDelegatingToNative,\n    onCloseAnimationEnd,\n    className: false,\n    closeDuration: animationDuration,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  function renderHeader() {\n    if (header) {\n      return header;\n    }\n\n    if (!title) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.header, styles.header_wideContent, !hasCloseButton && styles.header_noClose)}\n      >\n        <div className={buildClassName(styles.title, styles.singleTitle, titleClassName)}>{title}</div>\n        {hasCloseButton && (\n          <Button isRound className={styles.closeButton} ariaLabel={lang('Close')} onClick={onClose}>\n            <i className={buildClassName(styles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.modal,\n    className,\n    isSlideUp && styles.slideUpAnimation,\n    isCompact && styles.compact,\n    isCompact && 'is-compact-modal',\n    forceBottomSheet && styles.forceBottomSheet,\n    isInAppLock && styles.inAppLock,\n  );\n\n  const backdropFullClass = buildClassName(styles.backdrop, noBackdrop && styles.noBackdrop);\n\n  const contentFullClassName = buildClassName(\n    styles.content,\n    isCompact && styles.contentCompact,\n    'custom-scroll',\n    contentClassName,\n  );\n\n  return (\n    <Portal>\n      <div ref={modalRef} className={fullClassName} tabIndex={-1} role=\"dialog\">\n        <div className={styles.container}>\n          <div className={backdropFullClass} onClick={!noBackdropClose ? onClose : undefined} />\n          <div\n            className={buildClassName(styles.dialog, dialogClassName)}\n            ref={dialogRef}\n          >\n            {renderHeader()}\n            <div className={contentFullClassName}>{children}</div>\n          </div>\n        </div>\n      </div>\n    </Portal>\n  );\n}\n\nconst FreezeWhenClosedModal = freezeWhenClosed(Modal);\n\nexport default withGlobal((global, { isInAppLock }: OwnProps): StateProps => {\n  return {\n    // This behavior is intended to prevent NBS from rendering above the app lock screen,\n    // which is an iOS-only issue. We retain this fix on all platforms to unify behavior.\n    isTemporarilyClosed: !(isInAppLock || !global.isAppLockActive),\n  };\n})(FreezeWhenClosedModal);\n\nfunction getCanCloseModal(lastScrollRef: RefObject<number | undefined>, el?: HTMLElement) {\n  if (windowSize.getIsKeyboardVisible() || getIsSwipeToCloseDisabled()) {\n    return false;\n  }\n\n  const now = Date.now();\n  if (lastScrollRef.current && now - lastScrollRef.current < SCROLL_CONTENT_CHECK_THRESHOLD_MS) {\n    return false;\n  }\n\n  lastScrollRef.current = now;\n  const scrollEl = el?.closest('.custom-scroll');\n\n  return !scrollEl || scrollEl.scrollTop === 0;\n}\n","import { type FC, type Props, useRef } from '../lib/teact/teact';\n\nexport default function freezeWhenClosed<T extends FC>(Component: T) {\n  function ComponentWrapper(props: Props) {\n    const newProps = useRef(props);\n\n    if (props.isOpen) {\n      newProps.current = props;\n    } else {\n      newProps.current = {\n        ...newProps.current,\n        isOpen: false,\n      };\n    }\n\n    return Component(newProps.current);\n  }\n\n  return ComponentWrapper as T;\n}\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\n\nimport { IS_CAPACITOR } from '../config';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useSyncEffect from './useSyncEffect';\n\nimport { getInAppBrowser } from '../components/ui/InAppBrowser';\n\nexport default function useHideBrowser(\n  isOpen?: boolean,\n  isCompact?: boolean,\n) {\n  useSyncEffect(() => {\n    if (!IS_CAPACITOR || IS_DELEGATED_BOTTOM_SHEET || isCompact) return;\n\n    const browser = getInAppBrowser();\n    if (!browser) return;\n\n    if (isOpen && browser) {\n      void browser.hide().then(async () => {\n        if (IS_DELEGATING_BOTTOM_SHEET) {\n          await BottomSheet.enable();\n        }\n      });\n    }\n  }, [isCompact, isOpen]);\n}\n","import type { InAppBrowserObject } from '@awesome-cordova-plugins/in-app-browser';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_DEFAULT } from '../../config';\nimport { INAPP_BROWSER_OPTIONS } from '../../util/capacitor';\nimport { listenOnce } from '../../util/domEvents';\nimport { buildInAppBrowserBridgeConnectorCode } from '../../util/embeddedDappBridge/connector/inAppBrowserConnector';\nimport { useInAppBrowserBridgeProvider } from '../../util/embeddedDappBridge/provider/useInAppBrowserBridgeProvider';\nimport { compact } from '../../util/iteratees';\nimport { logDebugError } from '../../util/logs';\nimport { waitFor } from '../../util/schedulers';\nimport { getHostnameFromUrl } from '../../util/url';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS, IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport { getIsAnyNativeBottomSheetModalOpen } from './Modal';\n\ntype CustomInAppBrowserObject = Omit<InAppBrowserObject, 'hide' | 'close'> & {\n  hide(): Promise<void>;\n  close(): Promise<void>;\n};\n\ninterface StateProps {\n  title?: string;\n  subtitle?: string;\n  url?: string;\n  theme: string;\n  animationLevel?: number;\n}\n\n// The maximum time the in-app browser will take to close (and a little more as a safe margin)\nconst CLOSE_MAX_DURATION = 900;\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nlet inAppBrowser: Cordova['InAppBrowser'] | undefined;\n\nfunction InAppBrowser({\n  title, subtitle, url, theme, animationLevel,\n}: StateProps) {\n  const { closeBrowser } = getActions();\n\n  const lang = useLang();\n\n  const { setupDappBridge, cleanupDappBridge } = useInAppBrowserBridgeProvider(url);\n  const bridgeInjectionCode = useMemo(() => buildInAppBrowserBridgeConnectorCode(), []);\n\n  const handleError = useLastCallback((err: any) => {\n    logDebugError('inAppBrowser error', err);\n  });\n\n  const handleBrowserClose = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      await BottomSheet.enable();\n    }\n\n    inAppBrowser.removeEventListener('loaderror', handleError);\n    inAppBrowser.removeEventListener('exit', handleBrowserClose);\n    inAppBrowser = undefined;\n    closeBrowser();\n\n    cleanupDappBridge();\n  });\n\n  const openBrowser = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET && !(await BottomSheet.isShown()).value) {\n      await BottomSheet.disable();\n    }\n\n    const browserTitle = !title && url ? getHostnameFromUrl(url) : title;\n    const browserSubtitle = subtitle === browserTitle ? undefined : subtitle;\n\n    const ADDITIONAL_INAPP_BROWSER_OPTIONS = `,${compact([\n      IS_IOS || browserTitle ? `title=${browserTitle || ''}` : undefined,\n      IS_IOS || browserSubtitle ? `subtitle=${browserSubtitle || ''}` : undefined,\n      url ? `shareurl=${encodeURIComponent(url)}` : undefined,\n      `closebuttoncaption=${IS_IOS ? lang('Close') : 'x'}`,\n      `backbuttoncaption=${lang('Back')}`,\n      `reloadcaption=${lang('Reload Page')}`,\n      `openinbrowsercaption=${lang(IS_IOS ? 'Open in Safari' : 'Open in Browser')}`,\n      `copyurlcaption=${lang('CopyURL')}`,\n      `sharecaption=${lang('Share')}`,\n      `theme=${theme}`,\n      `animated=${animationLevel ?? ANIMATION_LEVEL_DEFAULT > 0 ? 'yes' : 'no'}`,\n    ]).join(',')}`;\n    inAppBrowser = cordova.InAppBrowser.open(\n      url,\n      '_blank',\n      INAPP_BROWSER_OPTIONS + ADDITIONAL_INAPP_BROWSER_OPTIONS,\n      bridgeInjectionCode,\n    );\n\n    const originalHide = inAppBrowser.hide;\n    inAppBrowser.hide = () => {\n      return new Promise<void>((resolve) => {\n        originalHide?.();\n        // On iOS, the animation takes some time. We have to ensure it's completed.\n        if (inAppBrowser && IS_IOS_APP) {\n          listenOnce(inAppBrowser, 'hidecompletion', () => resolve());\n        } else {\n          resolve();\n        }\n      });\n    };\n\n    const originalShow = inAppBrowser.show;\n    inAppBrowser.show = () => {\n      if (!getIsAnyNativeBottomSheetModalOpen()) {\n        originalShow?.();\n      }\n    };\n\n    const originalClose = inAppBrowser.close;\n    inAppBrowser.close = () => {\n      if (!inAppBrowser) {\n        return Promise.resolve();\n      }\n\n      originalClose();\n\n      const closedPromise = new Promise<void>((resolve) => {\n        // The `waitFor` is a hack necessary to ensure the browser is fully in the closed state when the promise\n        // resolves. This solves a bug: if a push notification, that opens a modal, was clicked while the in-app browser\n        // was open, the browser would close, but the modal wouldn't open.\n        listenOnce(inAppBrowser, 'exit', async () => {\n          await waitFor(() => !inAppBrowser, 15, 20);\n          resolve();\n        });\n\n        // A backup for cases when the `close()` call doesn't cause the browser to close and fire the `exit` event.\n        setTimeout(resolve, CLOSE_MAX_DURATION);\n      });\n\n      // Calling `show()` while the browser is being closed causes the app to crash. So we disable the `show` method.\n      inAppBrowser.show = () => undefined;\n      inAppBrowser.hide = () => closedPromise;\n\n      return closedPromise;\n    };\n\n    setupDappBridge(inAppBrowser);\n\n    inAppBrowser.addEventListener('loaderror', handleError);\n    inAppBrowser.addEventListener('exit', handleBrowserClose);\n    inAppBrowser.show();\n  });\n\n  useEffect(() => {\n    if (!url) return undefined;\n\n    void openBrowser();\n\n    return () => inAppBrowser?.close();\n  }, [url]);\n\n  return undefined;\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentBrowserOptions, settings } = global;\n\n  return {\n    url: currentBrowserOptions?.url,\n    title: currentBrowserOptions?.title,\n    subtitle: currentBrowserOptions?.subtitle,\n    theme: settings.theme,\n    animationLevel: settings.animationLevel,\n  };\n})(InAppBrowser));\n\nexport function getInAppBrowser(): CustomInAppBrowserObject | undefined {\n  return inAppBrowser;\n}\n","import type { ElementRef } from '../../../lib/teact/teact';\nimport { useEffect, useRef } from '../../../lib/teact/teact';\n\nimport { EMBEDDED_DAPP_BRIDGE_CHANNEL } from '../../../config';\nimport { createPostMessageInterface } from '../../createPostMessageInterface';\nimport { buildBridgeApi } from './bridgeApi';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport InAppBrowserPostMessageAdapter from './InAppBrowserPostMessageAdapter';\n\nexport function useInAppBrowserBridgeProvider(pageUrl?: string) {\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  const setupDappBridge = useLastCallback((inAppBrowser: ElementRef<Cordova['InAppBrowser']>) => {\n    cleanupRef.current = createPostMessageInterface(\n      buildBridgeApi(pageUrl!),\n      EMBEDDED_DAPP_BRIDGE_CHANNEL,\n      new InAppBrowserPostMessageAdapter(inAppBrowser),\n    );\n  });\n\n  useEffect(() => {\n    if (!pageUrl) return;\n\n    return () => {\n      cleanupRef.current?.();\n    };\n  }, [pageUrl]);\n\n  return {\n    setupDappBridge,\n    cleanupDappBridge: () => cleanupRef.current?.(),\n  };\n}\n","import {\n  EMBEDDED_DAPP_BRIDGE_CHANNEL,\n  TONCONNECT_PROTOCOL_VERSION,\n  TONCONNECT_WALLET_JSBRIDGE_KEY,\n} from '../../../config';\nimport { tonConnectGetDeviceInfo } from '../../tonConnectEnvironment';\nimport { initConnectorString } from './connector';\n\nexport function buildInAppBrowserBridgeConnectorCode() {\n  return `\n(${initConnectorString})(\n  '${TONCONNECT_WALLET_JSBRIDGE_KEY}',\n  '${EMBEDDED_DAPP_BRIDGE_CHANNEL}',\n  'cordova_iab' in window ? window.cordova_iab : window.webkit.messageHandlers.cordova_iab,\n  {\n    deviceInfo: ${JSON.stringify(tonConnectGetDeviceInfo())},\n    protocolVersion: ${TONCONNECT_PROTOCOL_VERSION},\n    isWalletBrowser: true,\n  }\n);\n  `;\n}\n","import type { ApiChain } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug, getNativeToken } from '../../util/tokens';\nimport { getActions } from '../index';\nimport { selectCurrentAccount } from '../selectors';\n\nimport { getInAppBrowser } from '../../components/ui/InAppBrowser';\n\n/**\n * Parses the transfer parameters from the given QR content, assuming it's a plain address.\n * Returns `undefined` if this is not a valid address or the account doesn't have the corresponding wallet.\n */\nexport function parsePlainAddressQr(global: GlobalState, qrData: string) {\n  const availableChains = selectCurrentAccount(global)?.addressByChain ?? {};\n  const newChain = getChainFromAddress(qrData, availableChains);\n  if (!newChain) {\n    return undefined;\n  }\n\n  const currentTokenSlug = global.currentTransfer.tokenSlug;\n  const currentChain = getChainBySlug(currentTokenSlug);\n  const newTokenSlug = newChain !== currentChain ? getNativeToken(newChain).slug : currentTokenSlug;\n\n  return {\n    toAddress: qrData,\n    tokenSlug: newTokenSlug,\n  };\n}\n\nfunction getChainFromAddress(\n  address: string,\n  availableChains: Partial<Record<ApiChain, unknown>>,\n): ApiChain | undefined {\n  for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n    if (isValidAddressOrDomain(address, chain)) {\n      return chain;\n    }\n  }\n\n  return undefined;\n}\n\nexport function closeAllOverlays() {\n  return Promise.all([\n    // It's important to close the in-app browser before closing the modal, because when a modal closes, it calls\n    // `show()` on the hidden in-app browser, and calling `close()` right after `show()` causes the app to crash.\n    // Meanwhile, calling `close()` before `show()` makes the in-app browser ignore the `show()` call.\n    // A situation, where it happens, is pressing an \"openUrl\" notification while the app shows a TON Connect modal.\n    getInAppBrowser()?.close(),\n    getActions().closeAnyModal(),\n    getActions().closeMediaViewer(),\n  ]);\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceActivityId(oldId: string | undefined, replaceMap: Record<string, string>) {\n  const newId = oldId && replaceMap[oldId];\n  return newId || oldId;\n}\n","import { AppLauncher } from '@capacitor/app-launcher';\nimport { getActions, getGlobal } from '../global';\n\nimport { IFRAME_WHITELIST, IS_CAPACITOR, SUBPROJECT_URL_MASK } from '../config';\nimport { closeAllOverlays } from '../global/helpers/misc';\nimport { isTelegramUrl } from './url';\n\nconst [, SUBPROJECT_HOST_ENDING] = SUBPROJECT_URL_MASK.split('*');\n\nexport type OpenUrlOptions = {\n  isExternal?: boolean;\n  title?: string;\n  subtitle?: string;\n};\n\nexport async function openUrl(url: string, options?: OpenUrlOptions) {\n  if (isSubproject(url)) {\n    url = `${url}#theme=${getGlobal().settings.theme}`;\n  }\n\n  if (\n    !options?.isExternal\n    && url.startsWith('http')\n    && (IS_CAPACITOR || isSubproject(url) || isInIframeWhitelist(url))\n    && !isTelegramUrl(url)\n  ) {\n    await closeAllOverlays();\n    getActions().openBrowser({\n      url,\n      title: options?.title,\n      subtitle: options?.subtitle,\n    });\n  } else {\n    const couldOpenApp = IS_CAPACITOR && await openAppSafe(url);\n    if (!couldOpenApp) {\n      window.open(url, '_blank', 'noopener');\n    }\n  }\n}\n\nfunction isSubproject(url: string) {\n  const { host } = new URL(url);\n  return host.endsWith(SUBPROJECT_HOST_ENDING) || host.startsWith('localhost:432');\n}\n\nfunction isInIframeWhitelist(url: string) {\n  return IFRAME_WHITELIST.some((allowedOrigin) => url.startsWith(allowedOrigin.replace(/\\*$/, '')));\n}\n\nexport function handleUrlClick(\n  e: React.MouseEvent<HTMLAnchorElement, MouseEvent>,\n) {\n  e.preventDefault();\n  void openUrl(e.currentTarget.href, {\n    isExternal: e.shiftKey || e.ctrlKey || e.metaKey,\n  });\n}\n\nasync function openAppSafe(url: string) {\n  try {\n    return (await AppLauncher.openUrl({ url })).completed;\n  } catch (err) {\n    return false;\n  }\n}\n","let resolveRenderPromise: NoneToVoidFunction;\nconst renderPromise = new Promise<void>((resolve) => {\n  resolveRenderPromise = resolve;\n});\n\nexport function resolveRender() {\n  resolveRenderPromise();\n}\n\nexport function waitRender() {\n  return renderPromise;\n}\n","export const TON_PROTOCOL = 'ton://';\nexport const TONCONNECT_PROTOCOL = 'tc://';\nexport const TONCONNECT_PROTOCOL_SELF = 'mytonwallet-tc://';\nexport const SELF_PROTOCOL = 'mtw://';\nexport const SELF_UNIVERSAL_URLS = ['https://my.tt', 'https://go.mytonwallet.org'];\nexport const TONCONNECT_UNIVERSAL_URL = 'https://connect.mytonwallet.org';\nexport const CHECKIN_URL = 'https://checkin.mytonwallet.org';\n","import { getActions, getGlobal } from '../../global';\n\nimport type { ActionPayloads, GlobalState } from '../../global/types';\nimport type { OpenUrlOptions } from '../openUrl';\nimport { ActiveTab, ContentTab } from '../../global/types';\n\nimport {\n  DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  GIVEAWAY_CHECKIN_URL,\n  IS_CAPACITOR,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectAccountTokenBySlug,\n  selectCurrentAccount,\n  selectCurrentAccountNftByAddress,\n  selectTokenByMinterAddress,\n} from '../../global/selectors';\nimport { callApi } from '../../api';\nimport { switchToAir } from '../capacitor';\nimport { isValidAddressOrDomain } from '../isValidAddressOrDomain';\nimport { omitUndefined } from '../iteratees';\nimport { logDebug, logDebugError } from '../logs';\nimport { openUrl } from '../openUrl';\nimport { waitRender } from '../renderPromise';\nimport { isTelegramUrl } from '../url';\nimport {\n  CHECKIN_URL,\n  SELF_PROTOCOL,\n  SELF_UNIVERSAL_URLS,\n  TON_PROTOCOL,\n  TONCONNECT_PROTOCOL,\n  TONCONNECT_PROTOCOL_SELF,\n  TONCONNECT_UNIVERSAL_URL,\n} from './constants';\n\nimport { getIsLandscape, getIsPortrait } from '../../hooks/useDeviceScreen';\n\nenum DeeplinkCommand {\n  Air = 'air',\n  CheckinWithR = 'r',\n  Swap = 'swap',\n  BuyWithCrypto = 'buy-with-crypto',\n  BuyWithCard = 'buy-with-card',\n  Stake = 'stake',\n  Giveaway = 'giveaway',\n  Transfer = 'transfer',\n  Explore = 'explore',\n}\n\nlet urlAfterSignIn: string | undefined;\n\nexport function processDeeplinkAfterSignIn() {\n  if (!urlAfterSignIn) return;\n\n  void processDeeplink(urlAfterSignIn);\n\n  urlAfterSignIn = undefined;\n}\n\nexport async function openDeeplinkOrUrl(\n  url: string,\n  { isFromInAppBrowser, ...urlOptions }: OpenUrlOptions & { isFromInAppBrowser?: boolean },\n) {\n  if (isTonDeeplink(url) || isTonConnectDeeplink(url) || isSelfDeeplink(url)) {\n    await processDeeplink(url, isFromInAppBrowser);\n  } else {\n    await openUrl(url, urlOptions);\n  }\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport function processDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!getGlobal().currentAccountId) {\n    urlAfterSignIn = url;\n  }\n\n  if (isTonConnectDeeplink(url)) {\n    return processTonConnectDeeplink(url, isFromInAppBrowser);\n  } else if (isSelfDeeplink(url)) {\n    return processSelfDeeplink(url);\n  } else {\n    return processTonDeeplink(url);\n  }\n}\n\nexport function isTonDeeplink(url: string) {\n  return url.startsWith(TON_PROTOCOL);\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonDeeplink(url: string): Promise<boolean> {\n  await waitRender();\n\n  const actions = getActions();\n  const global = getGlobal();\n  if (!global.currentAccountId) {\n    return false;\n  }\n\n  const startTransferParams = parseTonDeeplink(url, global);\n\n  if (!startTransferParams) {\n    return false;\n  }\n\n  if ('error' in startTransferParams) {\n    actions.showError({ error: startTransferParams.error });\n    return true;\n  }\n\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    ...startTransferParams,\n  });\n\n  if (getIsLandscape()) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n\n  return true;\n}\n\n/**\n * Parses a TON deeplink and checks whether the transfer can be initiated.\n * Returns `undefined` if the URL is not a TON deeplink.\n * If there is `error` in the result, there is a problem with the deeplink (the string is to translate via `lang`).\n * Otherwise, returned the parsed transfer parameters.\n */\nexport function parseTonDeeplink(url: string, global: GlobalState) {\n  const params = rawParseTonDeeplink(url);\n  if (!params) return undefined;\n\n  if (params.hasUnsupportedParams) {\n    return {\n      error: '$unsupported_deeplink_parameter',\n    };\n  }\n\n  const {\n    toAddress,\n    amount,\n    comment,\n    binPayload,\n    jettonAddress,\n    nftAddress,\n    stateInit,\n    exp,\n  } = params;\n\n  const verifiedAddress = isValidAddressOrDomain(toAddress, 'ton') ? toAddress : undefined;\n\n  const transferParams: Omit<NonNullable<ActionPayloads['startTransfer']>, 'isPortrait'> & { error?: string } = {\n    toAddress: verifiedAddress,\n    tokenSlug: TONCOIN.slug,\n    amount,\n    comment,\n    binPayload,\n    stateInit,\n  };\n\n  // Check if both text and bin parameters are provided (mutually exclusive)\n  if (comment && binPayload) {\n    transferParams.error = '$transfer_text_and_bin_exclusive';\n  }\n\n  if (jettonAddress) {\n    const globalToken = jettonAddress\n      ? selectTokenByMinterAddress(global, jettonAddress)\n      : undefined;\n\n    if (!globalToken) {\n      transferParams.error = '$unknown_token_address';\n    } else {\n      const accountToken = selectAccountTokenBySlug(global, globalToken.slug);\n\n      if (!accountToken) {\n        transferParams.error = '$dont_have_required_token';\n      } else {\n        transferParams.tokenSlug = globalToken.slug;\n      }\n    }\n  }\n\n  if (nftAddress) {\n    const accountNft = selectCurrentAccountNftByAddress(global, nftAddress);\n\n    if (!accountNft) {\n      transferParams.error = '$dont_have_required_nft';\n    } else {\n      transferParams.nfts = [accountNft];\n    }\n  }\n\n  if (exp && Math.floor(Date.now() / 1000) > exp) {\n    transferParams.error = '$transfer_link_expired';\n  }\n\n  return omitUndefined(transferParams);\n}\n\nfunction rawParseTonDeeplink(value?: string) {\n  if (typeof value !== 'string' || !isTonDeeplink(value) || !value.includes('/transfer/')) {\n    return undefined;\n  }\n\n  try {\n    // In some browsers URL module may handle non-standard protocols incorrectly\n    const adaptedDeeplink = value.replace(TON_PROTOCOL, 'https://');\n    const url = new URL(adaptedDeeplink);\n\n    const toAddress = url.pathname.replace(/\\//g, '');\n    const amount = getDeeplinkSearchParam(url, 'amount');\n    const comment = getDeeplinkSearchParam(url, 'text');\n    const binPayload = getDeeplinkSearchParam(url, 'bin');\n    const jettonAddress = getDeeplinkSearchParam(url, 'jetton');\n    const nftAddress = getDeeplinkSearchParam(url, 'nft');\n    const stateInit = getDeeplinkSearchParam(url, 'init') || getDeeplinkSearchParam(url, 'stateInit');\n    const exp = getDeeplinkSearchParam(url, 'exp');\n\n    // Check for unsupported parameters\n    const supportedParams = new Set(['amount', 'text', 'bin', 'jetton', 'nft', 'init', 'stateInit', 'exp']);\n    const urlParams = Array.from(url.searchParams.keys());\n    const hasUnsupportedParams = urlParams.some((param) => !supportedParams.has(param));\n\n    return {\n      hasUnsupportedParams,\n      toAddress,\n      amount: amount ? BigInt(amount) : undefined,\n      comment,\n      jettonAddress,\n      nftAddress,\n      binPayload: binPayload ? replaceAllSpacesWithPlus(binPayload) : undefined,\n      stateInit: stateInit ? replaceAllSpacesWithPlus(stateInit) : undefined,\n      exp: exp ? Number(exp) : undefined,\n    };\n  } catch (err) {\n    return undefined;\n  }\n}\n\nfunction isTonConnectDeeplink(url: string) {\n  return url.startsWith(TONCONNECT_PROTOCOL)\n    || url.startsWith(TONCONNECT_PROTOCOL_SELF)\n    || omitProtocol(url).startsWith(omitProtocol(TONCONNECT_UNIVERSAL_URL));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonConnectDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!isTonConnectDeeplink(url)) {\n    return false;\n  }\n\n  const { openLoadingOverlay, closeLoadingOverlay } = getActions();\n\n  openLoadingOverlay();\n\n  const returnUrl = await callApi('startSseConnection', {\n    url,\n    isFromInAppBrowser,\n  });\n\n  // Workaround for long network connection initialization in the Capacitor version\n  if (returnUrl === 'empty') {\n    return true;\n  }\n\n  closeLoadingOverlay();\n\n  if (returnUrl) {\n    void openUrl(returnUrl, { isExternal: !isFromInAppBrowser });\n  }\n\n  return true;\n}\n\nexport function isSelfDeeplink(url: string) {\n  url = forceHttpsProtocol(url);\n\n  return url.startsWith(SELF_PROTOCOL)\n    || SELF_UNIVERSAL_URLS.some((u) => url.startsWith(u));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport async function processSelfDeeplink(deeplink: string): Promise<boolean> {\n  try {\n    deeplink = convertSelfDeeplinkToSelfUrl(deeplink);\n\n    const { pathname, searchParams } = new URL(deeplink);\n    const command = pathname.split('/').find(Boolean);\n    const actions = getActions();\n    const global = getGlobal();\n    const { isTestnet } = global.settings;\n    const isLedger = selectCurrentAccount(global)?.ledger;\n\n    logDebug('Processing deeplink', deeplink);\n\n    switch (command) {\n      case DeeplinkCommand.Air: {\n        if (!IS_CAPACITOR) return false;\n        switchToAir();\n        return true;\n      }\n\n      case DeeplinkCommand.CheckinWithR: {\n        const r = pathname.match(/r\\/(.*)$/)?.[1];\n        const url = `${CHECKIN_URL}${r ? `?r=${r}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Giveaway: {\n        const giveawayId = pathname.match(/giveaway\\/([^/]+)/)?.[1];\n        const url = `${GIVEAWAY_CHECKIN_URL}${giveawayId ? `?giveawayId=${giveawayId}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Swap: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || TONCOIN.slug,\n            tokenOutSlug: searchParams.get('out') || DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '10',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCrypto: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n            tokenOutSlug: searchParams.get('out') || TONCOIN.slug,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '100',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCard: {\n        if (isTestnet) {\n          actions.showError({ error: 'Buying with card is not supported in Testnet.' });\n        } else {\n          actions.openOnRampWidgetModal({ chain: 'ton' });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Stake: {\n        if (isTestnet) {\n          actions.showError({ error: 'Staking is not supported in Testnet.' });\n        } else {\n          actions.startStaking();\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Transfer: {\n        return await processTonDeeplink(convertSelfUrlToTonDeeplink(deeplink));\n      }\n\n      case DeeplinkCommand.Explore: {\n        actions.closeSettings();\n        actions.openExplore();\n        actions.setActiveContentTab({ tab: ContentTab.Explore });\n\n        const host = pathname.split('/').filter(Boolean)[1];\n        if (host) {\n          const matchingSite = getGlobal().exploreData?.sites.find(({ url }) => {\n            const siteHost = isTelegramUrl(url)\n              ? new URL(url).pathname.split('/').filter(Boolean)[0]\n              : new URL(url).hostname;\n\n            return siteHost === host;\n          });\n\n          if (matchingSite) {\n            void openUrl(matchingSite.url);\n          }\n        }\n\n        return true;\n      }\n    }\n  } catch (err) {\n    logDebugError('processSelfDeeplink', err);\n  }\n\n  return false;\n}\n\n/**\n * Parses a deeplink and checks whether the transfer can be initiated.\n * See `parseTonDeeplink` for information about the returned values.\n */\nexport function parseDeeplinkTransferParams(url: string, global: GlobalState) {\n  let tonDeeplink = url;\n\n  if (isSelfDeeplink(url)) {\n    try {\n      url = convertSelfDeeplinkToSelfUrl(url);\n      const { pathname } = new URL(url);\n      const command = pathname.split('/').find(Boolean);\n\n      if (command === DeeplinkCommand.Transfer) {\n        tonDeeplink = convertSelfUrlToTonDeeplink(url);\n      }\n    } catch (err) {\n      logDebugError('parseDeeplinkTransferParams', err);\n    }\n  }\n\n  return parseTonDeeplink(tonDeeplink, global);\n}\n\nfunction convertSelfDeeplinkToSelfUrl(deeplink: string) {\n  if (deeplink.startsWith(SELF_PROTOCOL)) {\n    return deeplink.replace(SELF_PROTOCOL, `${SELF_UNIVERSAL_URLS[0]}/`);\n  }\n  return deeplink;\n}\n\nfunction convertSelfUrlToTonDeeplink(deeplink: string) {\n  deeplink = forceHttpsProtocol(deeplink);\n\n  for (const selfUniversalUrl of SELF_UNIVERSAL_URLS) {\n    if (deeplink.startsWith(selfUniversalUrl)) {\n      return deeplink.replace(`${selfUniversalUrl}/`, TON_PROTOCOL);\n    }\n  }\n\n  return deeplink;\n}\n\nfunction omitProtocol(url: string) {\n  return url.replace(/^https?:\\/\\//, '');\n}\n\nfunction forceHttpsProtocol(url: string) {\n  return url.replace(/^http:\\/\\//, 'https://');\n}\n\nfunction toNumberOrEmptyString(input?: string | null) {\n  return String(Number(input) || '');\n}\n\nfunction replaceAllSpacesWithPlus(value: string) {\n  return value.replace(/ /g, '+');\n}\n\nfunction getDeeplinkSearchParam(url: URL, param: string) {\n  return url.searchParams.get(param) ?? undefined;\n}\n","import { registerPlugin } from '@capacitor/core';\nconst PushNotifications = registerPlugin('PushNotifications', {});\nexport * from './definitions';\nexport { PushNotifications };\n//# sourceMappingURL=index.js.map","import type { ApiNotificationAddress } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { selectAccount } from './accounts';\n\n// This selector is not optimized for usage with React components wrapped by withGlobal\nexport function selectNotificationTonAddressesSlow(\n  global: GlobalState,\n  accountIds: string[],\n  maxCount: number = Infinity,\n): Record<string, ApiNotificationAddress> {\n  const result: Record<string, ApiNotificationAddress> = {};\n  let resultCount = 0;\n\n  for (const accountId of accountIds) {\n    if (resultCount >= maxCount) {\n      break;\n    }\n\n    const account = selectAccount(global, accountId);\n    const address = account?.addressByChain.ton;\n\n    if (address) {\n      result[accountId] = {\n        title: account.title,\n        address,\n        chain: 'ton',\n      };\n      resultCount += 1;\n    }\n  }\n\n  return result;\n}\n","export type CapacitorPlatform = 'ios' | 'android';\n\nlet platform: CapacitorPlatform | undefined;\n\nexport function setCapacitorPlatform(newPlatform: CapacitorPlatform) {\n  platform = newPlatform;\n}\n\nexport function getCapacitorPlatform() {\n  return platform;\n}\n","import { Capacitor } from '@capacitor/core';\nimport type { ActionPerformed, Token } from '@capacitor/push-notifications';\nimport { PushNotifications } from '@capacitor/push-notifications';\nimport { getActions, getGlobal, setGlobal } from '../../global';\n\nimport type { ApiStakingType } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\n\nimport { selectAccountIdByAddress } from '../../global/selectors';\nimport { selectNotificationTonAddressesSlow } from '../../global/selectors/notifications';\nimport { callApi } from '../../api';\nimport { MINUTE } from '../../api/constants';\nimport { pick } from '../iteratees';\nimport { logDebugError } from '../logs';\nimport { getCapacitorPlatform } from './platform';\n\ninterface ShowTxMessageData {\n  action: 'swap' | 'nativeTx';\n  address: string;\n  txId: string;\n}\n\ninterface StakingMessageData {\n  action: 'staking';\n  address: string;\n  stakingType: ApiStakingType;\n  stakingId: string;\n  logId: string;\n}\n\ninterface OpenActivityMessageData {\n  action: 'jettonTx';\n  address: string;\n  slug: string;\n}\n\ninterface OpenUrlMessageData {\n  action: 'openUrl';\n  // The wallet address that should be switched to before opening the URL\n  address?: string;\n  url: string;\n  // For the following parameters, see the `openUrl` options\n  isExternal?: boolean;\n  title?: string;\n  subtitle?: string;\n}\n\ninterface ExpiringDnsMessageData {\n  action: 'expiringDns';\n  address: string;\n  domain: string;\n  domainAddress: string;\n  daysUntilExpiration: string;\n}\n\ntype MessageData = StakingMessageData | OpenActivityMessageData | ShowTxMessageData | OpenUrlMessageData\n  | ExpiringDnsMessageData;\n\nlet nextUpdatePushNotifications = 0;\n\nexport async function initNotificationsWithGlobal(global: GlobalState) {\n  const isPushNotificationsAvailable = Capacitor.isPluginAvailable('PushNotifications');\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      isAvailable: isPushNotificationsAvailable,\n    },\n  });\n\n  if (!isPushNotificationsAvailable) {\n    return;\n  }\n\n  await PushNotifications.addListener('pushNotificationActionPerformed', handlePushNotificationActionPerformed);\n\n  await PushNotifications.addListener('registration', handlePushNotificationRegistration);\n\n  await PushNotifications.addListener('registrationError', (err) => {\n    logDebugError('Registration error: ', err.error);\n  });\n\n  let notificationStatus = await PushNotifications.checkPermissions();\n\n  if (notificationStatus.receive === 'prompt-with-rationale') {\n    return;\n  }\n\n  if (notificationStatus.receive === 'prompt') {\n    notificationStatus = await PushNotifications.requestPermissions();\n  }\n\n  if (notificationStatus.receive !== 'granted') {\n    // For request iOS returns 'denied', but 'granted' follows immediately without new requests\n    return;\n  }\n\n  await PushNotifications.register();\n}\n\nfunction handlePushNotificationActionPerformed(notification: ActionPerformed) {\n  const {\n    showAnyAccountTx,\n    showAnyAccountTokenActivity,\n    openAnyAccountStakingInfo,\n    switchAccountAndOpenUrl,\n    openDomainRenewalModal,\n  } = getActions();\n  const global = getGlobal();\n  const notificationData = notification.notification.data as MessageData;\n  const { action, address } = notificationData;\n  const accountId = address === undefined ? undefined : selectAccountIdByAddress(global, 'ton', address);\n  const network = 'mainnet';\n\n  if (action === 'openUrl') {\n    switchAccountAndOpenUrl({\n      accountId,\n      network,\n      ...pick(notificationData, ['url', 'isExternal', 'title', 'subtitle']),\n    });\n    return;\n  }\n\n  if (!accountId) return;\n\n  if (action === 'nativeTx' || action === 'swap') {\n    const { txId } = notificationData;\n    showAnyAccountTx({ accountId, txId, network });\n  } else if (action === 'jettonTx') {\n    const { slug } = notificationData;\n    showAnyAccountTokenActivity({ accountId, slug, network });\n  } else if (action === 'staking') {\n    const { stakingId } = notificationData;\n    openAnyAccountStakingInfo({ accountId, network, stakingId });\n  } else if (action === 'expiringDns') {\n    const { domainAddress } = notificationData;\n    openDomainRenewalModal({ accountId, network, addresses: [domainAddress] });\n  }\n}\n\nfunction handlePushNotificationRegistration(token: Token) {\n  const userToken = token.value;\n\n  getActions().registerNotifications({ userToken, platform: getCapacitorPlatform()! });\n\n  window.addEventListener('focus', async () => {\n    const global = getGlobal();\n    const notificationAccounts = Object.keys(global.pushNotifications.enabledAccounts || []);\n    if (notificationAccounts.length && nextUpdatePushNotifications <= Date.now()) {\n      await callApi('subscribeNotifications', {\n        userToken,\n        platform: getCapacitorPlatform()!,\n        addresses: Object.values(selectNotificationTonAddressesSlow(global, notificationAccounts)),\n      });\n      nextUpdatePushNotifications = Date.now() + (60 * MINUTE);\n    }\n  }, { capture: true });\n}\n","import type { URLOpenListenerEvent } from '@capacitor/app';\nimport { App } from '@capacitor/app';\nimport { Capacitor } from '@capacitor/core';\nimport { SplashScreen } from '@capacitor/splash-screen';\nimport { BiometryType, NativeBiometric } from '@capgo/capacitor-native-biometric';\nimport { AirAppLauncher } from '@mytonwallet/air-app-launcher';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport { getGlobal } from '../../global';\n\nimport type { AuthConfig } from '../authApi/types';\nimport type { CapacitorPlatform } from './platform';\n\nimport { GLOBAL_STATE_CACHE_KEY } from '../../config';\nimport { callApi } from '../../api';\nimport { processDeeplink } from '../deeplink';\nimport { logDebug } from '../logs';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../windowEnvironment';\nimport * as storageMethods from '../windowProvider/methods';\nimport { initNotificationsWithGlobal } from './notifications';\nimport { getCapacitorPlatform, setCapacitorPlatform } from './platform';\n\n// Full list of options can be found at https://github.com/apache/cordova-plugin-inappbrowser#cordovainappbrowseropen\nexport const INAPP_BROWSER_OPTIONS = [\n  `location=${IS_IOS ? 'no' : 'yes'}`,\n  `lefttoright=${IS_IOS ? 'no' : 'yes'}`,\n  'usewkwebview=yes',\n  'clearcache=no',\n  'clearsessioncache=no',\n  'hidden=yes',\n  'toolbarposition=top',\n  'hidenavigationbuttons=yes',\n  'hideurlbar=no',\n  'backbuttoncaption=Back',\n  'allowInlineMediaPlayback=yes',\n].join(',');\nconst IOS_SPLASH_SCREEN_HIDE_DELAY = 500;\nconst IOS_SPLASH_SCREEN_HIDE_DURATION = 600;\nexport const VIBRATE_SUCCESS_END_PAUSE_MS = 1300;\n\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\nlet statusBarHeight = 0;\nlet safeAreaTop = 0;\n\nlet capacitorAppLaunchDeeplinkProcessedAt = 0;\nconst CAPACITOR_APP_URL_OPEN_EVENT_IGNORE_DELAY_MS = 500;\n\nfunction updateSafeAreaValues(safeAreaInsets: SafeAreaInsets) {\n  for (const [key, value] of Object.entries(safeAreaInsets.insets)) {\n    document.documentElement.style.setProperty(\n      `--safe-area-${key}`,\n      `${getCapacitorPlatform() === 'android' && key === 'top' ? value + 8 : value}px`,\n    );\n  }\n}\n\nexport async function initCapacitor() {\n  setCapacitorPlatform(Capacitor.getPlatform() as CapacitorPlatform);\n\n  void SafeArea.getStatusBarHeight().then(({ statusBarHeight: height }) => {\n    statusBarHeight = height;\n    document.documentElement.style.setProperty('--status-bar-height', `${height}px`);\n  });\n\n  void SafeArea.getSafeAreaInsets().then(({ insets: { bottom, top } }) => {\n    safeAreaTop = top;\n    document.documentElement.style.setProperty('--safe-area-bottom', `${bottom}px`);\n  });\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    void SplashScreen.hide({ fadeOutDuration: 0 });\n    return;\n  }\n\n  if (getCapacitorPlatform() === 'ios') {\n    setTimeout(() => {\n      void SplashScreen.hide({ fadeOutDuration: IOS_SPLASH_SCREEN_HIDE_DURATION });\n    }, IOS_SPLASH_SCREEN_HIDE_DELAY);\n  }\n\n  void App.addListener('appUrlOpen', (event: URLOpenListenerEvent) => {\n    // Prevent processing the same deeplink twice on cold start\n    // 1. `app.getLaunchUrl()` returns the deeplink\n    // 2. And the `appUrlOpen` event contains the same deeplink\n    if (Date.now() - capacitorAppLaunchDeeplinkProcessedAt > CAPACITOR_APP_URL_OPEN_EVENT_IGNORE_DELAY_MS) {\n      void processDeeplink(event.url);\n    } else {\n      logDebug(`[CAPACITOR] appUrlOpen event ignored`, event);\n    }\n  });\n\n  void App.addListener('backButton', ({ canGoBack }) => {\n    if (canGoBack) {\n      window.history.back();\n    } else {\n      void App.exitApp();\n    }\n  });\n\n  updateSafeAreaValues(await SafeArea.getSafeAreaInsets());\n\n  await SafeArea.addListener('safeAreaChanged', (data) => {\n    updateSafeAreaValues(data);\n  });\n}\n\nexport async function processCapacitorLaunchDeeplink() {\n  const launchUrl = (await App.getLaunchUrl())?.url;\n\n  if (launchUrl) {\n    void processDeeplink(launchUrl);\n  }\n\n  capacitorAppLaunchDeeplinkProcessedAt = Date.now();\n}\n\nexport async function initCapacitorWithGlobal(authConfig?: AuthConfig) {\n  const isNativeBiometricAuthEnabled = !!authConfig && authConfig.kind === 'native-biometrics';\n\n  const biometricsAvailableResult = await NativeBiometric.isAvailable({\n    isWeakAuthenticatorAllowed: isNativeBiometricAuthEnabled,\n    useFallback: false,\n  });\n\n  isNativeBiometricAuthSupported = biometricsAvailableResult.isAvailable;\n  isFaceIdAvailable = biometricsAvailableResult.biometryType === BiometryType.FACE_ID;\n  isTouchIdAvailable = biometricsAvailableResult.biometryType === BiometryType.TOUCH_ID;\n\n  void initNotificationsWithGlobal(getGlobal());\n}\n\nexport function getStatusBarHeight() {\n  return statusBarHeight;\n}\n\nexport function getSafeAreaTop() {\n  return safeAreaTop;\n}\n\nexport function getIsCapacitorBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsCapacitorFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsCapacitorTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport async function fixIosAppStorage() {\n  await storageMethods.init();\n\n  const isLocalStorageDataExists = Boolean(window.localStorage.getItem(GLOBAL_STATE_CACHE_KEY));\n  const isApiStorageDataExists = Boolean(await storageMethods.capacitorStorageGetItem('accounts'));\n\n  if (isLocalStorageDataExists && !isApiStorageDataExists) {\n    window.localStorage.clear();\n  }\n\n  if (!isLocalStorageDataExists && isApiStorageDataExists) {\n    await storageMethods.capacitorStorageClear();\n  }\n}\n\nexport function switchToAir() {\n  void callApi('destroy');\n  AirAppLauncher.switchToAir();\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport {\n  getIsCapacitorBiometricAuthSupported,\n  getIsCapacitorFaceIdAvailable,\n  getIsCapacitorTouchIdAvailable,\n} from './capacitor';\nimport {\n  getIsTelegramBiometricAuthSupported,\n  getIsTelegramFaceIdAvailable,\n  getIsTelegramTouchIdAvailable,\n} from './telegram';\nimport { getIsMobileTelegramApp, IS_BIOMETRIC_AUTH_SUPPORTED } from './windowEnvironment';\n\nexport function getIsBiometricAuthSupported() {\n  return IS_BIOMETRIC_AUTH_SUPPORTED || getIsNativeBiometricAuthSupported();\n}\n\nexport function getIsNativeBiometricAuthSupported() {\n  return (IS_CAPACITOR && getIsCapacitorBiometricAuthSupported())\n    || (IS_TELEGRAM_APP && getIsTelegramBiometricAuthSupported());\n}\n\nexport function getIsFaceIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorFaceIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramFaceIdAvailable());\n}\n\nexport function getIsTouchIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorTouchIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramTouchIdAvailable());\n}\n\nexport function getDoesUsePinPad() {\n  return IS_CAPACITOR || getIsMobileTelegramApp();\n}\n","import { WebPlugin } from '@capacitor/core';\nexport class ClipboardWeb extends WebPlugin {\n    async write(options) {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (options.string !== undefined) {\n            await this.writeText(options.string);\n        }\n        else if (options.url) {\n            await this.writeText(options.url);\n        }\n        else if (options.image) {\n            if (typeof ClipboardItem !== 'undefined') {\n                try {\n                    const blob = await (await fetch(options.image)).blob();\n                    const clipboardItemInput = new ClipboardItem({ [blob.type]: blob });\n                    await navigator.clipboard.write([clipboardItemInput]);\n                }\n                catch (err) {\n                    throw new Error('Failed to write image');\n                }\n            }\n            else {\n                throw this.unavailable('Writing images to the clipboard is not supported in this browser');\n            }\n        }\n        else {\n            throw new Error('Nothing to write');\n        }\n    }\n    async read() {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (typeof ClipboardItem !== 'undefined') {\n            try {\n                const clipboardItems = await navigator.clipboard.read();\n                const type = clipboardItems[0].types[0];\n                const clipboardBlob = await clipboardItems[0].getType(type);\n                const data = await this._getBlobData(clipboardBlob, type);\n                return { value: data, type };\n            }\n            catch (err) {\n                return this.readText();\n            }\n        }\n        else {\n            return this.readText();\n        }\n    }\n    async readText() {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.readText) {\n            throw this.unavailable('Reading from clipboard not supported in this browser');\n        }\n        const text = await navigator.clipboard.readText();\n        return { value: text, type: 'text/plain' };\n    }\n    async writeText(text) {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.writeText) {\n            throw this.unavailable('Writting to clipboard not supported in this browser');\n        }\n        await navigator.clipboard.writeText(text);\n    }\n    _getBlobData(clipboardBlob, type) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            if (type.includes('image')) {\n                reader.readAsDataURL(clipboardBlob);\n            }\n            else {\n                reader.readAsText(clipboardBlob);\n            }\n            reader.onloadend = () => {\n                const r = reader.result;\n                resolve(r);\n            };\n            reader.onerror = e => {\n                reject(e);\n            };\n        });\n    }\n}\n//# sourceMappingURL=web.js.map","import { registerPlugin } from '@capacitor/core';\nimport { ClipboardWeb } from './web';\nconst Clipboard = registerPlugin('Clipboard', {\n    web: () => new ClipboardWeb(),\n});\nexport * from './definitions';\nexport { Clipboard };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Haptics = registerPlugin('Haptics', {\n    web: () => import('./web').then(m => new m.HapticsWeb()),\n});\nexport * from './definitions';\nexport { Haptics };\n//# sourceMappingURL=index.js.map","import { Haptics, ImpactStyle } from '@capacitor/haptics';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { VIBRATE_SUCCESS_END_PAUSE_MS } from './capacitor';\nimport { pause } from './schedulers';\nimport { getTelegramApp } from './telegram';\n\nexport async function vibrate() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.impactOccurred('soft');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnError() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('error');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(100);\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(75);\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnSuccess(withPauseOnEnd = false) {\n  if (!IS_CAPACITOR && !IS_TELEGRAM_APP) return;\n\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('success');\n  } else {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n\n  if (withPauseOnEnd) {\n    await pause(VIBRATE_SUCCESS_END_PAUSE_MS);\n  }\n}\n","import { Clipboard } from '@capacitor/clipboard';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { vibrate } from './haptics';\nimport { getTelegramApp } from './telegram';\n\nconst textCopyEl = document.createElement('textarea');\ntextCopyEl.setAttribute('readonly', '');\ntextCopyEl.tabIndex = -1;\ntextCopyEl.className = 'visually-hidden';\n\nexport const copyTextToClipboard = (str: string): Promise<void> => {\n  void vibrate();\n\n  if (IS_CAPACITOR) {\n    return Clipboard.write({\n      string: str,\n    });\n  }\n\n  return navigator.clipboard.writeText(str);\n};\n\nexport async function readClipboardContent() {\n  if (IS_TELEGRAM_APP) {\n    return new Promise((resolve: ({ text, type }: { text: string; type: string | undefined }) => void) => {\n      getTelegramApp()?.readTextFromClipboard((text) => {\n        void vibrate();\n        resolve({ text, type: 'text/plain' });\n      });\n    });\n  } else if (IS_CAPACITOR) {\n    const { value, type } = await Clipboard.read();\n    void vibrate();\n    return { text: value, type };\n  } else {\n    const text = await navigator.clipboard.readText();\n    return { text, type: 'text/plain' };\n  }\n}\n","import { PRIVATE_KEY_HEX_LENGTH } from '../config';\n\nexport default function isMnemonicPrivateKey(mnemonic: string[]) {\n  return mnemonic.length === 1 && mnemonic[0].length === PRIVATE_KEY_HEX_LENGTH;\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nconst EQUAL = Symbol('EQUAL');\nconst DELETE = { __delete: true };\nconst DELETE_ALL_CHILDREN = { __deleteAllChildren: true };\n\nexport function deepDiff<T>(value1: T, value2: T): Partial<T> | typeof EQUAL | typeof DELETE_ALL_CHILDREN {\n  if (value1 === value2) {\n    return EQUAL;\n  }\n\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n\n  if (type1 !== type2) {\n    return value2;\n  }\n\n  if (Array.isArray(value1) && Array.isArray(value2) && areSortedArraysDeepEqual(value1, value2)) {\n    return EQUAL;\n  }\n\n  if (!isLiteralObject(value1) || !isLiteralObject(value2)) {\n    return value2;\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys2.length) {\n    return !keys1.length ? EQUAL : DELETE_ALL_CHILDREN;\n  }\n\n  const allKeys = unique(keys1.concat(keys2));\n\n  const diff = allKeys.reduce((acc: any, key) => {\n    const subValue1 = object1[key];\n    const subValue2 = object2[key];\n\n    if (!object2.hasOwnProperty(key)) {\n      acc[key] = DELETE;\n      return acc;\n    }\n\n    if (!object1.hasOwnProperty(key)) {\n      acc[key] = subValue2;\n      return acc;\n    }\n\n    const subDiff = deepDiff(subValue1, subValue2);\n    if (subDiff !== EQUAL) {\n      acc[key] = subDiff;\n    }\n\n    return acc;\n  }, {});\n\n  if (Object.keys(diff).length === 0) {\n    return EQUAL;\n  }\n\n  return diff;\n}\n\nfunction areSortedArraysDeepEqual<T extends Array<any>>(array1: T, array2: T) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => deepDiff(item, array2[i]) === EQUAL);\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nexport function deepMerge<T>(value1: T, value2: T): T {\n  if (value1 === value2) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value2)) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value1)) {\n    return reduceDiff(value2) as T;\n  }\n\n  if (value2.__deleteAllChildren) {\n    return {} as T;\n  }\n\n  const allKeys = unique(Object.keys(value1).concat(Object.keys(value2)));\n\n  return allKeys.reduce((acc: AnyLiteral, key) => {\n    const oldValue = value1[key];\n\n    if (!value2.hasOwnProperty(key)) {\n      acc[key] = oldValue;\n    } else {\n      const newValue = value2[key];\n\n      if (!newValue?.__delete) {\n        acc[key] = deepMerge(oldValue, newValue);\n      }\n    }\n\n    return acc;\n  }, {}) as T;\n}\n\nfunction reduceDiff(diff: AnyLiteral) {\n  if (diff.__deleteAllChildren) {\n    return {};\n  }\n\n  return Object.entries(diff).reduce((acc: AnyLiteral, [key, value]) => {\n    if (!value?.__delete) {\n      acc[key] = isLiteralObject(value) ? reduceDiff(value) : value;\n    }\n\n    return acc;\n  }, {});\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP } from '../config';\nimport { createSignal } from '../util/signals';\nimport { getTelegramAppAsync } from '../util/telegram';\nimport useLastCallback from './useLastCallback';\n\nconst [getIsInBackgroundLocal, setIsInBackground] = createSignal(!document.hasFocus());\nexport const getIsInBackground = getIsInBackgroundLocal;\n\nfunction handleBlur() {\n  setIsInBackground(true);\n}\n\nfunction handleFocus() {\n  setIsInBackground(false);\n}\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('activated', handleFocus);\n    telegramApp!.onEvent('deactivated', handleBlur);\n    setIsInBackground(!telegramApp?.isActive);\n  });\n} else {\n  window.addEventListener('blur', handleBlur);\n  window.addEventListener('focus', handleFocus);\n}\n\nexport default function useBackgroundMode(\n  onBlur?: AnyToVoidFunction,\n  onFocus?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnBlur = useLastCallback(onBlur);\n  const lastOnFocus = useLastCallback(onFocus);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsInBackground()) {\n      lastOnBlur();\n    }\n\n    return getIsInBackground.subscribe(() => {\n      if (getIsInBackground()) {\n        lastOnBlur();\n      } else {\n        lastOnFocus();\n      }\n    });\n  }, [isDisabled, lastOnBlur, lastOnFocus]);\n}\n\nexport function isBackgroundModeActive() {\n  return getIsInBackground();\n}\n","import { addCallback as onGlobalChange } from '../lib/teact/teactn';\nimport { getActions, getGlobal, setGlobal } from '../global';\n\nimport type { AllMethodArgs, AllMethodResponse, AllMethods } from '../api/types/methods';\nimport type { ActionPayloads, GlobalState } from '../global/types';\nimport type { Log } from './logs';\n\nimport { MULTITAB_DATA_CHANNEL_NAME } from '../config';\nimport { callApi } from '../api';\nimport { deepDiff } from './deepDiff';\nimport { deepMerge } from './deepMerge';\nimport { omit } from './iteratees';\nimport { getLogs } from './logs';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_MULTITAB_SUPPORTED } from './windowEnvironment';\n\nimport { isBackgroundModeActive } from '../hooks/useBackgroundMode';\n\ntype Recipient = 'main' | 'native';\n\ninterface BroadcastChannelGlobalDiff {\n  type: 'globalDiffUpdate';\n  diff: any;\n}\n\ninterface BroadcastChannelCallAction<K extends keyof ActionPayloads> {\n  type: 'callAction';\n  recipient: Recipient;\n  name: K;\n  options?: ActionPayloads[K];\n}\n\ninterface BroadcastChannelCallApiRequest<K extends keyof AllMethods> {\n  type: 'callApiRequest';\n  messageId: number;\n  recipient: Recipient;\n  name: K;\n  args: AllMethodArgs<K>;\n}\n\ninterface BroadcastChannelCallApiResponse<K extends keyof AllMethods> {\n  type: 'callApiResponse';\n  messageId: number;\n  result: PromiseSettledResult<AllMethodResponse<K>>;\n}\n\ninterface BroadcastChannelNativeLogsRequest {\n  type: 'getLogsFromNative';\n}\n\ninterface BroadcastChannelNativeLogsResponse {\n  type: 'logsFromNative';\n  logs: Log[];\n}\n\ntype BroadcastChannelMessage = BroadcastChannelGlobalDiff\n  | BroadcastChannelCallAction<keyof ActionPayloads>\n  | BroadcastChannelCallApiRequest<keyof AllMethods>\n  | BroadcastChannelCallApiResponse<keyof AllMethods>\n  | BroadcastChannelNativeLogsRequest\n  | BroadcastChannelNativeLogsResponse;\ntype EventListener = (type: 'message', listener: (event: { data: BroadcastChannelMessage }) => void) => void;\n\nexport type TypedBroadcastChannel = {\n  postMessage: (message: BroadcastChannelMessage) => void;\n  addEventListener: EventListener;\n  removeEventListener: EventListener;\n};\n\nconst channel = IS_MULTITAB_SUPPORTED\n  ? new BroadcastChannel(MULTITAB_DATA_CHANNEL_NAME) as TypedBroadcastChannel\n  : undefined;\n\nlet currentGlobal = getGlobal();\nlet messageIndex = 0;\n\nexport function initMultitab({ noPubGlobal }: { noPubGlobal?: boolean } = {}) {\n  if (!channel) return;\n\n  if (!noPubGlobal) {\n    onGlobalChange(handleGlobalChange);\n  }\n\n  channel.addEventListener('message', handleMultitabMessage);\n}\n\nfunction handleGlobalChange(global: GlobalState) {\n  if (global === currentGlobal) return;\n\n  // One of the goals of this check is preventing the Delegated Bottom Sheet global state initialization (performed by\n  // src/global/init.ts) from propagating to the main WebView. Normally this is prevented by `isBackgroundModeActive()`\n  // (the Sheet should be out of focus during the initialization), but we suspect that this approach is not fully\n  // reliable, because the focus may be in the Sheet during the initialization. So an extra `isInited` check is used -\n  // `isInited: false` appears only in the initial Teactn global state (see src/lib/teact/teactn.tsx) and we expect the\n  // first global change to be the initialization.\n  if (isBackgroundModeActive() || (currentGlobal as AnyLiteral).isInited === false) {\n    currentGlobal = global;\n    return;\n  }\n\n  const diff = deepDiff(omitLocalOnlyKeys(currentGlobal), omitLocalOnlyKeys(global));\n\n  if (typeof diff !== 'symbol') {\n    channel!.postMessage({\n      type: 'globalDiffUpdate',\n      diff,\n    });\n  }\n\n  currentGlobal = global;\n}\n\nfunction omitLocalOnlyKeys(global: GlobalState) {\n  return omit(global, ['DEBUG_randomId']);\n}\n\nasync function handleMultitabMessage({ data }: { data: BroadcastChannelMessage }) {\n  switch (data.type) {\n    case 'globalDiffUpdate': {\n      if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n      currentGlobal = deepMerge(getGlobal(), data.diff);\n\n      setGlobal(currentGlobal);\n\n      break;\n    }\n\n    case 'callAction': {\n      const { recipient, name, options } = data;\n\n      if (!doesMessageRecipientMatch(recipient)) return;\n\n      getActions()[name](options as never);\n      break;\n    }\n\n    case 'callApiRequest': {\n      const { recipient, messageId, name, args } = data;\n\n      if (!doesMessageRecipientMatch(recipient)) return;\n\n      const [result] = await Promise.allSettled([callApi(name, ...args)]);\n      channel!.postMessage({ type: 'callApiResponse', messageId, result });\n      break;\n    }\n\n    case 'getLogsFromNative': {\n      if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n      channel!.postMessage({ type: 'logsFromNative', logs: getLogs() });\n      break;\n    }\n  }\n}\n\nfunction doesMessageRecipientMatch(recipient: Recipient) {\n  return (IS_DELEGATING_BOTTOM_SHEET && recipient === 'main')\n    || (IS_DELEGATED_BOTTOM_SHEET && recipient === 'native');\n}\n\nexport function callActionInMain<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callAction',\n    recipient: 'main',\n    name,\n    options,\n  });\n}\n\nexport function callActionInNative<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callAction',\n    recipient: 'native',\n    name,\n    options,\n  });\n}\n\nexport function callApiInMain<T extends keyof AllMethods>(name: T, ...args: AllMethodArgs<T>) {\n  if (!IS_DELEGATED_BOTTOM_SHEET) {\n    return callApi(name, ...args);\n  }\n\n  const messageId = ++messageIndex;\n\n  return new Promise<AllMethodResponse<T>>((resolve, reject) => {\n    const handleMessage = ({ data }: { data: BroadcastChannelMessage }) => {\n      if (data.type === 'callApiResponse' && data.messageId === messageId) {\n        channel!.removeEventListener('message', handleMessage);\n        if (data.result.status === 'fulfilled') {\n          resolve(data.result.value);\n        } else {\n          reject(data.result.reason);\n        }\n      }\n    };\n\n    channel!.addEventListener('message', handleMessage);\n    channel!.postMessage({ type: 'callApiRequest', recipient: 'main', messageId, name, args });\n  });\n}\n\nexport function getLogsFromNative() {\n  if (!IS_DELEGATING_BOTTOM_SHEET) return Promise.resolve([]);\n\n  return new Promise<Log[]>((resolve) => {\n    const handleMessage = ({ data }: { data: BroadcastChannelMessage }) => {\n      if (data.type === 'logsFromNative') {\n        channel!.removeEventListener('message', handleMessage);\n        resolve(data.logs);\n      }\n    };\n\n    channel!.addEventListener('message', handleMessage);\n    channel!.postMessage({ type: 'getLogsFromNative' });\n  });\n}\n","import type { GlobalState } from './types';\nimport {\n  AppState,\n  AuthState,\n  BiometricsState,\n  DomainLinkingState,\n  DomainRenewalState,\n  HardwareConnectState,\n  SettingsState,\n  SignDataState,\n  StakingState,\n  SwapState,\n  TransferState,\n} from './types';\n\nimport {\n  ANIMATION_LEVEL_DEFAULT,\n  DEFAULT_AUTOLOCK_OPTION,\n  DEFAULT_SLIPPAGE_VALUE,\n  DEFAULT_STAKING_STATE,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  INIT_SWAP_ASSETS,\n  IS_CORE_WALLET,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  SWAP_API_VERSION,\n  THEME_DEFAULT,\n  TOKEN_INFO,\n} from '../config';\nimport { IS_IOS_APP, USER_AGENT_LANG_CODE } from '../util/windowEnvironment';\n\nexport const STATE_VERSION = 45;\n\nexport const INITIAL_STATE: GlobalState = {\n  appState: AppState.Auth,\n\n  auth: {\n    state: AuthState.none,\n  },\n\n  biometrics: {\n    state: BiometricsState.None,\n  },\n\n  hardware: {\n    hardwareState: HardwareConnectState.Connect,\n  },\n\n  currentTransfer: {\n    state: TransferState.None,\n    tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG,\n  },\n\n  currentDomainRenewal: {\n    state: DomainRenewalState.None,\n  },\n\n  currentDomainLinking: {\n    state: DomainLinkingState.None,\n  },\n\n  currentSwap: {\n    state: SwapState.None,\n    slippage: DEFAULT_SLIPPAGE_VALUE,\n  },\n\n  currentDappTransfer: {\n    state: TransferState.None,\n  },\n\n  currentDappSignData: {\n    state: SignDataState.None,\n  },\n\n  currentStaking: {\n    state: StakingState.None,\n  },\n\n  stakingDefault: DEFAULT_STAKING_STATE,\n\n  tokenInfo: {\n    bySlug: TOKEN_INFO,\n  },\n\n  swapTokenInfo: {\n    bySlug: INIT_SWAP_ASSETS,\n  },\n\n  swapVersion: SWAP_API_VERSION,\n\n  tokenPriceHistory: {\n    bySlug: {},\n  },\n\n  settings: {\n    state: SettingsState.Initial,\n    theme: THEME_DEFAULT,\n    animationLevel: ANIMATION_LEVEL_DEFAULT,\n    areTinyTransfersHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    canPlaySounds: true,\n    langCode: USER_AGENT_LANG_CODE,\n    byAccountId: {},\n    areTokensWithNoCostHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    isSortByValueEnabled: true,\n    isAppLockEnabled: true,\n    autolockValue: DEFAULT_AUTOLOCK_OPTION,\n  },\n\n  byAccountId: {},\n\n  dialogs: [],\n  notifications: [],\n\n  stateVersion: STATE_VERSION,\n  restrictions: {\n    isLimitedRegion: false,\n    isSwapDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isOnRampDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isNftBuyingDisabled: IS_IOS_APP,\n  },\n\n  mediaViewer: {},\n\n  pushNotifications: {\n    enabledAccounts: {},\n  },\n};\n","export function areDeepEqual<T>(value1: T, value2: T): boolean {\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n  if (type1 !== type2) {\n    return false;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  if (type1 !== 'object' || value1 === null || value2 === null) {\n    return value1 === value2;\n  }\n\n  const isArray1 = Array.isArray(value1);\n  const isArray2 = Array.isArray(value2);\n\n  if (isArray1 !== isArray2) {\n    return false;\n  }\n\n  if (isArray1) {\n    const array1 = value1 as any[];\n    const array2 = value2 as any[];\n\n    if (array1.length !== array2.length) {\n      return false;\n    }\n\n    return array1.every((member1, i) => areDeepEqual(member1, array2[i]));\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys1.every((key1) => object2.hasOwnProperty(key1))) {\n    return false;\n  }\n  if (!keys2.every((key2) => object1.hasOwnProperty(key2))) {\n    return false;\n  }\n\n  return keys1.every((key1) => areDeepEqual(object1[key1], object2[key1]));\n}\n","import { areDeepEqual } from './areDeepEqual';\nimport { pick } from './iteratees';\n\nexport default function isPartialDeepEqual<T extends AnyLiteral>(node: T, newPartial: Partial<T>) {\n  const currentPartial = pick(node, Object.keys(newPartial) as (keyof typeof newPartial)[]);\n\n  return areDeepEqual(currentPartial, newPartial);\n}\n","import type {\n  ApiBalanceBySlug,\n  ApiChain, ApiNetwork,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../api/types';\nimport type { Account, AccountState, AccountType, GlobalState } from '../types';\n\nimport {\n  APP_NAME, IS_CORE_WALLET, POPULAR_WALLET_VERSIONS, TON_USDT_SLUG, TONCOIN,\n} from '../../config';\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { getChainBySlug } from '../../util/tokens';\nimport {\n  selectAccount,\n  selectAccountOrAuthAccount,\n  selectAccountSettings,\n  selectAccountState,\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n} from '../selectors';\n\nexport function updateAuth(global: GlobalState, authUpdate: Partial<GlobalState['auth']>) {\n  return {\n    ...global,\n    auth: {\n      ...global.auth,\n      ...authUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccounts(\n  global: GlobalState,\n  state: Partial<GlobalState['accounts']>,\n) {\n  return {\n    ...global,\n    accounts: {\n      ...(global.accounts || { byId: {} }),\n      ...state,\n    },\n  };\n}\n\nexport function setIsPinAccepted(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    isPinAccepted: true,\n  };\n}\n\nexport function clearIsPinAccepted(global: GlobalState): GlobalState {\n  return global.isPinAccepted\n    ? { ...global, isPinAccepted: undefined }\n    : global;\n}\n\nexport function createAccount({\n  global,\n  accountId,\n  type,\n  addressByChain,\n  partial,\n  titlePostfix,\n  network,\n  isMnemonicImported,\n}: {\n  global: GlobalState;\n  accountId: string;\n  type: AccountType;\n  addressByChain: Account['addressByChain'];\n  partial?: Partial<Account>;\n  titlePostfix?: string;\n  network?: ApiNetwork;\n  isMnemonicImported?: boolean;\n}) {\n  const account: Account = {\n    ...partial,\n    type,\n    addressByChain,\n  };\n  let shouldForceAccountEdit = true;\n\n  if (!account.title) {\n    network = network || selectCurrentNetwork(global);\n    const accounts = selectNetworkAccounts(global) || {};\n    const accountAmount = Object.keys(accounts).length;\n    const isMainnet = network === 'mainnet';\n\n    const viewWalletsCount = Object.values(accounts).filter((acc) => acc.type === 'view').length;\n    const regularWalletsCount = accountAmount - viewWalletsCount;\n\n    const titlePrefix = type === 'view'\n      ? 'View Wallet'\n      : isMainnet ? 'Wallet' : 'Testnet Wallet';\n    const postfix = titlePostfix ? ` ${titlePostfix}` : '';\n\n    const count = type === 'view' ? viewWalletsCount + 1 : regularWalletsCount + 1;\n    account.title = `${titlePrefix} ${count}${postfix}`;\n\n    if (accountAmount === 0) {\n      account.title = isMainnet ? APP_NAME : `Testnet ${APP_NAME}`;\n      shouldForceAccountEdit = false;\n    }\n  } else if (titlePostfix) {\n    const title = account.title?.replace(new RegExp(`\\\\b(${POPULAR_WALLET_VERSIONS.join('|')})\\\\b`, 'g'), '');\n    account.title = `${title.trim()} ${titlePostfix}`;\n  }\n\n  if (!IS_CORE_WALLET) {\n    global = { ...global, shouldForceAccountEdit };\n  }\n\n  if (selectAccount(global, accountId)) {\n    throw new Error(`Account ${accountId} already exists`);\n  }\n\n  return {\n    ...global,\n    accounts: {\n      ...global.accounts,\n      byId: {\n        ...global.accounts?.byId,\n        [accountId]: account,\n      },\n    },\n  };\n}\n\nexport function updateAccount(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<Account>,\n) {\n  const account = selectAccount(global, accountId);\n\n  if (!account) {\n    throw new Error(`Account ${accountId} doesn't exist`);\n  }\n\n  return {\n    ...global,\n    accounts: {\n      ...global.accounts,\n      byId: {\n        ...global.accounts?.byId,\n        [accountId]: {\n          ...account,\n          ...partial,\n        },\n      },\n    },\n  };\n}\n\nexport function renameAccount(global: GlobalState, accountId: string, title: string) {\n  return updateAccount(global, accountId, { title });\n}\n\nexport function createAccountsFromGlobal(global: GlobalState, isMnemonicImported = false): GlobalState {\n  const { firstNetworkAccount, secondNetworkAccount } = global.auth;\n\n  global = createAccount({ global, type: 'mnemonic', ...firstNetworkAccount!, isMnemonicImported });\n  if (secondNetworkAccount) {\n    global = createAccount({ global, type: 'mnemonic', ...secondNetworkAccount, isMnemonicImported });\n  }\n\n  return global;\n}\n\nexport function updateBalances(\n  global: GlobalState,\n  accountId: string,\n  chain: ApiChain,\n  chainBalances: ApiBalanceBySlug,\n): GlobalState {\n  const newBalances: ApiBalanceBySlug = { ...chainBalances };\n  const currentBalances = selectAccountState(global, accountId)?.balances?.bySlug ?? {};\n\n  for (const [slug, currentBalance] of Object.entries(currentBalances)) {\n    if (getChainBySlug(slug) !== chain) {\n      newBalances[slug] = currentBalance;\n    }\n  }\n\n  // Force balance value for USDT-TON and manually imported tokens\n  const importedSlugs = selectAccountSettings(global, accountId)?.importedSlugs ?? [];\n  // Balance updates may arrive before authentication is complete\n  const hasTonWallet = Boolean(selectAccountOrAuthAccount(global, accountId)?.addressByChain?.ton);\n\n  let forcedSlugs = importedSlugs;\n  if (hasTonWallet) forcedSlugs = [...forcedSlugs, TON_USDT_SLUG];\n\n  for (const slug of forcedSlugs) {\n    if (!(slug in newBalances)) {\n      newBalances[slug] = 0n;\n    }\n  }\n\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: newBalances,\n    },\n  });\n}\n\nexport function changeBalance(global: GlobalState, accountId: string, slug: string, balance: bigint) {\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: {\n        ...selectAccountState(global, accountId)?.balances?.bySlug,\n        [slug]: balance,\n      },\n    },\n  });\n}\n\nexport function updateTokens(\n  global: GlobalState,\n  partial: Record<string, ApiTokenWithPrice>,\n  withDeepCompare = false,\n): GlobalState {\n  const existingTokens = global.tokenInfo?.bySlug;\n\n  // If the backend does not work, then we won't delete the old prices\n  if (!partial[TONCOIN.slug].price) {\n    partial = Object.values(partial).reduce((result, token) => {\n      const existingToken = existingTokens?.[token.slug];\n\n      result[token.slug] = {\n        ...token,\n        price: existingToken?.price ?? token.price,\n        priceUsd: existingToken?.priceUsd ?? token.priceUsd,\n        percentChange24h: existingToken?.percentChange24h ?? token.percentChange24h,\n      };\n      return result;\n    }, {} as Record<string, ApiTokenWithPrice>);\n  }\n\n  if (withDeepCompare && existingTokens && isPartialDeepEqual(existingTokens, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...existingTokens,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateSwapTokens(\n  global: GlobalState,\n  partial: Record<string, ApiSwapAsset>,\n): GlobalState {\n  const currentTokens = global.swapTokenInfo?.bySlug;\n\n  return {\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...currentTokens,\n        ...partial,\n      },\n      isLoaded: true,\n    },\n  };\n}\n\nexport function updateCurrentAccountState(global: GlobalState, partial: Partial<AccountState>): GlobalState {\n  return updateAccountState(global, global.currentAccountId!, partial);\n}\n\nexport function updateAccountState(\n  global: GlobalState, accountId: string, partial: Partial<AccountState>, withDeepCompare = false,\n): GlobalState {\n  // Updates from the API may arrive after the account is removed.\n  // This check prevents that useless data from persisting in the global state.\n  if (!doesAccountExist(global, accountId)) {\n    return global;\n  }\n\n  const accountState = selectAccountState(global, accountId);\n\n  if (withDeepCompare && accountState && isPartialDeepEqual(accountState, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    byAccountId: {\n      ...global.byAccountId,\n      [accountId]: {\n        ...accountState,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateSettings(global: GlobalState, settingsUpdate: Partial<GlobalState['settings']>) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      ...settingsUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccountSettings(\n  global: GlobalState,\n  accountId: string,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  // Updates from the API may arrive after the account is removed.\n  // This check prevents that useless data from persisting in the global state.\n  if (!doesAccountExist(global, accountId)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      byAccountId: {\n        ...global.settings.byAccountId,\n        [accountId]: {\n          ...global.settings.byAccountId[accountId],\n          ...settingsUpdate,\n        },\n      },\n    },\n  } as GlobalState;\n}\n\nexport function updateCurrentAccountSettings(\n  global: GlobalState,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  return updateAccountSettings(global, global.currentAccountId!, settingsUpdate);\n}\n\nexport function updateBiometrics(global: GlobalState, biometricsUpdate: Partial<GlobalState['biometrics']>) {\n  return {\n    ...global,\n    biometrics: {\n      ...global.biometrics,\n      ...biometricsUpdate,\n    },\n  };\n}\n\nexport function updateRestrictions(global: GlobalState, partial: Partial<GlobalState['restrictions']>) {\n  return {\n    ...global,\n    restrictions: {\n      ...global.restrictions,\n      ...partial,\n    },\n  };\n}\n\nexport function updateCurrentAccountId(global: GlobalState, accountId: string): GlobalState {\n  if (!accountId) {\n    throw Error('Empty accountId!');\n  }\n\n  return {\n    ...global,\n    currentAccountId: accountId,\n  };\n}\n\nfunction doesAccountExist(global: GlobalState, accountId: string) {\n  return !!selectAccountOrAuthAccount(global, accountId);\n}\n","import type { GlobalState } from '../types';\nimport { SwapInputSource, SwapState } from '../types';\n\nexport function shouldAvoidSwapEstimation(global: GlobalState) {\n  // For a better UX, we should leave the fees and the other swap data intact during swap confirmation (for example,\n  // to avoid switching from/to gasless mode).\n  // `isEstimating` forces estimation, because by design it means that there was a swap parameter change that\n  // invalidates the current swap estimation.\n  return !global.currentSwap.isEstimating && (\n    global.currentSwap.state === SwapState.Blockchain\n    || global.currentSwap.state === SwapState.Password\n  );\n}\n\n/**\n * Returns true if the swap estimate prepared for the global 1 is suitable for the global 2\n */\nexport function isSwapEstimateInputEqual({ currentSwap: swap1 }: GlobalState, { currentSwap: swap2 }: GlobalState) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug === swap2.tokenInSlug\n    && swap1.tokenOutSlug === swap2.tokenOutSlug\n    && swap1.slippage === swap2.slippage\n    && swap1.inputSource === swap2.inputSource\n    && swap1.isMaxAmount === swap2.isMaxAmount\n    && (swap2.isMaxAmount || swap1[amountKey] === swap2[amountKey]);\n}\n\n/**\n * Returns true is the swap form has enough data to start estimation\n */\nexport function isSwapFormFilled({ currentSwap }: GlobalState) {\n  const amountKey = currentSwap.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return currentSwap.tokenInSlug\n    && currentSwap.tokenOutSlug\n    && Number(currentSwap[amountKey] ?? '0') > 0; // The backend fails if the amount is \"0\", \"0.0\", etc\n}\n\nexport function doesSwapChangeRequireEstimation(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return isSwapFormFilled(globalAfter) && !isSwapEstimateInputEqual(globalBefore, globalAfter);\n}\n\nexport function doesSwapChangeRequireEstimationReset(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return !isSwapFormFilled(globalAfter)\n    || globalBefore.currentSwap.tokenInSlug !== globalAfter.currentSwap.tokenInSlug\n    || globalBefore.currentSwap.tokenOutSlug !== globalAfter.currentSwap.tokenOutSlug;\n}\n\nexport function doesSwapChangeRequireDexUnselect(\n  { currentSwap: swap1 }: GlobalState,\n  { currentSwap: swap2 }: GlobalState,\n) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug !== swap2.tokenInSlug\n    || swap1.tokenOutSlug !== swap2.tokenOutSlug\n    || swap1.inputSource !== swap2.inputSource\n    || !((swap1.isMaxAmount && swap2.isMaxAmount) || swap1[amountKey] === swap2[amountKey]);\n}\n\n/**\n * Returns the `currentSwap` parameters that should be set when it's impossible to estimate the current swap or no\n * estimation has been done.\n */\nexport function getSwapEstimateResetParams(global: GlobalState) {\n  const amountReset = global.currentSwap.inputSource === SwapInputSource.In\n    ? { amountOut: undefined }\n    : { amountIn: undefined };\n\n  return {\n    ...amountReset,\n    amountOutMin: '0',\n    priceImpact: 0,\n    errorType: undefined,\n    limits: undefined,\n    dieselStatus: undefined,\n    estimates: undefined,\n    bestRateDexLabel: undefined,\n    networkFee: undefined,\n    realNetworkFee: undefined,\n    swapFee: undefined,\n    swapFeePercent: undefined,\n    ourFee: undefined,\n    ourFeePercent: undefined,\n    dieselFee: undefined,\n  } satisfies Partial<GlobalState['currentSwap']>;\n}\n","import type { GlobalState } from '../types';\nimport { SwapState } from '../types';\n\nimport { DEFAULT_SLIPPAGE_VALUE } from '../../config';\nimport { replaceActivityId } from '../helpers/misc';\nimport {\n  doesSwapChangeRequireDexUnselect,\n  doesSwapChangeRequireEstimation,\n  doesSwapChangeRequireEstimationReset,\n  getSwapEstimateResetParams,\n} from '../helpers/swap';\n\nfunction rawUpdateCurrentSwap(global: GlobalState, update: Partial<GlobalState['currentSwap']>) {\n  return {\n    ...global,\n    currentSwap: {\n      ...global.currentSwap,\n      ...update,\n    },\n  };\n}\n\nexport function updateCurrentSwap(\n  global: GlobalState,\n  update: Partial<GlobalState['currentSwap']>,\n  // Set to true if you want to not trigger the swap estimation, and you are sure estimation is not needed\n  doAvoidEstimation?: boolean,\n) {\n  let newGlobal = rawUpdateCurrentSwap(global, update);\n\n  if (!doAvoidEstimation) {\n    if (doesSwapChangeRequireEstimationReset(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, getSwapEstimateResetParams(newGlobal));\n    }\n\n    if (doesSwapChangeRequireEstimation(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, { isEstimating: true });\n    }\n  }\n\n  if (doesSwapChangeRequireDexUnselect(global, newGlobal)) {\n    newGlobal = rawUpdateCurrentSwap(newGlobal, {\n      isDexLabelChanged: undefined,\n    });\n  }\n\n  // Applying the update again because the input fields should have a higher priority than the above automatic updates\n  return rawUpdateCurrentSwap(newGlobal, update);\n}\n\nexport function clearCurrentSwap(global: GlobalState) {\n  return {\n    ...global,\n    currentSwap: {\n      state: SwapState.None,\n      slippage: DEFAULT_SLIPPAGE_VALUE,\n    },\n  };\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentSwapId(global: GlobalState, replaceMap: Record<string, string>) {\n  return updateCurrentSwap(global, {\n    activityId: replaceActivityId(global.currentSwap.activityId, replaceMap),\n  });\n}\n","import type { ApiCheckTransactionDraftResult } from '../../api/chains/ton/types';\nimport type { GlobalState } from '../types';\n\nimport { pick } from '../../util/iteratees';\nimport { replaceActivityId } from '../helpers/misc';\nimport { INITIAL_STATE } from '../initialState';\nimport { selectCurrentTransferMaxAmount, selectTokenMatchingCurrentTransferAddressSlow } from '../selectors';\n\nexport function updateCurrentTransferByCheckResult(global: GlobalState, result: ApiCheckTransactionDraftResult) {\n  const nextGlobal = updateCurrentTransfer(global, {\n    toAddressName: result.addressName,\n    ...pick(result, ['fee', 'realFee', 'isScam', 'isMemoRequired', 'diesel']),\n  });\n  return preserveMaxTransferAmount(global, nextGlobal);\n}\n\nexport function updateCurrentTransfer(global: GlobalState, update: Partial<GlobalState['currentTransfer']>) {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentTransfer(global: GlobalState) {\n  return {\n    ...global,\n    currentTransfer: INITIAL_STATE.currentTransfer,\n  };\n}\n\n/**\n * Preserves the maximum transfer amount, if it was selected.\n * Returns a modified version of `nextGlobal`.\n */\nexport function preserveMaxTransferAmount(prevGlobal: GlobalState, nextGlobal: GlobalState) {\n  const previousMaxAmount = selectCurrentTransferMaxAmount(prevGlobal);\n  const wasMaxAmountSelected = previousMaxAmount && prevGlobal.currentTransfer.amount === previousMaxAmount;\n  if (!wasMaxAmountSelected) {\n    return nextGlobal;\n  }\n  const nextMaxAmount = selectCurrentTransferMaxAmount(nextGlobal);\n  return updateCurrentTransfer(nextGlobal, { amount: nextMaxAmount });\n}\n\nexport function updateCurrentTransferLoading(global: GlobalState, isLoading: boolean): GlobalState {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      isLoading,\n    },\n  };\n}\n\nexport function setCurrentTransferAddress(global: GlobalState, toAddress: string | undefined) {\n  global = updateCurrentTransfer(global, { toAddress });\n\n  // Unless the user has filled the amount, the token should change to match the \"to\" address\n  if (!global.currentTransfer.amount) {\n    global = updateCurrentTransfer(global, {\n      tokenSlug: selectTokenMatchingCurrentTransferAddressSlow(global),\n    });\n  }\n\n  return global;\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentTransferId(global: GlobalState, replaceMap: Record<string, string>) {\n  return updateCurrentTransfer(global, {\n    txId: replaceActivityId(global.currentTransfer.txId, replaceMap),\n  });\n}\n","import type { GlobalState } from '../types';\n\nimport { updateCurrentAccountId } from './misc';\nimport { clearCurrentSwap } from './swap';\nimport { clearCurrentTransfer } from './transfer';\n\nexport function updateCurrentSignature(global: GlobalState, update: Partial<GlobalState['currentSignature']>) {\n  return {\n    ...global,\n    currentSignature: {\n      ...global.currentSignature,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearCurrentSignature(global: GlobalState) {\n  return {\n    ...global,\n    currentSignature: undefined,\n  };\n}\n\nexport function switchAccountAndClearGlobal(global: GlobalState, accountId: string) {\n  let newGlobal = updateCurrentAccountId(global, accountId);\n  newGlobal = clearCurrentTransfer(newGlobal);\n\n  return clearCurrentSwap(newGlobal);\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\nimport { StakingState } from '../types';\n\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateCurrentStaking(global: GlobalState, update: Partial<GlobalState['currentStaking']>): GlobalState {\n  return {\n    ...global,\n    currentStaking: {\n      ...global.currentStaking,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentStaking(global: GlobalState) {\n  return {\n    ...global,\n    currentStaking: {\n      state: StakingState.None,\n    },\n  };\n}\n\nexport function updateAccountStaking(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<NonNullable<AccountState['staking']>>,\n  withDeepCompare = false,\n): GlobalState {\n  const currentStaking = selectAccountState(global, accountId)?.staking;\n\n  if (withDeepCompare && currentStaking && isPartialDeepEqual(currentStaking, partial)) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentStaking,\n      ...partial,\n    },\n  });\n}\n\nexport function updateAccountStakingStatePartial(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<AccountState['staking']>,\n): GlobalState {\n  const currentState = selectAccountState(global, accountId)?.staking;\n\n  if (!currentState) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentState,\n      ...partial,\n    },\n  });\n}\n\nexport function updateStakingDefault(global: GlobalState, state: ApiStakingState) {\n  return {\n    ...global,\n    stakingDefault: state,\n  };\n}\n","import type { AccountState, GlobalState } from '../types';\nimport { SignDataState, TransferState } from '../types';\n\nimport { selectCurrentAccountState } from '../selectors';\nimport { updateCurrentAccountState } from './misc';\n\nexport function updateDappConnectRequest(global: GlobalState, update: Partial<GlobalState['dappConnectRequest']>) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequestError(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      error: undefined,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequest(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: undefined,\n  } as GlobalState;\n}\n\nexport function updateCurrentDappTransfer(global: GlobalState, update: Partial<GlobalState['currentDappTransfer']>) {\n  return {\n    ...global,\n    currentDappTransfer: {\n      ...global.currentDappTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentDappTransfer(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    currentDappTransfer: {\n      state: TransferState.None,\n    },\n  };\n}\n\nexport function updateCurrentDappSignData(global: GlobalState, update: Partial<GlobalState['currentDappSignData']>) {\n  return {\n    ...global,\n    currentDappSignData: {\n      ...global.currentDappSignData,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentDappSignData(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    currentDappSignData: {\n      state: SignDataState.None,\n    },\n  };\n}\n\nexport function updateConnectedDapps(global: GlobalState, update: AccountState['dapps']) {\n  return updateCurrentAccountState(global, { dapps: update });\n}\n\nexport function clearConnectedDapps(global: GlobalState) {\n  return updateCurrentAccountState(global, { dapps: undefined, dappLastOpenedDatesByUrl: undefined });\n}\n\nexport function removeConnectedDapp(global: GlobalState, url: string) {\n  const { dapps: connectedDapps, dappLastOpenedDatesByUrl } = selectCurrentAccountState(global) || {};\n  if (dappLastOpenedDatesByUrl) delete dappLastOpenedDatesByUrl[url];\n  return updateCurrentAccountState(global, {\n    dapps: connectedDapps!.filter((d) => d.url !== url),\n    dappLastOpenedDatesByUrl,\n  });\n}\n","import type { ApiActivity } from '../../api/types';\n\nimport { mergeSortedArrays } from '../iteratees';\nimport { logDebugError } from '../logs';\nimport { getIsActivityPending } from './index';\n\nfunction compareActivities(a: ApiActivity, b: ApiActivity, isAsc = false) {\n  // The activity sorting is tuned to match the Toncenter API sorting as close as possible.\n  // Putting the pending activities first, because when they get confirmed, their timestamp gets bigger than any current\n  // confirmed activity timestamp. This reduces the movement in the activity list.\n  let value = (getIsActivityPending(a) ? 1 : 0) - (getIsActivityPending(b) ? 1 : 0);\n  if (value === 0) {\n    value = a.timestamp - b.timestamp;\n    if (value === 0) {\n      value = a.id > b.id ? 1 : a.id < b.id ? -1 : 0;\n    }\n  }\n  return isAsc ? value : -value;\n}\n\n/**\n * Use the `mergeSortedActivities` function instead when possible.\n */\nexport function sortActivities(activities: ApiActivity[], isAsc?: boolean) {\n  return activities.sort((a1, a2) => compareActivities(a1, a2, isAsc));\n}\n\n/**\n * Use the `mergeSortedActivityIds` function instead when possible.\n */\nexport function sortActivityIds(activityById: Record<string, ApiActivity>, ids: string[], isAsc?: boolean) {\n  return ids.sort((id1, id2) => compareActivities(activityById[id1], activityById[id2], isAsc));\n}\n\nexport function mergeSortedActivities(array1: readonly ApiActivity[], array2: readonly ApiActivity[], isAsc?: boolean) {\n  // It's hard to make sure the input is sorted, so we check and sort just in case.\n  // Otherwise, there may be unwanted duplicates in the returned array.\n  const lists = [array1, array2];\n  for (let i = 0; i < lists.length; i++) {\n    if (!areActivitiesSorted(lists[i], isAsc)) {\n      logDebugError(`Activity list ${i} is not sorted`, { stack: new Error().stack });\n      lists[i] = sortActivities([...lists[i]], isAsc);\n    }\n  }\n\n  return mergeSortedArrays(array1, array2, (a1, a2) => compareActivities(a1, a2, isAsc), true);\n}\n\nexport function mergeSortedActivityIds(\n  ids1: readonly string[],\n  ids2: readonly string[],\n  activityById: Record<string, ApiActivity>,\n  isAsc?: boolean,\n) {\n  // It's hard to make sure the input is sorted, so we check and sort just in case.\n  // Otherwise, there may be unwanted duplicates in the returned array.\n  const lists = [ids1, ids2];\n  for (let i = 0; i < lists.length; i++) {\n    if (!areActivityIdsSorted(activityById, lists[i], isAsc)) {\n      logDebugError(`Activity id list ${i} is not sorted`, { stack: new Error().stack });\n      lists[i] = sortActivityIds(activityById, [...lists[i]], isAsc);\n    }\n  }\n\n  return mergeSortedArrays(\n    ids1,\n    ids2,\n    (id1, id2) => compareActivities(activityById[id1], activityById[id2], isAsc),\n    true,\n  );\n}\n\nexport function mergeSortedActivitiesToMaxTime<T extends readonly ApiActivity[]>(array1: T, array2: T) {\n  if (!array1.length) return array2;\n  if (!array2.length) return array1;\n\n  const fromTimestamp = Math.max(\n    array1[array1.length - 1].timestamp,\n    array2[array2.length - 1].timestamp,\n  );\n\n  const filterPredicate = ({ timestamp }: ApiActivity) => timestamp >= fromTimestamp;\n\n  return mergeSortedActivities(\n    array1.filter(filterPredicate),\n    array2.filter(filterPredicate),\n  );\n}\n\nexport function mergeSortedActivityIdsToMaxTime<T extends readonly string[]>(\n  ids1: T,\n  ids2: T,\n  activityById: Record<string, ApiActivity>,\n) {\n  if (!ids1.length) return ids2;\n  if (!ids2.length) return ids1;\n\n  const fromTimestamp = Math.max(\n    activityById[ids1[ids1.length - 1]].timestamp,\n    activityById[ids2[ids2.length - 1]].timestamp,\n  );\n\n  const filterPredicate = (id: string) => activityById[id].timestamp >= fromTimestamp;\n\n  return mergeSortedActivityIds(\n    ids1.filter(filterPredicate),\n    ids2.filter(filterPredicate),\n    activityById,\n  );\n}\n\nexport function areActivitiesSorted(activities: readonly ApiActivity[], isAsc?: boolean) {\n  for (let i = 1; i < activities.length; i++) {\n    if (compareActivities(activities[i - 1], activities[i], isAsc) > 0) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function areActivityIdsSorted(\n  activityById: Record<string, ApiActivity>,\n  ids: readonly string[],\n  isAsc?: boolean,\n) {\n  for (let i = 1; i < ids.length; i++) {\n    if (compareActivities(activityById[ids[i - 1]], activityById[ids[i]], isAsc) > 0) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import type { ApiActivity, ApiChain } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\n\nimport {\n  getActivityTokenSlugs,\n  getIsActivityPending,\n  getIsActivitySuitableForFetchingTimestamp,\n  getIsTxIdLocal,\n} from '../../util/activities';\nimport { mergeSortedActivityIds, mergeSortedActivityIdsToMaxTime } from '../../util/activities/order';\nimport { buildCollectionByKey, extractKey, mapValues, swapKeysAndValues, unique } from '../../util/iteratees';\nimport { replaceActivityId } from '../helpers/misc';\nimport { selectAccountOrAuthAccount, selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\n/**\n * Handles the `initialActivities` update, which delivers the latest activity history after the account is added.\n * The given activity lists must be sorted and contain no pending or local activities.\n */\nexport function addInitialActivities(\n  global: GlobalState,\n  accountId: string,\n  mainActivities: ApiActivity[],\n  bySlug: Record<string, ApiActivity[]>,\n  chain: ApiChain,\n) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  let { byId, idsMain, areInitialActivitiesLoaded } = activities || {};\n\n  byId = { ...byId, ...buildCollectionByKey(mainActivities, 'id') };\n\n  areInitialActivitiesLoaded = {\n    ...areInitialActivitiesLoaded,\n    [chain]: true,\n  };\n\n  // Activities from different blockchains arrive separately, which causes the order to be disrupted\n  idsMain = mergeSortedActivityIdsToMaxTime(extractKey(mainActivities, 'id'), idsMain ?? [], byId);\n\n  // Enforcing the requirement to have the id list undefined if it hasn't loaded yet\n  if (idsMain.length === 0 && !areAllInitialActivitiesLoaded(global, accountId, areInitialActivitiesLoaded)) {\n    idsMain = undefined;\n  }\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId,\n      areInitialActivitiesLoaded,\n    },\n  });\n\n  for (const [slug, activities] of Object.entries(bySlug)) {\n    global = addPastActivities(global, accountId, slug, activities, activities.length === 0);\n  }\n\n  return global;\n}\n\n/**\n * Should be used to add only newly created activities. Otherwise, there can occur gaps in the history, because the\n * given activities are added to all the matching token histories.\n */\nexport function addNewActivities(\n  global: GlobalState,\n  accountId: string,\n  newActivities: readonly ApiActivity[], // Must be sorted\n  chain?: ApiChain, // Necessary when adding pending activities\n) {\n  if (newActivities.length === 0) {\n    return global;\n  }\n\n  const { activities } = selectAccountState(global, accountId) || {};\n  let { byId, idsBySlug, idsMain, newestActivitiesBySlug, localActivityIds, pendingActivityIds } = activities || {};\n\n  byId = { ...byId, ...buildCollectionByKey(newActivities, 'id') };\n\n  // Activities from different blockchains arrive separately, which causes the order to be disrupted\n  idsMain = mergeSortedActivityIds(idsMain ?? [], extractKey(newActivities, 'id'), byId);\n\n  const newIdsBySlug = buildActivityIdsBySlug(newActivities);\n  idsBySlug = mergeIdsBySlug(idsBySlug, newIdsBySlug, byId);\n\n  newestActivitiesBySlug = getNewestActivitiesBySlug(\n    { byId, idsBySlug, newestActivitiesBySlug },\n    Object.keys(newIdsBySlug),\n  );\n\n  localActivityIds = unique([\n    ...(localActivityIds ?? []),\n    ...extractKey(newActivities, 'id').filter(getIsTxIdLocal)],\n  );\n\n  if (chain) {\n    pendingActivityIds = {\n      ...pendingActivityIds,\n      [chain]: unique([\n        ...(pendingActivityIds?.[chain] ?? []),\n        ...extractKey(\n          newActivities.filter((activity) => getIsActivityPending(activity) && !getIsTxIdLocal(activity.id)),\n          'id',\n        ),\n      ]),\n    };\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId,\n      idsBySlug,\n      newestActivitiesBySlug,\n      localActivityIds,\n      pendingActivityIds,\n    },\n  });\n}\n\nexport function addPastActivities(\n  global: GlobalState,\n  accountId: string,\n  tokenSlug: string | undefined, // undefined for main activities\n  pastActivities: ApiActivity[], // Must be sorted and contain no pending or local activities\n  isEndReached?: boolean,\n) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  let {\n    byId, idsBySlug, idsMain, newestActivitiesBySlug, isMainHistoryEndReached, isHistoryEndReachedBySlug,\n  } = activities || {};\n\n  byId = { ...byId, ...buildCollectionByKey(pastActivities, 'id') };\n\n  if (tokenSlug) {\n    idsBySlug = mergeIdsBySlug(idsBySlug, { [tokenSlug]: extractKey(pastActivities, 'id') }, byId);\n    newestActivitiesBySlug = getNewestActivitiesBySlug({ byId, idsBySlug, newestActivitiesBySlug }, [tokenSlug]);\n\n    if (isEndReached) {\n      isHistoryEndReachedBySlug = {\n        ...isHistoryEndReachedBySlug,\n        [tokenSlug]: true,\n      };\n    }\n  } else {\n    idsMain = mergeSortedActivityIds(idsMain ?? [], extractKey(pastActivities, 'id'), byId);\n\n    if (isEndReached) {\n      isMainHistoryEndReached = true;\n    }\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId,\n      idsBySlug,\n      newestActivitiesBySlug,\n      isMainHistoryEndReached,\n      isHistoryEndReachedBySlug,\n    },\n  });\n}\n\nfunction buildActivityIdsBySlug(activities: readonly ApiActivity[]) {\n  return activities.reduce<Record<string, string[]>>((acc, activity) => {\n    for (const slug of getActivityTokenSlugs(activity)) {\n      acc[slug] ??= [];\n      acc[slug].push(activity.id);\n    }\n\n    return acc;\n  }, {});\n}\n\nexport function removeActivities(\n  global: GlobalState,\n  accountId: string,\n  _ids: Iterable<string>,\n) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  if (!activities) {\n    return global;\n  }\n\n  const ids = new Set(_ids); // Don't use `_ids` again, because the iterable may be disposable\n  if (ids.size === 0) {\n    return global;\n  }\n\n  let { byId, idsBySlug, idsMain, newestActivitiesBySlug, localActivityIds, pendingActivityIds } = activities;\n  const affectedTokenSlugs = getActivityListTokenSlugs(ids, byId);\n\n  idsBySlug = { ...idsBySlug };\n  for (const tokenSlug of affectedTokenSlugs) {\n    if (tokenSlug in idsBySlug) {\n      idsBySlug[tokenSlug] = idsBySlug[tokenSlug].filter((id) => !ids.has(id));\n\n      if (!idsBySlug[tokenSlug].length) {\n        delete idsBySlug[tokenSlug];\n      }\n    }\n  }\n\n  newestActivitiesBySlug = getNewestActivitiesBySlug({ byId, idsBySlug, newestActivitiesBySlug }, affectedTokenSlugs);\n\n  idsMain = idsMain?.filter((id) => !ids.has(id));\n\n  byId = { ...byId };\n  for (const id of ids) {\n    delete byId[id];\n  }\n\n  localActivityIds = localActivityIds?.filter((id) => !ids.has(id));\n\n  pendingActivityIds = pendingActivityIds\n    && mapValues(pendingActivityIds, (pendingIds) => pendingIds.filter((id) => !ids.has(id)));\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId,\n      idsBySlug,\n      idsMain,\n      newestActivitiesBySlug,\n      localActivityIds,\n      pendingActivityIds,\n    },\n  });\n}\n\nexport function updateActivity(global: GlobalState, accountId: string, activity: ApiActivity) {\n  const { id } = activity;\n\n  const { activities } = selectAccountState(global, accountId) || {};\n  const { byId } = activities ?? {};\n\n  if (!byId || !(id in byId)) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: {\n        ...byId,\n        [id]: activity,\n      },\n    },\n  });\n}\n\n/** Replaces all pending activities in the given account and chain */\nexport function replacePendingActivities(\n  global: GlobalState,\n  accountId: string,\n  chain: ApiChain,\n  pendingActivities: readonly ApiActivity[],\n) {\n  const { pendingActivityIds } = selectAccountState(global, accountId)?.activities || {};\n  global = removeActivities(global, accountId, pendingActivityIds?.[chain] ?? []);\n  global = addNewActivities(global, accountId, pendingActivities, chain);\n  return global;\n}\n\nfunction getNewestActivitiesBySlug(\n  {\n    byId, idsBySlug, newestActivitiesBySlug,\n  }: Pick<Exclude<AccountState['activities'], undefined>, 'byId' | 'idsBySlug' | 'newestActivitiesBySlug'>,\n  tokenSlugs: Iterable<string>,\n) {\n  newestActivitiesBySlug = { ...newestActivitiesBySlug };\n\n  for (const tokenSlug of tokenSlugs) {\n    // The `idsBySlug` arrays must be sorted from the newest to the oldest\n    const ids = idsBySlug?.[tokenSlug] ?? [];\n    const newestActivityId = ids.find((id) => getIsActivitySuitableForFetchingTimestamp(byId[id]));\n    if (newestActivityId) {\n      newestActivitiesBySlug[tokenSlug] = byId[newestActivityId];\n    } else {\n      delete newestActivitiesBySlug[tokenSlug];\n    }\n  }\n\n  return newestActivitiesBySlug;\n}\n\nfunction getActivityListTokenSlugs(activityIds: Iterable<string>, byId: Record<string, ApiActivity>) {\n  const tokenSlugs = new Set<string>();\n\n  for (const id of activityIds) {\n    const activity = byId[id];\n    if (activity) {\n      for (const tokenSlug of getActivityTokenSlugs(activity)) {\n        tokenSlugs.add(tokenSlug);\n      }\n    }\n  }\n\n  return tokenSlugs;\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentActivityId(global: GlobalState, accountId: string, replaceMap: Record<string, string>) {\n  return updateAccountState(global, accountId, {\n    currentActivityId: replaceActivityId(selectAccountState(global, accountId)?.currentActivityId, replaceMap),\n  });\n}\n\nfunction mergeIdsBySlug(\n  oldIdsBySlug: Record<string, string[]> | undefined,\n  newIdsBySlug: Record<string, string[]>,\n  activityById: Record<string, ApiActivity>,\n) {\n  return {\n    ...oldIdsBySlug,\n    ...mapValues(newIdsBySlug, (newIds, slug) => {\n      // There may be newer local transactions in `idsBySlug`, so a sorting is needed\n      return mergeSortedActivityIds(newIds, oldIdsBySlug?.[slug] ?? [], activityById);\n    }),\n  };\n}\n\nfunction areAllInitialActivitiesLoaded(\n  global: GlobalState,\n  accountId: string,\n  newAreInitialActivitiesLoaded: Partial<Record<ApiChain, boolean>>,\n) {\n  // The initial activities may be loaded and added before the authentication completes\n  const { addressByChain } = selectAccountOrAuthAccount(global, accountId) ?? { addressByChain: {} };\n\n  return Object.keys(addressByChain).every((chain) => newAreInitialActivitiesLoaded[chain as ApiChain]);\n}\n\nexport function updatePendingActivitiesToTrustedByReplacements(\n  global: GlobalState,\n  accountId: string,\n  localActivities: ApiActivity[],\n  replacedIds: Record<string, string>,\n): GlobalState {\n  const accountState = selectAccountState(global, accountId);\n  const activitiesState = accountState?.activities;\n\n  if (!activitiesState?.byId) return global;\n\n  const newById = { ...activitiesState.byId } as Record<string, ApiActivity>;\n\n  for (const localActivity of localActivities) {\n    const chainActivityId = replacedIds[localActivity.id];\n\n    if (chainActivityId && localActivity.status === 'pendingTrusted') {\n      const chainActivity = activitiesState.byId[chainActivityId];\n\n      if (chainActivity?.status === 'pending') {\n        newById[chainActivityId] = { ...chainActivity, status: 'pendingTrusted' };\n      }\n    }\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: { ...activitiesState, byId: newById },\n  });\n}\n\nexport function updatePendingActivitiesWithTrustedStatus(\n  global: GlobalState,\n  accountId: string,\n  chain: ApiChain | undefined,\n  pendingActivities: readonly ApiActivity[] | undefined,\n  replacedIds: Record<string, string>,\n  prevActivitiesForReplacement: ApiActivity[],\n): GlobalState {\n  if (!chain || pendingActivities === undefined) return global;\n\n  const reversedReplacedIds: Record<string, string> = swapKeysAndValues(replacedIds);\n  const prevById = buildCollectionByKey(prevActivitiesForReplacement, 'id');\n\n  // For pending activities, we need to check the status of the corresponding local activity\n  const adjustedPendingActivities = pendingActivities.map((a) => {\n    const oldId = reversedReplacedIds[a.id];\n    const oldActivity = oldId ? prevById[oldId] : undefined;\n    if (oldActivity && oldActivity.status === 'pendingTrusted') {\n      return { ...a, status: 'pendingTrusted' } as ApiActivity;\n    }\n\n    return a;\n  });\n\n  global = replacePendingActivities(global, accountId, chain, adjustedPendingActivities);\n\n  return global;\n}\n","import type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport isEmptyObject from '../../util/isEmptyObject';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountSettings, updateAccountState } from './misc';\n\nexport function addNft(global: GlobalState, accountId: string, nft: ApiNft, shouldAppendToEnd?: boolean) {\n  const nftAddress = nft.address;\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: { ...nfts?.byAddress, [nftAddress]: nft },\n      orderedAddresses: shouldAppendToEnd\n        ? orderedAddresses.concat(nftAddress)\n        : [nftAddress, ...orderedAddresses],\n    },\n  });\n}\n\nexport function removeNft(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n  const { [nftAddress]: removedNft, ...byAddress } = nfts?.byAddress ?? {};\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress,\n      orderedAddresses,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function updateNft(global: GlobalState, accountId: string, nftAddress: string, partial: Partial<ApiNft>) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const nft = nfts?.byAddress?.[nftAddress];\n  if (!nfts || !nft) return global;\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: {\n        ...nfts.byAddress,\n        [nftAddress]: { ...nft, ...partial },\n      },\n    },\n  });\n}\n\nexport function addToSelectedAddresses(global: GlobalState, accountId: string, nftAddresses: string[]) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = [...(nfts?.selectedAddresses ?? []), ...nftAddresses];\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function removeFromSelectedAddresses(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses: selectedAddresses.length ? selectedAddresses : undefined,\n    },\n  });\n}\n\n// Updates the account settings to ensure the specified NFT is up-to-date.\nexport function updateAccountSettingsBackgroundNft(global: GlobalState, nft: ApiNft) {\n  Object.entries(global.settings.byAccountId).forEach(([accountId, settings]) => {\n    if (settings.cardBackgroundNft?.address === nft.address) {\n      global = updateAccountSettings(global, accountId, {\n        ...settings,\n        cardBackgroundNft: nft,\n      });\n    }\n  });\n\n  return global;\n}\n\nexport function addUnorderedNfts(\n  global: GlobalState,\n  accountId: string,\n  updatedNfts?: Record<string, ApiNft>,\n): GlobalState {\n  if (!updatedNfts || isEmptyObject(updatedNfts)) {\n    return global;\n  }\n\n  const { byAddress } = selectAccountState(global, accountId)?.nfts || { byAddress: {} };\n\n  Object.values(updatedNfts).forEach((nft) => {\n    const existingNft = byAddress?.[nft.address];\n    if (existingNft) {\n      global = updateNft(global, accountId, nft.address, nft);\n    } else {\n      global = addNft(global, accountId, nft, true);\n    }\n  });\n\n  return global;\n}\n","import type { ApiVestingInfo } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\n\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateVestingInfo(global: GlobalState, accountId: string, update: ApiVestingInfo[]): GlobalState {\n  return updateVesting(global, accountId, {\n    info: update,\n  });\n}\n\nexport function updateVesting(\n  global: GlobalState,\n  accountId: string,\n  update: Partial<AccountState['vesting']>,\n): GlobalState {\n  return updateAccountState(global, accountId, {\n    vesting: {\n      ...selectAccountState(global, accountId)?.vesting || { info: [] },\n      ...update,\n    },\n  });\n}\n","import type { GlobalState } from '../types';\n\nexport function updateMintCards(\n  global: GlobalState,\n  update: Partial<GlobalState['currentMintCard']>,\n): GlobalState {\n  return {\n    ...global,\n    currentMintCard: {\n      ...global.currentMintCard,\n      ...update,\n    },\n  };\n}\n","import type { GlobalState } from '../types';\n\nimport { replaceActivityId } from '../helpers/misc';\n\nexport function updateCurrentDomainRenewal(\n  global: GlobalState,\n  update: Partial<GlobalState['currentDomainRenewal']>,\n): GlobalState {\n  return {\n    ...global,\n    currentDomainRenewal: {\n      ...global.currentDomainRenewal,\n      ...update,\n    },\n  };\n}\n\nexport function updateCurrentDomainLinking(\n  global: GlobalState,\n  update: Partial<GlobalState['currentDomainLinking']>,\n): GlobalState {\n  return {\n    ...global,\n    currentDomainLinking: {\n      ...global.currentDomainLinking,\n      ...update,\n    },\n  };\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentDomainRenewalId(global: GlobalState, replaceMap: Record<string, string>) {\n  return updateCurrentDomainRenewal(global, {\n    txId: replaceActivityId(global.currentDomainRenewal.txId, replaceMap),\n  });\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentDomainLinkingId(global: GlobalState, replaceMap: Record<string, string>) {\n  return updateCurrentDomainLinking(global, {\n    txId: replaceActivityId(global.currentDomainLinking.txId, replaceMap),\n  });\n}\n","import type { GlobalState } from '../types';\n\nimport { INITIAL_STATE } from '../initialState';\n\nexport function updateHardware(global: GlobalState, hardwareUpdate: Partial<GlobalState['hardware']>) {\n  return {\n    ...global,\n    hardware: {\n      ...global.hardware,\n      ...hardwareUpdate,\n    },\n  };\n}\n\nexport function resetHardware(global: GlobalState) {\n  return {\n    ...global,\n    hardware: INITIAL_STATE.hardware,\n  };\n}\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { ApiNetwork } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { ApiAuthError, ApiCommonError } from '../../../api/types';\nimport { AppState, AuthState, BiometricsState } from '../../types';\n\nimport {\n  APP_NAME, IS_BIP39_MNEMONIC_ENABLED, IS_TELEGRAM_APP, MNEMONIC_CHECK_COUNT, MNEMONIC_COUNT,\n} from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { verifyIdentity as verifyTelegramBiometricIdentity } from '../../../util/authApi/telegram';\nimport webAuthn from '../../../util/authApi/webAuthn';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../../util/biometrics';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isEmptyObject from '../../../util/isEmptyObject';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport { cloneDeep, compact } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { clearPoisoningCache } from '../../../util/poisoningHash';\nimport { pause } from '../../../util/schedulers';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  addActionHandler, getActions, getGlobal, setGlobal,\n} from '../..';\nimport { INITIAL_STATE } from '../../initialState';\nimport {\n  clearIsPinAccepted,\n  createAccount,\n  createAccountsFromGlobal,\n  setIsPinAccepted,\n  switchAccountAndClearGlobal,\n  updateAccounts,\n  updateAuth,\n  updateBiometrics,\n  updateCurrentAccountId,\n  updateCurrentAccountState,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectAccount,\n  selectAccounts,\n  selectCurrentNetwork,\n  selectIsOneAccount,\n  selectIsPasswordPresent,\n  selectNetworkAccountsMemoized,\n  selectNewestActivityTimestamps,\n} from '../../selectors';\n\nconst CREATING_DURATION = 3300;\nconst NATIVE_BIOMETRICS_PAUSE_MS = 750;\n\nexport async function switchAccount(global: GlobalState, accountId: string, newNetwork?: ApiNetwork) {\n  if (accountId === global.currentAccountId) {\n    return;\n  }\n\n  const actions = getActions();\n\n  const newestActivityTimestamps = selectNewestActivityTimestamps(global, accountId);\n  await callApi('activateAccount', accountId, newestActivityTimestamps);\n\n  global = getGlobal();\n  setGlobal(switchAccountAndClearGlobal(global, accountId));\n\n  clearPoisoningCache();\n\n  if (newNetwork) {\n    actions.changeNetwork({ network: newNetwork });\n  }\n}\n\naddActionHandler('resetAuth', (global) => {\n  if (global.currentAccountId) {\n    global = { ...global, appState: AppState.Main };\n\n    // Restore the network when refreshing the page during the switching networks\n    global = updateSettings(global, {\n      isTestnet: parseAccountId(global.currentAccountId!).network === 'testnet',\n    });\n  }\n\n  global = { ...global, auth: cloneDeep(INITIAL_STATE.auth) };\n\n  setGlobal(global);\n});\n\naddActionHandler('startCreatingWallet', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const nextAuthState = isPasswordPresent\n    ? AuthState.createBackup\n    : (isFirstAccount\n      ? AuthState.createWallet\n      // The app only has hardware wallets accounts, which means we need to create a password or biometrics\n      : getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  global = getGlobal();\n\n  if (isPasswordPresent && !global.auth.password) {\n    setGlobal(updateAuth(global, {\n      state: AuthState.checkPassword,\n      error: undefined,\n    }));\n    return;\n  }\n\n  const promiseCalls = [\n    callApi('generateMnemonic', IS_BIP39_MNEMONIC_ENABLED && !global.auth.forceAddingTonOnlyAccount),\n    ...(!isPasswordPresent ? [pause(CREATING_DURATION)] : []),\n  ] as [Promise<Promise<string[]> | undefined>, Promise<void> | undefined];\n\n  setGlobal(\n    updateAuth(global, {\n      state: nextAuthState,\n      method: 'createAccount',\n      error: undefined,\n    }),\n  );\n\n  const [mnemonic] = await Promise.all(promiseCalls);\n\n  global = updateAuth(getGlobal(), {\n    mnemonic,\n    mnemonicCheckIndexes: selectMnemonicForCheck(mnemonic?.length ?? MNEMONIC_COUNT),\n  });\n\n  if (isPasswordPresent) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n\n  if (isFirstAccount) {\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('startCreatingBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: global.auth.method !== 'createAccount'\n      ? AuthState.importWalletConfirmBiometrics\n      : AuthState.confirmBiometrics,\n    biometricsStep: 1,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelCreateBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: AuthState.createBiometrics,\n    biometricsStep: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('createPin', (global, actions, { pin, isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletConfirmPin : AuthState.confirmPin,\n    password: pin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('confirmPin', (global, actions, { isImporting }) => {\n  if (getIsNativeBiometricAuthSupported()) {\n    global = updateAuth(global, {\n      state: isImporting ? AuthState.importWalletCreateNativeBiometrics : AuthState.createNativeBiometrics,\n    });\n    setGlobal(global);\n  } else {\n    actions.skipCreateNativeBiometrics();\n  }\n});\n\naddActionHandler('cancelConfirmPin', (global, actions, { isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletCreatePin : AuthState.createPin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelDisclaimer', (global) => {\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n});\n\naddActionHandler('afterCreatePassword', (global, actions, { password, isPasswordNumeric }) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { method } = getGlobal().auth;\n\n  const isImporting = method !== 'createAccount';\n  const isHardware = method === 'importHardwareWallet';\n\n  if (isHardware) {\n    actions.createHardwareAccounts();\n    return;\n  }\n\n  actions.createAccount({ password, isImporting, isPasswordNumeric });\n});\n\naddActionHandler('afterCreateBiometrics', async (global, actions) => {\n  const withCredential = !IS_ELECTRON;\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n    biometricsStep: withCredential ? 1 : undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const credential = withCredential\n      ? await webAuthn.createCredential()\n      : undefined;\n    global = getGlobal();\n    global = updateAuth(global, { biometricsStep: withCredential ? 2 : undefined });\n    setGlobal(global);\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      biometricsStep: undefined,\n    });\n\n    if (!result) {\n      global = updateAuth(global, { error: 'Biometric setup failed.' });\n      setGlobal(global);\n\n      return;\n    }\n\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: result.password });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n      biometricsStep: undefined,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateBiometrics', (global) => {\n  global = updateAuth(global, { state: AuthState.createPassword });\n  setGlobal(global);\n});\n\naddActionHandler('afterCreateNativeBiometrics', async (global, actions) => {\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const { password } = global.auth;\n    const result = await authApi.setupNativeBiometrics(password!);\n\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: false });\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateNativeBiometrics', (global, actions) => {\n  const { password } = global.auth;\n\n  global = updateAuth(global, { isLoading: false, error: undefined });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n\n  actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n});\n\naddActionHandler('createAccount', async (global, actions, {\n  password, isImporting, isPasswordNumeric, version,\n}) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const network = selectCurrentNetwork(getGlobal());\n\n  const result = await callApi(\n    isImporting ? 'importMnemonic' : 'createWallet',\n    network,\n    global.auth.mnemonic!,\n    password,\n    version,\n  );\n\n  global = getGlobal();\n\n  if (!result || 'error' in result) {\n    setGlobal(updateAuth(global, { isLoading: undefined }));\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  const { accountId, addressByChain, secondNetworkAccount } = result;\n\n  if (!isImporting) {\n    global = { ...global, appState: AppState.Auth, isAddAccountModalOpen: undefined };\n  }\n  global = updateAuth(global, {\n    isLoading: undefined,\n    password: undefined,\n    firstNetworkAccount: {\n      addressByChain,\n      accountId,\n    },\n    secondNetworkAccount,\n    ...(isPasswordNumeric && { isPasswordNumeric: true }),\n  });\n  global = clearIsPinAccepted(global);\n\n  if (isImporting) {\n    const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n    if (hasAccounts) {\n      setGlobal(global);\n      actions.afterConfirmDisclaimer();\n\n      return;\n    } else {\n      global = updateAuth(global, { state: AuthState.disclaimer });\n    }\n  } else {\n    const accounts = selectAccounts(global) ?? {};\n    const isFirstAccount = isEmptyObject(accounts);\n    global = updateAuth(global, {\n      state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('createHardwareAccounts', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { hardwareSelectedIndices = [] } = getGlobal().auth;\n  const network = selectCurrentNetwork(getGlobal());\n\n  const ledgerApi = await import('../../../util/ledger');\n  const wallets = await Promise.all(\n    hardwareSelectedIndices.map(\n      (wallet) => ledgerApi.importLedgerWallet(network, wallet),\n    ),\n  );\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isFirstAccount) {\n    callActionInMain('addHardwareAccounts', { wallets });\n    return;\n  }\n\n  actions.addHardwareAccounts({ wallets });\n});\n\naddActionHandler('addHardwareAccounts', (global, actions, { wallets }) => {\n  const isFirstAccount = !global.currentAccountId;\n  const nextActiveAccountId = wallets[0]?.accountId;\n  if (nextActiveAccountId) {\n    void callApi('activateAccount', nextActiveAccountId);\n  }\n\n  const updatedGlobal = wallets.reduce((currentGlobal, wallet) => {\n    if (!wallet) {\n      return currentGlobal;\n    }\n    const { accountId, address, walletInfo } = wallet;\n    const addressByChain = { ton: address };\n\n    currentGlobal = updateCurrentAccountId(currentGlobal, accountId);\n    currentGlobal = createAccount({\n      global: currentGlobal,\n      accountId,\n      addressByChain,\n      type: 'hardware',\n      partial: {\n        ...(walletInfo && {\n          ledger: {\n            driver: walletInfo.driver,\n            index: walletInfo.index,\n          },\n        }),\n      },\n    });\n\n    return currentGlobal;\n  }, getGlobal());\n\n  if (nextActiveAccountId) {\n    global = updateCurrentAccountId(updatedGlobal, nextActiveAccountId);\n  }\n  global = updateAuth(global, { isLoading: false });\n  global = {\n    ...global,\n    shouldForceAccountEdit: true,\n  };\n  setGlobal(global);\n\n  if (getGlobal().areSettingsOpen) {\n    actions.closeSettings();\n  }\n\n  wallets.forEach((hardwareWallet) => {\n    if (hardwareWallet?.accountId) {\n      actions.tryAddNotificationAccount({ accountId: hardwareWallet?.accountId });\n    }\n  });\n\n  actions.afterSignIn();\n  if (isFirstAccount) {\n    actions.resetApiSettings();\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('afterCheckMnemonic', (global, actions) => {\n  global = createAccountsFromGlobal(global);\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('restartCheckMnemonicIndexes', (global, actions, { worldsCount }) => {\n  setGlobal(\n    updateAuth(global, {\n      mnemonicCheckIndexes: selectMnemonicForCheck(worldsCount),\n    }),\n  );\n});\n\naddActionHandler('skipCheckMnemonic', (global, actions) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('skipCheckMnemonic');\n    return;\n  }\n\n  global = createAccountsFromGlobal(global);\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  global = updateCurrentAccountState(global, { isBackupRequired: true });\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('startImportingWallet', (global) => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const state = isPasswordPresent && !global.auth.password\n    ? AuthState.importWalletCheckPassword\n    : AuthState.importWallet;\n\n  setGlobal(\n    updateAuth(global, {\n      state,\n      error: undefined,\n      method: 'importMnemonic',\n    }),\n  );\n});\n\naddActionHandler('openAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.about, error: undefined }));\n});\n\naddActionHandler('closeAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.none, error: undefined }));\n});\n\naddActionHandler('afterImportMnemonic', async (global, actions, { mnemonic }) => {\n  mnemonic = compact(mnemonic);\n\n  if (!isMnemonicPrivateKey(mnemonic)) {\n    if (!await callApi('validateMnemonic', mnemonic)) {\n      setGlobal(updateAuth(getGlobal(), {\n        error: ApiAuthError.InvalidMnemonic,\n      }));\n\n      return;\n    }\n  }\n\n  global = getGlobal();\n\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n  const state = getDoesUsePinPad()\n    ? AuthState.importWalletCreatePin\n    : (IS_BIOMETRIC_AUTH_SUPPORTED\n      ? AuthState.importWalletCreateBiometrics\n      : AuthState.importWalletCreatePassword);\n\n  global = updateAuth(global, {\n    mnemonic,\n    error: undefined,\n    ...(!isPasswordPresent && { state }),\n  });\n  setGlobal(global);\n\n  if (!isPasswordPresent) {\n    if (!hasAccounts) {\n      actions.requestConfetti();\n    }\n\n    void vibrateOnSuccess();\n  } else {\n    actions.confirmDisclaimer();\n  }\n});\n\naddActionHandler('confirmDisclaimer', (global, actions) => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n\n  if (isPasswordPresent) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  actions.afterConfirmDisclaimer();\n});\n\naddActionHandler('afterConfirmDisclaimer', (global, actions) => {\n  const { firstNetworkAccount } = global.auth;\n\n  global = createAccountsFromGlobal(global, true);\n  global = updateCurrentAccountId(global, firstNetworkAccount!.accountId);\n  global = updateAuth(global, { state: AuthState.ready });\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('cleanAuthError', (global) => {\n  setGlobal(updateAuth(global, { error: undefined }));\n});\n\nexport function selectMnemonicForCheck(worldsCount: number) {\n  return Array(worldsCount)\n    .fill(0)\n    .map((_, i) => ({ i, rnd: Math.random() }))\n    .sort((a, b) => a.rnd - b.rnd)\n    .map((i) => i.i)\n    .slice(0, Math.min(MNEMONIC_CHECK_COUNT, worldsCount))\n    .sort((a, b) => a - b);\n}\n\naddActionHandler('startChangingNetwork', (global, actions, { network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startChangingNetwork', { network });\n  }\n\n  const accountIds = Object.keys(selectNetworkAccountsMemoized(network, global.accounts!.byId)!);\n\n  if (accountIds.length) {\n    const accountId = accountIds[0];\n    actions.switchAccount({ accountId, newNetwork: network });\n  } else {\n    setGlobal({\n      ...global,\n      areSettingsOpen: false,\n      appState: AppState.Auth,\n    });\n    actions.changeNetwork({ network });\n  }\n});\n\naddActionHandler('switchAccount', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccount', payload);\n    return;\n  }\n\n  const { accountId, newNetwork } = payload;\n  await switchAccount(global, accountId, newNetwork);\n});\n\naddActionHandler('afterSelectHardwareWallets', (global, actions, { hardwareSelectedIndices }) => {\n  setGlobal(updateAuth(global, {\n    method: 'importHardwareWallet',\n    hardwareSelectedIndices,\n    error: undefined,\n  }));\n\n  actions.afterCreatePassword({ password: '' });\n});\n\naddActionHandler('enableBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: 'Wrong password, please try again.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    error: undefined,\n    state: BiometricsState.TurnOnRegistration,\n  });\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    const credential = IS_ELECTRON\n      ? undefined\n      : await webAuthn.createCredential();\n\n    global = getGlobal();\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnVerification });\n    setGlobal(global);\n\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    if (!result) {\n      global = updateBiometrics(global, {\n        error: 'Biometric setup failed.',\n        state: BiometricsState.TurnOnPasswordConfirmation,\n      });\n      setGlobal(global);\n\n      return;\n    }\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnComplete });\n    setGlobal(global);\n\n    await callApi('changePassword', password, result.password);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n\n    setGlobal(global);\n    actions.setInMemoryPassword({ password: undefined, force: true });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateBiometrics(global, {\n      error,\n      state: BiometricsState.TurnOnPasswordConfirmation,\n    });\n    setGlobal(global);\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('disableBiometrics', async (global, actions, { password, isPasswordNumeric }) => {\n  const { password: oldPassword } = global.biometrics;\n\n  if (!password || !oldPassword) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    await callApi('changePassword', oldPassword, password);\n  } catch (err: any) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: err?.message || 'Failed to disable biometrics.' });\n    setGlobal(global);\n\n    return;\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    state: BiometricsState.TurnOffComplete,\n    error: undefined,\n  });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('closeBiometricSettings', (global) => {\n  global = { ...global, biometrics: cloneDeep(INITIAL_STATE.biometrics) };\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOn', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOnPasswordConfirmation });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOffWarning', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffWarning });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOff', async (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffBiometricConfirmation });\n  setGlobal(global);\n\n  const password = await authApi.getPassword(global.settings.authConfig!);\n  global = getGlobal();\n\n  if (!password) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n  } else {\n    global = updateBiometrics(global, {\n      state: BiometricsState.TurnOffCreatePassword,\n      password,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('disableNativeBiometrics', (global) => {\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('enableNativeBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: 'Incorrect code, please try again.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n\n  global = setIsPinAccepted(global);\n  global = {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n  setGlobal(global);\n\n  try {\n    let isVerified: boolean;\n\n    if (IS_TELEGRAM_APP) {\n      const verificationResult = await verifyTelegramBiometricIdentity();\n      isVerified = verificationResult.success;\n    } else {\n      isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n    }\n\n    if (!isVerified) {\n      global = getGlobal();\n      global = {\n        ...global,\n        nativeBiometricsError: 'Failed to enable biometrics.',\n      };\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n      void vibrateOnError();\n\n      return;\n    }\n\n    const result = await authApi.setupNativeBiometrics(password);\n\n    await pause(NATIVE_BIOMETRICS_PAUSE_MS);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n    global = { ...global, nativeBiometricsError: undefined };\n    setGlobal(global);\n    actions.setInMemoryPassword({ password: undefined, force: true });\n\n    void vibrateOnSuccess();\n  } catch (err: any) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: err?.message || 'Failed to enable biometrics.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    void vibrateOnError();\n  }\n});\n\naddActionHandler('clearNativeBiometricsError', (global) => {\n  return {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n});\n\naddActionHandler('openAuthBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAuthBackupWalletModal');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.safetyRules });\n  setGlobal(global);\n});\n\naddActionHandler('openMnemonicPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openMnemonicPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.mnemonicPage });\n  setGlobal(global);\n});\n\naddActionHandler('openCreateBackUpPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCreateBackUpPage');\n    return;\n  }\n\n  const accounts = selectAccounts(global) ?? {};\n\n  const isFirstAccount = isEmptyObject(accounts);\n  global = updateAuth(global, {\n    state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('openCheckWordsPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCheckWordsPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.checkWords });\n  setGlobal(global);\n});\n\naddActionHandler('closeCheckWordsPage', (global, actions, props) => {\n  const { isBackupCreated } = props || {};\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeCheckWordsPage', props);\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && isBackupCreated) {\n    actions.afterCheckMnemonic();\n  }\n});\n\naddActionHandler('copyStorageData', async (global, actions) => {\n  const accountConfigJson = await callApi('fetchAccountConfigForDebugPurposesOnly');\n\n  if (accountConfigJson) {\n    const storageData = JSON.stringify({\n      ...JSON.parse(accountConfigJson),\n      global: reduceGlobalForDebug(),\n    });\n\n    await copyTextToClipboard(storageData);\n\n    actions.showNotification({ message: getTranslation('Copied') });\n  } else {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  }\n});\n\naddActionHandler('importAccountByVersion', async (global, actions, { version }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('importAccountByVersion', { version });\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n\n  const wallet = (await callApi('importNewWalletVersion', accountId, version))!;\n  global = getGlobal();\n\n  if (!wallet.isNew) {\n    actions.switchAccount({ accountId: wallet.accountId });\n    return;\n  }\n\n  const { title: currentWalletTitle, type } = selectAccount(global, accountId)!;\n  const addressByChain = { ton: wallet.address };\n  global = updateCurrentAccountId(global, wallet.accountId);\n\n  const ledgerInfo = wallet.ledger ? {\n    ledger: wallet.ledger,\n  } : undefined;\n\n  global = createAccount({\n    global,\n    accountId: wallet.accountId,\n    type,\n    addressByChain,\n    partial: { ...ledgerInfo, title: currentWalletTitle },\n    titlePostfix: version,\n  });\n  setGlobal(global);\n\n  await callApi('activateAccount', wallet.accountId);\n\n  actions.tryAddNotificationAccount({ accountId: wallet.accountId });\n});\n\naddActionHandler('setIsAuthLoading', (global, actions, { isLoading }) => {\n  global = updateAuth(global, { isLoading });\n  setGlobal(global);\n});\n\naddActionHandler('importViewAccount', async (global, actions, { addressByChain }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('importViewAccount', { addressByChain });\n    return;\n  }\n\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n  const network = selectCurrentNetwork(getGlobal());\n  if (isFirstAccount) {\n    global = updateAuth(global, { isLoading: true });\n  } else {\n    global = updateAccounts(global, { isLoading: true });\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      callActionInNative('setIsAccountLoading', { isLoading: true });\n    }\n  }\n  setGlobal(global);\n\n  const result = await callApi('importViewAccount', network, addressByChain);\n\n  global = getGlobal();\n  if (isFirstAccount) {\n    global = updateAuth(global, { isLoading: undefined });\n  } else {\n    global = updateAccounts(global, { isLoading: undefined });\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      callActionInNative('setIsAccountLoading', { isLoading: undefined });\n    }\n  }\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  global = getGlobal();\n  global = createAccount({\n    global,\n    accountId: result.accountId,\n    addressByChain: result.resolvedAddresses,\n    type: 'view',\n    partial: { title: result.title },\n  });\n  global = updateCurrentAccountId(global, result.accountId);\n  setGlobal(global);\n\n  if (getGlobal().areSettingsOpen) {\n    actions.closeSettings();\n  }\n\n  actions.tryAddNotificationAccount({ accountId: result.accountId });\n\n  actions.afterSignIn();\n  if (isFirstAccount) {\n    actions.resetApiSettings();\n    actions.requestConfetti();\n  } else {\n    actions.closeAddAccountModal();\n  }\n  void vibrateOnSuccess();\n});\n\naddActionHandler('startImportViewAccount', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.importViewAccount, error: undefined }));\n});\n\naddActionHandler('closeImportViewAccount', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.none, error: undefined }));\n});\n\naddActionHandler('openAuthImportWalletModal', (global) => {\n  global = updateAuth(global, { isImportModalOpen: true });\n  setGlobal(global);\n});\n\naddActionHandler('closeAuthImportWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeAuthImportWalletModal');\n  }\n\n  global = updateAuth(global, { isImportModalOpen: undefined });\n  setGlobal(global);\n});\n\nfunction reduceGlobalForDebug() {\n  const reduced = cloneDeep(getGlobal());\n\n  reduced.tokenInfo = {} as any;\n  reduced.swapTokenInfo = {} as any;\n  Object.entries(reduced.byAccountId).forEach(([, state]) => {\n    state.activities = {} as any;\n  });\n\n  return reduced;\n}\n","import type { ApiChain, ApiSwapAsset, ApiTokenWithPrice, ApiTransaction } from '../../api/types';\nimport type { Account, UserSwapToken } from '../types';\n\nimport { CHAIN_CONFIG, TINY_TRANSFER_MAX_COST, TONCOIN } from '../../config';\nimport { isScamTransaction } from '../../util/activities';\nimport { toBig } from '../../util/decimals';\n\nexport function getIsTinyOrScamTransaction(transaction: ApiTransaction, token?: ApiTokenWithPrice) {\n  if (isScamTransaction(transaction)) return true;\n  if (!token || transaction.nft || transaction.type) return false;\n\n  const cost = toBig(transaction.amount, token.decimals).abs().mul(token.priceUsd ?? 0);\n  return cost.lt(TINY_TRANSFER_MAX_COST);\n}\n\nexport function resolveSwapAssetId(asset: ApiSwapAsset) {\n  return asset.slug === TONCOIN.slug ? asset.symbol : (asset.tokenAddress ?? asset.slug);\n}\n\nexport function resolveSwapAsset(bySlug: Record<string, ApiSwapAsset>, anyId: string) {\n  return bySlug[anyId] ?? Object.values(bySlug).find(({ tokenAddress }) => tokenAddress === anyId);\n}\n\nexport function getIsSupportedChain(chain?: string): chain is ApiChain {\n  return chain as ApiChain in CHAIN_CONFIG;\n}\n\nexport function getIsInternalSwap({\n  from,\n  to,\n  toAddress,\n  addressByChain,\n}: {\n  from?: UserSwapToken | ApiSwapAsset;\n  to?: UserSwapToken | ApiSwapAsset;\n  toAddress?: string;\n  addressByChain?: Account['addressByChain'];\n}) {\n  const isMultichain = Boolean(addressByChain?.tron);\n  return (from?.chain === 'ton' && to?.chain === 'ton') || (\n    isMultichain && from && to && addressByChain\n    && getIsSupportedChain(from.chain)\n    && addressByChain[to.chain as ApiChain] === toAddress\n  );\n}\n","import type { ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState, PriceHistoryPeriods } from '../types';\n\nexport function updateTokenPriceHistory(global: GlobalState, slug: string, partial: PriceHistoryPeriods): GlobalState {\n  const { bySlug } = global.tokenPriceHistory;\n\n  return {\n    ...global,\n    tokenPriceHistory: {\n      bySlug: {\n        ...bySlug,\n        [slug]: {\n          ...bySlug[slug],\n          ...partial,\n        },\n      },\n    },\n  };\n}\n\nexport function updateTokenInfo(global: GlobalState, partial: Record<string, ApiTokenWithPrice>): GlobalState {\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...global.tokenInfo.bySlug,\n        ...partial,\n      },\n    },\n  };\n}\n","import type {\n  ApiActivity,\n  ApiSwapAsset,\n  ApiToken,\n  ApiTokenWithPrice,\n} from '../../../api/types';\n\nimport { unique } from '../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { pause, throttle, waitFor } from '../../../util/schedulers';\nimport { buildUserToken } from '../../../util/tokens';\nimport { callApi } from '../../../api';\nimport { SEC } from '../../../api/constants';\nimport { getIsTinyOrScamTransaction } from '../../helpers';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  addPastActivities,\n  changeBalance,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentSignature,\n  updateSettings,\n} from '../../reducers';\nimport { updateTokenInfo } from '../../reducers/tokens';\nimport {\n  selectAccount,\n  selectAccountState,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsHistoryEndReached,\n  selectLastActivityTimestamp,\n} from '../../selectors';\n\nconst IMPORT_TOKEN_PAUSE = 250;\nconst PAST_ACTIVITY_DELAY = 200;\nconst PAST_ACTIVITY_BATCH = 50;\n\nconst pastActivityThrottle: Record<string, NoneToVoidFunction> = {};\nconst initialActivityWaitingByAccountId: Record<string, Promise<unknown>> = {};\n\naddActionHandler('fetchPastActivities', (global, actions, { slug, shouldLoadWithBudget }) => {\n  const accountId = global.currentAccountId!;\n  const throttleKey = `${accountId} ${slug ?? '__main__'}`;\n\n  // Besides the throttling itself, the `throttle` avoids concurrent activity loading\n  pastActivityThrottle[throttleKey] ||= throttle(\n    fetchPastActivities.bind(undefined, accountId, slug),\n    PAST_ACTIVITY_DELAY,\n    true,\n  );\n\n  pastActivityThrottle[throttleKey]();\n  if (shouldLoadWithBudget) {\n    pastActivityThrottle[throttleKey]();\n  }\n});\n\nasync function fetchPastActivities(accountId: string, slug?: string) {\n  // To avoid gaps in the history, we need to wait until the initial activities are loaded. The worker starts watching\n  // for new activities at the moment the initial activities are loaded. This also prevents requesting the activities\n  // that the worker is already loading.\n  await waitInitialActivityLoading(accountId);\n\n  let global = getGlobal();\n\n  if (selectIsHistoryEndReached(global, accountId, slug)) {\n    return;\n  }\n\n  const fetchedActivities: ApiActivity[] = [];\n  let toTimestamp = selectLastActivityTimestamp(global, accountId, slug);\n  let shouldFetchMore = true;\n  let isEndReached = false;\n\n  while (shouldFetchMore) {\n    const result = await callApi('fetchPastActivities', accountId, PAST_ACTIVITY_BATCH, slug, toTimestamp);\n    if (!result) {\n      return;\n    }\n\n    global = getGlobal();\n\n    if (!result.length) {\n      isEndReached = true;\n      break;\n    }\n\n    const { areTinyTransfersHidden } = global.settings;\n\n    const filteredResult = result.filter((tx) => {\n      const shouldHide = tx.kind === 'transaction'\n        && (\n          getIsTransactionWithPoisoning(tx)\n          || (areTinyTransfersHidden && getIsTinyOrScamTransaction(tx))\n        );\n\n      return !shouldHide;\n    });\n\n    fetchedActivities.push(...result);\n    shouldFetchMore = filteredResult.length < PAST_ACTIVITY_BATCH && fetchedActivities.length < PAST_ACTIVITY_BATCH;\n    toTimestamp = result[result.length - 1].timestamp;\n  }\n\n  global = addPastActivities(global, accountId, slug, fetchedActivities, isEndReached);\n  setGlobal(global);\n}\n\naddActionHandler('setIsBackupRequired', (global, actions, { isMnemonicChecked }) => {\n  const { isBackupRequired } = selectCurrentAccountState(global) ?? {};\n\n  setGlobal(updateCurrentAccountState(global, {\n    isBackupRequired: isMnemonicChecked ? undefined : isBackupRequired,\n  }));\n});\n\naddActionHandler('submitSignature', async (global, actions, payload) => {\n  const { password } = payload;\n  const { promiseId } = global.currentSignature!;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSignature(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  await callApi('confirmDappRequest', promiseId, password);\n\n  setGlobal(updateCurrentSignature(getGlobal(), { isSigned: true }));\n});\n\naddActionHandler('clearSignatureError', (global) => {\n  setGlobal(updateCurrentSignature(global, { error: undefined }));\n});\n\naddActionHandler('cancelSignature', (global) => {\n  const { promiseId } = global.currentSignature || {};\n\n  if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  setGlobal({\n    ...global,\n    currentSignature: undefined,\n  });\n});\n\naddActionHandler('addToken', (global, actions, { token }) => {\n  if (!global.tokenInfo?.bySlug?.[token.slug]) {\n    global = updateTokenInfo(global, {\n      [token.slug]: {\n        name: token.name,\n        symbol: token.symbol,\n        slug: token.slug,\n        decimals: token.decimals,\n        chain: token.chain,\n        image: token.image,\n        keywords: token.keywords,\n        price: token.price ?? 0,\n        priceUsd: token.priceUsd ?? 0,\n        percentChange24h: token.change24h ?? 0,\n      },\n    });\n  }\n\n  const { balances } = selectCurrentAccountState(global) ?? {};\n\n  if (!balances?.bySlug[token.slug]) {\n    global = updateCurrentAccountState(global, {\n      balances: {\n        ...balances,\n        bySlug: {\n          ...balances?.bySlug,\n          [token.slug]: 0n,\n        },\n      },\n    });\n  }\n\n  const settings = selectCurrentAccountSettings(global);\n  global = updateCurrentAccountSettings(global, {\n    importedSlugs: [...settings?.importedSlugs ?? [], token.slug],\n  });\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  global = updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: [...accountSettings.orderedSlugs ?? [], token.slug],\n    alwaysShownSlugs: unique([...accountSettings.alwaysShownSlugs ?? [], token.slug]),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((slug) => slug !== token.slug),\n    deletedSlugs: accountSettings.deletedSlugs?.filter((slug) => slug !== token.slug),\n  });\n\n  return global;\n});\n\naddActionHandler('importToken', async (global, actions, { address }) => {\n  const { currentAccountId } = global;\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: true,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n\n  const slug = (await callApi('buildTokenSlug', 'ton', address))!;\n  global = getGlobal();\n\n  let token: ApiTokenWithPrice | ApiToken | undefined = global.tokenInfo.bySlug?.[slug];\n\n  if (!token) {\n    token = await callApi('fetchToken', global.currentAccountId!, address);\n    await pause(IMPORT_TOKEN_PAUSE);\n\n    global = getGlobal();\n    if (!token) {\n      global = updateSettings(global, {\n        importToken: {\n          isLoading: false,\n          token: undefined,\n        },\n      });\n      setGlobal(global);\n      return;\n    } else {\n      const apiToken: ApiTokenWithPrice = {\n        ...token,\n        price: 0,\n        priceUsd: 0,\n        percentChange24h: 0,\n      };\n      global = updateTokenInfo(global, { [apiToken.slug]: apiToken });\n      setGlobal(global);\n    }\n  }\n\n  const balances = selectAccountState(global, currentAccountId!)?.balances?.bySlug ?? {};\n  const shouldUpdateBalance = !(token.slug in balances);\n\n  const userToken = buildUserToken(token);\n\n  global = getGlobal();\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: userToken,\n    },\n  });\n  if (shouldUpdateBalance) {\n    global = changeBalance(global, global.currentAccountId!, token.slug, 0n);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('resetImportToken', (global) => {\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('verifyHardwareAddress', async (global, actions) => {\n  const accountId = global.currentAccountId!;\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (!(await ledgerApi.reconnectLedger())) {\n    actions.showError({ error: '$ledger_not_ready' });\n    return;\n  }\n\n  try {\n    actions.showDialog({ title: 'Ledger', message: '$ledger_verify_address_on_device' });\n    await ledgerApi.verifyAddress(accountId);\n  } catch (err) {\n    actions.showError({ error: err as string });\n  }\n});\n\naddActionHandler('setActiveContentTab', (global, actions, { tab }) => {\n  return updateCurrentAccountState(global, {\n    activeContentTab: tab,\n  });\n});\n\naddActionHandler('addSwapToken', (global, actions, { token }) => {\n  const isAlreadyExist = token.slug in global.swapTokenInfo.bySlug;\n\n  if (isAlreadyExist) {\n    return;\n  }\n\n  const apiSwapAsset: ApiSwapAsset = {\n    name: token.name,\n    symbol: token.symbol,\n    chain: token.chain,\n    slug: token.slug,\n    decimals: token.decimals,\n    image: token.image,\n    tokenAddress: token.tokenAddress,\n    keywords: token.keywords,\n    isPopular: false,\n    price: 0,\n    priceUsd: 0,\n  };\n\n  setGlobal({\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...global.swapTokenInfo.bySlug,\n        [apiSwapAsset.slug]: apiSwapAsset,\n      },\n    },\n  });\n});\n\naddActionHandler('apiUpdateWalletVersions', (global, actions, params) => {\n  const { accountId, versions, currentVersion } = params;\n  global = {\n    ...global,\n    walletVersions: {\n      ...global.walletVersions,\n      currentVersion,\n      byId: {\n        ...global.walletVersions?.byId,\n        [accountId]: versions,\n      },\n    },\n  };\n  setGlobal(global);\n});\n\nfunction waitInitialActivityLoading(accountId: string) {\n  initialActivityWaitingByAccountId[accountId] ||= waitFor(() => {\n    const global = getGlobal();\n\n    return !selectAccount(global, accountId) // The account has been removed, the initial activities will never appear\n      || selectAccountState(global, accountId)?.activities?.idsMain !== undefined;\n  }, SEC, 60);\n\n  return initialActivityWaitingByAccountId[accountId];\n}\n","export const SEC = 1000;\nexport const MINUTE = 60 * SEC;\nexport const DAYS_IN_YEAR = 365;\nexport const FIRST_TRANSACTIONS_LIMIT = 50;\n\nexport const FAKE_TX_ID = 'fakeTxId';\n","import type { ApiStakingType } from '../../api/types';\n\nimport { DEFAULT_FEE } from '../../config';\nimport { TON_GAS, TON_GAS_REAL } from '../../api/chains/ton/constants';\n\ntype TonOperationFees = {\n  gas: bigint;\n  real: bigint;\n};\n\nexport default function getTonOperationFees(operation: keyof typeof TON_GAS_REAL): TonOperationFees {\n  return {\n    gas: TON_GAS[operation] + DEFAULT_FEE,\n    real: TON_GAS_REAL[operation],\n  };\n}\n\nexport function getTonStakingFees(type?: ApiStakingType): {\n  stake: TonOperationFees;\n  unstake: TonOperationFees;\n  claim?: TonOperationFees;\n} {\n  switch (type) {\n    case 'nominators': {\n      return {\n        stake: getTonOperationFees('stakeNominators'),\n        unstake: getTonOperationFees('unstakeNominators'),\n      };\n    }\n    case 'liquid': {\n      return {\n        stake: getTonOperationFees('stakeLiquid'),\n        unstake: getTonOperationFees('unstakeLiquid'),\n      };\n    }\n    case 'jetton': {\n      return {\n        stake: getTonOperationFees('stakeJettons'),\n        unstake: getTonOperationFees('unstakeJettons'),\n        claim: getTonOperationFees('claimJettons'),\n      };\n    }\n    case 'ethena': {\n      return {\n        stake: getTonOperationFees('stakeEthena'),\n        unstake: getTonOperationFees('unstakeEthena'),\n        claim: getTonOperationFees('unstakeEthenaLocked'),\n      };\n    }\n  }\n\n  return {\n    stake: { gas: 0n, real: 0n },\n    unstake: { gas: 0n, real: 0n },\n    claim: { gas: 0n, real: 0n },\n  };\n}\n","import type { ApiStakingState, ApiStakingType } from '../../api/types';\n\nimport {\n  ETHENA_STAKING_MIN_AMOUNT,\n  MIN_ACTIVE_STAKING_REWARDS,\n  NOMINATORS_STAKING_MIN_AMOUNT,\n  STAKING_MIN_AMOUNT,\n} from '../../config';\n\nexport function getStakingMinAmount(type?: ApiStakingType) {\n  switch (type) {\n    case 'nominators':\n      return NOMINATORS_STAKING_MIN_AMOUNT;\n    case 'ethena':\n      return ETHENA_STAKING_MIN_AMOUNT;\n    default:\n      return STAKING_MIN_AMOUNT;\n  }\n}\n\nexport function getUnstakeTime(state?: ApiStakingState) {\n  switch (state?.type) {\n    case 'nominators':\n    case 'liquid':\n      return state.end;\n    case 'ethena':\n      return state.unlockTime;\n    default:\n      return undefined;\n  }\n}\n\nexport function getStakingTitle(stakingType?: ApiStakingState['type']) {\n  return stakingType === 'ethena' ? 'How does it work?' : 'Why this is safe';\n}\n\nexport type StakingStateStatus = 'inactive' | 'active' | 'unstakeRequested' | 'readyToClaim';\n\nexport function getStakingStateStatus(state: ApiStakingState): StakingStateStatus {\n  if (state.unstakeRequestAmount) {\n    if (state.type === 'ethena' && state.unlockTime && state.unlockTime <= Date.now()) {\n      return 'readyToClaim';\n    }\n\n    return 'unstakeRequested';\n  }\n  if (getIsActiveStakingState(state)) {\n    return 'active';\n  }\n  return 'inactive';\n}\n\nexport function getIsActiveStakingState(state: ApiStakingState) {\n  return Boolean(\n    state.balance\n    || state.unstakeRequestAmount\n    || ('unclaimedRewards' in state && state.unclaimedRewards > MIN_ACTIVE_STAKING_REWARDS),\n  );\n}\n\nexport function getIsLongUnstake(state: ApiStakingState, amount?: bigint): boolean | undefined {\n  switch (state.type) {\n    case 'nominators': {\n      return true;\n    }\n    case 'liquid': {\n      return amount === undefined ? false : amount > state.instantAvailable;\n    }\n    case 'jetton': {\n      return false;\n    }\n    case 'ethena': {\n      return true;\n    }\n  }\n\n  return undefined;\n}\n\nexport function getFullStakingBalance(state: ApiStakingState): bigint {\n  switch (state.type) {\n    case 'jetton': {\n      return state.balance + state.unclaimedRewards;\n    }\n    case 'ethena': {\n      return state.balance + state.unstakeRequestAmount;\n    }\n  }\n\n  return state.balance;\n}\n","import {\n  type ApiAnyDisplayError,\n  ApiAuthError,\n  ApiCommonError,\n  ApiHardwareError,\n  ApiTransactionDraftError,\n  ApiTransactionError,\n} from '../../api/types';\n\n/** Returns `true` if the error should be shown in the <PasswordForm /> or <LedgerConfirmOperation /> screen instead of a dialog */\nexport function isInlineError(error: ApiAnyDisplayError | string | undefined) {\n  const _error = error as ApiAnyDisplayError;\n  return _error === ApiCommonError.InvalidPassword\n    || _error === ApiHardwareError.HardwareOutdated\n    || _error === ApiHardwareError.BlindSigningNotEnabled\n    || _error === ApiHardwareError.RejectedByUser;\n}\n\nexport function errorCodeToMessage(error: ApiAnyDisplayError | string = ApiCommonError.Unexpected): string {\n  const _error = error as ApiAnyDisplayError;\n  switch (_error) {\n    case ApiTransactionDraftError.InvalidAmount:\n      return 'Invalid amount';\n\n    case ApiAuthError.InvalidAddress:\n    case ApiTransactionDraftError.InvalidToAddress:\n      return 'Invalid address';\n\n    case ApiTransactionDraftError.InvalidStateInit:\n      return '$state_init_invalid';\n\n    case ApiTransactionDraftError.InsufficientBalance:\n      return 'Insufficient balance';\n\n    case ApiAuthError.DomainNotResolved:\n    case ApiTransactionDraftError.DomainNotResolved:\n      return 'Domain is not connected to a wallet';\n\n    case ApiTransactionDraftError.WalletNotInitialized:\n      return 'Encryption is not possible. The recipient is not a wallet or has no outgoing transactions.';\n\n    case ApiTransactionDraftError.InvalidAddressFormat:\n      return 'Invalid address format. Only URL Safe Base64 format is allowed.';\n\n    case ApiTransactionError.PartialTransactionFailure:\n      return 'Not all transactions were sent successfully';\n\n    case ApiTransactionError.IncorrectDeviceTime:\n      return 'The time on your device is incorrect, sync it and try again';\n\n    case ApiTransactionError.UnsuccesfulTransfer:\n      return 'Transfer was unsuccessful. Try again later.';\n\n    case ApiTransactionError.ConcurrentTransaction:\n      return 'Another transaction was sent from this wallet simultaneously. Please try again.';\n\n    case ApiTransactionDraftError.InactiveContract:\n      return '$transfer_inactive_contract_error';\n\n    case ApiHardwareError.HardwareOutdated:\n      return '$ledger_outdated';\n\n    case ApiHardwareError.BlindSigningNotEnabled:\n      return '$hardware_blind_sign_not_enabled_internal';\n\n    case ApiHardwareError.RejectedByUser:\n      return 'Canceled by the user';\n\n    case ApiHardwareError.ProofTooLarge:\n      return 'The proof for signing provided by the Dapp is too large';\n\n    case ApiCommonError.ServerError:\n      return window.navigator.onLine\n        ? 'An error on the server side. Please try again.'\n        : 'No internet connection. Please check your connection and try again.';\n\n    case ApiCommonError.DebugError:\n      return 'Unexpected error. Please let the support know.';\n\n    case ApiCommonError.Unexpected:\n      return 'Unexpected';\n\n    case ApiCommonError.InvalidPassword:\n      return 'Wrong password, please try again.';\n\n    default:\n      return error;\n  }\n}\n","import type { ApiAnyDisplayError } from '../../api/types';\nimport type { GlobalState } from '../types';\nimport { ApiCommonError } from '../../api/types';\n\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport { vibrateOnError, vibrateOnSuccess } from '../../util/haptics';\nimport { callApi } from '../../api';\nimport { getActions, getGlobal, setGlobal } from '../index';\nimport { clearIsPinAccepted, setIsPinAccepted } from '../reducers';\nimport { selectIsHardwareAccount } from '../selectors';\nimport { errorCodeToMessage, isInlineError } from './errors';\n\nexport type FormUpdate<State> = {\n  state?: State;\n  isLoading?: true;\n  error?: string;\n};\n\nexport type FormReducer<State> = (global: GlobalState, update: FormUpdate<State>) => GlobalState;\n\nexport type ErrorTransferResult = { error: ApiAnyDisplayError | string } | undefined;\n\n/** Returns `false` if there is a problem preventing the further progress, which has been shown to the user */\nexport async function prepareTransfer<State>(\n  hardwareConfirmState: State,\n  updateForm: FormReducer<State>,\n  password?: string,\n) {\n  let global = getGlobal();\n  const isHardware = selectIsHardwareAccount(global);\n\n  if (!isHardware) {\n    const isPasswordCorrect = await callApi('verifyPassword', password ?? '');\n    global = getGlobal();\n\n    if (!isPasswordCorrect) {\n      setGlobal(updateForm(global, {\n        error: errorCodeToMessage(ApiCommonError.InvalidPassword),\n      }));\n      return false;\n    }\n\n    if (getDoesUsePinPad()) {\n      global = setIsPinAccepted(global);\n    }\n\n    void vibrateOnSuccess();\n  }\n\n  setGlobal(updateForm(global, {\n    isLoading: true,\n    error: undefined,\n    ...(isHardware && { state: hardwareConfirmState }),\n  }));\n\n  return true;\n}\n\n/** Returns `false` if the result is unsuccessful and the error has been shown to the user */\nexport function handleTransferResult<T>(\n  result: T,\n  updateForm: FormReducer<never>,\n): result is Exclude<T, ErrorTransferResult> {\n  let global = getGlobal();\n  global = updateForm(global, { isLoading: undefined });\n  global = clearIsPinAccepted(global);\n  setGlobal(global);\n\n  if (isErrorTransferResult(result)) {\n    reportErrorTransferResult(result, updateForm);\n    return false;\n  }\n\n  void vibrateOnSuccess();\n  return true;\n}\n\n/** Returns `false` if any of the results is unsuccessful and the error has been shown to the user */\nexport function handleTransferResults<T>(\n  results: T[],\n  updateForm: FormReducer<never>,\n): results is Exclude<T, ErrorTransferResult>[] {\n  if (!results.length) {\n    return true;\n  }\n\n  const errorResultIndex = results.findIndex(isErrorTransferResult);\n  const result = results[errorResultIndex >= 0 ? errorResultIndex : 0];\n  return handleTransferResult(result, updateForm);\n}\n\nexport function isErrorTransferResult(result: unknown): result is ErrorTransferResult {\n  return result === undefined || (!!result && typeof result === 'object' && 'error' in result);\n}\n\nexport function reportErrorTransferResult(result: ErrorTransferResult, updateForm: FormReducer<never>) {\n  void vibrateOnError();\n\n  const error = result?.error;\n  let global = getGlobal();\n  global = updateForm(global, { isLoading: undefined });\n\n  if (isInlineError(error)) {\n    global = updateForm(global, {\n      error: errorCodeToMessage(error),\n    });\n    setGlobal(global);\n  } else {\n    setGlobal(global);\n    getActions().showError({ error });\n  }\n}\n\n/** Returns `false` if there is a problem preventing the further progress, which has been shown to the user */\nexport async function prepareDappOperation<State>(\n  accountId: string,\n  hardwareConfirmState: State,\n  updateForm: FormReducer<State>,\n  doesNeedSigning: boolean,\n  password?: string,\n) {\n  let global = getGlobal();\n  const isHardware = selectIsHardwareAccount(global, accountId);\n\n  if (!isHardware) {\n    const isPasswordCorrect = !doesNeedSigning || await callApi('verifyPassword', password ?? '');\n    global = getGlobal();\n\n    if (!isPasswordCorrect) {\n      setGlobal(updateForm(global, {\n        error: errorCodeToMessage(ApiCommonError.InvalidPassword),\n      }));\n      return false;\n    }\n\n    if (getDoesUsePinPad()) {\n      global = setIsPinAccepted(global);\n    }\n  }\n\n  setGlobal(updateForm(global, {\n    isLoading: true,\n    error: undefined,\n    ...(isHardware && { state: hardwareConfirmState }),\n  }));\n\n  return true;\n}\n\n/** Returns `false` if the result is unsuccessful and the error has been shown to the user */\nexport function handleDappSignatureResult<T>(\n  result: T,\n  updateForm: FormReducer<never>,\n): result is Exclude<T, ErrorTransferResult> {\n  if (isErrorTransferResult(result)) {\n    reportErrorTransferResult(result, updateForm);\n    return false;\n  }\n\n  void vibrateOnSuccess();\n  return true;\n}\n","import type { ApiDapp, ApiDappRequest } from '../api/types';\n\nexport function getDappConnectionUniqueId(request: ApiDappRequest | ApiDapp): string {\n  return (request as any).sseOptions?.appClientId ?? (request as any).sse?.appClientId ?? 'jsbridge';\n}\n","import type { ApiDappConnectionType } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { DappConnectState, SignDataState, TransferState } from '../../types';\n\nimport { ANIMATION_END_DELAY } from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { getDappConnectionUniqueId } from '../../../util/getDappConnectionUniqueId';\nimport { callActionInMain, callApiInMain } from '../../../util/multitab';\nimport { pause, waitFor } from '../../../util/schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { handleDappSignatureResult, prepareDappOperation } from '../../helpers/transfer';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearConnectedDapps,\n  clearCurrentDappSignData,\n  clearCurrentDappTransfer,\n  clearDappConnectRequest,\n  clearIsPinAccepted,\n  removeConnectedDapp,\n  updateConnectedDapps,\n  updateCurrentDappSignData,\n  updateCurrentDappTransfer,\n  updateDappConnectRequest,\n} from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\nimport { switchAccount } from './auth';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../../components/ui/Modal';\n\nconst GET_DAPPS_PAUSE = 250;\n\naddActionHandler('submitDappConnectRequestConfirm', async (global, actions, { password, accountId }) => {\n  const {\n    promiseId, permissions, proof,\n  } = global.dappConnectRequest!;\n\n  if (!await prepareDappOperation(\n    accountId,\n    DappConnectState.ConfirmHardware,\n    updateDappConnectRequest,\n    !!permissions?.isPasswordRequired,\n    password,\n  )) {\n    return;\n  }\n\n  const signingResult = proof\n    ? await callApi('signTonProof', accountId, proof, password)\n    : { signature: undefined };\n\n  if (!handleDappSignatureResult(signingResult, updateDappConnectRequest)) {\n    return;\n  }\n\n  actions.switchAccount({ accountId });\n\n  // It's important to call the API methods including promiseId in the main window, because the Bottom Sheet window\n  // knows nothing about that promiseId.\n  await callApiInMain('confirmDappRequestConnect', promiseId!, {\n    accountId,\n    proofSignature: signingResult.signature,\n  });\n\n  global = getGlobal();\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  await pause(GET_DAPPS_PAUSE);\n  actions.getDapps();\n});\n\naddActionHandler('cancelDappConnectRequestConfirm', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearDappConnectRequestConfirm');\n  }\n\n  cancelDappOperation(\n    (global) => global.dappConnectRequest,\n    clearDappConnectRequest,\n  );\n});\n\n// Clear state after closing the NBS modal.\n// TODO: Remove after fully migrating to Air app.\naddActionHandler('clearDappConnectRequestConfirm', (global) => {\n  return clearDappConnectRequest(global);\n});\n\naddActionHandler('setDappConnectRequestState', (global, actions, { state }) => {\n  setGlobal(updateDappConnectRequest(global, { state }));\n});\n\naddActionHandler('cancelDappTransfer', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearDappTransfer');\n  }\n\n  cancelDappOperation(\n    (global) => global.currentDappTransfer,\n    clearCurrentDappTransfer,\n  );\n});\n\n// Clear state after closing the NBS modal.\n// TODO: Remove after fully migrating to Air app.\naddActionHandler('clearDappTransfer', (global) => {\n  return clearCurrentDappTransfer(global);\n});\n\nfunction cancelDappOperation(\n  getState: (global: GlobalState) => { promiseId?: string } | undefined,\n  clearState: (global: GlobalState) => GlobalState,\n) {\n  let global = getGlobal();\n  const { promiseId } = getState(global) ?? {};\n\n  if (promiseId) {\n    void callApiInMain('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearState(global);\n  setGlobal(global);\n}\n\naddActionHandler('submitDappTransfer', async (global, actions, { password } = {}) => {\n  const { promiseId } = global.currentDappTransfer;\n  if (!promiseId) {\n    return;\n  }\n\n  if (!await prepareDappOperation(\n    global.currentAccountId!,\n    TransferState.ConfirmHardware,\n    updateCurrentDappTransfer,\n    true,\n    password,\n  )) {\n    return;\n  }\n\n  global = getGlobal();\n  const { transactions, validUntil, vestingAddress } = global.currentDappTransfer;\n  const accountId = global.currentAccountId!;\n  const signedTransactions = await callApi('signTransfers', accountId, transactions!, {\n    password,\n    validUntil,\n    vestingAddress,\n  });\n\n  if (!handleDappSignatureResult(signedTransactions, updateCurrentDappTransfer)) {\n    return;\n  }\n\n  await callApiInMain('confirmDappRequestSendTransaction', promiseId, signedTransactions);\n});\n\naddActionHandler('submitDappSignData', async (global, actions, { password } = {}) => {\n  const { promiseId } = global.currentDappSignData;\n  if (!promiseId) {\n    return;\n  }\n\n  if (!await prepareDappOperation(\n    global.currentAccountId!,\n    0 as never, // Ledger doesn't support SignData yet, so this value is never used\n    updateCurrentDappSignData,\n    true,\n    password,\n  )) {\n    return;\n  }\n\n  global = getGlobal();\n  const { dapp, payloadToSign } = global.currentDappSignData;\n  const accountId = global.currentAccountId!;\n  const signedData = await callApi('signData', accountId, dapp!.url, payloadToSign!, password);\n\n  if (!handleDappSignatureResult(signedData, updateCurrentDappSignData)) {\n    return;\n  }\n\n  await callApiInMain('confirmDappRequestSignData', promiseId, signedData);\n});\n\naddActionHandler('getDapps', async (global, actions) => {\n  const { currentAccountId } = global;\n\n  let result = await callApi('getDapps', currentAccountId!);\n\n  if (!result) {\n    return;\n  }\n\n  // Check for broken dapps without URL\n  const brokenDapp = result.find(({ url }) => !url);\n  if (brokenDapp) {\n    actions.deleteDapp({ url: brokenDapp.url, uniqueId: getDappConnectionUniqueId(brokenDapp) });\n    result = result.filter(({ url }) => url);\n  }\n\n  global = getGlobal();\n  global = updateConnectedDapps(global, result);\n  setGlobal(global);\n});\n\naddActionHandler('deleteAllDapps', (global) => {\n  const { currentAccountId } = global;\n\n  void callApi('deleteAllDapps', currentAccountId!);\n\n  global = getGlobal();\n  global = clearConnectedDapps(global);\n  setGlobal(global);\n});\n\naddActionHandler('deleteDapp', (global, actions, { url, uniqueId }) => {\n  const { currentAccountId } = global;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('deleteDapp', { url, uniqueId });\n  } else {\n    void callApi('deleteDapp', currentAccountId!, url, uniqueId);\n  }\n\n  global = getGlobal();\n  global = removeConnectedDapp(global, url);\n  setGlobal(global);\n});\n\naddActionHandler('cancelDappSignData', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearDappSignData');\n  }\n\n  cancelDappOperation(\n    (global) => global.currentDappSignData,\n    clearCurrentDappSignData,\n  );\n});\n\n// Clear state after closing the NBS modal.\n// TODO: Remove after fully migrating to Air app.\naddActionHandler('clearDappSignData', (global) => {\n  return clearCurrentDappSignData(global);\n});\n\naddActionHandler('apiUpdateDappConnect', async (global, actions, {\n  accountId, dapp, permissions, promiseId, proof,\n}) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => Boolean(getGlobal().dappConnectRequest), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  global = updateDappConnectRequest(global, {\n    state: DappConnectState.Info,\n    promiseId,\n    accountId,\n    dapp,\n    permissions: {\n      isAddressRequired: permissions.address,\n      isPasswordRequired: permissions.proof,\n    },\n    proof,\n  });\n  setGlobal(global);\n\n  actions.addSiteToBrowserHistory({ url: dapp.url });\n});\n\naddActionHandler('apiUpdateDappSendTransaction', async (global, actions, payload) => {\n  const { promiseId, transactions, emulation, dapp, validUntil, vestingAddress } = payload;\n\n  await apiUpdateDappOperation(\n    payload,\n    (global) => global.currentDappTransfer,\n    actions.closeDappTransfer,\n    (global) => global.currentDappTransfer.state !== TransferState.None,\n    clearCurrentDappTransfer,\n    (global) => updateCurrentDappTransfer(global, {\n      state: selectIsHardwareAccount(global) && transactions.length > 1\n        ? TransferState.WarningHardware\n        : TransferState.Initial,\n      promiseId,\n      transactions,\n      emulation,\n      dapp,\n      validUntil,\n      vestingAddress,\n    }),\n  );\n});\n\naddActionHandler('apiUpdateDappSignData', async (global, actions, payload) => {\n  const { promiseId, dapp, payloadToSign } = payload;\n\n  await apiUpdateDappOperation(\n    payload,\n    (global) => global.currentDappSignData,\n    actions.closeDappSignData,\n    (global) => global.currentDappSignData.state !== SignDataState.None,\n    clearCurrentDappSignData,\n    (global) => updateCurrentDappSignData(global, {\n      state: SignDataState.Initial,\n      promiseId,\n      dapp,\n      payloadToSign,\n    }),\n  );\n});\n\nasync function apiUpdateDappOperation(\n  payload: { accountId: string },\n  getState: (global: GlobalState) => { promiseId?: string },\n  close: NoneToVoidFunction,\n  isStateActive: (global: GlobalState) => boolean,\n  clearState: (global: GlobalState) => GlobalState,\n  updateState: (global: GlobalState) => GlobalState,\n) {\n  let global = getGlobal();\n\n  const { accountId } = payload;\n  const { promiseId: currentPromiseId } = getState(global);\n\n  await switchAccount(global, accountId);\n\n  if (currentPromiseId && !IS_DELEGATED_BOTTOM_SHEET) {\n    close();\n    const closeDuration = getIsPortrait() ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION;\n    await pause(closeDuration + ANIMATION_END_DELAY);\n  }\n\n  // We only need to apply changes in NBS when dapp operation modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => isStateActive(getGlobal()), 300, 5))) {\n      return;\n    }\n  }\n\n  global = getGlobal();\n  global = clearState(global);\n  global = updateState(global);\n  setGlobal(global);\n}\n\naddActionHandler('apiUpdateDappLoading', async (global, actions, { connectionType, isSse, accountId }) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => isAnyDappModalActive(getGlobal(), connectionType), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && accountId) {\n    actions.switchAccount({ accountId });\n  }\n\n  if (connectionType === 'connect') {\n    global = updateDappConnectRequest(global, {\n      state: DappConnectState.Info,\n      isSse,\n    });\n  } else if (connectionType === 'sendTransaction') {\n    global = updateCurrentDappTransfer(global, {\n      state: TransferState.Initial,\n      isSse,\n    });\n  } else if (connectionType === 'signData') {\n    global = updateCurrentDappSignData(global, {\n      state: SignDataState.Initial,\n      isSse,\n    });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappCloseLoading', async (global, actions, { connectionType }) => {\n  // We only need to apply changes in NBS when Dapp Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => isAnyDappModalActive(getGlobal(), connectionType), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  // But clear the state if a skeleton is displayed in the Modal\n  if (connectionType === 'connect' && global.dappConnectRequest?.state === DappConnectState.Info) {\n    global = clearDappConnectRequest(global);\n  } else if (connectionType === 'sendTransaction' && global.currentDappTransfer.state === TransferState.Initial) {\n    global = clearCurrentDappTransfer(global);\n  } else if (connectionType === 'signData' && global.currentDappSignData.state === SignDataState.Initial) {\n    global = clearCurrentDappSignData(global);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('loadExploreSites', async (global, _, { isLandscape }) => {\n  const exploreData = await callApi('loadExploreSites', { isLandscape });\n  global = getGlobal();\n  if (areDeepEqual(exploreData, global.exploreData)) {\n    return;\n  }\n\n  global = { ...global, exploreData };\n  setGlobal(global);\n});\n\nfunction isAnyDappModalActive(global: GlobalState, connectionType: ApiDappConnectionType) {\n  return (connectionType === 'connect' && !!global.dappConnectRequest)\n    || (connectionType === 'sendTransaction' && global.currentDappTransfer.state !== TransferState.None)\n    || (connectionType === 'signData' && global.currentDappSignData.state !== SignDataState.None);\n}\n","import type { ApiSwapEstimateVariant, ApiToken } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport type { FeePrecision, FeeTerms } from './types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintDivideToNumber, bigintMax } from '../bigint';\nimport { bigMax, bigMin } from '../bigNumber';\nimport { findChainConfig } from '../chain';\nimport { fromDecimal, toBig } from '../decimals';\nimport { getChainBySlug, getIsNativeToken } from '../tokens';\n\ntype ExplainSwapFeeInput = Pick<GlobalState['currentSwap'],\n'tokenInSlug' | 'networkFee' | 'realNetworkFee' | 'ourFee' | 'dieselStatus' | 'dieselFee'\n> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token blockchain's native token. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\nexport type ExplainedSwapFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the swap. The wallet must have it on the balance to conduct the swap.\n   * Show this in the swap form when the input amount is  the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: string;\n  shouldShowOurFee: boolean;\n};\n\ntype MaxSwapAmountInput = Pick<GlobalState['currentSwap'], 'ourFeePercent'> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The full network fee terms calculated by `explainSwapFee`. Undefined means that they're unknown. */\n  fullNetworkFee: FeeTerms<string> | undefined;\n};\n\ntype BalanceSufficientForSwapInput = MaxSwapAmountInput & {\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n  /** The \"in\" amount to swap. Undefined means that it's unspecified. */\n  amountIn: string | undefined;\n};\n\ntype CanAffordSwapVariant = {\n  variant: ApiSwapEstimateVariant;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\n/**\n * Converts the swap fee data returned from API into data that is ready to be displayed in the swap form UI.\n */\nexport function explainSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  return shouldSwapBeGasless(input)\n    ? explainGaslessSwapFee(input)\n    : explainGasfullSwapFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the swap.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxSwapAmount({\n  swapType,\n  tokenInBalance,\n  tokenIn,\n  fullNetworkFee,\n  ourFeePercent,\n}: MaxSwapAmountInput): bigint | undefined {\n  if (swapType === SwapType.CrosschainToWallet || tokenInBalance === undefined) {\n    return undefined;\n  }\n\n  let maxAmount = tokenInBalance;\n\n  // For a better UX, assuming the fee is 0 when it's unknown\n  if (fullNetworkFee) {\n    if (!tokenIn) {\n      return undefined;\n    }\n\n    maxAmount -= fromDecimal(fullNetworkFee.token ?? '0', tokenIn.decimals);\n\n    if (getIsNativeToken(tokenIn.slug)) {\n      // When the \"in\" token is native, both `token` and `native` refer to the same currency, so we consider them both\n      maxAmount -= fromDecimal(fullNetworkFee.native ?? '0', tokenIn.decimals);\n    }\n  }\n\n  ourFeePercent ??= swapType === SwapType.OnChain ? DEFAULT_OUR_SWAP_FEE : 0;\n  maxAmount = bigintDivideToNumber(maxAmount, 1 + (ourFeePercent / 100));\n\n  return bigintMax(maxAmount, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to swap the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForSwap(input: BalanceSufficientForSwapInput) {\n  const {\n    swapType,\n    amountIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n    tokenIn,\n    fullNetworkFee,\n  } = input;\n\n  if (swapType === SwapType.CrosschainToWallet) {\n    return true;\n  }\n\n  if (\n    amountIn === undefined\n    || !tokenIn\n    || tokenInBalance === undefined\n    || nativeTokenInBalance === undefined\n    || !fullNetworkFee\n  ) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  const maxAmount = getMaxSwapAmount(input);\n  if (maxAmount === undefined) {\n    return undefined;\n  }\n\n  const swapAmountInBigint = fromDecimal(amountIn, tokenIn.decimals);\n  const networkNativeFeeBigint = fromDecimal(fullNetworkFee.native ?? '0', nativeTokenIn.decimals);\n\n  return swapAmountInBigint <= maxAmount && networkNativeFeeBigint <= nativeTokenInBalance;\n}\n\n/**\n * Decides whether the balance is sufficient for the given swap estimate variant (DEX).\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function canAffordSwapEstimateVariant(input: CanAffordSwapVariant) {\n  if (!input.tokenIn || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(input.tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  // Try to pay with gas\n  const networkFeeBigint = fromDecimal(input.variant.networkFee, nativeTokenIn.decimals);\n  if (input.nativeTokenInBalance >= networkFeeBigint) {\n    return true;\n  }\n\n  // Otherwise, try to pay with diesel\n  if (input.variant.dieselFee) {\n    if (input.tokenInBalance === undefined) {\n      return undefined;\n    }\n    const dieselFeeBigint = fromDecimal(input.variant.dieselFee, input.tokenIn.decimals);\n    if (input.tokenInBalance >= dieselFeeBigint) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function shouldSwapBeGasless(\n  input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance' | 'networkFee' | 'dieselStatus' | 'swapType'>,\n) {\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const isInsufficientNative = input.networkFee !== undefined && nativeTokenBalance !== undefined\n    && nativeTokenBalance.lt(input.networkFee);\n\n  return (\n    input.swapType === SwapType.OnChain\n    && isInsufficientNative\n    && !isNativeIn\n    && Boolean(input.dieselStatus) && input.dieselStatus !== 'not-available'\n  );\n}\n\n/**\n * Converts the data of a swap not involving diesel\n */\nfunction explainGasfullSwapFee(input: ExplainSwapFeeInput) {\n  const result: ExplainedSwapFee = {\n    isGasless: false,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const isExact = result.excessFee === '0';\n\n  if (input.networkFee !== undefined) {\n    const networkTerms = { native: input.networkFee };\n    result.fullFee = {\n      precision: isExact ? 'exact' : 'lessThan',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realNetworkFee !== undefined) {\n    const networkTerms = { native: input.realNetworkFee };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel swap data\n */\nfunction explainGaslessSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const result: ExplainedSwapFee = {\n    isGasless: true,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  if (input.networkFee === undefined || input.dieselFee === undefined || nativeTokenBalance === undefined) {\n    return result;\n  }\n\n  const isExact = result.excessFee === '0';\n  const isStarsDiesel = input.dieselStatus === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n\n  const networkTerms = {\n    [dieselKey]: input.dieselFee,\n    native: nativeTokenBalance.toString(),\n  };\n  result.fullFee = {\n    precision: isExact ? 'exact' : 'lessThan',\n    terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', false),\n    networkTerms,\n  };\n  result.realFee = result.fullFee;\n\n  if (input.realNetworkFee !== undefined) {\n    // We are sure this amount is > 0 because `shouldBeGasless` would return `false` otherwise and this function\n    // wouldn't be called.\n    const networkFeeCoveredByDiesel = Big(input.networkFee).sub(nativeTokenBalance);\n    const realFeeInDiesel = Big(input.dieselFee).div(networkFeeCoveredByDiesel).mul(input.realNetworkFee);\n    // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n    const dieselRealFee = bigMin(input.dieselFee, realFeeInDiesel);\n    // Cover the remaining real fee with the native token.\n    const nativeRealFee = bigMax(0, Big(input.realNetworkFee).sub(networkFeeCoveredByDiesel));\n\n    const realNetworkTerms = {\n      [dieselKey]: dieselRealFee.toString(),\n      native: nativeRealFee.toString(),\n    };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(realNetworkTerms, input.ourFee ?? '0', false),\n      networkTerms: realNetworkTerms,\n    };\n  }\n\n  return result;\n}\n\nfunction getBigNativeTokenInBalance(input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance'>) {\n  if (!input.tokenInSlug || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeToken = findChainConfig(getChainBySlug(input.tokenInSlug))?.nativeToken;\n  return nativeToken ? toBig(input.nativeTokenInBalance, nativeToken.decimals) : undefined;\n}\n\nfunction getExcessFee({ networkFee, realNetworkFee }: Pick<ExplainSwapFeeInput, 'networkFee' | 'realNetworkFee'>) {\n  return networkFee !== undefined && realNetworkFee !== undefined\n    ? Big(networkFee).sub(realNetworkFee).toString()\n    : undefined;\n}\n\nfunction addOurFeeToTerms(terms: FeeTerms<string>, ourFee: string, isOurFeeNative: boolean) {\n  return {\n    ...terms,\n    native: isOurFeeNative ? Big(terms.native ?? '0').add(ourFee).toString() : terms.native,\n    token: isOurFeeNative ? terms.token : Big(terms.token ?? '0').add(ourFee).toString(),\n  };\n}\n\nfunction shouldShowOurFee(input: Pick<ExplainSwapFeeInput, 'swapType'>) {\n  return input.swapType === SwapType.OnChain;\n}\n","import type { BigSource } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function bigMin<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).lt(value1) ? value0 : value1;\n}\n\nexport function bigMax<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).gt(value1) ? value0 : value1;\n}\n","import type { ApiEthenaStakingState, ApiJettonStakingState } from '../../../api/types';\nimport { StakingState } from '../../types';\n\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { getTonStakingFees } from '../../../util/fee/getTonOperationFees';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { pause } from '../../../util/schedulers';\nimport { getIsActiveStakingState, getIsLongUnstake } from '../../../util/staking';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { handleTransferResult, prepareTransfer } from '../../helpers/transfer';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentStaking,\n  clearIsPinAccepted,\n  resetHardware,\n  updateAccountStaking,\n  updateAccountState,\n  updateCurrentStaking,\n} from '../../reducers';\nimport { selectAccountStakingState, selectAccountStakingStatesBySlug, selectIsHardwareAccount } from '../../selectors';\nimport { switchAccount } from './auth';\n\nconst MODAL_CLOSING_DELAY = 50;\n\naddActionHandler('startStaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  const { tokenSlug } = payload || {};\n\n  if (tokenSlug) {\n    const stakingState = selectAccountStakingStatesBySlug(global, global.currentAccountId!)[tokenSlug];\n    if (stakingState) {\n      global = getGlobal();\n      global = updateAccountStaking(global, global.currentAccountId!, { stakingId: stakingState.id });\n      setGlobal(global);\n\n      global = getGlobal();\n    }\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startStaking', payload);\n    return;\n  }\n\n  const state = StakingState.StakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('startUnstaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  const { stakingId } = payload || {};\n\n  if (stakingId) {\n    global = getGlobal();\n    global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n    setGlobal(global);\n\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startUnstaking', payload);\n    return;\n  }\n\n  const state = StakingState.UnstakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('fetchStakingFee', async (global, actions, payload) => {\n  const { amount } = payload;\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const state = selectAccountStakingState(global, currentAccountId);\n\n  const result = await callApi(\n    'checkStakeDraft',\n    currentAccountId,\n    amount,\n    state,\n  );\n  if (!result || 'error' in result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    fee: result.fee,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingInitial', async (global, actions, payload) => {\n  const { isUnstaking, amount } = payload ?? {};\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  setGlobal(updateCurrentStaking(global, { isLoading: true, error: undefined }));\n\n  const state = selectAccountStakingState(global, currentAccountId);\n\n  if (isUnstaking) {\n    const result = await callApi('checkUnstakeDraft', currentAccountId, amount!, state);\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        if (selectIsHardwareAccount(global)) {\n          global = resetHardware(global);\n          global = updateCurrentStaking(global, { state: StakingState.UnstakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.UnstakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n          tokenAmount: result.tokenAmount,\n        });\n      }\n    }\n  } else {\n    const result = await callApi(\n      'checkStakeDraft',\n      currentAccountId,\n      amount!,\n      state,\n    );\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        if (selectIsHardwareAccount(global)) {\n          global = resetHardware(global);\n          global = updateCurrentStaking(global, { state: StakingState.StakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.StakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n        });\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStaking', async (global, actions, payload = {}) => {\n  const { password, isUnstaking } = payload;\n  const { amount, tokenAmount } = global.currentStaking;\n  const { currentAccountId } = global;\n\n  if (!await prepareTransfer(\n    isUnstaking ? StakingState.UnstakeConfirmHardware : StakingState.StakeConfirmHardware,\n    updateCurrentStaking,\n    password,\n  )) {\n    return;\n  }\n\n  global = getGlobal();\n  const state = selectAccountStakingState(global, currentAccountId!);\n\n  if (isUnstaking) {\n    const unstakeAmount = state.type === 'nominators' ? state.balance : tokenAmount!;\n    const result = await callApi(\n      'submitUnstake',\n      global.currentAccountId!,\n      password,\n      unstakeAmount,\n      state,\n      getTonStakingFees(state.type).unstake.real,\n    );\n\n    if (!handleTransferResult(result, updateCurrentStaking)) {\n      return;\n    }\n\n    const isLongUnstakeRequested = getIsLongUnstake(state, unstakeAmount);\n\n    global = getGlobal();\n    global = updateAccountState(global, currentAccountId!, { isLongUnstakeRequested });\n    global = updateCurrentStaking(global, { state: StakingState.UnstakeComplete });\n    setGlobal(global);\n  } else {\n    const result = await callApi(\n      'submitStake',\n      global.currentAccountId!,\n      password,\n      amount!,\n      state,\n      getTonStakingFees(state.type).stake.real,\n    );\n\n    if (!handleTransferResult(result, updateCurrentStaking)) {\n      return;\n    }\n\n    global = getGlobal();\n    global = updateCurrentStaking(global, { state: StakingState.StakeComplete });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearStakingError', (global) => {\n  setGlobal(updateCurrentStaking(global, { error: undefined }));\n});\n\naddActionHandler('cancelStaking', (global) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  global = clearCurrentStaking(global);\n  setGlobal(global);\n});\n\naddActionHandler('setStakingScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  setGlobal(updateCurrentStaking(global, { state }));\n});\n\naddActionHandler('fetchStakingHistory', async (global) => {\n  const stakingHistory = await callApi('getStakingHistory', global.currentAccountId!);\n\n  if (!stakingHistory) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAccountState(global, global.currentAccountId!, { stakingHistory }, true);\n  setGlobal(global);\n});\n\naddActionHandler('openAnyAccountStakingInfo', async (global, actions, { accountId, network, stakingId }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAnyAccountStakingInfo', { accountId, network, stakingId });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.changeCurrentStaking({ stakingId });\n  actions.openStakingInfo();\n});\n\n// Should be called only when you're sure that the staking is active. Otherwise, call `openStakingInfoOrStart`.\naddActionHandler('openStakingInfo', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openStakingInfo');\n    return;\n  }\n\n  global = { ...global, isStakingInfoModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeStakingInfo', (global) => {\n  global = { ...global, isStakingInfoModalOpen: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('changeCurrentStaking', async (global, actions, { stakingId, shouldReopenModal }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && shouldReopenModal) {\n    callActionInMain('changeCurrentStaking', { stakingId, shouldReopenModal });\n    return;\n  }\n\n  if (shouldReopenModal) {\n    await pause(MODAL_CLOSING_DELAY);\n  }\n\n  global = getGlobal();\n  global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n  setGlobal(global);\n\n  if (shouldReopenModal) {\n    actions.openStakingInfoOrStart();\n  }\n});\n\naddActionHandler('startStakingClaim', (global, actions, payload) => {\n  const { stakingId } = payload || {};\n\n  if (stakingId) {\n    global = getGlobal();\n    global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n    setGlobal(global);\n\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startStakingClaim', payload);\n    return;\n  }\n\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentStaking(global, { state: StakingState.ClaimConnectHardware });\n  } else {\n    global = updateCurrentStaking(global, { state: StakingState.ClaimPassword });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('cancelStakingClaim', (global) => {\n  global = updateCurrentStaking(global, { state: StakingState.None });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingClaim', async (global, actions, { password } = {}) => {\n  const accountId = global.currentAccountId!;\n\n  if (!await prepareTransfer(StakingState.ClaimConfirmHardware, updateCurrentStaking, password)) {\n    return;\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitStakingClaim', { password });\n    return;\n  }\n\n  global = getGlobal();\n\n  const stakingState = selectAccountStakingState(global, accountId) as ApiEthenaStakingState | ApiJettonStakingState;\n  const isEthenaStaking = stakingState.type === 'ethena';\n\n  const result = await callApi(\n    'submitStakingClaimOrUnlock',\n    accountId,\n    password,\n    stakingState,\n    getTonStakingFees(stakingState.type).claim?.real,\n  );\n\n  if (!handleTransferResult(result, updateCurrentStaking)) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    state: isEthenaStaking ? StakingState.ClaimComplete : StakingState.None,\n  });\n  setGlobal(global);\n\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('setStakingScreen', {\n      state: isEthenaStaking ? StakingState.ClaimComplete : StakingState.None,\n    });\n  }\n});\n\n// Opens the staking info modal if the modal is available. Otherwise, opens the staking start modal.\naddActionHandler('openStakingInfoOrStart', (global, actions) => {\n  if (!global.currentAccountId) {\n    return;\n  }\n\n  const stakingState = selectAccountStakingState(global, global.currentAccountId);\n\n  if (getIsActiveStakingState(stakingState)) {\n    actions.openStakingInfo();\n  } else {\n    actions.startStaking();\n  }\n});\n","import type { ApiCheckTransactionDraftResult } from '../../../api/chains/ton/types';\nimport type { ApiSubmitTransferOptions, ApiSubmitTransferResult } from '../../../api/methods/types';\nimport type {\n  ApiChain,\n  ApiSwapActivity,\n  ApiSwapBuildRequest,\n  ApiSwapCexCreateTransactionRequest,\n  ApiSwapDexLabel,\n  ApiSwapEstimateResponse,\n  ApiSwapEstimateVariant,\n  ApiSwapHistoryItem,\n} from '../../../api/types';\nimport type {\n  AssetPairs,\n  GlobalState,\n} from '../../types';\nimport {\n  ActiveTab,\n  SwapErrorType,\n  SwapInputSource,\n  SwapState,\n  SwapType,\n} from '../../types';\n\nimport {\n  DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n  TRX_SWAP_COUNT_FEE_ADDRESS,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { parseTxId } from '../../../util/activities';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { findChainConfig, getChainConfig } from '../../../util/chain';\nimport { fromDecimal, roundDecimal, toDecimal } from '../../../util/decimals';\nimport { canAffordSwapEstimateVariant, shouldSwapBeGasless } from '../../../util/fee/swapFee';\nimport generateUniqueId from '../../../util/generateUniqueId';\nimport { buildCollectionByKey, pick } from '../../../util/iteratees';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { pause, waitFor } from '../../../util/schedulers';\nimport { getChainBySlug, getIsTonToken, getNativeToken } from '../../../util/tokens';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../..';\nimport { resolveSwapAssetId } from '../../helpers';\nimport {\n  getSwapEstimateResetParams,\n  isSwapEstimateInputEqual,\n  isSwapFormFilled,\n  shouldAvoidSwapEstimation,\n} from '../../helpers/swap';\nimport {\n  handleTransferResult,\n  isErrorTransferResult,\n  prepareTransfer,\n  reportErrorTransferResult,\n} from '../../helpers/transfer';\nimport { clearCurrentSwap, clearIsPinAccepted, updateAccountState, updateCurrentSwap } from '../../reducers';\nimport {\n  selectAccount,\n  selectAccountState,\n  selectCurrentAccount,\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectCurrentToncoinBalance,\n  selectIsMultichainAccount,\n  selectSwapType,\n} from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nconst pairsCache: Record<string, { timestamp: number }> = {};\n\nconst CACHE_DURATION = 15 * 60 * 1000; // 15 minutes\nconst WAIT_FOR_CHANGELLY = 5 * 1000;\nconst CLOSING_BOTTOM_SHEET_DURATION = 100; // Like in `useDelegatingBottomSheet`\n\nconst SERVER_ERRORS_MAP = {\n  'Insufficient liquidity': SwapErrorType.NotEnoughLiquidity,\n  'Tokens must be different': SwapErrorType.InvalidPair,\n  'Asset not found': SwapErrorType.InvalidPair,\n  'Pair not found': SwapErrorType.InvalidPair,\n  'Too small amount': SwapErrorType.TooSmallAmount,\n};\n\nfunction buildSwapBuildRequest(global: GlobalState): ApiSwapBuildRequest {\n  const {\n    currentDexLabel,\n    amountIn,\n    amountOut,\n    amountOutMin,\n    slippage,\n    networkFee,\n    swapFee,\n    ourFee,\n    dieselFee,\n    realNetworkFee,\n    estimates,\n  } = global.currentSwap;\n\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  const tokenOut = selectCurrentSwapTokenOut(global)!;\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = amountIn!;\n  const toAmount = amountOut!;\n  const account = selectAccount(global, global.currentAccountId!);\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  const nativeTokenInBalance = nativeTokenIn ? selectCurrentAccountTokenBalance(global, nativeTokenIn.slug) : undefined;\n  const swapType = selectSwapType(global);\n\n  return {\n    from,\n    to,\n    fromAmount,\n    toAmount,\n    toMinAmount: amountOutMin!,\n    slippage,\n    fromAddress: (account?.addressByChain[tokenIn.chain as ApiChain] || account?.addressByChain.ton)!,\n    shouldTryDiesel: shouldSwapBeGasless({ ...global.currentSwap, swapType, nativeTokenInBalance }),\n    dexLabel: currentDexLabel!,\n    networkFee: realNetworkFee ?? networkFee!,\n    swapFee: swapFee!,\n    ourFee: ourFee!,\n    dieselFee,\n    routes: estimates?.[0]?.routes,\n  };\n}\n\nfunction buildSwapEstimates(estimate: ApiSwapEstimateResponse): ApiSwapEstimateVariant[] {\n  const bestEstimate: ApiSwapEstimateVariant = {\n    ...pick(estimate, [\n      'fromAmount',\n      'toAmount',\n      'toMinAmount',\n      'impact',\n      'dexLabel',\n      'networkFee',\n      'realNetworkFee',\n      'swapFee',\n      'swapFeePercent',\n      'ourFee',\n      'dieselFee',\n      'networkFee',\n      'routes',\n    ]),\n  };\n\n  const result: ApiSwapEstimateVariant[] = [\n    bestEstimate,\n    ...(estimate.other ?? []),\n  ];\n\n  return result.sort((a, b) => a.dexLabel.localeCompare(b.dexLabel));\n}\n\nfunction processNativeMaxSwap(global: GlobalState) {\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  let fromAmount = global.currentSwap.amountIn ?? '0';\n  let isFromAmountMax = false;\n\n  if (\n    global.currentSwap.amountIn\n    && selectSwapType(global) === SwapType.OnChain\n    && global.currentSwap.inputSource === SwapInputSource.In\n    && global.currentSwap.isMaxAmount\n  ) {\n    const tokenBalance = selectCurrentAccountTokenBalance(global, tokenIn.slug);\n    fromAmount = toDecimal(tokenBalance, tokenIn.decimals);\n    isFromAmountMax = true;\n  }\n  return { fromAmount, isFromAmountMax };\n}\n\nfunction getSupportedChains(global: GlobalState) {\n  return Object.keys(selectAccount(global, global.currentAccountId!)?.addressByChain || { ton: true }) as ApiChain[];\n}\n\naddActionHandler('startSwap', async (global, actions, payload) => {\n  const isOpen = global.currentSwap.state !== SwapState.None;\n  if (IS_DELEGATING_BOTTOM_SHEET && isOpen) {\n    callActionInNative('cancelSwap');\n    await pause(CLOSING_BOTTOM_SHEET_DURATION);\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startSwap', payload);\n    return;\n  }\n\n  const { state } = payload ?? {};\n  const isPortrait = getIsPortrait();\n\n  const requiredState = state || (isPortrait ? SwapState.Initial : SwapState.None);\n\n  global = updateCurrentSwap(global, {\n    ...payload,\n    state: requiredState,\n    swapId: generateUniqueId(),\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Swap });\n  }\n});\n\naddActionHandler('setDefaultSwapParams', (global, actions, payload) => {\n  let { tokenInSlug: requiredTokenInSlug, tokenOutSlug: requiredTokenOutSlug } = payload ?? {};\n  const { withResetAmount } = payload ?? {};\n\n  requiredTokenInSlug = requiredTokenInSlug || DEFAULT_SWAP_FIRST_TOKEN_SLUG;\n  requiredTokenOutSlug = requiredTokenOutSlug || DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n  if (\n    global.currentSwap.tokenInSlug === requiredTokenInSlug\n    && global.currentSwap.tokenOutSlug === requiredTokenOutSlug\n    && !withResetAmount\n  ) {\n    return;\n  }\n\n  global = updateCurrentSwap(global, {\n    tokenInSlug: requiredTokenInSlug,\n    tokenOutSlug: requiredTokenOutSlug,\n    inputSource: SwapInputSource.In,\n    ...(withResetAmount ? { amountIn: undefined, amountOut: undefined } : undefined),\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelSwap', (global, actions, { shouldReset } = {}) => {\n  if (shouldReset) {\n    const { tokenInSlug, tokenOutSlug } = global.currentSwap;\n\n    global = clearCurrentSwap(global);\n    global = updateCurrentSwap(global, {\n      tokenInSlug,\n      tokenOutSlug,\n      amountIn: undefined,\n      amountOut: undefined,\n      inputSource: SwapInputSource.In,\n    });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentSwap(global, {\n    state: SwapState.None,\n    swapId: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitSwap', async (global, actions, { password }) => {\n  if (!await prepareTransfer(\n    0 as never, // Swap isn't available for hardware accounts yet, so this argument value doesn't matter\n    updateCurrentSwap,\n    password,\n  )) {\n    return;\n  }\n\n  setGlobal(updateCurrentSwap(getGlobal(), { shouldResetOnClose: undefined }));\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const buildResult = await callApi(\n    'swapBuildTransfer', global.currentAccountId!, password, swapBuildRequest,\n  );\n\n  if (!handleTransferResult(buildResult, updateCurrentSwap)) {\n    setGlobal(updateCurrentSwap(getGlobal(), { shouldResetOnClose: true }));\n    return;\n  }\n\n  const swapHistoryItem: ApiSwapHistoryItem = {\n    id: buildResult.id,\n    timestamp: Date.now(),\n    status: 'pendingTrusted',\n    from: swapBuildRequest.from,\n    fromAmount: swapBuildRequest.fromAmount,\n    to: swapBuildRequest.to,\n    toAmount: swapBuildRequest.toAmount,\n    networkFee: global.currentSwap.realNetworkFee ?? global.currentSwap.networkFee!,\n    swapFee: global.currentSwap.swapFee!,\n    ourFee: global.currentSwap.ourFee,\n    hashes: [],\n  };\n\n  setGlobal(updateCurrentSwap(getGlobal(), {\n    tokenInSlug: undefined,\n    tokenOutSlug: undefined,\n    amountIn: undefined,\n    amountOut: undefined,\n    state: SwapState.Complete,\n    shouldResetOnClose: true,\n  }));\n\n  const result = await callApi(\n    'swapSubmit',\n    global.currentAccountId!,\n    password,\n    buildResult.transfers,\n    swapHistoryItem,\n    swapBuildRequest.shouldTryDiesel,\n  );\n\n  if (isErrorTransferResult(result)) {\n    reportErrorTransferResult(result, updateCurrentSwap);\n    setGlobal(updateCurrentSwap(getGlobal(), { shouldResetOnClose: true }));\n    return;\n  }\n\n  setGlobal(updateCurrentSwap(getGlobal(), { activityId: result.activityId }));\n});\n\naddActionHandler('submitSwapCex', async (global, actions, { password }) => {\n  if (!await prepareTransfer(\n    0 as never, // Swap isn't available for hardware accounts yet, so this argument value doesn't matter\n    updateCurrentSwap,\n    password,\n  )) {\n    return;\n  }\n\n  global = getGlobal();\n  setGlobal(updateCurrentSwap(global, { shouldResetOnClose: undefined }));\n\n  const isMutlichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n  const account = selectCurrentAccount(global);\n  const supportedChains = getSupportedChains(global);\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n  const shouldSendTonTransaction = tokenIn.chain === 'ton';\n  const shouldSendTronTransaction = isMutlichainAccount && tokenIn.chain === 'tron';\n  const shouldSendTransaction = shouldSendTonTransaction || shouldSendTronTransaction;\n  const shouldSendTokenToExternalWallet = isMutlichainAccount\n    ? supportedChains.includes(tokenIn.chain as ApiChain)\n    : tokenIn.chain === 'ton';\n\n  const tonAddress = account!.addressByChain.ton!;\n  const toAddress = account?.addressByChain[tokenOut.chain as ApiChain] ?? global.currentSwap.toAddress!;\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const swapTransactionRequest: ApiSwapCexCreateTransactionRequest = {\n    ...pick(swapBuildRequest, ['from', 'fromAmount', 'to', 'swapFee', 'networkFee']),\n    fromAddress: tonAddress,\n    toAddress,\n  };\n\n  const swapItem = await callApi(\n    'swapCexCreateTransaction',\n    global.currentAccountId!,\n    password,\n    swapTransactionRequest,\n  );\n\n  if (!handleTransferResult(swapItem, updateCurrentSwap)) {\n    setGlobal(updateCurrentSwap(getGlobal(), { shouldResetOnClose: true }));\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentSwap(global, {\n    state: shouldSendTokenToExternalWallet ? SwapState.Complete : SwapState.WaitTokens,\n    activityId: swapItem.activity.id,\n    payinAddress: swapItem.swap.cex!.payinAddress,\n    payoutAddress: swapItem.swap.cex!.payoutAddress,\n    payinExtraId: swapItem.swap.cex!.payinExtraId,\n    shouldResetOnClose: true,\n  });\n  setGlobal(global);\n\n  if (shouldSendTransaction) {\n    const transferOptions: ApiSubmitTransferOptions = {\n      password,\n      accountId: global.currentAccountId!,\n      fee: fromDecimal(swapItem.swap.networkFee, tokenIn.decimals),\n      amount: fromDecimal(swapItem.swap.fromAmount, tokenIn.decimals),\n      toAddress: swapItem.swap.cex!.payinAddress,\n      tokenAddress: isMutlichainAccount ? tokenIn.tokenAddress : undefined,\n    };\n\n    await pause(WAIT_FOR_CHANGELLY);\n\n    let transferResult: ApiSubmitTransferResult | undefined;\n\n    if (shouldSendTonTransaction) {\n      transferResult = await callApi('swapCexSubmit', 'ton', transferOptions, swapItem.swap.id);\n    } else if (shouldSendTronTransaction) {\n      transferResult = await callApi('swapCexSubmit', 'tron', transferOptions, swapItem.swap.id);\n    }\n\n    if (isErrorTransferResult(transferResult)) {\n      reportErrorTransferResult(transferResult, updateCurrentSwap);\n      setGlobal(updateCurrentSwap(getGlobal(), { shouldResetOnClose: true }));\n      return;\n    }\n  }\n});\n\naddActionHandler('switchSwapTokens', (global) => {\n  const {\n    tokenInSlug, tokenOutSlug, amountIn, amountOut,\n  } = global.currentSwap;\n\n  global = updateCurrentSwap(global, {\n    isMaxAmount: false,\n    amountIn: amountOut,\n    amountOut: amountIn,\n    tokenInSlug: tokenOutSlug,\n    tokenOutSlug: tokenInSlug,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenIn', (global, actions, { tokenSlug: newTokenInSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenIn = global.swapTokenInfo.bySlug[newTokenInSlug];\n  const adjustedAmountIn = amountIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  // Don't set the same token in both inputs\n  const newTokenOutSlug = newTokenInSlug === tokenOutSlug ? tokenInSlug : tokenOutSlug;\n  const newTokenOut = newTokenOutSlug ? global.swapTokenInfo.bySlug[newTokenOutSlug] : undefined;\n  const adjustedAmountOut = amountOut && newTokenOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  global = updateCurrentSwap(global, {\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    tokenInSlug: newTokenInSlug,\n    tokenOutSlug: newTokenOutSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenOut', (global, actions, { tokenSlug: newTokenOutSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenOut = global.swapTokenInfo.bySlug[newTokenOutSlug];\n  const adjustedAmountOut = amountOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  // Don't set the same token in both inputs\n  const newTokenInSlug = newTokenOutSlug === tokenInSlug ? tokenOutSlug : tokenInSlug;\n  const newTokenIn = newTokenInSlug ? global.swapTokenInfo.bySlug[newTokenInSlug] : undefined;\n  const adjustedAmountIn = amountIn && newTokenIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  global = updateCurrentSwap(global, {\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    tokenOutSlug: newTokenOutSlug,\n    tokenInSlug: newTokenInSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountIn', (global, actions, { amount, isMaxAmount = false }) => {\n  global = updateCurrentSwap(global, {\n    amountIn: amount,\n    isMaxAmount,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountOut', (global, actions, { amount }) => {\n  global = updateCurrentSwap(global, {\n    amountOut: amount,\n    isMaxAmount: false,\n    inputSource: SwapInputSource.Out,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSlippage', (global, actions, { slippage }) => {\n  return updateCurrentSwap(global, { slippage });\n});\n\naddActionHandler('estimateSwap', async () => {\n  await estimateSwapConcurrently(async (global, shouldStop) => {\n    const { tokenInSlug, tokenOutSlug } = global.currentSwap;\n\n    const isTonOnlySwap = (\n      (tokenInSlug ? getIsTonToken(tokenInSlug, true) : true)\n      && (tokenOutSlug ? getIsTonToken(tokenOutSlug, true) : true)\n      && !!(tokenInSlug || tokenOutSlug)\n    );\n\n    const shouldShowAllPairs = global.swapVersion === 3 && isTonOnlySwap;\n\n    // Set shouldShowAllPairs for TON-only swaps\n    if (shouldShowAllPairs !== Boolean(global.currentSwap.shouldShowAllPairs)) {\n      global = updateCurrentSwap(global, { shouldShowAllPairs: shouldShowAllPairs || undefined });\n      setGlobal(global);\n    }\n\n    if (tokenInSlug && !shouldShowAllPairs) {\n      await loadSwapPairs(tokenInSlug);\n\n      if (shouldStop()) return;\n      global = getGlobal();\n    }\n\n    if (tokenInSlug && tokenOutSlug) {\n      const isPairValid = global.swapPairs?.bySlug?.[tokenInSlug]?.[tokenOutSlug] || shouldShowAllPairs;\n      if (!isPairValid) {\n        return {\n          ...getSwapEstimateResetParams(global),\n          errorType: SwapErrorType.InvalidPair,\n        };\n      }\n    }\n\n    if (!isSwapFormFilled(global)) {\n      return getSwapEstimateResetParams(global);\n    }\n\n    if (selectSwapType(global) === SwapType.OnChain) {\n      return estimateDexSwap(global);\n    } else {\n      return estimateCexSwap(global, shouldStop);\n    }\n  });\n});\n\nasync function estimateDexSwap(global: GlobalState): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n  const nativeTokenIn = getChainConfig(getChainBySlug(tokenIn.slug)).nativeToken;\n\n  const from = tokenIn.slug === TONCOIN.slug ? tokenIn.symbol : tokenIn.tokenAddress!;\n  const to = tokenOut.slug === TONCOIN.slug ? tokenOut.symbol : tokenOut.tokenAddress!;\n  const { fromAmount, isFromAmountMax } = processNativeMaxSwap(global);\n  const toAmount = global.currentSwap.amountOut ?? '0';\n  const fromAddress = selectCurrentAccount(global)!.addressByChain.ton!;\n\n  const estimateAmount = global.currentSwap.inputSource === SwapInputSource.In ? { fromAmount } : { toAmount };\n\n  const toncoinBalance = selectCurrentToncoinBalance(global);\n  const shouldTryDiesel = toncoinBalance < fromDecimal(global.currentSwap.networkFee ?? '0', nativeTokenIn.decimals);\n\n  const estimate = await callApi('swapEstimate', global.currentAccountId!, {\n    ...estimateAmount,\n    from,\n    to,\n    slippage: global.currentSwap.slippage,\n    fromAddress,\n    shouldTryDiesel,\n    isFromAmountMax,\n    toncoinBalance: toDecimal(toncoinBalance ?? 0n, TONCOIN.decimals),\n  });\n\n  global = getGlobal();\n\n  if (!estimate || 'error' in estimate) {\n    const errorType = SERVER_ERRORS_MAP[estimate?.error as keyof typeof SERVER_ERRORS_MAP]\n      ?? SwapErrorType.UnexpectedError;\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType,\n    };\n  }\n\n  const errorType = estimate.toAmount === '0' && shouldTryDiesel\n    ? SwapErrorType.NotEnoughForFee\n    : undefined;\n\n  const estimates = buildSwapEstimates(estimate);\n  const currentEstimate = chooseSwapEstimate(global, estimates, estimate.dexLabel);\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    ...(global.currentSwap.inputSource === SwapInputSource.In\n      ? { amountOut: currentEstimate.toAmount }\n      : { amountIn: currentEstimate.fromAmount }\n    ),\n    ...(isFromAmountMax ? { amountIn: currentEstimate.fromAmount } : undefined),\n    bestRateDexLabel: estimate.dexLabel,\n    amountOutMin: currentEstimate.toMinAmount,\n    priceImpact: currentEstimate.impact,\n    errorType,\n    dieselStatus: estimate.dieselStatus,\n    estimates,\n    currentDexLabel: currentEstimate.dexLabel,\n    // Fees\n    networkFee: currentEstimate.networkFee,\n    realNetworkFee: currentEstimate.realNetworkFee,\n    swapFee: currentEstimate.swapFee,\n    swapFeePercent: currentEstimate.swapFeePercent,\n    ourFee: currentEstimate.ourFee,\n    ourFeePercent: estimate.ourFeePercent,\n    dieselFee: currentEstimate.dieselFee,\n  };\n}\n\nasync function estimateCexSwap(global: GlobalState, shouldStop: () => boolean): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = global.currentSwap.amountIn ?? '0';\n  const swapType = selectSwapType(global);\n\n  const estimate = await callApi('swapCexEstimate', {\n    fromAmount,\n    from,\n    to,\n  });\n\n  if (shouldStop()) return undefined;\n\n  global = getGlobal();\n\n  if (!estimate) {\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: window.navigator.onLine ? SwapErrorType.InvalidPair : SwapErrorType.UnexpectedError,\n    };\n  }\n\n  if ('error' in estimate) {\n    const { error } = estimate as { error: string };\n    if (error.includes('requests limit')) {\n      return 'rateLimited';\n    }\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: SwapErrorType.UnexpectedError,\n    };\n  }\n\n  const account = global.accounts?.byId[global.currentAccountId!];\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (swapType === SwapType.CrosschainFromWallet) {\n    if (tokenIn.chain !== 'ton' && tokenIn.chain !== 'tron') {\n      throw new Error(`Unexpected chain ${tokenIn.chain}`);\n    }\n\n    const toAddress = {\n      ton: account!.addressByChain.ton!,\n      tron: TRX_SWAP_COUNT_FEE_ADDRESS,\n    }[tokenIn.chain];\n\n    const txDraft = await callApi('checkTransactionDraft', tokenIn.chain, {\n      accountId: global.currentAccountId!,\n      toAddress,\n      tokenAddress: tokenIn.tokenAddress,\n    });\n    if (txDraft) {\n      ({ networkFee, realNetworkFee } = convertTransferFeesToSwapFees(txDraft, tokenIn.chain));\n    }\n  }\n\n  let amountIn = estimate.fromAmount;\n\n  // Auto-adjust amountIn for crosschain swaps when fee becomes known\n  if (global.currentSwap.isMaxAmount && networkFee) {\n    const tokenBalance = selectCurrentAccountTokenBalance(global, tokenIn.slug);\n    const amountInBigint = tokenBalance - fromDecimal(networkFee, tokenIn.decimals);\n    amountIn = toDecimal(amountInBigint, tokenIn.decimals);\n  }\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    amountOut: estimate.toAmount === '0' ? undefined : estimate.toAmount,\n    amountIn,\n    limits: {\n      fromMin: estimate.fromMin,\n      fromMax: estimate.fromMax,\n    },\n    swapFee: estimate.swapFee,\n    networkFee,\n    realNetworkFee,\n    ourFee: '0',\n    ourFeePercent: 0,\n    dieselStatus: 'not-available',\n    amountOutMin: estimate.toAmount,\n    errorType: Big(fromAmount).lt(estimate.fromMin)\n      ? SwapErrorType.ChangellyMinSwap\n      : Big(fromAmount).gt(estimate.fromMax)\n        ? SwapErrorType.ChangellyMaxSwap\n        : undefined,\n  };\n}\n\naddActionHandler('setSwapScreen', (global, actions, { state }) => {\n  if (state === SwapState.Initial) {\n    global = updateCurrentSwap(global, { swapId: generateUniqueId() });\n  }\n  global = updateCurrentSwap(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('clearSwapError', (global) => {\n  global = updateCurrentSwap(global, { error: undefined });\n  setGlobal(global);\n});\n\nasync function loadSwapPairs(tokenSlug: string) {\n  await waitFor(() => {\n    const { swapTokenInfo: { isLoaded, bySlug } } = getGlobal();\n    return !!(isLoaded || bySlug[tokenSlug]);\n  }, 500, 100);\n  let global = getGlobal();\n\n  const tokenIn = global.swapTokenInfo.bySlug[tokenSlug];\n  if (!tokenIn) {\n    return;\n  }\n\n  const assetId = resolveSwapAssetId(tokenIn);\n\n  const cache = pairsCache[tokenSlug];\n  const isCacheValid = cache && (Date.now() - cache.timestamp <= CACHE_DURATION);\n  if (isCacheValid) {\n    return;\n  }\n\n  const pairs = await callApi('swapGetPairs', assetId);\n  global = getGlobal();\n\n  let bySlug: AssetPairs;\n\n  if (pairs) {\n    const isTonTokenIn = tokenIn.chain === 'ton';\n\n    bySlug = pairs.reduce((acc, pair) => {\n      const isTonTokenOut = getIsTonToken(pair.slug, true);\n      const countTonTokens = Number(isTonTokenIn) + (isTonTokenOut ? 1 : 0);\n\n      const isMultichain = !(\n        (countTonTokens === 2) || (countTonTokens === 1 && [tokenIn.slug, pair.slug].includes(TONCOIN.slug))\n      );\n\n      acc[pair.slug] = {\n        ...(isMultichain && {\n          isMultichain,\n        }),\n        ...(pair.isReverseProhibited && {\n          isReverseProhibited: pair.isReverseProhibited,\n        }),\n      };\n      return acc;\n    }, {} as AssetPairs);\n\n    pairsCache[tokenSlug] = { timestamp: Date.now() };\n  } else {\n    bySlug = {};\n  }\n\n  setGlobal({\n    ...global,\n    swapPairs: {\n      bySlug: {\n        ...global.swapPairs?.bySlug,\n        [tokenSlug]: bySlug,\n      },\n    },\n  });\n}\n\naddActionHandler('setSwapCexAddress', (global, actions, { toAddress }) => {\n  global = updateCurrentSwap(global, { toAddress });\n  setGlobal(global);\n});\n\naddActionHandler('updatePendingSwaps', async (global) => {\n  const accountId = global.currentAccountId;\n  if (!accountId) return;\n\n  let { activities } = selectAccountState(global, accountId) ?? {};\n  if (!activities) return;\n\n  const ids = Object.values(activities.byId)\n    .filter((activity) => Boolean(\n      activity.kind === 'swap'\n      && (activity.status === 'pending' || activity.status === 'pendingTrusted')\n      && activity.cex,\n    ))\n    .map(({ id }) => parseTxId(id).hash);\n  if (!ids.length) return;\n\n  const result = await callApi('fetchSwaps', accountId, ids);\n  if (!result?.swaps.length) return;\n\n  const { swaps, nonExistentIds } = result;\n\n  global = getGlobal();\n  if (global.currentAccountId !== accountId) return;\n\n  ({ activities } = selectAccountState(global, accountId) ?? {});\n\n  for (const swap of result.swaps) {\n    if (swap.isCanceled) {\n      swap.shouldHide = true;\n    }\n  }\n\n  const nonExistentSwaps: Record<string, ApiSwapActivity> = {};\n\n  for (const id of nonExistentIds) {\n    nonExistentSwaps[id] = {\n      ...activities!.byId[id] as ApiSwapActivity,\n      status: 'expired',\n      shouldHide: true,\n    };\n  }\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: {\n        ...activities!.byId,\n        ...nonExistentSwaps,\n        ...buildCollectionByKey(swaps, 'id'),\n      },\n    },\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('setSwapDex', (global, actions, { dexLabel }) => {\n  const { estimates, bestRateDexLabel } = global.currentSwap;\n  const newEstimate = (estimates || []).find((estimate) => estimate.dexLabel === dexLabel);\n  if (!newEstimate) return;\n\n  global = updateCurrentSwap(global, {\n    amountIn: newEstimate.fromAmount,\n    amountOut: newEstimate.toAmount,\n    amountOutMin: newEstimate.toMinAmount,\n    networkFee: newEstimate.networkFee,\n    realNetworkFee: newEstimate.realNetworkFee,\n    swapFee: newEstimate.swapFee,\n    swapFeePercent: newEstimate.swapFeePercent,\n    ourFee: newEstimate.ourFee,\n    dieselFee: newEstimate.dieselFee,\n    priceImpact: newEstimate.impact,\n    currentDexLabel: dexLabel,\n    // The \"Best Rate\" selection should enable automatic best dex selection mode\n    isDexLabelChanged: dexLabel !== bestRateDexLabel ? true : undefined,\n  }, true);\n  setGlobal(global);\n});\n\nfunction convertTransferFeesToSwapFees(\n  txDraft: Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee'>,\n  chain: ApiChain,\n) {\n  const nativeToken = getNativeToken(chain);\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (txDraft?.fee !== undefined) {\n    networkFee = toDecimal(txDraft.fee, nativeToken.decimals);\n  }\n  if (txDraft?.realFee !== undefined) {\n    realNetworkFee = toDecimal(txDraft.realFee, nativeToken.decimals);\n  }\n\n  return { networkFee, realNetworkFee };\n}\n\nexport type SwapEstimateResult = Partial<GlobalState['currentSwap']> | 'rateLimited' | undefined;\n\nlet isEstimatingSwap = false;\n\n/**\n * A boilerplate of swap estimation, ensuring consistent behavior in concurrent usage scenarios.\n * This function is expected to be called periodically, and you may call it as often as you like.\n *\n * You may call the `shouldStop` function to check whether it makes sense to continue estimating (because the result\n * is likely to be ignored). If `shouldStop` returns true, `estimate` may return any value (it will be ignored).\n */\nexport async function estimateSwapConcurrently(\n  estimate: (\n    global: GlobalState,\n    shouldStop: () => boolean,\n  ) => SwapEstimateResult | Promise<SwapEstimateResult>,\n) {\n  const initialGlobal = getGlobal();\n\n  if (shouldAvoidSwapEstimation(initialGlobal)) return;\n\n  // There should be only 1 swap estimation at a time. A timer in SwapInitial will trigger another estimation attempt.\n  if (isEstimatingSwap) {\n    return;\n  }\n\n  try {\n    isEstimatingSwap = true;\n\n    const isEstimateInputIntact = isSwapEstimateInputEqual.bind(undefined, initialGlobal);\n\n    const swapUpdate = await estimate(initialGlobal, () => {\n      const currentGlobal = getGlobal();\n      return shouldAvoidSwapEstimation(currentGlobal) || !isEstimateInputIntact(currentGlobal);\n    });\n\n    const finalGlobal = getGlobal();\n\n    // If the dependencies were changed during the estimation, the estimation result should be ignored and the loading\n    // indicator should stay (in order to avoid showing the outdated fee). A timer in SwapInitial will trigger another\n    // estimation attempt to get the up-to-date fee.\n    if (!isEstimateInputIntact(finalGlobal)) {\n      return;\n    }\n\n    // If the swap estimation request has been rate-limited, we should keep showing the loading indicator\n    if (swapUpdate === 'rateLimited') {\n      return;\n    }\n\n    setGlobal(updateCurrentSwap(finalGlobal, {\n      isEstimating: false,\n      ...(shouldAvoidSwapEstimation(finalGlobal) ? undefined : swapUpdate),\n    }));\n  } finally {\n    isEstimatingSwap = false;\n  }\n}\n\nfunction chooseSwapEstimate(\n  global: GlobalState,\n  newEstimates: ApiSwapEstimateVariant[],\n  proposedBestDexLabel: ApiSwapDexLabel,\n) {\n  if (newEstimates.length === 0) {\n    throw new Error('Unexpected empty `newEstimates` array');\n  }\n\n  const { tokenInSlug, currentDexLabel, isDexLabelChanged } = global.currentSwap;\n\n  // If the user has chosen a Dex manually, respect that choice\n  if (currentDexLabel && isDexLabelChanged) {\n    const selectedEstimate = newEstimates.find(({ dexLabel }) => dexLabel === currentDexLabel);\n    if (selectedEstimate) {\n      return selectedEstimate;\n    }\n  }\n\n  // Otherwise, select automatically\n  const tokenIn = tokenInSlug ? global.swapTokenInfo.bySlug[tokenInSlug] : undefined;\n  const tokenInBalance = tokenInSlug ? selectCurrentAccountTokenBalance(global, tokenInSlug) : undefined;\n  const nativeTokenIn = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n  const nativeTokenInBalance = nativeTokenIn && selectCurrentAccountTokenBalance(global, nativeTokenIn.slug);\n  let availableEstimates = newEstimates.filter((variant) => canAffordSwapEstimateVariant({\n    variant,\n    tokenIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n  }));\n\n  if (availableEstimates.length === 0) {\n    availableEstimates = newEstimates;\n  }\n\n  return availableEstimates.find(({ dexLabel }) => dexLabel === proposedBestDexLabel)\n    ?? availableEstimates[0];\n}\n","import { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateTokenPriceHistory } from '../../reducers/tokens';\n\naddActionHandler('loadPriceHistory', async (global, actions, payload) => {\n  const { slug, period, currency = global.settings.baseCurrency } = payload ?? {};\n\n  const history = await callApi('fetchPriceHistory', slug, period, currency);\n\n  if (!history) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateTokenPriceHistory(global, slug, { [period]: history });\n  setGlobal(global);\n});\n","import type { ApiChain } from '../api/types';\nimport type { Account, UserToken } from '../global/types';\n\nimport { TRC20_USDT_MAINNET_SLUG, TRX } from '../config';\n\nconst SCAM_DOMAIN_ADDRESS_REGEX = /^\\w{26,}\\./;\n\nexport function shouldShowSeedPhraseScamWarning(\n  account: Account,\n  accountTokens: UserToken[],\n  transferTokenChain: ApiChain,\n): boolean {\n  // For multisig accounts a warning should always be shown\n  if (account?.isMultisigByChain?.[transferTokenChain]) {\n    return true;\n  }\n\n  // Only show when trying to transfer TRON tokens\n  if (transferTokenChain !== 'tron') {\n    return false;\n  }\n\n  // Check if account has TRON tokens (like USDT)\n  return accountTokens.some((token) =>\n    token.slug === TRC20_USDT_MAINNET_SLUG\n    || (token.chain === 'tron' && token.amount > 0n && token.slug !== TRX.slug),\n  );\n}\n\nexport function shouldShowDomainScamWarning(address: string) {\n  return SCAM_DOMAIN_ADDRESS_REGEX.test(address);\n}\n","import type { ApiCheckTransactionDraftResult } from '../../../api/chains/ton/types';\nimport type {\n  ApiSubmitNftTransferResult,\n  ApiSubmitTransferOptions,\n  ApiSubmitTransferResult,\n} from '../../../api/methods/types';\nimport { ApiTransactionDraftError } from '../../../api/types';\nimport { ScamWarningType, TransferState } from '../../types';\n\nimport { NFT_BATCH_SIZE } from '../../../config';\nimport { bigintDivideToNumber } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { explainApiTransferFee, getDieselTokenAmount } from '../../../util/fee/transferFee';\nimport { split } from '../../../util/iteratees';\nimport { callActionInNative } from '../../../util/multitab';\nimport { shouldShowDomainScamWarning, shouldShowSeedPhraseScamWarning } from '../../../util/scamDetection';\nimport { getIsTonToken } from '../../../util/tokens';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { handleTransferResult, prepareTransfer } from '../../helpers/transfer';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  preserveMaxTransferAmount,\n  updateAccountState,\n  updateCurrentTransfer,\n  updateCurrentTransferByCheckResult,\n  updateCurrentTransferLoading,\n} from '../../reducers';\nimport {\n  selectAccountState,\n  selectCurrentAccount,\n  selectCurrentAccountTokens,\n  selectCurrentNetwork,\n  selectIsHardwareAccount,\n  selectToken,\n  selectTokenAddress,\n} from '../../selectors';\n\naddActionHandler('submitTransferInitial', async (global, actions, payload) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('submitTransferInitial', payload);\n    return;\n  }\n\n  const {\n    tokenSlug,\n    toAddress,\n    amount,\n    comment,\n    shouldEncrypt,\n    nfts,\n    withDiesel,\n    stateInit,\n    isGaslessWithStars,\n    binPayload,\n  } = payload;\n\n  setGlobal(updateCurrentTransferLoading(global, true));\n\n  const isNftTransfer = Boolean(nfts?.length);\n  let result: ApiCheckTransactionDraftResult | undefined;\n\n  if (isNftTransfer) {\n    result = await callApi('checkNftTransferDraft', {\n      accountId: global.currentAccountId!,\n      nfts,\n      toAddress,\n      comment,\n    });\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n    result = await callApi('checkTransactionDraft', chain, {\n      accountId: global.currentAccountId!,\n      tokenAddress,\n      toAddress,\n      amount,\n      data: binPayload ?? comment,\n      shouldEncrypt,\n      stateInit,\n      isBase64Data: Boolean(binPayload),\n      allowGasless: true,\n    });\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransferLoading(global, false);\n\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n\n  if (!result || 'error' in result) {\n    setGlobal(global);\n\n    if (result?.error === ApiTransactionDraftError.InsufficientBalance && !isNftTransfer) {\n      actions.showDialog({ message: 'The network fee has slightly changed, try sending again.' });\n    } else {\n      actions.showError({ error: result?.error });\n    }\n\n    return;\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: TransferState.Confirm,\n    error: undefined,\n    toAddress,\n    resolvedAddress: result.resolvedAddress,\n    amount,\n    comment,\n    shouldEncrypt,\n    tokenSlug,\n    isToNewAddress: result.isToAddressNew,\n    withDiesel,\n    isGaslessWithStars,\n  }));\n});\n\naddActionHandler('fetchTransferFee', async (global, actions, payload) => {\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const {\n    tokenSlug, toAddress, comment, shouldEncrypt, binPayload, stateInit,\n  } = payload;\n\n  const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n  const result = await callApi('checkTransactionDraft', chain, {\n    accountId: global.currentAccountId!,\n    toAddress,\n    data: binPayload ?? comment,\n    tokenAddress,\n    shouldEncrypt,\n    isBase64Data: Boolean(binPayload),\n    stateInit,\n    allowGasless: true,\n  });\n\n  global = getGlobal();\n\n  if (tokenSlug !== global.currentTransfer.tokenSlug || global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  setGlobal(global);\n\n  if (result?.error && result.error !== ApiTransactionDraftError.InsufficientBalance) {\n    actions.showError({ error: result.error });\n  }\n\n  if (result?.error === ApiTransactionDraftError.InsufficientBalance) {\n    const currentAccount = selectCurrentAccount(global)!;\n    const accountTokens = selectCurrentAccountTokens(global)!;\n    const { chain } = selectToken(global, tokenSlug);\n\n    if (shouldShowSeedPhraseScamWarning(currentAccount, accountTokens, chain)) {\n      global = getGlobal();\n      global = updateCurrentTransfer(global, { scamWarningType: ScamWarningType.SeedPhrase });\n      setGlobal(global);\n    }\n  }\n\n  if (result?.error !== ApiTransactionDraftError.DomainNotResolved && shouldShowDomainScamWarning(toAddress)) {\n    global = getGlobal();\n    global = updateCurrentTransfer(global, { scamWarningType: ScamWarningType.DomainLike });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('fetchNftFee', async (global, actions, payload) => {\n  const { toAddress, nfts, comment } = payload;\n\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const result = await callApi('checkNftTransferDraft', {\n    accountId: global.currentAccountId!,\n    nfts,\n    toAddress,\n    comment,\n  });\n\n  global = getGlobal();\n\n  if (!global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token transfer mode before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  if (shouldShowDomainScamWarning(toAddress)) {\n    global = updateCurrentTransfer(global, { scamWarningType: ScamWarningType.DomainLike });\n  }\n  setGlobal(global);\n\n  if (result?.error) {\n    actions.showError({\n      error: result?.error === ApiTransactionDraftError.InsufficientBalance\n        ? 'Insufficient TON for fee.'\n        : result.error,\n    });\n  }\n});\n\naddActionHandler('submitTransfer', async (global, actions, { password } = {}) => {\n  const {\n    resolvedAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    shouldEncrypt,\n    binPayload,\n    nfts,\n    withDiesel,\n    diesel,\n    stateInit,\n    isGaslessWithStars,\n  } = global.currentTransfer;\n\n  if (!await prepareTransfer(TransferState.ConfirmHardware, updateCurrentTransfer, password)) {\n    return;\n  }\n\n  // This is a part of the legacy dapp transaction mechanism. See `promiseId` in `src/global/types.ts` for more details.\n  if (promiseId) {\n    await callApi('confirmDappRequest', promiseId, password);\n    return;\n  }\n\n  global = getGlobal();\n  const explainedFee = explainApiTransferFee(global.currentTransfer);\n  const fullNativeFee = explainedFee.fullFee?.nativeSum;\n  const realNativeFee = explainedFee.realFee?.nativeSum;\n\n  let result: ApiSubmitTransferResult | ApiSubmitNftTransferResult | undefined;\n\n  if (nfts?.length) {\n    const chunks = split(nfts, selectIsHardwareAccount(global) ? 1 : NFT_BATCH_SIZE);\n\n    for (const chunk of chunks) {\n      const batchResult = await callApi(\n        'submitNftTransfers',\n        global.currentAccountId!,\n        password,\n        chunk,\n        resolvedAddress!,\n        comment,\n        realNativeFee && bigintDivideToNumber(realNativeFee, nfts.length / chunk.length),\n      );\n\n      global = getGlobal();\n      global = updateCurrentTransfer(global, {\n        sentNftsCount: (global.currentTransfer.sentNftsCount || 0) + chunk.length,\n      });\n      setGlobal(global);\n      // TODO - process all responses from the API\n      result = batchResult;\n    }\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n    const options: ApiSubmitTransferOptions = {\n      accountId: global.currentAccountId!,\n      password,\n      toAddress: resolvedAddress!,\n      amount: amount!,\n      comment: binPayload ?? comment,\n      tokenAddress,\n      fee: fullNativeFee,\n      realFee: realNativeFee,\n      shouldEncrypt,\n      isBase64Data: Boolean(binPayload),\n      withDiesel,\n      dieselAmount: diesel && getDieselTokenAmount(diesel),\n      stateInit,\n      isGaslessWithStars,\n      noFeeCheck: true,\n    };\n\n    result = await callApi('submitTransfer', chain, options);\n  }\n\n  if (!handleTransferResult(result, updateCurrentTransfer)) {\n    return;\n  }\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    state: TransferState.Complete,\n    txId: ('activityIds' in result && result.activityIds[0])\n      || ('activityId' in result && result.activityId)\n      || undefined,\n  }));\n\n  if (getIsTonToken(tokenSlug)) {\n    actions.fetchTransferDieselState({ tokenSlug });\n  }\n});\n\naddActionHandler('cancelTransfer', (global, actions, { shouldReset } = {}) => {\n  const { promiseId, tokenSlug } = global.currentTransfer;\n\n  if (shouldReset) {\n    if (promiseId) {\n      void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n    }\n\n    global = clearCurrentTransfer(global);\n    global = updateCurrentTransfer(global, { tokenSlug });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('fetchTransferDieselState', async (global, actions, { tokenSlug }) => {\n  const tokenAddress = selectTokenAddress(global, tokenSlug);\n  if (!tokenAddress) return;\n\n  const diesel = await callApi('fetchEstimateDiesel', global.currentAccountId!, tokenAddress);\n  if (!diesel) return;\n\n  global = getGlobal();\n  const accountState = selectAccountState(global, global.currentAccountId!);\n  global = preserveMaxTransferAmount(global, updateCurrentTransfer(global, { diesel }));\n  if (accountState?.isDieselAuthorizationStarted && diesel.status !== 'not-authorized') {\n    global = updateAccountState(global, global.currentAccountId!, { isDieselAuthorizationStarted: undefined });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('checkTransferAddress', async (global, actions, { address }) => {\n  if (!address) {\n    global = updateCurrentTransfer(global, { toAddressName: undefined, resolvedAddress: undefined });\n    setGlobal(global);\n\n    return;\n  }\n\n  const network = selectCurrentNetwork(global);\n  const result = await callApi('getAddressInfo', network, address);\n\n  global = getGlobal();\n  if (!result || 'error' in result) {\n    global = updateCurrentTransfer(global, { toAddressName: undefined, resolvedAddress: undefined });\n  } else {\n    global = updateCurrentTransfer(global, {\n      toAddressName: result.addressName,\n      resolvedAddress: result.resolvedAddress,\n    });\n  }\n  setGlobal(global);\n});\n","import { BURN_ADDRESS, NOTCOIN_EXCHANGERS, NOTCOIN_VOUCHERS_ADDRESS, TONCOIN } from '../../../config';\nimport { findDifference } from '../../../util/iteratees';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler } from '../../index';\nimport { updateCurrentAccountState } from '../../reducers';\nimport { selectCurrentAccountState } from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nconst NBS_INIT_TIMEOUT = IS_DELEGATING_BOTTOM_SHEET ? 100 : 0;\n\naddActionHandler('fetchNftsFromCollection', (global, actions, { collectionAddress }) => {\n  void callApi('fetchNftsFromCollection', global.currentAccountId!, collectionAddress);\n});\n\naddActionHandler('burnNfts', (global, actions, { nfts }) => {\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    nfts,\n  });\n\n  const isNotcoinVouchers = nfts.some((n) => n.collectionAddress === NOTCOIN_VOUCHERS_ADDRESS);\n\n  setTimeout(() => {\n    actions.submitTransferInitial({\n      tokenSlug: TONCOIN.slug,\n      amount: 0n,\n      toAddress: isNotcoinVouchers ? NOTCOIN_EXCHANGERS[0] : BURN_ADDRESS,\n      nfts,\n    });\n  }, NBS_INIT_TIMEOUT);\n});\n\naddActionHandler('addNftsToBlacklist', (global, actions, { addresses: nftAddresses }) => {\n  // Force hide NFT - remove it from whitelist and add to blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses: [...blacklistedNftAddresses, ...nftAddresses],\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('addNftsToWhitelist', (global, actions, { addresses: nftAddresses }) => {\n  // Force show NFT - remove it from blacklist and add to whitelist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses: [...whitelistedNftAddresses, ...nftAddresses],\n  });\n});\n\naddActionHandler('removeNftSpecialStatus', (global, actions, { address: nftAddress }) => {\n  // Stop forcing to show/hide NFT if it was in whitelist/blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  blacklistedNftAddresses = blacklistedNftAddresses.filter((address) => address !== nftAddress);\n  whitelistedNftAddresses = whitelistedNftAddresses.filter((address) => address !== nftAddress);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('openUnhideNftModal', (global, actions, { address, name }) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: true,\n    selectedNftToUnhide: { address, name },\n  });\n});\n\naddActionHandler('closeUnhideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: undefined,\n    selectedNftToUnhide: undefined,\n  });\n});\n\naddActionHandler('openHideNftModal', (global, actions, { addresses, isCollection }) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: { addresses, isCollection },\n  });\n});\n\naddActionHandler('closeHideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: undefined,\n  });\n});\n\naddActionHandler('openNftAttributesModal', (global, actions, { nft }) => {\n  return updateCurrentAccountState(global, { currentNftForAttributes: nft });\n});\n\naddActionHandler('closeNftAttributesModal', (global) => {\n  return updateCurrentAccountState(global, { currentNftForAttributes: undefined });\n});\n","import type { ApiSubmitTransferOptions } from '../../../api/methods/types';\nimport type { FormReducer } from '../../helpers/transfer';\nimport { VestingUnfreezeState } from '../../types';\n\nimport {\n  CLAIM_ADDRESS,\n  CLAIM_AMOUNT,\n  CLAIM_COMMENT,\n  MYCOIN,\n  MYCOIN_TESTNET,\n} from '../../../config';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { handleTransferResult } from '../../helpers/transfer';\nimport { prepareTransfer } from '../../helpers/transfer';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateVesting } from '../../reducers';\nimport { selectVestingPartsReadyToUnfreeze } from '../../selectors';\n\naddActionHandler('submitClaimingVesting', async (global, actions, { password } = {}) => {\n  const accountId = global.currentAccountId!;\n  const updateVestingState: FormReducer<VestingUnfreezeState> = (global, update) => {\n    return updateVesting(global, accountId, update);\n  };\n\n  if (!await prepareTransfer(VestingUnfreezeState.ConfirmHardware, updateVestingState, password)) {\n    return;\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitClaimingVesting', { password });\n    return;\n  }\n\n  global = getGlobal();\n  const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n\n  const options: ApiSubmitTransferOptions = {\n    accountId: global.currentAccountId!,\n    password,\n    toAddress: CLAIM_ADDRESS,\n    amount: CLAIM_AMOUNT,\n    comment: CLAIM_COMMENT,\n  };\n  const result = await callApi('submitTransfer', 'ton', options);\n\n  if (!handleTransferResult(result, updateVestingState)) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, {\n    isConfirmRequested: undefined,\n    unfreezeRequestedIds,\n  });\n  setGlobal(global);\n\n  actions.openVestingModal();\n});\n\naddActionHandler('loadMycoin', (global, actions) => {\n  const { isTestnet } = global.settings;\n\n  actions.importToken({ address: isTestnet ? MYCOIN_TESTNET.minterAddress : MYCOIN.minterAddress });\n});\n","import type { ApiSubmitTransferOptions } from '../../../api/methods/types';\nimport type { GlobalState } from '../../types';\nimport { MintCardState } from '../../types';\n\nimport { IS_CORE_WALLET, MINT_CARD_ADDRESS, MINT_CARD_COMMENT, TONCOIN } from '../../../config';\nimport { fromDecimal } from '../../../util/decimals';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { handleTransferResult, prepareTransfer } from '../../helpers/transfer';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateAccountSettings, updateAccountState, updateMintCards } from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\naddActionHandler('submitMintCard', async (global, actions, { password } = {}) => {\n  const accountId = global.currentAccountId!;\n\n  if (!await prepareTransfer(MintCardState.ConfirmHardware, updateMintCards, password)) {\n    return;\n  }\n\n  const options = createTransferOptions(getGlobal(), password);\n  const result = await callApi('submitTransfer', 'ton', options);\n\n  if (!handleTransferResult(result, updateMintCards)) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateMintCards(global, { state: MintCardState.Done });\n  global = updateAccountState(global, accountId, { isCardMinting: true });\n  setGlobal(global);\n});\n\nfunction createTransferOptions(globalState: GlobalState, password?: string): ApiSubmitTransferOptions {\n  const { currentAccountId, currentMintCard } = globalState;\n  const { config } = selectAccountState(globalState, currentAccountId!)!;\n  const { cardsInfo } = config!;\n  const type = currentMintCard!.type!;\n  const cardInfo = cardsInfo![type];\n\n  return {\n    accountId: currentAccountId!,\n    password,\n    toAddress: MINT_CARD_ADDRESS,\n    amount: fromDecimal(cardInfo.price, TONCOIN.decimals),\n    comment: MINT_CARD_COMMENT,\n  };\n}\n\naddActionHandler('checkCardNftOwnership', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET || IS_CORE_WALLET) return;\n\n  const { byAccountId } = global.settings;\n\n  Object.entries(byAccountId).forEach(async ([accountId, settings]) => {\n    const cardBackgroundNftAddress = settings.cardBackgroundNft?.address;\n    const accentColorNftAddress = settings.accentColorNft?.address;\n\n    if (!cardBackgroundNftAddress && !accentColorNftAddress) return;\n\n    const promises = [\n      cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, cardBackgroundNftAddress)\n        : undefined,\n      accentColorNftAddress && accentColorNftAddress !== cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, accentColorNftAddress)\n        : undefined,\n    ];\n\n    const [isCardBackgroundNftOwned, isAccentColorNftOwned] = await Promise.all(promises);\n\n    let newGlobal = getGlobal();\n\n    if (cardBackgroundNftAddress && isCardBackgroundNftOwned === false) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        cardBackgroundNft: undefined,\n      });\n    }\n\n    if (accentColorNftAddress && (\n      (accentColorNftAddress === cardBackgroundNftAddress && isCardBackgroundNftOwned === false)\n      || (accentColorNftAddress !== cardBackgroundNftAddress && isAccentColorNftOwned === false)\n    )) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        accentColorNft: undefined,\n        accentColorIndex: undefined,\n      });\n    }\n\n    setGlobal(newGlobal);\n  });\n});\n","import Deferred from './Deferred';\n\nexport function createAbortableFunction<TArgs extends unknown[], TAbort, TFnResult>(\n  toReturnOnAbort: TAbort,\n  fn: (...args: TArgs) => Promise<TFnResult>,\n): (...args: TArgs) => Promise<TAbort | TFnResult> {\n  let abort = new Deferred<TAbort>();\n\n  return function abortableFunction(...args: TArgs): Promise<TAbort | TFnResult> {\n    abort.resolve(toReturnOnAbort);\n\n    abort = new Deferred<TAbort>();\n    return Promise.race([fn(...args), abort.promise]);\n  };\n}\n","import type { ApiNotificationsAccountValue } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nexport function deleteNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const { [accountId]: deleted, ...newEnabledAccounts } = currentEnabledAccounts;\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function deleteAllNotificationAccounts(\n  global: GlobalState,\n): GlobalState {\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: {},\n    },\n  };\n}\n\nexport function createNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: Partial<ApiNotificationsAccountValue> = {},\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const newEnabledAccounts = { ...currentEnabledAccounts, [accountId]: value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function updateNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: ApiNotificationsAccountValue,\n): GlobalState {\n  const newEnabledAccounts = global.pushNotifications.enabledAccounts;\n  newEnabledAccounts[accountId] = { ...newEnabledAccounts[accountId], ...value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n","import type {\n  ApiNotificationAddress,\n  ApiNotificationsAccountValue,\n  ApiSubscribeNotificationsProps,\n  ApiSubscribeNotificationsResult,\n  ApiUnsubscribeNotificationsProps,\n} from '../../../api/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { createAbortableFunction } from '../../../util/createAbortableFunction';\nimport isEmptyObject from '../../../util/isEmptyObject';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  createNotificationAccount,\n  deleteAllNotificationAccounts,\n  deleteNotificationAccount,\n  updateNotificationAccount,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\nconst abortableSubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiSubscribeNotificationsProps) => {\n    return callApi('subscribeNotifications', request);\n  },\n);\n\nconst abortableUnsubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiUnsubscribeNotificationsProps) => {\n    return callApi('unsubscribeNotifications', request);\n  },\n);\n\naddActionHandler('registerNotifications', async (global, actions, { userToken, platform }) => {\n  const { pushNotifications } = global;\n\n  let createResult;\n  let enabledAccounts = Object.keys(pushNotifications.enabledAccounts);\n  const accounts = selectAccounts(global) || {};\n  if (!pushNotifications.userToken && !isEmptyObject(accounts)) {\n    const notificationAddresses = selectNotificationTonAddressesSlow(\n      global,\n      Object.keys(accounts),\n      MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT,\n    );\n    enabledAccounts = Object.keys(notificationAddresses);\n\n    createResult = await callApi('subscribeNotifications', {\n      userToken,\n      platform,\n      addresses: Object.values(notificationAddresses),\n    });\n  } else if (pushNotifications.userToken !== userToken && enabledAccounts.length) {\n    [createResult] = await Promise.all([\n      callApi('subscribeNotifications', {\n        userToken,\n        platform,\n        addresses: Object.values(selectNotificationTonAddressesSlow(global, enabledAccounts)),\n      }),\n      callApi('unsubscribeNotifications', {\n        userToken: pushNotifications.userToken!,\n        addresses: Object.values(selectNotificationTonAddressesSlow(global, enabledAccounts)),\n      }),\n    ]);\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      userToken,\n      platform,\n    },\n  };\n\n  if (!createResult || 'error' in createResult) {\n    setGlobal(global);\n    return;\n  }\n\n  const newEnabledAccounts = enabledAccounts.reduce((acc, accountId) => {\n    const tonAddress = accounts[accountId].addressByChain.ton;\n    if (tonAddress) {\n      acc[accountId] = createResult.addressKeys[tonAddress];\n    }\n\n    return acc;\n  }, {} as Record<string, ApiNotificationsAccountValue>);\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  });\n});\n\naddActionHandler('deleteNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, enabledAccounts } = global.pushNotifications;\n  const pushNotificationsAccount = enabledAccounts[accountId];\n\n  if (!userToken) {\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n\n  const addresses = Object.values(selectNotificationTonAddressesSlow(global, [accountId]));\n  if (addresses.length === 0) {\n    return;\n  }\n\n  const props = { userToken, addresses };\n  const result = withAbort\n    ? await abortableUnsubscribeNotifications(props)\n    : await callApi('unsubscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(createNotificationAccount(\n      global,\n      accountId,\n      pushNotificationsAccount,\n    ));\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n});\n\naddActionHandler('createNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, platform } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  const addresses = Object.values(selectNotificationTonAddressesSlow(global, [accountId]));\n  if (!addresses.length) {\n    return;\n  }\n\n  setGlobal(createNotificationAccount(\n    global,\n    accountId,\n    {},\n  ));\n\n  const props = { userToken, platform, addresses };\n  const result = withAbort\n    ? await abortableSubscribeNotifications(props)\n    : await callApi('subscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(deleteNotificationAccount(\n      global,\n      accountId,\n    ));\n    return;\n  }\n\n  setGlobal(updateNotificationAccount(\n    global,\n    accountId,\n    result.addressKeys[addresses[0].address],\n  ));\n});\n\naddActionHandler('toggleNotifications', async (global, actions, { isEnabled }) => {\n  const {\n    enabledAccounts = {}, userToken = '', platform, isAvailable,\n  } = global.pushNotifications;\n\n  if (!isAvailable) {\n    return;\n  }\n\n  let notificationAccounts: Record<string, ApiNotificationAddress>;\n\n  if (isEnabled) {\n    notificationAccounts = selectNotificationTonAddressesSlow(\n      global,\n      Object.keys(selectAccounts(global) || {}),\n      MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT,\n    );\n    for (const newAccountId of Object.keys(notificationAccounts)) {\n      global = createNotificationAccount(global, newAccountId, {});\n    }\n  } else {\n    notificationAccounts = selectNotificationTonAddressesSlow(global, Object.keys(enabledAccounts));\n    global = deleteAllNotificationAccounts(global);\n  }\n\n  setGlobal(global);\n  if (isEmptyObject(notificationAccounts)) {\n    return;\n  }\n\n  const props = { userToken, addresses: Object.values(notificationAccounts), platform: platform! };\n  const result = isEnabled\n    ? await abortableSubscribeNotifications(props)\n    : await abortableUnsubscribeNotifications(props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    if (isEnabled) {\n      global = deleteAllNotificationAccounts(global);\n    } else {\n      for (const accountId of Object.keys(notificationAccounts)) {\n        global = createNotificationAccount(global, accountId, enabledAccounts[accountId]);\n      }\n    }\n    setGlobal(global);\n    return;\n  }\n\n  if (isEnabled && 'addressKeys' in result) {\n    const addressKeys = (result as ApiSubscribeNotificationsResult).addressKeys;\n    for (const [accountId, { address }] of Object.entries(notificationAccounts)) {\n      if (addressKeys[address]) {\n        global = createNotificationAccount(global, accountId, addressKeys[address]);\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n","import type { ApiNft } from '../../../api/types';\nimport type { ErrorTransferResult } from '../../helpers/transfer';\nimport type { GlobalState } from '../../types';\nimport { DomainLinkingState, DomainRenewalState } from '../../types';\n\nimport { callApi } from '../../../api';\nimport { handleTransferResults, prepareTransfer } from '../../helpers/transfer';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateCurrentDomainLinking, updateCurrentDomainRenewal } from '../../reducers';\nimport { selectCurrentAccount, selectCurrentAccountState, selectCurrentNetwork } from '../../selectors';\n\ntype DomainOperationResultSuccess = string;\ntype DomainOperationResult = Array<DomainOperationResultSuccess | ErrorTransferResult>;\ntype DomainOperationType = 'renewal' | 'linking';\n\ntype DomainStateUpdate<T extends DomainOperationType> = {\n  isLoading: boolean;\n  error?: string;\n  txId?: string;\n  state: T extends 'renewal' ? DomainRenewalState : DomainLinkingState;\n};\n\ntype DomainStateReducer<T extends DomainOperationType> = (\n  global: GlobalState,\n  update: Partial<DomainStateUpdate<T>>,\n) => GlobalState;\n\nfunction handleDomainOperationResult<T extends DomainOperationType>(\n  results: DomainOperationResult,\n  updateState: DomainStateReducer<T>,\n  state: T extends 'renewal' ? DomainRenewalState : DomainLinkingState,\n) {\n  if (!handleTransferResults(results, updateState)) {\n    return;\n  }\n\n  setGlobal(updateState(getGlobal(), {\n    state,\n    ...(results.length === 1 ? { txId: results[0] } : undefined),\n  }));\n}\n\naddActionHandler('checkDomainsRenewalDraft', async (global, actions, { nfts }) => {\n  const accountId = global.currentAccountId!;\n\n  const result = await callApi('checkDnsRenewalDraft', accountId, nfts);\n  if (!result || 'error' in result) {\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDomainRenewal(global, { realFee: result.realFee });\n  setGlobal(global);\n});\n\naddActionHandler('submitDomainsRenewal', async (global, actions, { password } = {}) => {\n  const accountId = global.currentAccountId!;\n  const nftsByAddress = selectCurrentAccountState(global)?.nfts?.byAddress;\n  if (!nftsByAddress) return;\n\n  const nftAddresses = global.currentDomainRenewal.addresses!;\n  const realFee = global.currentDomainRenewal.realFee!;\n  const nfts = nftAddresses\n    .map((address) => nftsByAddress[address])\n    .filter<ApiNft>(Boolean);\n\n  if (!nfts.length) return;\n\n  if (!await prepareTransfer(DomainRenewalState.ConfirmHardware, updateCurrentDomainRenewal, password)) {\n    return;\n  }\n\n  const result = await callApi('submitDnsRenewal', accountId, password, nfts, realFee) ?? [undefined];\n\n  handleDomainOperationResult<'renewal'>(\n    result.map((subResult) => (\n      subResult && 'activityIds' in subResult ? subResult.activityIds[0] : subResult\n    )),\n    updateCurrentDomainRenewal,\n    DomainRenewalState.Complete,\n  );\n});\n\naddActionHandler('checkDomainLinkingDraft', async (global, actions, { nft }) => {\n  const accountId = global.currentAccountId!;\n  const currentAddress = selectCurrentAccount(global)!.addressByChain.ton!;\n\n  const result = await callApi('checkDnsChangeWalletDraft', accountId, nft, currentAddress);\n  if (!result || 'error' in result) {\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDomainLinking(global, { realFee: result.realFee });\n  setGlobal(global);\n});\n\naddActionHandler('submitDomainLinking', async (global, actions, { password } = {}) => {\n  const accountId = global.currentAccountId!;\n  const network = selectCurrentNetwork(global);\n  const nftsByAddress = selectCurrentAccountState(global)?.nfts?.byAddress;\n  const nftAddress = global.currentDomainLinking.address!;\n  const realFee = global.currentDomainLinking.realFee!;\n  const nft = nftsByAddress?.[nftAddress];\n  const currentAddress = global.currentDomainLinking.walletAddress!;\n  const checkAddressResult = await callApi('getAddressInfo', network, currentAddress);\n\n  if (checkAddressResult && 'error' in checkAddressResult) {\n    actions.showError({ error: checkAddressResult.error });\n    return;\n  }\n\n  if (!nft\n    || !checkAddressResult\n    || ('resolvedAddress' in checkAddressResult && !checkAddressResult.resolvedAddress)\n  ) return;\n\n  if (!await prepareTransfer(DomainLinkingState.ConfirmHardware, updateCurrentDomainLinking, password)) {\n    return;\n  }\n\n  const result = await callApi(\n    'submitDnsChangeWallet',\n    accountId,\n    password,\n    nft,\n    checkAddressResult.resolvedAddress!,\n    realFee,\n  );\n\n  handleDomainOperationResult<'linking'>(\n    [result && 'activityId' in result ? result.activityId : result],\n    updateCurrentDomainLinking,\n    DomainLinkingState.Complete,\n  );\n});\n\naddActionHandler('checkLinkingAddress', async (global, actions, { address }) => {\n  if (!address) {\n    global = updateCurrentDomainLinking(global, { walletAddressName: undefined, resolvedWalletAddress: undefined });\n    setGlobal(global);\n\n    return;\n  }\n\n  const network = selectCurrentNetwork(global);\n  const result = await callApi('getAddressInfo', network, address);\n\n  global = getGlobal();\n  if (!result || 'error' in result) {\n    global = updateCurrentDomainLinking(global, { walletAddressName: undefined, resolvedWalletAddress: undefined });\n  } else {\n    global = updateCurrentDomainLinking(global, {\n      walletAddressName: result.addressName,\n      resolvedWalletAddress: result.resolvedAddress,\n    });\n  }\n  setGlobal(global);\n});\n","import { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateActivity } from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\naddActionHandler('fetchActivityDetails', async (global, actions, { id }) => {\n  const accountId = global.currentAccountId!;\n  const activity = selectAccountState(global, accountId)?.activities?.byId[id];\n\n  if (!activity?.shouldLoadDetails) {\n    return;\n  }\n\n  const newActivity = await callApi('fetchTonActivityDetails', accountId, activity);\n\n  if (!newActivity) {\n    return;\n  }\n\n  global = updateActivity(getGlobal(), accountId, newActivity);\n  setGlobal(global);\n});\n","import type { ApiLiquidStakingState } from '../../../api/types';\nimport type { Account } from '../../types';\n\nimport {\n  DEFAULT_STAKING_STATE,\n  IS_CORE_WALLET,\n  MTW_CARDS_COLLECTION,\n  SWAP_API_VERSION,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n} from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { buildCollectionByKey, unique } from '../../../util/iteratees';\nimport { callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS_APP } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  addNft,\n  addUnorderedNfts,\n  createAccount,\n  removeNft,\n  updateAccount,\n  updateAccountSettingsBackgroundNft,\n  updateAccountStaking,\n  updateAccountState,\n  updateBalances,\n  updateNft,\n  updateRestrictions,\n  updateSettings,\n  updateStakingDefault,\n  updateSwapTokens,\n  updateTokens,\n  updateVesting,\n  updateVestingInfo,\n} from '../../reducers';\nimport {\n  selectAccount,\n  selectAccountNftByAddress,\n  selectAccountState,\n  selectVestingPartsReadyToUnfreeze,\n} from '../../selectors';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'updateBalances': {\n      global = updateBalances(global, update.accountId, update.chain, update.balances);\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateStaking': {\n      const {\n        accountId,\n        states,\n        totalProfit,\n        shouldUseNominators,\n      } = update;\n\n      const stateById = buildCollectionByKey(states, 'id');\n\n      global = updateStakingDefault(global, {\n        ...stateById[DEFAULT_STAKING_STATE.id] as ApiLiquidStakingState,\n        balance: 0n,\n        unstakeRequestAmount: 0n,\n        tokenBalance: 0n,\n      });\n      global = updateAccountStaking(global, accountId, {\n        stateById,\n        shouldUseNominators,\n        totalProfit,\n      });\n\n      const { stakingId } = selectAccountState(global, accountId)?.staking ?? {};\n\n      if (!stakingId) {\n        const stateWithBiggestBalance = [...states].sort(\n          (state0, state1) => Number(state1.balance - state0.balance),\n        )[0];\n\n        if (stateWithBiggestBalance && stateWithBiggestBalance.balance > 0n) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateWithBiggestBalance.id,\n          });\n        } else if (shouldUseNominators && stateById.nominators) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateById.nominators.id,\n          });\n        }\n      }\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateTokens': {\n      const { tokens, baseCurrency } = update;\n      global = updateTokens(global, tokens, true);\n      global = updateSettings(global, {\n        baseCurrency,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateSwapTokens': {\n      global = updateSwapTokens(global, update.tokens);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateNfts': {\n      const { accountId, shouldAppend } = update;\n      const nfts = buildCollectionByKey(update.nfts, 'address');\n      const currentNfts = selectAccountState(global, accountId)?.nfts;\n      const newOrderedAddresses = Object.keys(nfts);\n\n      global = updateAccountState(global, accountId, {\n        nfts: {\n          ...currentNfts,\n          byAddress: { ...nfts, ...currentNfts?.byAddress },\n          orderedAddresses: unique(\n            shouldAppend\n              ? ([] as string[]).concat(currentNfts?.orderedAddresses ?? [], newOrderedAddresses)\n              : ([] as string[]).concat(newOrderedAddresses, currentNfts?.orderedAddresses ?? []),\n          ),\n        },\n      });\n\n      if (!IS_CORE_WALLET) {\n        update.nfts.forEach((nft) => {\n          if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n            global = updateAccountSettingsBackgroundNft(global, nft);\n          }\n        });\n      }\n\n      const hasTelegramGifts = update.nfts.some((nft) => nft.isTelegramGift);\n      if (hasTelegramGifts) {\n        actions.addCollectionTab({\n          collectionAddress: TELEGRAM_GIFTS_SUPER_COLLECTION,\n          isAuto: true,\n        });\n      }\n\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftSent': {\n      const { accountId, nftAddress, newOwnerAddress } = update;\n      const sentNft = selectAccountNftByAddress(global, accountId, nftAddress);\n      global = removeNft(global, accountId, nftAddress);\n\n      if (sentNft?.collectionAddress === MTW_CARDS_COLLECTION) {\n        sentNft.ownerAddress = newOwnerAddress;\n        global = updateAccountSettingsBackgroundNft(global, sentNft);\n      }\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftReceived': {\n      const { accountId, nft } = update;\n      global = addNft(global, accountId, nft);\n      setGlobal(global);\n\n      if (!IS_CORE_WALLET) {\n        actions.checkCardNftOwnership();\n        // If a user received an NFT card from the MyTonWallet collection, it is applied immediately\n        if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n          actions.setCardBackgroundNft({ nft });\n          actions.installAccentColorFromNft({ nft });\n        }\n      }\n      break;\n    }\n\n    case 'nftPutUpForSale': {\n      const { accountId, nftAddress } = update;\n      global = updateNft(global, accountId, nftAddress, {\n        isOnSale: true,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateAccount': {\n      const { accountId, chain, domain, address, isMultisig } = update;\n      const account = selectAccount(global, accountId);\n      if (!account) {\n        break;\n      }\n\n      const accountUpdate: Partial<Account> = {};\n      if (address) {\n        accountUpdate.addressByChain = {\n          ...account.addressByChain,\n          [chain]: address,\n        };\n      }\n      if (domain !== undefined) {\n        accountUpdate.domainByChain = {\n          ...account.domainByChain,\n          [chain]: domain || undefined,\n        };\n      }\n      if (isMultisig !== undefined) {\n        accountUpdate.isMultisigByChain = {\n          ...account.isMultisigByChain,\n          [chain]: isMultisig,\n        };\n      }\n      global = updateAccount(global, accountId, accountUpdate);\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateConfig': {\n      const {\n        isLimited: isLimitedRegion,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n        isAppUpdateRequired,\n        swapVersion,\n      } = update;\n\n      const shouldRestrictSwapsAndOnRamp = (IS_IOS_APP && isLimitedRegion) || IS_CORE_WALLET;\n      global = updateRestrictions(global, {\n        isLimitedRegion,\n        isSwapDisabled: shouldRestrictSwapsAndOnRamp,\n        isOnRampDisabled: shouldRestrictSwapsAndOnRamp,\n        isNftBuyingDisabled: shouldRestrictSwapsAndOnRamp,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n      });\n      global = {\n        ...global,\n        isAppUpdateRequired: IS_CORE_WALLET ? undefined : isAppUpdateRequired,\n        swapVersion: swapVersion ?? SWAP_API_VERSION,\n      };\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateWalletVersions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateWalletVersions', update);\n      }\n\n      actions.apiUpdateWalletVersions(update);\n      break;\n    }\n\n    case 'openUrl': {\n      void openUrl(update.url, { isExternal: update.isExternal, title: update.title, subtitle: update.subtitle });\n      break;\n    }\n\n    case 'requestReconnectApi': {\n      actions.initApi();\n      break;\n    }\n\n    case 'incorrectTime': {\n      if (!global.isIncorrectTimeNotificationReceived) {\n        actions.showIncorrectTimeError();\n      }\n      break;\n    }\n\n    case 'updateVesting': {\n      const { accountId, vestingInfo } = update;\n      const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      global = updateVestingInfo(global, accountId, vestingInfo);\n      const newUnfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      if (!areDeepEqual(unfreezeRequestedIds, newUnfreezeRequestedIds)) {\n        global = updateVesting(global, accountId, { unfreezeRequestedIds: undefined });\n      }\n      setGlobal(global);\n      break;\n    }\n\n    case 'updatingStatus': {\n      const { kind, accountId, isUpdating } = update;\n      const key = kind === 'balance' ? 'balanceUpdateStartedAt' : 'activitiesUpdateStartedAt';\n      const accountState = selectAccountState(global, accountId);\n      if (isUpdating && accountState?.[key]) break;\n\n      setGlobal(updateAccountState(global, accountId, {\n        [key]: isUpdating ? Date.now() : undefined,\n      }));\n      break;\n    }\n\n    // Should be removed in future versions\n    case 'migrateCoreApplication': {\n      const {\n        accountId,\n        isTestnet,\n        address,\n        secondAddress,\n        secondAccountId,\n        isTonProxyEnabled,\n        isTonMagicEnabled,\n      } = update;\n\n      global = updateSettings(global, { isTestnet });\n      global = createAccount({\n        global,\n        accountId,\n        type: 'mnemonic',\n        addressByChain: { ton: address },\n      });\n      global = createAccount({\n        global,\n        accountId: secondAccountId,\n        type: 'mnemonic',\n        addressByChain: { ton: secondAddress },\n        network: isTestnet ? 'mainnet' : 'testnet', // Second account should be created on opposite network\n      });\n      setGlobal(global);\n\n      // Run the application only after the post-migration GlobalState has been applied\n      requestAnimationFrame(() => {\n        actions.tryAddNotificationAccount({ accountId });\n        actions.switchAccount({ accountId, newNetwork: isTestnet ? 'testnet' : 'mainnet' });\n        actions.afterSignIn();\n\n        if (isTonMagicEnabled) {\n          actions.toggleTonMagic({ isEnabled: true });\n        }\n        if (isTonProxyEnabled) {\n          actions.toggleTonProxy({ isEnabled: true });\n        }\n      });\n      break;\n    }\n\n    case 'updateAccountConfig': {\n      const { accountConfig, accountId } = update;\n      global = updateAccountState(global, accountId, { config: accountConfig });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateAccountDomainData': {\n      const {\n        accountId,\n        expirationByAddress,\n        linkedAddressByAddress,\n        nfts: updatedNfts,\n      } = update;\n      const nfts = selectAccountState(global, accountId)?.nfts || { byAddress: {} };\n\n      global = updateAccountState(global, accountId, {\n        nfts: {\n          ...nfts,\n          dnsExpiration: expirationByAddress,\n          linkedAddressByAddress,\n        },\n      });\n      global = addUnorderedNfts(global, accountId, updatedNfts);\n      setGlobal(global);\n      break;\n    }\n  }\n});\n","import { registerPlugin } from \"@capacitor/core\";\nconst NativeAudio = registerPlugin(\"NativeAudio\", {\n    web: () => import(\"./web\").then((m) => new m.NativeAudioWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeAudio };\n//# sourceMappingURL=index.js.map","import { NativeAudio } from '@capgo/native-audio';\n\nimport { IS_CAPACITOR } from '../config';\nimport { SECOND } from './dateFormat';\nimport { logDebug, logDebugError } from './logs';\nimport { debounce } from './schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from './windowEnvironment';\n\nimport incomingTransactionSound from '../assets/incoming-transaction.mp3';\n\nconst DEBOUNCE_MS = SECOND;\n\nconst AudioContextConstructor = window.AudioContext || window.webkitAudioContext;\nconst audioContext = new AudioContextConstructor();\nlet audioBuffer: AudioBuffer | undefined;\nlet isSoundInitialized = IS_CAPACITOR || audioContext.state === 'running';\n\n// Workaround: this function is called once on the first user interaction.\n// After that, it will be possible to play the notification without problems.\n// https://developer.chrome.com/blog/autoplay?hl=ru#webaudio\nexport function initializeSounds() {\n  if (isSoundInitialized) return;\n\n  audioContext\n    .resume()\n    .then(() => {\n      isSoundInitialized = true;\n    })\n    .catch((err: any) => {\n      logDebugError('appSounds:initializeSounds', err);\n    });\n}\n\nasync function loadSound() {\n  const audioSettings = {\n    assetId: 'incomingTransactionSound',\n    assetPath: 'public/incoming-transaction.mp3',\n    audioChannelNum: 1,\n    isUrl: false,\n  };\n\n  if (IS_CAPACITOR) {\n    if (await NativeAudio.isPreloaded(audioSettings)) {\n      return;\n    }\n\n    NativeAudio.preload(audioSettings).catch((err: any) => {\n      logDebugError('appSounds:loadSound', err);\n    });\n  } else {\n    fetch(incomingTransactionSound)\n      .then((response) => response.arrayBuffer())\n      .then((arrayBuffer) => audioContext.decodeAudioData(arrayBuffer))\n      .then((decodedAudioBuffer) => {\n        audioBuffer = decodedAudioBuffer;\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:loadSound', err);\n      });\n  }\n}\n\nvoid loadSound();\n\nexport const playIncomingTransactionSound = debounce(() => {\n  if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n  if (!isSoundInitialized) {\n    logDebug('appSounds:playIncomingTransactionSound', 'sound is not initialized');\n    return;\n  }\n\n  if (IS_CAPACITOR) {\n    NativeAudio\n      .play({\n        assetId: 'incomingTransactionSound',\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:playIncomingTransactionSound', err);\n      });\n    return;\n  }\n\n  if (!audioBuffer) {\n    logDebug('playIncomingTransactionSound', 'audioBuffer is not loaded');\n    return;\n  }\n\n  const source = audioContext.createBufferSource();\n  source.buffer = audioBuffer;\n  source.connect(audioContext.destination);\n  source.start(0);\n}, DEBOUNCE_MS, true, false);\n","import type { ApiActivity, ApiChain, ApiTransactionActivity } from '../../../api/types';\nimport type { GlobalState } from '../../types';\n\nimport {\n  IS_CORE_WALLET,\n  MINT_CARD_ADDRESS,\n  MINT_CARD_REFUND_COMMENT,\n  MTW_CARDS_COLLECTION,\n} from '../../../config';\nimport { getActivityIdReplacements } from '../../../util/activities';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { playIncomingTransactionSound } from '../../../util/notificationSound';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { waitFor } from '../../../util/schedulers';\nimport { getChainBySlug } from '../../../util/tokens';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n} from '../../../util/windowEnvironment';\nimport { SEC } from '../../../api/constants';\nimport { getIsTinyOrScamTransaction } from '../../helpers';\nimport { addActionHandler, getActions, getGlobal, setGlobal } from '../../index';\nimport {\n  addInitialActivities,\n  addNewActivities,\n  addNft,\n  removeActivities,\n  replaceCurrentActivityId,\n  replaceCurrentDomainLinkingId,\n  replaceCurrentDomainRenewalId,\n  replaceCurrentSwapId,\n  replaceCurrentTransferId,\n  updateAccountState,\n  updatePendingActivitiesToTrustedByReplacements,\n  updatePendingActivitiesWithTrustedStatus,\n} from '../../reducers';\nimport {\n  selectAccountState,\n  selectAccountTokens,\n  selectLocalActivitiesSlow,\n  selectPendingActivitiesSlow,\n  selectRecentNonLocalActivitiesSlow,\n} from '../../selectors';\n\nconst TX_AGE_TO_PLAY_SOUND = 60000; // 1 min\nconst PRELOAD_ACTIVITY_TOKEN_COUNT = 10;\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'initialActivities': {\n      const { accountId, mainActivities, bySlug, chain } = update;\n\n      global = addInitialActivities(global, accountId, mainActivities, bySlug, chain);\n      setGlobal(global);\n\n      void preloadTopTokenHistory(accountId, chain);\n      break;\n    }\n\n    case 'newLocalActivities': {\n      const {\n        accountId,\n        activities,\n      } = update;\n\n      // Find matches between local and chain activities\n      const replacedIds = findLocalToChainActivityMatches(global, accountId, activities);\n\n      hideOutdatedLocalActivities(activities, replacedIds);\n\n      // Update pending chain activities to trusted status where applicable\n      global = updatePendingActivitiesToTrustedByReplacements(global, accountId, activities, replacedIds);\n      global = addNewActivities(global, accountId, activities);\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'newActivities': {\n      if (IS_DELEGATING_BOTTOM_SHEET && !update.noForward) {\n        // Local transaction in NBS was not updated after nft/transfer sending was completed\n        callActionInNative('apiUpdate', { ...update, noForward: true });\n      }\n      if (IS_DELEGATED_BOTTOM_SHEET && !update.noForward) {\n        // A local swap transaction is not created if the NBS is closed before the exchange is completed\n        callActionInMain('apiUpdate', { ...update, noForward: true });\n      }\n      const { accountId, activities: newConfirmedActivities, pendingActivities, chain } = update;\n\n      const prevActivitiesForReplacement = [\n        ...selectLocalActivitiesSlow(global, accountId),\n        ...(chain ? selectPendingActivitiesSlow(global, accountId, chain) : []),\n      ];\n      const incomingActivities = [\n        ...(pendingActivities ?? []),\n        ...newConfirmedActivities,\n      ];\n      const replacedIds = getActivityIdReplacements(prevActivitiesForReplacement, incomingActivities);\n\n      // A good TON address for testing: UQD5mxRgCuRNLxKxeOjG6r14iSroLF5FtomPnet-sgP5xI-e\n      global = removeActivities(global, accountId, Object.keys(replacedIds));\n      global = updatePendingActivitiesWithTrustedStatus(\n        global,\n        accountId,\n        chain,\n        pendingActivities,\n        replacedIds,\n        prevActivitiesForReplacement,\n      );\n      global = addNewActivities(global, accountId, newConfirmedActivities);\n\n      global = replaceCurrentTransferId(global, replacedIds);\n      global = replaceCurrentDomainLinkingId(global, replacedIds);\n      global = replaceCurrentDomainRenewalId(global, replacedIds);\n      global = replaceCurrentSwapId(global, replacedIds);\n      global = replaceCurrentActivityId(global, accountId, replacedIds);\n      notifyAboutNewActivities(global, newConfirmedActivities);\n\n      if (!IS_CORE_WALLET) {\n        // NFT polling is executed at long intervals, so it is more likely that a user will see a new transaction\n        // rather than receiving a card in the collection. Therefore, when a new activity occurs,\n        // we check for a card from the MyTonWallet collection and apply it.\n        global = processCardMintingActivity(global, accountId, newConfirmedActivities);\n      }\n\n      setGlobal(global);\n      break;\n    }\n  }\n});\n\nfunction notifyAboutNewActivities(global: GlobalState, newActivities: ApiActivity[]) {\n  if (!global.settings.canPlaySounds) {\n    return;\n  }\n\n  const shouldPlaySound = newActivities.some((activity) => {\n    return activity.kind === 'transaction'\n      && activity.isIncoming\n      && activity.status === 'completed'\n      && (Date.now() - activity.timestamp < TX_AGE_TO_PLAY_SOUND)\n      && !(\n        global.settings.areTinyTransfersHidden\n        && getIsTinyOrScamTransaction(activity, global.tokenInfo?.bySlug[activity.slug])\n      )\n      && !getIsTransactionWithPoisoning(activity);\n  });\n\n  if (shouldPlaySound) {\n    playIncomingTransactionSound();\n  }\n}\n\nfunction processCardMintingActivity(global: GlobalState, accountId: string, activities: ApiActivity[]): GlobalState {\n  const { isCardMinting } = selectAccountState(global, accountId) || {};\n\n  if (!isCardMinting || !activities.length) {\n    return global;\n  }\n\n  const mintCardActivity = activities.find((activity) => {\n    return activity.kind === 'transaction'\n      && activity.isIncoming\n      && activity?.nft?.collectionAddress === MTW_CARDS_COLLECTION;\n  });\n\n  const refundActivity = activities.find((activity) => {\n    return activity.kind === 'transaction'\n      && activity.isIncoming\n      && activity.fromAddress === MINT_CARD_ADDRESS\n      && activity?.comment === MINT_CARD_REFUND_COMMENT;\n  });\n\n  if (mintCardActivity) {\n    const nft = (mintCardActivity as ApiTransactionActivity).nft!;\n\n    global = updateAccountState(global, accountId, { isCardMinting: undefined });\n    global = addNft(global, accountId, nft);\n    getActions().setCardBackgroundNft({ nft });\n    getActions().installAccentColorFromNft({ nft });\n  } else if (refundActivity) {\n    global = updateAccountState(global, accountId, { isCardMinting: undefined });\n  }\n\n  return global;\n}\n\nfunction findLocalToChainActivityMatches(\n  global: GlobalState,\n  accountId: string,\n  localActivities: ApiActivity[],\n) {\n  const maxCheckDepth = localActivities.length + 20;\n  const chainActivities = selectRecentNonLocalActivitiesSlow(global, accountId, maxCheckDepth);\n\n  return getActivityIdReplacements(localActivities, chainActivities);\n}\n\n/**\n * Thanks to the socket, there is a possibility that a pending activity will arrive before the corresponding local\n * activity. Such local activities duplicate the pending activities, which is unwanted. They shouldn't be removed,\n * because other parts of the global state may point to their ids, so they get hidden instead.\n */\nfunction hideOutdatedLocalActivities(\n  localActivities: ApiActivity[],\n  replacements: Record<string, string>,\n) {\n  for (const localActivity of localActivities) {\n    if (localActivity.id in replacements) {\n      localActivity.shouldHide = true;\n    }\n  }\n}\n\nasync function preloadTopTokenHistory(accountId: string, chain: ApiChain) {\n  await waitFor(() => !!selectAccountTokens(getGlobal(), accountId), SEC, 10);\n  const global = getGlobal();\n\n  const tokens = (selectAccountTokens(global, accountId) ?? [])\n    .slice(0, PRELOAD_ACTIVITY_TOKEN_COUNT)\n    .filter((token) => getChainBySlug(token.slug) === chain);\n\n  const { idsBySlug } = selectAccountState(global, accountId)?.activities || {};\n  const { fetchPastActivities } = getActions();\n\n  for (const { slug } of tokens) {\n    if (idsBySlug?.[slug] === undefined) {\n      fetchPastActivities({ slug });\n    }\n  }\n}\n","import { SignDataState, TransferState } from '../../types';\n\nimport { TONCOIN } from '../../../config';\nimport { processDeeplink } from '../../../util/deeplink';\nimport { callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  clearCurrentDappTransfer,\n  clearCurrentSignature,\n  clearCurrentTransfer,\n  clearDappConnectRequest,\n  updateCurrentDappSignData,\n  updateCurrentDappTransfer,\n  updateCurrentSignature,\n  updateCurrentTransfer,\n  updateCurrentTransferByCheckResult,\n} from '../../reducers';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'tonConnectOnline': {\n      actions.closeLoadingOverlay();\n      break;\n    }\n\n    case 'createTransaction': {\n      const {\n        promiseId,\n        amount,\n        toAddress,\n        comment,\n        rawPayload,\n        stateInit,\n        checkResult,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Confirm,\n        toAddress,\n        resolvedAddress: checkResult.resolvedAddress,\n        isToNewAddress: checkResult.isToAddressNew,\n        amount,\n        comment,\n        promiseId,\n        tokenSlug: TONCOIN.slug,\n        rawPayload,\n        stateInit,\n      });\n      global = updateCurrentTransferByCheckResult(global, checkResult);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'completeTransaction': {\n      const { activityId } = update;\n      setGlobal(updateCurrentTransfer(global, {\n        state: TransferState.Complete,\n        txId: activityId,\n      }));\n\n      break;\n    }\n\n    case 'createSignature': {\n      const { promiseId, dataHex } = update;\n\n      global = clearCurrentSignature(global);\n      global = updateCurrentSignature(global, {\n        promiseId,\n        dataHex,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'showError': {\n      const { error } = update;\n      actions.showError({ error });\n\n      break;\n    }\n\n    case 'dappConnect': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappConnect', update);\n      }\n\n      actions.apiUpdateDappConnect(update);\n\n      break;\n    }\n\n    case 'dappConnectComplete': {\n      global = clearDappConnectRequest(global);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'dappDisconnect': {\n      const { url } = update;\n\n      if (global.currentDappTransfer.dapp?.url === url) {\n        global = clearCurrentDappTransfer(global);\n        setGlobal(global);\n      }\n      break;\n    }\n\n    case 'dappLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappLoading', update);\n      }\n\n      actions.apiUpdateDappLoading(update);\n\n      break;\n    }\n\n    case 'dappCloseLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappCloseLoading', update);\n      }\n\n      actions.apiUpdateDappCloseLoading(update);\n\n      break;\n    }\n\n    case 'dappSendTransactions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappSendTransaction', update);\n      }\n\n      actions.apiUpdateDappSendTransaction(update);\n      break;\n    }\n\n    case 'dappSignData': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappSignData', update);\n      }\n\n      actions.apiUpdateDappSignData(update);\n      break;\n    }\n\n    case 'updateDapps': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('getDapps');\n      }\n\n      actions.getDapps();\n      break;\n    }\n\n    case 'prepareTransaction': {\n      const {\n        amount,\n        toAddress,\n        comment,\n        binPayload,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Initial,\n        toAddress,\n        amount: amount ?? 0n,\n        comment,\n        tokenSlug: TONCOIN.slug,\n        binPayload,\n      });\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'processDeeplink': {\n      const { url } = update;\n\n      void processDeeplink(url);\n      break;\n    }\n\n    case 'dappTransferComplete': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdate', update);\n      }\n\n      if (global.currentDappTransfer.state !== TransferState.None) {\n        global = updateCurrentDappTransfer(global, {\n          state: TransferState.Complete,\n          isLoading: false,\n        });\n        setGlobal(global);\n      }\n      break;\n    }\n\n    case 'dappSignDataComplete': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdate', update);\n      }\n\n      if (global.currentDappSignData.state !== SignDataState.None) {\n        global = updateCurrentDappSignData(global, {\n          state: SignDataState.Complete,\n          isLoading: false,\n        });\n        setGlobal(global);\n      }\n      break;\n    }\n  }\n});\n","import type { AnimationLevel } from '../global/types';\n\nimport { ANIMATION_LEVEL_MAX, ANIMATION_LEVEL_MED, ANIMATION_LEVEL_MIN } from '../config';\n\nconst ANIMATION_LEVEL_OPTIONS = [\n  ANIMATION_LEVEL_MIN,\n  ANIMATION_LEVEL_MED,\n  ANIMATION_LEVEL_MAX,\n];\n\nexport default function switchAnimationLevel(level: AnimationLevel) {\n  const levelClassName = `animation-level-${level}`;\n  if (document.documentElement.classList.contains(levelClassName)) {\n    return;\n  }\n\n  ANIMATION_LEVEL_OPTIONS.forEach((currentLevel) => {\n    document.documentElement.classList.toggle(`animation-level-${currentLevel}`, currentLevel === level);\n  });\n}\n","import type {\n  Account, AccountSettings, AccountState, NotificationType,\n} from '../../types';\nimport { AppState } from '../../types';\n\nimport {\n  DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_TELEGRAM_APP,\n  TONCOIN,\n} from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { initCapacitorWithGlobal } from '../../../util/capacitor';\nimport { processDeeplinkAfterSignIn } from '../../../util/deeplink';\nimport { omit } from '../../../util/iteratees';\nimport { clearPreviousLangpacks, setLanguage } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { initializeSounds } from '../../../util/notificationSound';\nimport switchAnimationLevel from '../../../util/switchAnimationLevel';\nimport switchTheme, { setStatusBarStyle } from '../../../util/switchTheme';\nimport { initTelegramWithGlobal } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID,\n  IS_ANDROID_APP,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_IOS,\n  IS_LINUX,\n  IS_MAC_OS,\n  IS_OPERA,\n  IS_SAFARI,\n  IS_WINDOWS,\n  setScrollbarWidthProperty,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { errorCodeToMessage } from '../../helpers/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateCurrentAccountId, updateCurrentAccountState } from '../../reducers';\nimport {\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n  selectNetworkAccountsMemoized,\n  selectNewestActivityTimestamps,\n  selectSwapTokens,\n} from '../../selectors';\n\nconst ANIMATION_DELAY_MS = 320;\n\naddActionHandler('init', (_, actions) => {\n  requestMutation(() => {\n    const { documentElement } = document;\n\n    if (IS_IOS) {\n      documentElement.classList.add('is-ios', 'is-mobile');\n    } else if (IS_ANDROID) {\n      documentElement.classList.add('is-android', 'is-mobile');\n      if (IS_ANDROID_APP) {\n        documentElement.classList.add('is-android-app');\n      }\n    } else if (IS_MAC_OS) {\n      documentElement.classList.add('is-macos');\n    } else if (IS_WINDOWS) {\n      documentElement.classList.add('is-windows');\n    } else if (IS_LINUX) {\n      documentElement.classList.add('is-linux');\n    }\n    if (IS_SAFARI) {\n      documentElement.classList.add('is-safari');\n    }\n    if (IS_OPERA) {\n      documentElement.classList.add('is-opera');\n    }\n    if (IS_EXTENSION) {\n      documentElement.classList.add('is-extension');\n    }\n    if (IS_ELECTRON) {\n      documentElement.classList.add('is-electron');\n    }\n    if (IS_TELEGRAM_APP) {\n      documentElement.classList.add('is-telegram-app');\n    }\n    if (getIsMobileTelegramApp()) {\n      documentElement.classList.add('is-mobile-telegram-app');\n    }\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      documentElement.classList.add('is-native-bottom-sheet');\n    }\n\n    setScrollbarWidthProperty();\n\n    actions.afterInit();\n  });\n});\n\naddActionHandler('afterInit', (global) => {\n  const {\n    theme, animationLevel, langCode, authConfig,\n  } = global.settings;\n\n  switchTheme(theme);\n  switchAnimationLevel(animationLevel);\n  setStatusBarStyle({\n    forceDarkBackground: false,\n  });\n  void setLanguage(langCode);\n  clearPreviousLangpacks();\n\n  if (IS_CAPACITOR) {\n    void initCapacitorWithGlobal(authConfig);\n  } else {\n    if (IS_TELEGRAM_APP) {\n      initTelegramWithGlobal(global);\n    }\n\n    document.addEventListener('click', initializeSounds, { once: true });\n  }\n});\n\naddActionHandler('afterSignIn', (global, actions) => {\n  setGlobal({ ...global, appState: AppState.Main });\n\n  setTimeout(() => {\n    actions.resetAuth();\n\n    processDeeplinkAfterSignIn();\n  }, ANIMATION_DELAY_MS);\n});\n\naddActionHandler('afterSignOut', (global, actions, payload) => {\n  if (payload?.shouldReset) {\n    if (global.settings.authConfig?.kind === 'native-biometrics') {\n      void authApi.removeNativeBiometrics();\n    }\n    actions.setInMemoryPassword({ password: undefined, force: true });\n\n    actions.resetApiSettings({ areAllDisabled: true });\n  }\n});\n\naddActionHandler('showDialog', (global, actions, payload) => {\n  const newDialogs = [...global.dialogs];\n  const existingMessageIndex = newDialogs.findIndex((dialog) => dialog.message === payload.message);\n  if (existingMessageIndex !== -1) {\n    newDialogs.splice(existingMessageIndex, 1);\n  }\n\n  newDialogs.push(payload);\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('dismissDialog', (global) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('dismissDialog');\n  }\n\n  const newDialogs = [...global.dialogs];\n\n  newDialogs.pop();\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('selectToken', (global, actions, { slug } = {}) => {\n  if (slug) {\n    const isToncoin = slug === TONCOIN.slug;\n    const tokens = selectSwapTokens(global);\n\n    if (isToncoin || tokens?.some((token) => token.slug === slug)) {\n      if (isToncoin) {\n        actions.setDefaultSwapParams({ tokenInSlug: DEFAULT_SWAP_SECOND_TOKEN_SLUG, tokenOutSlug: slug });\n      } else {\n        actions.setDefaultSwapParams({ tokenOutSlug: slug });\n      }\n      actions.changeTransferToken({ tokenSlug: slug });\n    }\n  } else {\n    const currentActivityToken = global.byAccountId[global.currentAccountId!].currentTokenSlug;\n\n    const isDefaultFirstTokenOutSwap = global.currentSwap.tokenOutSlug === DEFAULT_SWAP_FIRST_TOKEN_SLUG\n      && global.currentSwap.tokenInSlug === DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n    const shouldResetSwap = global.currentSwap.tokenOutSlug === currentActivityToken\n      && (\n        (\n          global.currentSwap.tokenInSlug === DEFAULT_SWAP_FIRST_TOKEN_SLUG\n          && global.currentSwap.tokenOutSlug !== DEFAULT_SWAP_SECOND_TOKEN_SLUG\n        )\n        || isDefaultFirstTokenOutSwap\n      );\n\n    if (shouldResetSwap) {\n      actions.setDefaultSwapParams({ tokenInSlug: undefined, tokenOutSlug: undefined, withResetAmount: true });\n    }\n\n    const shouldResetTransfer = (global.currentTransfer.tokenSlug === currentActivityToken\n      && global.currentTransfer.tokenSlug !== DEFAULT_TRANSFER_TOKEN_SLUG)\n    && !global.currentTransfer.nfts?.length;\n\n    if (shouldResetTransfer) {\n      actions.changeTransferToken({ tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG, withResetAmount: true });\n    }\n  }\n\n  return updateCurrentAccountState(global, { currentTokenSlug: slug });\n});\n\naddActionHandler('showError', (global, actions, { error } = {}) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showError', { error });\n    return;\n  }\n\n  actions.showDialog({\n    message: errorCodeToMessage(error),\n  });\n});\n\naddActionHandler('showNotification', (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showNotification', payload);\n    return undefined;\n  }\n\n  const { message, icon } = payload;\n\n  const newNotifications: NotificationType[] = [...global.notifications];\n  const existingNotificationIndex = newNotifications.findIndex((n) => n.message === message);\n  if (existingNotificationIndex !== -1) {\n    newNotifications.splice(existingNotificationIndex, 1);\n  }\n\n  newNotifications.push({ message, icon });\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('dismissNotification', (global) => {\n  const newNotifications = [...global.notifications];\n\n  newNotifications.pop();\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('toggleTonProxy', (global, actions, { isEnabled }) => {\n  void callApi('doProxy', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonProxyEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleTonMagic', (global, actions, { isEnabled }) => {\n  void callApi('doMagic', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonMagicEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleDeeplinkHook', (global, actions, { isEnabled }) => {\n  if (IS_ELECTRON) {\n    void window.electron?.toggleDeeplinkHandler(isEnabled);\n  } else {\n    void callApi('doDeeplinkHook', isEnabled);\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isDeeplinkHookEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('signOut', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('signOut', payload);\n  }\n\n  const { level } = payload;\n\n  const network = selectCurrentNetwork(global);\n  const accounts = selectNetworkAccounts(global)!;\n  const accountIds = Object.keys(accounts);\n  const isFromAllAccounts = level !== 'account';\n\n  const otherNetwork = network === 'mainnet' ? 'testnet' : 'mainnet';\n  let otherNetworkAccountIds = Object.keys(selectNetworkAccountsMemoized(otherNetwork, global.accounts?.byId)!);\n\n  if (level === 'all' && otherNetworkAccountIds.length > 0) {\n    await callApi('removeNetworkAccounts', otherNetwork);\n    otherNetworkAccountIds = [];\n  }\n\n  if (isFromAllAccounts || accountIds.length === 1) {\n    actions.deleteAllNotificationAccounts({ accountIds });\n    if (otherNetworkAccountIds.length) {\n      await callApi('removeNetworkAccounts', network);\n\n      global = getGlobal();\n\n      const nextAccountId = otherNetworkAccountIds[0];\n      const accountsById = Object.entries(global.accounts!.byId).reduce((byId, [accountId, account]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = account;\n        }\n        return byId;\n      }, {} as Record<string, Account>);\n      const byAccountId = Object.entries(global.byAccountId).reduce((byId, [accountId, state]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = state;\n        }\n        return byId;\n      }, {} as Record<string, AccountState>);\n\n      const settingsById = Object.entries(global.settings.byAccountId).reduce((byId, [accountId, settings]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = settings;\n        }\n        return byId;\n      }, {} as Record<string, AccountSettings>);\n\n      global = updateCurrentAccountId(global, nextAccountId);\n\n      global = {\n        ...global,\n        accounts: {\n          ...global.accounts!,\n          byId: accountsById,\n        },\n        byAccountId,\n        settings: {\n          ...global.settings,\n          byAccountId: settingsById,\n        },\n      };\n\n      setGlobal(global);\n\n      actions.switchAccount({ accountId: nextAccountId, newNetwork: otherNetwork });\n      actions.closeSettings();\n      actions.afterSignOut();\n    } else {\n      await callApi('resetAccounts');\n\n      actions.afterSignOut({ shouldReset: true });\n      actions.init();\n    }\n  } else {\n    const prevAccountId = global.currentAccountId!;\n    const nextAccountId = accountIds.find((id) => id !== prevAccountId)!;\n    const nextNewestActivityTimestamps = selectNewestActivityTimestamps(global, nextAccountId);\n\n    await callApi('removeAccount', prevAccountId, nextAccountId, nextNewestActivityTimestamps);\n    actions.deleteNotificationAccount({ accountId: prevAccountId });\n\n    global = getGlobal();\n\n    const accountsById = omit(global.accounts!.byId, [prevAccountId]);\n    const byAccountId = omit(global.byAccountId, [prevAccountId]);\n    const settingsByAccountId = omit(global.settings.byAccountId, [prevAccountId]);\n\n    global = updateCurrentAccountId(global, nextAccountId);\n\n    global = {\n      ...global,\n      accounts: {\n        ...global.accounts!,\n        byId: accountsById,\n      },\n      byAccountId,\n      settings: {\n        ...global.settings,\n        byAccountId: settingsByAccountId,\n      },\n    };\n\n    setGlobal(global);\n\n    actions.afterSignOut();\n  }\n});\n","import { registerPlugin } from '@capacitor/core';\nconst BarcodeScanner = registerPlugin('BarcodeScanner', {\n    web: () => import('./web').then(m => new m.BarcodeScannerWeb()),\n});\nexport * from './definitions';\nexport { BarcodeScanner };\n//# sourceMappingURL=index.js.map","const APP_VERSION_REGEX = /^\\d+\\.\\d+(\\.\\d+)?$/;\n\nexport default function getIsAppUpdateNeeded(remoteVersion: string, appVersion: string, isStrict?: boolean) {\n  const sanitizedRemoteVersion = remoteVersion.trim();\n\n  if (!APP_VERSION_REGEX.test(sanitizedRemoteVersion)) {\n    return false;\n  }\n\n  if (isStrict) {\n    return sanitizedRemoteVersion.localeCompare(appVersion, undefined, { numeric: true, sensitivity: 'base' }) === 1;\n  }\n\n  return sanitizedRemoteVersion !== appVersion;\n}\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useFlag = (initial = false, debugKey?: string): [boolean, NoneToVoidFunction, NoneToVoidFunction] => {\n  const [value, setValue] = useState(initial, debugKey);\n\n  const setTrue = useCallback(() => {\n    setValue(true);\n  }, []);\n\n  const setFalse = useCallback(() => {\n    setValue(false);\n  }, []);\n\n  return [value, setTrue, setFalse];\n};\n\nexport default useFlag;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { getHotkeyMatcher } from '../util/parseHotkey';\n\nconst IGNORE_TAGS = new Set(['INPUT', 'TEXTAREA', 'SELECT']);\n\nconst handlers = createCallbackManager();\ndocument.documentElement.addEventListener('keydown', handlers.runCallbacks);\n\nexport function useHotkeys(hotkeys?: Record<string, (e: KeyboardEvent) => void>) {\n  useEffect(() => {\n    if (!hotkeys) {\n      return undefined;\n    }\n\n    const entries = Object.entries(hotkeys);\n\n    function handleKeyDown(e: KeyboardEvent) {\n      if (!shouldFireEvent(e)) {\n        return;\n      }\n\n      entries.forEach(([hotkey, handler]) => {\n        if (getHotkeyMatcher(hotkey)(e)) {\n          handler(e);\n        }\n      });\n    }\n\n    return handlers.addCallback(handleKeyDown);\n  }, [hotkeys]);\n}\n\nfunction shouldFireEvent(e: KeyboardEvent) {\n  if (e.target instanceof HTMLElement) {\n    return !IGNORE_TAGS.has(e.target.tagName);\n  }\n\n  return true;\n}\n","// Original source from Mantine\n// https://github.com/mantinedev/mantine/blob/master/src/mantine-hooks/src/use-hotkeys/parse-hotkey.ts\n\nexport type KeyboardModifiers = {\n  alt: boolean;\n  ctrl: boolean;\n  meta: boolean;\n  mod: boolean;\n  shift: boolean;\n};\n\nexport type Hotkey = KeyboardModifiers & {\n  key?: string;\n};\n\ntype CheckHotkeyMatch = (event: KeyboardEvent) => boolean;\n\nexport function parseHotkey(hotkey: string): Hotkey {\n  const keys = hotkey\n    .toLowerCase()\n    .split('+')\n    .map((part) => part.trim());\n\n  const modifiers: KeyboardModifiers = {\n    alt: keys.includes('alt'),\n    ctrl: keys.includes('ctrl'),\n    meta: keys.includes('meta'),\n    mod: keys.includes('mod'),\n    shift: keys.includes('shift'),\n  };\n\n  const reservedKeys = ['alt', 'ctrl', 'meta', 'shift', 'mod'];\n\n  const freeKey = keys.find((key) => !reservedKeys.includes(key));\n\n  return {\n    ...modifiers,\n    key: freeKey,\n  };\n}\n\nfunction isExactHotkey(hotkey: Hotkey, event: KeyboardEvent): boolean {\n  const {\n    alt, ctrl, meta, mod, shift, key,\n  } = hotkey;\n  const {\n    altKey, ctrlKey, metaKey, shiftKey, key: pressedKey,\n  } = event;\n\n  if (alt !== altKey) {\n    return false;\n  }\n\n  if (mod) {\n    if (!ctrlKey && !metaKey) {\n      return false;\n    }\n  } else {\n    if (ctrl !== ctrlKey) {\n      return false;\n    }\n    if (meta !== metaKey) {\n      return false;\n    }\n  }\n  if (shift !== shiftKey) {\n    return false;\n  }\n\n  return Boolean(key\n    && (pressedKey.toLowerCase() === key.toLowerCase()\n      || event.code.replace('Key', '').toLowerCase() === key.toLowerCase()));\n}\n\nexport function getHotkeyMatcher(hotkey: string): CheckHotkeyMatch {\n  return (event) => isExactHotkey(parseHotkey(hotkey), event);\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { throttle, throttleWith } from '../util/schedulers';\n\nexport default function useThrottledCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    if (typeof msOrSchedulerFn === 'number') {\n      return throttle(fnMemo, msOrSchedulerFn, !noFirst);\n    } else {\n      return throttleWith(msOrSchedulerFn, fnMemo);\n    }\n  }, [fnMemo, msOrSchedulerFn, noFirst]);\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport { debounce } from '../util/schedulers';\n\nexport default function useDebouncedCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    return debounce(fnMemo, ms, !noFirst, !noLast);\n  }, [fnMemo, ms, noFirst, noLast]);\n}\n","import { useEffect, useMemo, useState } from '../lib/teact/teact';\n\nimport { throttle } from '../util/schedulers';\nimport windowSize from '../util/windowSize';\nimport useDebouncedCallback from './useDebouncedCallback';\n\nconst THROTTLE = 250;\n\nexport default function useWindowSize() {\n  const {\n    width: initialWidth,\n    height: initialHeight,\n    screenHeight: initialScreenHeight,\n  } = windowSize.get();\n  const [width, setWidth] = useState(initialWidth);\n  const [height, setHeight] = useState(initialHeight);\n  const [screenHeight, setScreenHeight] = useState(initialScreenHeight);\n  const [isResizing, setIsResizing] = useState(false);\n  const setIsResizingDebounced = useDebouncedCallback(setIsResizing, [setIsResizing], THROTTLE, true);\n\n  useEffect(() => {\n    const throttledSetIsResizing = throttle(() => {\n      setIsResizing(true);\n    }, THROTTLE, true);\n\n    const throttledSetSize = throttle(() => {\n      const { width: newWidth, height: newHeight, screenHeight: newScreenHeight } = windowSize.get();\n      setWidth(newWidth);\n      setHeight(newHeight);\n      setScreenHeight(newScreenHeight);\n      setIsResizingDebounced(false);\n    }, THROTTLE, false);\n\n    const handleResize = () => {\n      throttledSetIsResizing();\n      throttledSetSize();\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [setIsResizingDebounced]);\n\n  return useMemo(() => ({\n    width, height, screenHeight, isResizing,\n  }), [height, isResizing, screenHeight, width]);\n}\n","import { getActions } from '../../global';\n\nimport { AUTO_CONFIRM_DURATION_MINUTES } from '../../config';\nimport { MINUTE } from '../dateFormat';\nimport { setReliableTimeout } from '../setReliableTimeout';\nimport { createSignal } from '../signals';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS_APP } from '../windowEnvironment';\n\ninterface EncryptedPasswordData {\n  ciphertext: ArrayBuffer;\n  iv: Uint8Array;\n}\n\nconst [\n  getEncryptedPasswordSignal,\n  setEncryptedPasswordSignal,\n] = createSignal<EncryptedPasswordData | undefined>(undefined);\n\nlet encryptionKey: CryptoKey;\n\nconst isMainStore = IS_IOS_APP ? IS_DELEGATING_BOTTOM_SHEET : true;\n\nlet clearTimeout: NoneToVoidFunction | undefined;\n\nfunction resetTimeout() {\n  if (!isMainStore) return;\n\n  clearTimeout?.();\n  clearTimeout = setReliableTimeout(() => {\n    getActions().setInMemoryPassword({ password: undefined });\n  }, AUTO_CONFIRM_DURATION_MINUTES * MINUTE);\n}\n\nasync function initEncryptionKey(): Promise<CryptoKey> {\n  if (encryptionKey) return encryptionKey;\n\n  encryptionKey = await window.crypto.subtle.generateKey(\n    {\n      name: 'AES-GCM',\n      length: 256,\n    },\n    false,\n    ['encrypt', 'decrypt'],\n  );\n\n  return encryptionKey;\n}\n\nvoid initEncryptionKey();\n\nasync function encryptPassword(password: string): Promise<EncryptedPasswordData> {\n  const key = await initEncryptionKey();\n\n  const encoder = new TextEncoder();\n  const passwordData = encoder.encode(password);\n\n  const iv = window.crypto.getRandomValues(new Uint8Array(12));\n\n  const ciphertext = await window.crypto.subtle.encrypt(\n    {\n      name: 'AES-GCM',\n      iv,\n    },\n    key,\n    passwordData,\n  );\n\n  return { ciphertext, iv };\n}\n\nasync function decryptPassword(encryptedData: EncryptedPasswordData): Promise<string> {\n  const key = await initEncryptionKey();\n\n  const decryptedData = await window.crypto.subtle.decrypt(\n    {\n      name: 'AES-GCM',\n      iv: encryptedData.iv,\n    },\n    key,\n    encryptedData.ciphertext,\n  );\n\n  const decoder = new TextDecoder();\n  return decoder.decode(decryptedData);\n}\n\nexport function getHasInMemoryPassword() {\n  return getEncryptedPasswordSignal() !== undefined;\n}\n\nexport async function getInMemoryPassword() {\n  const encryptedData = getEncryptedPasswordSignal();\n  if (!encryptedData) return undefined;\n\n  try {\n    return await decryptPassword(encryptedData);\n  } catch (error) {\n    return undefined;\n  }\n}\n\nexport function setInMemoryPasswordSignal(password?: string) {\n  resetTimeout();\n\n  if (password === undefined) {\n    setEncryptedPasswordSignal(undefined);\n    return;\n  }\n\n  void encryptPassword(password).then((encrypted) => {\n    setEncryptedPasswordSignal(encrypted);\n  });\n}\n","const CHECK_INTERVAL = 5000;\n\nexport function setReliableTimeout(callback: NoneToVoidFunction, delay: number): NoneToVoidFunction {\n  if (delay <= 0) {\n    callback();\n    return () => {};\n  }\n\n  const startTime = Date.now();\n  let intervalId: number | undefined;\n  let isCleared = false;\n\n  const clear = () => {\n    if (isCleared) return;\n    isCleared = true;\n    if (intervalId) {\n      clearInterval(intervalId);\n      intervalId = undefined;\n    }\n  };\n\n  intervalId = window.setInterval(() => {\n    if (isCleared) return;\n    if (Date.now() - startTime >= delay) {\n      clear();\n      callback();\n    }\n  }, CHECK_INTERVAL);\n\n  return clear;\n}\n","import { IS_CORE_WALLET } from '../../../config';\n\nimport iconAddDark from '../../../assets/lottie/add_dark.tgs';\nimport iconAddLight from '../../../assets/lottie/add_light.tgs';\nimport iconClockDark from '../../../assets/lottie/clock_dark.tgs';\nimport iconClockDarkBlue from '../../../assets/lottie/clock_dark_blue.tgs';\nimport iconClockDarkGray from '../../../assets/lottie/clock_dark_gray.tgs';\nimport iconClockDarkGreen from '../../../assets/lottie/clock_dark_green.tgs';\nimport iconClockDarkOrange from '../../../assets/lottie/clock_dark_orange.tgs';\nimport iconClockDarkPurple from '../../../assets/lottie/clock_dark_purple.tgs';\nimport iconClockDarkPurpleWhite from '../../../assets/lottie/clock_dark_purple_white.tgs';\nimport iconClockDarkRed from '../../../assets/lottie/clock_dark_red.tgs';\nimport iconClockLight from '../../../assets/lottie/clock_light.tgs';\nimport iconClockLightBlue from '../../../assets/lottie/clock_light_blue.tgs';\nimport iconClockLightGray from '../../../assets/lottie/clock_light_gray.tgs';\nimport iconClockLightGreen from '../../../assets/lottie/clock_light_green.tgs';\nimport iconClockLightOrange from '../../../assets/lottie/clock_light_orange.tgs';\nimport iconClockLightPurple from '../../../assets/lottie/clock_light_purple.tgs';\nimport iconClockLightPurpleWhite from '../../../assets/lottie/clock_light_purple_white.tgs';\nimport iconClockLightRed from '../../../assets/lottie/clock_light_red.tgs';\nimport coreWalletLogo from '../../../assets/lottie/core_wallet_logo.tgs';\nimport bill from '../../../assets/lottie/duck_bill.tgs';\nimport forge from '../../../assets/lottie/duck_forges.tgs';\nimport guard from '../../../assets/lottie/duck_guard.tgs';\nimport happy from '../../../assets/lottie/duck_happy.tgs';\nimport hello from '../../../assets/lottie/duck_hello.tgs';\nimport noData from '../../../assets/lottie/duck_no-data.tgs';\nimport run from '../../../assets/lottie/duck_run.tgs';\nimport snitch from '../../../assets/lottie/duck_snitch.tgs';\nimport thumbUp from '../../../assets/lottie/duck_thumb.tgs';\nimport holdTon from '../../../assets/lottie/duck_ton.tgs';\nimport wait from '../../../assets/lottie/duck_wait.tgs';\nimport yeee from '../../../assets/lottie/duck_yeee.tgs';\nimport iconEarnDark from '../../../assets/lottie/earn_dark.tgs';\nimport iconEarnDarkPurple from '../../../assets/lottie/earn_dark_purple.tgs';\nimport iconEarnLight from '../../../assets/lottie/earn_light.tgs';\nimport iconEarnLightPurple from '../../../assets/lottie/earn_light_purple.tgs';\nimport iconSendDark from '../../../assets/lottie/send_dark.tgs';\nimport iconSendLight from '../../../assets/lottie/send_light.tgs';\nimport iconSwapDark from '../../../assets/lottie/swap_dark.tgs';\nimport iconSwapLight from '../../../assets/lottie/swap_light.tgs';\nimport iconClockPreviewDark from '../../../assets/lottiePreview/clock_dark.svg';\nimport iconClockPreviewDarkBlue from '../../../assets/lottiePreview/clock_dark_blue.svg';\nimport iconClockPreviewDarkGray from '../../../assets/lottiePreview/clock_dark_gray.svg';\nimport iconClockPreviewDarkGreen from '../../../assets/lottiePreview/clock_dark_green.svg';\nimport iconClockPreviewDarkOrange from '../../../assets/lottiePreview/clock_dark_orange.svg';\nimport iconClockPreviewDarkPurple from '../../../assets/lottiePreview/clock_dark_purple.svg';\nimport iconClockPreviewDarkPurpleWhite from '../../../assets/lottiePreview/clock_dark_purple_white.svg';\nimport iconClockPreviewDarkRed from '../../../assets/lottiePreview/clock_dark_red.svg';\nimport iconClockPreviewLight from '../../../assets/lottiePreview/clock_light.svg';\nimport iconClockPreviewLightBlue from '../../../assets/lottiePreview/clock_light_blue.svg';\nimport iconClockPreviewLightGray from '../../../assets/lottiePreview/clock_light_gray.svg';\nimport iconClockPreviewLightGreen from '../../../assets/lottiePreview/clock_light_green.svg';\nimport iconClockPreviewLightOrange from '../../../assets/lottiePreview/clock_light_orange.svg';\nimport iconClockPreviewLightPurple from '../../../assets/lottiePreview/clock_light_purple.svg';\nimport iconClockPreviewLightPurpleWhite from '../../../assets/lottiePreview/clock_light_purple_white.svg';\nimport iconClockPreviewLightRed from '../../../assets/lottiePreview/clock_light_red.svg';\nimport coreWalletLogoPreview from '../../../assets/lottiePreview/core_wallet_logo.png';\nimport billPreview from '../../../assets/lottiePreview/duck_bill.png';\nimport forgePreview from '../../../assets/lottiePreview/duck_forges.png';\nimport guardPreview from '../../../assets/lottiePreview/duck_guard.png';\nimport happyPreview from '../../../assets/lottiePreview/duck_happy.png';\nimport helloPreview from '../../../assets/lottiePreview/duck_hello.png';\nimport noDataPreview from '../../../assets/lottiePreview/duck_no-data.png';\nimport runPreview from '../../../assets/lottiePreview/duck_run.png';\nimport snitchPreview from '../../../assets/lottiePreview/duck_snitch.png';\nimport thumbUpPreview from '../../../assets/lottiePreview/duck_thumb.png';\nimport holdTonPreview from '../../../assets/lottiePreview/duck_ton.png';\nimport waitPreview from '../../../assets/lottiePreview/duck_wait.png';\nimport yeeePreview from '../../../assets/lottiePreview/duck_yeee.png';\n\nexport const ANIMATED_STICKERS_PATHS = {\n  hello,\n  snitch,\n  bill,\n  thumbUp,\n  holdTon,\n  happy,\n  noData,\n  forge,\n  wait,\n  run,\n  yeee,\n  guard,\n  helloPreview,\n  snitchPreview,\n  billPreview,\n  thumbUpPreview,\n  holdTonPreview,\n  happyPreview,\n  noDataPreview,\n  forgePreview,\n  waitPreview,\n  runPreview,\n  yeeePreview,\n  guardPreview,\n  ...(IS_CORE_WALLET && {\n    coreWalletLogo,\n    coreWalletLogoPreview,\n  }),\n  light: {\n    iconAdd: iconAddLight,\n    iconClock: iconClockLight,\n    iconClockBlue: iconClockLightBlue,\n    iconClockGray: iconClockLightGray,\n    iconClockGreen: iconClockLightGreen,\n    iconClockOrange: iconClockLightOrange,\n    iconClockPurple: iconClockLightPurple,\n    iconClockPurpleWhite: iconClockLightPurpleWhite,\n    iconClockRed: iconClockLightRed,\n    iconEarn: iconEarnLight,\n    iconEarnPurple: iconEarnLightPurple,\n    iconSend: iconSendLight,\n    iconSwap: iconSwapLight,\n    preview: {\n      iconClock: iconClockPreviewLight,\n      iconClockBlue: iconClockPreviewLightBlue,\n      iconClockGray: iconClockPreviewLightGray,\n      iconClockGreen: iconClockPreviewLightGreen,\n      iconClockOrange: iconClockPreviewLightOrange,\n      iconClockPurple: iconClockPreviewLightPurple,\n      iconClockPurpleWhite: iconClockPreviewLightPurpleWhite,\n      iconClockRed: iconClockPreviewLightRed,\n    },\n  },\n  dark: {\n    iconAdd: iconAddDark,\n    iconClock: iconClockDark,\n    iconClockBlue: iconClockDarkBlue,\n    iconClockGray: iconClockDarkGray,\n    iconClockGreen: iconClockDarkGreen,\n    iconClockOrange: iconClockDarkOrange,\n    iconClockPurple: iconClockDarkPurple,\n    iconClockPurpleWhite: iconClockDarkPurpleWhite,\n    iconClockRed: iconClockDarkRed,\n    iconEarn: iconEarnDark,\n    iconEarnPurple: iconEarnDarkPurple,\n    iconSend: iconSendDark,\n    iconSwap: iconSwapDark,\n    preview: {\n      iconClock: iconClockPreviewDark,\n      iconClockBlue: iconClockPreviewDarkBlue,\n      iconClockGray: iconClockPreviewDarkGray,\n      iconClockGreen: iconClockPreviewDarkGreen,\n      iconClockOrange: iconClockPreviewDarkOrange,\n      iconClockPurple: iconClockPreviewDarkPurple,\n      iconClockPurpleWhite: iconClockPreviewDarkPurpleWhite,\n      iconClockRed: iconClockPreviewDarkRed,\n    },\n  },\n};\n","import { type ElementRef, useEffect } from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst DEFAULT_DURATION = 400;\n\nexport default function useFocusAfterAnimation(\n  ref: ElementRef<HTMLInputElement>, isDisabled = false, animationDuration = DEFAULT_DURATION,\n) {\n  useEffect(() => {\n    if (IS_TOUCH_ENV || isDisabled) {\n      return;\n    }\n\n    setTimeout(() => {\n      ref.current?.focus();\n    }, animationDuration);\n  }, [ref, animationDuration, isDisabled]);\n}\n","import { useRef } from '../lib/teact/teact';\n\nexport function useMatchCount(predicate: boolean, times: number): boolean {\n  const countRef = useRef(0);\n  const prevPredicateRef = useRef(false);\n\n  if (!prevPredicateRef.current && predicate && countRef.current < times) {\n    countRef.current += 1;\n  }\n\n  prevPredicateRef.current = predicate;\n\n  return countRef.current >= times;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ydGmLQB9\",\"input\":\"aOFCdA5h\",\"content\":\"ZEXtFSPZ\"};","import type { ChangeEvent } from 'react';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Checkbox.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  className?: string;\n  contentClassName?: string;\n  children?: TeactNode;\n  checked: boolean;\n  isDisabled?: boolean;\n  onChange: (isChecked: boolean) => void;\n};\n\nfunction Checkbox({\n  id,\n  className,\n  contentClassName,\n  children,\n  checked,\n  isDisabled,\n  onChange,\n}: OwnProps) {\n  const handleChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    onChange(e.currentTarget.checked);\n  });\n\n  return (\n    <label className={buildClassName(styles.wrapper, className)}>\n      <input\n        id={id}\n        type=\"checkbox\"\n        className={styles.input}\n        checked={checked}\n        disabled={isDisabled}\n        tabIndex={0}\n        onChange={!isDisabled ? handleChange : undefined}\n      />\n      <div className={buildClassName(styles.content, contentClassName)}>\n        {children}\n      </div>\n    </label>\n  );\n}\n\nexport default memo(Checkbox);\n","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"B2lzpHP0\",\"warning\":\"egsZTzXN\",\"accountLink\":\"mSBmBqo6\",\"accountLink_inner\":\"FsSJDg8c\",\"accountLinkInner\":\"FsSJDg8c\",\"penultimate\":\"T7L1H3Tm\"};","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { Account, AccountState } from '../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { selectCurrentAccountState, selectNetworkAccounts } from '../../../global/selectors';\nimport { getAccountTitle } from '../../../util/account';\nimport buildClassName from '../../../util/buildClassName';\nimport { IS_IOS_APP } from '../../../util/windowEnvironment';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './LogOutModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: (shouldCloseSettings: boolean) => void;\n  isInAppLock?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  hasManyAccounts: boolean;\n  accounts: Record<string, Account>;\n  accountStates: Record<string, AccountState>;\n  isBackupRequired?: boolean;\n}\n\ninterface LinkAccount {\n  id: string;\n  title: string;\n}\n\nfunction LogOutModal({\n  isOpen,\n  currentAccountId,\n  hasManyAccounts,\n  accounts,\n  accountStates,\n  isBackupRequired,\n  onClose,\n  isInAppLock,\n}: OwnProps & StateProps) {\n  const { signOut, switchAccount } = getActions();\n\n  const lang = useLang();\n  const [isLogOutFromAllAccounts, setIsLogOutFromAllAccounts] = useState<boolean>(IS_CORE_WALLET || !!isInAppLock);\n\n  const accountsWithoutBackups = useMemo(() => {\n    if (!hasManyAccounts) {\n      return [];\n    }\n\n    return Object.entries(accounts).reduce<LinkAccount[]>((acc, [id, account]) => {\n      if (id !== currentAccountId && accountStates[id]?.isBackupRequired) {\n        acc.push({\n          id,\n          title: getAccountTitle(account) ?? '',\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [accounts, accountStates, currentAccountId, hasManyAccounts]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsLogOutFromAllAccounts(IS_CORE_WALLET || !!isInAppLock);\n    }\n  }, [isOpen, isInAppLock]);\n\n  const handleSwitchAccount = (accountId: string) => {\n    onClose(false);\n    switchAccount({ accountId });\n  };\n\n  const handleLogOut = useLastCallback(() => {\n    onClose(!isLogOutFromAllAccounts && hasManyAccounts);\n    signOut({ level: IS_CORE_WALLET ? 'all' : isLogOutFromAllAccounts ? 'network' : 'account' });\n  });\n\n  const handleClose = useLastCallback(() => {\n    onClose(false);\n  });\n\n  function renderAccountLink(account: LinkAccount, idx: number) {\n    const { id, title } = account;\n\n    const fullClassName = buildClassName(\n      !isInAppLock && styles.accountLink,\n      idx + 2 === accountsWithoutBackups.length && styles.penultimate,\n    );\n\n    if (isInAppLock) {\n      return (\n        <span className={fullClassName}>\n          <strong>{title}</strong>\n        </span>\n      );\n    }\n\n    return (\n      <span className={fullClassName}>\n        <a\n          key={id}\n          href=\"#\"\n          className={styles.accountLink_inner}\n          onClick={(e: React.MouseEvent) => {\n            e.preventDefault();\n            handleSwitchAccount(id);\n          }}\n        >\n          {title}\n        </a>\n      </span>\n    );\n  }\n\n  function renderBackupWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b> {lang('$logout_without_backup_warning')}\n      </p>\n    );\n  }\n\n  function renderBackupForAccountsWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b>{' '}\n        {lang('$logout_accounts_without_backup_warning', {\n          links: <>{accountsWithoutBackups.map(renderAccountLink)}</>,\n        })}\n      </p>\n    );\n  }\n\n  const shouldRenderWarningForAnotherAccounts = isLogOutFromAllAccounts && accountsWithoutBackups.length > 0;\n  const shouldRenderWarningForCurrentAccount = isBackupRequired && !shouldRenderWarningForAnotherAccounts;\n  // Sibling button has wider text on iOS due to App Store \"Remove Wallet\" requirements\n  const cancelButtonClassNames = buildClassName(modalStyles.button, IS_IOS_APP && modalStyles.shortButton);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={IS_IOS_APP ? lang('Remove Wallet') : lang('Log Out')}\n      onClose={handleClose}\n      isInAppLock={isInAppLock}\n    >\n      <p className={buildClassName(modalStyles.text, modalStyles.text_noExtraMargin)}>\n        {renderText(lang('$logout_warning', '12/24'))}\n      </p>\n      {!(IS_CORE_WALLET || !!isInAppLock) && hasManyAccounts && (\n        <Checkbox\n          id=\"logount_all_accounts\"\n          className={styles.checkbox}\n          checked={isLogOutFromAllAccounts}\n          onChange={setIsLogOutFromAllAccounts}\n        >\n          {renderText(lang('$logout_confirm'))}\n        </Checkbox>\n      )}\n\n      {shouldRenderWarningForCurrentAccount && renderBackupWarning()}\n      {shouldRenderWarningForAnotherAccounts && renderBackupForAccountsWarning()}\n\n      <div className={modalStyles.buttons}>\n        <Button className={cancelButtonClassNames} onClick={handleClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isDestructive onClick={handleLogOut} className={modalStyles.button}>\n          {IS_IOS_APP ? lang('Remove Wallet') : lang('Exit')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const accounts = selectNetworkAccounts(global) || {};\n    const currentAccountState = selectCurrentAccountState(global);\n    const accountIds = Object.keys(accounts);\n    const hasManyAccounts = accountIds.length > 1;\n\n    return {\n      currentAccountId: global.currentAccountId!,\n      hasManyAccounts,\n      accounts,\n      accountStates: global.byAccountId,\n      isBackupRequired: currentAccountState?.isBackupRequired,\n    };\n  })(LogOutModal),\n);\n","type Parts = (string | false | undefined)[];\n\nexport default function buildStyle(...parts: Parts) {\n  return parts.filter(Boolean).join(';');\n}\n","import useShowTransition, { type HookParams } from './useShowTransition';\n\nexport default function useMediaTransition<RefType extends HTMLElement = HTMLDivElement>(\n  mediaData?: unknown,\n  options?: Partial<HookParams<RefType>>,\n) {\n  const isMediaReady = Boolean(mediaData);\n\n  const { ref } = useShowTransition<RefType>({\n    isOpen: isMediaReady,\n    noMountTransition: isMediaReady,\n    className: 'slow',\n    ...options,\n  });\n\n  return ref;\n}\n","type RLottieClass = typeof import('./RLottie').default;\n\nlet promise: Promise<RLottieClass> | undefined;\nlet RLottie: RLottieClass;\n\n// Time for the main interface to completely load\nconst LOTTIE_LOAD_DELAY = 3000;\n\nexport async function ensureRLottie() {\n  if (!promise) {\n    promise = import('./RLottie').then((module) => module.default);\n    RLottie = await promise;\n  }\n\n  return promise;\n}\n\nexport function getRLottie() {\n  return RLottie;\n}\n\nsetTimeout(ensureRLottie, LOTTIE_LOAD_DELAY);\n","export type RGBColor = [number, number, number];\n\nexport function hex2rgb(param: string): RGBColor {\n  const hex = param.replace('#', '');\n  return [\n    parseInt(hex.substring(0, 2), 16),\n    parseInt(hex.substring(2, 4), 16),\n    parseInt(hex.substring(4, 6), 16),\n  ];\n}\n\nexport default function rgbToHex(rgb: [number, number, number]) {\n  return `#${rgb.map((x) => {\n    const hex = x.toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n  }).join('')}`;\n}\n\nexport function euclideanDistance(color1: RGBColor, color2: RGBColor): number {\n  const r = 0.3 * ((color1[0] - color2[0]) ** 2);\n  const g = 0.59 * ((color1[1] - color2[1]) ** 2);\n  const b = 0.11 * ((color1[2] - color2[2]) ** 2);\n\n  return Math.sqrt(r + g + b);\n}\n\nfunction rgbToLab(rgb: RGBColor): RGBColor {\n  let [r, g, b] = rgb.map((value) => value / 255);\n  [r, g, b] = [r, g, b].map((value) => (value > 0.04045 ? ((value + 0.055) / 1.055) ** 2.4 : value / 12.92));\n\n  let x = r * 0.4124 + g * 0.3576 + b * 0.1805;\n  let y = r * 0.2126 + g * 0.7152 + b * 0.0722;\n  let z = r * 0.0193 + g * 0.1192 + b * 0.9505;\n\n  [x, y, z] = [x / 0.95047, y, z / 1.08883].map(\n    (value) => (value > 0.008856 ? value ** (1 / 3) : (7.787 * value) + 16 / 116),\n  );\n\n  return [(116 * y) - 16, 500 * (x - y), 200 * (y - z)];\n}\n\n/**\n * Calculates the perceptual difference between two RGB colors.\n *\n * Delta E is a metric for understanding how the human eye perceives color difference.\n * The following table provides a general guideline:\n *\n * Delta E  |  Perception\n * ---------|-------------------------------------------\n * <= 1.0   | Not perceptible by human eyes.\n * 1 - 2    | Perceptible through close observation.\n * 2 - 10   | Perceptible at a glance.\n * 11 - 49  | Colors are more similar than opposite.\n * 100      | Colors are exact opposite.\n *\n * @param rgbA The first color as an RGB array.\n * @param rgbB The second color as an RGB array.\n * @returns The Delta E value representing the color difference.\n */\nexport function deltaE(rgbA: RGBColor, rgbB: RGBColor): number {\n  const [l1, a1, b1] = rgbToLab(rgbA);\n  const [l2, a2, b2] = rgbToLab(rgbB);\n\n  const c1 = Math.sqrt(a1 * a1 + b1 * b1);\n  const c2 = Math.sqrt(a2 * a2 + b2 * b2);\n  const deltaC = c1 - c2;\n\n  const deltaL = l1 - l2;\n  const deltaA = a1 - a2;\n  const deltaB = b1 - b2;\n\n  const deltaH = Math.sqrt(deltaA * deltaA + deltaB * deltaB - deltaC * deltaC);\n\n  const sl = 1.0;\n  const sc = 1.0 + 0.045 * c1;\n  const sh = 1.0 + 0.015 * c1;\n\n  const deltaLKlsl = deltaL / sl;\n  const deltaCkcsc = deltaC / sc;\n  const deltaHkhsh = deltaH / sh;\n\n  return Math.sqrt(deltaLKlsl * deltaLKlsl + deltaCkcsc * deltaCkcsc + deltaHkhsh * deltaHkhsh);\n}\n","import {\n  getIsHeavyAnimating,\n  useCallback, useEffect, useMemo, useRef,\n} from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nexport const startCallbacks = createCallbackManager();\nexport const endCallbacks = createCallbackManager();\n\ngetIsHeavyAnimating.subscribe(() => {\n  if (getIsHeavyAnimating()) {\n    startCallbacks.runCallbacks();\n  } else {\n    endCallbacks.runCallbacks();\n  }\n});\n\nexport default function useHeavyAnimation(\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsHeavyAnimating()) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnEnd, lastOnStart]);\n}\n\n// TODO  `onFullyIdle`?\nexport function useThrottleForHeavyAnimation<T extends AnyToVoidFunction>(afterHeavyAnimation: T, deps: unknown[]) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(afterHeavyAnimation, deps);\n\n  const isScheduledRef = useRef(false);\n\n  return useMemo(() => {\n    return (...args: Parameters<T>) => {\n      if (!isScheduledRef.current) {\n        if (!getIsHeavyAnimating()) {\n          fnMemo(...args);\n          return;\n        }\n\n        isScheduledRef.current = true;\n\n        const removeCallback = endCallbacks.addCallback(() => {\n          fnMemo(...args);\n          removeCallback();\n          isScheduledRef.current = false;\n        });\n      }\n    };\n  }, [fnMemo]);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nconst startCallbacks = createCallbackManager();\nconst endCallbacks = createCallbackManager();\n\nlet timeout: number | undefined;\nlet isActive = false;\n\nconst usePriorityPlaybackCheck = (\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) => {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (isActive) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnStart, lastOnEnd]);\n};\n\nexport function isPriorityPlaybackActive() {\n  return isActive;\n}\n\nexport function dispatchPriorityPlaybackEvent() {\n  if (!isActive) {\n    isActive = true;\n    startCallbacks.runCallbacks();\n  }\n\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = undefined;\n  }\n\n  // Race condition may happen if another `dispatchPriorityPlaybackEvent` is called before `onEnd`\n  function onEnd() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n\n    isActive = false;\n    endCallbacks.runCallbacks();\n  }\n\n  return onEnd;\n}\n\nexport default usePriorityPlaybackCheck;\n","import { type ElementRef, useEffect } from '../lib/teact/teact';\n\nimport type { CallbackManager } from '../util/callbacks';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { useStateRef } from './useStateRef';\n\nconst elementObserverMap = new Map<HTMLElement, [IntersectionObserver, CallbackManager]>();\n\nexport default function useSharedIntersectionObserver(\n  refOrElement: ElementRef<HTMLElement> | HTMLElement | undefined,\n  onIntersectionChange: (entry: IntersectionObserverEntry) => void,\n  isDisabled = false,\n) {\n  const onIntersectionChangeRef = useStateRef(onIntersectionChange);\n\n  useEffect(() => {\n    const el = refOrElement && 'current' in refOrElement ? refOrElement.current : refOrElement;\n    if (!el || isDisabled) {\n      return undefined;\n    }\n\n    const callback: IntersectionObserverCallback = ([entry]) => {\n      // Ignore updates when element is not properly mounted (`display: none`)\n      if (!(entry.target as HTMLElement).offsetWidth || !(entry.target as HTMLElement).offsetHeight) {\n        return;\n      }\n\n      onIntersectionChangeRef.current(entry);\n    };\n\n    let [observer, callbackManager] = elementObserverMap.get(el) || [undefined, undefined];\n    if (!observer) {\n      callbackManager = createCallbackManager();\n      observer = new IntersectionObserver(callbackManager.runCallbacks);\n      elementObserverMap.set(el, [observer, callbackManager]);\n      observer.observe(el);\n    }\n    callbackManager!.addCallback(callback);\n\n    return () => {\n      callbackManager!.removeCallback(callback);\n      if (!callbackManager!.hasCallbacks()) {\n        observer.unobserve(el);\n        observer.disconnect();\n        elementObserverMap.delete(el);\n      }\n    };\n  }, [isDisabled, onIntersectionChangeRef, refOrElement]);\n}\n","import type { ElementRef, FC } from '../../lib/teact/teact';\nimport React, {\n  getIsHeavyAnimating, memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type RLottieInstance from '../../lib/rlottie/RLottie';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport { ensureRLottie, getRLottie } from '../../lib/rlottie/RLottie.async';\nimport buildStyle from '../../util/buildStyle';\nimport { hex2rgb } from '../../util/colors';\nimport generateUniqueId from '../../util/generateUniqueId';\nimport { IS_ELECTRON, IS_IOS } from '../../util/windowEnvironment';\n\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHeavyAnimation from '../../hooks/useHeavyAnimation';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePriorityPlaybackCheck, { isPriorityPlaybackActive } from '../../hooks/usePriorityPlaybackCheck';\nimport useSharedIntersectionObserver from '../../hooks/useSharedIntersectionObserver';\nimport { useStateRef } from '../../hooks/useStateRef';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useThrottledCallback from '../../hooks/useThrottledCallback';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport type OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  renderId?: string;\n  className?: string;\n  style?: string;\n  tgsUrl?: string;\n  play?: boolean | string;\n  playSegment?: [number, number];\n  speed?: number;\n  noLoop?: boolean;\n  size: number;\n  shouldStretch?: boolean;\n  quality?: number;\n  color?: string;\n  isLowPriority?: boolean;\n  forceOnHeavyAnimation?: boolean;\n  forceInBackground?: boolean;\n  sharedCanvas?: HTMLCanvasElement;\n  sharedCanvasCoords?: { x: number; y: number };\n  onClick?: NoneToVoidFunction;\n  onLoad?: NoneToVoidFunction;\n  onEnded?: NoneToVoidFunction;\n  onLoop?: NoneToVoidFunction;\n};\n\nconst THROTTLE_MS = 150;\n\nconst AnimatedSticker: FC<OwnProps> = ({\n  ref,\n  renderId,\n  className,\n  style,\n  tgsUrl,\n  play,\n  playSegment,\n  speed,\n  noLoop,\n  size,\n  shouldStretch,\n  quality,\n  isLowPriority,\n  color,\n  forceOnHeavyAnimation,\n  forceInBackground,\n  sharedCanvas,\n  sharedCanvasCoords,\n  onClick,\n  onLoad,\n  onEnded,\n  onLoop,\n}) => {\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const viewId = useUniqueId();\n\n  const [animation, setAnimation] = useState<RLottieInstance>();\n  const animationRef = useRef<RLottieInstance>();\n  const isFirstRender = useRef(true);\n\n  const playKey = play || (play === false ? false : playSegment);\n  const playRef = useStateRef(play);\n  const playSegmentRef = useStateRef(playSegment);\n\n  const rgbColor = useRef<[number, number, number] | undefined>();\n\n  const isUnmountedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      isUnmountedRef.current = true;\n    };\n  }, []);\n\n  useSyncEffect(() => {\n    if (color) {\n      const [r, g, b] = hex2rgb(color);\n      rgbColor.current = [r, g, b];\n    } else {\n      rgbColor.current = undefined;\n    }\n  }, [color]);\n\n  const init = useLastCallback(() => {\n    if (\n      animationRef.current\n      || isUnmountedRef.current\n      || !tgsUrl\n      || (sharedCanvas && (!sharedCanvasCoords || !sharedCanvas.offsetWidth || !sharedCanvas.offsetHeight))\n    ) {\n      return;\n    }\n\n    const container = containerRef.current || sharedCanvas;\n    if (!container) {\n      return;\n    }\n\n    const newAnimation = getRLottie().init(\n      tgsUrl,\n      container,\n      renderId || generateUniqueId(),\n      {\n        size,\n        shouldStretch,\n        noLoop,\n        quality,\n        isLowPriority,\n        coords: sharedCanvasCoords,\n      },\n      viewId,\n      rgbColor.current,\n      onLoad,\n      onEnded,\n      onLoop,\n    );\n\n    if (speed) {\n      newAnimation.setSpeed(speed);\n    }\n\n    setAnimation(newAnimation);\n    animationRef.current = newAnimation;\n  });\n\n  useEffect(() => {\n    if (getRLottie()) {\n      init();\n    } else {\n      void ensureRLottie().then(init);\n    }\n  }, [init, tgsUrl, sharedCanvas, sharedCanvasCoords]);\n\n  const throttledInit = useThrottledCallback(init, [init], THROTTLE_MS);\n  useSharedIntersectionObserver(sharedCanvas, throttledInit);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    animation.setColor(rgbColor.current);\n  }, [color, animation]);\n\n  useEffect(() => {\n    return () => {\n      animationRef.current?.removeView(viewId);\n    };\n  }, [viewId]);\n\n  const playAnimation = useLastCallback((shouldRestart = false) => {\n    if (\n      !animation\n      || !(playRef.current || playSegmentRef.current)\n      || isFrozen(forceOnHeavyAnimation, forceInBackground)\n    ) {\n      return;\n    }\n\n    if (playSegmentRef.current) {\n      animation.playSegment(playSegmentRef.current, shouldRestart, viewId);\n    } else {\n      animation.play(shouldRestart, viewId);\n    }\n  });\n\n  const playAnimationOnRaf = useLastCallback(() => {\n    requestMeasure(playAnimation);\n  });\n\n  const pauseAnimation = useLastCallback(() => {\n    if (animation?.isPlaying()) {\n      animation.pause(viewId);\n    }\n  });\n\n  useEffectWithPrevDeps(([prevNoLoop]) => {\n    if (prevNoLoop !== undefined && noLoop !== prevNoLoop) {\n      animation?.setNoLoop(noLoop);\n    }\n  }, [noLoop, animation]);\n\n  useEffectWithPrevDeps(([prevSharedCanvasCoords]) => {\n    if (prevSharedCanvasCoords !== undefined && sharedCanvasCoords !== prevSharedCanvasCoords) {\n      void animation?.setSharedCanvasCoords(viewId, sharedCanvasCoords);\n    }\n  }, [sharedCanvasCoords, viewId, animation]);\n\n  useEffect(() => {\n    if (!animation) {\n      return;\n    }\n\n    if (playKey) {\n      if (!isFrozen(forceOnHeavyAnimation, forceInBackground)) {\n        playAnimation(noLoop);\n      }\n    } else {\n      pauseAnimation();\n    }\n  }, [animation, playKey, noLoop, playAnimation, pauseAnimation, forceOnHeavyAnimation, forceInBackground]);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n    } else if (tgsUrl) {\n      animation.changeData(tgsUrl);\n      playAnimation(noLoop);\n    }\n  }, [playAnimation, animation, tgsUrl, noLoop]);\n\n  useHeavyAnimation(pauseAnimation, playAnimation, forceOnHeavyAnimation || IS_IOS || !playKey);\n  usePriorityPlaybackCheck(pauseAnimation, playAnimation, !playKey);\n  // Pausing frame may not happen in background,\n  // so we need to make sure it happens right after focusing,\n  // then we can play again.\n  useBackgroundMode(pauseAnimation, playAnimationOnRaf, !playKey || forceInBackground);\n\n  if (sharedCanvas) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      style={buildStyle(\n        size !== undefined && !shouldStretch && `width: ${size}px; height: ${size}px;`,\n        onClick && !IS_ELECTRON && 'cursor: pointer',\n        style,\n      )}\n      onClick={onClick}\n    />\n  );\n};\n\nexport default memo(AnimatedSticker);\n\nfunction isFrozen(forceOnHeavyAnimation = false, forceInBackground = false) {\n  return (!forceOnHeavyAnimation && !IS_IOS && getIsHeavyAnimating())\n    || isPriorityPlaybackActive()\n    || (!forceInBackground && isBackgroundModeActive());\n}\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\n\nimport type { OwnProps as AnimatedStickerProps } from './AnimatedSticker';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nexport type OwnProps =\n  Partial<AnimatedStickerProps>\n  & { noTransition?: boolean; nonInteractive?: boolean; size: number };\n\nfunction AnimatedIcon(props: OwnProps) {\n  const {\n    size,\n    play = true,\n    noLoop = true,\n    className,\n    noTransition,\n    nonInteractive,\n    onLoad,\n    onClick,\n    ...otherProps\n  } = props;\n  const [isAnimationLoaded, markAnimationLoaded] = useFlag(false);\n  const ref = useMediaTransition(noTransition || isAnimationLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markAnimationLoaded();\n    onLoad?.();\n  });\n\n  const [playKey, setPlayKey] = useState(String(Math.random()));\n\n  const handleClick = useLastCallback(() => {\n    if (play === true) {\n      setPlayKey(String(Math.random()));\n    }\n\n    onClick?.();\n  });\n\n  return (\n    <AnimatedSticker\n      ref={ref}\n      className={className}\n      size={size}\n      play={play === true ? playKey : play}\n      noLoop={noLoop}\n      onClick={!nonInteractive ? handleClick : undefined}\n      onLoad={handleLoad}\n\n      {...otherProps}\n    />\n  );\n}\n\nexport default memo(AnimatedIcon);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aNPdKxlh\",\"preview\":\"haM4SCte\"};","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { OwnProps as AnimatedIconProps } from './AnimatedIcon';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedIcon from './AnimatedIcon';\n\nimport styles from './AnimatedIconWithPreview.module.scss';\n\ntype OwnProps =\n  Partial<AnimatedIconProps>\n  & {\n    iconPreviewClass?: string;\n    previewUrl?: string;\n    thumbDataUri?: string;\n    noPreviewTransition?: boolean;\n  };\n\ninterface StateProps {\n  noAnimation?: boolean;\n}\n\nconst loadedPreviewUrls = new Set();\nconst DEFAULT_SIZE = 150;\n\nfunction AnimatedIconWithPreview(props: OwnProps & StateProps) {\n  const {\n    size = DEFAULT_SIZE,\n    previewUrl,\n    iconPreviewClass,\n    thumbDataUri,\n    className,\n    noAnimation,\n    noPreviewTransition,\n    ...otherProps\n  } = props;\n\n  const [isPreviewLoaded, markPreviewLoaded] = useFlag(\n    Boolean(iconPreviewClass) || Boolean(thumbDataUri) || loadedPreviewUrls.has(previewUrl),\n  );\n  const ref = useMediaTransition(isPreviewLoaded || noPreviewTransition);\n  const [isAnimationReady, markAnimationReady, markAnimationNotReady] = useFlag(false);\n\n  useEffect(() => {\n    if (noAnimation) {\n      markAnimationNotReady();\n    }\n  }, [markAnimationNotReady, noAnimation]);\n\n  const handlePreviewLoad = useLastCallback(() => {\n    markPreviewLoaded();\n    loadedPreviewUrls.add(previewUrl);\n  });\n\n  return (\n    <div\n      ref={!noPreviewTransition ? ref : undefined}\n      className={buildClassName(className, styles.root)}\n      style={buildStyle(\n        size !== undefined && !otherProps.shouldStretch && `width: ${size}px; height: ${size}px;`,\n      )}\n      data-preview-url={previewUrl}\n    >\n      {thumbDataUri && !previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img src={thumbDataUri} className={styles.preview} />\n      )}\n      {previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img\n          src={previewUrl}\n          className={styles.preview}\n          onLoad={handlePreviewLoad}\n        />\n      )}\n      {iconPreviewClass && !isAnimationReady && (\n        <i className={buildClassName(styles.preview, iconPreviewClass)} aria-hidden />\n      )}\n      {!noAnimation && <AnimatedIcon size={size} {...otherProps} onLoad={markAnimationReady} noTransition />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    noAnimation: global.settings.animationLevel === ANIMATION_LEVEL_MIN,\n  };\n})(AnimatedIconWithPreview));\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"LCV_ofSL\",\"input\":\"O85V9ajV\",\"error\":\"hhZYLQar\",\"disabled\":\"sAhrzaLV\",\"input_password\":\"MawuFp3r\",\"inputPassword\":\"MawuFp3r\",\"rich\":\"_JfHIm8U\",\"rich__value\":\"VyaUZjoQ\",\"richValue\":\"VyaUZjoQ\",\"rich__placeholder\":\"Fd5oMpfT\",\"richPlaceholder\":\"Fd5oMpfT\",\"isLoading\":\"oLkTqd0H\",\"large\":\"cp2mDTzv\",\"inputWrapperStatic\":\"_30fntf1\",\"input__wrapper\":\"Q9N6yVvw\",\"inputWrapper\":\"Q9N6yVvw\",\"input__wrapper_hasFocus\":\"xJ8YLUEc\",\"inputWrapperHasFocus\":\"xJ8YLUEc\",\"visibilityToggle\":\"tXgxOPqo\",\"visibilityToggle_push\":\"uXlOxDsj\",\"visibilityTogglePush\":\"uXlOxDsj\",\"fractional\":\"Q68NbVRf\",\"label\":\"dGKNlTrc\",\"label_error\":\"PFA7oH6u\",\"labelError\":\"PFA7oH6u\",\"label_forPassword\":\"i9G7zfox\",\"labelForPassword\":\"i9G7zfox\",\"label_errorUnderInput\":\"N0y6_7Nt\",\"labelErrorUnderInput\":\"N0y6_7Nt\",\"label_errorBottom\":\"fAnhlq4h\",\"labelErrorBottom\":\"fAnhlq4h\",\"swapCorner\":\"hcCyNq6V\",\"swapCorner_error\":\"tRQeFT_t\",\"swapCornerError\":\"tRQeFT_t\",\"mask\":\"dYsHTHj3\",\"inputContainer\":\"vjJxciaS\",\"input_withValueOverlay\":\"qHmkgxAZ\",\"inputWithValueOverlay\":\"qHmkgxAZ\",\"valueOverlay\":\"yLnZrd5z\",\"static\":\"PXCfAg02\"};","import type {\n  ChangeEvent, FormEvent, HTMLAttributes, KeyboardEvent, RefObject,\n} from 'react';\nimport type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLInputElement | HTMLTextAreaElement>;\n  id?: string;\n  type?: 'text' | 'password';\n  label?: TeactNode;\n  placeholder?: string;\n  valueOverlay?: TeactNode;\n  value?: string | number;\n  inputMode?: 'numeric' | 'text' | 'search';\n  maxLength?: number;\n  isRequired?: boolean;\n  isDisabled?: boolean;\n  isMultiline?: boolean;\n  hasError?: boolean;\n  error?: string;\n  className?: string;\n  wrapperClassName?: string;\n  autoCapitalize?: string;\n  autoComplete?: string;\n  autoCorrect?: boolean;\n  isStatic?: boolean;\n  enterKeyHint?: HTMLAttributes<HTMLInputElement>['enterKeyHint'];\n  inputArg?: any;\n  children?: TeactNode;\n  onInput: (value: string, inputArg?: any) => void;\n  onKeyDown?: (e: KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onFocus?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onBlur?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n};\n\nfunction Input({\n  ref,\n  id,\n  label,\n  placeholder,\n  valueOverlay,\n  inputMode,\n  isRequired,\n  isDisabled,\n  isMultiline,\n  hasError,\n  type = 'text',\n  error,\n  value = '',\n  maxLength,\n  inputArg,\n  className,\n  wrapperClassName,\n  autoCapitalize,\n  autoComplete,\n  autoCorrect,\n  isStatic,\n  enterKeyHint,\n  children,\n  onInput,\n  onKeyDown,\n  onFocus,\n  onBlur,\n}: OwnProps) {\n  const lang = useLang();\n  const [isPasswordVisible, setIsPasswordVisible] = useState<boolean>(false);\n  const [hasFocus, markHasFocus, unmarkHasFocus] = useFlag(false);\n\n  const showValueOverlay = Boolean(valueOverlay && !hasFocus);\n\n  const handleInput = (e: FormEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    onInput(e.currentTarget.value, inputArg);\n  };\n\n  const handleTogglePasswordVisibility = () => {\n    setIsPasswordVisible(!isPasswordVisible);\n  };\n\n  const handleChange = (e: ChangeEvent<HTMLTextAreaElement>) => {\n    const { currentTarget } = e;\n    const { scrollHeight } = currentTarget;\n\n    requestMutation(() => {\n      currentTarget.style.height = '0';\n      currentTarget.style.height = `${scrollHeight}px`;\n    });\n  };\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    markHasFocus();\n    onFocus?.(e);\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    unmarkHasFocus();\n    onBlur?.(e);\n  };\n\n  const finalType = type === 'text' || isPasswordVisible ? 'text' : 'password';\n  const inputFullClass = buildClassName(\n    styles.input,\n    className,\n    type === 'password' && styles.input_password,\n    (hasError || error) && styles.error,\n    isDisabled && styles.disabled,\n    valueOverlay && styles.input_withvalueOverlay,\n  );\n  const labelFullClass = buildClassName(\n    styles.label,\n    (hasError || error) && styles.error,\n    (hasError || error) && type === 'password' && styles.label_forPassword,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, wrapperClassName)}>\n      {error && !!label && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {!!label && (\n        <label className={labelFullClass} htmlFor={id}>\n          {label}\n        </label>\n      )}\n      <div className={styles.inputContainer}>\n        {isMultiline ? (\n          <textarea\n            ref={ref as RefObject<HTMLTextAreaElement>}\n            id={id}\n            className={inputFullClass}\n            value={value}\n            disabled={isDisabled}\n            maxLength={maxLength}\n            autoComplete={autoComplete}\n            onInput={handleInput}\n            onChange={handleChange}\n            onKeyDown={onKeyDown}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            tabIndex={0}\n            required={isRequired}\n            placeholder={valueOverlay ? undefined : placeholder}\n          />\n        ) : (\n          <input\n            ref={ref as RefObject<HTMLInputElement>}\n            id={id}\n            className={inputFullClass}\n            type={finalType}\n            value={value}\n            disabled={isDisabled}\n            inputMode={inputMode}\n            maxLength={maxLength}\n            autoCapitalize={autoCapitalize}\n            autoComplete={autoComplete}\n            autoCorrect={autoCorrect}\n            spellCheck={autoCorrect}\n            onInput={handleInput}\n            onKeyDown={onKeyDown}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            tabIndex={0}\n            required={isRequired}\n            placeholder={valueOverlay ? undefined : placeholder}\n            enterKeyHint={enterKeyHint}\n          />\n        )}\n\n        {showValueOverlay && (\n          <div className={buildClassName(styles.valueOverlay, isStatic && styles.static)}>\n            {valueOverlay}\n          </div>\n        )}\n      </div>\n\n      {type === 'password' && (\n        <button\n          className={buildClassName(styles.visibilityToggle, label && styles.visibilityToggle_push)}\n          type=\"button\"\n          onClick={handleTogglePasswordVisibility}\n          aria-label={lang('Change password visibility')}\n          tabIndex={-1}\n        >\n          <i className={isPasswordVisible ? 'icon-eye' : 'icon-eye-closed'} aria-hidden />\n        </button>\n      )}\n      {children}\n      {error && !label && (\n        <label className={buildClassName(styles.label, styles.label_errorBottom, styles.error)} htmlFor={id}>\n          {error}\n        </label>\n      )}\n    </div>\n  );\n}\n\nexport default memo(Input);\n","// Sometimes event is fired earlier than animation completes\nconst ANIMATION_END_DELAY = 50;\n\nexport function waitForTransitionEnd(\n  node: Node, handler: NoneToVoidFunction, propertyName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('transitionend', node, handler, propertyName, fallbackMs);\n}\n\nexport function waitForAnimationEnd(\n  node: Node, handler: NoneToVoidFunction, animationName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('animationend', node, handler, animationName, fallbackMs);\n}\n\nfunction waitForEndEvent(\n  eventType: 'transitionend' | 'animationend',\n  node: Node,\n  handler: NoneToVoidFunction,\n  detailedName?: string,\n  fallbackMs?: number,\n) {\n  let isHandled = false;\n\n  function cleanup() {\n    node.removeEventListener(eventType, handleAnimationEnd);\n  }\n\n  function handleAnimationEnd(e: TransitionEvent | AnimationEvent | Event) {\n    if (isHandled || e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (detailedName && (\n      (e instanceof TransitionEvent && e.propertyName === detailedName)\n      || (e instanceof AnimationEvent && e.animationName === detailedName)\n    )) {\n      return;\n    }\n\n    isHandled = true;\n\n    cleanup();\n\n    setTimeout(() => {\n      handler();\n    }, ANIMATION_END_DELAY);\n  }\n\n  node.addEventListener(eventType, handleAnimationEnd);\n\n  if (fallbackMs) {\n    setTimeout(() => {\n      if (isHandled) return;\n\n      cleanup();\n\n      handler();\n    }, fallbackMs);\n  }\n\n  return cleanup;\n}\n","import type { MoveOffsets } from './captureEvents';\n\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animateNumber, timingFunctions } from './animation';\nimport { captureEvents, SwipeDirection } from './captureEvents';\nimport { waitForAnimationEnd } from './cssAnimationEndListeners';\nimport { clamp } from './math';\nimport { IS_IOS } from './windowEnvironment';\n\nconst INERTIA_DURATION = 300;\nconst INERTIA_EASING = timingFunctions.easeOutCubic;\n\nexport const SWIPE_DISABLED_CLASS_NAME = 'swipe-disabled';\n\nlet isSwipeActive = false;\nlet swipeOffsets: MoveOffsets | undefined;\nlet onDrag: ((offsets: MoveOffsets) => void) | undefined;\nlet onRelease: ((onCancel: NoneToVoidFunction) => void) | undefined;\nlet cancelCurrentReleaseAnimation: NoneToVoidFunction | undefined;\n\nexport function captureControlledSwipe(\n  element: HTMLElement, options: {\n    onSwipeLeftStart?: NoneToVoidFunction;\n    onSwipeRightStart?: NoneToVoidFunction;\n    onCancel: NoneToVoidFunction;\n  },\n) {\n  return captureEvents(element, {\n    swipeThreshold: 10,\n\n    withNativeDrag: true,\n    excludedClosestSelector: `.${SWIPE_DISABLED_CLASS_NAME}`,\n\n    onSwipe(e, direction, offsets) {\n      if (direction === SwipeDirection.Left) {\n        options.onSwipeLeftStart?.();\n      } else if (direction === SwipeDirection.Right) {\n        options.onSwipeRightStart?.();\n      } else {\n        return false;\n      }\n\n      if (IS_IOS) {\n        isSwipeActive = true;\n        swipeOffsets = offsets;\n      }\n\n      return true;\n    },\n\n    onDrag(e, captureEvent, offsets) {\n      if (!isSwipeActive) return;\n\n      onDrag?.(offsets);\n    },\n\n    onRelease() {\n      if (!isSwipeActive) return;\n\n      isSwipeActive = false;\n\n      onRelease?.(options.onCancel);\n\n      onDrag = undefined;\n      onRelease = undefined;\n    },\n  });\n}\n\nexport function allowSwipeControlForTransition(\n  currentSlide: HTMLElement,\n  nextSlide: HTMLElement,\n  onCancelForTransition: NoneToVoidFunction,\n) {\n  cancelCurrentReleaseAnimation?.();\n\n  if (!isSwipeActive) return;\n\n  const targetPosition = extractAnimationEndPosition(currentSlide);\n  if (!targetPosition) return;\n\n  currentSlide.getAnimations().forEach((a) => a.pause());\n  nextSlide.getAnimations().forEach((a) => a.pause());\n\n  currentSlide.style.animationTimingFunction = 'linear';\n  nextSlide.style.animationTimingFunction = 'linear';\n\n  let currentDirection: 1 | -1 | undefined;\n\n  requestMeasure(() => {\n    const computedStyle = getComputedStyle(currentSlide);\n    const initialPositionPx = extractPositionFromMatrix(computedStyle.transform, targetPosition.axis);\n    const targetPositionPx = targetPosition.units === 'px'\n      ? targetPosition.value\n      : ((targetPosition.value / 100) * (\n        targetPosition.axis === 'X' ? currentSlide.offsetWidth : currentSlide.offsetHeight\n      ));\n    const distance = targetPositionPx - initialPositionPx;\n\n    let progress = 0;\n\n    onDrag = ({ dragOffsetX, dragOffsetY }) => {\n      const dragOffset = targetPosition.axis === 'X'\n        ? dragOffsetX - swipeOffsets!.dragOffsetX\n        : dragOffsetY - swipeOffsets!.dragOffsetY;\n\n      const newProgress = clamp(dragOffset / distance, 0, 1);\n      currentDirection = newProgress > progress ? 1 : -1;\n      progress = newProgress;\n\n      updateAnimationProgress([currentSlide, nextSlide], progress);\n    };\n\n    onRelease = (onCancelForClient: NoneToVoidFunction) => {\n      const isRevertSwipe = currentDirection === -1;\n\n      function cleanup() {\n        currentSlide.getAnimations().forEach((a) => a.cancel());\n        nextSlide.getAnimations().forEach((a) => a.cancel());\n\n        requestMutation(() => {\n          currentSlide.style.animationTimingFunction = '';\n          nextSlide.style.animationTimingFunction = '';\n        });\n      }\n\n      if (!isRevertSwipe) {\n        // For some reason animations are not cleared when CSS class is removed\n        waitForAnimationEnd(currentSlide, cleanup);\n      }\n\n      cancelCurrentReleaseAnimation = animateNumber({\n        from: progress,\n        to: isRevertSwipe ? 0 : 1,\n        duration: INERTIA_DURATION,\n        timing: INERTIA_EASING,\n        onUpdate(releaseProgress) {\n          updateAnimationProgress([currentSlide, nextSlide], releaseProgress);\n        },\n        onEnd(isCanceled = false) {\n          cancelCurrentReleaseAnimation = undefined;\n\n          if (isCanceled || isRevertSwipe) {\n            cleanup();\n            onCancelForTransition();\n            onCancelForClient();\n          }\n        },\n      });\n    };\n  });\n}\n\nfunction updateAnimationProgress(elements: HTMLElement[], progress: number) {\n  elements.map((e) => e.getAnimations()).flat().forEach((animation) => {\n    animation.currentTime = (animation.effect!.getTiming().duration as number) * progress;\n  });\n}\n\nfunction extractAnimationEndPosition(element: HTMLElement) {\n  for (const animation of element.getAnimations()) {\n    if (!(animation.effect instanceof KeyframeEffect)) continue;\n\n    for (const keyframe of animation.effect.getKeyframes()) {\n      if (keyframe.offset !== 1 || !keyframe.transform) continue;\n\n      const position = extractPositionFromTransform(keyframe.transform as string);\n      if (position) {\n        return position;\n      }\n    }\n  }\n\n  return undefined;\n}\n\nfunction extractPositionFromTransform(transformRule: string) {\n  const match = transformRule.match(/([XY])\\((-?\\d+)(%|px)\\)/);\n  if (!match) return undefined;\n\n  return {\n    axis: match[1] as 'X' | 'Y',\n    value: Number(match[2]),\n    units: match[3],\n  };\n}\n\nfunction extractPositionFromMatrix(transform: string, axis: 'X' | 'Y') {\n  const matrix = transform.slice(7, -1).split(',').map(Number);\n  return matrix[axis === 'X' ? 4 : 5];\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\n// Use previous value during animation without checking for presence\nexport function usePrevDuringAnimationSimple<T>(current: T, durationMs: number = 300): T {\n  const [prev, setPrev] = useState<T>(current);\n\n  useEffect(() => {\n    if (current === prev) return undefined;\n    const timeoutId = window.setTimeout(() => {\n      setPrev(current);\n    }, durationMs);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [current, durationMs, prev]);\n\n  return prev;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Lbq2gMzt\",\"title\":\"r4k7w6HQ\",\"dots\":\"__vkSP7q\",\"dotsError\":\"LI_tisFH\",\"shakeAnimation\":\"RrETnvf4\",\"dotsLoading\":\"HnSSbC5N\",\"spin\":\"WMJcrrfv\",\"appear\":\"rG3vC5Ev\",\"dot\":\"CH4h9HQz\",\"dotLoadingAnimation\":\"NJ5ujtVf\",\"firstDotLoadingAnimation\":\"rW78LwUS\",\"secondDotLoadingAnimation\":\"WITK5GhH\",\"thirdDotLoadingAnimation\":\"sRNwZpZb\",\"fourthDotLoadingAnimation\":\"_jBlKjPP\",\"dotFilled\":\"r_kAZ0Dm\",\"scaleAnimation\":\"AS8bxSS0\",\"grid\":\"CUQ0KIAI\",\"button\":\"lnaBx8hc\",\"minified\":\"MGnO4hqt\",\"buttonActive\":\"qBoIeNzV\",\"buttonHidden\":\"c_i4rWyo\",\"buttonDanger\":\"nvnxE80n\",\"error\":\"jLzZScDB\",\"success\":\"oVsGIXA4\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  value?: any;\n  children?: TeactNode;\n  className?: string;\n  isDisabled?: boolean;\n  onClick?: (value?: any) => void;\n}\n\nconst CLICKED_TIMEOUT_MS = 200;\n\nfunction PinPadButton({\n  value, children, className, isDisabled, onClick,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = () => {\n    void vibrate();\n    onClick?.(value);\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT_MS);\n  };\n  return (\n    <div\n      onMouseDown={!isDisabled ? handleClick : undefined}\n      className={buildClassName(styles.button, isClicked && styles.buttonActive, className)}\n      role=\"button\"\n      tabIndex={0}\n    >\n      {value || children}\n    </div>\n  );\n}\n\nexport default memo(PinPadButton);\n","import type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { beginHeavyAnimation, useEffect, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles, toggleExtraClass } from '../../lib/teact/teact-dom';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport { waitForAnimationEnd, waitForTransitionEnd } from '../../util/cssAnimationEndListeners';\nimport { SECOND } from '../../util/dateFormat';\nimport forceReflow from '../../util/forceReflow';\nimport { allowSwipeControlForTransition } from '../../util/swipeController';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Transition.scss';\n\ntype AnimationName = (\n  'none' | 'slide' | 'slideRtl' | 'slideFade' | 'zoomFade' | 'slideLayers'\n  | 'fade' | 'pushSlide' | 'reveal' | 'slideOptimized' | 'slideOptimizedRtl' | 'semiFade'\n  | 'slideVertical' | 'slideVerticalFade' | 'slideFadeAndroid'\n  );\nexport type ChildrenFn = (isActive: boolean, isFrom: boolean, currentKey: number, activeKey: number) => TeactNode;\nexport type TransitionProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  activeKey: number;\n  prevKey?: number;\n  nextKey?: number;\n  name: AnimationName;\n  direction?: 'auto' | 'inverse' | 1 | -1;\n  renderCount?: number;\n  shouldRestoreHeight?: boolean;\n  shouldCleanup?: boolean;\n  cleanupExceptionKey?: number;\n  // Used by async components which are usually remounted during first animation\n  shouldWrap?: boolean;\n  wrapExceptionKey?: number;\n  id?: string;\n  className?: string;\n  slideClassName?: string;\n  withSwipeControl?: boolean;\n  onStart?: NoneToVoidFunction;\n  onStop?: NoneToVoidFunction;\n  onContainerClick?: NoneToVoidFunction;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n  // Should be not a falsy value, otherwise some transitions will be delayed\n  children: TeactNode | ChildrenFn;\n};\n\nconst FALLBACK_ANIMATION_END = SECOND;\nconst CLASSES = {\n  slide: 'Transition_slide',\n  active: 'Transition_slide-active',\n  from: 'Transition_slide-from',\n  to: 'Transition_slide-to',\n  inactive: 'Transition_slide-inactive',\n};\n\nexport const ACTIVE_SLIDE_CLASS_NAME = CLASSES.active;\nexport const TO_SLIDE_CLASS_NAME = CLASSES.to;\n\nfunction Transition({\n  ref,\n  activeKey,\n  nextKey,\n  prevKey,\n  name,\n  direction = 'auto',\n  renderCount,\n  shouldRestoreHeight,\n  shouldCleanup,\n  cleanupExceptionKey,\n  shouldWrap,\n  wrapExceptionKey,\n  id,\n  className,\n  slideClassName,\n  withSwipeControl,\n  onStart,\n  onStop,\n  onContainerClick,\n  onScroll,\n  children,\n}: TransitionProps) {\n  const currentKeyRef = useRef<number>();\n  // No need for a container to update on change\n  const { animationLevel } = getGlobal().settings;\n  const shouldDisableAnimation = animationLevel === ANIMATION_LEVEL_MIN;\n\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const rendersRef = useRef<Record<number, TeactNode | ChildrenFn>>({});\n  const prevActiveKey = usePrevious<any>(activeKey);\n  const forceUpdate = useForceUpdate();\n  const isAnimatingRef = useRef(false);\n  const isSwipeJustCancelledRef = useRef(false);\n\n  const hasActiveKeyChanged = prevActiveKey !== undefined && activeKey !== prevActiveKey;\n\n  if (!renderCount && hasActiveKeyChanged) {\n    rendersRef.current = { [prevActiveKey]: rendersRef.current[prevActiveKey] };\n  }\n\n  rendersRef.current[activeKey] = children;\n  if (prevKey) {\n    rendersRef.current[prevKey] = children;\n  }\n  if (nextKey) {\n    rendersRef.current[nextKey] = children;\n  }\n\n  const isBackwards = (\n    direction === -1\n    || (direction === 'auto' && prevActiveKey > activeKey)\n    || (direction === 'inverse' && prevActiveKey < activeKey)\n  );\n\n  useLayoutEffect(() => {\n    function cleanup() {\n      if (!shouldCleanup) {\n        return;\n      }\n\n      const preservedRender = cleanupExceptionKey !== undefined ? rendersRef.current[cleanupExceptionKey] : undefined;\n\n      rendersRef.current = preservedRender ? { [cleanupExceptionKey!]: preservedRender } : {};\n\n      forceUpdate();\n    }\n\n    const isSlideOptimized = name === 'slideOptimized' || name === 'slideOptimizedRtl';\n    const container = containerRef.current!;\n    const keys = Object.keys(rendersRef.current).map(Number);\n    const prevActiveIndex = renderCount ? prevActiveKey : keys.indexOf(prevActiveKey);\n    const activeIndex = renderCount ? activeKey : keys.indexOf(activeKey);\n\n    const childNodes = Array.from(container.childNodes);\n    if (!childNodes.length) {\n      return;\n    }\n\n    const childElements = Array.from(container.children) as HTMLElement[];\n    childElements.forEach((el) => {\n      addExtraClass(el, CLASSES.slide);\n\n      if (slideClassName) {\n        slideClassName.split(/\\s+/).forEach((token) => {\n          addExtraClass(el, token);\n        });\n      }\n    });\n\n    if (!hasActiveKeyChanged) {\n      if (isAnimatingRef.current) {\n        return;\n      }\n\n      childElements.forEach((childElement) => {\n        if (childElement === childNodes[activeIndex]) {\n          addExtraClass(childElement, CLASSES.active);\n\n          if (isSlideOptimized) {\n            setExtraStyles(childElement, {\n              transition: 'none',\n              transform: 'translate3d(0, 0, 0)',\n            });\n          }\n        } else if (!isSlideOptimized) {\n          addExtraClass(childElement, CLASSES.inactive);\n        }\n      });\n\n      return;\n    }\n\n    currentKeyRef.current = activeKey;\n\n    if (isSlideOptimized) {\n      if (!childNodes[activeIndex]) {\n        return;\n      }\n\n      performSlideOptimized(\n        shouldDisableAnimation,\n        name,\n        isBackwards,\n        cleanup,\n        activeKey,\n        currentKeyRef,\n        isAnimatingRef,\n        container,\n        childNodes[activeIndex],\n        childNodes[prevActiveIndex],\n        shouldRestoreHeight,\n        onStart,\n        onStop,\n      );\n\n      return;\n    }\n\n    if (name === 'none' || shouldDisableAnimation || isSwipeJustCancelledRef.current) {\n      if (isSwipeJustCancelledRef.current) {\n        isSwipeJustCancelledRef.current = false;\n      }\n\n      childNodes.forEach((node, i) => {\n        if (node instanceof HTMLElement) {\n          removeExtraClass(node, CLASSES.from);\n          removeExtraClass(node, CLASSES.to);\n          toggleExtraClass(node, CLASSES.active, i === activeIndex);\n          toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n        }\n      });\n\n      cleanup();\n\n      return;\n    }\n\n    childNodes.forEach((node, i) => {\n      if (node instanceof HTMLElement) {\n        removeExtraClass(node, CLASSES.active);\n        toggleExtraClass(node, CLASSES.from, i === prevActiveIndex);\n        toggleExtraClass(node, CLASSES.to, i === activeIndex);\n        toggleExtraClass(node, CLASSES.inactive, i !== prevActiveIndex && i !== activeIndex);\n      }\n    });\n\n    isAnimatingRef.current = true;\n    const endHeavyAnimation = beginHeavyAnimation();\n    onStart?.();\n\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    function onAnimationEnd() {\n      const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`);\n      const { clientHeight } = activeElement || {};\n\n      requestMutation(() => {\n        if (activeKey !== currentKeyRef.current) {\n          endHeavyAnimation();\n          return;\n        }\n\n        removeExtraClass(container, `Transition-${name}`);\n        removeExtraClass(container, `Transition-${name}Backwards`);\n\n        childNodes.forEach((node, i) => {\n          if (node instanceof HTMLElement) {\n            removeExtraClass(node, CLASSES.from);\n            removeExtraClass(node, CLASSES.to);\n            toggleExtraClass(node, CLASSES.active, i === activeIndex);\n            toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n          }\n        });\n\n        if (shouldRestoreHeight) {\n          if (activeElement) {\n            setExtraStyles(activeElement, { height: 'auto' });\n            setExtraStyles(container, { height: `${clientHeight}px` });\n          }\n        }\n\n        onStop?.();\n        endHeavyAnimation();\n        isAnimatingRef.current = false;\n\n        cleanup();\n      });\n    }\n\n    const watchedNode = (name === 'reveal' || name === 'slideFadeAndroid') && isBackwards\n      ? childNodes[prevActiveIndex]\n      : childNodes[activeIndex];\n\n    if (watchedNode) {\n      if (withSwipeControl && childNodes[prevActiveIndex]) {\n        const giveUpAnimationEnd = waitForAnimationEnd(watchedNode, onAnimationEnd);\n\n        allowSwipeControlForTransition(\n          childNodes[prevActiveIndex] as HTMLElement,\n          childNodes[activeIndex] as HTMLElement,\n          () => {\n            giveUpAnimationEnd();\n            isSwipeJustCancelledRef.current = true;\n            onStop?.();\n            endHeavyAnimation();\n            isAnimatingRef.current = false;\n          },\n        );\n      } else {\n        waitForAnimationEnd(watchedNode, onAnimationEnd, undefined, FALLBACK_ANIMATION_END);\n      }\n    } else {\n      onAnimationEnd();\n    }\n  }, [\n    activeKey,\n    nextKey,\n    prevActiveKey,\n    hasActiveKeyChanged,\n    isBackwards,\n    name,\n    onStart,\n    onStop,\n    renderCount,\n    shouldRestoreHeight,\n    shouldCleanup,\n    slideClassName,\n    cleanupExceptionKey,\n    shouldDisableAnimation,\n    forceUpdate,\n    withSwipeControl,\n  ]);\n\n  useEffect(() => {\n    if (!shouldRestoreHeight) {\n      return;\n    }\n\n    const container = containerRef.current!;\n    const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`)\n      || container.querySelector<HTMLDivElement>(`.${CLASSES.from}`);\n    if (!activeElement) {\n      return;\n    }\n\n    const { clientHeight } = activeElement || {};\n    if (!clientHeight) {\n      return;\n    }\n\n    requestMutation(() => {\n      setExtraStyles(activeElement, { height: 'auto' });\n      setExtraStyles(container, {\n        height: `${clientHeight}px`,\n        flexBasis: `${clientHeight}px`,\n      });\n    });\n  }, [shouldRestoreHeight, children]);\n\n  const asFastList = !renderCount;\n  const renders = rendersRef.current;\n  const renderKeys = Object.keys(renderCount ? new Array(renderCount).fill(undefined) : renders).map(Number);\n  const contents = renderKeys.map((key) => {\n    const render = renders[key];\n    if (!render) {\n      return undefined;\n    }\n\n    const rendered = typeof render === 'function'\n      ? render(key === activeKey, key === prevActiveKey, key, activeKey)\n      : render;\n\n    return (shouldWrap && key !== wrapExceptionKey) || asFastList\n      ? <div key={key} teactOrderKey={key}>{rendered}</div>\n      : rendered;\n  });\n\n  return (\n    <div\n      ref={containerRef}\n      onScroll={onScroll}\n      onClick={onContainerClick}\n      id={id}\n      className={buildClassName('Transition', className)}\n      teactFastList={asFastList}\n    >\n      {contents}\n    </div>\n  );\n}\n\nexport default Transition;\n\nfunction performSlideOptimized(\n  shouldDisableAnimation: boolean,\n  name: 'slideOptimized' | 'slideOptimizedRtl',\n  isBackwards: boolean,\n  cleanup: NoneToVoidFunction,\n  activeKey: number,\n  currentKeyRef: { current: number | undefined },\n  isAnimatingRef: { current: boolean | undefined },\n  container: HTMLElement,\n  toSlide: ChildNode,\n  fromSlide?: ChildNode,\n  shouldRestoreHeight?: boolean,\n  onStart?: NoneToVoidFunction,\n  onStop?: NoneToVoidFunction,\n) {\n  if (shouldDisableAnimation) {\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    if (fromSlide instanceof HTMLElement) {\n      removeExtraClass(fromSlide, CLASSES.active);\n      setExtraStyles(fromSlide, {\n        transition: 'none',\n        transform: '',\n      });\n    }\n\n    if (toSlide instanceof HTMLElement) {\n      addExtraClass(toSlide, CLASSES.active);\n      setExtraStyles(toSlide, {\n        transition: 'none',\n        transform: 'translate3d(0, 0, 0)',\n      });\n    }\n\n    cleanup();\n\n    return;\n  }\n\n  if (name === 'slideOptimizedRtl') {\n    isBackwards = !isBackwards;\n  }\n\n  isAnimatingRef.current = true;\n  const endHeavyAnimation = beginHeavyAnimation();\n  onStart?.();\n\n  toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n  toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n  if (fromSlide instanceof HTMLElement) {\n    setExtraStyles(fromSlide, {\n      transition: 'none',\n      transform: 'translate3d(0, 0, 0)',\n    });\n  }\n\n  if (toSlide instanceof HTMLElement) {\n    setExtraStyles(toSlide, {\n      transition: 'none',\n      transform: `translate3d(${isBackwards ? '-' : ''}100%, 0, 0)`,\n    });\n  }\n\n  requestForcedReflow(() => {\n    if (toSlide instanceof HTMLElement) {\n      forceReflow(toSlide);\n    }\n\n    return () => {\n      if (fromSlide instanceof HTMLElement) {\n        removeExtraClass(fromSlide, CLASSES.active);\n        setExtraStyles(fromSlide, {\n          transition: '',\n          transform: `translate3d(${isBackwards ? '' : '-'}100%, 0, 0)`,\n        });\n      }\n\n      if (toSlide instanceof HTMLElement) {\n        addExtraClass(toSlide, CLASSES.active);\n        setExtraStyles(toSlide, {\n          transition: '',\n          transform: 'translate3d(0, 0, 0)',\n        });\n      }\n    };\n  });\n\n  waitForTransitionEnd(toSlide, () => {\n    const clientHeight = toSlide instanceof HTMLElement ? toSlide.clientHeight : undefined;\n\n    requestMutation(() => {\n      if (activeKey !== currentKeyRef.current) {\n        endHeavyAnimation();\n        return;\n      }\n\n      if (fromSlide instanceof HTMLElement) {\n        setExtraStyles(fromSlide, {\n          transition: 'none',\n          transform: '',\n        });\n      }\n\n      if (shouldRestoreHeight && clientHeight && toSlide instanceof HTMLElement) {\n        setExtraStyles(toSlide, { height: 'auto' });\n        setExtraStyles(container, { height: `${clientHeight}px` });\n      }\n\n      onStop?.();\n      endHeavyAnimation();\n      isAnimatingRef.current = false;\n\n      cleanup();\n    });\n  });\n}\n","// Used before applying CSS transition\nexport default function forceReflow(element: HTMLElement) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  element.offsetWidth;\n}\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION } from '../../config';\nimport { getIsFaceIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnError } from '../../util/haptics';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport { SWIPE_DISABLED_CLASS_NAME } from '../../util/swipeController';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { useMatchCount } from '../../hooks/useMatchCount';\nimport { usePrevDuringAnimationSimple } from '../../hooks/usePrevDuringAnimationSimple';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport PinPadButton from './PinPadButton';\nimport Transition from './Transition';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  title: string;\n  type?: 'error' | 'success';\n  value: string;\n  length?: number;\n  resetStateDelayMs?: number;\n  className?: string;\n  isMinified?: boolean;\n  topContent?: TeactJsx;\n  onBiometricsClick?: NoneToVoidFunction;\n  onChange: (value: string) => void;\n  onClearError?: NoneToVoidFunction;\n  onSubmit: (pin: string) => void;\n  onLogOutClick?: NoneToVoidFunction;\n}\n\ntype StateProps = Pick<GlobalState['settings'], 'authConfig'> & {\n  isPinAccepted?: boolean;\n};\n\nconst DEFAULT_PIN_LENGTH = 4;\nconst RESET_STATE_DELAY_MS = 1500;\n// Should match duration from `--layer-transition` CSS variable\nconst STATE_ANIMATION_DURATION_MS = IS_IOS ? 650 : 300;\n\nfunction PinPad({\n  isActive,\n  title,\n  type,\n  value,\n  resetStateDelayMs = RESET_STATE_DELAY_MS,\n  length = DEFAULT_PIN_LENGTH,\n  isPinAccepted,\n  className,\n  isMinified,\n  topContent,\n  onBiometricsClick,\n  onChange,\n  onClearError,\n  onSubmit,\n  onLogOutClick,\n}: OwnProps & StateProps) {\n  const { clearIsPinAccepted } = getActions();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const canRenderBackspace = value.length > 0;\n  const isSuccess = type === 'success' || isPinAccepted;\n  const isSuccessDuringAnimation = usePrevDuringAnimationSimple(isSuccess, STATE_ANIMATION_DURATION_MS);\n  const prevIsPinAccepted = usePrevious(isPinAccepted);\n  const arePinButtonsDisabled = isSuccess\n    || (value.length === length && type !== 'error'); // Allow pincode entry in case of an error\n\n  const titleClassName = buildClassName(\n    styles.title,\n    type === 'error' && styles.error,\n    (isSuccess || isSuccessDuringAnimation) && styles.success,\n  );\n\n  const shouldSuggestLogout = useMatchCount(type === 'error', WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION);\n\n  useEffect(() => {\n    if (prevIsPinAccepted && !isPinAccepted && length === value.length) {\n      onChange('');\n    }\n  }, [isPinAccepted, length, onChange, prevIsPinAccepted, value.length]);\n\n  useEffect(() => clearIsPinAccepted, []);\n\n  // Fix for iOS, enable fast pinpad button presses\n  useEffectWithPrevDeps(([prevIsActive]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n    if (isActive) {\n      void BottomSheet.clearScrollPatch();\n    } else if (prevIsActive) {\n      void BottomSheet.applyScrollPatch();\n    }\n  }, [isActive]);\n\n  useEffect(() => {\n    if (type !== 'error') return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      if (value.length === length) {\n        onChange('');\n      }\n      onClearError?.();\n    }, resetStateDelayMs);\n    void vibrateOnError();\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [length, onChange, onClearError, resetStateDelayMs, type, value.length]);\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return () => {\n      enableSwipeToClose();\n    };\n  }, [isActive]);\n\n  const handleClick = useLastCallback((char: string) => {\n    if (value.length === length || value.length === 0) {\n      onClearError?.();\n    }\n\n    if (value.length === length) {\n      onChange(char);\n\n      return;\n    }\n\n    const newValue = `${value}${char}`;\n    onChange(newValue);\n\n    if (newValue.length === length) {\n      onSubmit(newValue);\n    }\n  });\n\n  const handleBackspaceClick = useLastCallback(() => {\n    onClearError?.();\n    if (!value.length) return;\n\n    onChange(value.slice(0, -1));\n  });\n\n  function renderDots() {\n    const dotsClassName = buildClassName(\n      styles.dots,\n      type === 'error' && styles.dotsError,\n      (isSuccess || isSuccessDuringAnimation) && styles.dotsLoading,\n    );\n\n    return (\n      <div className={dotsClassName} aria-hidden>\n        {Array.from({ length }, (_, i) => (\n          <div\n            key={i}\n            className={buildClassName(\n              styles.dot,\n              i < value.length && styles.dotFilled,\n              type === 'error' && styles.error,\n              (isSuccess || isSuccessDuringAnimation) && styles.success,\n            )}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, className, SWIPE_DISABLED_CLASS_NAME)}>\n      {topContent ?? <div className={titleClassName}>{title}</div>}\n      {renderDots()}\n\n      <div className={buildClassName(styles.grid, isMinified && styles.minified)}>\n        <PinPadButton value=\"1\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"2\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"3\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"4\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"5\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"6\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"7\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"8\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"9\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        {!onBiometricsClick ? <span /> : (\n          <PinPadButton onClick={onBiometricsClick} isDisabled={isSuccess}>\n            <i className={buildClassName('icon', isFaceId ? 'icon-face-id' : 'icon-touch-id')} aria-hidden />\n          </PinPadButton>\n        )}\n        <PinPadButton value=\"0\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <Transition\n          name=\"zoomFade\"\n          activeKey={shouldSuggestLogout && !value.length ? 0 : 1}\n        >\n          {onLogOutClick && shouldSuggestLogout && !value.length ? (\n            <PinPadButton\n              className={styles.buttonDanger}\n              onClick={onLogOutClick}\n            >\n              <i className=\"icon icon-exit\" aria-hidden />\n            </PinPadButton>\n          ) : (\n            <PinPadButton\n              className={!canRenderBackspace && styles.buttonHidden}\n              isDisabled={!canRenderBackspace || isSuccess}\n              onClick={handleBackspaceClick}\n            >\n              <i className=\"icon icon-backspace\" aria-hidden />\n            </PinPadButton>\n          )}\n        </Transition>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global) => {\n    const { isPinAccepted } = global;\n\n    return {\n      isPinAccepted,\n    };\n  },\n)(PinPad));\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"ifHfFY2u\",\"label\":\"C3jlHNpF\",\"title\":\"kC9WGOYP\",\"errorMessage\":\"q8niLQND\",\"verify\":\"SDEJGboy\",\"error\":\"ZokzPDAj\",\"pinPadHeader\":\"sftOkqxr\",\"closeButton\":\"twjZlrDJ\",\"autoConfirmCheckbox\":\"MgA9JMMb\",\"logOutWrapper\":\"N0lWn9sM\",\"logOutButton\":\"jhtp0Nsp\"};","import type { RefObject, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthConfig } from '../../util/authApi/types';\n\nimport {\n  AUTO_CONFIRM_DURATION_MINUTES,\n  PIN_LENGTH,\n  SUPPORT_USERNAME,\n  WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION,\n} from '../../config';\nimport { selectIsBiometricAuthEnabled, selectIsNativeBiometricAuthEnabled } from '../../global/selectors';\nimport authApi from '../../util/authApi';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../util/authApi/inMemoryPasswordStore';\nimport { getDoesUsePinPad, getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { stopEvent } from '../../util/domEvents';\nimport { getTranslation } from '../../util/langProvider';\nimport { pause } from '../../util/schedulers';\nimport { createSignal } from '../../util/signals';\nimport { IS_ANDROID_APP, IS_DELEGATING_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from './helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { useMatchCount } from '../../hooks/useMatchCount';\n\nimport LogOutModal from '../main/modals/LogOutModal';\nimport AnimatedIconWithPreview from './AnimatedIconWithPreview';\nimport Button from './Button';\nimport Checkbox from './Checkbox';\nimport Input from './Input';\nimport Modal from './Modal';\nimport PinPad from './PinPad';\n\nimport modalStyles from './Modal.module.scss';\nimport styles from './PasswordForm.module.scss';\n\ntype OperationType = 'transfer' | 'sending' | 'staking' | 'unstaking' | 'swap'\n  | 'unfreeze' | 'passcode' | 'unlock' | 'claim' | 'turnOnBiometrics' | 'mintCard';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  operationType?: OperationType;\n  cancelLabel?: string;\n  submitLabel: string | TeactNode[];\n  stickerSize?: number;\n  placeholder?: string;\n  error?: string;\n  help?: string;\n  resetStateDelayMs?: number;\n  containerClassName?: string;\n  pinPadClassName?: string;\n  withCloseButton?: boolean;\n  children?: TeactNode;\n  noAnimatedIcon?: boolean;\n  inputWrapperClassName?: string;\n  forceBiometricsInMain?: boolean;\n  // Works only if the password is memoized. If `true`, the component will render\n  // a separate screen with an action info and buttons 'Cancel' and 'Confirm'.\n  skipAuthScreen?: boolean;\n  onCancel?: NoneToVoidFunction;\n  onUpdate: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n}\n\ninterface StateProps {\n  isPasswordNumeric?: boolean;\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  authConfig?: AuthConfig;\n  isAutoConfirmEnabled?: boolean;\n}\n\nconst STICKER_SIZE = 180;\nconst APPEAR_ANIMATION_DURATION_MS = 300;\n\nconst [getHandleBiometricsSignal, setHandleBiometricsSignal] = createSignal(Date.now());\n\nexport function triggerPasswordFormHandleBiometrics(e?: MouseEvent | KeyboardEvent) {\n  if (e) {\n    stopEvent(e);\n  }\n  setHandleBiometricsSignal(Date.now());\n}\n\nfunction useInMemoryPassword(inMemoryPasswordRef: RefObject<string | undefined>) {\n  const hasInMemoryPassword = useMemo(() => getHasInMemoryPassword(), []);\n  if (hasInMemoryPassword && !inMemoryPasswordRef.current) {\n    void getInMemoryPassword().then((password) => {\n      inMemoryPasswordRef.current = password;\n    });\n  }\n  return hasInMemoryPassword;\n}\n\nfunction useStorageClearedDialog(operationType?: OperationType) {\n  const { showDialog } = getActions();\n\n  return useLastCallback(() => {\n    showDialog({\n      title: '$storage_cleared_title',\n      message: getTranslation('$storage_cleared_message', {\n        support_link: (\n          <a href={`https://t.me/${SUPPORT_USERNAME}`} target=\"_blank\" rel=\"noreferrer\">\n            @{SUPPORT_USERNAME}\n          </a>\n        ),\n      }),\n      buttons: {\n        cancel: { title: 'Cancel' },\n        confirm: { title: 'Log Out', isDestructive: true, action: 'signOutAll' },\n      },\n      noBackdropClose: true,\n      isInAppLock: operationType === 'unlock',\n    });\n  });\n}\n\nfunction PasswordForm({\n  isActive,\n  isLoading,\n  operationType,\n  isPasswordNumeric,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  authConfig,\n  cancelLabel,\n  submitLabel,\n  stickerSize = STICKER_SIZE,\n  placeholder = 'Enter your password',\n  error,\n  help,\n  resetStateDelayMs,\n  containerClassName,\n  pinPadClassName,\n  children,\n  withCloseButton,\n  noAnimatedIcon,\n  inputWrapperClassName,\n  forceBiometricsInMain,\n  skipAuthScreen,\n  isAutoConfirmEnabled,\n  onUpdate,\n  onCancel,\n  onSubmit,\n}: OwnProps & StateProps) {\n  const { openSettings, setInMemoryPassword, setIsAutoConfirmEnabled } = getActions();\n\n  const lang = useLang();\n\n  const memoizedPasswordRef = useRef<string>();\n  const hasInMemoryPassword = useInMemoryPassword(memoizedPasswordRef);\n\n  const showOnlyConfirmScreen = skipAuthScreen && hasInMemoryPassword;\n\n  const passwordRef = useRef<HTMLInputElement>();\n  const [password, setPassword] = useState<string>('');\n  const [localError, setLocalError] = useState<string>('');\n  const [wrongAttempts, setWrongAttempts] = useState(0);\n  const [isResetBiometricsWarningOpen, openResetBiometricsWarning, closeResetBiometricsWarning] = useFlag(false);\n  const { isSmallHeight, isPortrait } = useDeviceScreen();\n  const isSubmitDisabled = !password.length && !showOnlyConfirmScreen;\n  const canUsePinPad = getDoesUsePinPad();\n  const [isLogOutModalOpened, openLogOutModal, closeLogOutModal] = useFlag(false);\n  const shouldSuggestLogout = useMatchCount(!!error || !!localError, WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION);\n  const showStorageClearedDialog = useStorageClearedDialog(operationType);\n\n  useEffect(() => {\n    if (isActive) {\n      setLocalError('');\n      setPassword('');\n      setWrongAttempts(0);\n    }\n  }, [isActive]);\n\n  const submitCallback = useLastCallback(async (enteredPassword: string) => {\n    const passwordToReturn = showOnlyConfirmScreen ? memoizedPasswordRef.current! : enteredPassword;\n    onSubmit(passwordToReturn);\n\n    if (showOnlyConfirmScreen) return;\n\n    const passwordVerified = await callApi('verifyPassword', passwordToReturn);\n    if (!passwordVerified) {\n      // Password verification failed - check if it's due to storage corruption\n      const isStorageOk = await callApi('checkWorkerStorageIntegrity');\n      if (!isStorageOk) {\n        return showStorageClearedDialog();\n      }\n      // Storage is intact, so it's just a wrong password - let normal error handling proceed\n    }\n\n    if (passwordVerified) {\n      setInMemoryPassword({ password: passwordToReturn });\n    }\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    void submitCallback(password);\n  });\n\n  const handleBiometrics = useLastCallback(async () => {\n    try {\n      setLocalError('');\n      const biometricPassword = await authApi.getPassword(authConfig!);\n      if (!biometricPassword) {\n        setWrongAttempts(wrongAttempts + 1);\n        setLocalError('Biometric confirmation failed');\n\n        if (IS_ANDROID_APP && wrongAttempts > 2) {\n          openResetBiometricsWarning();\n        }\n      } else {\n        void submitCallback(biometricPassword);\n      }\n    } catch (err: any) {\n      setLocalError(err.message || lang('Something went wrong.'));\n    }\n  });\n\n  useEffect(() => {\n    if (\n      (IS_DELEGATING_BOTTOM_SHEET && !forceBiometricsInMain)\n      || !isActive\n      || !isBiometricAuthEnabled\n      || showOnlyConfirmScreen\n    ) {\n      return;\n    }\n\n    void pause(APPEAR_ANIMATION_DURATION_MS).then(handleBiometrics);\n  }, [forceBiometricsInMain, handleBiometrics, isActive, isBiometricAuthEnabled, showOnlyConfirmScreen]);\n\n  useEffectOnce(() => {\n    return getHandleBiometricsSignal.subscribe(handleBiometrics);\n  });\n\n  useFocusAfterAnimation(passwordRef, !isActive || isBiometricAuthEnabled);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError('');\n    onUpdate();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    closeResetBiometricsWarning();\n    onCancel?.();\n    openSettings();\n  });\n\n  const handleInput = useLastCallback((value: string) => {\n    setPassword(value);\n    if (error) {\n      onUpdate();\n    }\n  });\n\n  const handleAutoConfirmChange = useLastCallback((isEnabled: boolean) => {\n    setIsAutoConfirmEnabled({ isEnabled });\n  });\n\n  const handleOpenLogOutModal = useLastCallback((e: React.MouseEvent) => {\n    stopEvent(e);\n    openLogOutModal();\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({ onEnter: handleSubmit });\n  }, [handleSubmit, isLoading, isSubmitDisabled]);\n\n  function getPinPadTitle() {\n    switch (operationType) {\n      case 'unfreeze':\n        return 'Confirm Unfreezing';\n      case 'passcode':\n      case 'turnOnBiometrics':\n        return 'Confirm Passcode';\n      case 'transfer':\n      case 'sending':\n        return 'Confirm Sending';\n      case 'staking':\n        return 'Confirm Staking';\n      case 'unstaking':\n        return 'Confirm Unstaking';\n      case 'swap':\n        return 'Confirm Swap';\n      case 'unlock':\n        return undefined;\n      case 'claim':\n        return 'Confirm Rewards Claim';\n      case 'mintCard':\n        return 'Confirm Upgrading';\n      default:\n        return 'Confirm Action';\n    }\n  }\n\n  const shouldRenderFullWidthButton = operationType === 'unlock';\n  const footerButtonsClassName = buildClassName(\n    modalStyles.footerButtons,\n    shouldRenderFullWidthButton && modalStyles.footerButtonFullWidth,\n  );\n\n  function renderFooterButtons() {\n    return (\n      <div className={footerButtonsClassName}>\n        {onCancel && (\n          <Button\n            isLoading={isLoading && isBiometricAuthEnabled}\n            isDisabled={isLoading && !isBiometricAuthEnabled}\n            className={modalStyles.buttonHalfWidth}\n            onClick={onCancel}\n          >\n            {cancelLabel || lang('Cancel')}\n          </Button>\n        )}\n        {isBiometricAuthEnabled && Boolean(localError) && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isLoading}\n            className={modalStyles.buttonHalfWidth}\n            onClick={!isLoading ? handleBiometrics : undefined}\n            shouldStopPropagation\n          >\n            {lang('Try Again')}\n          </Button>\n        )}\n        {(!isBiometricAuthEnabled || showOnlyConfirmScreen) && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isSubmitDisabled}\n            className={!shouldRenderFullWidthButton ? modalStyles.buttonHalfWidth : modalStyles.buttonFullWidth}\n            onClick={!isLoading ? handleSubmit : undefined}\n          >\n            {submitLabel || lang('Send')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  function renderAutoConfirmCheckbox() {\n    return (\n      <Checkbox\n        checked={!!isAutoConfirmEnabled}\n        onChange={handleAutoConfirmChange}\n        className={styles.autoConfirmCheckbox}\n      >\n        {lang('Remember for %1$d minutes', AUTO_CONFIRM_DURATION_MINUTES)}\n      </Checkbox>\n    );\n  }\n\n  const shouldRenderAutoConfirmCheckbox = operationType !== 'turnOnBiometrics' && !isBiometricAuthEnabled;\n\n  if (canUsePinPad) {\n    const hasError = Boolean(localError || error);\n    const title = getPinPadTitle();\n    const actionName = lang(\n      !isNativeBiometricAuthEnabled\n        ? 'Enter code'\n        : (getIsFaceIdAvailable()\n          ? 'Enter code or use Face ID'\n          : (getIsTouchIdAvailable()\n            ? 'Enter code or use Touch ID'\n            : 'Enter code or use biometrics')\n        ),\n    );\n\n    const content = (\n      <>\n        {withCloseButton && (\n          <Button\n            isRound\n            className={buildClassName(modalStyles.closeButton, styles.closeButton)}\n            ariaLabel={lang('Close')}\n            onClick={onCancel}\n          >\n            <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n        <div className={styles.pinPadHeader}>\n          {isPortrait && !noAnimatedIcon && (\n            <AnimatedIconWithPreview\n              play={isActive}\n              tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n              previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n              noLoop={false}\n              nonInteractive\n            />\n          )}\n          {!isSmallHeight && title && <div className={styles.title}>{lang(title)}</div>}\n          {children}\n        </div>\n\n        {showOnlyConfirmScreen ? renderFooterButtons() : (\n          <PinPad\n            isActive={isActive}\n            title={lang(hasError ? (localError || error!) : (isSmallHeight && title ? title : actionName))}\n            type={hasError ? 'error' : undefined}\n            length={PIN_LENGTH}\n            resetStateDelayMs={resetStateDelayMs}\n            value={password}\n            topContent={shouldRenderAutoConfirmCheckbox ? renderAutoConfirmCheckbox() : undefined}\n            className={pinPadClassName}\n            onBiometricsClick={isNativeBiometricAuthEnabled ? handleBiometrics : undefined}\n            onLogOutClick={operationType === 'unlock' ? openLogOutModal : undefined}\n            onChange={setPassword}\n            onClearError={handleClearError}\n            onSubmit={submitCallback}\n          />\n        )}\n        {operationType === 'unlock' && (\n          <LogOutModal isOpen={isLogOutModalOpened} onClose={closeLogOutModal} isInAppLock />\n        )}\n      </>\n    );\n\n    return showOnlyConfirmScreen ? (\n      <div className={modalStyles.transitionContent}>\n        {content}\n      </div>\n    ) : content;\n  }\n\n  function renderBiometricPrompt() {\n    const renderingError = localError || error;\n    if (renderingError) {\n      return (\n        <div className={styles.error}>{lang(renderingError)}</div>\n      );\n    }\n\n    return (\n      <div className={styles.verify}>\n        {lang(operationType === 'transfer'\n          ? 'Please confirm transaction using biometrics' : 'Please confirm operation using biometrics')}\n      </div>\n    );\n  }\n\n  function renderPasswordForm() {\n    return (\n      <>\n        <Input\n          ref={passwordRef}\n          type=\"password\"\n          isRequired\n          id=\"first-password\"\n          wrapperClassName={inputWrapperClassName}\n          inputMode={isPasswordNumeric ? 'numeric' : undefined}\n          error={error ? lang(error) : localError}\n          placeholder={lang(placeholder)}\n          value={password}\n          onInput={handleInput}\n          maxLength={isPasswordNumeric ? PIN_LENGTH : undefined}\n        />\n        {localError && (\n          <div className={styles.errorMessage}>{lang(localError)}</div>\n        )}\n        {help && !error && (\n          <div className={styles.label}>{help}</div>\n        )}\n        {shouldRenderAutoConfirmCheckbox && renderAutoConfirmCheckbox()}\n      </>\n    );\n  }\n\n  return (\n    <div className={buildClassName(modalStyles.transitionContent, containerClassName)}>\n      {!noAnimatedIcon && (\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n          previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          play={isActive}\n          size={stickerSize}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n      )}\n\n      {children}\n\n      {!showOnlyConfirmScreen && (isBiometricAuthEnabled ? renderBiometricPrompt() : renderPasswordForm())}\n\n      {shouldSuggestLogout && operationType === 'unlock' && (\n        <div className={styles.logOutWrapper}>\n          {lang('Can\\'t confirm?')}\n          <span\n            role=\"button\"\n            tabIndex={0}\n            className={styles.logOutButton}\n            onClick={handleOpenLogOutModal}\n          >\n            {lang('Exit all wallets')}\n            <i className={buildClassName('icon-chevron-right', styles.detailsIcon)} aria-hidden />\n          </span>\n        </div>\n      )}\n\n      {renderFooterButtons()}\n\n      <Modal\n        isOpen={isResetBiometricsWarningOpen}\n        isCompact\n        title={lang('Biometric authentication failed')}\n        onClose={closeResetBiometricsWarning}\n      >\n        <p className={modalStyles.text}>\n          {lang('Reinstall biometrics in your device\\'s system settings, or use a passcode.')}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button className={modalStyles.button} onClick={closeResetBiometricsWarning}>{lang('Close')}</Button>\n          <Button isPrimary className={modalStyles.button} onClick={handleOpenSettings}>\n            {lang('Settings')}\n          </Button>\n        </div>\n      </Modal>\n      {operationType === 'unlock' && (\n        <LogOutModal isOpen={isLogOutModalOpened} onClose={closeLogOutModal} isInAppLock />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isPasswordNumeric, authConfig, isAutoConfirmEnabled } = global.settings;\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n\n  return {\n    isPasswordNumeric,\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    authConfig,\n    isAutoConfirmEnabled,\n  };\n})(PasswordForm));\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { AppTheme, Theme } from '../global/types';\n\nimport useLastCallback from './useLastCallback';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\n\nfunction useAppTheme(currentTheme: Theme) {\n  const [theme, setTheme] = useState<AppTheme>(\n    currentTheme === 'system'\n      ? (prefersDark.matches ? 'dark' : 'light')\n      : currentTheme,\n  );\n\n  const handlePrefersColorSchemeChange = useLastCallback(() => {\n    setTheme(() => {\n      if (currentTheme === 'system') {\n        return prefersDark.matches ? 'dark' : 'light';\n      }\n\n      return currentTheme;\n    });\n  });\n\n  useEffect(() => {\n    if (currentTheme !== 'system') return undefined;\n\n    prefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\n    return () => {\n      prefersDark.removeEventListener('change', handlePrefersColorSchemeChange);\n    };\n  }, [currentTheme]);\n\n  handlePrefersColorSchemeChange();\n\n  return theme;\n}\n\nexport default useAppTheme;\n","export const preloadedImageUrls = new Set();\n\nexport function preloadImage(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      preloadedImageUrls.add(url);\n      resolve(img);\n    };\n    img.onerror = reject;\n    img.src = url;\n  });\n}\n","import React, { memo, useRef } from '../../lib/teact/teact';\n\nimport { preloadedImageUrls } from '../../util/preloadImage';\n\nimport useFlag from '../../hooks/useFlag';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\ninterface OwnProps {\n  url?: string;\n  alt?: string;\n  loading?: 'lazy' | 'eager';\n  isSlow?: boolean;\n  className?: string;\n  imageClassName?: string;\n  children?: TeactJsx;\n  fallback?: TeactJsx;\n}\n\nfunction ImageComponent({\n  url,\n  alt,\n  loading,\n  isSlow,\n  className,\n  imageClassName,\n  children,\n  fallback,\n}: OwnProps) {\n  const ref = useRef<HTMLImageElement>();\n  const [isLoaded, markIsLoaded] = useFlag(preloadedImageUrls.has(url));\n  const [hasError, markHasError] = useFlag();\n\n  const handleLoad = () => {\n    markIsLoaded();\n    preloadedImageUrls.add(url);\n  };\n\n  const shouldShowFallback = (hasError || !url) && !!fallback;\n\n  const divRef = useMediaTransition(isLoaded || shouldShowFallback);\n\n  return (\n    <div ref={divRef} className={className} style={isSlow ? 'transition-duration: 0.5s;' : undefined}>\n      {!shouldShowFallback ? (\n        <img\n          ref={ref}\n          src={url}\n          alt={alt}\n          loading={loading}\n          className={imageClassName}\n          draggable={false}\n          referrerPolicy=\"same-origin\"\n          onLoad={!isLoaded ? handleLoad : undefined}\n          onError={markHasError}\n        />\n      ) : fallback}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(ImageComponent);\n","// extracted by mini-css-extract-plugin\nexport default {\"appLocked\":\"VzAZj1DO\",\"innerContent\":\"a0ISx2DN\",\"withPinPad\":\"KGdyJD8j\",\"appLockedFixed\":\"bO3Yeq_N\",\"title\":\"Mg8ZA3ww\",\"passwordFormContent\":\"y8VDu2CW\",\"pinPadContent\":\"TBzkDy1l\",\"logo\":\"AfTARhCR\",\"passwordInputWrapper\":\"lpSqrTfE\",\"appLockedWrapper\":\"F1wWh0wj\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { Theme } from '../../global/types';\n\nimport { IS_CORE_WALLET } from '../../config';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useLang from '../../hooks/useLang';\n\nimport Image from '../ui/Image';\n\nimport styles from './AppLocked.module.scss';\n\nimport coreWalletLogoPath from '../../assets/logoCoreWallet.svg';\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  theme: Theme;\n}\nfunction Logo({ theme }: OwnProps) {\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n\n  const logoPath = IS_CORE_WALLET\n    ? coreWalletLogoPath\n    : appTheme === 'light' ? logoLightPath : logoDarkPath;\n\n  return (\n    <div className={styles.logo}>\n      <Image className={styles.logo} imageClassName={styles.logo} url={logoPath} alt={lang('Logo')} />\n    </div>\n  );\n}\n\nexport default memo(Logo);\n","import React, { type ElementRef, memo, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { Theme } from '../../global/types';\n\nimport { APP_NAME } from '../../config';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../util/haptics';\nimport { callApi } from '../../api';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport PasswordForm from '../ui/PasswordForm';\nimport Logo from './Logo';\n\nimport styles from './AppLocked.module.scss';\n\nconst PINPAD_RESET_DELAY = 300;\n\ninterface OwnProps {\n  isActive: boolean;\n  ref: ElementRef<HTMLDivElement>;\n  theme: Theme;\n  innerContentTopPosition?: number;\n  shouldHideBiometrics: boolean;\n  onSubmit: NoneToVoidFunction;\n}\n\nfunction PasswordFormSlide({\n  isActive,\n  ref,\n  theme,\n  innerContentTopPosition = 0,\n  shouldHideBiometrics,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n  const { setIsPinAccepted } = getActions();\n  const [passwordError, setPasswordError] = useState('');\n\n  const handleSubmitPassword = useLastCallback(async (password: string) => {\n    const result = await callApi('verifyPassword', password);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n    onSubmit();\n  });\n\n  const handlePasswordChange = useLastCallback(() => setPasswordError(''));\n\n  return (\n    <div\n      ref={ref}\n      className={styles.innerContent}\n      style={`--position-top: ${innerContentTopPosition}px;`}\n    >\n      <PasswordForm\n        isActive={!isActive ? false : getIsNativeBiometricAuthSupported() ? !shouldHideBiometrics : true}\n        noAnimatedIcon\n        forceBiometricsInMain\n        error={passwordError}\n        resetStateDelayMs={PINPAD_RESET_DELAY}\n        operationType=\"unlock\"\n        containerClassName={buildClassName(styles.passwordFormContent, 'custom-scroll')}\n        pinPadClassName={styles.pinPadContent}\n        inputWrapperClassName={styles.passwordInputWrapper}\n        submitLabel={lang('Unlock')}\n        onSubmit={handleSubmitPassword}\n        onUpdate={handlePasswordChange}\n      >\n        <Logo theme={theme} />\n        <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n      </PasswordForm>\n    </div>\n  );\n}\n\nexport default memo(PasswordFormSlide);\n","import React, { type ElementRef, memo } from '../../lib/teact/teact';\n\nimport type { Theme } from '../../global/types';\n\nimport { APP_NAME } from '../../config';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Logo from './Logo';\n\nimport styles from './AppLocked.module.scss';\n\ninterface OwnProps {\n  ref: ElementRef<HTMLDivElement>;\n  theme: Theme;\n  innerContentTopPosition?: number;\n  handleChangeSlideForBiometricAuth: NoneToVoidFunction;\n}\n\nfunction UnlockButtonSlide({\n  ref,\n  theme,\n  innerContentTopPosition = 0,\n  handleChangeSlideForBiometricAuth,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div\n      ref={ref}\n      className={styles.innerContent}\n      style={`--position-top: ${innerContentTopPosition}px;`}\n    >\n      <Logo theme={theme} />\n      <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n      <Button isPrimary onClick={handleChangeSlideForBiometricAuth}>\n        {lang('Unlock')}\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(UnlockButtonSlide);\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport React, { memo, useEffect, useMemo, useRef, useState } from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { AutolockValueType, Theme } from '../../global/types';\n\nimport { AUTOLOCK_OPTIONS_LIST, DEBUG, IS_TELEGRAM_APP } from '../../config';\nimport {\n  selectIsBiometricAuthEnabled,\n  selectIsNativeBiometricAuthEnabled,\n  selectIsPasswordPresent,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { vibrate } from '../../util/haptics';\nimport { createSignal } from '../../util/signals';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport { useHotkeys } from '../../hooks/useHotkeys';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useThrottledCallback from '../../hooks/useThrottledCallback';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport { getInAppBrowser } from '../ui/InAppBrowser';\nimport { triggerPasswordFormHandleBiometrics } from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport PasswordFormSlide from './PasswordFormSlide';\nimport UnlockButtonSlide from './UnlockButtonSlide';\n\nimport styles from './AppLocked.module.scss';\n\nconst WINDOW_EVENTS_LATENCY = 5000;\nconst INTERVAL_CHECK_PERIOD = 5000;\nconst ACTIVATION_EVENT_NAMES = [\n  'focus', // For Web\n  'mousemove', // For Web\n  'touch', // For Capacitor\n  'wheel',\n  'keydown',\n];\n// `capture: true` is necessary because otherwise a `stopPropagation` call inside the main UI will prevent the event\n// from getting to the listeners inside `AppLocked`.\nconst ACTIVATION_EVENT_OPTIONS = { capture: true };\n\ninterface StateProps {\n  isNonNativeBiometricAuthEnabled: boolean;\n  autolockValue?: AutolockValueType;\n  theme: Theme;\n  isManualLockActive?: boolean;\n  isAppLockEnabled?: boolean;\n  shouldHideBiometrics?: boolean;\n  canRender: boolean;\n}\n\nconst enum SLIDES {\n  button,\n  passwordForm,\n}\n\nconst [getActivitySignal, setActivitySignal] = createSignal(Date.now());\n\nexport function reportAppLockActivityEvent() {\n  setActivitySignal(Date.now());\n}\n\nfunction useAppLockState(autolockValue: AutolockValueType, isManualLockActive: boolean, canRender: boolean) {\n  const isFirstRunRef = useRef(true);\n  const isLockedRef = useRef(autolockValue !== 'never' || isManualLockActive);\n  const lockReasonRef = useRef<'autolock' | 'manual'>();\n  const forceUpdate = useForceUpdate();\n\n  // For cases when `canRender` changes from `true` -> `false`, e.g. when all accounts are deleted\n  if (isLockedRef.current && !canRender) {\n    isLockedRef.current = false;\n  }\n\n  const lock = useLastCallback(() => {\n    isLockedRef.current = true;\n    forceUpdate();\n  });\n\n  const unlock = useLastCallback(() => {\n    isLockedRef.current = false;\n    lockReasonRef.current = undefined;\n    forceUpdate();\n  });\n\n  // For case when on cold start the app was manually locked at the previous session, this should be treated as a auto lock.\n  lockReasonRef.current = isManualLockActive && !(isFirstRunRef.current && autolockValue !== 'never')\n    ? 'manual'\n    : 'autolock';\n  isFirstRunRef.current = false;\n\n  return [!!isLockedRef.current, lock, unlock, lockReasonRef.current] as const;\n}\n\nfunction useContentSlide(\n  isNonNativeBiometricAuthEnabled: boolean, isLocked: boolean, lockReason?: 'autolock' | 'manual',\n) {\n  const ref = useRef<HTMLDivElement>();\n\n  function getDefaultSlideForBiometricAuth() {\n    return (\n      (isBackgroundModeActive() || lockReason === 'manual')\n      && isNonNativeBiometricAuthEnabled ? SLIDES.button : SLIDES.passwordForm\n    );\n  }\n\n  const [slideForBiometricAuth, setSlideForBiometricAuth] = useState(getDefaultSlideForBiometricAuth());\n\n  // After the first rendering of the password form, it is necessary to remember the `top` position\n  // so that when changing the height of the container, there is no shift in content.\n  // This logic is only applicable to the two-slides mode except for TMA as it has a pin pad.\n  const [innerContentTopPosition, setInnerContentTopPosition] = useState<number>();\n  const isFixedState = innerContentTopPosition !== undefined;\n\n  const isFixingSlideEnv = !getDoesUsePinPad() && isNonNativeBiometricAuthEnabled;\n\n  function fixSlide(force?: boolean) {\n    const innerContent = ref.current;\n\n    if (innerContent && (!isFixedState || force) && isLocked && isFixingSlideEnv) {\n      const top = innerContent.getBoundingClientRect().top;\n\n      setInnerContentTopPosition(top);\n    }\n  }\n\n  function unfixSlide() {\n    setInnerContentTopPosition(undefined);\n  }\n\n  function refixSlide() {\n    unfixSlide();\n    requestAnimationFrame(() => fixSlide(true));\n  }\n\n  useEffect(() => {\n    fixSlide();\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [isLocked]);\n\n  const { height } = useWindowSize();\n\n  useEffect(() => {\n    if (!isFixingSlideEnv) return;\n\n    refixSlide();\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [height]);\n\n  return {\n    ref,\n    innerContentTopPosition,\n    unfixSlide,\n    slideForBiometricAuth,\n    setSlideForBiometricAuth,\n    getDefaultSlideForBiometricAuth,\n  };\n}\n\nfunction AppLocked({\n  isNonNativeBiometricAuthEnabled,\n  autolockValue = 'never',\n  theme,\n  isManualLockActive,\n  isAppLockEnabled,\n  shouldHideBiometrics,\n  canRender,\n}: StateProps): TeactJsx {\n  const {\n    clearIsPinAccepted, submitAppLockActivityEvent, setIsManualLockActive, setIsAppLockActive,\n  } = getActions();\n\n  const [isLocked, lock, unlock, lockReason] = useAppLockState(autolockValue, !!isManualLockActive, canRender);\n  const [shouldRenderUi, showUi, hideUi] = useFlag(isLocked);\n  const lastActivityTime = useRef(Date.now());\n\n  const {\n    ref,\n    innerContentTopPosition,\n    unfixSlide,\n    slideForBiometricAuth,\n    setSlideForBiometricAuth,\n    getDefaultSlideForBiometricAuth,\n  } = useContentSlide(isNonNativeBiometricAuthEnabled, isLocked, lockReason);\n\n  const handleActivity = useLastCallback(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      submitAppLockActivityEvent();\n      return;\n    }\n    lastActivityTime.current = Date.now();\n  });\n\n  const handleActivityThrottled = useThrottledCallback(handleActivity, [handleActivity], WINDOW_EVENTS_LATENCY);\n\n  const afterUnlockCallback = useLastCallback(() => {\n    hideUi();\n    setSlideForBiometricAuth(getDefaultSlideForBiometricAuth());\n    getInAppBrowser()?.show();\n    clearIsPinAccepted();\n    handleActivity();\n    setIsManualLockActive({ isActive: undefined, shouldHideBiometrics: undefined });\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.show();\n    unfixSlide();\n    setIsAppLockActive({ isActive: false });\n    void vibrate();\n  });\n\n  const autolockPeriod = useMemo(\n    () => AUTOLOCK_OPTIONS_LIST.find((option) => option.value === autolockValue)!.period, [autolockValue],\n  );\n\n  const { ref: transitionRef } = useShowTransition({\n    isOpen: isLocked,\n    noMountTransition: true,\n    className: 'slow',\n    onCloseAnimationEnd: afterUnlockCallback,\n  });\n\n  useEffect(() => {\n    if (isLocked !== getGlobal().isAppLockActive) {\n      setIsAppLockActive({ isActive: !!isLocked });\n    }\n  }, [isLocked]);\n\n  const forceLockApp = useLastCallback(() => {\n    lock();\n    showUi();\n    if (document.activeElement) {\n      (document.activeElement as HTMLElement).blur();\n    }\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.hide();\n    void getInAppBrowser()?.hide();\n    setSlideForBiometricAuth(getDefaultSlideForBiometricAuth());\n    setIsAppLockActive({ isActive: true });\n  });\n\n  const handleLock = useLastCallback(() => {\n    if ((autolockValue !== 'never' || isManualLockActive) && canRender) forceLockApp();\n  });\n\n  if (DEBUG) (window as any).lock = handleLock;\n\n  if (isManualLockActive && !isLocked && !shouldRenderUi) handleLock();\n\n  const handleChangeSlideForBiometricAuth = useLastCallback(() => {\n    setSlideForBiometricAuth(SLIDES.passwordForm);\n  });\n\n  useEffectOnce(() => {\n    for (const eventName of ACTIVATION_EVENT_NAMES) {\n      window.addEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n    }\n\n    return () => {\n      for (const eventName of ACTIVATION_EVENT_NAMES) {\n        window.removeEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n      }\n    };\n  });\n\n  useEffectOnce(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return getActivitySignal.subscribe(handleActivityThrottled);\n  });\n\n  const handleLockScreenHotkey = useLastCallback((e: KeyboardEvent) => {\n    stopEvent(e);\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n  });\n\n  useHotkeys(useMemo(() => (isAppLockEnabled && !isLocked ? {\n    'Ctrl+Shift+L': handleLockScreenHotkey,\n    'Alt+Shift+L': handleLockScreenHotkey,\n    'Meta+Shift+L': handleLockScreenHotkey,\n    ...(IS_ELECTRON && { 'Mod+L': handleLockScreenHotkey }),\n  } : undefined), [isAppLockEnabled, isLocked]));\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    const interval = setInterval(() => {\n      if (isAppLockEnabled && !isLocked && Date.now() - lastActivityTime.current > autolockPeriod) {\n        handleLock();\n      }\n    }, INTERVAL_CHECK_PERIOD);\n    return () => clearInterval(interval);\n  }, [isLocked, autolockPeriod, handleLock, isAppLockEnabled]);\n\n  useBackgroundMode(undefined, handleChangeSlideForBiometricAuth);\n\n  function renderTransitionContent(isActive: boolean) {\n    return (\n      <div\n        className={buildClassName(\n          styles.appLocked,\n          innerContentTopPosition !== undefined && styles.appLockedFixed,\n          getDoesUsePinPad() && slideForBiometricAuth === SLIDES.passwordForm && styles.withPinPad,\n        )}\n      >\n        {\n          slideForBiometricAuth === SLIDES.button && isNonNativeBiometricAuthEnabled\n            ? (\n              <UnlockButtonSlide\n                ref={ref}\n                theme={theme}\n                innerContentTopPosition={innerContentTopPosition}\n                handleChangeSlideForBiometricAuth={handleChangeSlideForBiometricAuth}\n              />\n            )\n            : (\n              <PasswordFormSlide\n                ref={ref}\n                isActive={isActive}\n                theme={theme}\n                innerContentTopPosition={innerContentTopPosition}\n                shouldHideBiometrics={!!shouldHideBiometrics}\n                onSubmit={unlock}\n              />\n            )\n        }\n      </div>\n    );\n  }\n\n  const transitionKey = Number(slideForBiometricAuth === SLIDES.passwordForm) + Number(shouldRenderUi) * 2;\n\n  const handleUnlockIntent = isNonNativeBiometricAuthEnabled\n    ? slideForBiometricAuth === SLIDES.passwordForm\n      ? (!IS_TELEGRAM_APP ? triggerPasswordFormHandleBiometrics : undefined)\n      : handleChangeSlideForBiometricAuth\n    : undefined;\n\n  useHotkeys(useMemo(() => (isAppLockEnabled && isLocked && handleUnlockIntent ? {\n    Space: handleUnlockIntent,\n    Enter: handleUnlockIntent,\n    Escape: handleUnlockIntent,\n  } : undefined), [isAppLockEnabled, isLocked, handleUnlockIntent]));\n\n  if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n  return (\n    <Transition\n      ref={transitionRef}\n      name={isNonNativeBiometricAuthEnabled && IS_TELEGRAM_APP ? 'slideFade' : 'semiFade'}\n      onContainerClick={handleUnlockIntent}\n      activeKey={transitionKey}\n      className={styles.appLockedWrapper}\n      shouldCleanup\n    >\n      {shouldRenderUi ? renderTransitionContent : undefined}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { autolockValue, isAppLockEnabled } = global.settings;\n\n  const isPasswordPresent = selectIsPasswordPresent(global);\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isNonNativeBiometricAuthEnabled = isBiometricAuthEnabled && (!isNativeBiometricAuthEnabled || IS_TELEGRAM_APP);\n\n  return {\n    isNonNativeBiometricAuthEnabled,\n    autolockValue,\n    canRender: Boolean(isAppLockEnabled && isPasswordPresent),\n    isAppLockEnabled,\n    theme: global.settings.theme,\n    isManualLockActive: global.isManualLockActive,\n    shouldHideBiometrics: global.appLockHideBiometrics,\n  };\n})(AppLocked));\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport type { GlobalState } from '../../types';\nimport {\n  AppState,\n  AuthState,\n  ContentTab,\n  DomainLinkingState,\n  SettingsState,\n  SwapState,\n  TransferState,\n} from '../../types';\n\nimport {\n  ANIMATION_LEVEL_MIN,\n  APP_VERSION,\n  BETA_URL,\n  BOT_USERNAME,\n  DEBUG,\n  IS_PRODUCTION,\n  PRODUCTION_URL,\n} from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { openDeeplinkOrUrl, parseDeeplinkTransferParams, processDeeplink } from '../../../util/deeplink';\nimport getIsAppUpdateNeeded from '../../../util/getIsAppUpdateNeeded';\nimport { vibrate, vibrateOnSuccess } from '../../../util/haptics';\nimport { omit } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { getTelegramApp } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID_APP,\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { closeAllOverlays, parsePlainAddressQr } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentSwap,\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  renameAccount,\n  setCurrentTransferAddress,\n  setIsPinAccepted,\n  updateAccounts,\n  updateAuth,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentDomainLinking,\n  updateCurrentSwap,\n  updateCurrentTransfer,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsPasswordPresent,\n} from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { reportAppLockActivityEvent } from '../../../components/appLocked/AppLocked';\nimport { closeModal } from '../../../components/ui/Modal';\n\nconst APP_VERSION_URL = IS_ANDROID_APP ? `${IS_PRODUCTION ? PRODUCTION_URL : BETA_URL}/version.txt` : 'version.txt';\n\naddActionHandler('showActivityInfo', (global, actions, { id }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showActivityInfo', { id });\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: id });\n});\n\naddActionHandler('showAnyAccountTx', async (global, actions, { txId, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTx', { txId, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showActivityInfo({ id: txId });\n});\n\naddActionHandler('showAnyAccountTokenActivity', async (global, actions, { slug, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTokenActivity', { slug, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showTokenActivity({ slug });\n});\n\naddActionHandler('closeActivityInfo', (global, actions, { id }) => {\n  if (selectCurrentAccountState(global)?.currentActivityId !== id) {\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: undefined });\n});\n\naddActionHandler('addSavedAddress', (global, actions, { address, name, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    savedAddresses: [\n      ...savedAddresses,\n      { address, name, chain },\n    ],\n  });\n});\n\naddActionHandler('removeFromSavedAddress', (global, actions, { address, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  const newSavedAddresses = savedAddresses.filter((item) => !(item.address === address && item.chain === chain));\n\n  return updateCurrentAccountState(global, { savedAddresses: newSavedAddresses });\n});\n\naddActionHandler('toggleTinyTransfersHidden', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      areTinyTransfersHidden: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setCurrentTokenPeriod', (global, actions, { period }) => {\n  return updateCurrentAccountState(global, {\n    currentTokenPeriod: period,\n  });\n});\n\naddActionHandler('addAccount', async (global, actions, { method, password, isAuthFlow }) => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const isMnemonicImport = method === 'importMnemonic';\n\n  if (isPasswordPresent) {\n    if (!isAuthFlow) {\n      global = updateAccounts(global, {\n        isLoading: true,\n      });\n      setGlobal(global);\n    }\n\n    if (!(await callApi('verifyPassword', password))) {\n      global = getGlobal();\n      if (isAuthFlow) {\n        global = updateAuth(global, {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      } else {\n        global = updateAccounts(getGlobal(), {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      }\n      setGlobal(global);\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      global = setIsPinAccepted(getGlobal());\n      setGlobal(global);\n    }\n    await vibrateOnSuccess(true);\n  }\n\n  global = getGlobal();\n  if (isMnemonicImport || !isPasswordPresent) {\n    global = { ...global, isAddAccountModalOpen: undefined };\n  } else {\n    global = updateAccounts(global, { isLoading: true });\n  }\n  setGlobal(global);\n\n  if (!IS_DELEGATED_BOTTOM_SHEET) {\n    actions.addAccount2({ method, password });\n  } else {\n    callActionInMain('addAccount2', { method, password });\n  }\n});\n\naddActionHandler('addAccount2', (global, actions, { method, password }) => {\n  const isMnemonicImport = method === 'importMnemonic';\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const authState = isPasswordPresent\n    ? isMnemonicImport\n      ? AuthState.importWallet\n      : undefined\n    : (\n      getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  if (isMnemonicImport || !isPasswordPresent) {\n    global = { ...global, appState: AppState.Auth };\n  }\n  global = updateAuth(global, { password, state: authState });\n  global = clearCurrentTransfer(global);\n  global = clearCurrentSwap(global);\n\n  setGlobal(global);\n\n  if (isMnemonicImport) {\n    actions.startImportingWallet();\n  } else {\n    actions.startCreatingWallet();\n  }\n});\n\naddActionHandler('renameAccount', (global, actions, { accountId, title }) => {\n  global = { ...global, shouldForceAccountEdit: false };\n\n  setGlobal(renameAccount(global, accountId, title));\n\n  actions.renameNotificationAccount({ accountId });\n});\n\naddActionHandler('clearAccountError', (global) => {\n  return updateAccounts(global, { error: undefined });\n});\n\naddActionHandler('openAddAccountModal', (global, _, props) => {\n  const { forceAddingTonOnlyAccount } = props || {};\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openAddAccountModal', props);\n    return;\n  }\n\n  global = { ...global, isAddAccountModalOpen: true };\n\n  if (forceAddingTonOnlyAccount) {\n    global = updateAuth(global, { forceAddingTonOnlyAccount });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('closeAddAccountModal', (global, _, props) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  global = updateAuth(global, { forceAddingTonOnlyAccount: undefined });\n  global = { ...global, isAddAccountModalOpen: undefined };\n\n  return global;\n});\n\naddActionHandler('changeNetwork', (global, actions, { network }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTestnet: network === 'testnet',\n    },\n  };\n});\n\naddActionHandler('openSettings', (global) => {\n  global = updateSettings(global, { state: SettingsState.Initial });\n\n  return { ...global, areSettingsOpen: true };\n});\n\naddActionHandler('openSettingsWithState', (global, actions, { state }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openSettingsWithState', { state });\n    return;\n  }\n\n  global = updateSettings(global, { state });\n  setGlobal({ ...global, areSettingsOpen: true });\n});\n\naddActionHandler('setSettingsState', (global, actions, { state }) => {\n  global = updateSettings(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('closeSettings', (global) => {\n  if (!global.currentAccountId) {\n    return global;\n  }\n\n  return { ...global, areSettingsOpen: false };\n});\n\naddActionHandler('openBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openBackupWalletModal');\n    return undefined;\n  }\n\n  return { ...global, isBackupWalletModalOpen: true };\n});\n\naddActionHandler('closeBackupWalletModal', (global) => {\n  return { ...global, isBackupWalletModalOpen: undefined };\n});\n\naddActionHandler('toggleInvestorView', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isInvestorViewEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('changeLanguage', (global, actions, { langCode }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      langCode,\n    },\n  };\n});\n\naddActionHandler('toggleCanPlaySounds', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      canPlaySounds: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setLandscapeActionsActiveTabIndex', (global, actions, { index }) => {\n  return updateCurrentAccountState(global, {\n    landscapeActionsActiveTabIndex: index,\n  });\n});\n\naddActionHandler('closeSecurityWarning', (global) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isSecurityWarningHidden: true,\n    },\n  };\n});\n\naddActionHandler('toggleTokensWithNoCost', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { areTokensWithNoCostHidden: isEnabled });\n});\n\naddActionHandler('toggleSortByValue', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { isSortByValueEnabled: isEnabled });\n});\n\naddActionHandler('updateOrderedSlugs', (global, actions, { orderedSlugs }) => {\n  const accountSettings = selectCurrentAccountSettings(global);\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs,\n  });\n});\n\naddActionHandler('toggleTokenVisibility', (global, actions, { slug, shouldShow }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { alwaysShownSlugs = [], alwaysHiddenSlugs = [] } = accountSettings;\n  const alwaysShownSlugsSet = new Set(alwaysShownSlugs);\n  const alwaysHiddenSlugsSet = new Set(alwaysHiddenSlugs);\n\n  if (shouldShow) {\n    alwaysHiddenSlugsSet.delete(slug);\n    alwaysShownSlugsSet.add(slug);\n  } else {\n    alwaysShownSlugsSet.delete(slug);\n    alwaysHiddenSlugsSet.add(slug);\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    alwaysHiddenSlugs: Array.from(alwaysHiddenSlugsSet),\n    alwaysShownSlugs: Array.from(alwaysShownSlugsSet),\n  });\n});\n\naddActionHandler('deleteToken', (global, actions, { slug }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: accountSettings.orderedSlugs?.filter((s) => s !== slug),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((s) => s !== slug),\n    alwaysShownSlugs: accountSettings.alwaysShownSlugs?.filter((s) => s !== slug),\n    deletedSlugs: [...accountSettings.deletedSlugs ?? [], slug],\n    importedSlugs: accountSettings.importedSlugs?.filter((s) => s !== slug),\n  });\n});\n\naddActionHandler('checkAppVersion', (global) => {\n  fetch(`${APP_VERSION_URL}?${Date.now()}`)\n    .then((response) => response.text())\n    .then((version) => {\n      version = version.trim();\n\n      if (getIsAppUpdateNeeded(version, APP_VERSION)) {\n        global = getGlobal();\n        global = {\n          ...global,\n          isAppUpdateAvailable: true,\n          latestAppVersion: version.trim(),\n        };\n        setGlobal(global);\n      }\n    })\n    .catch((err) => {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.error('[checkAppVersion failed] ', err);\n      }\n    });\n});\n\naddActionHandler('requestConfetti', (global) => {\n  if (global.settings.animationLevel === ANIMATION_LEVEL_MIN) return global;\n\n  return {\n    ...global,\n    confettiRequestedAt: Date.now(),\n  };\n});\n\naddActionHandler('requestOpenQrScanner', async (global, actions) => {\n  if (getIsMobileTelegramApp()) {\n    const webApp = getTelegramApp();\n    webApp?.showScanQrPopup({}, (data) => {\n      void vibrateOnSuccess();\n      webApp.closeScanQrPopup();\n      actions.handleQrCode({ data });\n    });\n    return;\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('requestOpenQrScanner');\n    return;\n  }\n\n  let currentQrScan: GlobalState['currentQrScan'];\n  if (global.currentTransfer.state === TransferState.Initial) {\n    currentQrScan = { currentTransfer: global.currentTransfer };\n  } else if (global.currentSwap.state === SwapState.Blockchain) {\n    currentQrScan = { currentSwap: global.currentSwap };\n  } else if (global.currentDomainLinking.state === DomainLinkingState.Initial) {\n    currentQrScan = { currentDomainLinking: global.currentDomainLinking };\n  }\n\n  const { camera } = await BarcodeScanner.requestPermissions();\n  const isGranted = camera === 'granted' || camera === 'limited';\n  if (!isGranted) {\n    actions.showNotification({\n      message: getTranslation('Permission denied. Please grant camera permission to use the QR code scanner.'),\n    });\n    return;\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    isQrScannerOpen: true,\n    currentQrScan,\n  };\n\n  setGlobal(global);\n});\n\naddActionHandler('closeQrScanner', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeQrScanner');\n  }\n\n  return {\n    ...global,\n    isQrScannerOpen: undefined,\n    currentQrScan: undefined,\n  };\n});\n\naddActionHandler('handleQrCode', async (global, actions, { data }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('handleQrCode', { data });\n    return;\n  }\n\n  const { currentTransfer, currentSwap, currentDomainLinking } = global.currentQrScan || {};\n\n  if (currentTransfer) {\n    const transferParams = parseDeeplinkTransferParams(data, global);\n    if (transferParams) {\n      if ('error' in transferParams) {\n        actions.showError({ error: transferParams.error });\n        // Not returning on error is intentional\n      }\n      setGlobal(updateCurrentTransfer(global, {\n        ...currentTransfer,\n        ...omit(transferParams, ['error']),\n      }));\n    } else {\n      // Assuming that the QR code content is a plain wallet address\n      setGlobal(setCurrentTransferAddress(updateCurrentTransfer(global, currentTransfer), data));\n    }\n    return;\n  }\n\n  if (currentSwap || currentDomainLinking) {\n    const linkParams = parseDeeplinkTransferParams(data, global);\n    const toAddress = linkParams?.toAddress ?? data;\n    if (currentSwap) {\n      setGlobal(updateCurrentSwap(global, { ...currentSwap, toAddress }));\n    } else {\n      setGlobal(updateCurrentDomainLinking(global, { ...currentDomainLinking, walletAddress: toAddress }));\n    }\n    return;\n  }\n\n  if (await processDeeplink(data)) {\n    return;\n  }\n\n  global = getGlobal();\n\n  const plainAddressData = parsePlainAddressQr(global, data);\n  if (plainAddressData) {\n    actions.startTransfer({\n      ...plainAddressData,\n      isPortrait: getIsPortrait(),\n    });\n    return;\n  }\n\n  actions.showDialog({ title: 'This QR Code is not supported', message: '' });\n});\n\naddActionHandler('changeBaseCurrency', async (global, actions, { currency }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('changeBaseCurrency', { currency });\n  }\n\n  await callApi('setBaseCurrency', currency);\n  await callApi('tryUpdateTokens');\n  // Swap tokens will be merged with the new prices loaded in `tryUpdateTokens`\n  await callApi('tryUpdateSwapTokens');\n});\n\naddActionHandler('setIsPinAccepted', (global) => {\n  return setIsPinAccepted(global);\n});\n\naddActionHandler('clearIsPinAccepted', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    // Sometimes this action is called after the delegated bottom sheet is closed, e.g. on a component unmount.\n    // The problem is, delegated bottom sheet doesn't synchronize the global state when it's closed, so the pin pad\n    // can get stuck in the accepted state. To fix that, this action is called in the main WebView using a more reliable\n    // mechanism.\n    callActionInMain('clearIsPinAccepted');\n  }\n\n  return clearIsPinAccepted(global);\n});\n\naddActionHandler('openOnRampWidgetModal', (global, actions, { chain }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openOnRampWidgetModal', { chain });\n    return;\n  }\n\n  setGlobal({ ...global, chainForOnRampWidgetModal: chain });\n});\n\naddActionHandler('closeOnRampWidgetModal', (global) => {\n  setGlobal({ ...global, chainForOnRampWidgetModal: undefined });\n});\n\naddActionHandler('openMediaViewer', (global, actions, {\n  mediaId, mediaType, txId, hiddenNfts, noGhostAnimation,\n}) => {\n  const accountState = selectCurrentAccountState(global);\n  const { byAddress } = accountState?.nfts || {};\n  const nft = byAddress?.[mediaId];\n\n  if (!nft) return undefined;\n\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId,\n      mediaType,\n      txId,\n      hiddenNfts,\n      noGhostAnimation,\n    },\n  };\n});\n\naddActionHandler('closeMediaViewer', (global) => {\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId: undefined,\n      mediaType: undefined,\n    },\n  };\n});\n\naddActionHandler('setReceiveActiveTab', (global, actions, { chain }): GlobalState => {\n  return updateCurrentAccountState(global, { receiveModalChain: chain });\n});\n\naddActionHandler('openReceiveModal', (global, actions, params) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openReceiveModal', params);\n    return;\n  }\n\n  global = updateCurrentAccountState(global, { receiveModalChain: params?.chain });\n  global = { ...global, isReceiveModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeReceiveModal', (global): GlobalState => {\n  global = updateCurrentAccountState(global, { receiveModalChain: undefined });\n  return { ...global, isReceiveModalOpen: undefined };\n});\n\naddActionHandler('openInvoiceModal', (global, actions, params) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openInvoiceModal', params);\n    return;\n  }\n\n  global = updateCurrentAccountState(global, { invoiceTokenSlug: params?.tokenSlug });\n  setGlobal({ ...global, isInvoiceModalOpen: true });\n});\n\naddActionHandler('changeInvoiceToken', (global, actions, params) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('changeInvoiceToken', params);\n  }\n\n  global = updateCurrentAccountState(global, { invoiceTokenSlug: params.tokenSlug });\n  setGlobal(global);\n});\n\naddActionHandler('closeInvoiceModal', (global): GlobalState => {\n  global = updateCurrentAccountState(global, { invoiceTokenSlug: undefined });\n  return { ...global, isInvoiceModalOpen: undefined };\n});\n\naddActionHandler('showIncorrectTimeError', (global, actions) => {\n  actions.showDialog({\n    message: getTranslation('Time synchronization issue. Please ensure your device\\'s time settings are correct.'),\n  });\n\n  return { ...global, isIncorrectTimeNotificationReceived: true };\n});\n\naddActionHandler('openLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: true });\n});\n\naddActionHandler('closeLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: undefined });\n});\n\naddActionHandler('clearAccountLoading', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearAccountLoading');\n  }\n\n  setGlobal(updateAccounts(global, { isLoading: undefined }));\n});\n\naddActionHandler('setIsAccountLoading', (global, actions, { isLoading }) => {\n  setGlobal(updateAccounts(global, { isLoading }));\n});\n\naddActionHandler('authorizeDiesel', (global) => {\n  const address = selectCurrentAccount(global)!.addressByChain.ton;\n  if (!address) throw new Error('TON address missing');\n  setGlobal(updateCurrentAccountState(global, { isDieselAuthorizationStarted: true }));\n  void openUrl(`https://t.me/${BOT_USERNAME}?start=auth-${address}`);\n});\n\naddActionHandler('submitAppLockActivityEvent', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitAppLockActivityEvent');\n    return;\n  }\n  reportAppLockActivityEvent();\n});\n\naddActionHandler('closeAnyModal', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeAnyModal');\n    return;\n  }\n\n  closeModal();\n});\n\naddActionHandler('openExplore', (global) => {\n  return { ...global, isExploreOpen: true };\n});\n\naddActionHandler('closeExplore', (global) => {\n  return { ...global, isExploreOpen: undefined };\n});\n\naddActionHandler('openFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: true });\n\n  void vibrate();\n});\n\naddActionHandler('closeFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: undefined });\n\n  void vibrate();\n});\n\naddActionHandler('setIsSensitiveDataHidden', (global, actions, { isHidden }) => {\n  setGlobal(updateSettings(global, { isSensitiveDataHidden: isHidden ? true : undefined }));\n\n  void vibrate();\n});\n\naddActionHandler('setIsAppLockActive', (global, actions, { isActive }) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('setIsAppLockActive', { isActive });\n  }\n\n  setGlobal({ ...global, isAppLockActive: isActive || undefined });\n});\n\naddActionHandler('switchAccountAndOpenUrl', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccountAndOpenUrl', payload);\n    return;\n  }\n\n  await Promise.all([\n    // The browser is closed before opening the new URL, because otherwise the browser won't apply the new\n    // parameters from `payload`. It's important to wait for `closeAllOverlays` to finish, because until the in-app\n    // browser is closed, it won't open again.\n    closeAllOverlays(),\n    payload.accountId && switchAccount(global, payload.accountId, payload.network),\n  ]);\n\n  await openDeeplinkOrUrl(payload.url, payload);\n});\n\naddActionHandler('switchToWallet', (global: GlobalState, actions) => {\n  const { areSettingsOpen, isExploreOpen } = global;\n  const accountState = selectCurrentAccountState(global);\n  const areAssetsActive = accountState?.activeContentTab === ContentTab.Assets;\n  const isWalletTabActive = !isExploreOpen && !areSettingsOpen;\n\n  actions.closeExplore(undefined, { forceOnHeavyAnimation: true });\n  actions.closeSettings(undefined, { forceOnHeavyAnimation: true });\n\n  if (!areAssetsActive && isWalletTabActive) {\n    actions.selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n    actions.setActiveContentTab({ tab: ContentTab.Assets }, { forceOnHeavyAnimation: true });\n  }\n});\n\naddActionHandler('switchToExplore', (global: GlobalState, actions) => {\n  const { isExploreOpen } = global;\n\n  if (isExploreOpen) {\n    actions.closeSiteCategory(undefined, { forceOnHeavyAnimation: true });\n  }\n\n  actions.closeSettings(undefined, { forceOnHeavyAnimation: true });\n  actions.openExplore(undefined, { forceOnHeavyAnimation: true });\n});\n\naddActionHandler('switchToSettings', (global: GlobalState, actions) => {\n  actions.closeExplore(undefined, { forceOnHeavyAnimation: true });\n  actions.openSettings(undefined, { forceOnHeavyAnimation: true });\n});\n\naddActionHandler('setAppLayout', (global, actions, { layout }) => {\n  if (IS_ELECTRON) {\n    void window.electron?.changeAppLayout(layout);\n  } else {\n    void callApi('setAppLayout', layout);\n  }\n});\n","import { SignDataState, TransferState } from '../../types';\n\nimport { BROWSER_HISTORY_LIMIT } from '../../../config';\nimport { getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport { unique } from '../../../util/iteratees';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearDappConnectRequestError,\n  resetHardware,\n  updateCurrentAccountState,\n  updateCurrentDappSignData,\n  updateCurrentDappTransfer,\n} from '../../reducers';\nimport { selectCurrentAccountState, selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('clearDappConnectRequestError', (global) => {\n  global = clearDappConnectRequestError(global);\n  setGlobal(global);\n});\n\naddActionHandler('showDappTransferTransaction', (global, actions, payload) => {\n  const { transactionIdx } = payload;\n\n  global = updateCurrentDappTransfer(global, {\n    state: TransferState.Confirm,\n    viewTransactionOnIdx: transactionIdx,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setDappTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  global = updateCurrentDappTransfer(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferConfirm', async (global, actions) => {\n  const inMemoryPassword = await getInMemoryPassword();\n\n  global = getGlobal();\n\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentDappTransfer(global, { state: TransferState.ConnectHardware });\n    setGlobal(global);\n  } else if (inMemoryPassword) {\n    global = updateCurrentDappTransfer(global, { isLoading: true });\n    setGlobal(global);\n    actions.submitDappTransfer({ password: inMemoryPassword });\n  } else {\n    global = updateCurrentDappTransfer(global, { state: TransferState.Password });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearDappTransferError', (global) => {\n  global = updateCurrentDappTransfer(global, {\n    error: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('openBrowser', (global, actions, {\n  url, title, subtitle,\n}) => {\n  global = {\n    ...global,\n    currentBrowserOptions: {\n      url, title, subtitle,\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('closeBrowser', (global) => {\n  global = { ...global, currentBrowserOptions: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('addSiteToBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = unique([\n    url,\n    ...accountState?.browserHistory || [],\n  ]).slice(0, BROWSER_HISTORY_LIMIT);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('removeSiteFromBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = accountState?.browserHistory?.filter((currentUrl) => currentUrl !== url);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory?.length ? newHistory : undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('updateDappLastOpenedAt', (global, actions, { url }) => {\n  const { dappLastOpenedDatesByUrl } = selectCurrentAccountState(global)!;\n\n  const newDates = {\n    ...dappLastOpenedDatesByUrl,\n    [url]: Date.now(),\n  };\n\n  global = updateCurrentAccountState(global, { dappLastOpenedDatesByUrl: newDates });\n  setGlobal(global);\n});\n\naddActionHandler('openSiteCategory', (global, actions, { id }) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: id });\n});\n\naddActionHandler('closeSiteCategory', (global) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: undefined });\n});\n\naddActionHandler('closeDappTransfer', (global) => {\n  global = updateCurrentDappTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('setDappSignDataScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  return updateCurrentDappSignData(global, { state });\n});\n\naddActionHandler('submitDappSignDataConfirm', async (global, actions) => {\n  const inMemoryPassword = await getInMemoryPassword();\n\n  global = getGlobal();\n\n  if (inMemoryPassword) {\n    global = updateCurrentDappSignData(global, { isLoading: true });\n    setGlobal(global);\n    actions.submitDappSignData({ password: inMemoryPassword });\n  } else {\n    global = updateCurrentDappSignData(global, { state: SignDataState.Password });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearDappSignDataError', (global) => {\n  return updateCurrentDappSignData(global, { error: undefined });\n});\n\naddActionHandler('closeDappSignData', (global) => {\n  return updateCurrentDappSignData(global, { state: SignDataState.None });\n});\n","import type { LedgerTransport } from '../../../util/ledger/types';\nimport { AppState, HardwareConnectState } from '../../types';\n\nimport { IS_CAPACITOR, IS_EXTENSION } from '../../../config';\nimport { closeThisTab, onLedgerTabClose, openLedgerTab } from '../../../util/ledger/tab';\nimport { isLedgerConnectionBroken } from '../../../util/ledger/utils';\nimport { logDebugError } from '../../../util/logs';\nimport { pause } from '../../../util/schedulers';\nimport { IS_LEDGER_EXTENSION_TAB } from '../../../util/windowEnvironment';\nimport { addActionHandler, getActions, getGlobal, setGlobal } from '../../index';\nimport { resetHardware, updateHardware } from '../../reducers';\nimport { selectAllHardwareAccounts, selectCurrentNetwork, selectLedgerAccountIndexToImport } from '../../selectors';\n\n// There is no long-term Ledger connection state in the application. Every time the application needs to interact with\n// a Ledger device, it ensures the device is connected using the <LedgerConnect> component, and communicates with the\n// device immediately after that.\n\nconst OPEN_LEDGER_TAB_DELAY = 500;\n\naddActionHandler('initLedgerPage', (global) => {\n  return { ...global, appState: AppState.Ledger };\n});\n\naddActionHandler('openHardwareWalletModal', (global) => {\n  global = resetHardware(global);\n\n  return { ...global, isHardwareModalOpen: true };\n});\n\naddActionHandler('closeHardwareWalletModal', (global) => {\n  return { ...global, isHardwareModalOpen: false };\n});\n\naddActionHandler('initializeHardwareWalletModal', async (global, actions) => {\n  const ledgerApi = await import('../../../util/ledger');\n  const {\n    isBluetoothAvailable,\n    isUsbAvailable,\n  } = await ledgerApi.detectAvailableTransports();\n  const hasUsbDevice = await ledgerApi.hasUsbDevice();\n  const availableTransports: LedgerTransport[] = [];\n  if (isUsbAvailable) {\n    availableTransports.push('usb');\n  }\n  if (isBluetoothAvailable) {\n    availableTransports.push('bluetooth');\n  }\n\n  global = getGlobal();\n  global = updateHardware(global, { availableTransports });\n\n  if (availableTransports.length === 0) {\n    setGlobal(global);\n    if (IS_CAPACITOR) {\n      actions.showDialog({\n        title: 'Bluetooth unavailable',\n        message: '$bluetooth_enable_guide',\n        buttons: {\n          confirm: { title: 'Open Settings', action: 'openBluetoothSettings' },\n          cancel: { title: 'Cancel' },\n        },\n      });\n    } else {\n      actions.showNotification({\n        message: 'Ledger is not supported on this device.',\n      });\n    }\n  } else if (availableTransports.length === 1) {\n    setGlobal(global);\n\n    // Chrome requires a user gesture before showing the WebHID permission dialog in extension tabs.\n    if (!IS_LEDGER_EXTENSION_TAB) {\n      actions.initializeHardwareWalletConnection({ transport: availableTransports[0] });\n    }\n  } else {\n    if (!hasUsbDevice) {\n      global = updateHardware(global, { lastUsedTransport: 'bluetooth' });\n    }\n    setGlobal(global);\n  }\n});\n\naddActionHandler('initializeHardwareWalletConnection', async (global, actions, params) => {\n  await connectLedger(params.transport);\n});\n\nasync function connectLedger(transport: LedgerTransport, noRetry?: boolean, noRemoteTab?: boolean) {\n  let global = getGlobal();\n\n  setGlobal(updateHardware(global, {\n    hardwareState: HardwareConnectState.Connecting,\n    hardwareWallets: undefined,\n    isLedgerConnected: undefined,\n    isTonAppConnected: undefined,\n  }));\n\n  const ledgerApi = await import('../../../util/ledger');\n  const isLedgerConnected = await ledgerApi.connectLedger(transport);\n  global = getGlobal();\n\n  if (!isLedgerConnected) {\n    if (IS_EXTENSION && !IS_LEDGER_EXTENSION_TAB && !noRemoteTab) {\n      return connectLedgerViaRemoteTab(transport);\n    }\n\n    global = updateHardware(global, {\n      isLedgerConnected: false,\n      hardwareState: HardwareConnectState.Failed,\n    });\n\n    if (transport === 'usb' && global.hardware.availableTransports?.includes('bluetooth')) {\n      global = updateHardware(global, { lastUsedTransport: 'bluetooth' });\n    }\n\n    setGlobal(global);\n    return;\n  }\n\n  setGlobal(updateHardware(global, {\n    isLedgerConnected: true,\n  }));\n\n  // The only thing needed from the remote tab is getting the user permission to use the HID device (see the\n  // `openLedgerTab` description for more details). Successful connection means that the permission is granted.\n  if (IS_LEDGER_EXTENSION_TAB) {\n    return closeThisTab();\n  }\n\n  try {\n    const isTonAppConnected = await ledgerApi.waitLedgerTonApp();\n    global = getGlobal();\n\n    if (!isTonAppConnected) {\n      setGlobal(updateHardware(global, {\n        isTonAppConnected: false,\n        hardwareState: HardwareConnectState.Failed,\n      }));\n      return;\n    }\n\n    setGlobal(updateHardware(global, {\n      isTonAppConnected: true,\n    }));\n\n    // todo: Load the wallets only during authentication\n    const hardwareWallets = await getLedgerWallets(ledgerApi);\n    const nextHardwareState = hardwareWallets.length === 1\n      ? HardwareConnectState.ConnectedWithSingleWallet\n      : HardwareConnectState.ConnectedWithSeveralWallets;\n\n    setGlobal(updateHardware(getGlobal(), {\n      hardwareWallets,\n      hardwareState: nextHardwareState,\n      lastUsedTransport: transport,\n    }));\n  } catch (err: any) {\n    const isLedgerDisconnected = isLedgerConnectionBroken(err.name);\n\n    if (isLedgerDisconnected && !noRetry) {\n      return connectLedger(transport, true, noRemoteTab);\n    }\n\n    global = getGlobal();\n    setGlobal(updateHardware(global, {\n      isLedgerConnected: !isLedgerDisconnected,\n      isTonAppConnected: isLedgerDisconnected ? undefined : global.hardware.isTonAppConnected,\n      hardwareState: HardwareConnectState.Failed,\n    }));\n\n    logDebugError('connectHardwareWallet', err);\n  }\n}\n\nasync function connectLedgerViaRemoteTab(transport: LedgerTransport) {\n  setGlobal(updateHardware(getGlobal(), {\n    hardwareState: HardwareConnectState.WaitingForRemoteTab,\n  }));\n\n  await pause(OPEN_LEDGER_TAB_DELAY);\n  const id = await openLedgerTab();\n  const popup = await chrome.windows.getCurrent();\n\n  await new Promise<void>((resolve) => onLedgerTabClose(id, resolve));\n  await chrome.windows.update(popup.id!, { focused: true });\n  await connectLedger(transport, false, true);\n}\n\nasync function getLedgerWallets(ledgerApi: typeof import('../../../util/ledger')) {\n  const global = getGlobal();\n  const network = selectCurrentNetwork(global);\n  const lastIndex = selectLedgerAccountIndexToImport(global, network);\n  const currentHardwareAddresses = selectAllHardwareAccounts(global, network)\n    .map((account) => account.addressByChain.ton)\n    .filter(Boolean);\n  const hardwareWallets = await ledgerApi.getNextLedgerWallets(\n    network,\n    lastIndex,\n    currentHardwareAddresses,\n  );\n\n  if ('error' in hardwareWallets) {\n    getActions().showError({ error: hardwareWallets.error });\n    throw Error(hardwareWallets.error);\n  }\n\n  return hardwareWallets;\n}\n\naddActionHandler('resetHardwareWalletConnect', (global) => {\n  return resetHardware(global);\n});\n\naddActionHandler('loadMoreHardwareWallets', async (global, actions, { lastIndex }) => {\n  const network = selectCurrentNetwork(global);\n  const oldHardwareWallets = global.hardware.hardwareWallets ?? [];\n  const ledgerApi = await import('../../../util/ledger');\n  const hardwareWallets = await ledgerApi.getNextLedgerWallets(network, lastIndex);\n\n  global = getGlobal();\n\n  if ('error' in hardwareWallets) {\n    actions.showError({ error: hardwareWallets.error });\n    throw Error(hardwareWallets.error);\n  }\n\n  global = updateHardware(global, {\n    hardwareWallets: oldHardwareWallets.concat(hardwareWallets),\n  });\n  setGlobal(global);\n});\n","import { addCallback } from '../../../lib/teact/teactn';\n\nimport type { GlobalState } from '../../types';\nimport { SettingsState } from '../../types';\n\nimport { setInMemoryPasswordSignal } from '../../../util/authApi/inMemoryPasswordStore';\nimport { setLanguage } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport switchTheme from '../../../util/switchTheme';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../..';\nimport { resetHardware, updateAccountSettings, updateSettings } from '../../reducers';\nimport { selectIsBiometricAuthEnabled } from '../../selectors';\n\nlet prevGlobal: GlobalState | undefined;\n\naddCallback((global: GlobalState) => {\n  if (!prevGlobal || !(prevGlobal as AnyLiteral).settings) {\n    prevGlobal = global;\n    return;\n  }\n\n  const { settings: prevSettings } = prevGlobal;\n  const { settings } = global;\n\n  if (settings.theme !== prevSettings.theme) {\n    switchTheme(settings.theme);\n  }\n\n  if (settings.langCode !== prevSettings.langCode) {\n    void setLanguage(settings.langCode);\n  }\n\n  prevGlobal = global;\n});\n\naddActionHandler('setAppLockValue', (global, actions, { value, isEnabled }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      autolockValue: value,\n      isAppLockEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setIsManualLockActive', (global, actions, { isActive, shouldHideBiometrics }) => {\n  return {\n    ...global,\n    isManualLockActive: isActive,\n    appLockHideBiometrics: shouldHideBiometrics,\n  };\n});\n\naddActionHandler('setIsAutoConfirmEnabled', (global, actions, { isEnabled }) => {\n  if (!isEnabled) {\n    actions.setInMemoryPassword({ password: undefined, force: true });\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isAutoConfirmEnabled: isEnabled || undefined,\n    },\n  };\n});\n\naddActionHandler('setIsAllowSuspiciousActions', (global, actions, { isEnabled }) => {\n  const accountId = global.currentAccountId!;\n\n  return updateAccountSettings(global, accountId, {\n    isAllowSuspiciousActions: isEnabled || undefined,\n  });\n});\n\naddActionHandler('setInMemoryPassword', (global, actions, { password, isFinalCall, force }) => {\n  // `global` is not loaded in the NBS until it's opened for the first time, so `isAutoConfirmEnabled` may be\n  // incorrectly `undefined` when Auto Confirm is actually enabled. To mitigate that, we skip checking the setting\n  // when `isFinalCall` is `true`, because in this case the action is fired by the main WebView only when Auto Confirm is enabled.\n  if (!(global.settings.isAutoConfirmEnabled || isFinalCall || force)) {\n    return global;\n  }\n\n  // If biometrics are enabled, we don't need to set the password in memory\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  if (isBiometricAuthEnabled) {\n    return global;\n  }\n\n  setInMemoryPasswordSignal(password);\n\n  if (!isFinalCall) {\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      void callActionInNative('setInMemoryPassword', { password, isFinalCall: true });\n    }\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void callActionInMain('setInMemoryPassword', { password, isFinalCall: true });\n    }\n  }\n\n  return global;\n});\n\naddActionHandler('openSettingsHardwareWallet', (global) => {\n  global = resetHardware(global);\n  global = updateSettings(global, { state: SettingsState.LedgerConnectHardware });\n\n  setGlobal(global);\n});\n","import { TELEGRAM_GIFTS_SUPER_COLLECTION } from '../../../config';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  addToSelectedAddresses,\n  removeFromSelectedAddresses,\n  updateAccountState,\n  updateCurrentAccountState,\n} from '../../reducers';\nimport { selectAccountState, selectCurrentAccountState } from '../../selectors';\n\naddActionHandler('openNftCollection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: address,\n    },\n  });\n  return global;\n});\n\naddActionHandler('closeNftCollection', (global) => {\n  const accountState = selectCurrentAccountState(global);\n  global = updateCurrentAccountState(global, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: undefined,\n    },\n    selectedNftsToHide: undefined,\n  });\n  return global;\n});\n\naddActionHandler('selectNfts', (global, actions, { addresses }) => {\n  const accountId = global.currentAccountId!;\n  global = addToSelectedAddresses(global, accountId, addresses);\n  setGlobal(global);\n});\n\naddActionHandler('selectAllNfts', (global, actions, { collectionAddress }) => {\n  const accountId = global.currentAccountId!;\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectAccountState(global, accountId) || {};\n\n  const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n  const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n  const { nfts: accountNfts } = selectAccountState(global, accountId)!;\n  const nfts = Object.values(accountNfts!.byAddress!).filter((nft) => (\n    !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n  ) && !blacklistedNftAddressesSet.has(nft.address) && (\n    collectionAddress === undefined || (nft.collectionAddress === collectionAddress)\n  ));\n\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountNfts!,\n      selectedAddresses: nfts.map(({ address }) => address),\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearNftSelection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  global = removeFromSelectedAddresses(global, accountId, address);\n  setGlobal(global);\n});\n\naddActionHandler('clearNftsSelection', (global) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      selectedAddresses: [],\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('addCollectionTab', (global, actions, { collectionAddress, isAuto }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  const currentNfts = accountState?.nfts || { byAddress: {} };\n\n  if (isAuto && collectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION && currentNfts.wasTelegramGiftsAutoAdded) {\n    return global;\n  }\n\n  const existingCollectionTabs = currentNfts.collectionTabs || [];\n\n  if (!existingCollectionTabs.includes(collectionAddress)) {\n    global = updateAccountState(global, accountId, {\n      nfts: {\n        ...currentNfts,\n        collectionTabs: [...existingCollectionTabs, collectionAddress],\n        ...(isAuto && collectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION && { wasTelegramGiftsAutoAdded: true }),\n      },\n    });\n  }\n\n  return global;\n});\n\naddActionHandler('removeCollectionTab', (global, actions, { collectionAddress }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  const currentNfts = accountState?.nfts || { byAddress: {} };\n\n  if (!currentNfts.collectionTabs) {\n    return global;\n  }\n\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...currentNfts,\n      collectionTabs: currentNfts.collectionTabs.filter((address) => address !== collectionAddress),\n    },\n  });\n\n  return global;\n});\n","import { VestingUnfreezeState } from '../../types';\n\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport { resetHardware, updateVesting } from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('openVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: true });\n});\n\naddActionHandler('closeVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: undefined });\n});\n\naddActionHandler('startClaimingVesting', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startClaimingVesting');\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n  global = { ...global, isVestingModalOpen: undefined };\n  global = updateVesting(global, accountId, { isConfirmRequested: true });\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateVesting(global, accountId, { unfreezeState: VestingUnfreezeState.ConnectHardware });\n  } else {\n    global = updateVesting(global, accountId, { unfreezeState: VestingUnfreezeState.Password });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('cancelClaimingVesting', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { isConfirmRequested: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('clearVestingError', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { error: undefined });\n  setGlobal(global);\n});\n","import { ContentTab } from '../../types';\n\nimport { areSortedArraysEqual, unique } from '../../../util/iteratees';\nimport { addActionHandler } from '../../index';\nimport { updateCurrentAccountSettings } from '../../reducers';\nimport { selectCurrentAccountSettings, selectCurrentAccountTokens } from '../../selectors';\n\naddActionHandler('rebuildOrderedSlugs', (global) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { orderedSlugs = [] } = accountSettings;\n  const accountTokens = selectCurrentAccountTokens(global) ?? [];\n  const allSlugs = accountTokens.map(({ slug }) => slug);\n  const newOrderedSlugs = unique([...orderedSlugs, ...allSlugs]);\n\n  if (areSortedArraysEqual(orderedSlugs, newOrderedSlugs)) {\n    return global;\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: newOrderedSlugs,\n  });\n});\n\naddActionHandler('showTokenActivity', (global, actions, { slug }) => {\n  actions.selectToken({ slug }, { forceOnHeavyAnimation: true });\n  actions.setActiveContentTab({ tab: ContentTab.Activity });\n});\n","import { ActiveTab, TransferState } from '../../types';\n\nimport { getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport { fromDecimal, toDecimal } from '../../../util/decimals';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { resetHardware, setCurrentTransferAddress, updateCurrentTransfer } from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('startTransfer', (global, actions, payload) => {\n  const isOpen = global.currentTransfer.state !== TransferState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startTransfer', payload);\n    return;\n  }\n\n  const { isPortrait, ...rest } = payload ?? {};\n\n  const nftTokenSlug = Symbol('nft');\n  const previousFeeTokenSlug = global.currentTransfer.nfts?.length ? nftTokenSlug : global.currentTransfer.tokenSlug;\n  const nextFeeTokenSlug = payload?.nfts?.length ? nftTokenSlug : payload?.tokenSlug;\n  const shouldClearFee = nextFeeTokenSlug && nextFeeTokenSlug !== previousFeeTokenSlug;\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: isPortrait ? TransferState.Initial : TransferState.None,\n    error: undefined,\n    ...(shouldClearFee ? { fee: undefined, realFee: undefined, diesel: undefined } : {}),\n    ...rest,\n  }));\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n});\n\naddActionHandler('changeTransferToken', (global, actions, { tokenSlug, withResetAmount }) => {\n  const { amount, tokenSlug: currentTokenSlug, nfts } = global.currentTransfer;\n  if (!nfts?.length && tokenSlug === currentTokenSlug && !withResetAmount) {\n    return;\n  }\n\n  const currentToken = currentTokenSlug ? global.tokenInfo.bySlug[currentTokenSlug] : undefined;\n  const newToken = global.tokenInfo.bySlug[tokenSlug];\n\n  if (withResetAmount) {\n    global = updateCurrentTransfer(global, { amount: undefined });\n  } else if (amount && currentToken?.decimals !== newToken?.decimals) {\n    global = updateCurrentTransfer(global, {\n      amount: fromDecimal(toDecimal(amount, currentToken?.decimals), newToken?.decimals),\n    });\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    tokenSlug,\n    fee: undefined,\n    realFee: undefined,\n    diesel: undefined,\n    nfts: undefined,\n  }));\n});\n\naddActionHandler('setTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  return updateCurrentTransfer(global, { state });\n});\n\naddActionHandler('setTransferAmount', (global, actions, { amount }) => {\n  return updateCurrentTransfer(global, { amount });\n});\n\naddActionHandler('setTransferToAddress', (global, actions, { toAddress }) => {\n  return setCurrentTransferAddress(global, toAddress);\n});\n\naddActionHandler('setTransferComment', (global, actions, { comment }) => {\n  return updateCurrentTransfer(global, { comment });\n});\n\naddActionHandler('setTransferShouldEncrypt', (global, actions, { shouldEncrypt }) => {\n  return updateCurrentTransfer(global, { shouldEncrypt });\n});\n\naddActionHandler('submitTransferConfirm', async (global, actions) => {\n  const inMemoryPassword = await getInMemoryPassword();\n\n  global = getGlobal();\n\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentTransfer(global, { state: TransferState.ConnectHardware });\n    setGlobal(global);\n  } else if (inMemoryPassword) {\n    global = updateCurrentTransfer(global, { isLoading: true });\n    setGlobal(global);\n    actions.submitTransfer({ password: inMemoryPassword });\n  } else {\n    global = updateCurrentTransfer(global, { state: TransferState.Password });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearTransferError', (global) => {\n  setGlobal(updateCurrentTransfer(global, { error: undefined }));\n});\n\naddActionHandler('dismissTransferScamWarning', (global) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('dismissTransferScamWarning');\n  }\n\n  global = updateCurrentTransfer(global, { scamWarningType: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('showTransferScamWarning', (global, actions, { type }) => {\n  global = updateCurrentTransfer(global, { scamWarningType: type });\n  setGlobal(global);\n});\n","import { addActionHandler } from '../../index';\n\naddActionHandler('setTheme', (global, actions, { theme }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      theme,\n    },\n  };\n});\n\naddActionHandler('setAnimationLevel', (global, actions, { level }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      animationLevel: level,\n    },\n  };\n});\n","import { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { isKeyCountGreater } from '../../../util/isEmptyObject';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  deleteAllNotificationAccounts,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\naddActionHandler('tryAddNotificationAccount', (global, actions, { accountId }) => {\n  if (\n    global.pushNotifications.isAvailable\n    && Object.keys(selectAccounts(global) || {}).length <= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('renameNotificationAccount', (global, actions, { accountId }) => {\n  const { enabledAccounts, isAvailable } = global.pushNotifications;\n\n  if (\n    isAvailable\n    && enabledAccounts?.[accountId]\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('toggleNotificationAccount', (global, actions, { accountId }) => {\n  const {\n    enabledAccounts, userToken, platform,\n  } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  const isExists = enabledAccounts && enabledAccounts[accountId];\n\n  if (!isExists && enabledAccounts && isKeyCountGreater(enabledAccounts, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT - 1)) {\n    return;\n  }\n\n  if (isExists) {\n    actions.deleteNotificationAccount({ accountId, withAbort: true });\n  } else {\n    actions.createNotificationAccount({ accountId, withAbort: true });\n  }\n});\n\naddActionHandler('deleteAllNotificationAccounts', async (global, actions, props) => {\n  const {\n    enabledAccounts, userToken,\n  } = global.pushNotifications;\n\n  if (!enabledAccounts || !userToken) {\n    return;\n  }\n\n  const accountIds = props?.accountIds || Object.keys(enabledAccounts);\n\n  await callApi(\n    'unsubscribeNotifications',\n    {\n      userToken,\n      addresses: Object.values(selectNotificationTonAddressesSlow(global, accountIds)),\n    },\n  );\n\n  global = getGlobal();\n  setGlobal(deleteAllNotificationAccounts(global));\n});\n","export const COLOR_COUNT = 2;\nexport const QUALITY = 1;\n\nexport const ACCENT_COLORS = {\n  light: [\n    '#31AFC7', '#35C759', '#FF9500', '#FF2C55',\n    '#AF52DE', '#5856D7', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#1FC863', '#929395', '#E4B102',\n    '#000000',\n  ],\n  dark: [\n    '#3AB5CC', '#32D74B', '#FF9F0B', '#FF325A',\n    '#BF5AF2', '#7977FF', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#2CD36F', '#C3C5C6', '#DDBA00',\n    '#FFFFFF',\n  ],\n} as const;\nexport const ACCENT_RADIOACTIVE_INDEX = 13;\nexport const ACCENT_SILVER_INDEX = 14;\nexport const ACCENT_GOLD_INDEX = 15;\nexport const ACCENT_BNW_INDEX = 16;\n\nconst excludedIndices = new Set([\n  ACCENT_RADIOACTIVE_INDEX,\n  ACCENT_SILVER_INDEX,\n  ACCENT_GOLD_INDEX,\n  ACCENT_BNW_INDEX,\n]);\n\nexport const COLORS_TO_DETECT = ACCENT_COLORS.light\n  .map((color, index) => ({ color, index }))\n  .filter(({ index }) => !excludedIndices.has(index));\n","import { type ElementRef, useLayoutEffect } from '../../lib/teact/teact';\nimport { setExtraStyles, toggleExtraClass } from '../../lib/teact/teact-dom';\n\nimport type { ApiNft } from '../../api/types';\nimport type { AppTheme } from '../../global/types';\n\nimport { MAX_WORKERS, requestMediaWorker } from '../launchMediaWorkers';\nimport { logDebugError } from '../logs';\nimport { getCardNftImageUrl } from '../url';\nimport {\n  ACCENT_BNW_INDEX,\n  ACCENT_COLORS,\n  ACCENT_GOLD_INDEX,\n  ACCENT_RADIOACTIVE_INDEX,\n  ACCENT_SILVER_INDEX,\n  COLOR_COUNT,\n  QUALITY,\n} from './constants';\n\nconst HEX_80_PERCENT = 'CC';\nconst HEX_10_PERCENT = '1A';\n\nexport function useAccentColor(\n  elementRefOrBody: ElementRef<HTMLElement> | 'body',\n  appTheme: AppTheme,\n  accentColorIndex: number | undefined,\n) {\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n\n  useLayoutEffect(() => {\n    const element = elementRefOrBody === 'body' ? document.body : elementRefOrBody.current;\n    if (!element) return;\n\n    setExtraStyles(element, {\n      '--color-accent': accentColor || 'inherit',\n      '--color-accent-10o': accentColor ? `${accentColor}${HEX_10_PERCENT}` : 'inherit',\n      '--color-accent-button-background': accentColor || 'inherit',\n      '--color-accent-button-background-hover': accentColor ? `${accentColor}${HEX_80_PERCENT}` : 'inherit',\n      '--color-accent-button-text': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n      '--color-accent-button-text-hover': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n    });\n\n    toggleExtraClass(document.documentElement, 'is-white-accent', accentColor === '#FFFFFF');\n  }, [elementRefOrBody, accentColor]);\n}\n\nexport async function getAccentColorIndexFromNft(nft: ApiNft) {\n  const { mtwCardType, mtwCardBorderShineType } = nft.metadata;\n\n  if (mtwCardBorderShineType === 'radioactive') {\n    return ACCENT_RADIOACTIVE_INDEX;\n  }\n  if (mtwCardType === 'silver') {\n    return ACCENT_SILVER_INDEX;\n  }\n  if (mtwCardType === 'gold') {\n    return ACCENT_GOLD_INDEX;\n  }\n  if (mtwCardType === 'platinum' || mtwCardType === 'black') {\n    return ACCENT_BNW_INDEX;\n  }\n\n  const src = getCardNftImageUrl(nft);\n  if (!src) return undefined;\n\n  try {\n    return await requestMediaWorker({\n      name: 'offscreen-canvas:processNftImage',\n      args: [src, QUALITY, COLOR_COUNT],\n    }, Math.round(nft.index) % MAX_WORKERS);\n  } catch (error) {\n    logDebugError('getAccentColorIndexFromNft', error);\n    return undefined;\n  }\n}\n","import type { GlobalState } from '../../types';\nimport { MintCardState } from '../../types';\n\nimport { getAccentColorIndexFromNft } from '../../../util/accentColor';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { resetHardware, updateCurrentAccountSettings, updateMintCards } from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('openMintCardModal', (global): GlobalState => {\n  return updateMintCards(global, { state: MintCardState.Initial });\n});\n\naddActionHandler('closeMintCardModal', (global): GlobalState => {\n  return { ...global, currentMintCard: undefined };\n});\n\naddActionHandler('startCardMinting', (global, action, { type }): GlobalState => {\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateMintCards(global, { state: MintCardState.ConnectHardware });\n  } else {\n    global = updateMintCards(global, { state: MintCardState.Password });\n  }\n\n  return global;\n});\n\naddActionHandler('clearMintCardError', (global): GlobalState => {\n  return updateMintCards(global, { error: undefined });\n});\n\naddActionHandler('setCardBackgroundNft', (global, actions, { nft }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('setCardBackgroundNft', { nft });\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: nft });\n  setGlobal(global);\n});\n\naddActionHandler('clearCardBackgroundNft', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearCardBackgroundNft');\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('installAccentColorFromNft', async (global, actions, { nft }) => {\n  const accentColorIndex = await getAccentColorIndexFromNft(nft);\n\n  global = getGlobal();\n  global = updateCurrentAccountSettings(global, {\n    accentColorNft: nft,\n    accentColorIndex,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearAccentColorFromNft', (global) => {\n  return updateCurrentAccountSettings(global, {\n    accentColorNft: undefined,\n    accentColorIndex: undefined,\n  });\n});\n","import { DomainLinkingState, DomainRenewalState } from '../../types';\n\nimport { waitFor } from '../../../util/schedulers';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { INITIAL_STATE } from '../../initialState';\nimport { resetHardware, updateCurrentDomainLinking, updateCurrentDomainRenewal } from '../../reducers';\nimport { selectCurrentAccountState, selectIsHardwareAccount } from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\naddActionHandler('openDomainRenewalModal', async (global, actions, { accountId, network, addresses }) => {\n  if (accountId) {\n    await Promise.all([\n      closeAllOverlays(),\n      switchAccount(global, accountId, network),\n    ]);\n  }\n  // After switching account, wait for nft domains to be fetched\n  if (!(await waitFor(() => Boolean(selectCurrentAccountState(getGlobal())?.nfts?.byAddress), 1000, 30))) {\n    return;\n  }\n\n  global = getGlobal();\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  addresses = (addresses || []).filter((address) => byAddress?.[address]);\n  if (!addresses.length) {\n    return;\n  }\n\n  global = updateCurrentDomainRenewal(global, {\n    state: DomainRenewalState.Initial,\n    addresses,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('startDomainsRenewal', (global) => {\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentDomainRenewal(global, { state: DomainRenewalState.ConnectHardware });\n  } else {\n    global = updateCurrentDomainRenewal(global, { state: DomainRenewalState.Password });\n  }\n\n  return global;\n});\n\naddActionHandler('clearDomainsRenewalError', (global) => {\n  return updateCurrentDomainRenewal(global, {\n    error: undefined,\n  });\n});\n\naddActionHandler('cancelDomainsRenewal', (global) => {\n  return {\n    ...global,\n    currentDomainRenewal: INITIAL_STATE.currentDomainRenewal,\n  };\n});\n\naddActionHandler('openDomainLinkingModal', (global, actions, { address }) => {\n  return updateCurrentDomainLinking(global, {\n    state: DomainLinkingState.Initial,\n    address,\n  });\n});\n\naddActionHandler('startDomainLinking', (global) => {\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentDomainLinking(global, { state: DomainLinkingState.ConnectHardware });\n  } else {\n    global = updateCurrentDomainLinking(global, { state: DomainLinkingState.Password });\n  }\n\n  return global;\n});\n\naddActionHandler('clearDomainLinkingError', (global) => {\n  return updateCurrentDomainLinking(global, {\n    error: undefined,\n  });\n});\n\naddActionHandler('cancelDomainLinking', (global) => {\n  return {\n    ...global,\n    currentDomainLinking: INITIAL_STATE.currentDomainLinking,\n  };\n});\n\naddActionHandler('setDomainLinkingWalletAddress', (global, actions, { address }) => {\n  return updateCurrentDomainLinking(global, { walletAddress: address });\n});\n","import { getIsHeavyAnimating, onFullyIdle } from '../lib/teact/teact';\nimport { addCallback, removeCallback } from '../lib/teact/teactn';\n\nimport type { ApiActivity } from '../api/types';\nimport type {\n  AccountState,\n  GlobalState,\n  SavedAddress,\n  TokenPeriod,\n} from './types';\nimport {\n  StakingState,\n} from './types';\n\nimport {\n  DEBUG,\n  GLOBAL_STATE_CACHE_DISABLED,\n  GLOBAL_STATE_CACHE_KEY,\n  IS_CAPACITOR,\n  MAIN_ACCOUNT_ID,\n  TOKEN_INFO,\n  TONCOIN,\n} from '../config';\nimport { buildAccountId, parseAccountId } from '../util/account';\nimport { getActivityTokenSlugs, getIsActivityPending, getIsTxIdLocal } from '../util/activities';\nimport { bigintReviver } from '../util/bigint';\nimport isEmptyObject from '../util/isEmptyObject';\nimport {\n  cloneDeep, extractKey, filterValues, mapValues, pick, pickTruthy,\n} from '../util/iteratees';\nimport { clearPoisoningCache, updatePoisoningCache } from '../util/poisoningHash';\nimport { onBeforeUnload, throttle } from '../util/schedulers';\nimport { getIsActiveStakingState } from '../util/staking';\nimport { IS_ELECTRON } from '../util/windowEnvironment';\nimport { addActionHandler, getGlobal } from './index';\nimport { INITIAL_STATE, STATE_VERSION } from './initialState';\nimport { selectAccountState, selectAccountTokens } from './selectors';\n\nconst UPDATE_THROTTLE = IS_CAPACITOR ? 500 : 5000;\nconst ACTIVITIES_LIMIT = 20;\nconst ACTIVITY_TOKENS_LIMIT = 30;\nconst STAKING_HISTORY_LIMIT = 30;\n\nconst updateCacheThrottled = throttle(() => onFullyIdle(() => updateCache()), UPDATE_THROTTLE, false);\nconst updateCacheForced = () => updateCache(true);\n\nlet isCaching = false;\nlet unsubscribeFromBeforeUnload: NoneToVoidFunction | undefined;\nlet preloadedData: Partial<GlobalState> | undefined;\n\nexport function initCache() {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return;\n  }\n\n  addActionHandler('afterSignIn', setupCaching);\n\n  addActionHandler('afterSignOut', (global, actions, payload) => {\n    clearPoisoningCache();\n\n    if (payload?.shouldReset) {\n      preloadedData = pick(global, ['swapTokenInfo', 'tokenInfo', 'restrictions']);\n      clearCaching();\n      localStorage.removeItem(GLOBAL_STATE_CACHE_KEY);\n    }\n  });\n\n  addActionHandler('cancelCaching', clearCaching);\n}\n\nfunction setupCaching() {\n  if (isCaching) return;\n\n  isCaching = true;\n\n  addCallback(updateCacheThrottled);\n  unsubscribeFromBeforeUnload = onBeforeUnload(updateCacheForced, true);\n  window.addEventListener('blur', updateCacheForced);\n\n  updateCacheForced();\n}\n\nfunction clearCaching() {\n  if (!isCaching) return;\n\n  window.removeEventListener('blur', updateCacheForced);\n  unsubscribeFromBeforeUnload?.();\n  removeCallback(updateCacheThrottled);\n\n  isCaching = false;\n}\n\nexport function loadCache(initialState: GlobalState): GlobalState {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return initialState;\n  }\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.time('global-state-cache-read');\n  }\n\n  const json = localStorage.getItem(GLOBAL_STATE_CACHE_KEY);\n  let cached = json ? JSON.parse(json, bigintReviver) as GlobalState : undefined;\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.timeEnd('global-state-cache-read');\n  }\n\n  if (cached) {\n    try {\n      migrateCache(cached, initialState);\n      loadMemoryCache(cached);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n\n      cached = undefined;\n    }\n  }\n\n  return {\n    ...initialState,\n    ...preloadedData,\n    ...cached,\n  };\n}\n\nfunction migrateCache(cached: GlobalState, initialState: GlobalState) {\n  // Pre-fill settings with defaults\n  cached.settings = {\n    ...initialState.settings,\n    ...cached.settings,\n  };\n\n  if (cached.stateVersion === STATE_VERSION) {\n    return;\n  }\n\n  // Migration to multi-accounts\n  if (!cached.byAccountId) {\n    (cached as any).accounts = {\n      byId: {\n        [MAIN_ACCOUNT_ID]: {\n          address: (cached as any).addresses.byAccountId[MAIN_ACCOUNT_ID],\n          title: 'Main Account',\n        },\n      },\n    };\n\n    delete (cached as any).addresses;\n\n    cached.byAccountId = {};\n    cached.byAccountId[MAIN_ACCOUNT_ID] = {\n      isBackupRequired: Boolean((cached as any).isBackupRequired),\n      currentTokenSlug: (cached as any).currentTokenSlug as string,\n      currentTokenPeriod: (cached as any).currentTokenPeriod as TokenPeriod,\n    };\n\n    if ('balances' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].balances = (cached as any).balances.byAccountId[MAIN_ACCOUNT_ID];\n      delete (cached as any).balances;\n    }\n\n    if ('transactions' in cached) {\n      (cached.byAccountId[MAIN_ACCOUNT_ID] as any).transactions = (cached as any).transactions;\n      delete (cached as any).transactions;\n    }\n\n    if ('nfts' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].nfts = (cached as any).nfts;\n      delete (cached as any).nfts;\n    }\n\n    if ('savedAddresses' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].savedAddresses = (cached as any).savedAddresses;\n      delete (cached as any).savedAddresses;\n    }\n\n    if ('backupWallet' in cached) {\n      delete (cached as any).backupWallet;\n    }\n  }\n\n  if (\n    (!cached.currentAccountId || !cached.byAccountId[cached.currentAccountId]) && Object.keys(cached.byAccountId).length\n  ) {\n    cached.currentAccountId = Object.keys(cached.byAccountId)[0];\n  }\n\n  // Initializing the v1\n  if (!cached.stateVersion && cached.accounts && !isEmptyObject(cached.accounts)) {\n    cached.stateVersion = 1;\n  }\n\n  if (cached.stateVersion === 1) {\n    cached.stateVersion = 2;\n\n    if (cached.tokenInfo?.bySlug) {\n      cached.tokenInfo.bySlug = {\n        toncoin: {\n          ...cached.tokenInfo.bySlug.toncoin,\n          decimals: TONCOIN.decimals,\n        },\n      };\n    }\n\n    if (cached.byAccountId) {\n      Object.values(cached.byAccountId).forEach((accountState) => {\n        if (accountState.balances?.bySlug) {\n          accountState.balances.bySlug = pick(accountState.balances.bySlug, ['toncoin']);\n        }\n        if ((accountState as any).transactions) {\n          delete (accountState as any).transactions;\n        }\n      });\n    }\n  }\n\n  if (cached.stateVersion === 2) {\n    cached.stateVersion = 3;\n\n    // Normalization of MAIN_ACCOUNT_ID '0' => '0-ton-mainnet'\n    const oldId = '0';\n    const newId = MAIN_ACCOUNT_ID;\n    if (cached.accounts && oldId in cached.accounts.byId) {\n      if (cached.currentAccountId === oldId) {\n        cached.currentAccountId = newId;\n      }\n      cached.accounts.byId[newId] = cached.accounts.byId[oldId];\n      delete cached.accounts.byId[oldId];\n      cached.byAccountId[newId] = cached.byAccountId[oldId];\n      delete cached.byAccountId[oldId];\n    }\n\n    // Add testnet accounts\n    if (cached.accounts) {\n      for (const accountId of Object.keys(cached.accounts.byId)) {\n        const testnetAccountId = buildAccountId({\n          ...parseAccountId(accountId),\n          network: 'testnet',\n        });\n        cached.accounts.byId[testnetAccountId] = cloneDeep(cached.accounts.byId[accountId]);\n        cached.byAccountId[testnetAccountId] = {};\n      }\n    }\n  }\n\n  if (cached.stateVersion === 3) {\n    cached.stateVersion = 4;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 4) {\n    cached.stateVersion = 5;\n\n    (cached as any).staking = {\n      state: StakingState.None,\n    };\n  }\n\n  if (cached.stateVersion === 5) {\n    cached.stateVersion = 6;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 6) {\n    cached.stateVersion = 7;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 7) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).backupWallet;\n      }\n    }\n\n    cached.stateVersion = 8;\n  }\n\n  if (cached.stateVersion === 8) {\n    if (cached.settings && IS_ELECTRON) {\n      cached.settings.isDeeplinkHookEnabled = true;\n    }\n\n    cached.stateVersion = 9;\n  }\n\n  function clearActivities() {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).activities;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 9) {\n    clearActivities();\n    cached.stateVersion = 10;\n  }\n\n  if (cached.stateVersion === 10) {\n    if ((cached.settings as any).areTokensWithNoBalanceHidden === undefined) {\n      (cached.settings as any).areTokensWithNoBalanceHidden = true;\n    }\n    cached.stateVersion = 11;\n  }\n\n  if (cached.stateVersion === 11) {\n    clearActivities();\n    cached.stateVersion = 12;\n  }\n\n  if (cached.stateVersion === 12) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete cached.byAccountId[accountId].activities;\n\n        const { balances } = cached.byAccountId[accountId];\n        if (balances) {\n          balances.bySlug = Object.entries(balances.bySlug).reduce((acc, [slug, balance]) => {\n            acc[slug] = BigInt(balance);\n            return acc;\n          }, {} as Record<string, bigint>);\n        }\n      }\n    }\n    cached.stateVersion = 13;\n  }\n\n  if (cached.stateVersion === 13) {\n    const { areTokensWithNoPriceHidden, areTokensWithNoBalanceHidden } = cached.settings as any as {\n      areTokensWithNoPriceHidden?: boolean;\n      areTokensWithNoBalanceHidden?: boolean;\n    };\n\n    cached.settings.areTokensWithNoCostHidden = Boolean(areTokensWithNoPriceHidden || areTokensWithNoBalanceHidden);\n    cached.stateVersion = 14;\n  }\n\n  if (cached.stateVersion >= 14 && cached.stateVersion <= 17) {\n    clearActivities();\n    cached.stateVersion = 18;\n  }\n\n  if (cached.stateVersion === 18 || cached.stateVersion === 19) {\n    for (const accountId of Object.keys(cached.byAccountId)) {\n      cached.byAccountId[accountId].currentTokenPeriod = '1D';\n    }\n    cached.stateVersion = 20;\n  }\n\n  if (cached.stateVersion >= 20 && cached.stateVersion <= 22) {\n    clearActivities();\n    cached.stateVersion = 23;\n  }\n\n  if (cached.stateVersion === 23) {\n    if (!('isSortByValueEnabled' in cached.settings)) {\n      cached.settings.isSortByValueEnabled = initialState.settings.isSortByValueEnabled;\n    }\n    cached.stateVersion = 24;\n  }\n\n  if (cached.stateVersion === 24) {\n    if (cached.accounts) {\n      clearActivities();\n      for (const account of Object.values(cached.accounts.byId)) {\n        account.addressByChain = { ton: (account as any).address } as any;\n        delete (account as any).address;\n      }\n    }\n    cached.stateVersion = 25;\n  }\n\n  if (cached.stateVersion === 25) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        const savedAddresses = cached.byAccountId[accountId].savedAddresses;\n        if (savedAddresses && !('length' in savedAddresses)) {\n          cached.byAccountId[accountId].savedAddresses = Object.keys(savedAddresses as Record<string, string>)\n            .map((address) => ({\n              name: savedAddresses[address],\n              address,\n              chain: 'ton',\n            } as SavedAddress));\n        }\n      }\n    }\n    cached.stateVersion = 26;\n  }\n\n  if (cached.stateVersion === 26) {\n    clearActivities();\n    cached.stateVersion = 27;\n  }\n\n  if (cached.stateVersion === 27) {\n    delete (cached.settings as any).dapps;\n    cached.stateVersion = 28;\n  }\n\n  if (cached.stateVersion === 28) {\n    const accountIds = Object.keys(cached.settings.byAccountId);\n    for (const accountId of accountIds) {\n      const exceptionSlugs = (cached.settings.byAccountId[accountId] as any).exceptionSlugs as string[] | undefined;\n      if (cached.settings.areTokensWithNoCostHidden) {\n        cached.settings.byAccountId[accountId].alwaysShownSlugs = exceptionSlugs;\n      } else {\n        cached.settings.byAccountId[accountId].alwaysHiddenSlugs = exceptionSlugs;\n      }\n    }\n    cached.stateVersion = 29;\n  }\n\n  if (cached.stateVersion === 29) {\n    cached.currentTransfer.tokenSlug = TONCOIN.slug;\n    cached.stateVersion = 30;\n  }\n\n  if (cached.stateVersion === 30) {\n    clearActivities();\n    cached.stateVersion = 31;\n  }\n\n  if (cached.stateVersion === 31) {\n    if (cached.settings.autolockValue && cached.settings.autolockValue !== 'never') {\n      cached.settings.isAppLockEnabled = true;\n    }\n    cached.stateVersion = 32;\n  }\n\n  if (cached.stateVersion >= 32 && cached.stateVersion <= 35) {\n    clearActivities();\n    cached.stateVersion = 36;\n  }\n\n  if (cached.stateVersion === 36) {\n    for (const account of Object.values(cached.accounts?.byId ?? {})) {\n      account.type = (account as { isHardware?: boolean }).isHardware ? 'hardware' : 'mnemonic';\n      delete (account as { isHardware?: boolean }).isHardware;\n    }\n    cached.stateVersion = 37;\n  }\n\n  if (cached.stateVersion === 37) {\n    for (const token of Object.values(cached.tokenInfo.bySlug) as any[]) {\n      if (!token.price) token.price = 0;\n      if (!token.percentChange24h) token.percentChange24h = 0;\n      if (!token.priceUsd) token.priceUsd = 0;\n      if (token.quote) delete token.quote;\n    }\n    cached.stateVersion = 38;\n  }\n\n  if (cached.stateVersion >= 38 && cached.stateVersion <= 41) {\n    clearActivities();\n    cached.stateVersion = 42;\n  }\n\n  if (cached.stateVersion === 41) {\n    for (const accountId of Object.keys(cached.byAccountId)) {\n      const accountState = cached.byAccountId[accountId];\n      if ((accountState as any).dappLastOpenedDatesByOrigin) {\n        accountState.dappLastOpenedDatesByUrl = (accountState as any).dappLastOpenedDatesByOrigin;\n        delete (accountState as any).dappLastOpenedDatesByOrigin;\n      }\n    }\n    cached.stateVersion = 42;\n  }\n\n  if (cached.stateVersion >= 42 && cached.stateVersion <= 44) {\n    clearActivities();\n    cached.stateVersion = 45;\n  }\n\n  // When adding migration here, increase `STATE_VERSION`\n}\n\nfunction loadMemoryCache(cached: GlobalState) {\n  if (!cached.currentAccountId) return;\n\n  const { byId, newestActivitiesBySlug } = cached.byAccountId[cached.currentAccountId].activities || {};\n\n  if (byId) {\n    Object.values(byId).forEach((tx) => {\n      if (tx.kind === 'transaction' && tx.isIncoming) {\n        updatePoisoningCache(tx);\n      }\n    });\n  }\n\n  if (newestActivitiesBySlug) {\n    Object.values(newestActivitiesBySlug).forEach((activity) => {\n      if (activity.kind === 'transaction' && activity.isIncoming) {\n        updatePoisoningCache(activity);\n      }\n    });\n  }\n}\n\nconst getUsedTokenSlugs = (reducedGlobal: GlobalState): string[] => {\n  const usedTokenSlugs = new Set<string>(Object.keys(TOKEN_INFO));\n\n  if (reducedGlobal.currentAccountId) {\n    const currentTokenSlug = reducedGlobal.byAccountId[reducedGlobal.currentAccountId]?.currentTokenSlug;\n    if (currentTokenSlug) {\n      usedTokenSlugs.add(currentTokenSlug);\n    }\n  }\n\n  Object.values(reducedGlobal.byAccountId).forEach((state) => {\n    const { balances, activities, staking } = state;\n\n    Object.keys(balances?.bySlug ?? {}).forEach((slug) => usedTokenSlugs.add(slug));\n    Object.keys(activities?.byId ?? {}).forEach((transactionId) => {\n      getActivityTokenSlugs(activities!.byId[transactionId]).forEach((slug) => usedTokenSlugs.add(slug));\n    });\n    Object.keys(activities?.idsBySlug ?? {}).forEach((slug) => usedTokenSlugs.add(slug));\n    Object.keys(staking?.stateById ?? {}).forEach((id) => {\n      usedTokenSlugs.add(staking!.stateById![id].tokenSlug);\n    });\n  });\n\n  return Array.from(usedTokenSlugs);\n};\n\nfunction getAccountTokenSlugs(global: GlobalState, accountId: string) {\n  const { currentTokenSlug } = selectAccountState(global, accountId) ?? {};\n  const tokenSlugs = extractKey(selectAccountTokens(global, accountId) ?? [], 'slug')\n    .slice(0, ACTIVITY_TOKENS_LIMIT);\n\n  if (!tokenSlugs.includes(TONCOIN.slug)) {\n    tokenSlugs.push(TONCOIN.slug);\n  }\n\n  if (currentTokenSlug && !tokenSlugs.includes(currentTokenSlug)) {\n    tokenSlugs.push(currentTokenSlug);\n  }\n\n  return tokenSlugs;\n}\n\nfunction updateCache(force?: boolean) {\n  if (GLOBAL_STATE_CACHE_DISABLED || !isCaching || (!force && getIsHeavyAnimating())) {\n    return;\n  }\n\n  const global = getGlobal();\n\n  const accountsById = global.accounts?.byId || {};\n  const reducedGlobal: GlobalState = {\n    ...INITIAL_STATE,\n    ...pick(global, [\n      'currentAccountId',\n      'stateVersion',\n      'restrictions',\n      'pushNotifications',\n      'isFullscreen',\n      'isManualLockActive',\n      'stakingDefault',\n    ]),\n    accounts: {\n      byId: accountsById,\n    },\n    byAccountId: reduceByAccountId(global),\n    settings: {\n      ...global.settings,\n      byAccountId: pick(global.settings.byAccountId, Object.keys(accountsById)),\n    },\n  };\n\n  const usedTokenSlugs = getUsedTokenSlugs(reducedGlobal);\n\n  reducedGlobal.tokenInfo = {\n    bySlug: pickTruthy(global.tokenInfo.bySlug, usedTokenSlugs),\n  };\n\n  const json = JSON.stringify(reducedGlobal);\n  localStorage.setItem(GLOBAL_STATE_CACHE_KEY, json);\n}\n\nfunction reduceByAccountId(global: GlobalState) {\n  return Object.entries(global.byAccountId).reduce((acc, [accountId, state]) => {\n    if (!global.accounts?.byId[accountId]) {\n      return acc;\n    }\n\n    acc[accountId] = pick(state, [\n      'isBackupRequired',\n      'currentTokenSlug',\n      'currentTokenPeriod',\n      'savedAddresses',\n      'staking',\n      'activeContentTab',\n      'landscapeActionsActiveTabIndex',\n      'browserHistory',\n      'blacklistedNftAddresses',\n      'whitelistedNftAddresses',\n      'dappLastOpenedDatesByUrl',\n      'dapps',\n    ]);\n\n    if (state.nfts?.collectionTabs) {\n      acc[accountId].nfts = {\n        collectionTabs: state.nfts.collectionTabs,\n        wasTelegramGiftsAutoAdded: state.nfts.wasTelegramGiftsAutoAdded,\n      };\n    }\n\n    const accountTokenSlugs = getAccountTokenSlugs(global, accountId);\n    acc[accountId].balances = reduceAccountBalances(state.balances, accountTokenSlugs);\n    acc[accountId].activities = reduceAccountActivities(state.activities, accountTokenSlugs);\n    acc[accountId].staking = reduceAccountStaking(state.staking);\n    acc[accountId].stakingHistory = state.stakingHistory?.length\n      ? state.stakingHistory.slice(0, STAKING_HISTORY_LIMIT)\n      : undefined;\n\n    return acc;\n  }, {} as GlobalState['byAccountId']);\n}\n\nfunction reduceAccountBalances(balances?: AccountState['balances'], tokenSlugs?: string[]) {\n  if (!balances?.bySlug || !tokenSlugs) return balances;\n\n  return {\n    ...balances,\n    bySlug: pick(balances.bySlug, tokenSlugs),\n  };\n}\n\nfunction reduceAccountActivities(activities?: AccountState['activities'], tokenSlugs?: string[]) {\n  const {\n    idsBySlug, newestActivitiesBySlug, byId, idsMain,\n  } = activities || {};\n  if (!tokenSlugs || !idsBySlug || !byId || !idsMain) return undefined;\n\n  const reducedIdsMain = pickVisibleActivities(idsMain, byId);\n  const reducedIdsBySlug = mapValues(pickTruthy(idsBySlug, tokenSlugs), (ids) => pickVisibleActivities(ids, byId));\n\n  const reducedNewestActivitiesBySlug = newestActivitiesBySlug\n    ? pick(newestActivitiesBySlug, tokenSlugs)\n    : undefined;\n\n  const reducedIds = Object.values(reducedIdsBySlug).concat(reducedIdsMain).flat();\n  const reducedById = pick(byId, reducedIds);\n\n  return {\n    byId: reducedById,\n    idsMain: reducedIdsMain,\n    idsBySlug: reducedIdsBySlug,\n    newestActivitiesBySlug: reducedNewestActivitiesBySlug,\n  };\n}\n\nfunction reduceAccountStaking(staking?: AccountState['staking']) {\n  let { stakingId, stateById } = staking ?? {};\n\n  if (stateById && !isEmptyObject(stateById)) {\n    stateById = filterValues(stateById, getIsActiveStakingState);\n\n    if (!stakingId || !(stakingId in stateById)) {\n      stakingId = Object.values(stateById)[0]?.id;\n    }\n  }\n\n  return {\n    ...staking,\n    stateById,\n    stakingId,\n  };\n}\n\nfunction pickVisibleActivities(ids: string[], byId: Record<string, ApiActivity>) {\n  const result: string[] = [];\n\n  let visibleIdCount = 0;\n\n  ids\n    .filter((id) => shouldCacheActivity(id, byId))\n    .forEach((id) => {\n      if (visibleIdCount === ACTIVITIES_LIMIT) return;\n\n      if (!byId[id].shouldHide) {\n        visibleIdCount += 1;\n      }\n\n      result.push(id);\n    });\n\n  return result;\n}\n\nfunction shouldCacheActivity(id: string, byId: Record<string, ApiActivity>) {\n  const activity = byId[id];\n  return activity\n    && !getIsTxIdLocal(id)\n    && !getIsActivityPending(activity);\n}\n","import { cloneDeep } from '../util/iteratees';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport { initCache, loadCache } from './cache';\nimport { addActionHandler } from './index';\nimport { INITIAL_STATE } from './initialState';\nimport { selectHasSession } from './selectors';\n\nif (!IS_DELEGATED_BOTTOM_SHEET) {\n  initCache();\n}\n\naddActionHandler('init', (_, actions) => {\n  const initial = cloneDeep(INITIAL_STATE);\n\n  const global = loadCache(initial);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (IS_LEDGER_EXTENSION_TAB) {\n    actions.initLedgerPage();\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (selectHasSession(global)) {\n    actions.afterSignIn();\n  }\n\n  return global;\n});\n","import { BIGINT_PREFIX } from './bigint';\n\n// Fixes serialization of objects containing `bigint` values.\n// Extracted to a separate file to avoid leaking into Extension Page Script.\n// @ts-ignore\nBigInt.prototype.toJSON = function toJSON() {\n  return `${BIGINT_PREFIX}${this.toString()}`;\n};\n","import { animate } from './animation';\nimport { fastRaf } from './schedulers';\nimport { IS_IOS } from './windowEnvironment';\n\nconst TEST_INTERVAL = 5000; // 5 sec\nconst FRAMES_TO_TEST = 10;\nconst REDUCED_FPS = 35;\n\nlet isImproved = false;\n\nexport function betterView() {\n  if (!IS_IOS) return;\n\n  let interval: number | undefined;\n  let lastFocusAt = Date.now();\n\n  function setupInterval() {\n    if (interval || isImproved) return;\n\n    interval = window.setInterval(testAndImprove, TEST_INTERVAL);\n  }\n\n  window.addEventListener('focus', () => {\n    const now = Date.now();\n    if (now - lastFocusAt < 100) return; // iOS triggers two `focus` events for some reason\n    lastFocusAt = now;\n\n    setupInterval();\n    void testAndImprove();\n  });\n\n  window.addEventListener('blur', () => {\n    clearInterval(interval);\n    interval = undefined;\n  });\n\n  if (document.hasFocus()) {\n    setupInterval();\n    void testAndImprove();\n  }\n}\n\nasync function testAndImprove() {\n  const fps = await testFps();\n  if (fps <= REDUCED_FPS) {\n    improveView();\n  }\n}\n\nfunction testFps() {\n  return new Promise<number>((resolve) => {\n    const frames: number[] = [];\n    let lastFrameAt = performance.now();\n\n    animate(() => {\n      const now = performance.now();\n      frames.push(now - lastFrameAt);\n      lastFrameAt = now;\n\n      if (frames.length === FRAMES_TO_TEST) {\n        const mean = frames.sort()[Math.floor(frames.length / 2)];\n        resolve(Math.round(1000 / mean));\n        return false;\n      }\n\n      return true;\n    }, fastRaf);\n  });\n}\n\nfunction improveView() {\n  isImproved = true;\n\n  const containerEl = document.createElement('div');\n  containerEl.style.cssText = 'position: absolute; top: 0; left: 0; width: 0; height: 100%; overflow: hidden;';\n\n  const boosterEl = document.createElement('div');\n  const height = window.screen.height * 1.5;\n  boosterEl.style.cssText = `width: 0; height: ${height}px; transform: translateX(100%); transition: transform 100ms;`;\n  boosterEl.innerHTML = '&nbsp;';\n\n  containerEl.appendChild(boosterEl);\n  document.body.appendChild(containerEl);\n\n  requestAnimationFrame(() => {\n    boosterEl.addEventListener('transitionend', () => {\n      containerEl.remove();\n    });\n\n    boosterEl.style.transform = '';\n  });\n}\n","import type { AppLayout } from '../global/types';\n\nexport enum ElectronEvent {\n  DEEPLINK = 'deeplink',\n  UPDATE_ERROR = 'update-error',\n  UPDATE_DOWNLOADED = 'update-downloaded',\n}\n\nexport enum ElectronAction {\n  CLOSE = 'close',\n  MINIMIZE = 'minimize',\n  MAXIMIZE = 'maximize',\n  UNMAXIMIZE = 'unmaximize',\n  GET_IS_MAXIMIZED = 'get-is-maximized',\n\n  INSTALL_UPDATE = 'install-update',\n  HANDLE_DOUBLE_CLICK = 'handle-double-click',\n\n  TOGGLE_DEEPLINK_HANDLER = 'toggle-deeplink-handler',\n\n  GET_IS_TOUCH_ID_SUPPORTED = 'get-is-touch-id-supported',\n  ENCRYPT_PASSWORD = 'encrypt-password',\n  DECRYPT_PASSWORD = 'decrypt-password',\n\n  SET_IS_TRAY_ICON_ENABLED = 'set-is-tray-icon-enabled',\n  GET_IS_TRAY_ICON_ENABLED = 'get-is-tray-icon-enabled',\n  SET_IS_AUTO_UPDATE_ENABLED = 'set-is-auto-update-enabled',\n  GET_IS_AUTO_UPDATE_ENABLED = 'get-is-auto-update-enabled',\n  CHANGE_APP_LAYOUT = 'change-app-layout',\n\n  RESTORE_STORAGE = 'restore-storage',\n}\n\nexport interface ElectronApi {\n  close: VoidFunction;\n  minimize: VoidFunction;\n  maximize: VoidFunction;\n  unmaximize: VoidFunction;\n  getIsMaximized: () => Promise<boolean>;\n\n  installUpdate: () => Promise<void>;\n  handleDoubleClick: () => Promise<void>;\n\n  toggleDeeplinkHandler: (isEnabled: boolean) => Promise<void>;\n\n  getIsTouchIdSupported: () => Promise<boolean>;\n  encryptPassword: (password: string) => Promise<string>;\n  decryptPassword: (encrypted: string) => Promise<string | undefined>;\n\n  setIsTrayIconEnabled: (value: boolean) => Promise<void>;\n  getIsTrayIconEnabled: () => Promise<boolean>;\n  setIsAutoUpdateEnabled: (value: boolean) => Promise<void>;\n  getIsAutoUpdateEnabled: () => Promise<boolean>;\n  changeAppLayout: (layout: AppLayout) => Promise<void>;\n\n  restoreStorage: () => Promise<void>;\n\n  on: (eventName: ElectronEvent, callback: any) => VoidFunction;\n}\n\ndeclare global {\n  interface Window {\n    electron?: ElectronApi;\n  }\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\nimport { onVirtualKeyboardOpen } from './windowSize';\n\nconst focusScroller = createFocusScroller();\n\nfunction isFocusable(element: Element): boolean {\n  const tagName = element.tagName.toLowerCase();\n  return tagName === 'input'\n    || tagName === 'textarea'\n    || tagName === 'select'\n    || element.hasAttribute('contenteditable');\n}\n\n/**\n * Implements a custom scroll behavior on input focus. Designed for Capacitor platforms only. Meets the following goals:\n * - Allow to customize where to scroll the focused element to (via the `data-focus-scroll-position` HTML attribute).\n * - Scroll to show the focused element if it's behind by the virtual keyboard at the moment when it opens.\n * - Scroll to the focused element smoothly whenever possible.\n *\n * Warning: this functions requires the @capacitor/keyboard plugin to be activated. It also relies on a\n * `scroll-behavior: smooth;` style set in scrollable elements to implement smooth scrolling depending on the animation\n * preferences.\n */\nexport function initFocusScrollController() {\n  if (IS_CAPACITOR) {\n    initForCapacitor();\n  } else if ((IS_IOS || IS_ANDROID) && window.visualViewport) {\n    initForVisualViewport();\n  }\n}\n\nfunction initForCapacitor() {\n  // `scrollToActiveElement` shouldn't be called in `keyboardWillShow` because the <body> size won't be patched yet, so\n  // if the focused input at the bottom of the scrollable element, it won't be scrolled to.\n  // `keyboardWillShow` could be used if the screen scroll height increased (instead of decreasing the <body> height).\n  // Note: on iOS `onVirtualKeyboardOpen` calls the callback on every focus (it doesn't affect the scroll behavior).\n  onVirtualKeyboardOpen(() => {\n    // The manual focus scroller is activated only when the virtual keyboard is open it order to avoid a scroll when the\n    // keyboard starts opening (it would scroll the 2nd time when the keyboard has opened).\n    // This has a side effect of keeping the natural scroll behavior when a hardware keyboard is used (it's ok).\n    focusScroller.install();\n    scrollToActiveElement();\n  });\n\n  void import('@capacitor/keyboard').then(({ Keyboard }) => {\n    void Keyboard.addListener('keyboardWillHide', focusScroller.uninstall);\n  });\n}\n\nfunction initForVisualViewport() {\n  const { visualViewport } = window;\n  let viewportHeight = visualViewport!.height;\n\n  function handleViewportResize() {\n    const newHeight = visualViewport!.height;\n    const activeElement = document.activeElement;\n\n    // If the viewport height has decreased (the keyboard has opened) and the active element is focusable,\n    // we activate the scroller and scroll to the element\n    if (newHeight < viewportHeight && activeElement && isFocusable(activeElement)) {\n      focusScroller.install();\n      scrollToActiveElement();\n    } else if (newHeight > viewportHeight) {\n      // If the viewport height has increased (the keyboard has closed), we deactivate the scroller\n      focusScroller.uninstall();\n    }\n\n    // The viewport height is updated for the next comparison\n    viewportHeight = newHeight;\n  }\n\n  // In the TMA application on iOS, the VisualViewport behaves incorrectly,\n  // not taking into account the height of the virtual keyboard. Therefore,\n  // the height compensation is performed first (see the `windowSize` file),\n  // and then the `handleViewportResize` processing should be executed.\n  function delayedViewportResizeHandler() {\n    requestMutation(() => {\n      requestMeasure(handleViewportResize);\n    });\n  }\n\n  visualViewport!.addEventListener(\n    'resize',\n    IS_IOS && IS_TELEGRAM_APP ? delayedViewportResizeHandler : handleViewportResize,\n  );\n}\n\nfunction createFocusScroller() {\n  let originalFocus: HTMLElement['focus'] | undefined;\n  let isProgrammaticFocus = false;\n\n  // Prevents native scroll for all `focus()` calls, because if the element is outside the viewport, `focus()` scrolls\n  // the screen instantly to place the element in the middle (we don't want that).\n  const patchedFocus: HTMLElement['focus'] = function focus(this: HTMLElement, options) {\n    isProgrammaticFocus = true;\n    // Does not work on Android, because it doesn't support `preventScroll`\n    originalFocus?.call(this, { ...options, preventScroll: true });\n  };\n\n  const handleFocus = () => {\n    // Because Android doesn't support `preventScroll`, we make the scroll instant to prevent excessive back-and-forth\n    // scrolls. Doing it only for programmatic `focus` calls allows to have smooth scrolling when the user focuses the\n    // input by tapping it while the keyboard is open.\n    scrollToActiveElement(IS_ANDROID && isProgrammaticFocus);\n    isProgrammaticFocus = false;\n  };\n\n  return {\n    install() {\n      if (originalFocus) {\n        return; // This branch is reached when the scroller is already installed\n      }\n\n      originalFocus = HTMLElement.prototype.focus;\n      HTMLElement.prototype.focus = patchedFocus;\n\n      window.addEventListener('focusin', handleFocus);\n    },\n    uninstall() {\n      if (!originalFocus) {\n        return; // This branch is reached when the scroller is already uninstalled\n      }\n\n      HTMLElement.prototype.focus = originalFocus;\n      originalFocus = undefined;\n\n      window.removeEventListener('focusin', handleFocus);\n    },\n  };\n}\n\nfunction scrollToActiveElement(enforceInstantScroll?: boolean) {\n  const scrollTarget = document.activeElement;\n  if (!scrollTarget) {\n    return;\n  }\n  const scrollPosition = scrollTarget.dataset.focusScrollPosition ?? 'nearest';\n  requestMeasure(() => {\n    scrollTarget.scrollIntoView({\n      block: scrollPosition,\n      behavior: enforceInstantScroll ? 'instant' : 'auto',\n    });\n  });\n}\n","import { ACTIVE_TAB_STORAGE_KEY, IS_TELEGRAM_APP } from '../config';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_LEDGER_EXTENSION_TAB,\n} from './windowEnvironment';\n\nconst IS_DISABLED = IS_LEDGER_EXTENSION_TAB || IS_DELEGATED_BOTTOM_SHEET || IS_ELECTRON || IS_TELEGRAM_APP;\n\nconst INTERVAL = 2000;\n\nconst tabKey = String(Date.now() + Math.random());\n\nif (!IS_DISABLED) {\n  localStorage.setItem(ACTIVE_TAB_STORAGE_KEY, tabKey);\n}\n\nlet callback: NoneToVoidFunction;\n\nconst interval = window.setInterval(() => {\n  if (!IS_DISABLED && callback && localStorage.getItem(ACTIVE_TAB_STORAGE_KEY) !== tabKey) {\n    callback();\n    clearInterval(interval);\n  }\n}, INTERVAL);\n\nexport function setActiveTabChangeListener(_callback: NoneToVoidFunction) {\n  callback = _callback;\n}\n","import { registerPlugin } from '@capacitor/core';\nconst Filesystem = registerPlugin('Filesystem', {\n    web: () => import('./web').then(m => new m.FilesystemWeb()),\n});\nexport * from './definitions';\nexport { Filesystem };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Share = registerPlugin('Share', {\n    web: () => import('./web').then(m => new m.ShareWeb()),\n});\nexport * from './definitions';\nexport { Share };\n//# sourceMappingURL=index.js.map","// The file is about sending data using the OS social sharing UI\n\nimport { Directory, Encoding, Filesystem } from '@capacitor/filesystem';\nimport type { ShareOptions } from '@capacitor/share';\nimport { Share } from '@capacitor/share';\nimport { getActions } from '../global';\n\nimport { IS_CAPACITOR } from '../config';\nimport { copyTextToClipboard } from './clipboard';\nimport { getTranslation } from './langProvider';\nimport { IS_IOS, IS_TOUCH_ENV } from './windowEnvironment';\n\nexport async function shareUrl(url: string, title?: string) {\n  const shareData = { url, title };\n\n  if (await tryCapacitorShare(shareData) || await tryNavigatorShare(shareData)) {\n    return;\n  }\n\n  await copyTextToClipboard(url);\n  getActions().showNotification({\n    message: getTranslation('Link was copied!'),\n    icon: 'icon-link',\n  });\n}\n\nexport async function shareFile(name: string, content: string, mimeType: string) {\n  if (IS_CAPACITOR) {\n    const fileLocation = {\n      path: name,\n      directory: Directory.Cache,\n    };\n    const file = await Filesystem.writeFile({\n      ...fileLocation,\n      data: content,\n      encoding: Encoding.UTF8,\n    });\n\n    try {\n      if (await tryCapacitorShare({ url: file.uri })) {\n        return;\n      }\n    } finally {\n      void Filesystem.deleteFile(fileLocation);\n    }\n  }\n\n  const file = new File([content], name, { type: mimeType });\n  if (await tryNavigatorShare({ files: [file] })) {\n    return;\n  }\n\n  const url = URL.createObjectURL(file);\n\n  try {\n    if (IS_IOS) {\n      window.open(url, '_blank', 'noreferrer');\n    } else {\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = name;\n      link.click();\n    }\n  } finally {\n    URL.revokeObjectURL(url);\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryCapacitorShare(data: ShareOptions) {\n  if (!IS_CAPACITOR) {\n    return false;\n  }\n\n  try {\n    await Share.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.message === 'Share canceled') {\n      return true;\n    }\n\n    // Sometimes on iOS a false \"Can't share while sharing is in progress\" error is thrown\n    if (error instanceof Error && error.message === 'Can\\'t share while sharing is in progress') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryNavigatorShare(data: ShareData) {\n  if (!IS_TOUCH_ENV || !navigator.share) {\n    return false;\n  }\n\n  try {\n    await navigator.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.name === 'AbortError') {\n      return true;\n    }\n\n    // Occurs when the sharing API is called not in response to a user gesture\n    if (error instanceof Error && error.name === 'NotAllowedError') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n","import usePrevious from './usePrevious';\n\nexport default function useCurrentOrPrev<T>(\n  current: T, shouldSkipUndefined = false, shouldForceCurrent = false,\n): T | undefined {\n  const prev = usePrevious(current, shouldSkipUndefined);\n\n  // eslint-disable-next-line no-null/no-null\n  return shouldForceCurrent || (current !== null && current !== undefined) ? current : prev;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"zVKWQb4E\",\"item\":\"p6wqAx5G\",\"wide\":\"r6y8uqO8\",\"interactive\":\"Q9ntFVQX\",\"label\":\"D1GD_LrJ\",\"light\":\"soVchDDr\",\"inherit\":\"wFCZ8RVE\",\"disabled\":\"pvIBCUiV\",\"dangerous\":\"pGdKfZ0g\",\"buttonIcon\":\"N6o0srlb\",\"item_selected\":\"RsC78CT6\",\"itemSelected\":\"RsC78CT6\",\"item_with_icon\":\"U_181tTH\",\"itemWithIcon\":\"U_181tTH\",\"itemIcon\":\"Y6vHSLLj\",\"itemMainIcon\":\"j8oqwmMI\",\"itemOverlayIcon\":\"Kyq0Mbfk\",\"fontIcon\":\"YG4KjBia\",\"itemName\":\"Mj3kpKk7\",\"itemDescription\":\"SGTt7OqT\",\"delimiter\":\"MtXTN7mi\",\"delimiterAfter\":\"K5zqNd8W\",\"dropdownButtonWrapper\":\"M88J3eDx\",\"spinner\":\"O6oZGmyS\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Dropdown.module.scss';\n\ninterface OwnProps<T extends string> {\n  item: DropdownItem<T>;\n  shouldUseSelectedName?: boolean;\n  shouldTranslate?: boolean;\n  prefix?: TeactNode;\n  suffix?: TeactNode;\n  className?: string;\n  iconClassName?: string;\n  iconOverlayClassName?: string;\n  fontIconClassName?: string;\n  itemClassName?: string;\n  itemDescriptionClassName?: string;\n  onClick?(event: React.MouseEvent<HTMLButtonElement, MouseEvent>, value: T): void;\n}\n\nfunction DropdownItemContent<T extends string>({\n  item,\n  shouldUseSelectedName,\n  shouldTranslate,\n  prefix,\n  suffix,\n  className,\n  iconClassName,\n  iconOverlayClassName,\n  fontIconClassName,\n  itemClassName,\n  itemDescriptionClassName,\n  onClick,\n}: OwnProps<T>) {\n  const lang = useLang();\n  const displayedName = shouldUseSelectedName ? (item.selectedName ?? item.name) : item.name;\n\n  const fullClassName = buildClassName(\n    item.isDisabled && styles.disabled,\n    item.isDangerous && styles.dangerous,\n    className,\n  );\n\n  return (\n    <button\n      type=\"button\"\n      className={fullClassName}\n      disabled={item.isDisabled}\n      onClick={onClick && ((e) => onClick(e, item.value))}\n    >\n      {prefix}\n      {item.icon && (\n        <span className={buildClassName('icon', styles.itemIcon, iconClassName)}>\n          <img src={item.icon} alt=\"\" className={styles.itemMainIcon} />\n          {item.overlayIcon && (\n            <img\n              src={item.overlayIcon}\n              alt=\"\"\n              className={buildClassName('icon', styles.itemOverlayIcon, iconOverlayClassName)}\n            />\n          )}\n        </span>\n      )}\n      {item.fontIcon && (\n        <i\n          className={buildClassName(`icon icon-${item.fontIcon}`, styles.fontIcon, fontIconClassName)}\n          aria-hidden\n        />\n      )}\n      <span className={buildClassName(styles.itemName, itemClassName)}>\n        {shouldTranslate ? lang(displayedName) : displayedName}\n        {!!item.description && (\n          <span className={buildClassName(styles.itemDescription, itemDescriptionClassName)}>\n            {shouldTranslate && typeof item.description === 'string'\n              ? lang(item.description)\n              : item.description}\n          </span>\n        )}\n      </span>\n      {suffix}\n    </button>\n  );\n}\n\nexport default memo(DropdownItemContent);\n","import captureKeyboardListener from './captureKeyboardListeners';\n\nexport default function captureEscKeyListener(handler: NoneToVoidFunction) {\n  return captureKeyboardListener({\n    onEsc: () => {\n      handler();\n    },\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"VydD7Rve\",\"inPortal\":\"vcuzKHhA\",\"bubble\":\"mY0hTIiL\",\"top\":\"FsyRNnQH\",\"bottom\":\"tkKrx8OR\",\"left\":\"MvEERemq\",\"right\":\"y6xJQNRF\",\"backdrop\":\"gc2eH8vQ\",\"menu\":\"gtd29jbF\",\"suggestion\":\"BYQgxGEv\",\"dropdown\":\"IxGdkmhI\"};","import { type ElementRef, useLayoutEffect } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../types';\n\nimport { requestForcedReflow } from '../lib/fasterdom/fasterdom';\nimport { clamp } from '../util/math';\nimport windowSize from '../util/windowSize';\nimport { useStateRef } from './useStateRef';\n\nimport styles from '../components/ui/Menu.module.scss';\n\ninterface Coordinates {\n  x: number;\n  y: number;\n}\n\ninterface Bounds {\n  width: number;\n  height: number;\n  left: number;\n  top: number;\n  right: number;\n  bottom: number;\n}\n\ninterface MenuDimensions {\n  width: number;\n  height: number;\n  marginTop: number;\n}\n\ninterface GatherBoundsParams {\n  getTriggerElement?: () => (HTMLElement | null | undefined);\n  getRootElement: () => (HTMLElement | null | undefined);\n  getMenuElement: () => (HTMLElement | null | undefined);\n  layout: Layout;\n  anchor: IAnchorPosition;\n}\n\ninterface PositionResult {\n  positionX: 'left' | 'right';\n  positionY: 'top' | 'bottom';\n  coordinates: Coordinates;\n  transformOrigin: Coordinates;\n}\n\ninterface StaticPositionOptions {\n  anchor?: IAnchorPosition;\n  positionX?: 'left' | 'right';\n  positionY?: 'top' | 'bottom';\n  transformOriginX?: number;\n  transformOriginY?: number;\n  style?: string;\n  bubbleStyle?: string;\n}\n\ninterface DynamicPositionOptions {\n  anchor: IAnchorPosition;\n  getTriggerElement?: () => HTMLElement | undefined | null;\n  getRootElement: () => HTMLElement | undefined | null;\n  getMenuElement: () => HTMLElement | undefined | null;\n  getLayout?: () => Layout;\n  withMaxHeight?: boolean;\n}\n\nexport type MenuPositionOptions = StaticPositionOptions | DynamicPositionOptions;\n\nexport interface Layout {\n  extraPaddingX?: number;\n  extraTopPadding?: number;\n  extraMarginTop?: number;\n  menuElMinWidth?: number;\n  doNotCoverTrigger?: boolean;\n  centerHorizontally?: boolean;\n  deltaX?: number;\n  topShiftY?: number;\n  shouldAvoidNegativePosition?: boolean;\n  withPortal?: boolean;\n  isDense?: boolean; //  Allows you to place the menu as close to the edges of the area as possible\n  preferredPositionX?: 'left' | 'right';\n  preferredPositionY?: 'top' | 'bottom';\n}\n\nconst POSITIONING = {\n  VISUAL_COMFORT_SPACE: 16,\n  BOTTOM_MARGIN: 12,\n  HORIZONTAL_OFFSET: 3,\n  FALLBACK_X: 16,\n  TRIGGER_OFFSET: 6,\n} as const;\n\nconst EMPTY_RECT = {\n  width: 0, left: 0, height: 0, top: 0, right: 0, bottom: 0,\n};\n\nexport default function useMenuPosition(\n  isOpen: boolean,\n  containerRef: ElementRef<HTMLDivElement>,\n  bubbleRef: ElementRef<HTMLDivElement>,\n  options: MenuPositionOptions,\n) {\n  const optionsRef = useStateRef(options);\n\n  useLayoutEffect(() => {\n    if (!isOpen) return;\n\n    const options2 = optionsRef.current;\n\n    if (isDynamicPositionOptions(options2)) {\n      requestForcedReflow(() => {\n        const staticOptions = processDynamically(options2);\n\n        return () => {\n          applyStaticOptions(containerRef, bubbleRef, staticOptions);\n        };\n      });\n    } else {\n      applyStaticOptions(containerRef, bubbleRef, options2);\n    }\n  }, [isOpen, containerRef, bubbleRef, optionsRef]);\n}\n\nfunction applyStaticOptions(\n  containerRef: ElementRef<HTMLDivElement>,\n  bubbleRef: ElementRef<HTMLDivElement>,\n  {\n    anchor,\n    positionX = 'left',\n    positionY = 'top',\n    transformOriginX,\n    transformOriginY,\n    style,\n    bubbleStyle,\n  }: StaticPositionOptions,\n) {\n  const containerEl = containerRef.current!;\n  const bubbleEl = bubbleRef.current!;\n\n  let finalStyle = style;\n  if (anchor && !style) {\n    finalStyle = `left: ${anchor.x}px; top: ${anchor.y}px`;\n  }\n\n  if (finalStyle) {\n    containerEl.style.cssText = finalStyle;\n  }\n\n  if (bubbleStyle) {\n    bubbleEl.style.cssText = bubbleStyle;\n  }\n\n  if (positionX) {\n    removeExtraClass(bubbleEl, styles.left);\n    removeExtraClass(bubbleEl, styles.right);\n    addExtraClass(bubbleEl, styles[positionX]);\n  }\n\n  if (positionY) {\n    removeExtraClass(bubbleEl, styles.top);\n    removeExtraClass(bubbleEl, styles.bottom);\n    addExtraClass(bubbleEl, styles[positionY]);\n  }\n\n  setExtraStyles(bubbleEl, {\n    transformOrigin: [\n      transformOriginX ? `${transformOriginX}px` : positionX,\n      transformOriginY ? `${transformOriginY}px` : positionY,\n    ].join(' '),\n  });\n}\n\nfunction gatherBounds({\n  getTriggerElement,\n  getRootElement,\n  getMenuElement,\n  layout,\n  anchor,\n}: GatherBoundsParams): {\n    triggerRect: DOMRect;\n    rootRect: Bounds;\n    menuDimensions: MenuDimensions;\n  } {\n  const triggerEl = getTriggerElement?.();\n  const rootEl = getRootElement();\n  const menuEl = getMenuElement();\n\n  const { extraMarginTop = 0, menuElMinWidth = 0 } = layout;\n\n  const triggerRect = triggerEl\n    ? triggerEl.getBoundingClientRect()\n    : { ...EMPTY_RECT, left: anchor.x, top: anchor.y, right: anchor.x, bottom: anchor.y } as DOMRect;\n  const rootRect = rootEl ? rootEl.getBoundingClientRect() : EMPTY_RECT;\n\n  rootRect.height -= windowSize.get().safeAreaBottom;\n\n  let menuDimensions: MenuDimensions;\n  if (menuEl) {\n    const marginTop = parseInt(getComputedStyle(menuEl).marginTop, 10) + extraMarginTop;\n    const { offsetWidth, offsetHeight } = menuEl;\n    menuDimensions = {\n      width: Math.max(offsetWidth, menuElMinWidth),\n      height: offsetHeight + marginTop,\n      marginTop,\n    };\n  } else {\n    menuDimensions = { width: 0, height: 0, marginTop: 0 };\n  }\n\n  return { triggerRect, rootRect, menuDimensions };\n}\n\nfunction determineHorizontalPosition(\n  anchor: Coordinates,\n  rootRect: Bounds,\n  menuWidth: number,\n  deltaX: number,\n  preferredPositionX: 'left' | 'right' = 'right',\n): { positionX: 'left' | 'right'; x: number } {\n  let x = anchor.x;\n  let positionX: 'left' | 'right';\n\n  if (preferredPositionX === 'right') {\n    // Prefer left-leaning (opening leftward): try 'right' position first\n    if (x - menuWidth >= rootRect.left + POSITIONING.VISUAL_COMFORT_SPACE) {\n      positionX = 'right';\n      x -= POSITIONING.HORIZONTAL_OFFSET;\n    } else {\n      // Fall back to right-leaning (opening rightward)\n      positionX = 'left';\n      x += POSITIONING.HORIZONTAL_OFFSET;\n    }\n  } else {\n    // Prefer right-leaning (opening rightward): try 'left' position first\n    if (x + menuWidth <= rootRect.right - POSITIONING.VISUAL_COMFORT_SPACE) {\n      positionX = 'left';\n      x += POSITIONING.HORIZONTAL_OFFSET;\n    } else {\n      // Fall back to left-leaning (opening leftward)\n      positionX = 'right';\n      x -= POSITIONING.HORIZONTAL_OFFSET;\n    }\n  }\n\n  x += deltaX;\n\n  return { positionX, x };\n}\n\nfunction determineVerticalPosition(\n  anchor: Coordinates,\n  triggerRect: DOMRect,\n  rootRect: Bounds,\n  menuHeight: number,\n  layout: Layout,\n): { positionY: 'top' | 'bottom'; y: number } {\n  const {\n    topShiftY = 0,\n    extraTopPadding = 0,\n    isDense = false,\n    doNotCoverTrigger = false,\n    preferredPositionY,\n  } = layout;\n  let y = anchor.y;\n  let positionY: 'top' | 'bottom';\n\n  // For `doNotCoverTrigger` we use the position relative to the trigger\n  if (doNotCoverTrigger) {\n    const hasSpaceBelow = triggerRect.bottom + POSITIONING.TRIGGER_OFFSET + menuHeight <= rootRect.bottom;\n    const hasSpaceAbove = triggerRect.top - POSITIONING.TRIGGER_OFFSET - menuHeight >= rootRect.top;\n\n    if (hasSpaceBelow && preferredPositionY !== 'bottom') {\n      positionY = 'top';\n      y = triggerRect.bottom + POSITIONING.TRIGGER_OFFSET;\n    } else if (hasSpaceAbove) {\n      positionY = 'bottom';\n      y = triggerRect.top - POSITIONING.TRIGGER_OFFSET;\n    } else {\n      // If there is no room at the top or bottom, we use standard logic\n      positionY = 'bottom';\n      y = rootRect.top + rootRect.height;\n    }\n  } else {\n    const yWithTopShift = y + topShiftY;\n    const hasSpaceBelow = yWithTopShift + triggerRect.height + menuHeight < rootRect.height + rootRect.top;\n    const hasSpaceAbove = y - triggerRect.height - menuHeight >= rootRect.top + extraTopPadding;\n\n    if ((preferredPositionY === 'bottom' && hasSpaceAbove) || (!isDense && !hasSpaceBelow)) {\n      positionY = 'bottom';\n      if (!hasSpaceAbove) {\n        y = rootRect.top + rootRect.height;\n      }\n    } else {\n      positionY = 'top';\n      y = yWithTopShift;\n    }\n  }\n\n  return { positionY, y };\n}\n\nfunction applyBoundaryConstraints(\n  coordinates: Coordinates,\n  positionX: 'left' | 'right',\n  triggerRect: DOMRect,\n  rootRect: Bounds,\n  menuDimensions: MenuDimensions,\n  layout: Layout,\n): Coordinates {\n  const {\n    shouldAvoidNegativePosition = false,\n    withPortal = false,\n    isDense = false,\n    menuElMinWidth = 0,\n    centerHorizontally = false,\n  } = layout;\n\n  let { x, y } = coordinates;\n\n  // Centering the menu with respect to the trigger\n  if (centerHorizontally) {\n    x = triggerRect.left + (triggerRect.width - menuDimensions.width) / 2;\n\n    // Check that the menu does not extend beyond the edges of the screen\n    x = clamp(\n      x,\n      rootRect.left + POSITIONING.VISUAL_COMFORT_SPACE,\n      rootRect.right - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE,\n    );\n\n    if (!withPortal) {\n      y -= triggerRect.top;\n    }\n  } else {\n    // Calculate relative position to trigger\n    const leftWithPossibleNegative = Math.min(\n      x - triggerRect.left,\n      rootRect.width - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE,\n    );\n\n    // Apply horizontal constraints\n    if (positionX === 'left') {\n      if (withPortal || shouldAvoidNegativePosition) {\n        x = Math.max(POSITIONING.VISUAL_COMFORT_SPACE, leftWithPossibleNegative);\n      } else {\n        x = leftWithPossibleNegative;\n      }\n    } else {\n      x -= triggerRect.left;\n    }\n\n    // Apply portal positioning\n    if (withPortal) {\n      x += triggerRect.left;\n      // For portal, Y coordinate should remain unchanged (already in viewport coordinates)\n      // y stays as is\n    } else {\n      // For non-portal, convert from anchor coordinates to relative coordinates\n      y -= triggerRect.top;\n    }\n  }\n\n  // Apply dense mode constraints\n  if (isDense) {\n    x = Math.min(x, rootRect.width - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE);\n    y = Math.min(y, rootRect.height - menuDimensions.height - POSITIONING.VISUAL_COMFORT_SPACE);\n  }\n\n  // Handle portal edge constraints\n  if (withPortal && !centerHorizontally) {\n    if (positionX === 'left') {\n      x = Math.min(x, rootRect.width - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE);\n    } else {\n      x = Math.max(x, POSITIONING.VISUAL_COMFORT_SPACE + menuDimensions.width);\n    }\n  }\n\n  // Handle minimum width adjustments\n  const addedXForMenuPositioning = menuElMinWidth ? Math.max(0,\n    (menuElMinWidth - (menuDimensions.width - menuElMinWidth)) / 2) : 0;\n  if (x - addedXForMenuPositioning < 0 && shouldAvoidNegativePosition) {\n    x = addedXForMenuPositioning + POSITIONING.VISUAL_COMFORT_SPACE;\n  }\n\n  return { x, y };\n}\n\nfunction calculateTransformOrigin(\n  anchor: Coordinates,\n  finalCoordinates: Coordinates,\n  positionResult: Pick<PositionResult, 'positionX' | 'positionY'>,\n  triggerRect: DOMRect,\n  menuDimensions: MenuDimensions,\n  withPortal: boolean,\n): Coordinates {\n  const portalOffset = withPortal ? { x: triggerRect.left, y: triggerRect.top } : { x: 0, y: 0 };\n\n  const offsetX = (anchor.x + portalOffset.x - triggerRect.left) - finalCoordinates.x;\n  const offsetY = (anchor.y + portalOffset.y - triggerRect.top) - finalCoordinates.y - menuDimensions.marginTop;\n\n  const transformOriginX = positionResult.positionX === 'left'\n    ? offsetX\n    : menuDimensions.width + offsetX;\n\n  const transformOriginY = positionResult.positionY === 'bottom'\n    ? menuDimensions.height + offsetY\n    : offsetY;\n\n  return { x: transformOriginX, y: transformOriginY };\n}\n\nfunction processDynamically(\n  {\n    anchor,\n    getRootElement,\n    getMenuElement,\n    getTriggerElement,\n    getLayout,\n    withMaxHeight,\n  }: DynamicPositionOptions,\n) {\n  const layout = getLayout?.() || {};\n\n  const { triggerRect, rootRect, menuDimensions } = gatherBounds({\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    layout,\n    anchor,\n  });\n\n  const { positionX, x } = determineHorizontalPosition(\n    anchor,\n    rootRect,\n    menuDimensions.width,\n    layout.deltaX || 0,\n    layout.preferredPositionX,\n  );\n\n  const { positionY, y } = determineVerticalPosition(\n    anchor,\n    triggerRect,\n    rootRect,\n    menuDimensions.height,\n    layout,\n  );\n\n  const finalCoordinates = applyBoundaryConstraints(\n    { x, y },\n    positionX,\n    triggerRect,\n    rootRect,\n    menuDimensions,\n    layout,\n  );\n\n  const transformOrigin = calculateTransformOrigin(\n    anchor,\n    finalCoordinates,\n    { positionX, positionY },\n    triggerRect,\n    menuDimensions,\n    layout.withPortal || false,\n  );\n\n  const style = `left: ${finalCoordinates.x}px; top: ${finalCoordinates.y}px; --menu-width: ${menuDimensions.width}px;`;\n\n  let bubbleStyle;\n  if (withMaxHeight) {\n    const menuMaxHeight = rootRect.height - POSITIONING.BOTTOM_MARGIN - menuDimensions.marginTop;\n    bubbleStyle = `max-height: ${menuMaxHeight}px;`;\n  }\n\n  return {\n    positionX,\n    positionY,\n    transformOriginX: transformOrigin.x,\n    transformOriginY: transformOrigin.y,\n    style,\n    bubbleStyle,\n  };\n}\n\nfunction isDynamicPositionOptions(options: MenuPositionOptions): options is DynamicPositionOptions {\n  return 'getRootElement' in options;\n}\n","import type { ElementRef, FC, TeactNode } from '../../lib/teact/teact';\nimport React, { beginHeavyAnimation, useEffect, useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useMenuPosition, { type MenuPositionOptions } from '../../hooks/useMenuPosition';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useVirtualBackdrop from '../../hooks/useVirtualBackdrop';\n\nimport Portal from './Portal';\n\nimport styles from './Menu.module.scss';\n\nexport type { MenuPositionOptions } from '../../hooks/useMenuPosition';\n\ntype OwnProps = {\n  children: TeactNode;\n  menuRef?: ElementRef<HTMLDivElement>;\n  isOpen: boolean;\n  id?: string;\n  className?: string;\n  bubbleClassName?: string;\n  type?: 'menu' | 'suggestion' | 'dropdown';\n  autoClose?: boolean;\n  shouldSkipTransition?: boolean;\n  noBackdrop?: boolean;\n  withPortal?: boolean;\n  noCloseOnBackdrop?: boolean;\n  shouldCleanup?: boolean;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n  onClose?: NoneToVoidFunction;\n  onMouseEnter?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onMouseLeave?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n} & MenuPositionOptions;\n\nexport const ANIMATION_DURATION = 200;\n\nconst Menu: FC<OwnProps> = ({\n  children,\n  isOpen,\n  id,\n  menuRef,\n  className,\n  bubbleClassName,\n  type = 'menu',\n  autoClose = false,\n  shouldSkipTransition,\n  noBackdrop = false,\n  withPortal,\n  noCloseOnBackdrop = false,\n  shouldCleanup,\n  onCloseAnimationEnd,\n  onClose,\n  onMouseEnter,\n  onMouseLeave,\n  ...positionOptions\n}) => {\n  const containerRef = useRef<HTMLDivElement>();\n  let bubbleRef = useRef<HTMLDivElement>();\n  if (menuRef) {\n    bubbleRef = menuRef;\n  }\n\n  useMenuPosition(isOpen, containerRef, bubbleRef, positionOptions);\n\n  useHistoryBack({\n    isActive: Boolean(isOpen && onClose),\n    onBack: onClose!,\n    shouldBeReplaced: true,\n  });\n\n  const {\n    shouldRender,\n  } = useShowTransition({\n    isOpen,\n    ref: bubbleRef,\n    onCloseAnimationEnd,\n    noMountTransition: shouldSkipTransition,\n    noCloseTransition: shouldSkipTransition,\n    withShouldRender: true,\n  });\n\n  useEffect(\n    () => (isOpen && onClose ? captureEscKeyListener(onClose) : undefined),\n    [isOpen, onClose],\n  );\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (isOpen || (!isOpen && prevIsOpen === true)) {\n      beginHeavyAnimation(ANIMATION_DURATION);\n    }\n  }, [isOpen]);\n\n  useVirtualBackdrop(isOpen && !noBackdrop, containerRef, noCloseOnBackdrop ? undefined : onClose);\n\n  const fullBubbleClassName = buildClassName(\n    styles.bubble,\n    bubbleClassName,\n    'menu-bubble',\n    styles[type],\n  );\n\n  if (shouldCleanup && !shouldRender) {\n    return undefined;\n  }\n\n  const menu = (\n    <div\n      ref={containerRef}\n      id={id}\n      className={buildClassName(styles.wrapper, className, withPortal && styles.inPortal)}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={isOpen ? onMouseLeave : undefined}\n    >\n      {isOpen && !noBackdrop && (\n        // This only prevents click events triggering on underlying elements\n        <div className={styles.backdrop} onClick={stopEvent} />\n      )}\n      <div\n        ref={bubbleRef}\n        className={fullBubbleClassName}\n        onClick={autoClose ? onClose : undefined}\n      >\n        {children}\n      </div>\n    </div>\n  );\n\n  if (withPortal) {\n    return <Portal>{menu}</Portal>;\n  }\n\n  return menu;\n};\n\nexport default Menu;\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useEffect } from '../lib/teact/teact';\n\nimport styles from '../components/ui/Menu.module.scss';\n\n// This effect implements closing menus by clicking outside of them\n// without adding extra elements to the DOM\nexport default function useVirtualBackdrop(\n  isOpen: boolean,\n  menuRef: ElementRef<HTMLDivElement>,\n  onClose?: () => void | undefined,\n) {\n  useEffect(() => {\n    const handleEvent = (e: Event) => {\n      const menu = menuRef.current;\n      const target = e.target as HTMLElement | null;\n      if (!menu || !target) {\n        return;\n      }\n\n      if (\n        !menu.contains(e.target as Node | null)\n        || target.classList.contains(styles.backdrop)\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (onClose) {\n          onClose();\n        }\n      }\n    };\n\n    if (isOpen && onClose) {\n      document.addEventListener('mousedown', handleEvent);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleEvent);\n    };\n  }, [isOpen, menuRef, onClose]);\n}\n","import React, { type ElementRef, memo, useRef } from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\nimport type { MenuPositionOptions } from './Menu';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownItemContent from './DropdownItemContent';\nimport Menu from './Menu';\n\nimport styles from './Dropdown.module.scss';\n\ninterface OwnProps<T extends string> {\n  isOpen: boolean;\n  ref?: ElementRef<HTMLDivElement>;\n  selectedValue?: T;\n  items: DropdownItem<T>[];\n  withPortal?: boolean;\n  menuAnchor?: IAnchorPosition;\n  menuPositionY?: 'top' | 'bottom';\n  menuPositionX?: 'right' | 'left';\n  shouldTranslateOptions?: boolean;\n  className?: string;\n  bubbleClassName?: string;\n  buttonClassName?: string;\n  iconClassName?: string;\n  fontIconClassName?: string;\n  itemDescriptionClassName?: string;\n  shouldCleanup?: boolean;\n  onSelect?: (value: T, e?: React.MouseEvent) => void;\n  onClose: NoneToVoidFunction;\n  getTriggerElement?: () => HTMLElement | undefined | null;\n  getRootElement?: () => HTMLElement | undefined | null;\n  getMenuElement?: () => HTMLElement | undefined | null;\n  getLayout?: () => { withPortal?: boolean };\n  onCloseAnimationEnd?: NoneToVoidFunction;\n}\n\nfunction DropdownMenu<T extends string>({\n  isOpen,\n  ref,\n  selectedValue,\n  items,\n  withPortal,\n  menuAnchor,\n  menuPositionX,\n  menuPositionY,\n  shouldTranslateOptions,\n  className,\n  bubbleClassName,\n  buttonClassName,\n  iconClassName,\n  fontIconClassName,\n  itemDescriptionClassName,\n  shouldCleanup,\n  onSelect,\n  onClose,\n  getTriggerElement,\n  getRootElement,\n  getMenuElement,\n  getLayout,\n  onCloseAnimationEnd,\n}: OwnProps<T>) {\n  let menuRef = useRef<HTMLDivElement>();\n  if (ref) {\n    menuRef = ref;\n  }\n\n  // Create position options\n  const menuPositionOptions: MenuPositionOptions = menuAnchor && getTriggerElement && getRootElement && getMenuElement\n    ? {\n      anchor: menuAnchor,\n      getTriggerElement,\n      getRootElement,\n      getMenuElement,\n      getLayout,\n    }\n    : menuAnchor && getRootElement && getMenuElement\n      ? {\n        anchor: menuAnchor,\n        getRootElement,\n        getMenuElement,\n        getLayout,\n        positionX: menuPositionX,\n        positionY: menuPositionY,\n      }\n      : {\n        anchor: menuAnchor,\n        positionX: menuPositionX,\n        positionY: menuPositionY,\n      };\n\n  const handleItemClick = useLastCallback((e: React.MouseEvent, value: T) => {\n    e.stopPropagation();\n    onSelect?.(value, e);\n    onClose();\n  });\n\n  return (\n    <Menu\n      menuRef={menuRef}\n      isOpen={isOpen}\n      type=\"dropdown\"\n      withPortal={withPortal}\n      className={className}\n      bubbleClassName={bubbleClassName}\n      shouldCleanup={shouldCleanup}\n      onClose={onClose}\n      onCloseAnimationEnd={onCloseAnimationEnd}\n      {...menuPositionOptions}\n    >\n      {items.map((item, index) => {\n        const fullButtonClassName = buildClassName(\n          styles.item,\n          (item.icon || item.fontIcon) && styles.item_with_icon,\n          item.withDelimiter && index > 0 && styles.delimiter,\n          item.withDelimiterAfter && styles.delimiterAfter,\n          selectedValue === item.value && styles.item_selected,\n          buttonClassName,\n          'capture-scroll',\n        );\n        return (\n          <DropdownItemContent\n            key={item.value}\n            item={item}\n            shouldTranslate={shouldTranslateOptions}\n            className={fullButtonClassName}\n            iconClassName={iconClassName}\n            fontIconClassName={fontIconClassName}\n            itemClassName=\"menuItemName\"\n            itemDescriptionClassName={itemDescriptionClassName}\n            onClick={handleItemClick}\n          />\n        );\n      })}\n    </Menu>\n  );\n}\n\nexport default memo(DropdownMenu);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useRef, useState } from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from './Button';\nimport DropdownMenu from './DropdownMenu';\n\nimport modalStyles from './Modal.module.scss';\n\ntype OwnProps<T extends string> = {\n  title?: string | TeactNode;\n  className?: string;\n  withNotch?: boolean;\n  closeClassName?: string;\n  menuItems?: DropdownItem<T>[];\n  onClose?: NoneToVoidFunction;\n  onBackButtonClick?: () => void;\n  onMenuItemClick?: (value: T) => void;\n};\n\nfunction ModalHeader<T extends string>({\n  title, className, withNotch, closeClassName, menuItems, onClose, onBackButtonClick, onMenuItemClick,\n}: OwnProps<T>) {\n  const lang = useLang();\n\n  const menuRef = useRef<HTMLDivElement>();\n  const menuButtonRef = useRef<HTMLButtonElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition | undefined>();\n\n  const hasMenu = Boolean(menuItems?.length);\n  const isMenuOpen = Boolean(menuAnchor);\n\n  const getTriggerElement = useLastCallback(() => menuButtonRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n  const closeMenu = useLastCallback(() => setMenuAnchor(undefined));\n\n  const handleMenuButtonClick = useLastCallback(() => {\n    if (isMenuOpen) {\n      closeMenu();\n    } else {\n      const { right: x, y, height } = menuButtonRef.current!.getBoundingClientRect();\n      setMenuAnchor({ x, y: y + height });\n    }\n  });\n\n  return (\n    <div\n      className={buildClassName(\n        modalStyles.header,\n        'with-notch-on-scroll',\n        withNotch && 'is-scrolled',\n        !onBackButtonClick && modalStyles.header_wideContent,\n        className,\n        isMenuOpen && 'is-menu-open',\n      )}\n    >\n      {onBackButtonClick && (\n        <Button isSimple isText onClick={onBackButtonClick} className={modalStyles.header_back}>\n          <i className={buildClassName(modalStyles.header_backIcon, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n      {title !== undefined && <div className={buildClassName(modalStyles.title, modalStyles.singleTitle)}>{title}</div>}\n      {hasMenu && (\n        <Button\n          ref={menuButtonRef}\n          isSimple\n          className={buildClassName(modalStyles.menuButton, closeClassName)}\n          ariaLabel={lang('Menu')}\n          onClick={handleMenuButtonClick}\n        >\n          <i className={buildClassName(modalStyles.menuIcon, 'icon-menu-dots')} aria-hidden />\n        </Button>\n      )}\n      {onClose && (\n        <Button\n          isRound\n          className={buildClassName(modalStyles.closeButton, closeClassName)}\n          ariaLabel={lang('Close')}\n          onClick={onClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      )}\n      {hasMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          ref={menuRef}\n          items={menuItems}\n          withPortal\n          shouldTranslateOptions\n          menuPositionX=\"right\"\n          menuAnchor={menuAnchor}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={onMenuItemClick}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(ModalHeader);\n","import React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { useIFrameBridgeProvider } from '../../util/embeddedDappBridge/provider/useIFrameBridgeProvider';\nimport { openUrl } from '../../util/openUrl';\nimport { shareUrl } from '../../util/share';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Modal from './Modal';\nimport ModalHeader from './ModalHeader';\n\nimport styles from './IFrameBrowser.module.scss';\n\ninterface StateProps {\n  url?: string;\n  title?: string;\n}\n\ntype MenuHandler = 'reload' | 'openInBrowser' | 'copyUrl' | 'share' | 'close';\n\nconst TITLES = {\n  'tonscan.org': 'TON Explorer',\n  'multisend.mytonwallet.io': 'Multi-Send',\n  'localhost:4323': 'Multi-Send',\n};\n\nconst MENU_ITEMS: DropdownItem<MenuHandler>[] = [{\n  value: 'reload',\n  name: 'Reload',\n  fontIcon: 'menu-reload',\n}, {\n  value: 'openInBrowser',\n  name: 'Open in Browser',\n  fontIcon: 'menu-globe',\n}, {\n  value: 'copyUrl',\n  name: 'Copy Link',\n  fontIcon: 'menu-copy',\n}, {\n  value: 'close',\n  name: 'Close',\n  fontIcon: 'menu-close',\n  withDelimiter: true,\n}];\n\nfunction IFrameBrowser({\n  url, title,\n}: StateProps) {\n  const { closeBrowser, showNotification } = getActions();\n  const lang = useLang();\n\n  const iframeRef = useRef<HTMLIFrameElement>();\n\n  const { setupDappBridge } = useIFrameBridgeProvider(url);\n\n  const host = useMemo(() => url && (new URL(url)).host, [url]);\n  const renderingTitle = useCurrentOrPrev(title || (host && (TITLES[host as keyof typeof TITLES] || host)));\n\n  const handleMenuItemClick = useLastCallback((value: MenuHandler) => {\n    if (!url) return;\n\n    const frame = iframeRef.current!;\n\n    switch (value) {\n      case 'reload':\n        frame.src = 'about:blank';\n        frame.addEventListener('load', () => {\n          frame.src = url;\n        }, { once: true });\n\n        break;\n\n      case 'openInBrowser':\n        void openUrl(url, { isExternal: true });\n        break;\n\n      case 'copyUrl':\n        void copyTextToClipboard(url);\n        showNotification({ message: lang('URL was copied!'), icon: 'icon-copy' });\n        break;\n\n      case 'share':\n        void shareUrl(url, renderingTitle);\n        break;\n\n      case 'close':\n        closeBrowser();\n        break;\n    }\n  });\n\n  return (\n    <Modal isOpen={Boolean(url)} dialogClassName={styles.dialog} onClose={closeBrowser}>\n      <ModalHeader\n        title={renderingTitle}\n        menuItems={MENU_ITEMS}\n        onMenuItemClick={handleMenuItemClick}\n        className={styles.modalHeader}\n      />\n      <iframe\n        ref={iframeRef}\n        title={renderingTitle}\n        src={url}\n        className={styles.iframe}\n        allow=\"web-share; clipboard-write\"\n        onLoad={setupDappBridge}\n      />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentBrowserOptions } = global;\n\n  return {\n    url: currentBrowserOptions?.url,\n    title: currentBrowserOptions?.title,\n  };\n})(IFrameBrowser));\n","import { useEffect, useRef } from '../../../lib/teact/teact';\n\nimport { EMBEDDED_DAPP_BRIDGE_CHANNEL } from '../../../config';\nimport { createReverseIFrameInterface } from '../../createPostMessageInterface';\nimport { buildBridgeApi } from './bridgeApi';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nexport function useIFrameBridgeProvider(pageUrl?: string) {\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  const setupDappBridge = useLastCallback((e) => {\n    cleanupRef.current?.();\n\n    const iframe = e.target as HTMLIFrameElement;\n    cleanupRef.current = createReverseIFrameInterface(\n      buildBridgeApi(pageUrl!),\n      new URL(pageUrl!).origin,\n      iframe.contentWindow!,\n      EMBEDDED_DAPP_BRIDGE_CHANNEL,\n    );\n  });\n\n  useEffect(() => {\n    if (!pageUrl) return;\n\n    return () => {\n      cleanupRef.current?.();\n    };\n  }, [pageUrl]);\n\n  return {\n    setupDappBridge,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"iframe\":\"qm6h4mWP\",\"dialog\":\"sszvWMpD\",\"modalHeader\":\"ndvLaNkq\"};","import { type ElementRef, useEffect, useRef, useSignal } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { debounce, throttle, throttleWith } from '../util/schedulers';\nimport useDerivedState from './useDerivedState';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useLastCallback from './useLastCallback';\n\ntype TargetCallback = (entry: IntersectionObserverEntry) => void;\ntype RootCallback = (entries: IntersectionObserverEntry[]) => void;\ntype ObserveCleanup = NoneToVoidFunction;\nexport type ObserveFn = (target: HTMLElement, targetCallback?: TargetCallback) => ObserveCleanup;\n\ninterface IntersectionController {\n  observer: IntersectionObserver;\n  callbacks: Map<HTMLElement, TargetCallback>;\n}\n\ninterface Response {\n  observe: ObserveFn;\n  freeze: NoneToVoidFunction;\n  unfreeze: NoneToVoidFunction;\n}\n\nexport function useIntersectionObserver({\n  rootRef,\n  throttleMs,\n  throttleScheduler,\n  debounceMs,\n  shouldSkipFirst,\n  margin,\n  threshold,\n  isDisabled,\n}: {\n  rootRef?: ElementRef<HTMLDivElement>;\n  throttleMs?: number;\n  throttleScheduler?: Scheduler;\n  debounceMs?: number;\n  shouldSkipFirst?: boolean;\n  margin?: number;\n  threshold?: number | number[];\n  isDisabled?: boolean;\n}, rootCallback?: RootCallback): Response {\n  const controllerRef = useRef<IntersectionController>();\n  const rootCallbackRef = useRef<RootCallback>();\n  const freezeFlagsRef = useRef(0);\n  const onUnfreezeRef = useRef<NoneToVoidFunction>();\n\n  rootCallbackRef.current = rootCallback;\n\n  const freeze = useLastCallback(() => {\n    freezeFlagsRef.current++;\n  });\n\n  const unfreeze = useLastCallback(() => {\n    if (!freezeFlagsRef.current) {\n      return;\n    }\n\n    freezeFlagsRef.current--;\n\n    if (!freezeFlagsRef.current && onUnfreezeRef.current) {\n      onUnfreezeRef.current();\n      onUnfreezeRef.current = undefined;\n    }\n  });\n\n  useHeavyAnimation(freeze, unfreeze);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    return () => {\n      if (controllerRef.current) {\n        controllerRef.current.observer.disconnect();\n        controllerRef.current.callbacks.clear();\n        controllerRef.current = undefined;\n      }\n    };\n  }, [isDisabled]);\n\n  function initController() {\n    const callbacks = new Map();\n    const entriesAccumulator = new Map<Element, IntersectionObserverEntry>();\n\n    let observerCallback: typeof observerCallbackSync;\n    if (typeof throttleScheduler === 'function') {\n      observerCallback = throttleWith(throttleScheduler, observerCallbackSync);\n    } else if (throttleMs) {\n      observerCallback = throttle(observerCallbackSync, throttleMs, !shouldSkipFirst);\n    } else if (debounceMs) {\n      observerCallback = debounce(observerCallbackSync, debounceMs, !shouldSkipFirst);\n    } else {\n      observerCallback = observerCallbackSync;\n    }\n\n    function observerCallbackSync() {\n      if (freezeFlagsRef.current) {\n        onUnfreezeRef.current = observerCallback;\n        return;\n      }\n\n      const entries = Array.from(entriesAccumulator.values());\n\n      entries.forEach((entry: IntersectionObserverEntry) => {\n        const callback = callbacks.get(entry.target);\n        if (callback) {\n          callback!(entry, entries);\n        }\n      });\n\n      if (rootCallbackRef.current) {\n        rootCallbackRef.current(entries);\n      }\n\n      entriesAccumulator.clear();\n    }\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          entriesAccumulator.set(entry.target, entry);\n        });\n\n        if (freezeFlagsRef.current) {\n          onUnfreezeRef.current = observerCallback;\n        } else {\n          observerCallback();\n        }\n      },\n      {\n        root: rootRef?.current,\n        rootMargin: margin ? `${margin}px` : undefined,\n        threshold,\n      },\n    );\n\n    controllerRef.current = { observer, callbacks };\n  }\n\n  const observe = useLastCallback((target, targetCallback) => {\n    if (!controllerRef.current) {\n      initController();\n    }\n\n    const controller = controllerRef.current!;\n    controller.observer.observe(target);\n\n    if (targetCallback) {\n      controller.callbacks.set(target, targetCallback);\n    }\n\n    return () => {\n      if (targetCallback) {\n        controller.callbacks.delete(target);\n      }\n\n      controller.observer.unobserve(target);\n    };\n  });\n\n  return { observe, freeze, unfreeze };\n}\n\nexport function useOnIntersect(\n  targetRef: ElementRef<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    return observe ? observe(targetRef.current!, lastCallback) : undefined;\n  }, [lastCallback, observe, targetRef]);\n}\n\nexport function useGetIsIntersecting(\n  targetRef: ElementRef<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const [getIsIntersecting, setIsIntersecting] = useSignal(!observe);\n\n  useOnIntersect(targetRef, observe, (entry) => {\n    setIsIntersecting(entry.isIntersecting);\n\n    if (callback) {\n      callback(entry);\n    }\n  });\n\n  return getIsIntersecting;\n}\n\nexport function useIsIntersecting(\n  targetRef: ElementRef<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  return useDerivedState(useGetIsIntersecting(targetRef, observe, callback));\n}\n","import type { ElementRef } from '../lib/teact/teact';\n\nimport type { ObserveFn } from './useIntersectionObserver';\n\nimport { useGetIsIntersecting, useIntersectionObserver } from './useIntersectionObserver';\n\nlet observeIntersection: ObserveFn;\n\nconst THROTTLE = 350;\n\nexport function useAppIntersectionObserver() {\n  const { observe } = useIntersectionObserver({\n    throttleMs: THROTTLE,\n  });\n\n  observeIntersection = observe;\n}\n\nexport function useGetIsIntersectingWithApp(targetRef: ElementRef<HTMLElement>) {\n  return useGetIsIntersecting(targetRef, observeIntersection);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nfunction useInterval(callback: NoneToVoidFunction, delay?: number, noFirst = false) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (delay === undefined) {\n      return undefined;\n    }\n\n    const id = setInterval(lastCallback, delay);\n    if (!noFirst) lastCallback();\n\n    return () => clearInterval(id);\n  }, [delay, lastCallback, noFirst]);\n}\n\nexport default useInterval;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { setCancellableTimeout } from '../util/schedulers';\nimport useLastCallback from './useLastCallback';\n\nfunction useTimeout(callback: () => void, delay?: number, dependencies: readonly any[] = []) {\n  const savedCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (typeof delay !== 'number') {\n      return undefined;\n    }\n\n    return setCancellableTimeout(delay, savedCallback);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [delay, savedCallback, ...dependencies]);\n}\n\nexport default useTimeout;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"cFGCnqcA\",\"content\":\"sRTywfr2\",\"actions\":\"u6bKEBnR\",\"title\":\"UervEVFY\",\"description\":\"rO8yQetD\",\"img\":\"T1ztMNGQ\",\"button\":\"eymlW7_B\"};","import React from '../lib/teact/teact';\n\nimport { APP_NAME } from '../config';\nimport renderText from '../global/helpers/renderText';\n\nimport useLang from '../hooks/useLang';\nimport useLastCallback from '../hooks/useLastCallback';\n\nimport Button from './ui/Button';\n\nimport styles from './AppInactive.module.scss';\n\nimport appInactivePathPng from '../assets/app-inactive.png';\nimport appInactivePathWebP from '../assets/app-inactive.webp';\n\nfunction AppInactive() {\n  const lang = useLang();\n\n  const handleReload = useLastCallback(() => {\n    window.location.reload();\n  });\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.content}>\n        <picture className={styles.img}>\n          <source src={appInactivePathWebP} />\n          <img src={appInactivePathPng} alt=\"\" className={styles.img} />\n        </picture>\n\n        <h3 className={styles.title}>{lang('Such error, many tabs')}</h3>\n\n        <div className={styles.description}>\n          {renderText(lang('$many_tabs_error_description', { app_name: APP_NAME }))}\n        </div>\n\n        <div className={styles.actions}>\n          <Button isText className={styles.button} onClick={handleReload}>\n            {lang('Reload App')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AppInactive;\n","import { useState } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nconst THRESHOLD = 1;\n\nexport default function useScrolledState(threshold = THRESHOLD) {\n  const [isAtBeginning, setIsAtBeginning] = useState(true);\n  const [isAtEnd, setIsAtEnd] = useState(true);\n\n  const update = useLastCallback((element?: HTMLElement | null) => {\n    if (!element) return;\n\n    const { scrollHeight, scrollTop, clientHeight } = element;\n\n    setIsAtBeginning(scrollTop < threshold);\n    setIsAtEnd(scrollHeight - scrollTop - clientHeight < threshold);\n  });\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLElement>) => {\n    update(e.target as HTMLElement);\n  });\n\n  return {\n    isAtBeginning,\n    isAtEnd,\n    isScrolled: !isAtBeginning,\n    handleScroll,\n    update,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"YO7I0Ma0\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport styles from './Emoji.module.scss';\n\nexport type EmojiIcon = '' | '' | '';\n\ninterface OwnProps {\n  from: EmojiIcon;\n}\n\nconst PATH_BY_EMOJI = {\n  '': '1f977',\n  '': '1f984',\n  '': '26a0',\n};\n\nconst loadedImages = new Set();\n\nfunction Emoji({ from }: OwnProps) {\n  const key = from in PATH_BY_EMOJI ? PATH_BY_EMOJI[from as keyof typeof PATH_BY_EMOJI] : from;\n  const src = `./emoji/${key}.png`;\n  const [isLoaded, markLoaded] = useFlag(loadedImages.has(src));\n  const ref = useMediaTransition<HTMLImageElement>(isLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markLoaded();\n    loadedImages.add(src);\n  });\n\n  return (\n    <img\n      ref={ref}\n      src={src}\n      alt={from}\n      className={buildClassName(styles.root, styles[`key-${key}`])}\n      onLoad={handleLoad}\n    />\n  );\n}\n\nexport default memo(Emoji);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"T7fZ5IMk\",\"slide\":\"syDfunZP\",\"modalDialog\":\"xRqyv_rX\",\"header\":\"aDfdss28\",\"withTopSpace\":\"dtjdV8GY\",\"nestedTransition\":\"jX5Ya3FK\",\"transitionContainer\":\"yVzk5dwl\",\"developerCloseButton\":\"yn74reot\",\"onlyTextHeader\":\"CgjtBlIK\",\"headerInsideModal\":\"eFeOVzRI\",\"languageHeader\":\"ZrejUKsI\",\"headerBack\":\"ehDj7x2p\",\"isInsideModal\":\"Wccw6pgw\",\"hidden\":\"yTnK4aVo\",\"iconChevron\":\"Qea3kUMy\",\"headerBackInContent\":\"zvnNb8eo\",\"headerTitle\":\"aZVKC5O6\",\"modalHeader\":\"vwHnpdwF\",\"content\":\"rgMxxE39\",\"content_noScroll\":\"lh0I5gIh\",\"contentNoScroll\":\"lh0I5gIh\",\"withBottomSpace\":\"cjfvEx15\",\"contentInModal\":\"ug6WizbB\",\"contentFullSize\":\"BpFwAWae\",\"blockTitle\":\"dBOj5NnG\",\"menuIcon\":\"M1WSmGuc\",\"themeWrapper\":\"cfK5v5m1\",\"blockAbout\":\"yuZIbS8n\",\"theme\":\"N5nUfRHH\",\"theme_active\":\"eTa03cXj\",\"themeActive\":\"eTa03cXj\",\"themeIcon\":\"tZRnZj9J\",\"themeIcon_active\":\"eEiBESrS\",\"themeIconActive\":\"eEiBESrS\",\"themeImg\":\"H_nvpBU5\",\"colorList\":\"ftMWz1de\",\"colorButton\":\"OaFvanYP\",\"colorButtonCurrent\":\"GthJhaus\",\"iconLock\":\"n1s4Ycb6\",\"iconLockInverted\":\"r9kXSmsP\",\"subBlockAsButton\":\"ImElqofC\",\"block\":\"wJjymc4L\",\"text\":\"sU0zQDmb\",\"settingsBlockWithDescription\":\"xosGoD5d\",\"settingsBlock\":\"_0TWKZFz4\",\"iconChevronRight\":\"RHurCQ9b\",\"iconQuestion\":\"CLKLBCVt\",\"item\":\"o1nQhJ_F\",\"draggable\":\"k2juknci\",\"item_red\":\"yYJCYbbd\",\"itemRed\":\"yYJCYbbd\",\"item_small\":\"cC1nd9dM\",\"itemSmall\":\"cC1nd9dM\",\"item_lang\":\"kIWs2Jxk\",\"itemLang\":\"kIWs2Jxk\",\"item_wallet_version\":\"tTZZHEdN\",\"itemWalletVersion\":\"tTZZHEdN\",\"item_token\":\"LMTs4OeN\",\"itemToken\":\"LMTs4OeN\",\"item_disabled\":\"F3nzrEuV\",\"itemDisabled\":\"F3nzrEuV\",\"itemAutoLock\":\"TAmUTusj\",\"itemInfo\":\"S5Kk31wp\",\"small\":\"gq4usdgr\",\"version\":\"oGJ2X15D\",\"languageMain\":\"cIO_6vYD\",\"languageNative\":\"NGS7pE5c\",\"wideTooltip\":\"xZy_xEHS\",\"disconnectButton\":\"Wu3RiwSF\",\"dapps\":\"eyE78PWW\",\"changePasswordButton\":\"xBpPU4Jb\",\"passwordFormContent\":\"KQuDNpn5\",\"passwordFormContentInModal\":\"OzmF3O5t\",\"sticker\":\"aMwtPBfB\",\"blockDescription\":\"HuH8igQi\",\"emptyList\":\"ThoQya6m\",\"emptyListTitle\":\"lek7Y5aS\",\"dapp\":\"xc0VaBDP\",\"backButton\":\"QlOjly_V\",\"logo\":\"LQ5MMcSf\",\"stickerNativeBiometric\":\"nLxfZG3p\",\"pinPadHeader\":\"tnqhb1Qi\",\"pinPadHeaderMinified\":\"K1fiksuZ\",\"pinPadTitle\":\"MxOcmI0_\",\"title\":\"sDP2AWSj\",\"titleLink\":\"r7iIIH6q\",\"heading\":\"Sh2kuIH2\",\"github\":\"dBqNllGm\",\"telegram\":\"sggkOqTT\",\"tokenSortIcon\":\"V7Nh7XEi\",\"tokenTitle\":\"wkk1b7Dc\",\"tokenDescription\":\"cv6gw8az\",\"tokenAmount\":\"BekK0Dwp\",\"dot\":\"Zfi1H_we\",\"dotLarge\":\"LIr9yHMx\",\"contentRelative\":\"EiFz4WrA\",\"sortableContainer\":\"zmQzVO7l\",\"modalDialogWeb\":\"E67Qdj_t\",\"modalContent\":\"mjHzkDZB\",\"deleteText\":\"d8sxNodF\",\"languageInfo\":\"AXAMGE3T\",\"tokenInfo\":\"ll1f03qi\",\"stickerAndTitle\":\"upR_yI1c\",\"sideTitle\":\"atPnEcVz\",\"aboutFooterWrapper\":\"EYMlspWb\",\"aboutFooterContent\":\"U1sbe5pk\",\"blockWalletVersionText\":\"poUctQOF\",\"walletVersionInfo\":\"spNULnGc\",\"walletVersionInfoRight\":\"Ez0t7GFF\",\"walletVersionTitle\":\"DbBBKMBg\",\"walletVersionTokens\":\"DUzHgWKY\",\"walletVersionAddress\":\"xPrZcrFZ\",\"walletVersionAmount\":\"nvPRmXTF\",\"blockWalletVersionReadMore\":\"g3U3zj6y\",\"nftPrimaryCell\":\"zpLwMrPQ\",\"nftName\":\"JHu8TtpB\",\"nftCollection\":\"mbtZbU1u\",\"nftImage\":\"pifBd9KV\",\"nftButtonUnhide\":\"_o8QIssq\",\"account\":\"TXe6O6ZF\",\"accountDisabled\":\"vf82b5zy\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { type Theme } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER, APP_NAME, APP_REPO_URL, APP_VERSION, IS_CORE_WALLET, IS_EXTENSION,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { handleUrlClick } from '../../util/openUrl';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  headerClassName?: string;\n  theme: Theme;\n  handleBackClick: NoneToVoidFunction;\n}\n\nfunction SettingsAbout({\n  isActive, isInsideModal, theme, headerClassName, handleBackClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const aboutExtensionTitle = lang('$about_extension_link_text', { app_name: APP_NAME });\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('About %app_name%', { app_name: APP_NAME })}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(\n          styles.header,\n          headerClassName,\n          'with-notch-on-scroll',\n          isScrolled && 'is-scrolled',\n        )}\n        >\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('About %app_name%', { app_name: APP_NAME })}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <img src={logoPath} alt={lang('Logo')} className={styles.logo} />\n        <h2 className={styles.title}>\n          {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          {!IS_CORE_WALLET && (\n            <a href=\"https://mytonwallet.io/\" target=\"_blank\" className={styles.titleLink} rel=\"noreferrer\">\n              mytonwallet.io\n            </a>\n          )}\n        </h2>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>\n            {renderText(lang('$about_description1'))}\n          </p>\n          <p className={styles.text}>\n            {renderText(lang('$about_description2'))}\n          </p>\n          {IS_EXTENSION ? (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"\" /> {lang('What is TON Proxy?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description1'))}{' '}\n                <a\n                  href=\"https://telegra.ph/TON-Sites-TON-WWW-and-TON-Proxy-09-29-2\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"\" /> {lang('What is TON Magic?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description2'))}\n              </p>\n              <p className={styles.text}>\n                {lang('$about_extension_description3')}{' '}\n                <a href=\"https://telegra.ph/Telegram--TON-11-10\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n            </>\n          ) : (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                {lang('$about_proxy_magic_title', { ninja: <Emoji from=\"\" />, unicorn: <Emoji from=\"\" /> })}\n              </h3>\n              <p className={styles.text}>\n                {lang('$about_proxy_magic_description', {\n                  extension_link: (\n                    <a href=\"https://mytonwallet.io/\" target=\"_blank\" rel=\"noreferrer\">\n                      {renderText(aboutExtensionTitle)}\n                    </a>\n                  ),\n                })}\n              </p>\n            </>\n          )}\n          <h3 className={buildClassName(styles.text, styles.heading)}>\n            <i className={buildClassName(styles.github, 'icon-github')} aria-hidden /> {lang('Is it open source?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_github', {\n              github_link: (\n                <a href={APP_REPO_URL} target=\"_blank\" rel=\"noreferrer\">\n                  {renderText(lang('$about_github_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n          <h3 className={styles.heading}>\n            <i\n              className={buildClassName(styles.telegram, 'icon-telegram')}\n              aria-hidden\n            /> {lang('Is there a community?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_community', {\n              community_link: (\n                <a\n                  href={lang.code === 'ru' ? 'https://t.me/MyTonWalletRu' : 'https://t.me/MyTonWalletEn'}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  {renderText(lang('$about_community_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n        </div>\n        <div className={styles.aboutFooterWrapper}>\n          <div className={styles.aboutFooterContent}>\n            <a\n              href=\"https://mytonwallet.io/terms-of-use\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleUrlClick}\n            >{lang('Terms of Use')}\n            </a>\n            <i className={styles.dotLarge} aria-hidden />\n            <a\n              href=\"https://mytonwallet.io/privacy-policy\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleUrlClick}\n            >{lang('Privacy Policy')}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsAbout);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ULZ34zm7\",\"transitionContainer\":\"IpdZLqJd\",\"transitionSlide\":\"XE9A_oIT\",\"container\":\"PaAMLiEx\",\"container_scrollable\":\"Kl8WYoh1\",\"containerScrollable\":\"Kl8WYoh1\",\"container_password\":\"UbkFqyhU\",\"containerPassword\":\"UbkFqyhU\",\"containerAlignTop\":\"kjX3jz7x\",\"containerFullSize\":\"TyvpW2dz\",\"aboutHeader\":\"fW4ULVz8\",\"logo\":\"ehC1Upu8\",\"appName\":\"IDG3Q9do\",\"title\":\"GWv6k9kV\",\"title_afterSmallSticker\":\"A9um3wzK\",\"titleAfterSmallSticker\":\"A9um3wzK\",\"titleSmallMargin\":\"XUVoSlvz\",\"infoBlock\":\"PxIcz2Ce\",\"text\":\"ehvMomrX\",\"informationCheckbox\":\"EnuqqZk3\",\"informationCheckboxContent\":\"GFpWMNm5\",\"info\":\"WrpQj6v4\",\"info_push\":\"I7MJaI4h\",\"infoPush\":\"I7MJaI4h\",\"info__space\":\"D8smEaJr\",\"infoSpace\":\"D8smEaJr\",\"infoPull\":\"NnW2gTZ2\",\"infoSmallFont\":\"NNleMmCd\",\"counter\":\"BMrG2A2B\",\"counterTitle\":\"IFpNJ6G4\",\"counterDigit\":\"FvuWBVMK\",\"small\":\"I1fhFmAn\",\"sticker\":\"hkc_A2ok\",\"viewModeSticker\":\"lD3yvgO7\",\"stickerAndTitle\":\"I_XB4JzC\",\"backupNotice\":\"jSFFHbPH\",\"backupNoticeButtons\":\"kUt_RfrB\",\"modalSticker\":\"oxNcdksx\",\"form\":\"VKREIrDv\",\"formWidgets\":\"Vj7_u12z\",\"passwordForm\":\"Stc9sPH6\",\"errors\":\"vozeQrSV\",\"passwordRules\":\"usE91GiK\",\"passwordRule\":\"zwUB1a_J\",\"valid\":\"tAmeBNo9\",\"error\":\"B8vH7CYQ\",\"buttons\":\"ODle5ROH\",\"buttons__inner\":\"oNN6ymiQ\",\"buttonsInner\":\"oNN6ymiQ\",\"footerButton\":\"sarw89g5\",\"btn\":\"SWvNin2D\",\"btn_push\":\"W1k0H_HF\",\"btnPush\":\"W1k0H_HF\",\"btn_text\":\"qoCa264k\",\"btnText\":\"qoCa264k\",\"btn_about\":\"hc6SmKii\",\"btnAbout\":\"hc6SmKii\",\"btn_wide\":\"nfn0Ol3p\",\"btnWide\":\"nfn0Ol3p\",\"btn_mini\":\"Q2imCrap\",\"btnMini\":\"Q2imCrap\",\"btn_single\":\"uEEAE1sZ\",\"btnSingle\":\"uEEAE1sZ\",\"btnHalfWidth\":\"X7zz6SZl\",\"modalDialog\":\"fGexmyHI\",\"privateKey\":\"q7ZIxYSc\",\"importingContent\":\"NH8rGjmE\",\"footerError\":\"BZGziOTc\",\"importButtonsBlock\":\"NM17kdjV\",\"importButtonsBlockSimple\":\"PPE4xSFG\",\"importText\":\"MHwkgrIZ\",\"importButtons\":\"dYD_CpfV\",\"biometricsStep\":\"t3qgjBKg\",\"warning\":\"bs9tLaLO\",\"biometricsError\":\"Es3mlsbs\",\"stepTransition\":\"POUbGjea\",\"passwordFormContainer\":\"t9A5nUYe\",\"header\":\"iowmPhKV\",\"headerTitle\":\"x58Cmt9r\",\"pinPadHeader\":\"yHcMeGVS\",\"headerBack\":\"ZzxVO58v\",\"headerBackBlock\":\"NVF8z8CV\",\"iconChevron\":\"vP8i059j\",\"biometricsIcon\":\"ss3uFaAC\",\"biometricsTitle\":\"VTH_ATCk\",\"biometricsSubtitle\":\"C3vZhdz7\",\"actionsSection\":\"Lfkf9AW5\",\"importModalContent\":\"vb2ESy1T\",\"disclaimerBackupDialog\":\"ZjhuaYXI\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport PasswordForm from '../ui/PasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  method?: AuthMethod;\n  error?: string;\n}\n\nfunction AuthCheckPassword({\n  isActive, isLoading, error, method,\n}: OwnProps) {\n  const { resetAuth, cleanAuthError, addAccount } = getActions();\n  const lang = useLang();\n\n  const isImporting = method !== 'createAccount';\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isImporting ? 'importMnemonic' : 'createAccount', password, isAuthFlow: true });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        containerClassName={styles.passwordForm}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={handleSubmit}\n        onCancel={resetAuth}\n        onUpdate={cleanAuthError}\n      >\n        <div className={styles.title}>{lang('Enter your password')}</div>\n      </PasswordForm>\n    </div>\n  );\n}\n\nexport default memo(AuthCheckPassword);\n","// extracted by mini-css-extract-plugin\nexport default {\"suggestions\":\"wSbrkEKB\",\"bottom\":\"YGdWEJ33\",\"top\":\"jKY8_1nT\",\"suggestion\":\"MtG_CWxm\",\"active\":\"kdLCV21p\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './SuggestionList.module.scss';\n\ntype OwnProps = {\n  position?: 'top' | 'bottom';\n  suggestions: string[];\n  activeIndex?: number;\n  isInModal?: boolean;\n  onSelect: (suggest: string) => void;\n};\n\nfunction SuggestionList({\n  position = 'bottom',\n  suggestions,\n  activeIndex,\n  isInModal,\n  onSelect,\n}: OwnProps) {\n  const lang = useLang();\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n\n    const suggest = (e.target as HTMLLIElement).innerText.trim();\n    onSelect(suggest);\n  };\n\n  return suggestions.length ? (\n    <ul className={buildClassName(styles.suggestions, styles[position], isInModal && styles.embedded)}>\n      {suggestions.map((suggestion, index) => {\n        return (\n          <li\n            key={suggestion}\n            role=\"button\"\n            tabIndex={0}\n            className={buildClassName(styles.suggestion, index === activeIndex && styles.active)}\n            onMouseDown={handleClick}\n          >\n            {suggestion}\n          </li>\n        );\n      })}\n    </ul>\n  ) : (\n    <div className={styles.suggestions}>\n      <li className={styles.suggestion}>{lang('No suggestions, you\\'re on your own!')}</li>\n    </div>\n  );\n}\n\nexport default memo(SuggestionList);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"fZW_3WXP\",\"wrapper_focus\":\"sqh1ynr8\",\"wrapperFocus\":\"sqh1ynr8\",\"wrapper_error\":\"z4J8kfq3\",\"wrapperError\":\"z4J8kfq3\",\"input\":\"L1vlW70a\",\"label\":\"Qg48sdUG\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { PRIVATE_KEY_HEX_LENGTH } from '../../config';\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { callApi } from '../../api';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SuggestionList from '../ui/SuggestionList';\n\nimport styles from './InputMnemonic.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  nextId?: string;\n  labelText?: string;\n  className?: string;\n  value?: string;\n  isInModal?: boolean;\n  suggestionsPosition?: 'top' | 'bottom';\n  inputArg?: any;\n  onInput: (value: string, inputArg?: any) => void;\n  onEnter?: NoneToVoidFunction;\n};\n\nconst SUGGESTION_WORDS_COUNT = 7;\n\nfunction InputMnemonic({\n  id, nextId, labelText, className, value = '', isInModal, suggestionsPosition, inputArg, onInput, onEnter,\n}: OwnProps) {\n  const [hasFocus, markFocus, unmarkFocus] = useFlag();\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [filteredSuggestions, setFilteredSuggestions] = useState<string[]>([]);\n  const [activeSuggestionIndex, setActiveSuggestionIndex] = useState<number>(0);\n  const [areSuggestionsShown, setAreSuggestionsShown] = useState<boolean>(false);\n  const [wordlist, setWordlist] = useState<string[]>([]);\n  const shouldRenderSuggestions = areSuggestionsShown && value && filteredSuggestions.length > 0;\n\n  useEffect(() => {\n    void callApi('getMnemonicWordList').then((words) => setWordlist(words ?? []));\n  }, []);\n\n  useEffect(() => {\n    const noError = !value\n      || (areSuggestionsShown && filteredSuggestions.length > 0)\n      || isCorrectMnemonic(value, wordlist);\n    setHasError(!noError);\n  }, [areSuggestionsShown, filteredSuggestions.length, value, wordlist]);\n\n  const processSuggestions = (userInput: string) => {\n    // Filter our suggestions that don't contain the user's input\n    const unLinked = wordlist.filter(\n      (suggestion) => suggestion.toLowerCase().startsWith(userInput.toLowerCase()),\n    ).slice(0, SUGGESTION_WORDS_COUNT);\n\n    onInput(userInput, inputArg);\n    setFilteredSuggestions(unLinked);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(true);\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const userInput = e.target.value;\n\n    processSuggestions(userInput);\n  };\n\n  const handlePaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\n    const pastedValue = e.clipboardData.getData('text');\n\n    if (!pastedValue) return;\n\n    processSuggestions(pastedValue);\n  };\n\n  const handleEnter = useLastCallback((e: KeyboardEvent) => {\n    if (!value) return;\n\n    if (onEnter && !areSuggestionsShown) {\n      onEnter();\n    }\n\n    const suggestedValue = filteredSuggestions[activeSuggestionIndex];\n    if (!suggestedValue) return;\n    onInput(suggestedValue, inputArg);\n    setFilteredSuggestions([suggestedValue]);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(false);\n\n    if (areSuggestionsShown) {\n      e.preventDefault();\n    }\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  useEffect(() => {\n    return hasFocus ? captureKeyboardListeners({\n      onEnter: handleEnter,\n      onTab: (e: KeyboardEvent) => {\n        if (!(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {\n          handleEnter(e);\n        }\n      },\n      onUp: () => {\n        if (activeSuggestionIndex > 0) {\n          setActiveSuggestionIndex(activeSuggestionIndex - 1);\n        }\n      },\n      onDown: () => {\n        if (activeSuggestionIndex < filteredSuggestions.length - 1) {\n          setActiveSuggestionIndex(activeSuggestionIndex + 1);\n        }\n      },\n    }) : undefined;\n  });\n\n  const handleClick = useLastCallback((suggestion: string) => {\n    onInput(suggestion, inputArg);\n    setAreSuggestionsShown(false);\n    setActiveSuggestionIndex(0);\n    setFilteredSuggestions([]);\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    processSuggestions(e.target.value);\n    markFocus();\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    // Remove focus from the input element to ensure correct blur handling, especially when triggered by window switching\n    e.target.blur();\n\n    unmarkFocus();\n    requestAnimationFrame(() => {\n      setAreSuggestionsShown(false);\n      setFilteredSuggestions([]);\n    });\n  };\n\n  return (\n    <div className={buildClassName(\n      styles.wrapper,\n      className,\n      hasFocus && styles.wrapper_focus,\n      hasError && styles.wrapper_error,\n    )}\n    >\n      {shouldRenderSuggestions && (\n        <SuggestionList\n          suggestions={filteredSuggestions}\n          activeIndex={activeSuggestionIndex}\n          position={suggestionsPosition}\n          isInModal={isInModal}\n          onSelect={handleClick}\n        />\n      )}\n      <label className={styles.label} htmlFor={id}>{labelText}.</label>\n      <input\n        id={id}\n        className={buildClassName(styles.input, value !== '' && styles.touched)}\n        type=\"text\"\n        autoCapitalize=\"none\"\n        autoComplete=\"off\"\n        autoCorrect={false}\n        spellCheck={false}\n        onChange={handleChange}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        onPaste={handlePaste}\n        value={value}\n        tabIndex={0}\n        data-focus-scroll-position={suggestionsPosition === 'top' ? 'end' : 'start'}\n      />\n    </div>\n  );\n}\n\nfunction isCorrectMnemonic(mnemonic: string, wordlist: string[]) {\n  return mnemonic.length === PRIVATE_KEY_HEX_LENGTH || wordlist.includes(mnemonic);\n}\n\nexport default memo(InputMnemonic);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalSticker\":\"L6u18JBd\",\"buttonWrapper\":\"NvN6uNIF\",\"footerButton\":\"u7rnL9q6\",\"checkMnemonicInput\":\"_YK5KiZw\",\"error\":\"WeqRS7VQ\",\"checkMnemonicForm\":\"ftYLMV0R\",\"info\":\"o4FCVeIa\",\"mnemonicContainer\":\"lRHp5zzY\",\"warning\":\"jCCt2XRK\",\"words\":\"Yaqcau6G\",\"word\":\"qdW2OhFc\",\"small\":\"pfd8fIrT\"};","import type { FormEvent } from 'react';\nimport React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport { MNEMONIC_CHECK_COUNT } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { areSortedArraysEqual } from '../../../util/iteratees';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport InputMnemonic from '../InputMnemonic';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInModal?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n  descriptionClassName?: string;\n  formClassName?: string;\n  errorClassName?: string;\n  onSubmit: AnyFunction;\n}\n\nfunction CheckWordsForm({\n  isActive,\n  isInModal,\n  checkIndexes,\n  mnemonic,\n  descriptionClassName,\n  formClassName,\n  errorClassName,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n  const [words, setWords] = useState<Record<number, string>>({});\n  const [hasMnemonicError, setHasMnemonicError] = useState(false);\n\n  const handleMnemonicCheckSubmit = useLastCallback((e: FormEvent) => {\n    e.preventDefault();\n    const answer = mnemonic && checkIndexes?.map((index) => mnemonic[index]);\n    if (answer && areSortedArraysEqual(answer, Object.values(words))) {\n      onSubmit();\n    } else {\n      setHasMnemonicError(true);\n    }\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setWords({});\n      setHasMnemonicError(false);\n    }\n  }, [isActive]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    setWords({\n      ...words,\n      [index]: value?.toLowerCase(),\n    });\n  });\n\n  return (\n    <>\n      <p className={descriptionClassName}>\n        {renderText(lang('$mnemonic_check_words_list', checkIndexes?.map((n) => n + 1)?.join(', ')))}\n      </p>\n\n      <form className={formClassName} onSubmit={handleMnemonicCheckSubmit} id=\"check_mnemonic_form\">\n        {checkIndexes!.map((key, i) => (\n          <InputMnemonic\n            key={key}\n            id={`check-mnemonic-${i}`}\n            nextId={i + 1 < MNEMONIC_CHECK_COUNT ? `check-mnemonic-${i + 1}` : undefined}\n            labelText={`${key + 1}`}\n            value={words[key]}\n            isInModal={isInModal}\n            suggestionsPosition={i <= 1 ? 'bottom' : 'top'}\n            inputArg={key}\n            className={styles.checkMnemonicInput}\n            onInput={handleSetWord}\n          />\n        ))}\n      </form>\n\n      {hasMnemonicError && (\n        <div className={errorClassName}>\n          {renderText(lang('$mnemonic_check_error'))}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default memo(CheckWordsForm);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CheckWordsForm from './CheckWordsForm';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n}\n\nfunction CheckWordsContent({\n  isActive,\n  checkIndexes,\n  mnemonic,\n}: OwnProps) {\n  const { closeCheckWordsPage } = getActions();\n\n  const onSubmit = useLastCallback(() => {\n    closeCheckWordsPage({ isBackupCreated: true });\n  });\n\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$check_words_description'))}\n      </p>\n\n      <CheckWordsForm\n        descriptionClassName={buildClassName(styles.info, styles.small)}\n        formClassName={styles.checkMnemonicForm}\n        isActive={isActive}\n        mnemonic={mnemonic}\n        checkIndexes={checkIndexes}\n        errorClassName={styles.error}\n        onSubmit={onSubmit}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          forFormId=\"check_mnemonic_form\"\n          className={styles.footerButton}\n        >\n          {lang('Continue')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(CheckWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsContent from '../common/backup/CheckWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n}\n\nconst AuthCheckWords = ({ isActive, mnemonic, checkIndexes }: OwnProps) => {\n  const { openMnemonicPage } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({ isActive, onBack: openMnemonicPage });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openMnemonicPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Let\\'s Check!')}</span>\n        </div>\n\n        <CheckWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCheckWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  error?: string;\n  biometricsStep?: 1 | 2;\n}\n\nconst START_BIOMETRICS_CONFIRMATION_DELAY_MS = SECOND;\n\nfunction AuthConfirmBiometrics({\n  isActive,\n  biometricsStep,\n  error,\n  isLoading,\n}: OwnProps) {\n  const {\n    afterCreateBiometrics,\n    resetAuth,\n    cancelCreateBiometrics,\n  } = getActions();\n\n  useTimeout(afterCreateBiometrics, isActive ? START_BIOMETRICS_CONFIRMATION_DELAY_MS : undefined, [isActive]);\n\n  const lang = useLang();\n  const shouldRenderSteps = Boolean(biometricsStep);\n  const shouldRenderError = Boolean(error && !shouldRenderSteps);\n  const renderingError = useCurrentOrPrev(error, true);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Turn On Biometrics')}</div>\n\n      {shouldRenderSteps && (\n        <div className={styles.biometricsStep}>\n          {lang(biometricsStep === 1 ? 'Step 1 of 2. Registration' : 'Step 2 of 2. Verification')}\n        </div>\n      )}\n      {shouldRenderError && (\n        <div className={buildClassName(styles.biometricsError)}>\n          <div>{lang(renderingError || 'Unknown error')}</div>\n          <div>{lang('Please try to confirm your biometrics again')}</div>\n        </div>\n      )}\n\n      <div className={styles.buttons}>\n        <div className={styles.buttons__inner}>\n          <Button\n            isDisabled={Boolean(biometricsStep) || isLoading}\n            className={buildClassName(styles.btn, styles.btnHalfWidth)}\n            onClick={cancelCreateBiometrics}\n          >\n            {lang('Cancel')}\n          </Button>\n\n          {shouldRenderError && (\n            <Button\n              isPrimary\n              className={buildClassName(styles.btn, styles.btnHalfWidth)}\n              isDisabled={Boolean(biometricsStep) || isLoading}\n              onClick={afterCreateBiometrics}\n            >\n              {lang('Try Again')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthConfirmBiometrics);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\ninterface StateProps {\n  pin: string;\n}\n\nconst SUBMIT_PAUSE_MS = 1500;\n\nconst AuthConfirmPin = ({\n  isActive,\n  method,\n  pin,\n}: OwnProps & StateProps) => {\n  const { confirmPin, cancelConfirmPin } = getActions();\n\n  const lang = useLang();\n  const [pinConfirm, setPinConfirm] = useState<string>('');\n  const [error, setError] = useState<string>('');\n  const [isConfirmed, setIsConfirmed] = useState<boolean>(false);\n  const isImporting = method !== 'createAccount';\n\n  const handleBackClick = useLastCallback(() => {\n    cancelConfirmPin({ isImporting });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setPinConfirm('');\n      setError('');\n      setIsConfirmed(false);\n    }\n  }, [isActive]);\n\n  const handleChange = useLastCallback((value: string) => {\n    setPinConfirm(value);\n    setError('');\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    if (value === pin) {\n      setIsConfirmed(true);\n      await pause(SUBMIT_PAUSE_MS);\n      confirmPin({ isImporting });\n    } else {\n      setError(lang('Codes don\\'t match'));\n    }\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n\n      <PinPad\n        isActive={isActive}\n        title={isConfirmed ? lang('Code set successfully') : (error || lang('Enter your code again'))}\n        type={isConfirmed ? 'success' : (error ? 'error' : undefined)}\n        length={PIN_LENGTH}\n        value={pinConfirm}\n        onChange={handleChange}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    pin: global.auth.password,\n  };\n})(AuthConfirmPin));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nfunction AuthCreateBackup({ isActive }: OwnProps) {\n  const { skipCheckMnemonic, openAuthBackupWalletModal, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={resetAuth} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}> </span>\n        </div>\n\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n          previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n        />\n        <div className={styles.title}>{lang('Create Backup')}</div>\n        <div className={styles.info}>\n          <p className={styles.info__space}>{renderText(lang('$auth_backup_description1'))}</p>\n          <p>{renderText(lang('$auth_backup_description2'))}</p>\n          <p>{renderText(lang('$auth_backup_description3'))}</p>\n        </div>\n        <div className={styles.buttons}>\n          <Button\n            isPrimary\n            className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n            onClick={openAuthBackupWalletModal}\n          >\n            {lang('$back_up_auth')}\n          </Button>\n          {canSkipMnemonicCheck && (\n            <Button\n              isDestructive\n              isText\n              className={buildClassName(styles.btn, styles.btn_push)}\n              onClick={skipCheckMnemonic}\n            >\n              {lang('Later')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthCreateBackup);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst AuthCreateBiometrics = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const {\n    startCreatingBiometrics,\n    resetAuth,\n    skipCreateBiometrics,\n  } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n        previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Congratulations!')}</div>\n      <p className={styles.info}>\n        <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n      </p>\n      <p className={styles.info}>\n        {lang('Create a password or use biometric authentication to protect it.')}\n      </p>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          onClick={startCreatingBiometrics}\n        >\n          {lang('Connect Biometrics')}\n        </Button>\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateBiometrics}\n        >\n          {lang('Use Password')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateBiometrics);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport touchIdSvg from '../../assets/settings/settings_biometrics.svg';\nimport faceIdSvg from '../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n}\n\nconst AuthCreateNativeBiometrics = ({ isActive, isLoading }: OwnProps) => {\n  const { afterCreateNativeBiometrics, skipCreateNativeBiometrics, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const isTouchId = getIsTouchIdAvailable();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={styles.container}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <img\n        src={isFaceId ? faceIdSvg : touchIdSvg}\n        alt=\"\"\n        className={styles.biometricsIcon}\n      />\n\n      <div className={styles.biometricsTitle}>\n        {isFaceId ? lang('Use Face ID') : (isTouchId ? lang('Use Touch ID') : lang('Use Biometrics'))}\n      </div>\n      <div className={styles.biometricsSubtitle}>\n        {lang('You can connect your biometric data for more convenience')}\n      </div>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          isLoading={isLoading}\n          onClick={!isLoading ? afterCreateNativeBiometrics : undefined}\n        >\n          {lang(isFaceId ? 'Connect Face ID' : (isTouchId ? 'Connect Touch ID' : 'Connect Biometrics'))}\n        </Button>\n        <Button\n          isText\n          isDisabled={isLoading}\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateNativeBiometrics}\n        >\n          {lang('Not Now')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateNativeBiometrics);\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst SPECIAL_CHARS_REGEX = /[`!@#$%^&*()_+\\-=\\]{};':\"\\\\|,.<>?~]/;\n\ninterface OwnProps {\n  firstPassword?: string;\n  secondPassword?: string;\n  requiredMinLength?: number;\n  requiredLength?: number;\n  isOnlyNumbers?: boolean;\n}\n\nexport const usePasswordValidation = ({\n  firstPassword = '',\n  secondPassword = '',\n  requiredMinLength = 8,\n  requiredLength,\n  isOnlyNumbers,\n}: OwnProps) => {\n  const [invalidLength, setInvalidLength] = useState(false);\n  const [noNumber, setNoNumber] = useState(false);\n  const [noUpperCase, setNoUpperCase] = useState(false);\n  const [noLowerCase, setNoLowerCase] = useState(false);\n  const [noSpecialChar, setNoSpecialChar] = useState(false);\n  const [noEqual, setNoEqual] = useState(false);\n\n  useEffect(() => {\n    const isInvalidLength = Boolean(\n      (!requiredLength && firstPassword.length < requiredMinLength)\n      || (requiredLength && firstPassword.length !== requiredLength),\n    );\n    setInvalidLength(isInvalidLength);\n    setNoUpperCase(!isOnlyNumbers && firstPassword.toLowerCase() === firstPassword);\n    setNoLowerCase(!isOnlyNumbers && firstPassword.toUpperCase() === firstPassword);\n    setNoNumber(!/\\d/.test(firstPassword));\n    setNoEqual(Boolean(firstPassword && firstPassword !== secondPassword));\n    setNoSpecialChar(!isOnlyNumbers && !SPECIAL_CHARS_REGEX.test(firstPassword));\n  }, [firstPassword, secondPassword, requiredMinLength, isOnlyNumbers, requiredLength]);\n\n  return {\n    invalidLength, noNumber, noUpperCase, noLowerCase, noEqual, noSpecialChar,\n  };\n};\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePasswordValidation } from '../../hooks/usePasswordValidation';\n\nimport Button from './Button';\nimport Input from './Input';\nimport Modal from './Modal';\n\nimport styles from '../auth/Auth.module.scss';\nimport modalStyles from './Modal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  containerClassName?: string;\n  formId: string;\n  onCancel: NoneToVoidFunction;\n  onSubmit: (password: string, isPasswordNumeric: boolean) => void;\n}\n\nfunction CreatePasswordForm({\n  isActive, isLoading, formId, onCancel, onSubmit, containerClassName,\n}: OwnProps) {\n  const lang = useLang();\n  const isMobile = IS_IOS || IS_ANDROID;\n\n  const firstInputRef = useRef<HTMLInputElement>();\n\n  const [isJustSubmitted, setIsJustSubmitted] = useState<boolean>(false);\n  const [firstPassword, setFirstPassword] = useState<string>('');\n  const [secondPassword, setSecondPassword] = useState<string>('');\n  const [isPasswordFocused, markPasswordFocused, unmarkPasswordFocused] = useFlag(false);\n  const [isWeakPasswordModalOpen, openWeakPasswordModal, closeWeakPasswordModal] = useFlag(false);\n\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [isPasswordsNotEqual, setIsPasswordsNotEqual] = useState<boolean>(false);\n  const [isSecondPasswordFocused, markSecondPasswordFocused, unmarkSecondPasswordFocused] = useFlag(false);\n  const canSubmit = isActive && firstPassword.length > 0 && secondPassword.length > 0 && !hasError;\n\n  const shouldRenderError = hasError && !isPasswordFocused;\n\n  const validation = usePasswordValidation({\n    firstPassword,\n    secondPassword,\n    isOnlyNumbers: isMobile,\n    requiredLength: isMobile ? PIN_LENGTH : undefined,\n  });\n\n  useFocusAfterAnimation(firstInputRef, !isActive);\n\n  useEffect(() => {\n    setIsPasswordsNotEqual(false);\n    if (firstPassword === '' || !isActive || isPasswordFocused) {\n      setHasError(false);\n      return;\n    }\n\n    const { noEqual, invalidLength } = validation;\n\n    if ((!isSecondPasswordFocused || isJustSubmitted) && noEqual && secondPassword !== '') {\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n    } else if (!noEqual || secondPassword === '' || (isSecondPasswordFocused && !isJustSubmitted)) {\n      setHasError(false);\n    }\n    if (isMobile && invalidLength && !isJustSubmitted) {\n      setHasError(true);\n    }\n  }, [\n    isActive, firstPassword, secondPassword, validation, isSecondPasswordFocused, isPasswordFocused, isJustSubmitted,\n    isMobile,\n  ]);\n\n  const handleFirstPasswordChange = useLastCallback((value: string) => {\n    setFirstPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSecondPasswordChange = useLastCallback((value: string) => {\n    setSecondPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSubmit = useLastCallback((e: React.FormEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (firstPassword !== secondPassword) {\n      setIsJustSubmitted(true);\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n      return;\n    }\n\n    const isWeakPassword = Object.values(validation).find((rule) => rule);\n\n    if (!isMobile && isWeakPassword && !isWeakPasswordModalOpen) {\n      openWeakPasswordModal();\n      return;\n    }\n\n    if (isWeakPasswordModalOpen) {\n      closeWeakPasswordModal();\n    }\n\n    onSubmit(firstPassword, isMobile);\n  });\n\n  function renderErrors() {\n    if (isPasswordsNotEqual) {\n      return (\n        <div className={buildClassName(styles.errors, styles.error)}>\n          {lang('Passwords must be equal.')}\n        </div>\n      );\n    }\n\n    const {\n      invalidLength,\n      noUpperCase,\n      noLowerCase,\n      noNumber,\n      noSpecialChar,\n    } = validation;\n\n    if (isMobile) {\n      return (\n        <div className={styles.passwordRules}>\n          <span className={getValidationRuleClass(shouldRenderError, invalidLength || noNumber)}>\n            {lang('Password must contain %length% digits.', { length: PIN_LENGTH })}\n          </span>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.passwordRules}>\n        {lang('To protect your wallet as much as possible, use a password with')}\n        <span className={getValidationRuleClass(shouldRenderError, invalidLength)}>\n          {' '}{lang('$auth_password_rule_8chars')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noLowerCase)}>\n          {' '}{lang('$auth_password_rule_one_small_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noUpperCase)}>\n          {' '}{lang('$auth_password_rule_one_capital_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noNumber)}>\n          {' '}{lang('$auth_password_rule_one_digit')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noSpecialChar)}>\n          {' '}{lang('$auth_password_rule_one_special_char')}\n        </span>.\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form id={formId} className={buildClassName(styles.form, containerClassName)} onSubmit={handleSubmit}>\n        <div className={styles.formWidgets}>\n          <Input\n            ref={firstInputRef}\n            type=\"password\"\n            isRequired\n            id=\"first-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            hasError={shouldRenderError}\n            placeholder={lang('Enter your password...')}\n            value={firstPassword}\n            autoComplete=\"new-password\"\n            onInput={handleFirstPasswordChange}\n            onFocus={markPasswordFocused}\n            onBlur={unmarkPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n            enterKeyHint=\"next\"\n          />\n          <Input\n            type=\"password\"\n            isRequired\n            id=\"second-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            placeholder={lang('...and repeat it')}\n            hasError={isPasswordsNotEqual}\n            value={secondPassword}\n            autoComplete=\"new-password\"\n            onInput={handleSecondPasswordChange}\n            onFocus={markSecondPasswordFocused}\n            onBlur={unmarkSecondPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n            enterKeyHint=\"next\"\n          />\n        </div>\n\n        {renderErrors()}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button} isDisabled={isLoading}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isSubmit\n            isPrimary\n            isDisabled={isPasswordsNotEqual || firstPassword === ''}\n            isLoading={isLoading}\n            className={modalStyles.button}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </form>\n\n      <Modal\n        isOpen={isWeakPasswordModalOpen}\n        isCompact\n        onClose={closeWeakPasswordModal}\n        title={lang('Insecure Password')}\n      >\n        <p className={modalStyles.text}>\n          {lang('Your have entered an insecure password, which can be easily guessed by scammers.')}\n        </p>\n        <p className={modalStyles.text}>\n          {lang('Continue or change password to something more secure?')}\n        </p>\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n          <Button isPrimary onClick={closeWeakPasswordModal} className={modalStyles.button}>{lang('Change')}</Button>\n          <Button forFormId={formId} isSubmit isDestructive className={modalStyles.button}>{lang('Continue')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(CreatePasswordForm);\n\nfunction getValidationRuleClass(shouldRenderError: boolean, ruleHasError: boolean) {\n  return buildClassName(\n    styles.passwordRule,\n    !ruleHasError ? styles.valid : shouldRenderError ? styles.invalid : undefined,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { getIsBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n  isLoading?: boolean;\n}\n\nconst AuthCreatePassword = ({\n  isActive,\n  method,\n  isLoading,\n}: OwnProps) => {\n  const { afterCreatePassword, resetAuth } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n  const formId = getFormId(method!);\n  const withDescription = !getIsBiometricAuthSupported();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric: boolean) => {\n    afterCreatePassword({ password, isPasswordNumeric });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, !withDescription && styles.titleSmallMargin)}>\n        {lang(withDescription ? 'Congratulations!' : 'Create Password')}\n      </div>\n      {withDescription && (\n        <>\n          <p className={styles.info}>\n            <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n          </p>\n          <p className={styles.info}>\n            {lang('Create a password to protect it.')}\n          </p>\n        </>\n      )}\n\n      <CreatePasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        formId={formId}\n        onCancel={resetAuth}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nfunction getFormId(method: AuthMethod) {\n  switch (method) {\n    case 'createAccount':\n      return 'auth_create_password';\n    case 'importMnemonic':\n      return 'auth_import_mnemonic_password';\n    case 'importHardwareWallet':\n      return 'auth_import_hardware_password';\n  }\n}\n\nexport default memo(AuthCreatePassword);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst SUBMIT_PAUSE_MS = 750;\n\nconst AuthCreatePin = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const { createPin, resetAuth } = getActions();\n\n  const lang = useLang();\n  const [pin, setPin] = useState<string>('');\n  const isImporting = method !== 'createAccount';\n\n  useEffect(() => {\n    if (isActive) {\n      setPin('');\n    }\n  }, [isActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    await pause(SUBMIT_PAUSE_MS);\n    createPin({ pin: value, isImporting });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n      <PinPad\n        isActive={isActive}\n        title={lang('Create a code to protect it')}\n        length={PIN_LENGTH}\n        value={pin}\n        onChange={setPin}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(AuthCreatePin);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useMediaTransition from '../../hooks/useMediaTransition';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst START_DELAY = 700;\nconst INTERVAL = SECOND;\n\nconst AuthCreatingWallet = ({ isActive }: OwnProps) => {\n  const lang = useLang();\n  const [one, markOne] = useFlag();\n  const [two, markTwo] = useFlag();\n  const [three, markThree] = useFlag();\n\n  useTimeout(markOne, isActive ? START_DELAY : undefined);\n  useTimeout(markTwo, isActive ? START_DELAY + INTERVAL : undefined);\n  useTimeout(markThree, isActive ? START_DELAY + INTERVAL * 2 : undefined);\n\n  const oneRef = useMediaTransition<HTMLElement>(one);\n  const twoRef = useMediaTransition<HTMLElement>(two);\n  const threeRef = useMediaTransition<HTMLElement>(three);\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n      />\n      <div className={styles.title}>{lang('Creating Wallet...')}</div>\n\n      <div className={styles.counter}>\n        <p className={styles.counterTitle}>{lang('On the count of three...')}</p>\n        <b ref={oneRef} className={buildClassName(styles.counterDigit, 'rounded-font')}>1</b>\n        <b ref={twoRef} className={buildClassName(styles.counterDigit, 'rounded-font')}>2</b>\n        <b ref={threeRef} className={buildClassName(styles.counterDigit, 'rounded-font')}>3</b>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreatingWallet);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onSkip: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AuthBackupWarning({ isOpen, onSkip, onClose }: OwnProps) {\n  const { openAuthBackupWalletModal } = getActions();\n\n  const handleBackupClick = useLastCallback(() => {\n    onClose();\n    openAuthBackupWalletModal();\n  });\n\n  const lang = useLang();\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      forceBottomSheet\n      nativeBottomSheetKey=\"backup-warning\"\n      dialogClassName={styles.disclaimerBackupDialog}\n    >\n      <p className={styles.backupNotice}>{renderText(lang('$auth_backup_warning_notice'))}</p>\n      <div className={styles.backupNoticeButtons}>\n        <Button\n          isPrimary\n          className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n          onClick={handleBackupClick}\n        >\n          {lang('Back Up Now')}\n        </Button>\n        {canSkipMnemonicCheck && (\n          <Button\n            isDestructive\n            className={buildClassName(styles.btn, styles.btn_mini)}\n            onClick={onSkip}\n          >\n            {lang('Later')}\n          </Button>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(AuthBackupWarning);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Checkbox from '../ui/Checkbox';\nimport AuthBackupWarning from './AuthBackupWarning';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isImport?: boolean;\n}\n\nconst CONFIRM_DELAY_MS = 350;\n\nconst AuthDisclaimer = ({\n  isActive, isImport,\n}: OwnProps) => {\n  const {\n    skipCheckMnemonic,\n    confirmDisclaimer,\n    cancelDisclaimer,\n  } = getActions();\n\n  const lang = useLang();\n  const [isInformationConfirmed, markInformationConfirmed, unmarkInformationConfirmed] = useFlag(false);\n\n  useHistoryBack({\n    isActive,\n    onBack: cancelDisclaimer,\n  });\n\n  const setIsInformationConfirmed = useLastCallback((isConfirmed: boolean) => {\n    if (isConfirmed) {\n      markInformationConfirmed();\n\n      if (isImport) {\n        window.setTimeout(confirmDisclaimer, CONFIRM_DELAY_MS);\n      }\n    } else {\n      unmarkInformationConfirmed();\n    }\n  });\n\n  useOpenFromMainBottomSheet('backup-warning', markInformationConfirmed);\n\n  const handleCloseBackupWarningModal = useLastCallback(() => {\n    setIsInformationConfirmed(false);\n  });\n\n  const handleSkipMnemonic = useLastCallback(() => {\n    skipCheckMnemonic();\n    handleCloseBackupWarningModal();\n  });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n            className={styles.sticker}\n          />\n          <div className={styles.title}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={styles.infoBlock}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n\n        <Checkbox\n          id=\"information-confirmed\"\n          checked={isInformationConfirmed}\n          isDisabled={isImport && isInformationConfirmed}\n          className={styles.informationCheckbox}\n          contentClassName={styles.informationCheckboxContent}\n          onChange={setIsInformationConfirmed}\n        >\n          {lang('I have read and accept this information')}\n        </Checkbox>\n\n        {!isImport && (\n          <AuthBackupWarning\n            isOpen={isInformationConfirmed}\n            onClose={handleCloseBackupWarningModal}\n            onSkip={handleSkipMnemonic}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthDisclaimer);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX, IS_BIP39_MNEMONIC_ENABLED, MNEMONIC_COUNT, MNEMONIC_COUNTS, PRIVATE_KEY_HEX_LENGTH,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport { compact } from '../../util/iteratees';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useClipboardPaste from '../../hooks/useClipboardPaste';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport InputMnemonic from '../common/InputMnemonic';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  error?: string;\n  isLoading?: boolean;\n};\n\nconst MNEMONIC_INPUTS = [...Array(MNEMONIC_COUNT)].map((_, index) => ({\n  id: index,\n  label: `${index + 1}`,\n}));\nconst MAX_LENGTH = PRIVATE_KEY_HEX_LENGTH;\nconst SLIDE_ANIMATION_DURATION_MS = 250;\n\nconst AuthImportMnemonic = ({ isActive, isLoading, error }: OwnProps & StateProps) => {\n  const {\n    afterImportMnemonic,\n    resetAuth,\n    cleanAuthError,\n  } = getActions();\n\n  const lang = useLang();\n  const [mnemonic, setMnemonic] = useState<Record<number, string>>({});\n  const { isPortrait } = useDeviceScreen();\n\n  const handleMnemonicSet = useLastCallback((pastedMnemonic: string[]) => {\n    if (!MNEMONIC_COUNTS.includes(pastedMnemonic.length) && !isMnemonicPrivateKey(pastedMnemonic)) {\n      return;\n    }\n\n    // RAF is a workaround for several Android browsers (e.g. Vivaldi)\n    requestAnimationFrame(() => {\n      setMnemonic(pastedMnemonic);\n    });\n\n    if (document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).blur();\n    }\n  });\n\n  const handlePasteMnemonic = useLastCallback((pastedText: string) => {\n    const pastedMnemonic = parsePastedText(pastedText);\n\n    if (pastedMnemonic.length === 1 && document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).value = pastedMnemonic[0];\n\n      const event = new Event('input');\n      (document.activeElement as HTMLInputElement).dispatchEvent(event);\n\n      return;\n    }\n\n    handleMnemonicSet(pastedMnemonic);\n  });\n\n  useClipboardPaste(Boolean(isActive), handlePasteMnemonic);\n\n  const isSubmitDisabled = useMemo(() => {\n    const mnemonicValues = compact(Object.values(mnemonic));\n\n    return (!MNEMONIC_COUNTS.includes(mnemonicValues.length) && !isMnemonicPrivateKey(mnemonicValues))\n      || !!error;\n  }, [mnemonic, error]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    cleanAuthError();\n    const pastedMnemonic = parsePastedText(value);\n    if (MNEMONIC_COUNTS.includes(pastedMnemonic.length)) {\n      handleMnemonicSet(pastedMnemonic);\n      return;\n    }\n\n    setMnemonic({\n      ...mnemonic,\n      [index]: pastedMnemonic[0].toLowerCase(),\n    });\n  });\n\n  const handleCancel = useLastCallback(() => {\n    setTimeout(() => {\n      resetAuth();\n    }, SLIDE_ANIMATION_DURATION_MS);\n  });\n\n  const handleSubmit = useLastCallback(async () => {\n    if (isSubmitDisabled) return;\n\n    const mnemonicValues = compact(Object.values(mnemonic));\n    if (mnemonicValues.length === 12) {\n      const isShortMnemonicValid = await callApi('validateMnemonic', mnemonicValues);\n      if (!isShortMnemonicValid) return;\n    }\n\n    afterImportMnemonic({ mnemonic: mnemonicValues });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancel,\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({\n        onEnter: { handler: handleSubmit, noStopPropagation: true },\n      });\n  }, [handleSubmit, isLoading, isSubmitDisabled, mnemonic]);\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        size={ANIMATED_STICKER_SMALL_SIZE_PX}\n        tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n        previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n        nonInteractive\n        noLoop={false}\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, styles.title_afterSmallSticker)}>\n        {lang('Enter Secret Words')}\n      </div>\n      <div className={buildClassName(styles.info, styles.infoSmallFont, styles.infoPull)}>\n        {renderText(lang(IS_BIP39_MNEMONIC_ENABLED\n          ? '$auth_import_mnemonic_description'\n          : '$auth_import_24_mnemonic_description'))}\n      </div>\n\n      <div className={styles.importingContent}>\n        {MNEMONIC_INPUTS.map(({ id, label }, i) => (\n          <InputMnemonic\n            key={id}\n            id={`import-mnemonic-${id}`}\n            nextId={id + 1 < MNEMONIC_COUNT ? `import-mnemonic-${id + 1}` : undefined}\n            labelText={label}\n            value={mnemonic[id]}\n            suggestionsPosition={getSuggestPosition(id, isPortrait)}\n            inputArg={id}\n            onInput={handleSetWord}\n            onEnter={i === MNEMONIC_COUNT - 1 ? handleSubmit : undefined}\n          />\n        ))}\n      </div>\n\n      <div className={styles.buttons}>\n        {error && <div className={styles.footerError}>{lang(error)}</div>}\n        <div className={styles.buttons__inner}>\n          <Button onClick={handleCancel} className={styles.footerButton}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={isSubmitDisabled}\n            isLoading={isLoading}\n            className={styles.footerButton}\n            onClick={handleSubmit}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    error: global.auth.error,\n    isLoading: global.auth.isLoading,\n  };\n})(AuthImportMnemonic));\n\nfunction parsePastedText(str = '') {\n  return str\n    .replace(/(?:\\r\\n)+|[\\r\\n\\s;,\\t]+/g, ' ')\n    .trim()\n    .split(' ')\n    .map((w) => w.slice(0, MAX_LENGTH));\n}\n\nfunction getSuggestPosition(id: number, isPortrait: boolean = false) {\n  if (isPortrait) {\n    return 'top';\n  }\n\n  return ((id > 5 && id < 8) || (id > 13 && id < 16) || id > 21) ? 'top' : undefined;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nconst MAX_MESSAGE_LENGTH = 4096;\n\nconst useClipboardPaste = (isActive: boolean, onPaste: (value: string) => void) => {\n  useEffect(() => {\n    if (!isActive) {\n      return undefined;\n    }\n\n    function handlePaste(e: ClipboardEvent) {\n      if (!e.clipboardData) {\n        return;\n      }\n\n      const pastedText = e.clipboardData.getData('text').substring(0, MAX_MESSAGE_LENGTH);\n\n      if (!pastedText) {\n        return;\n      }\n\n      e.preventDefault();\n\n      onPaste(pastedText);\n    }\n\n    document.addEventListener('paste', handlePaste, false);\n\n    return () => {\n      document.removeEventListener('paste', handlePaste, false);\n    };\n  }, [isActive, onPaste]);\n};\n\nexport default useClipboardPaste;\n","import React, {\n  memo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiImportAddressByChain } from '../../api/types';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Input from '../ui/Input';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isLoading?: boolean;\n  onCancel: NoneToVoidFunction;\n  onClose?: NoneToVoidFunction;\n};\n\nfunction AuthImportViewAccount({\n  isActive, isLoading, onCancel, onClose,\n}: OwnProps) {\n  const { importViewAccount } = getActions();\n\n  const lang = useLang();\n\n  const inputRef = useRef<HTMLInputElement>();\n  const [value, setValue] = useState<string>('');\n  const [isInvalidAddress, setIsInvalidAddress] = useState<boolean>(false);\n\n  useFocusAfterAnimation(inputRef, !isActive);\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  const handleChange = useLastCallback((newValue: string) => {\n    setValue(newValue);\n    if (isInvalidAddress) {\n      setIsInvalidAddress(false);\n    }\n  });\n\n  function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\n    stopEvent(e);\n\n    if (isInvalidAddress || isLoading) return;\n\n    const addresses = value.trim().split(/\\s+/);\n    const addressByChain: ApiImportAddressByChain = {};\n\n    const hasValidAddress = addresses.reduce((isValid, address) => {\n      if (isValidAddressOrDomain(address, 'ton')) {\n        addressByChain.ton = address;\n        return true;\n      }\n\n      if (isValidAddressOrDomain(address, 'tron')) {\n        addressByChain.tron = address;\n        return true;\n      }\n\n      return isValid;\n    }, false);\n\n    if (hasValidAddress) {\n      importViewAccount({ addressByChain });\n      inputRef.current?.blur(); // To hide the virtual keyboard to show the loading indicator in the button\n    } else {\n      setIsInvalidAddress(true);\n    }\n  }\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('View Any Address')} onClose={onClose} onBackButtonClick={onCancel} />\n      <form\n        action=\"#\"\n        className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}\n        onSubmit={handleSubmit}\n      >\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n          previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          noLoop={false}\n          nonInteractive\n          className={styles.viewModeSticker}\n        />\n\n        <Input\n          ref={inputRef}\n          value={value}\n          hasError={isInvalidAddress}\n          placeholder={lang('Wallet Address or Domain')}\n          autoCapitalize=\"none\"\n          autoComplete=\"off\"\n          autoCorrect={false}\n          enterKeyHint=\"done\"\n          onInput={handleChange}\n        />\n\n        <p className={styles.info}>{renderText(lang('$import_view_account_note'))}</p>\n\n        <div className={modalStyles.buttons}>\n          <Button\n            isPrimary\n            isSubmit\n            className={modalStyles.buttonFullWidth}\n            isLoading={isLoading}\n            isDisabled={isInvalidAddress}\n          >\n            {isInvalidAddress ? lang('Invalid Address') : lang('Continue')}\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default memo(AuthImportViewAccount);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  customStickerClassName?: string;\n  customButtonWrapperClassName?: string;\n  isFullSizeButton?: boolean;\n  isActive?: boolean;\n  isFirstCheckboxSelected: boolean;\n  isSecondCheckboxSelected: boolean;\n  isThirdCheckboxSelected: boolean;\n  onFirstCheckboxClick: AnyFunction;\n  onSecondCheckboxClick: AnyFunction;\n  onThirdCheckboxClick: AnyFunction;\n  textFirst: string;\n  textSecond: string;\n  textThird: string;\n  onSubmit: () => void;\n}\n\nfunction SafetyRulesContent({\n  customStickerClassName,\n  customButtonWrapperClassName,\n  isFullSizeButton,\n  isActive,\n  isFirstCheckboxSelected,\n  isSecondCheckboxSelected,\n  isThirdCheckboxSelected,\n  textFirst,\n  textSecond,\n  textThird,\n  onFirstCheckboxClick,\n  onSecondCheckboxClick,\n  onThirdCheckboxClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const canSubmit = isFirstCheckboxSelected && isSecondCheckboxSelected && isThirdCheckboxSelected;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={customStickerClassName || styles.modalSticker}\n      />\n      <Checkbox\n        checked={isFirstCheckboxSelected}\n        onChange={onFirstCheckboxClick}\n      >\n        {renderText(textFirst)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isSecondCheckboxSelected}\n        onChange={onSecondCheckboxClick}\n      >\n        {renderText(textSecond)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isThirdCheckboxSelected}\n        onChange={onThirdCheckboxClick}\n      >\n        {renderText(textThird)}\n      </Checkbox>\n\n      <div className={customButtonWrapperClassName || styles.buttonWrapper}>\n        <Button\n          isPrimary\n          isDisabled={!canSubmit}\n          className={isFullSizeButton ? styles.footerButton : undefined}\n          onClick={handleSubmit}\n        >\n          {lang('Understood')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SafetyRulesContent);\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst AuthSafetyRules = ({ isActive }: OwnProps) => {\n  const { openCreateBackUpPage, openMnemonicPage } = getActions();\n\n  const [firstChecked, setFirstChecked] = useState(false);\n  const [secondChecked, setSecondChecked] = useState(false);\n  const [thirdChecked, setThirdChecked] = useState(false);\n\n  useHistoryBack({ isActive, onBack: openCreateBackUpPage });\n\n  const lang = useLang();\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openCreateBackUpPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          isFirstCheckboxSelected={firstChecked}\n          onFirstCheckboxClick={setFirstChecked}\n          isSecondCheckboxSelected={secondChecked}\n          onSecondCheckboxClick={setSecondChecked}\n          isThirdCheckboxSelected={thirdChecked}\n          onThirdCheckboxClick={setThirdChecked}\n          onSubmit={openMnemonicPage}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSafetyRules);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  mnemonic?: string[];\n}\n\nfunction SecretWordsList({\n  mnemonic,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$mnemonic_list_description'))}\n      </p>\n      <p className={buildClassName(styles.warning)}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <ol className={styles.words}>\n        {mnemonic?.map((word, i) => (\n\n          <li key={i} className={styles.word}>{word}</li>\n        ))}\n      </ol>\n    </>\n  );\n}\n\nexport default memo(SecretWordsList);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport SecretWordsList from './SecretWordsList';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  mnemonic,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <SecretWordsList mnemonic={mnemonic} />\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          onClick={onSubmit}\n          className={styles.footerButton}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsContent from '../common/backup/SecretWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n}\n\nconst AuthSecretWords = ({ isActive, mnemonic }: OwnProps) => {\n  const { openAuthBackupWalletModal, openCheckWordsPage } = getActions();\n\n  const lang = useLang();\n  useHistoryBack({ isActive, onBack: openAuthBackupWalletModal });\n\n  const wordsCount = mnemonic?.length || 0;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.containerAlignTop, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openAuthBackupWalletModal} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={openCheckWordsPage}\n          buttonText={lang('Let\\'s Check')}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSecretWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type Theme } from '../../global/types';\n\nimport { APP_NAME, IS_CORE_WALLET } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_LEDGER_SUPPORTED } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  hasAccounts?: boolean;\n  isLoading?: boolean;\n  theme: Theme;\n}\n\nfunction AuthStart({\n  isActive,\n  hasAccounts,\n  isLoading,\n  theme,\n}: OwnProps & StateProps) {\n  const {\n    startCreatingWallet,\n    startImportingWallet,\n    openAbout,\n    openHardwareWalletModal,\n    resetAuth,\n    openAuthImportWalletModal,\n  } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const [isLogoReady, markLogoReady] = useFlag();\n  const logoRef = useMediaTransition<HTMLImageElement>(isLogoReady);\n\n  function renderSimpleImportForm() {\n    return (\n      <>\n        <span className={styles.importText}>{lang('or import from')}</span>\n        <div className={styles.importButtons}>\n          <Button\n            className={buildClassName(styles.btn, !IS_LEDGER_SUPPORTED && styles.btn_single)}\n            onClick={!isLoading ? startImportingWallet : undefined}\n          >\n            {lang('Secret Words')}\n          </Button>\n          {IS_LEDGER_SUPPORTED && (\n            <Button\n              className={buildClassName(styles.btn, styles.btn_mini)}\n              onClick={!isLoading ? openHardwareWalletModal : undefined}\n            >\n              {lang('Ledger')}\n            </Button>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      {hasAccounts && (\n        <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n\n      {IS_CORE_WALLET ? (\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.coreWalletLogo}\n          previewUrl={ANIMATED_STICKERS_PATHS.coreWalletLogoPreview}\n          noLoop={false}\n          nonInteractive\n        />\n      ) : (\n        <img\n          ref={logoRef}\n          src={logoPath}\n          alt={APP_NAME}\n          className={styles.logo}\n          onLoad={markLogoReady}\n        />\n      )}\n\n      <div className={buildClassName(styles.appName, 'rounded-font')}>{APP_NAME}</div>\n      <div className={styles.info}>\n        {renderText(lang('$auth_intro'))}\n      </div>\n\n      {!IS_CORE_WALLET && (\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_about)}\n          onClick={openAbout}\n        >\n          {lang('More about %app_name%', { app_name: APP_NAME })}\n          <i className=\"icon-chevron-right\" aria-hidden />\n        </Button>\n      )}\n      <div className={buildClassName(styles.importButtonsBlock, IS_CORE_WALLET && styles.importButtonsBlockSimple)}>\n        <Button\n          isPrimary\n          className={buildClassName(\n            styles.btn,\n            !IS_CORE_WALLET && styles.btn_single,\n            !IS_CORE_WALLET && styles.btn_wide,\n          )}\n          isLoading={isLoading}\n          onClick={!isLoading ? startCreatingWallet : undefined}\n        >\n          {lang('Create Wallet')}\n        </Button>\n        {IS_CORE_WALLET ? renderSimpleImportForm() : (\n          <Button\n            className={buildClassName(styles.btn, styles.btn_wide, styles.btn_single)}\n            onClick={!isLoading ? openAuthImportWalletModal : undefined}\n          >\n            {lang('Import Existing Wallet')}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    hasAccounts: Boolean(global.currentAccountId),\n    isLoading: global.auth.isLoading,\n    theme: global.settings.theme,\n  };\n})(AuthStart));\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState, Theme } from '../../global/types';\nimport { AuthState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SettingsAbout from '../settings/SettingsAbout';\nimport Transition from '../ui/Transition';\nimport AuthCheckPassword from './AuthCheckPassword';\nimport AuthCheckWords from './AuthCheckWords';\nimport AuthConfirmBiometrics from './AuthConfirmBiometrics';\nimport AuthConfirmPin from './AuthConfirmPin';\nimport AuthCreateBackup from './AuthCreateBackup';\nimport AuthCreateBiometrics from './AuthCreateBiometrics';\nimport AuthCreateNativeBiometrics from './AuthCreateNativeBiometrics';\nimport AuthCreatePassword from './AuthCreatePassword';\nimport AuthCreatePin from './AuthCreatePin';\nimport AuthCreatingWallet from './AuthCreatingWallet';\nimport AuthDisclaimer from './AuthDisclaimer';\nimport AuthImportMnemonic from './AuthImportMnemonic';\nimport AuthImportViewAccount from './AuthImportViewAccount';\nimport AuthSafetyRules from './AuthSafetyRules';\nimport AuthSecretWords from './AuthSecretWords';\nimport AuthStart from './AuthStart';\n\nimport styles from './Auth.module.scss';\n\ntype StateProps = Pick<GlobalState['auth'], (\n  'state' | 'biometricsStep' | 'error' | 'mnemonic' | 'mnemonicCheckIndexes' | 'isLoading' | 'method'\n)> & { theme: Theme };\n\nconst RENDER_COUNT = Object.keys(AuthState).length / 2;\n\nconst Auth = ({\n  state,\n  biometricsStep,\n  error,\n  isLoading,\n  mnemonic,\n  mnemonicCheckIndexes,\n  method,\n  theme,\n}: StateProps) => {\n  const {\n    closeAbout,\n    closeImportViewAccount,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  // Transitioning to ready state is done in another component\n  const renderingAuthState = useCurrentOrPrev(\n    state === AuthState.ready ? undefined : state,\n    true,\n  ) ?? -1;\n\n  const [prevKey, setPrevKey] = useState<AuthState | undefined>(undefined);\n  const [nextKey, setNextKey] = useState(renderingAuthState + 1);\n  const updateRenderingKeys = useLastCallback(() => {\n    setNextKey(renderingAuthState + 1);\n    setPrevKey(renderingAuthState === AuthState.confirmPin ? AuthState.createPin : undefined);\n  });\n\n  function renderAuthScreen(isActive: boolean, isFrom: boolean, currentKey: AuthState) {\n    switch (currentKey) {\n      case AuthState.none:\n        return <AuthStart isActive={isActive} />;\n      case AuthState.createWallet:\n        return <AuthCreatingWallet isActive={isActive} />;\n      case AuthState.checkPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"createAccount\"\n            error={error}\n          />\n        );\n      case AuthState.createPin:\n        return <AuthCreatePin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.createBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.createNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.createPassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method=\"createAccount\" />;\n      case AuthState.createBackup:\n        return <AuthCreateBackup isActive={isActive} />;\n      case AuthState.disclaimerAndBackup:\n        return (\n          <AuthDisclaimer key=\"create\" isActive={isActive} />\n        );\n      case AuthState.importWallet:\n        return <AuthImportMnemonic isActive={isActive} />;\n      case AuthState.importWalletCreatePin:\n        return <AuthCreatePin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletConfirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletCheckPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"importMnemonic\"\n            error={error}\n          />\n        );\n      case AuthState.disclaimer:\n        return (\n          <AuthDisclaimer\n            key=\"import\"\n            isActive={isActive}\n            isImport\n          />\n        );\n      case AuthState.importWalletCreateNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.importWalletCreatePassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method={method} />;\n      case AuthState.importWalletCreateBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method={method} />;\n      case AuthState.importWalletConfirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.about:\n        return (\n          <SettingsAbout\n            isActive={isActive}\n            theme={theme}\n            headerClassName={styles.aboutHeader}\n            handleBackClick={closeAbout}\n          />\n        );\n      case AuthState.safetyRules:\n        return <AuthSafetyRules isActive={isActive} />;\n      case AuthState.mnemonicPage:\n        return <AuthSecretWords isActive={isActive} mnemonic={mnemonic} />;\n      case AuthState.checkWords:\n        return <AuthCheckWords isActive={isActive} mnemonic={mnemonic} checkIndexes={mnemonicCheckIndexes} />;\n      case AuthState.importViewAccount:\n        return (\n          <AuthImportViewAccount\n            isActive={isActive}\n            isLoading={isLoading}\n            onCancel={closeImportViewAccount}\n          />\n        );\n    }\n  }\n\n  return (\n    <Transition\n      name={isPortrait ? (IS_ANDROID ? 'slideFade' : 'slideLayers') : 'semiFade'}\n      activeKey={renderingAuthState}\n      renderCount={RENDER_COUNT}\n      shouldCleanup\n      className={styles.transitionContainer}\n      slideClassName={styles.transitionSlide}\n      prevKey={prevKey}\n      nextKey={nextKey}\n      onStop={updateRenderingKeys}\n      shouldWrap\n    >\n      {renderAuthScreen}\n    </Transition>\n  );\n};\n\nexport default memo(withGlobal((global): StateProps => {\n  const authProps = pick(global.auth, [\n    'state', 'biometricsStep', 'error', 'mnemonic', 'mnemonicCheckIndexes', 'isLoading', 'method',\n  ]);\n  return {\n    ...authProps,\n    theme: global.settings.theme,\n  };\n})(Auth));\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"o7Soo94L\",\"inner\":\"fnzgQDjn\",\"spin\":\"dPrfSpVS\",\"white\":\"ZwvOHvLC\"};","import React, { type ElementRef, memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Spinner.module.scss';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  color?: 'white';\n  className?: string;\n};\n\nfunction Spinner({ ref, color, className }: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.spinner,\n    color && styles[color],\n    className,\n  );\n\n  return (\n    <div ref={ref} className={fullClassName} aria-label={lang('Loading...')}>\n      <i className={buildClassName(styles.inner, 'icon-spinner')} aria-hidden />\n    </div>\n  );\n}\n\nexport default memo(Spinner);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"h8WmgaJB\",\"icon\":\"KW5fEe2q\",\"rightItem\":\"yxdpwMGG\",\"spinner\":\"_o9pbmfe\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport Spinner from './Spinner';\n\nimport styles from './ListItem.module.scss';\n\ninterface OwnProps {\n  icon?: string;\n  label: string;\n  className?: string;\n  isLoading?: boolean;\n  onClick: NoneToVoidFunction;\n}\n\nfunction ListItem({\n  icon,\n  label,\n  className,\n  isLoading,\n  onClick,\n}: OwnProps) {\n  return (\n    <button type=\"button\" className={buildClassName(styles.root, className)} onClick={onClick} disabled={isLoading}>\n      <i className={buildClassName(styles.icon, `icon-${icon}`)} aria-hidden />\n      <span className={styles.label}>{label}</span>\n      {\n        isLoading ? (\n          <Spinner className={buildClassName(styles.rightItem, styles.spinner)} />\n        ) : (\n          <i className={buildClassName(styles.rightItem, 'icon-chevron-right')} aria-hidden />\n        )\n      }\n    </button>\n  );\n}\n\nexport default memo(ListItem);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { IS_CORE_WALLET } from '../../config';\nimport { IS_LEDGER_SUPPORTED } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport ListItem from '../ui/ListItem';\nimport Modal from '../ui/Modal';\n\nimport styles from './Auth.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n}\n\nfunction AuthImportWalletModal({ isOpen }: StateProps) {\n  const {\n    startImportingWallet,\n    startImportViewAccount,\n    openHardwareWalletModal,\n    closeAuthImportWalletModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleSecretWordsClick = useLastCallback(() => {\n    closeAuthImportWalletModal();\n    startImportingWallet();\n  });\n\n  const handleImportHardwareWalletClick = useLastCallback(() => {\n    closeAuthImportWalletModal();\n    openHardwareWalletModal();\n  });\n\n  const handleImportViewAccountClick = useLastCallback(() => {\n    closeAuthImportWalletModal();\n    startImportViewAccount();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('Import Wallet')}\n      hasCloseButton\n      forceBottomSheet\n      nativeBottomSheetKey=\"import-account\"\n      contentClassName={styles.importModalContent}\n      onClose={closeAuthImportWalletModal}\n    >\n      <div className={styles.actionsSection}>\n        <ListItem\n          icon=\"key\"\n          label={lang(IS_CORE_WALLET ? '24 Secret Words' : '12/24 Secret Words')}\n          onClick={handleSecretWordsClick}\n        />\n        {IS_LEDGER_SUPPORTED && (\n          <ListItem\n            icon=\"ledger-alt\"\n            label={lang('Ledger')}\n            onClick={handleImportHardwareWalletClick}\n          />\n        )}\n      </div>\n\n      {!IS_CORE_WALLET && (\n        <div className={styles.actionsSection}>\n          <ListItem\n            icon=\"wallet-view\"\n            label={lang('View Any Address')}\n            onClick={handleImportViewAccountClick}\n          />\n        </div>\n      )}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    isOpen: global.auth.isImportModalOpen,\n  };\n})(AuthImportWalletModal));\n","import { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nexport default function resolveSlideTransitionName() {\n  return IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade';\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { TransferState } from '../global/types';\n\nimport useCurrentOrPrev from './useCurrentOrPrev';\nimport useLastCallback from './useLastCallback';\n\nconst ANIMATION_DURATION = 300;\n\nexport default function useModalTransitionKeys(activeKey: number, isOpen: boolean) {\n  // Use previous key during closing animation\n  const renderingKey = useCurrentOrPrev(isOpen ? activeKey : undefined, true) ?? -1;\n  const [nextKey, setNextKey] = useState<TransferState>();\n\n  const updateNextKey = useLastCallback(() => {\n    setNextKey(isOpen ? renderingKey + 1 : undefined);\n  });\n\n  // Set next key after modal is fully open\n  useEffect(() => {\n    if (isOpen) {\n      setTimeout(updateNextKey, ANIMATION_DURATION);\n    }\n  }, [isOpen, updateNextKey]);\n\n  return { renderingKey, nextKey, updateNextKey };\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { getCachedImageUrl } from '../util/getCachedImageUrl';\nimport useAsync from './useAsync';\n\nexport function useCachedImage(src?: string) {\n  const { result: imageUrl } = useAsync(\n    () => (src ? getCachedImageUrl(src) : Promise.resolve(undefined)),\n    [src],\n  );\n\n  useEffect(() => {\n    return imageUrl ? () => {\n      URL.revokeObjectURL(imageUrl);\n    } : undefined;\n  }, [imageUrl]);\n\n  return { imageUrl };\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst useAsync = <T>(fn: () => Promise<T>, deps: any[], defaultValue?: T) => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | undefined>();\n  const [result, setResult] = useState<T | undefined>(defaultValue);\n  useEffect(() => {\n    setIsLoading(true);\n    let wasCancelled = false;\n    fn().then((res) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setResult(res);\n    }, (err) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setError(err);\n    });\n    return () => {\n      wasCancelled = true;\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps);\n  return { isLoading, error, result };\n};\n\nexport default useAsync;\n","import { IMAGE_CACHE_NAME } from '../config';\n\nexport async function getCachedImageUrl(url: string) {\n  const cache = await caches.open(IMAGE_CACHE_NAME);\n\n  const cachedResponse = await cache.match(url);\n  if (cachedResponse) {\n    const blob = await cachedResponse.blob();\n\n    return URL.createObjectURL(blob);\n  }\n\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(`Image loading error: ${response.statusText}. URL: ${url}`);\n  }\n\n  await cache.put(url, response.clone());\n  const blob = await response.blob();\n\n  return URL.createObjectURL(blob);\n}\n","import type { ApiMtwCardBorderShineType, ApiNft } from '../api/types';\n\nimport buildClassName from '../util/buildClassName';\nimport { getCardNftImageUrl } from '../util/url';\n\ninterface CardCustomizationResult {\n  backgroundImageUrl?: string;\n  withTextGradient: boolean;\n  classNames: string;\n  borderShineType?: ApiMtwCardBorderShineType;\n}\n\nexport default function useCardCustomization(\n  cardNft?: ApiNft,\n): CardCustomizationResult {\n  const { mtwCardType, mtwCardTextType, mtwCardBorderShineType } = cardNft?.metadata || {};\n  const withTextGradient = !!mtwCardType && mtwCardType !== 'standard';\n  const mtwCardTextTypeClass = mtwCardType !== 'standard'\n    ? undefined\n    : (mtwCardTextType === 'dark' ? 'MtwCard__darkText' : 'MtwCard__lightText');\n\n  const backgroundImageUrl = cardNft ? getCardNftImageUrl(cardNft) : undefined;\n\n  return {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: buildClassName(mtwCardType && `MtwCard__${mtwCardType}`, mtwCardTextTypeClass),\n    borderShineType: mtwCardBorderShineType,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"bdfebopt\",\"current\":\"bMmcsmZO\",\"customCard\":\"HF2p9CT1\",\"accountName\":\"MUMjgNQ5\",\"accountAddressBlock\":\"dhGETdr1\",\"edit\":\"FRX4SQTO\"};","import React from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { Account, AccountType } from '../../../../global/types';\n\nimport { getMainAccountAddress } from '../../../../util/account';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { isKeyCountGreater } from '../../../../util/isEmptyObject';\nimport { shortenAddress } from '../../../../util/shortenAddress';\n\nimport { useCachedImage } from '../../../../hooks/useCachedImage';\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useLang from '../../../../hooks/useLang';\n\nimport styles from './AccountButton.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  accountId: string;\n  addressByChain: Account['addressByChain'];\n  accountType: AccountType;\n  title?: string;\n  cardBackgroundNft?: ApiNft;\n  canEditAccount?: boolean;\n  onClick: (accountId: string) => void;\n  onEdit: NoneToVoidFunction;\n}\n\nexport const ACCOUNT_WITH_ICON_ADDRESS_SHIFT = 3;\nexport const ACCOUNT_ADDRESS_SHIFT = 4;\n\nfunction AccountButton({\n  isActive,\n  accountId,\n  addressByChain,\n  accountType,\n  title,\n  cardBackgroundNft,\n  canEditAccount,\n  onClick,\n  onEdit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isHardware = accountType === 'hardware';\n  const isViewMode = accountType === 'view';\n\n  const addressOrMultichain = isKeyCountGreater(addressByChain, 1)\n    ? lang('Multichain')\n    : shortenAddress(\n      getMainAccountAddress(addressByChain) ?? '',\n      accountType !== 'mnemonic' ? ACCOUNT_WITH_ICON_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n      ACCOUNT_ADDRESS_SHIFT,\n    );\n\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n  const { imageUrl } = useCachedImage(backgroundImageUrl);\n  const fullClassName = buildClassName(\n    styles.button,\n    isActive && styles.current,\n    imageUrl && styles.customCard,\n    imageUrl && mtwCardClassNames,\n  );\n\n  const handleEditClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    onEdit();\n  };\n\n  return (\n    <div\n      className={fullClassName}\n      aria-label={lang('Switch Account')}\n      onClick={isActive ? undefined : () => onClick(accountId)}\n      style={buildStyle(imageUrl && `--bg: url(${imageUrl})`)}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountAddressBlock, withTextGradient && 'gradientText')}>\n        {isHardware && <i className=\"icon-ledger\" aria-hidden />}\n        {isViewMode && <i className=\"icon-eye-filled\" aria-hidden />}\n        <span>{addressOrMultichain}</span>\n      </div>\n\n      {isActive && canEditAccount && (\n        <div className={styles.edit} onClick={handleEditClick}>\n          <i className=\"icon-pen\" aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AccountButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"accounts\":\"DP7r4ob0\",\"accounts_two\":\"aMoUTjsw\",\"accountsTwo\":\"aMoUTjsw\",\"account\":\"feJs1qiP\",\"account_current\":\"LGBe77Zo\",\"accountCurrent\":\"LGBe77Zo\",\"account_disabled\":\"QT4AQhSL\",\"accountDisabled\":\"QT4AQhSL\",\"account_inactive\":\"JLVV6MK1\",\"accountInactive\":\"JLVV6MK1\",\"accounts_single\":\"xq8sJcx0\",\"accountsSingle\":\"xq8sJcx0\",\"customCard\":\"QrKEFAWF\",\"accountName\":\"xRepCoTw\",\"button_current\":\"CMlJY5eP\",\"buttonCurrent\":\"CMlJY5eP\",\"accountFooter\":\"aSHneDhG\",\"icon\":\"FzVzsW0Z\",\"accountAddress\":\"U1ocd7xK\",\"accountCheckMark\":\"WoJjd6rF\",\"accountCheckMark_active\":\"Xs5JWZXM\",\"accountCheckMarkActive\":\"Xs5JWZXM\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\nimport type { AccountType } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport { useCachedImage } from '../../hooks/useCachedImage';\nimport useCardCustomization from '../../hooks/useCardCustomization';\n\nimport { ACCOUNT_ADDRESS_SHIFT, ACCOUNT_WITH_ICON_ADDRESS_SHIFT } from '../main/sections/Header/AccountButton';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountId: string;\n  address: string;\n  title?: string;\n  accountType: AccountType;\n  isActive?: boolean;\n  isLoading?: boolean;\n  ariaLabel?: string;\n  className?: string;\n  withCheckbox?: boolean;\n  cardBackgroundNft?: ApiNft;\n  onClick?: NoneToVoidFunction;\n}\n\nfunction AccountButton({\n  accountId,\n  address,\n  title,\n  accountType,\n  ariaLabel,\n  isActive,\n  isLoading,\n  className,\n  withCheckbox,\n  cardBackgroundNft,\n  onClick,\n}: StateProps) {\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n  const { imageUrl } = useCachedImage(backgroundImageUrl);\n\n  const isHardware = accountType === 'hardware';\n  const isViewMode = accountType === 'view';\n  const fullClassName = buildClassName(\n    className,\n    styles.account,\n    imageUrl && styles.customCard,\n    imageUrl && mtwCardClassNames,\n    isActive && !withCheckbox && styles.account_current,\n    isLoading && styles.account_disabled,\n    !onClick && styles.account_inactive,\n  );\n\n  return (\n    <div\n      key={accountId}\n      className={fullClassName}\n      onClick={onClick}\n      style={buildStyle(imageUrl && `--bg: url(${imageUrl})`)}\n      aria-label={ariaLabel}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountFooter, withTextGradient && 'gradientText')}>\n        {isViewMode && <i className={buildClassName('icon-eye-filled', styles.icon)} aria-hidden />}\n        {isHardware && <i className={buildClassName('icon-ledger', styles.icon)} aria-hidden />}\n        <span className={styles.accountAddress}>\n          {shortenAddress(\n            address,\n            isHardware ? ACCOUNT_WITH_ICON_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n            ACCOUNT_ADDRESS_SHIFT,\n          )}\n        </span>\n      </div>\n      {withCheckbox\n        && <div className={buildClassName(styles.accountCheckMark, isActive && styles.accountCheckMark_active)} />}\n    </div>\n  );\n}\n\nexport default memo(AccountButton);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountLength: number;\n  labelText?: string;\n  children: TeactNode;\n  className?: string;\n}\n\nfunction AccountButtonWrapper({\n  accountLength,\n  labelText,\n  children,\n  className,\n}: StateProps) {\n  const fullClassName = buildClassName(\n    className,\n    styles.accounts,\n    'custom-scroll',\n    accountLength === 1 && styles.accounts_single,\n    accountLength === 2 && styles.accounts_two,\n  );\n  return (\n    <>\n      {labelText && <p className={styles.label}>{labelText}</p>}\n      <div className={fullClassName}>\n        {children}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AccountButtonWrapper);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"zdmLsynF\",\"modalDialogInsideSettings\":\"kYjygKEY\",\"slide\":\"a2oy8Zll\",\"container\":\"eM1PpsST\",\"containerStatic\":\"jHYtCW5T\",\"content\":\"_3mWK1CH\",\"iconBlockSlide\":\"WEcWgMzV\",\"iconBlockSlideStatic\":\"VCK1YGjr\",\"iconBlock\":\"KE3Egymz\",\"mobile\":\"kpjonisY\",\"ledgerIcon\":\"iuLLqpxI\",\"textBlock\":\"bn1fb2en\",\"textBlock_gap\":\"bBaOfZlx\",\"textBlockGap\":\"bBaOfZlx\",\"textBlock_success\":\"j8GYzR5R\",\"textBlockSuccess\":\"j8GYzR5R\",\"textBlock_small\":\"Rt2IdHAB\",\"textBlockSmall\":\"Rt2IdHAB\",\"text\":\"GuAw_sFJ\",\"textIcon\":\"SOw0Xtct\",\"text_failed\":\"XPczA9Ds\",\"textFailed\":\"XPczA9Ds\",\"text_connected\":\"YyHAVq6P\",\"textConnected\":\"YyHAVq6P\",\"text_success\":\"tTgIgIgG\",\"textSuccess\":\"tTgIgIgG\",\"actionBlock\":\"hiaAxVr_\",\"actionBlock_single\":\"ApwM97qB\",\"actionBlockSingle\":\"ApwM97qB\",\"button\":\"LZNOcG4M\",\"button_single\":\"Hm4XX1NN\",\"buttonSingle\":\"Hm4XX1NN\",\"accounts\":\"qG6SFrZs\",\"accounts_two\":\"o_4z0gP4\",\"accountsTwo\":\"o_4z0gP4\",\"account\":\"_Vsrbub9\",\"account_current\":\"uo8yhRNU\",\"accountCurrent\":\"uo8yhRNU\",\"addAccountContainer\":\"E5i9UUtD\",\"addAccountIcon\":\"j5VZHMly\",\"accountName\":\"V6_KYxce\",\"accountFooter\":\"LXgNcuuY\",\"accountCurrencyIcon\":\"g_b7EuV5\",\"accountAddress\":\"pL4iTSDM\",\"accountCheckMark\":\"mpVXcyoe\",\"accountCheckMark_active\":\"lVx2a3if\",\"accountCheckMarkActive\":\"lVx2a3if\",\"sticker\":\"MfAU5ZEs\",\"declinedLabel\":\"aWyFXa02\",\"declinedLabelDetailed\":\"q1lhwUmL\",\"dropdownBlock\":\"_2MGoq5H\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  text: string;\n  error?: string;\n  onClose: () => void;\n  onTryAgain: () => void;\n}\n\nenum ConfirmTransactionState {\n  Waiting,\n  Error,\n}\n\nfunction LedgerConfirmOperation({\n  isActive, text, error, onClose, onTryAgain,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [activeState, setActiveState] = useState(ConfirmTransactionState.Waiting);\n  const [nextKey, setNextKey] = useState(ConfirmTransactionState.Error);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (error) {\n      setActiveState(ConfirmTransactionState.Error);\n      setNextKey(ConfirmTransactionState.Waiting);\n    } else {\n      setActiveState(ConfirmTransactionState.Waiting);\n      setNextKey(ConfirmTransactionState.Error);\n    }\n  }, [error]);\n\n  function renderWaitingConfirm(isActiveSlide: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.textBlock, styles.textBlock_small)}>\n            <span className={styles.text}>{text}</span>\n          </div>\n          <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n            <Button onClick={onClose} className={buildClassName(styles.button, styles.button_single)}>\n              {lang('Cancel')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderTryAgain(isActiveSlide: boolean) {\n    const isErrorDetailed = error && [\n      '$hardware_blind_sign_not_enabled',\n      '$hardware_blind_sign_not_enabled_internal',\n    ].includes(error);\n    const errorMessage = isErrorDetailed\n      ? (<span>{renderText(lang(error))}</span>)\n      : renderText(lang(error!));\n\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.declinedLabel, isErrorDetailed && styles.declinedLabelDetailed)}>\n            {errorMessage}\n          </div>\n          <div className={styles.actionBlock}>\n            <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n            <Button isPrimary onClick={onTryAgain} className={styles.button}>{lang('Try Again')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActiveSlide: boolean, isFrom: boolean, currentKey: ConfirmTransactionState) {\n    switch (currentKey) {\n      case ConfirmTransactionState.Waiting:\n        return renderWaitingConfirm(isActiveSlide);\n      case ConfirmTransactionState.Error:\n        return renderTryAgain(isActiveSlide);\n    }\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(modalStyles.transitionSlide, styles.slide)}\n      activeKey={activeState}\n      nextKey={nextKey}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(LedgerConfirmOperation);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownItemContent from './DropdownItemContent';\nimport DropdownMenu from './DropdownMenu';\nimport Spinner from './Spinner';\n\nimport styles from './Dropdown.module.scss';\n\nexport interface DropdownItem<T extends string = string> {\n  value: T;\n  name: string;\n  selectedName?: string;\n  description?: string | TeactNode;\n  icon?: string;\n  overlayIcon?: string;\n  fontIcon?: string;\n  isDisabled?: boolean;\n  isDangerous?: boolean;\n  withDelimiter?: boolean;\n  withDelimiterAfter?: boolean;\n}\n\ninterface OwnProps<T extends string> {\n  label?: string;\n  selectedValue?: T;\n  items: DropdownItem<T>[];\n  className?: string;\n  itemClassName?: string;\n  menuClassName?: string;\n  theme?: 'light' | 'inherit';\n  arrow?: 'caret' | 'chevron';\n  menuPositionX?: 'right' | 'left';\n  menuPositionY?: 'top' | 'bottom';\n  disabled?: boolean;\n  shouldTranslateOptions?: boolean;\n  onChange?: (value: T) => void;\n  isLoading?: boolean;\n  buttonPrefix?: TeactNode;\n}\n\nconst DEFAULT_ARROW = 'caret';\nconst DEFAULT_MENU_POSITION_X = 'right';\n\nfunction Dropdown<T extends string>({\n  label,\n  items,\n  selectedValue,\n  className,\n  itemClassName,\n  menuClassName,\n  theme,\n  arrow = DEFAULT_ARROW,\n  menuPositionX = DEFAULT_MENU_POSITION_X,\n  menuPositionY,\n  disabled,\n  shouldTranslateOptions,\n  onChange,\n  isLoading = false,\n  buttonPrefix,\n}: OwnProps<T>): TeactJsx {\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n  const withMenu = items.length > 1;\n  const isFullyInteractive = Boolean(label);\n\n  const selectedItem = useMemo<DropdownItem<T>>(() => {\n    let item = selectedValue !== undefined && items.find((i) => i.value === selectedValue);\n    item ||= { value: '' as T, name: '' };\n    return {\n      ...item,\n      isDisabled: !isFullyInteractive && disabled,\n    };\n  }, [items, selectedValue, isFullyInteractive, disabled]);\n\n  const handleSelect = useLastCallback((value: T) => {\n    if (value !== selectedValue) {\n      onChange?.(value);\n    }\n  });\n\n  if (!items.length) {\n    return undefined;\n  }\n\n  const fullClassName = buildClassName(\n    className,\n    withMenu && styles.interactive,\n    isFullyInteractive && styles.wide,\n    isFullyInteractive && disabled && styles.disabled,\n  );\n  const buttonFullClassName = buildClassName(\n    styles.button,\n    withMenu && styles.interactive,\n    withMenu && menuClassName,\n    theme && styles[theme],\n    itemClassName,\n  );\n\n  const buttonSuffix = useMemo(() => {\n    return withMenu && (\n      <i\n        className={buildClassName(\n          styles.buttonIcon,\n          arrow === 'chevron' ? 'icon-chevron-down' : 'icon-caret-down',\n        )}\n        aria-hidden\n      />\n    );\n  }, [withMenu, arrow]);\n\n  return (\n    <div\n      className={fullClassName}\n      onClick={isFullyInteractive && !disabled && withMenu ? openMenu : undefined}\n    >\n      {label && <span className={styles.label}>{label}</span>}\n\n      {isLoading ? (\n        <Spinner className={styles.spinner} />\n      ) : (\n        <DropdownItemContent\n          item={selectedItem}\n          prefix={buttonPrefix}\n          suffix={buttonSuffix}\n          shouldTranslate={shouldTranslateOptions}\n          shouldUseSelectedName\n          className={buttonFullClassName}\n          itemClassName={buildClassName('itemName', itemClassName)}\n          onClick={!isFullyInteractive && withMenu ? openMenu : undefined}\n        />\n      )}\n\n      {withMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen && !isLoading}\n          menuPositionX={menuPositionX}\n          menuPositionY={menuPositionY}\n          items={items}\n          shouldTranslateOptions={shouldTranslateOptions}\n          selectedValue={selectedValue}\n          buttonClassName={itemClassName}\n          onSelect={handleSelect}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Dropdown);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Theme } from '../../global/types';\nimport type { LedgerTransport } from '../../util/ledger/types';\nimport { HardwareConnectState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { closeLedgerTab } from '../../util/ledger/tab';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { IS_ANDROID, IS_IOS, IS_IOS_APP, IS_LEDGER_EXTENSION_TAB } from '../../util/windowEnvironment';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Image from '../ui/Image';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\nimport ledgerDesktopSrc from '../../assets/ledger/desktop.png';\nimport ledgerDesktopDarkSrc from '../../assets/ledger/desktop-dark.png';\nimport ledgerIosSrc from '../../assets/ledger/ios.png';\nimport ledgerIosDarkSrc from '../../assets/ledger/ios-dark.png';\nimport ledgerMobileBluetoothSrc from '../../assets/ledger/mobile-bluetooth.png';\nimport ledgerMobileBluetoothDarkSrc from '../../assets/ledger/mobile-bluetooth-dark.png';\nimport ledgerMobileUsbSrc from '../../assets/ledger/mobile-usb.png';\nimport ledgerMobileUsbDarkSrc from '../../assets/ledger/mobile-usb-dark.png';\n\ninterface OwnProps {\n  isActive: boolean;\n  isStatic?: boolean;\n  className?: string;\n  onConnected: (isSingleWallet: boolean) => void;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  state: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  availableTransports?: LedgerTransport[];\n  lastUsedTransport?: LedgerTransport;\n  currentTheme: Theme;\n}\n\nconst NEXT_SLIDE_DELAY = 500;\nconst TRANSPORT_NAMES: Record<LedgerTransport, string> = {\n  usb: 'USB',\n  bluetooth: 'Bluetooth',\n};\n\nfunction LedgerConnect({\n  isActive,\n  isStatic,\n  state,\n  isLedgerConnected,\n  isTonAppConnected,\n  availableTransports,\n  lastUsedTransport,\n  currentTheme,\n  className,\n  onConnected,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps & StateProps) {\n  const { initializeHardwareWalletModal, initializeHardwareWalletConnection } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [selectedTransport, setSelectedTransport] = useState<LedgerTransport | undefined>(lastUsedTransport);\n  const appTheme = useAppTheme(currentTheme);\n\n  const isLedgerFailed = isLedgerConnected === false;\n  const isTonAppFailed = isTonAppConnected === false;\n  const isConnected = state === HardwareConnectState.ConnectedWithSingleWallet\n    || state === HardwareConnectState.ConnectedWithSeveralWallets;\n  const isConnecting = state === HardwareConnectState.Connecting;\n  const isWaitingForRemoteTab = state === HardwareConnectState.WaitingForRemoteTab;\n  const title = isConnected ? lang('Ledger Connected!') : lang('Connect Ledger');\n  const shouldCloseOnCancel = !onCancel;\n\n  const renderingAvailableTransports = useMemo(() => {\n    return (availableTransports || []).map((transport) => ({\n      value: transport,\n      name: TRANSPORT_NAMES[transport],\n    }));\n  }, [availableTransports]);\n  const {\n    shouldRender: shouldRenderAvailableTransports,\n    ref: availableTransportsRef,\n  } = useShowTransition({\n    isOpen: Boolean(renderingAvailableTransports.length > 1 && selectedTransport),\n    withShouldRender: true,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  useEffect(() => {\n    if (selectedTransport) return;\n    if (availableTransports?.length) {\n      setSelectedTransport(availableTransports?.[0]);\n    } else if (IS_IOS_APP) {\n      setSelectedTransport('bluetooth');\n    }\n  }, [availableTransports, selectedTransport]);\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    initializeHardwareWalletModal();\n  }, [isActive]);\n\n  useEffectWithPrevDeps(([prevLastUsedTransport]) => {\n    if (lastUsedTransport && prevLastUsedTransport !== lastUsedTransport) {\n      setSelectedTransport(lastUsedTransport);\n    }\n  }, [lastUsedTransport]);\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (IS_LEDGER_EXTENSION_TAB) {\n      return;\n    }\n\n    setTimeout(() => {\n      onConnected(isSingleWallet);\n    }, NEXT_SLIDE_DELAY);\n  });\n\n  useEffect(() => {\n    if (isConnected && isActive) {\n      handleConnected(state === HardwareConnectState.ConnectedWithSingleWallet);\n    }\n  }, [isConnected, isActive, state, handleConnected]);\n\n  const handleCloseWithRemoteTab = useLastCallback(() => {\n    const closeAction = shouldCloseOnCancel ? onClose : onCancel;\n    closeLedgerTab(); // To close the remote extension tab when the connection is cancelled in the popup\n    closeAction();\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    if (selectedTransport) {\n      initializeHardwareWalletConnection({ transport: selectedTransport });\n    }\n  });\n\n  function renderAvailableTransports() {\n    return (\n      <div ref={availableTransportsRef} className={styles.dropdownBlock}>\n        <Dropdown\n          label={lang('Connection Type')}\n          items={renderingAvailableTransports}\n          selectedValue={selectedTransport}\n          theme=\"light\"\n          arrow=\"chevron\"\n          disabled={isConnecting}\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={setSelectedTransport}\n        />\n      </div>\n    );\n  }\n\n  function renderButtons() {\n    const isFailed = state === HardwareConnectState.Failed;\n\n    if (IS_LEDGER_EXTENSION_TAB && isConnected) {\n      return (\n        <div className={buildClassName(styles.actionBlock, isConnected && styles.actionBlock_single)}>\n          <Button\n            isDisabled={isConnecting}\n            className={buildClassName(styles.button, isConnected && styles.button_single)}\n            onClick={onClose}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.actionBlock}>\n        <Button\n          className={styles.button}\n          onClick={shouldCloseOnCancel ? onClose : onCancel}\n        >\n          {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n        </Button>\n        <Button\n          isPrimary\n          isLoading={isConnecting}\n          isDisabled={isConnecting || isConnected || !availableTransports?.length}\n          className={styles.button}\n          onClick={handleSubmit}\n        >\n          {isFailed ? lang('Try Again') : lang('Continue')}\n        </Button>\n      </div>\n    );\n  }\n\n  function getLedgerIconSrc() {\n    const isDarkTheme = appTheme === 'dark';\n    const iconData = {\n      desktop: isDarkTheme ? ledgerDesktopDarkSrc : ledgerDesktopSrc,\n      mobileUsb: isDarkTheme ? ledgerMobileUsbDarkSrc : ledgerMobileUsbSrc,\n      ios: isDarkTheme ? ledgerIosDarkSrc : ledgerIosSrc,\n      mobileBluetooth: isDarkTheme ? ledgerMobileBluetoothDarkSrc : ledgerMobileBluetoothSrc,\n    };\n\n    if (!IS_CAPACITOR) {\n      // Ledger is only supported on iOS for Capacitor app\n      return IS_ANDROID ? iconData.mobileUsb : iconData.desktop;\n    }\n\n    if (IS_IOS) {\n      return iconData.ios;\n    }\n\n    return selectedTransport === 'bluetooth' ? iconData.mobileBluetooth : iconData.mobileUsb;\n  }\n\n  function renderScreen(handleClose: NoneToVoidFunction, children: TeactNode) {\n    return (\n      <>\n        {!isStatic ? (\n          <ModalHeader\n            title={title}\n            onBackButtonClick={onBackButtonClick}\n            onClose={!onBackButtonClick ? handleClose : undefined}\n          />\n        ) : (\n          <div className={settingsStyles.header}>\n            <Button isSimple isText onClick={handleClose} className={settingsStyles.headerBack}>\n              <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={settingsStyles.headerTitle}>{title}</span>\n          </div>\n        )}\n        <div\n          className={buildClassName(\n            styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n          )}\n        >\n          <Transition\n            activeKey={!IS_CAPACITOR ? 0 : (selectedTransport !== 'bluetooth' ? 1 : 2)}\n            name=\"semiFade\"\n            className={buildClassName(styles.iconBlock, (isPortrait || IS_IOS) && styles.mobile)}\n            slideClassName={isStatic ? styles.iconBlockSlideStatic : styles.iconBlockSlide}\n          >\n            <Image\n              url={getLedgerIconSrc()}\n              imageClassName={styles.ledgerIcon}\n            />\n          </Transition>\n          {children}\n        </div>\n      </>\n    );\n  }\n\n  function renderWaitingForRemoteTab() {\n    return renderScreen(handleCloseWithRemoteTab, (\n      <>\n        <div\n          className={buildClassName(\n            styles.textBlock,\n            styles.textBlock_gap,\n          )}\n        >\n          <span className={styles.text}>\n            <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n            {lang('Switch to the newly opened tab to connect Ledger.')}\n          </span>\n          <span className={styles.text}>\n            <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n            {lang('Once connected, switch back to this window to proceed.')}\n          </span>\n        </div>\n        <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n          <Button\n            className={buildClassName(styles.button, styles.button_single)}\n            onClick={handleCloseWithRemoteTab}\n          >\n            {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n          </Button>\n        </div>\n      </>\n    ));\n  }\n\n  function renderConnect() {\n    return renderScreen(onClose, (\n      <>\n        <div\n          className={buildClassName(\n            styles.textBlock,\n            isConnected && styles.textBlock_success,\n          )}\n        >\n          <span\n            className={buildClassName(\n              styles.text,\n              isLedgerFailed && styles.text_failed,\n              isLedgerConnected && styles.text_connected,\n              isConnected && styles.text_success,\n            )}\n          >\n            <i\n              className={buildClassName(styles.textIcon, isLedgerConnected ? 'icon-accept' : 'icon-dot')}\n              aria-hidden\n            />\n            {lang('Connect your Ledger')}\n          </span>\n          <span\n            className={buildClassName(\n              styles.text,\n              isTonAppFailed && styles.text_failed,\n              isTonAppConnected && styles.text_connected,\n              isConnected && styles.text_success,\n            )}\n          >\n            <i\n              className={buildClassName(styles.textIcon, isTonAppConnected ? 'icon-accept' : 'icon-dot')}\n              aria-hidden\n            />\n            {lang('Unlock it and open the TON App')}\n          </span>\n        </div>\n\n        {shouldRenderAvailableTransports && renderAvailableTransports()}\n        {renderButtons()}\n      </>\n    ));\n  }\n\n  function renderContent() {\n    if (isWaitingForRemoteTab) {\n      return renderWaitingForRemoteTab();\n    }\n\n    return renderConnect();\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll', className)}\n      slideClassName={modalStyles.transitionSlide}\n      activeKey={isWaitingForRemoteTab ? 1 : 0}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    availableTransports,\n    lastUsedTransport,\n  } = global.hardware;\n\n  return {\n    state: hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    availableTransports,\n    lastUsedTransport,\n    currentTheme: global.settings.theme,\n  };\n})(LedgerConnect));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Skeleton.module.scss';\n\ninterface OwnProps {\n  className?: string;\n}\n\nfunction Skeleton({ className }: OwnProps) {\n  return <div className={buildClassName(styles.skeleton, className)} />;\n}\n\nexport default memo(Skeleton);\n","// extracted by mini-css-extract-plugin\nexport default {\"skeleton\":\"JOe_K6bB\",\"shimmerMobile\":\"wTtjfA1C\",\"shimmerDesktop\":\"B07u4Rga\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"DL3GDV2h\",\"tooltip\":\"pPTN8epJ\",\"small\":\"S0YjnQBy\",\"medium\":\"fisd9cYz\",\"arrow\":\"mw4HrHNN\",\"icon\":\"DsxlgjFS\",\"fontIcon\":\"T3riE15T\",\"color-warning\":\"G6MdAror\",\"colorWarning\":\"G6MdAror\"};","import type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport type { EmojiIcon } from './Emoji';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_TOUCH_ENV, REM } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport Emoji from './Emoji';\nimport Portal from './Portal';\n\nimport styles from './IconWithTooltip.module.scss';\n\ntype OwnProps = {\n  message: TeactNode;\n  emoji?: EmojiIcon;\n  size?: 'small' | 'medium';\n  type?: 'hint' | 'warning';\n  iconClassName?: string;\n  tooltipClassName?: string;\n};\n\nconst ARROW_WIDTH = 0.6875 * REM;\nconst GAP = 2 * REM;\n\n/** The component is designed to be positioned inline in text. Use a space symbol to create a gap on the left. */\nconst IconWithTooltip: FC<OwnProps> = ({\n  message,\n  emoji,\n  size = 'medium',\n  type = 'hint',\n  iconClassName,\n  tooltipClassName,\n}) => {\n  const [isOpen, open, close] = useFlag();\n  const { shouldRender, ref: tooltipContainerRef } = useShowTransition({\n    isOpen,\n    withShouldRender: true,\n  });\n  const colorClassName = type === 'warning' && styles[`color-${type}`];\n\n  const iconRef = useRef<HTMLDivElement>();\n  const tooltipRef = useRef<HTMLDivElement>();\n\n  const tooltipStyle = useRef<string>();\n  const arrowStyle = useRef<string>();\n\n  const randomTooltipKey = useUniqueId();\n\n  const handleClickOutside = useLastCallback((event: Event) => {\n    if (!(event.target as HTMLElement).closest(`[data-tooltip-key=\"${randomTooltipKey}\"]`)) {\n      close();\n    }\n  });\n\n  useEffect(() => {\n    if (!isOpen) return undefined;\n    document.addEventListener('touchstart', handleClickOutside);\n\n    return () => {\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [isOpen, close, handleClickOutside]);\n\n  useEffect(() => {\n    if (!iconRef.current || !tooltipRef.current) return;\n\n    const { top, left, width } = iconRef.current.getBoundingClientRect();\n    const {\n      width: tooltipWidth,\n      height: tooltipHeight,\n    } = tooltipRef.current.getBoundingClientRect();\n\n    const tooltipCenter = (window.innerWidth - tooltipWidth) / 2;\n    const arrowPosition = left - tooltipCenter + width / 2 - ARROW_WIDTH / 2;\n    const horizontalOffset = arrowPosition < GAP ? GAP - arrowPosition : 0;\n\n    const tooltipVerticalStyle = `top: ${top - tooltipHeight - ARROW_WIDTH}px;`;\n    const tooltipHorizontalStyle = `left: ${tooltipCenter - horizontalOffset}px;`;\n    const arrowHorizontalStyle = `left: ${arrowPosition + horizontalOffset}px;`;\n    const arrowVerticalStyle = `top: ${tooltipHeight - ARROW_WIDTH / 2 - 1}px;`;\n\n    tooltipStyle.current = `${tooltipVerticalStyle} ${tooltipHorizontalStyle}`;\n    arrowStyle.current = `${arrowVerticalStyle} ${arrowHorizontalStyle}`;\n  }, [shouldRender]);\n\n  function renderIcon() {\n    const commonClassName = buildClassName(styles.icon, iconClassName, styles[size], colorClassName);\n    const onClick = IS_TOUCH_ENV ? stopEvent : undefined;\n\n    if (emoji) {\n      return (\n        <span\n          ref={iconRef}\n          className={commonClassName}\n          data-tooltip-key={randomTooltipKey}\n          onClick={onClick}\n          onMouseEnter={open}\n          onMouseLeave={close}\n        >\n          <Emoji from={emoji} />\n        </span>\n      );\n    }\n\n    return (\n      <i\n        ref={iconRef}\n        className={buildClassName(\n          commonClassName,\n          styles.fontIcon,\n          type === 'warning' ? 'icon-exclamation' : 'icon-question',\n        )}\n        data-tooltip-key={randomTooltipKey}\n        onClick={onClick}\n        onMouseEnter={open}\n        onMouseLeave={close}\n      />\n    );\n  }\n\n  return (\n    <>\n      {shouldRender && (\n        <Portal>\n          <div\n            ref={tooltipContainerRef}\n            className={styles.container}\n            onClick={stopEvent}\n            style={tooltipStyle.current}\n          >\n            <div\n              ref={tooltipRef}\n              className={buildClassName(styles.tooltip, styles[size], colorClassName, tooltipClassName)}\n            >\n              {message}\n            </div>\n            <div className={styles.arrow} style={arrowStyle.current} />\n          </div>\n        </Portal>\n      )}\n      {renderIcon()}\n    </>\n  );\n};\n\nexport default memo(IconWithTooltip);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"rtKXhN4A\",\"modalDialogExtraHeight\":\"ow4XXlQr\",\"dapp\":\"naRjGTN0\",\"dapp_first\":\"LUz47fCn\",\"dappFirst\":\"LUz47fCn\",\"dapp_push\":\"AxygZABC\",\"dappPush\":\"AxygZABC\",\"dappIcon\":\"Utxlqsar\",\"dappLogo\":\"dqbsWkDq\",\"dappLogo_icon\":\"RGl7OFHd\",\"dappLogoIcon\":\"RGl7OFHd\",\"transactionAccount\":\"ut5A6NM6\",\"dappInfo\":\"cL2nTyJm\",\"dappName\":\"IZ831cu4\",\"dappHost\":\"ODsQl3Iq\",\"dappHostWarningIcon\":\"rYesJSbN\",\"dappHostWarningText\":\"B9KF5fSL\",\"dappHostWarningButton\":\"Go1goEAT\",\"dappDisconnect\":\"Dpv9gVfh\",\"label\":\"ooIjdCk3\",\"description\":\"d20jMAO6\",\"footer\":\"lvIWoC_b\",\"buttons\":\"XvGbWtVh\",\"button\":\"TBS2qSdm\",\"rowContainerSkeleton\":\"XcidIimi\",\"dataField\":\"URk9skQT\",\"receivingAddress\":\"NfKwqXNd\",\"payloadField\":\"IpEvYlyO\",\"payloadField_expanded\":\"mtQbMtDU\",\"payloadFieldExpanded\":\"mtQbMtDU\",\"payloadField_text\":\"leFXfJnu\",\"payloadFieldText\":\"leFXfJnu\",\"payloadFieldExpand\":\"l7ty8x8l\",\"payloadFieldTerm\":\"iNOlk2G5\",\"transactionList\":\"TddQIzLn\",\"transactionRow\":\"qfq9TmLL\",\"transactionRowAmount\":\"rqZIiXwE\",\"currencySymbol\":\"WdW2dRfZ\",\"transactionRowAddress\":\"p87NWFTH\",\"transactionRowChevron\":\"gKLbD42t\",\"scam\":\"Kgein0KH\",\"scamImage\":\"gw394drP\",\"transactionDirection\":\"by1Uv_HG\",\"accountTitle\":\"nBWVm1mf\",\"accountBalance\":\"_ogqtbzH\",\"transactionDapp\":\"Uyz5mVM_\",\"sticker\":\"noPlTaoE\",\"sticker_sizeSmall\":\"E9iT0WHT\",\"stickerSizeSmall\":\"E9iT0WHT\",\"descriptionContent\":\"LiakNgEl\",\"dappInfoSkeleton\":\"wOmNbpWs\",\"accountWrapperSkeleton\":\"cWnAUfkt\",\"dappInfoIconSkeleton\":\"e3oGDhNq\",\"dappInfoTextSkeleton\":\"cAdLb2FM\",\"nameSkeleton\":\"tO1IUhnj\",\"descSkeleton\":\"u2wkCYw7\",\"nameDappSkeleton\":\"z0IluCrP\",\"descDappSkeleton\":\"JYgy9un6\",\"transactionDirectionLeftSkeleton\":\"YHLHftpe\",\"transactionDirectionRightSkeleton\":\"VzwVb3o_\",\"dappInfoDataSkeleton\":\"L8RwZKiN\",\"rowSkeleton\":\"IVSbVRoG\",\"rowLargeSkeleton\":\"qNqaxuw6\",\"rowLabelSkeleton\":\"oRChyGCN\",\"rowTextLargeSkeleton\":\"q_gxYI6j\",\"rowFeeSkeleton\":\"lbFcqU2u\",\"skeletonTransitionWrapper\":\"US9q0wug\",\"skeletonBackground\":\"A7lv8DFx\",\"transferWarning\":\"Jgu5kw0W\",\"warningForPayload\":\"fHoMTSia\",\"emulation\":\"ZCewpbCA\",\"emulationFee\":\"ClQaAvrV\",\"transferButtons\":\"if1jAISL\",\"transactionContent\":\"yj9FIjaY\",\"balanceError\":\"IHLQKILq\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { getDappConnectionUniqueId } from '../../util/getDappConnectionUniqueId';\nimport { openUrl } from '../../util/openUrl';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport IconWithTooltip from '../ui/IconWithTooltip';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  dapp?: ApiDapp;\n  className?: string;\n  onDisconnect?: (origin: string) => void;\n}\n\nfunction DappInfo({\n  dapp,\n  className,\n  onDisconnect,\n}: OwnProps) {\n  const { deleteDapp } = getActions();\n\n  const lang = useLang();\n\n  const { name, iconUrl, url, isUrlEnsured } = dapp || {};\n  const host = useMemo(() => url ? new URL(url).host : undefined, [url]);\n\n  const shouldShowDisconnect = Boolean(onDisconnect && url);\n\n  const handleDisconnect = useLastCallback(() => {\n    onDisconnect!(url!);\n  });\n\n  function handleHostWarningIabButtonClick() {\n    deleteDapp({ url: url!, uniqueId: getDappConnectionUniqueId(dapp!) });\n    void openUrl(url!);\n  }\n\n  function renderIcon() {\n    if (iconUrl) {\n      return (\n        <img src={iconUrl} alt={lang('Logo')} className={styles.dappLogo} />\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.dappLogo, styles.dappLogo_icon)}>\n        <i className={buildClassName(styles.dappIcon, 'icon-laptop')} aria-hidden />\n      </div>\n    );\n  }\n\n  function renderWarningIcon() {\n    return (\n      <IconWithTooltip\n        message={(\n          <>\n            <b>{lang('Unverified Source')}</b>\n            <p className={styles.dappHostWarningText}>\n              {renderText(lang('$reopen_in_iab', {\n                browserButton: IS_CAPACITOR && url?.startsWith('http') ? (\n                  <button className={styles.dappHostWarningButton} onClick={handleHostWarningIabButtonClick}>\n                    {lang('MyTonWallet Browser')}\n                  </button>\n                ) : (\n                  <b>{lang('MyTonWallet Browser')}</b>\n                ),\n              }))}\n            </p>\n          </>\n        )}\n        type=\"warning\"\n        size=\"small\"\n        iconClassName={styles.dappHostWarningIcon}\n      />\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.dapp, className)}>\n      {renderIcon()}\n      <div className={styles.dappInfo}>\n        <span className={styles.dappName}>{name}</span>\n        <span className={styles.dappHost}>\n          {!isUrlEnsured && renderWarningIcon()}\n          {host}\n        </span>\n      </div>\n      {shouldShowDisconnect && (\n        <Button\n          isSmall\n          isPrimary\n          className={styles.dappDisconnect}\n          onClick={handleDisconnect}\n        >\n          {lang('Disconnect')}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(DappInfo);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  error?: string;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DappPassword({\n  isActive,\n  error,\n  onSubmit,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const { clearDappConnectRequestError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        error={error}\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Connect')}\n        cancelLabel={lang('Cancel')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearDappConnectRequestError}\n      />\n    </>\n  );\n}\n\nexport default memo(DappPassword);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonConnectProof } from '../../api/tonConnect/types';\nimport type { ApiDapp, ApiDappPermissions } from '../../api/types';\nimport type { Account, AccountSettings, AccountType } from '../../global/types';\nimport { DappConnectState } from '../../global/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport { getMainAccountAddress } from '../../util/account';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../util/authApi/inMemoryPasswordStore';\nimport buildClassName from '../../util/buildClassName';\nimport { isKeyCountGreater } from '../../util/isEmptyObject';\nimport isViewAccount from '../../util/isViewAccount';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Skeleton from '../ui/Skeleton';\nimport Transition from '../ui/Transition';\nimport DappInfo from './DappInfo';\nimport DappPassword from './DappPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  state?: DappConnectState;\n  hasConnectRequest: boolean;\n  dapp?: ApiDapp;\n  error?: string;\n  requiredPermissions?: ApiDappPermissions;\n  requiredProof?: ApiTonConnectProof;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  settingsByAccountId?: Record<string, AccountSettings>;\n}\n\nfunction DappConnectModal({\n  state,\n  hasConnectRequest,\n  dapp,\n  error,\n  requiredPermissions,\n  requiredProof,\n  accounts,\n  currentAccountId,\n  settingsByAccountId,\n}: StateProps) {\n  const {\n    submitDappConnectRequestConfirm,\n    cancelDappConnectRequestConfirm,\n    setDappConnectRequestState,\n    resetHardwareWalletConnect,\n  } = getActions();\n\n  const lang = useLang();\n  const [selectedAccount, setSelectedAccount] = useState<string>(currentAccountId);\n  const [isConfirmOpen, openConfirm, closeConfirm] = useFlag(false);\n\n  const isOpen = hasConnectRequest;\n\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const isLoading = dapp === undefined;\n\n  useEffect(() => {\n    if (!currentAccountId) return;\n\n    setSelectedAccount(currentAccountId);\n  }, [currentAccountId]);\n\n  const shouldRenderAccounts = accounts && isKeyCountGreater(accounts, 1);\n\n  const handleSubmit = useLastCallback(async () => {\n    closeConfirm();\n    const isViewMode = isViewAccount(accounts![selectedAccount].type);\n    const isHardware = accounts![selectedAccount].type === 'hardware';\n    const { isPasswordRequired, isAddressRequired } = requiredPermissions || {};\n\n    if (isViewMode) return;\n\n    if (!requiredProof || (!isHardware && isAddressRequired && !isPasswordRequired)) {\n      submitDappConnectRequestConfirm({\n        accountId: selectedAccount,\n      });\n\n      // Closing the modal is delayed in order to `submitDappConnectRequestConfirm` cause the \"confirmed\" effect first\n      requestAnimationFrame(() => {\n        cancelDappConnectRequestConfirm();\n      });\n    } else if (isHardware) {\n      resetHardwareWalletConnect();\n      setDappConnectRequestState({ state: DappConnectState.ConnectHardware });\n    } else if (getHasInMemoryPassword()) {\n      submitDappConnectRequestConfirm({\n        accountId: selectedAccount,\n        password: await getInMemoryPassword(),\n      });\n    } else {\n      // The confirmation window must be closed before the password screen is displayed\n      requestAnimationFrame(() => {\n        setDappConnectRequestState({ state: DappConnectState.Password });\n      });\n    }\n  });\n\n  const handlePasswordCancel = useLastCallback(() => {\n    setDappConnectRequestState({ state: DappConnectState.Info });\n  });\n\n  const submitDappConnectRequestHardware = useLastCallback(() => {\n    submitDappConnectRequestConfirm({\n      accountId: selectedAccount,\n    });\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDappConnectRequestConfirm({\n      accountId: selectedAccount,\n      password,\n    });\n  });\n\n  function renderAccount(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    accountType: AccountType,\n    title?: string,\n  ) {\n    const hasTonWallet = Boolean(addressByChain.ton);\n    const onClick = !hasTonWallet || isViewAccount(accountType) ? undefined : () => setSelectedAccount(accountId);\n    const address = getMainAccountAddress(addressByChain) ?? '';\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        accountType={accountType}\n        isActive={accountId === selectedAccount}\n        isLoading={isLoading}\n\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        labelText={lang('Select wallet to use on this dapp')}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, type }]) => {\n            return renderAccount(accountId, addressByChain, type, title);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  function renderDappInfo() {\n    const isViewMode = Boolean(selectedAccount && isViewAccount(accounts?.[selectedAccount].type));\n\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <DappInfo\n          dapp={dapp}\n          className={buildClassName(styles.dapp_first, styles.dapp_push)}\n        />\n        {shouldRenderAccounts && renderAccounts()}\n\n        <div className={styles.footer}>\n          <Button\n            isPrimary\n            isDisabled={isViewMode}\n            className={modalStyles.buttonFullWidth}\n            onClick={openConfirm}\n          >\n            {lang('Connect')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  function renderWaitForConnection() {\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <div className={buildClassName(styles.dappInfoSkeleton, styles.dapp_first)}>\n          <Skeleton className={styles.dappInfoIconSkeleton} />\n          <div className={styles.dappInfoTextSkeleton}>\n            <Skeleton className={styles.nameSkeleton} />\n            <Skeleton className={styles.descSkeleton} />\n          </div>\n        </div>\n        <div className={styles.accountWrapperSkeleton}>\n          {shouldRenderAccounts && renderAccounts()}\n        </div>\n      </div>\n    );\n  }\n\n  function renderDappInfoWithSkeleton() {\n    return (\n      <Transition name=\"semiFade\" activeKey={isLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n        <ModalHeader title={lang('Connect Dapp')} onClose={cancelDappConnectRequestConfirm} />\n        {isLoading ? renderWaitForConnection() : renderDappInfo()}\n      </Transition>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: DappConnectState) {\n    switch (currentKey) {\n      case DappConnectState.Info:\n        return renderDappInfoWithSkeleton();\n      case DappConnectState.Password:\n        return (\n          <DappPassword\n            isActive={isActive}\n            error={error}\n            onSubmit={handlePasswordSubmit}\n            onCancel={handlePasswordCancel}\n            onClose={cancelDappConnectRequestConfirm}\n          />\n        );\n      case DappConnectState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n      case DappConnectState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            isActive={isActive}\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onTryAgain={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n    }\n  }\n\n  return (\n    <>\n      <Modal\n        isOpen={isOpen}\n        dialogClassName={styles.modalDialog}\n        nativeBottomSheetKey=\"dapp-connect\"\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        forceFullNative={renderingKey !== DappConnectState.Info}\n        onClose={cancelDappConnectRequestConfirm}\n        onCloseAnimationEnd={cancelDappConnectRequestConfirm}\n      >\n        <Transition\n          name={resolveSlideTransitionName()}\n          className={buildClassName(modalStyles.transition, 'custom-scroll')}\n          slideClassName={modalStyles.transitionSlide}\n          activeKey={renderingKey}\n          nextKey={nextKey}\n        >\n          {renderContent}\n        </Transition>\n      </Modal>\n      <Modal\n        isOpen={isConfirmOpen}\n        isCompact\n        title={lang('Dapp Permissions')}\n        onClose={closeConfirm}\n      >\n        <div className={styles.description}>\n          {lang('$dapp_can_view_balance', {\n            dappname: <strong>{dapp?.name}</strong>,\n          })}\n        </div>\n        <div className={styles.buttons}>\n          <Button onClick={closeConfirm} className={styles.button}>{lang('Cancel')}</Button>\n          <Button isPrimary onClick={handleSubmit} className={styles.button}>{lang('Connect')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const hasConnectRequest = global.dappConnectRequest?.state !== undefined;\n\n  const {\n    state, dapp, error, accountId, permissions, proof,\n  } = global.dappConnectRequest || {};\n\n  const currentAccountId = accountId || global.currentAccountId!;\n\n  return {\n    state,\n    hasConnectRequest,\n    dapp,\n    error,\n    requiredPermissions: permissions,\n    requiredProof: proof,\n    currentAccountId,\n    accounts,\n    settingsByAccountId: global.settings.byAccountId,\n  };\n})(DappConnectModal));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\nimport type { Account } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport { selectCurrentToncoinBalance, selectNetworkAccounts } from '../../global/selectors';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport DappInfo from './DappInfo';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  dapp?: ApiDapp;\n  customTokenBalance?: bigint;\n  customTokenSymbol?: string;\n  customTokenDecimals?: number;\n}\n\ninterface StateProps {\n  toncoinBalance: bigint;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n}\n\nfunction DappInfoWithAccount({\n  dapp,\n  toncoinBalance,\n  currentAccountId,\n  accounts,\n  customTokenBalance,\n  customTokenSymbol,\n  customTokenDecimals,\n}: OwnProps & StateProps) {\n  // Use custom token display if provided, otherwise use TON balance\n  const displayBalance = customTokenBalance !== undefined ? customTokenBalance : toncoinBalance;\n  const displaySymbol = customTokenSymbol || TONCOIN.symbol;\n  const displayDecimals = customTokenDecimals !== undefined ? customTokenDecimals : TONCOIN.decimals;\n\n  return (\n    <div className={styles.transactionDirection}>\n      <div className={styles.transactionAccount}>\n        <div className={styles.accountTitle}>{accounts?.[currentAccountId]?.title}</div>\n        <div className={styles.accountBalance}>\n          {formatCurrency(toDecimal(displayBalance, displayDecimals), displaySymbol)}\n        </div>\n      </div>\n\n      <DappInfo\n        dapp={dapp}\n        className={styles.transactionDapp}\n      />\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    currentAccountId: global.currentAccountId!,\n    accounts,\n  };\n})(DappInfoWithAccount));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport Skeleton from '../ui/Skeleton';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  rows?: DappSkeletonRow[];\n}\n\nexport type DappSkeletonRow = {\n  isLarge?: boolean;\n  hasFee?: boolean;\n};\n\nfunction DappSkeletonWithContent({ rows }: OwnProps) {\n  return (\n    <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionDirectionLeftSkeleton}>\n          <Skeleton className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n          <Skeleton className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n        </div>\n        <div className={styles.transactionDirectionRightSkeleton}>\n          <Skeleton className={styles.dappInfoIconSkeleton} />\n          <div className={styles.dappInfoDataSkeleton}>\n            <Skeleton className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n            <Skeleton className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n          </div>\n        </div>\n      </div>\n      {rows?.map(renderRow)}\n    </div>\n  );\n}\n\nexport default memo(DappSkeletonWithContent);\n\nfunction renderRow({ isLarge, hasFee }: DappSkeletonRow) {\n  return (\n    <div className={styles.rowContainerSkeleton}>\n      <Skeleton className={buildClassName(styles.rowLabelSkeleton, isLarge && styles.rowTextLargeSkeleton)} />\n      <Skeleton className={buildClassName(styles.rowSkeleton, isLarge && styles.rowLargeSkeleton)} />\n      {hasFee && <Skeleton className={styles.rowFeeSkeleton} />}\n    </div>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { pick } from '../../util/iteratees';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport DappInfoWithAccount from './DappInfoWithAccount';\nimport DappSkeletonWithContent, { type DappSkeletonRow } from './DappSkeletonWithContent';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ntype StateProps = Pick<GlobalState['currentDappSignData'], 'dapp' | 'isLoading' | 'payloadToSign'>;\n\nconst skeletonRows: DappSkeletonRow[] = [\n  { isLarge: false, hasFee: false },\n];\n\nfunction DappSignDataInitial({\n  dapp,\n  isLoading,\n  payloadToSign,\n}: StateProps) {\n  const { closeDappSignData, submitDappSignDataConfirm } = getActions();\n\n  const lang = useLang();\n  const renderingPayloadToSign = useCurrentOrPrev(payloadToSign, true);\n\n  const isDappLoading = dapp === undefined;\n\n  function renderContent() {\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <DappInfoWithAccount dapp={dapp} />\n\n        {renderSignDataByType()}\n\n        <div className={buildClassName(modalStyles.buttons, styles.transferButtons)}>\n          <Button className={modalStyles.button} onClick={closeDappSignData}>{lang('Cancel')}</Button>\n          <Button\n            isPrimary\n            isSubmit\n            isLoading={isLoading}\n            className={modalStyles.button}\n            onClick={submitDappSignDataConfirm}\n          >\n            {lang('Sign')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  function renderSignDataByType() {\n    switch (renderingPayloadToSign?.type) {\n      case 'text': {\n        const { text } = renderingPayloadToSign;\n\n        return (\n          <>\n            <p className={styles.label}>{lang('Message')}</p>\n            <div className={buildClassName(styles.payloadField, styles.payloadField_text)}>\n              {text}\n            </div>\n          </>\n        );\n      }\n\n      case 'binary': {\n        const { bytes } = renderingPayloadToSign;\n\n        return (\n          <>\n            <p className={styles.label}>{lang('Binary Data')}</p>\n            <div className={buildClassName(styles.payloadField, styles.payloadField_expanded)}>\n              {bytes}\n            </div>\n            <div className={styles.warningForPayload}>\n              {lang('The binary data content is unclear. Sign it only if you trust the service.')}\n            </div>\n          </>\n        );\n      }\n\n      case 'cell': {\n        const { cell, schema } = renderingPayloadToSign;\n\n        return (\n          <>\n            {!!schema && (\n              <>\n                <p className={styles.label}>{lang('Cell Schema')}</p>\n                <div className={buildClassName(styles.payloadField, styles.payloadField_text)}>\n                  {schema}\n                </div>\n              </>\n            )}\n\n            <p className={styles.label}>{lang('Cell Data')}</p>\n            <div className={buildClassName(styles.dataField, styles.payloadField, styles.payloadField_expanded)}>\n              {cell}\n            </div>\n\n            <div className={styles.warningForPayload}>\n              {lang('The binary data content is unclear. Sign it only if you trust the service.')}\n            </div>\n          </>\n        );\n      }\n    }\n  }\n\n  return (\n    <Transition\n      name=\"semiFade\"\n      activeKey={isDappLoading ? 0 : 1}\n      slideClassName={styles.skeletonTransitionWrapper}\n    >\n      <ModalHeader title={lang('Sign Data')} onClose={closeDappSignData} />\n      {isDappLoading\n        ? <DappSkeletonWithContent rows={skeletonRows} />\n        : renderContent()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => pick(\n  global.currentDappSignData,\n  ['dapp', 'isLoading', 'payloadToSign'],\n))(DappSignDataInitial));\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"BQ2dFF1C\",\"amount\":\"ZK1jiZZ7\",\"amount_purple\":\"A4q4bGl9\",\"amountPurple\":\"A4q4bGl9\",\"amount_green\":\"juLGV08g\",\"amountGreen\":\"juLGV08g\",\"amountSymbol\":\"pIw09HQw\",\"amountFraction\":\"AxDVO85U\",\"buttons\":\"VBRINuzy\",\"buttonsAfterNft\":\"kg0TjtvC\",\"button\":\"ONW_pS7t\"};","import React, { memo, useEffect } from '../../lib/teact/teact';\n\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from '../common/TransferResult.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  onClose: NoneToVoidFunction;\n  type?: 'transfer' | 'signData';\n}\n\nfunction DappTransferComplete({\n  isActive,\n  onClose,\n  type = 'transfer',\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    return isActive\n      ? captureKeyboardListeners({ onEnter: onClose })\n      : undefined;\n  }, [isActive, onClose]);\n\n  const title = type === 'signData' ? lang('Data Signed!') : lang('Transaction Sent!');\n\n  return (\n    <>\n      <ModalHeader title={title} onClose={onClose} />\n\n      <div className={modalStyles.transitionContent}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n          tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n          previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(DappTransferComplete);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\nimport { SignDataState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { pick } from '../../util/iteratees';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport DappSignDataInitial from './DappSignDataInitial';\nimport DappTransferComplete from './DappTransferComplete';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ntype StateProps = Pick<GlobalState['currentDappSignData'], 'isLoading' | 'state' | 'error'>;\n\nfunction DappSignDataModal({\n  isLoading,\n  state,\n  error,\n}: StateProps) {\n  const {\n    setDappSignDataScreen,\n    submitDappSignData,\n    clearDappSignDataError,\n    closeDappSignData,\n    cancelDappSignData,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== SignDataState.None;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === SignDataState.Password) {\n      setDappSignDataScreen({ state: SignDataState.Initial });\n    }\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDappSignData({ password });\n  });\n\n  const handleResetSignData = useLastCallback(() => {\n    cancelDappSignData();\n    updateNextKey();\n  });\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Sign Data')} onClose={closeDappSignData} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          submitLabel={lang('Sign')}\n          cancelLabel={lang('Back')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearDappSignDataError}\n        />\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SignDataState) {\n    switch (currentKey) {\n      case SignDataState.Initial:\n        return <DappSignDataInitial />;\n\n      case SignDataState.Password:\n        return renderPassword(isActive);\n\n      case SignDataState.Complete:\n        return (\n          <DappTransferComplete\n            isActive={isActive}\n            onClose={closeDappSignData}\n            type=\"signData\"\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"dapp-sign-data\"\n      noBackdropClose\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      forceFullNative={renderingKey === SignDataState.Password}\n      onClose={closeDappSignData}\n      onCloseAnimationEnd={handleResetSignData}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => pick(\n  global.currentDappSignData,\n  ['isLoading', 'state', 'error'],\n))(DappSignDataModal));\n","// Converts a string to a numeric seed using a simple hashing algorithm\nfunction stringToNumberSeed(str: string) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    // hash * 31 + charCode\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    // Conversion to a 32-bit integer\n    hash |= 0;\n  }\n\n  return hash;\n}\n\nexport default function getPseudoRandomNumber(min: number, max: number, seed: string) {\n  const numberSeed = stringToNumberSeed(seed);\n  // Convert `seed` to a pseudorandom number using `Math.sin`\n  const x = Math.sin(numberSeed) * 10000;\n  const randomFraction = x - Math.floor(x);\n\n  return Math.floor(randomFraction * (max - min + 1)) + min;\n}\n","import type { ApiSwapAsset } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { formatNumber } from '../formatNumber';\n\nconst BTC = new Set(['jWBTC', 'oWBTC', 'BTC']);\nconst USD = new Set(['jUSDT', 'oUSDT', 'USDT', 'jUSDC', 'oUSDC', 'USDC', 'USD']);\nconst FIAT = new Set(['USD', 'RUB', 'EUR', 'CNY']);\n\nconst LARGE_NUMBER = 1000;\n\nfunction getCurrencyPriority(symbol: string) {\n  if (FIAT.has(symbol)) return 5;\n  if (USD.has(symbol)) return 4;\n  if (BTC.has(symbol)) return 3;\n  if (symbol === TONCOIN.symbol) return 2;\n\n  return 1;\n}\n\nexport default function getSwapRate(\n  fromAmount?: string,\n  toAmount?: string,\n  fromToken?: Pick<ApiSwapAsset, 'symbol'>,\n  toToken?: Pick<ApiSwapAsset, 'symbol'>,\n  shouldTrimLargeNumber = false,\n) {\n  if (!fromAmount || !toAmount || !fromToken || !toToken) {\n    return undefined;\n  }\n\n  let firstCurrencySymbol = fromToken.symbol;\n  let secondCurrencySymbol = toToken.symbol;\n  let price: string;\n  const fromAmountBig = new Big(fromAmount);\n  const toAmountBig = new Big(toAmount);\n\n  if (fromAmountBig.eq(0) || toAmountBig.eq(0)) {\n    return undefined;\n  }\n\n  const fromPriority = getCurrencyPriority(firstCurrencySymbol);\n  const toPriority = getCurrencyPriority(secondCurrencySymbol);\n\n  if (toPriority < fromPriority) {\n    firstCurrencySymbol = toToken.symbol;\n    secondCurrencySymbol = fromToken.symbol;\n    const ratio = fromAmountBig.div(toAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  } else {\n    const ratio = toAmountBig.div(fromAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  }\n\n  return {\n    firstCurrencySymbol,\n    secondCurrencySymbol,\n    price,\n  };\n}\n","import avalancheBlockchainIcon from '../../assets/blockchain/chain_avalanche.svg';\nimport bitcoinBlockchainIcon from '../../assets/blockchain/chain_bitcoin.svg';\nimport bitcoincashBlockchainIcon from '../../assets/blockchain/chain_bitcoincash.svg';\nimport bnbBlockchainIcon from '../../assets/blockchain/chain_bnb.svg';\nimport cardanoBlockchainIcon from '../../assets/blockchain/chain_cardano.svg';\nimport cosmosBlockchainIcon from '../../assets/blockchain/chain_cosmos.svg';\nimport dashBlockchainIcon from '../../assets/blockchain/chain_dash.svg';\nimport dogeBlockchainIcon from '../../assets/blockchain/chain_doge.svg';\nimport eosBlockchainIcon from '../../assets/blockchain/chain_eos.svg';\nimport ethereumBlockchainIcon from '../../assets/blockchain/chain_ethereum.svg';\nimport ethereumclassicBlockchainIcon from '../../assets/blockchain/chain_ethereumclassic.svg';\nimport internetcomputerBlockchainIcon from '../../assets/blockchain/chain_internetcomputer.svg';\nimport iotaBlockchainIcon from '../../assets/blockchain/chain_iota.svg';\nimport litecoinBlockchainIcon from '../../assets/blockchain/chain_litecoin.svg';\nimport moneroBlockchainIcon from '../../assets/blockchain/chain_monero.svg';\nimport polkadotBlockchainIcon from '../../assets/blockchain/chain_polkadot.svg';\nimport rippleBlockchainIcon from '../../assets/blockchain/chain_ripple.svg';\nimport solanaBlockchainIcon from '../../assets/blockchain/chain_solana.svg';\nimport stellarBlockchainIcon from '../../assets/blockchain/chain_stellar.svg';\nimport tonBlockchainIcon from '../../assets/blockchain/chain_ton.svg';\nimport tronBlockchainIcon from '../../assets/blockchain/chain_tron.svg';\nimport zcashBlockchainIcon from '../../assets/blockchain/chain_zcash.svg';\n\nconst CHAIN_ICON_MAP: Record<string, string> = {\n  avalanche: avalancheBlockchainIcon,\n  bitcoin: bitcoinBlockchainIcon,\n  bitcoin_cash: bitcoincashBlockchainIcon,\n  binance_smart_chain: bnbBlockchainIcon,\n  binance_dex: bnbBlockchainIcon,\n  cardano: cardanoBlockchainIcon,\n  cosmos: cosmosBlockchainIcon,\n  dash: dashBlockchainIcon,\n  doge: dogeBlockchainIcon,\n  eos: eosBlockchainIcon,\n  ethereum: ethereumBlockchainIcon,\n  ethereum_classic: ethereumclassicBlockchainIcon,\n  internet_computer: internetcomputerBlockchainIcon,\n  iota: iotaBlockchainIcon,\n  litecoin: litecoinBlockchainIcon,\n  monero: moneroBlockchainIcon,\n  polkadot: polkadotBlockchainIcon,\n  ripple: rippleBlockchainIcon,\n  solana: solanaBlockchainIcon,\n  stellar: stellarBlockchainIcon,\n  ton: tonBlockchainIcon,\n  tron: tronBlockchainIcon,\n  zcash: zcashBlockchainIcon,\n};\n\nexport default function getChainNetworkIcon(networkName?: string) {\n  if (!networkName) return '';\n\n  return CHAIN_ICON_MAP[networkName] ?? networkName;\n}\n","import btc from '../../../assets/coins/coin_btc.png';\nimport my from '../../../assets/coins/coin_my.svg';\nimport ton from '../../../assets/coins/coin_ton.png';\nimport trx from '../../../assets/coins/coin_trx.svg';\nimport usdt from '../../../assets/coins/coin_usdt.svg';\n\nexport const ASSET_LOGO_PATHS = {\n  ton,\n  btc,\n  trx,\n  usdt,\n  my,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"XPeM0_U7\",\"icon\":\"FoSSGfFn\",\"large\":\"wjhynzvL\",\"x-large\":\"CRkmFyTA\",\"xLarge\":\"CRkmFyTA\",\"x-small\":\"TGv989qd\",\"xSmall\":\"TGv989qd\",\"small\":\"Zb5vM0UM\",\"middle\":\"d5dxI69w\",\"fallbackIcon\":\"p13LUS2n\",\"blockchainIcon\":\"CMIQ9vCY\"};","import React, { memo, type TeactNode } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useFlag from '../../hooks/useFlag';\n\nimport styles from './TokenIcon.module.scss';\n\ninterface OwnProps {\n  token: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  withChainIcon?: boolean;\n  size?: 'x-small' | 'small' | 'middle' | 'large' | 'x-large';\n  className?: string;\n  iconClassName?: string;\n  children?: TeactNode;\n}\n\nfunction TokenIcon({\n  token, size, withChainIcon, className, iconClassName, children,\n}: OwnProps) {\n  const { symbol, image, chain } = token;\n  const logoPath = ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || image;\n  const [isLoadingError, markLoadingError] = useFlag(false);\n\n  function renderDefaultIcon() {\n    return (\n      <div className={buildClassName(styles.icon, size && styles[size], iconClassName, styles.fallbackIcon)}>\n        {token.symbol.slice(0, 1)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {\n        !isLoadingError ? (\n          <img\n            src={logoPath}\n            alt={symbol}\n            className={buildClassName(styles.icon, size && styles[size], iconClassName)}\n            draggable={false}\n            onError={markLoadingError}\n          />\n        ) : renderDefaultIcon()\n      }\n      {withChainIcon && chain && (\n        <img\n          src={getChainNetworkIcon(chain)}\n          alt=\"\"\n          className={buildClassName(styles.blockchainIcon, size && styles[size])}\n          draggable={false}\n        />\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(TokenIcon);\n","import type { RefObject } from 'react';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { Theme } from '../../global/types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { animateInstantly } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport { clamp } from '../../util/math';\nimport { random } from '../../util/random';\nimport { DPR } from '../../util/windowEnvironment';\n\nimport { useGetIsIntersectingWithApp } from '../../hooks/useAppIntersectionObserver';\nimport useAppTheme from '../../hooks/useAppTheme';\nimport { getIsInBackground } from '../../hooks/useBackgroundMode';\nimport useDerivedSignal from '../../hooks/useDerivedSignal';\n\nimport styles from './SensitiveDataMask.module.scss';\n\nexport type SensitiveDataMaskSkin = (\n  'lightTheme' | 'darkTheme' | 'cardLightText' | 'cardDarkText' | 'cardGoldText' | 'purple' | 'green'\n  );\n\ninterface OwnProps {\n  ref?: RefObject<HTMLCanvasElement>;\n  cols: number;\n  rows: number;\n  cellSize: number;\n  skin?: SensitiveDataMaskSkin;\n  className?: string;\n}\n\ninterface StateProps {\n  theme: Theme;\n}\n\ninterface AnimationState {\n  opacityValues: number[][];\n  steps: number[][];\n  lastSpeedChangeAt?: number;\n  isRendered: boolean;\n}\n\ninterface RenderOptions {\n  ctx: CanvasRenderingContext2D;\n  cols: number;\n  rows: number;\n  width: number;\n  height: number;\n  cellSizeDpr: number;\n  color: string;\n}\n\n// STEPS values are pre-multiplied by 1 / (1000 / 60) to compensate for FPS\nconst STEPS = [\n  0.0001 * 0.06,\n  0.0001 * 0.06,\n  0.00001 * 0.06,\n  0.0003 * 0.06,\n  0.0001 * 0.06,\n  0.0025 * 0.06,\n];\nconst FROM = 0.07;\nconst TO = 0.25;\nconst CHANGE_SPEED_INTERVAL = 3000;\nconst SKIN_COLORS: Record<SensitiveDataMaskSkin, string> = {\n  lightTheme: '120, 121, 122',\n  darkTheme: '240, 241, 242',\n  cardLightText: '250, 250, 250',\n  cardDarkText: '10, 10, 10',\n  cardGoldText: '101, 73, 16',\n  purple: '96, 107, 215',\n  green: '43, 196, 105',\n};\n\nfunction SensitiveDataMask({\n  ref,\n  cols,\n  rows,\n  cellSize,\n  skin,\n  className,\n  theme,\n}: OwnProps & StateProps) {\n  let canvasRef = useRef<HTMLCanvasElement>();\n  if (ref) {\n    canvasRef = ref;\n  }\n\n  const cellSizeDpr = cellSize * DPR;\n\n  const appTheme = useAppTheme(theme);\n  const color = SKIN_COLORS[skin ?? `${appTheme}Theme`];\n\n  const animationStateRef = useRef<AnimationState>({\n    opacityValues: [],\n    steps: [],\n    lastSpeedChangeAt: undefined,\n    isRendered: false,\n  });\n\n  const getIsIntersecting = useGetIsIntersectingWithApp(canvasRef);\n  const getIsInBackground2 = getIsInBackground;\n  const getShouldAnimate = useDerivedSignal(\n    () => getIsIntersecting() && !getIsInBackground2(),\n    [getIsIntersecting, getIsInBackground2],\n  );\n\n  useLayoutEffect(() => {\n    const state = animationStateRef.current;\n\n    if (state.isRendered && !getShouldAnimate()) return undefined;\n\n    const canvas = canvasRef.current!;\n    const ctx = canvas.getContext('2d')!;\n    const width = cols * cellSizeDpr;\n    const height = rows * cellSizeDpr;\n\n    let shouldStop = false;\n    let lastFrameAt: number | undefined;\n\n    canvas.width = width;\n    canvas.height = height;\n\n    state.lastSpeedChangeAt = undefined;\n\n    const renderOptions = { ctx, cols, rows, width, height, cellSizeDpr, color };\n\n    animateInstantly(() => {\n      if (shouldStop || (state.isRendered && !getShouldAnimate())) return false;\n\n      const now = performance.now();\n      const frameDuration = lastFrameAt ? now - lastFrameAt : 0;\n      renderFrame(renderOptions, state, frameDuration);\n      lastFrameAt = now;\n\n      return true;\n    }, requestMutation);\n\n    return () => {\n      shouldStop = true;\n    };\n  }, [cols, rows, cellSizeDpr, getShouldAnimate, color]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      style={`width: ${cellSize * cols}px; height: ${cellSize * rows}px`}\n      className={buildClassName(styles.canvas, className)}\n    />\n  );\n}\n\nfunction renderFrame(\n  options: RenderOptions,\n  state: AnimationState,\n  frameDuration = 0,\n) {\n  const {\n    ctx, cols, rows, cellSizeDpr, width, height, color,\n  } = options;\n\n  const now = performance.now();\n  const shouldChangeSpeed = state.lastSpeedChangeAt ? now - state.lastSpeedChangeAt >= CHANGE_SPEED_INTERVAL : false;\n\n  if (shouldChangeSpeed || !state.lastSpeedChangeAt) {\n    state.lastSpeedChangeAt = now;\n  }\n\n  ctx.clearRect(0, 0, width, height);\n\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col < cols; col++) {\n      state.steps[row] ??= [];\n      state.opacityValues[row] ??= [];\n\n      if (shouldChangeSpeed) {\n        state.steps[row][col] = sample(STEPS) * (state.steps[row][col] < 0 ? -1 : 1);\n      } else {\n        state.steps[row][col] ??= sample(STEPS);\n      }\n\n      let nextOpacity = state.opacityValues[row][col] ?? (Math.random() * (TO - FROM) + FROM);\n      nextOpacity += state.steps[row][col] * frameDuration;\n      if (nextOpacity > TO || nextOpacity < FROM) {\n        state.steps[row][col] *= -1;\n        nextOpacity = clamp(nextOpacity, FROM, TO);\n      }\n\n      state.opacityValues[row][col] = nextOpacity;\n\n      ctx.fillStyle = `rgba(${color}, ${nextOpacity})`;\n      ctx.fillRect(col * cellSizeDpr, row * cellSizeDpr, cellSizeDpr, cellSizeDpr);\n\n      state.isRendered ||= true;\n    }\n  }\n}\n\n// Returns a random element from the array\nfunction sample<T>(array: T[]): T {\n  return array[random(0, array.length - 1)];\n}\n\nexport default memo(withGlobal((global) => {\n  return {\n    theme: global.settings.theme,\n  };\n})(SensitiveDataMask));\n","// extracted by mini-css-extract-plugin\nexport default {\"canvas\":\"_5lZqlhE\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"iXsFkRU7\",\"center\":\"FEWWktrI\",\"right\":\"FXNTlsIy\",\"interactive\":\"O6dWAwYM\",\"content\":\"GAvxZ7xR\",\"spoiler\":\"ynSPM0hu\",\"left\":\"DSH91Ntx\",\"fixedWidth\":\"CBhjF9XS\"};","import React, { type TeactNode, useEffect, useState } from '../../lib/teact/teact';\n\nimport type { SensitiveDataMaskSkin } from '../common/SensitiveDataMask';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { stopEvent } from '../../util/domEvents';\nimport { vibrate } from '../../util/haptics';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport SensitiveDataMask from '../common/SensitiveDataMask';\n\nimport styles from './SensitiveData.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  rows: number;\n  cols: number;\n  cellSize: number;\n  align?: 'left' | 'center' | 'right';\n  maskSkin?: SensitiveDataMaskSkin;\n  shouldHoldSize?: boolean;\n  className?: string;\n  maskClassName?: string;\n  contentClassName?: string;\n  children: TeactNode;\n}\n\nfunction SensitiveData({\n  isActive,\n  rows,\n  cols,\n  cellSize = 0,\n  align = 'left',\n  maskSkin,\n  shouldHoldSize,\n  className,\n  maskClassName,\n  contentClassName,\n  children,\n}: OwnProps) {\n  const [isShown, setIsShown] = useState(false);\n\n  const isMaskActive = isActive && !isShown;\n\n  useEffect(() => {\n    if (!isActive && isShown) {\n      setIsShown(false);\n    }\n  }, [isActive, isShown]);\n\n  const {\n    ref: contentRef,\n  } = useShowTransition<HTMLDivElement>({\n    isOpen: !isMaskActive,\n    noMountTransition: !isMaskActive,\n    className: 'slow',\n  });\n\n  const {\n    shouldRender: shouldRenderSpoiler,\n    ref: spoilerRef,\n  } = useShowTransition<HTMLCanvasElement>({\n    isOpen: isMaskActive,\n    withShouldRender: true,\n    className: 'slow',\n  });\n\n  function handleClick(e: React.UIEvent) {\n    stopEvent(e);\n    if (!isActive) return;\n\n    setIsShown(!isShown);\n    void vibrate();\n  }\n\n  const fullClassName = buildClassName(\n    styles.wrapper,\n    className,\n    isActive && styles.interactive,\n    styles[align],\n  );\n  const spoilerClassName = buildClassName(\n    styles.spoiler,\n    maskClassName,\n    styles[align],\n  );\n  const wrapperStyle = buildStyle(\n    `--spoiler-width: calc(${cellSize * cols}px + var(--sensitive-data-extra-width, 0px))`,\n    `min-height: ${cellSize * rows}px`,\n    (isMaskActive || shouldHoldSize) && 'min-width: var(--spoiler-width);',\n  );\n  const contentFullClassName = buildClassName(\n    styles.content,\n    contentClassName,\n    isMaskActive && styles.fixedWidth,\n  );\n\n  return (\n    <div\n      style={wrapperStyle}\n      className={fullClassName}\n      onClick={isActive ? handleClick : undefined}\n    >\n      {shouldRenderSpoiler && (\n        <SensitiveDataMask\n          ref={spoilerRef}\n          cols={cols}\n          rows={rows}\n          cellSize={cellSize}\n          skin={maskSkin}\n          className={spoilerClassName}\n        />\n      )}\n      <div ref={contentRef} className={contentFullClassName}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default SensitiveData;\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"voGmKods\",\"interactive\":\"JKuqFIMs\",\"active\":\"vPKs_EfD\",\"itemLast\":\"ithY1XA8\",\"icon\":\"MwNQsICc\",\"dnsIcon\":\"phy9vVLZ\",\"iconFromToken\":\"PVRC8YXZ\",\"iconWaiting\":\"hJkwVF68\",\"iconError\":\"QEx5s5VW\",\"header\":\"pEdRQT_R\",\"subheader\":\"lp28p1if\",\"atMiddle\":\"O_xYgdgM\",\"operationName\":\"mNtPH759\",\"date\":\"koKI7xJv\",\"subheaderHighlight\":\"PQ56yxoE\",\"chainIcon\":\"cSKmXwko\",\"amount\":\"cPGOyB7W\",\"amountTokenIcon\":\"fY8lBeMI\",\"commentIcon\":\"gBryI_V5\",\"comment\":\"HZlzXBrP\",\"outgoing\":\"pDncMEIU\",\"scamImage\":\"q57qlNaF\",\"swapArrowRight\":\"O_3HTad8\",\"swapSell\":\"i_ICee_w\",\"swapBuy\":\"mTZ6NzL2\",\"swapHold\":\"aPXkRlmy\",\"swapError\":\"zT_yLEe8\",\"nft\":\"e3BuV9xi\",\"nonInteractive\":\"ajtoDEwn\",\"nftImage\":\"D2P00KCV\",\"nftData\":\"q0pHgkH5\",\"nftName\":\"nyPEMK4u\",\"nftCollection\":\"Qpo6_7BK\",\"attachment\":\"oLA5mzy7\",\"attachmentsInFullSubheader\":\"WHdvfTWr\",\"attachmentsInLeftSubheader\":\"h_nAGYlh\",\"colorIn\":\"Zw8K7_jM\",\"colorOut\":\"X1ICSpcc\",\"colorStake\":\"eSMoqURj\",\"colorNegative\":\"r0qJPY3I\",\"colorSwap\":\"ubpNbJEy\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { AppTheme } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\n\nimport styles from './Activity.module.scss';\n\nconst iconNamePrefix = 'iconClock';\n\nexport type Color = keyof typeof ANIMATED_STICKERS_PATHS.light.preview extends `${typeof iconNamePrefix}${infer C}`\n  ? C : never;\n\ninterface OwnProps {\n  isPending?: boolean;\n  isError?: boolean;\n  /** The error icon is always red */\n  color?: Color;\n  appTheme: AppTheme;\n}\n\nfunction ActivityStatusIcon({ isPending, isError, color = 'Gray', appTheme }: OwnProps) {\n  const { shouldRender: shouldRenderClock, ref: clockRef } = useShowTransition({\n    isOpen: isPending,\n    withShouldRender: true,\n  });\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  const clockIconName = `${iconNamePrefix}${color}` as `${typeof iconNamePrefix}${Color}`;\n\n  return (\n    <>\n      {isError && <i className={buildClassName(styles.iconError, 'icon-close-filled')} aria-hidden />}\n      {shouldRenderClock && (\n        <div ref={clockRef} className={styles.iconWaiting}>\n          <AnimatedIconWithPreview\n            play\n            size={ANIMATED_STICKER_TINY_ICON_PX}\n            nonInteractive\n            noLoop={false}\n            forceOnHeavyAnimation\n            tgsUrl={ANIMATED_STICKERS_PATHS[appTheme][clockIconName]}\n            previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview[clockIconName]}\n          />\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default memo(ActivityStatusIcon);\n","import type { Ref, RefObject } from 'react';\nimport type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../../api/types';\nimport type { Account, AppTheme } from '../../../../global/types';\nimport type { Color as PendingIndicatorColor } from './ActivityStatusIcon';\n\nimport { TONCOIN, WHOLE_PART_DELIMITER } from '../../../../config';\nimport { getIsInternalSwap, resolveSwapAsset } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../../util/formatNumber';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport getSwapRate from '../../../../util/swap/getSwapRate';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport ActivityStatusIcon from './ActivityStatusIcon';\n\nimport styles from './Activity.module.scss';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug: Record<string, ApiSwapAsset> | undefined;\n  isLast?: boolean;\n  activity: ApiSwapActivity;\n  isActive?: boolean;\n  appTheme: AppTheme;\n  addressByChain: Account['addressByChain'] | undefined;\n  isSensitiveDataHidden?: boolean;\n  isFuture?: boolean;\n  onClick?: (id: string) => void;\n};\n\nconst SWAP_HEIGHT = 4; // rem\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending', 'hold']);\nconst CHANGELLY_EXPIRED_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['expired', 'failed']);\n\nfunction Swap({\n  ref,\n  tokensBySlug,\n  activity,\n  isLast,\n  isActive,\n  appTheme,\n  addressByChain,\n  isSensitiveDataHidden,\n  isFuture,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  const {\n    id,\n    timestamp,\n    status,\n    from,\n    to,\n    cex,\n  } = activity;\n\n  const fromToken = useMemo(() => {\n    if (!from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, from);\n  }, [from, tokensBySlug]);\n  const toToken = useMemo(() => {\n    if (!to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, to);\n  }, [to, tokensBySlug]);\n\n  const fromAmount = Number(activity.fromAmount);\n  const toAmount = Number(activity.toAmount);\n  const isPending = status === 'pending'\n    || CHANGELLY_PENDING_STATUSES.has(cex?.status ?? '');\n  const isError = ONCHAIN_ERROR_STATUSES.has(status)\n    || CHANGELLY_EXPIRED_STATUSES.has(cex?.status ?? '');\n  const isHold = cex?.status === 'hold';\n  const amountCols = useMemo(() => getPseudoRandomNumber(5, 13, timestamp.toString()), [timestamp]);\n\n  const isFromToncoin = from === TONCOIN.slug;\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken,\n    to: toToken,\n    toAddress: cex?.payoutAddress,\n    addressByChain,\n  });\n\n  function renderIcon() {\n    let statusClass: string | undefined = styles.colorSwap;\n    let pendingIndicatorColor: PendingIndicatorColor = 'Green';\n\n    if (isError) {\n      statusClass = styles.colorNegative;\n      pendingIndicatorColor = 'Red';\n    } else if (isHold) {\n      statusClass = undefined;\n      pendingIndicatorColor = 'Gray';\n    }\n\n    if (status === 'pending') {\n      pendingIndicatorColor = 'Orange';\n    }\n\n    return (\n      <i className={buildClassName('icon-swap', styles.icon, statusClass)} aria-hidden>\n        <ActivityStatusIcon\n          isPending={isPending}\n          isError={isError}\n          color={pendingIndicatorColor}\n          appTheme={appTheme}\n        />\n      </i>\n    );\n  }\n\n  function renderAmount() {\n    const statusClass = buildClassName(isError && styles.swapError, isHold && styles.swapHold);\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={amountCols}\n        rows={2}\n        cellSize={8}\n        align=\"right\"\n        contentClassName={styles.amount}\n      >\n        <span className={buildClassName(styles.swapSell, statusClass)}>\n          {formatCurrencyExtended(\n            Math.abs(fromAmount),\n            fromToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n        <i\n          className={buildClassName(styles.swapArrowRight, 'icon-chevron-right', statusClass)}\n          aria-hidden\n        />\n        <span className={buildClassName(styles.swapBuy, statusClass)}>\n          {formatCurrencyExtended(\n            Math.abs(toAmount),\n            toToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n        {fromToken && <TokenIcon token={fromToken} size=\"x-small\" className={styles.amountTokenIcon} />}\n        {toToken && <TokenIcon token={toToken} size=\"x-small\" className={styles.amountTokenIcon} />}\n      </SensitiveData>\n    );\n  }\n\n  function renderStatusAndDate() {\n    if (isFuture) {\n      return <div />;\n    }\n\n    const date: string | TeactNode[] = formatTime(timestamp);\n    let state = '';\n    const cexStatus = cex?.status;\n\n    if (cexStatus === 'expired' || cexStatus === 'overdue') {\n      state = lang('Expired');\n    } else if (cexStatus === 'refunded') {\n      state = lang('Refunded');\n    } else if (cexStatus === 'hold') {\n      state = lang('On Hold');\n    } else if (cexStatus === 'failed' || isError) {\n      state = lang('Failed');\n    } else if (cexStatus === 'waiting' && !isFromToncoin && !isInternalSwap) {\n      // Skip the 'waiting' status for transactions from Toncoin to account or from Tron to Ton\n      // inside the multichain wallet for delayed status updates from hangelly\n      state = lang('Waiting for Payment');\n    } else if (isPending) {\n      state = lang('In Progress');\n    }\n\n    return (\n      <div className={styles.date}>\n        {state && <span className={styles.subheaderHighlight}>{state}</span>}\n        {state && `${WHOLE_PART_DELIMITER}${WHOLE_PART_DELIMITER}`}\n        {date}\n      </div>\n    );\n  }\n\n  function renderTitle() {\n    if (isHold || isError || isFuture) {\n      return lang('$swap_action');\n    } else if (isPending) {\n      return lang('Swapping');\n    }\n\n    return lang('Swapped');\n  }\n\n  function renderCurrency() {\n    const rate = getSwapRate(activity.fromAmount, activity.toAmount, fromToken, toToken);\n\n    if (!rate) return undefined;\n\n    const [priceWhole, priceFraction] = rate.price.split('.');\n\n    return (\n      <div>\n        {rate.firstCurrencySymbol}{'  '}\n        <span className={styles.subheaderHighlight}>\n          {priceWhole}\n          <small>.{priceFraction}{' '}{rate.secondCurrencySymbol}</small>\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      className={buildClassName(\n        styles.item,\n        isLast && styles.itemLast,\n        isActive && styles.active,\n        onClick && styles.interactive,\n      )}\n      onClick={onClick && (() => onClick(id))}\n      isSimple\n    >\n      {renderIcon()}\n      <div className={styles.header}>\n        <div className={buildClassName(styles.operationName, isFuture && styles.atMiddle)}>\n          {renderTitle()}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {renderStatusAndDate()}\n        {renderCurrency()}\n      </div>\n    </Button>\n  );\n}\n\nexport default memo(Swap);\n\nexport function getSwapHeight() {\n  return SWAP_HEIGHT;\n}\n","import type { ApiChain } from '../api/types';\nimport type { Account, SavedAddress } from '../global/types';\n\nexport function getLocalAddressName({\n  address,\n  chain,\n  currentAccountId,\n  accounts,\n  savedAddresses,\n}: {\n  address?: string;\n  chain: ApiChain;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  savedAddresses?: SavedAddress[];\n}) {\n  if (!address) return undefined;\n\n  const otherAccount = accounts\n    ? Object.keys(accounts).find((accountId) => {\n      return accountId !== currentAccountId && accounts[accountId].addressByChain?.[chain] === address;\n    })\n    : undefined;\n\n  if (otherAccount) {\n    return accounts![otherAccount].title;\n  }\n\n  return savedAddresses?.find((item) => {\n    return item.address === address && item.chain === chain;\n  })?.name;\n}\n","import type { Ref, RefObject } from 'react';\nimport type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiBaseCurrency,\n  ApiNft,\n  ApiTokenWithPrice,\n  ApiTransactionActivity,\n  ApiTransactionType,\n  ApiYieldType,\n} from '../../../../api/types';\nimport type { Account, AppTheme, SavedAddress } from '../../../../global/types';\nimport type { Color as PendingIndicatorColor } from './ActivityStatusIcon';\n\nimport {\n  FRACTION_DIGITS,\n  NFT_MARKETPLACE_TITLES,\n  SWAP_DEX_LABELS,\n  TONCOIN,\n  TRANSACTION_ADDRESS_SHIFT,\n  WHOLE_PART_DELIMITER,\n} from '../../../../config';\nimport {\n  DNS_TRANSACTION_TYPES,\n  getTransactionAmountDisplayMode,\n  getTransactionTitle,\n  isScamTransaction,\n  shouldShowTransactionAddress,\n  shouldShowTransactionAnnualYield,\n  shouldShowTransactionComment,\n  STAKING_TRANSACTION_TYPES,\n} from '../../../../util/activities';\nimport { bigintAbs } from '../../../../util/bigint';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { getDnsDomainZone } from '../../../../util/dns';\nimport { formatBaseCurrencyAmount, formatCurrencyExtended } from '../../../../util/formatNumber';\nimport { getLocalAddressName } from '../../../../util/getLocalAddressName';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport { vibrate } from '../../../../util/haptics';\nimport { shortenAddress } from '../../../../util/shortenAddress';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport ActivityStatusIcon from './ActivityStatusIcon';\n\nimport styles from './Activity.module.scss';\n\nimport scamImg from '../../../../assets/scam.svg';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  transaction: ApiTransactionActivity;\n  isLast?: boolean;\n  isActive?: boolean;\n  withChainIcon?: boolean;\n  annualYield: number | undefined;\n  yieldType: ApiYieldType | undefined;\n  appTheme: AppTheme;\n  savedAddresses: SavedAddress[] | undefined;\n  doesNftExist?: boolean;\n  isSensitiveDataHidden?: boolean;\n  isFuture?: boolean;\n  accounts: Record<string, Account> | undefined;\n  currentAccountId: string;\n  baseCurrency: ApiBaseCurrency | undefined;\n  onClick?: (id: string) => void;\n};\n\nconst TRANSACTION_HEIGHT = 4; // rem\nconst NFT_EXTRA_HEIGHT = 3.875; // rem\nconst COMMENT_EXTRA_HEIGHT = 2.375; // rem\nconst SUBHEADER_RELEASE_HEIGHT = 1.25; // rem\n\nconst OUT_TRANSACTION_TYPES = new Set<ApiTransactionType>([\n  undefined, 'unstakeRequest', 'nftTrade', 'auctionBid', 'liquidityDeposit',\n]);\n\nfunction Transaction({\n  ref,\n  tokensBySlug,\n  transaction,\n  isActive,\n  annualYield,\n  yieldType,\n  savedAddresses,\n  isLast,\n  appTheme,\n  withChainIcon,\n  doesNftExist,\n  isSensitiveDataHidden,\n  isFuture,\n  accounts,\n  currentAccountId,\n  baseCurrency,\n  onClick,\n}: OwnProps) {\n  const { openNftAttributesModal } = getActions();\n  const lang = useLang();\n\n  const {\n    id,\n    amount,\n    fromAddress,\n    toAddress,\n    timestamp,\n    comment,\n    encryptedComment,\n    isIncoming,\n    type,\n    metadata,\n    slug,\n    nft,\n    extra,\n    status,\n  } = transaction;\n\n  const isStaking = STAKING_TRANSACTION_TYPES.has(type);\n  const isDnsOperation = DNS_TRANSACTION_TYPES.has(type);\n\n  const token = tokensBySlug[slug];\n  const { chain } = token || {};\n  const address = isIncoming ? fromAddress : toAddress;\n  const localAddressName = useMemo(() => {\n    if (!chain) return undefined;\n\n    return getLocalAddressName({\n      address,\n      chain,\n      currentAccountId,\n      accounts,\n      savedAddresses,\n    });\n  }, [accounts, address, chain, currentAccountId, savedAddresses]);\n  const addressName = localAddressName || metadata?.name;\n  const dnsIconText = useMemo(() => isDnsOperation ? getDnsIconText(nft) : '', [isDnsOperation, nft]);\n  const amountCols = useMemo(() => getPseudoRandomNumber(5, 13, timestamp.toString()), [timestamp]);\n  const attachmentsTakeSubheader = shouldAttachmentTakeSubheader(transaction, isFuture);\n  const isNoSubheaderLeft = getIsNoSubheaderLeft(transaction, isFuture);\n  const titleTense = isFuture || status === 'failed' ? 'future' : 'past';\n\n  let operationColorClass: string | undefined;\n  let pendingIndicatorColor: PendingIndicatorColor = 'Gray';\n  if (status === 'failed' || type === 'burn') {\n    operationColorClass = styles.colorNegative;\n    pendingIndicatorColor = 'Red';\n  } else if (isIncoming) {\n    operationColorClass = styles.colorIn;\n    pendingIndicatorColor = 'Green';\n  } else if (type === 'stake') {\n    operationColorClass = styles.colorStake;\n    pendingIndicatorColor = 'PurpleWhite';\n  } else if (OUT_TRANSACTION_TYPES.has(type)) {\n    operationColorClass = styles.colorOut;\n    pendingIndicatorColor = 'Blue';\n  }\n\n  if (status === 'pending') {\n    pendingIndicatorColor = 'Orange';\n  }\n\n  const handleNftClick = useLastCallback((event: React.MouseEvent) => {\n    event.stopPropagation();\n\n    void vibrate();\n    openNftAttributesModal({ nft: nft! });\n  });\n\n  function renderNft() {\n    return (\n      <div\n        className={buildClassName(\n          styles.attachment,\n          styles.nft,\n          !doesNftExist && styles.nonInteractive,\n          'transaction-nft',\n        )}\n        onClick={doesNftExist ? handleNftClick : undefined}\n        data-nft-address={nft?.address}\n        data-tx-id={id}\n      >\n        <img src={nft!.thumbnail} alt={nft!.name} className={styles.nftImage} />\n        <div className={styles.nftData}>\n          <div className={styles.nftName}>{nft!.name}</div>\n          <div className={styles.nftCollection}>{nft!.collectionName}</div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderComment() {\n    const className = buildClassName(\n      styles.attachment,\n      styles.comment,\n      !isIncoming && styles.outgoing,\n      operationColorClass,\n    );\n\n    return (\n      <div className={className}>\n        {encryptedComment && <i className={buildClassName(styles.commentIcon, 'icon-lock')} aria-hidden />}\n        {encryptedComment ? <i>{lang('Encrypted Message')}</i> : comment}\n      </div>\n    );\n  }\n\n  function renderIcon() {\n    let iconName: string;\n    if (isStaking) {\n      iconName = 'icon-earn';\n    } else if (type === 'callContract' || type === 'contractDeploy') {\n      iconName = 'icon-cog';\n    } else if (isDnsOperation) {\n      iconName = buildClassName('rounded-font', styles.dnsIcon);\n    } else if (type === 'mint') {\n      iconName = 'icon-magic-wand';\n    } else if (type === 'burn') {\n      iconName = 'icon-fire';\n    } else if (type === 'auctionBid') {\n      iconName = 'icon-auction-alt';\n    } else if (type === 'nftTrade') {\n      iconName = isIncoming ? 'icon-tag' : 'icon-purchase';\n    } else if (type === 'liquidityDeposit') {\n      iconName = 'icon-can-in';\n    } else if (type === 'liquidityWithdraw') {\n      iconName = 'icon-can-out';\n    } else if (isIncoming) {\n      iconName = 'icon-receive-alt';\n    } else {\n      iconName = 'icon-send-alt';\n    }\n\n    return (\n      <i className={buildClassName(styles.icon, iconName, operationColorClass)} aria-hidden>\n        {isDnsOperation && (\n          <span style={isDnsOperation ? `font-size: ${Math.min(1, 4 / dnsIconText.length) * 100}%` : undefined}>\n            {dnsIconText}\n          </span>\n        )}\n        <ActivityStatusIcon\n          isPending={status === 'pending' || status === 'pendingTrusted'}\n          isError={status === 'failed'}\n          color={pendingIndicatorColor}\n          appTheme={appTheme}\n        />\n      </i>\n    );\n  }\n\n  function renderAmount() {\n    const amountDisplayMode = getTransactionAmountDisplayMode(transaction);\n    const noSign = amountDisplayMode === 'noSign';\n\n    if (amountDisplayMode === 'hide') {\n      return;\n    }\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={amountCols}\n        rows={2}\n        cellSize={8}\n        align=\"right\"\n        contentClassName={buildClassName(\n          styles.amount,\n          operationColorClass !== styles.colorOut && operationColorClass,\n        )}\n      >\n        {formatCurrencyExtended(\n          toDecimal(noSign ? bigintAbs(amount) : amount, token?.decimals ?? FRACTION_DIGITS),\n          token?.symbol || TONCOIN.symbol,\n          noSign,\n          undefined,\n          !isIncoming,\n        )}\n        {token && <TokenIcon token={token} size=\"x-small\" className={styles.amountTokenIcon} />}\n      </SensitiveData>\n    );\n  }\n\n  function renderBaseCurrencyAmount() {\n    if (getTransactionAmountDisplayMode(transaction) === 'hide' || !token) {\n      return undefined;\n    }\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={Math.round(3 + (amountCols - 5) / 3)}\n        rows={2}\n        cellSize={8}\n        align=\"right\"\n      >\n        {formatBaseCurrencyAmount(amount, baseCurrency, token)}\n      </SensitiveData>\n    );\n  }\n\n  function renderAddressAndDate() {\n    const children: TeactNode[] = [];\n    const delimiter = `${WHOLE_PART_DELIMITER}${WHOLE_PART_DELIMITER}`;\n\n    if (transaction.status === 'failed') {\n      children.push(delimiter, lang('Failed'));\n    }\n\n    if (shouldShowTransactionAddress(transaction).includes('list')) {\n      const dexName = extra?.dex && SWAP_DEX_LABELS[extra.dex];\n      const marketplaceName = extra?.marketplace && NFT_MARKETPLACE_TITLES[extra.marketplace];\n\n      children.push(delimiter, lang(\n        (dexName || marketplaceName) ? '$transaction_on' : isIncoming ? '$transaction_from' : '$transaction_to',\n        {\n          address: (\n            <span className={styles.subheaderHighlight}>\n              {withChainIcon && Boolean(chain) && (\n                <i\n                  className={buildClassName(styles.chainIcon, `icon-chain-${chain.toLowerCase()}`)}\n                  aria-label={chain}\n                />\n              )}\n              {dexName || marketplaceName || addressName || shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)}\n            </span>\n          ),\n        },\n      ));\n    }\n\n    if (shouldShowTransactionAnnualYield(transaction)) {\n      children.push(delimiter, lang('at %annual_yield%', {\n        annual_yield: <span className={styles.subheaderHighlight}>{yieldType} {annualYield}%</span>,\n      }));\n    }\n\n    if (!isFuture) {\n      children.push(delimiter, formatTime(timestamp));\n    }\n\n    // Warning! Keep this function result in sync with `getIsNoSubheaderLeft`\n    return (\n      <div className={styles.date}>\n        {children.slice(1)}\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      className={buildClassName(\n        styles.item,\n        isLast && styles.itemLast,\n        isActive && styles.active,\n        onClick && styles.interactive,\n        attachmentsTakeSubheader === 'full' ? styles.attachmentsInFullSubheader\n          : attachmentsTakeSubheader === 'left' ? styles.attachmentsInLeftSubheader : undefined,\n      )}\n      onClick={onClick && (() => onClick(id))}\n      isSimple\n    >\n      {renderIcon()}\n      <div className={styles.header}>\n        <div\n          className={buildClassName(\n            styles.operationName,\n            isNoSubheaderLeft && attachmentsTakeSubheader === 'none' && styles.atMiddle,\n          )}\n        >\n          {getTransactionTitle(transaction, titleTense, lang)}\n          {isScamTransaction(transaction) && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {renderAddressAndDate()}\n        {renderBaseCurrencyAmount()}\n      </div>\n      {nft && renderNft()}\n      {shouldShowTransactionComment(transaction) && renderComment()}\n    </Button>\n  );\n}\n\nexport default memo(Transaction);\n\nexport function getTransactionHeight(transaction: ApiTransactionActivity, isFuture?: boolean) {\n  return TRANSACTION_HEIGHT\n    + (transaction.nft ? NFT_EXTRA_HEIGHT : 0)\n    + (shouldShowTransactionComment(transaction) ? COMMENT_EXTRA_HEIGHT : 0)\n    - (shouldAttachmentTakeSubheader(transaction, isFuture) !== 'none' ? SUBHEADER_RELEASE_HEIGHT : 0);\n}\n\nfunction shouldAttachmentTakeSubheader(\n  transaction: ApiTransactionActivity,\n  isFuture?: boolean,\n): 'none' | 'left' | 'full' {\n  if (!transaction.nft && !shouldShowTransactionComment(transaction)) {\n    return 'none';\n  }\n\n  if (!getIsNoSubheaderLeft(transaction, isFuture)) {\n    return 'none'; // The attachment won't fit in the right slot, because the left subheader is too wide\n  }\n\n  if (getIsNoSubheaderRight(transaction)) {\n    return 'full';\n  }\n\n  const isAttachmentOnTheLeft = transaction.nft || transaction.isIncoming;\n  return isAttachmentOnTheLeft ? 'left' : 'none';\n}\n\nfunction getIsNoSubheaderLeft(transaction: ApiTransactionActivity, isFuture?: boolean) {\n  return isFuture\n    && transaction.status !== 'failed'\n    && !shouldShowTransactionAddress(transaction).includes('list')\n    && !shouldShowTransactionAnnualYield(transaction);\n}\n\nfunction getIsNoSubheaderRight(transaction: ApiTransactionActivity) {\n  return getTransactionAmountDisplayMode(transaction) === 'hide';\n}\n\nfunction getDnsIconText(nft: ApiNft | undefined) {\n  if (nft?.name) {\n    const resolved = getDnsDomainZone(nft.name);\n    if (resolved) {\n      return `.${resolved.zone.suffixes[0]}`;\n    }\n  }\n\n  return 'DNS';\n}\n","import React from '../../../../lib/teact/teact';\n\nimport type {\n  ApiActivity,\n  ApiBaseCurrency,\n  ApiNft,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../../../api/types';\nimport type { Account, AppTheme, SavedAddress } from '../../../../global/types';\n\nimport Swap, { getSwapHeight } from './Swap';\nimport Transaction, { getTransactionHeight } from './Transaction';\n\ninterface OwnProps {\n  activity: ApiActivity;\n  isLast?: boolean;\n  isActive?: boolean;\n  isSensitiveDataHidden?: boolean;\n  isFuture?: boolean;\n  withChainIcon?: boolean;\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug: Record<string, ApiSwapAsset> | undefined;\n  appTheme: AppTheme;\n  nftsByAddress: Record<string, ApiNft> | undefined;\n  currentAccountId: string;\n  stakingStateBySlug: Record<string, ApiStakingState>;\n  savedAddresses: SavedAddress[] | undefined;\n  accounts: Record<string, Account> | undefined;\n  baseCurrency: ApiBaseCurrency | undefined;\n  onClick?: (id: string) => void;\n}\n\nexport default function Activity({\n  activity,\n  isLast,\n  isActive,\n  isSensitiveDataHidden,\n  isFuture,\n  withChainIcon,\n  tokensBySlug,\n  swapTokensBySlug,\n  appTheme,\n  nftsByAddress,\n  currentAccountId,\n  stakingStateBySlug,\n  savedAddresses,\n  accounts,\n  baseCurrency,\n  onClick,\n}: OwnProps) {\n  if (activity.kind === 'swap') {\n    return (\n      <Swap\n        activity={activity}\n        tokensBySlug={swapTokensBySlug}\n        isLast={isLast}\n        isActive={isActive}\n        appTheme={appTheme}\n        addressByChain={accounts?.[currentAccountId]?.addressByChain}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        isFuture={isFuture}\n        onClick={onClick}\n      />\n    );\n  } else {\n    const doesNftExist = Boolean(activity.nft && nftsByAddress?.[activity.nft.address]);\n    const { annualYield, yieldType } = stakingStateBySlug[activity.slug] ?? {};\n\n    return (\n      <Transaction\n        currentAccountId={currentAccountId}\n        transaction={activity}\n        tokensBySlug={tokensBySlug}\n        isActive={isActive}\n        annualYield={annualYield}\n        yieldType={yieldType}\n        isLast={isLast}\n        savedAddresses={savedAddresses}\n        withChainIcon={withChainIcon}\n        appTheme={appTheme}\n        doesNftExist={doesNftExist}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        isFuture={isFuture}\n        accounts={accounts}\n        baseCurrency={baseCurrency}\n        onClick={onClick}\n      />\n    );\n  }\n}\n\nexport function getActivityHeight(activity: ApiActivity, isFuture?: boolean) {\n  return activity.kind === 'swap' ? getSwapHeight() : getTransactionHeight(activity, isFuture);\n}\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\nimport { type Account, TransferState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectCurrentToncoinBalance, selectNetworkAccounts } from '../../global/selectors';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport DappInfo from './DappInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentAccount?: Account;\n  toncoinBalance: bigint;\n  dapp?: ApiDapp;\n}\n\nfunction DappLedgerWarning({\n  currentAccount,\n  toncoinBalance,\n  dapp,\n}: StateProps) {\n  const { cancelDappTransfer, setDappTransferScreen } = getActions();\n\n  const lang = useLang();\n\n  const handleAgree = useLastCallback(() => {\n    setDappTransferScreen({ state: TransferState.Initial });\n  });\n\n  function renderDapp() {\n    return (\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionAccount}>\n          <div className={styles.accountTitle}>{currentAccount?.title}</div>\n          <div className={styles.accountBalance}>{formatCurrency(toDecimal(toncoinBalance), TONCOIN.symbol)}</div>\n        </div>\n\n        <DappInfo\n          dapp={dapp}\n          className={styles.transactionDapp}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={modalStyles.transitionContent}>\n      {renderDapp()}\n\n      <div className={styles.descriptionContent}>\n        <span>{renderText(lang('$dapp_ledger_warning1'))}</span>\n        <span>{renderText(lang('$dapp_ledger_warning2'))}</span>\n      </div>\n\n      <div className={modalStyles.buttons}>\n        <Button className={modalStyles.button} onClick={cancelDappTransfer}>{lang('Cancel')}</Button>\n        <Button\n          isPrimary\n          isSubmit\n          className={modalStyles.button}\n          onClick={handleAgree}\n        >\n          {lang('Agree')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapp } = global.currentDappTransfer;\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    currentAccount: accounts?.[global.currentAccountId!],\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    dapp,\n  };\n})(DappLedgerWarning));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"DZJAgO1_\",\"icon\":\"DNxf1fb1\",\"interactive\":\"GU6t4snd\",\"rootStatic\":\"frL0b5SW\",\"thumbnail\":\"l7Jv2Ysl\",\"info\":\"cjX8maBi\",\"title\":\"nfp5rpIc\",\"description\":\"qBj00Hsz\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../global';\n\nimport { MediaType, type NftTransfer } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerName, getExplorerNftUrl } from '../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './NftInfo.module.scss';\n\ninterface OwnProps {\n  nft?: NftTransfer;\n  isStatic?: boolean;\n  withTonExplorer?: boolean;\n  // Currently, MediaViewer can only display NFTs that are owned by the user\n  withMediaViewer?: boolean;\n}\n\nfunction NftInfo({\n  nft, isStatic, withTonExplorer, withMediaViewer,\n}: OwnProps) {\n  const { openMediaViewer } = getActions();\n  const lang = useLang();\n\n  const tonExplorerTitle = useMemo(() => {\n    return (lang('Open on %ton_explorer_name%', {\n      ton_explorer_name: getExplorerName('ton'),\n    }) as string[]\n    ).join('');\n  }, [lang]);\n\n  const handleClickInfo = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    const url = getExplorerNftUrl(nft!.address, getGlobal().settings.isTestnet)!;\n\n    void openUrl(url);\n  };\n\n  const handleClick = useLastCallback(() => {\n    openMediaViewer({ mediaId: nft!.address, mediaType: MediaType.Nft });\n  });\n\n  if (!nft) {\n    return (\n      <div className={buildClassName(styles.root, isStatic && styles.rootStatic)}>\n        <AnimatedIconWithPreview\n          play\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.thumbnail}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n\n        <div className={styles.info}>\n          <div className={styles.title}>NFT</div>\n          <div className={styles.description}>\n            {lang('Name and collection are not available. Please check back later.')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const name = nft.name || shortenAddress(nft.address);\n\n  function renderContent() {\n    return (\n      <>\n        <img src={nft!.thumbnail} alt={name} className={styles.thumbnail} />\n\n        <div className={styles.info}>\n          <div className={styles.title}>\n            {name}\n            {\n              withTonExplorer && (\n                <i\n                  className={buildClassName(styles.icon, 'icon-tonexplorer-small')}\n                  onClick={handleClickInfo}\n                  title={tonExplorerTitle}\n                  aria-label={tonExplorerTitle}\n                  role=\"button\"\n                  tabIndex={0}\n                />\n              )\n            }\n          </div>\n          <div className={styles.description}>{nft!.collectionName}</div>\n        </div>\n      </>\n    );\n  }\n\n  if (!withMediaViewer) {\n    return (\n      <div className={buildClassName(styles.root, isStatic && styles.rootStatic)}>\n        {renderContent()}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      aria-label={lang('NFT')}\n      className={buildClassName(styles.root, styles.interactive, isStatic && styles.rootStatic)}\n      onClick={handleClick}\n    >\n      {renderContent()}\n    </div>\n  );\n}\n\nexport default memo(NftInfo);\n","import { useCallback, useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\n\nconst DEFAULT_THRESHOLD = 350;\n\nfunction useLongPress({\n  onClick, onStart, onEnd, threshold = DEFAULT_THRESHOLD,\n}: {\n  onStart?: NoneToVoidFunction;\n  onClick?: (event: React.MouseEvent | React.TouchEvent) => void;\n  onEnd?: NoneToVoidFunction;\n  threshold?: number;\n}) {\n  const isLongPressActive = useRef(false);\n  const isPressed = useRef(false);\n  const timerId = useRef<number | undefined>(undefined);\n\n  const start = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    const canProcessEvent = ('button' in e && e.button === 0) || ('touches' in e && e.touches.length > 0);\n    if (isPressed.current || !canProcessEvent) {\n      return;\n    }\n\n    isPressed.current = true;\n    timerId.current = window.setTimeout(() => {\n      onStart?.();\n      isLongPressActive.current = true;\n    }, threshold);\n  }, [onStart, threshold]);\n\n  const cancel = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (!isPressed.current) return;\n\n    if (isLongPressActive.current) {\n      onEnd?.();\n    } else {\n      onClick?.(e);\n    }\n\n    isLongPressActive.current = false;\n    isPressed.current = false;\n    window.clearTimeout(timerId.current);\n  }, [onEnd, onClick]);\n\n  useEffectOnce(() => {\n    return () => {\n      window.clearTimeout(timerId.current);\n    };\n  });\n\n  return {\n    onMouseDown: start,\n    onMouseUp: cancel,\n    onMouseLeave: cancel,\n    onTouchStart: start,\n    onTouchEnd: cancel,\n    onTouchCancel: cancel,\n  };\n}\n\nexport default useLongPress;\n","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"r5lsJ1c8\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiChain } from '../../../api/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteSavedAddressModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  address?: string;\n  chain?: ApiChain;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DeleteSavedAddressModal({\n  isOpen, address, chain, onClose,\n}: OwnProps) {\n  const { removeFromSavedAddress, showNotification } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteSavedAddress = useLastCallback(() => {\n    removeFromSavedAddress({ address: address!, chain: chain! });\n    showNotification({ message: lang('Address removed from saved'), icon: 'icon-trash' });\n    onClose();\n  });\n\n  return (\n    <Modal\n      title={lang('Delete Saved Address')}\n      isCompact\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      <p className={styles.text}>{lang('Are you sure you want to remove this address from your saved ones?')}</p>\n\n      <p className={styles.text}>{lang('You will be able to save it again via Transaction Info with this address.')}</p>\n\n      <div className={modalStyles.buttons}>\n        <Button onClick={onClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteSavedAddress} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteSavedAddressModal);\n","import React, { type ElementRef, memo, useLayoutEffect } from '../../lib/teact/teact';\nimport { toggleExtraClass } from '../../lib/teact/teact-dom';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useToggleClass from '../../hooks/useToggleClass';\n\nimport styles from './MenuBackdrop.module.scss';\n\ninterface OwnProps {\n  isMenuOpen?: boolean;\n  contentRef: ElementRef<HTMLElement>;\n  contentClassName?: string;\n}\n\nfunction MenuBackdrop({ isMenuOpen, contentRef, contentClassName }: OwnProps) {\n  const {\n    shouldRender: menuBackdropShouldRender,\n    ref: menuBackdropRef,\n  } = useShowTransition({\n    isOpen: isMenuOpen,\n    withShouldRender: true,\n  });\n\n  useLayoutEffect(() => {\n    if (!contentRef.current) return;\n\n    toggleExtraClass(contentRef.current, styles.wrapperVisible, menuBackdropShouldRender);\n    toggleExtraClass(contentRef.current, styles.wrapperHide, menuBackdropShouldRender && !isMenuOpen);\n    if (contentClassName) {\n      toggleExtraClass(contentRef.current, contentClassName, menuBackdropShouldRender);\n    }\n  }, [contentClassName, contentRef, isMenuOpen, menuBackdropShouldRender]);\n\n  useToggleClass({ className: 'with-menu-backdrop', isActive: isMenuOpen });\n\n  if (!menuBackdropShouldRender) return undefined;\n\n  return (\n    <div\n      ref={menuBackdropRef}\n      className={buildClassName(styles.backdrop, isMenuOpen && styles.visible)}\n    />\n  );\n}\n\nexport default memo(MenuBackdrop);\n","// extracted by mini-css-extract-plugin\nexport default {\"backdrop\":\"aLk6q3zd\",\"visible\":\"LULg10Df\",\"wrapperVisible\":\"qhlMQSuq\",\"wrapperHide\":\"y0lYOYF9\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"qrcsFk0p\",\"button\":\"tQGrt_Qw\",\"button_spoiler\":\"RpBIB1I4\",\"buttonSpoiler\":\"RpBIB1I4\",\"icon\":\"RdTchw5a\",\"iconCaretDown\":\"DdQbhVKr\",\"iconStar\":\"p87ao4no\",\"iconShare\":\"GuQHudIr\",\"nameInput\":\"lL2_LCB0\",\"shortAddress\":\"hofQbGX_\",\"scam\":\"nwdDECq8\",\"revealSpoiler\":\"W5z38O2d\",\"scamImage\":\"KBuV_80E\",\"chainIcon\":\"xEGdgotG\",\"meaningfulPart\":\"tKeqWu_9\",\"menuIcon\":\"iyUEV5xt\",\"dimmedPart\":\"NNrfqpvB\",\"menu\":\"E31wd_4J\",\"menuItem\":\"HbftB0iE\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { IAnchorPosition, SavedAddress } from '../../global/types';\nimport type { Layout } from '../../hooks/useMenuPosition';\nimport type { DropdownItem } from './Dropdown';\n\nimport { selectCurrentAccountState, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { stopEvent } from '../../util/domEvents';\nimport { handleUrlClick, openUrl } from '../../util/openUrl';\nimport { shareUrl } from '../../util/share';\nimport { MEANINGFUL_CHAR_LENGTH, shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerAddressUrl, getExplorerName, getHostnameFromUrl } from '../../util/url';\nimport { IS_IOS, IS_TOUCH_ENV, REM } from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLongPress from '../../hooks/useLongPress';\n\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport Button from './Button';\nimport DropdownMenu from './DropdownMenu';\nimport Input from './Input';\nimport MenuBackdrop from './MenuBackdrop';\nimport Modal from './Modal';\nimport Transition from './Transition';\n\nimport styles from './InteractiveTextField.module.scss';\nimport modalStyles from './Modal.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  chain?: ApiChain;\n  address?: string;\n  addressName?: string;\n  addressUrl?: string;\n  isScam?: boolean;\n  isTransaction?: boolean;\n  text?: string;\n  spoiler?: string;\n  spoilerRevealText?: string;\n  spoilerCallback?: NoneToVoidFunction;\n  copyNotification?: string;\n  className?: string;\n  textClassName?: string;\n  noDimming?: boolean;\n  noSavedAddress?: boolean;\n  noExplorer?: boolean;\n  withShareInMenu?: boolean;\n}\n\ninterface StateProps {\n  savedAddresses?: SavedAddress[];\n  isMultichainAccount?: boolean;\n  isTestnet?: boolean;\n}\n\ntype MenuHandler = 'copy' | 'share' | 'addressBook' | 'explorer';\n\nconst SAVED_ADDRESS_NAME_MAX_LENGTH = 255;\nconst MENU_VERTICAL_OFFSET_PX = -16;\nconst MENU_ITEM_HEIGHT_PX = 3 * REM;\nconst COMFORT_MARGIN_PX = REM;\n\nfunction InteractiveTextField({\n  chain,\n  address,\n  addressName,\n  addressUrl,\n  isScam,\n  isTransaction,\n  text = '',\n  spoiler,\n  spoilerRevealText,\n  spoilerCallback,\n  copyNotification,\n  noSavedAddress,\n  noExplorer,\n  className,\n  textClassName,\n  savedAddresses,\n  isTestnet,\n  isMultichainAccount,\n  noDimming,\n  withShareInMenu,\n}: OwnProps & StateProps) {\n  const { showNotification, addSavedAddress } = getActions();\n\n  const addressNameRef = useRef<HTMLInputElement>();\n  const contentRef = useRef<HTMLDivElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n  const [isSaveAddressModalOpen, openSaveAddressModal, closeSaveAddressModal] = useFlag();\n  const [isDeleteSavedAddressModalOpen, openDeletedSavedAddressModal, closeDeleteSavedAddressModal] = useFlag();\n  const [savedAddressName, setSavedAddressName] = useState<string | undefined>(addressName);\n  const [isConcealedWithSpoiler, , revealSpoiler] = useFlag(Boolean(spoiler));\n  const isAddressAlreadySaved = useMemo(() => {\n    return Boolean(address && chain && (savedAddresses || []).find((savedAddress) => {\n      return savedAddress.address === address && savedAddress.chain === chain;\n    }));\n  }, [address, chain, savedAddresses]);\n\n  addressUrl = addressUrl ?? (chain ? getExplorerAddressUrl(chain, address, isTestnet) : undefined);\n  const saveAddressTitle = lang(isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address');\n  const explorerTitle = lang('View on Explorer');\n  const withSavedAddresses = Boolean(!isScam && !noSavedAddress && address);\n  const withExplorer = Boolean(!noExplorer && addressUrl);\n\n  useEffect(() => {\n    if (isSaveAddressModalOpen) {\n      setSavedAddressName('');\n    }\n  }, [isSaveAddressModalOpen]);\n\n  const handleSaveAddressSubmit = useLastCallback(() => {\n    if (!savedAddressName || !address || !chain) {\n      return;\n    }\n\n    addSavedAddress({ address, chain, name: savedAddressName });\n    showNotification({ message: lang('Address was saved!'), icon: 'icon-star' });\n    closeSaveAddressModal();\n  });\n\n  useEffect(() => (\n    isSaveAddressModalOpen\n      ? captureKeyboardListeners({ onEnter: handleSaveAddressSubmit })\n      : undefined\n  ), [handleSaveAddressSubmit, isSaveAddressModalOpen]);\n\n  useFocusAfterAnimation(addressNameRef, !isSaveAddressModalOpen);\n\n  const handleCopy = useLastCallback(() => {\n    if (!copyNotification) return;\n    showNotification({ message: copyNotification, icon: 'icon-copy' });\n    void copyTextToClipboard(address || text);\n  });\n\n  const handleShare = useLastCallback(() => {\n    void shareUrl(addressUrl!, chain ? getExplorerName(chain) : undefined);\n  });\n\n  const handleTonExplorerOpen = useLastCallback(() => {\n    void openUrl(addressUrl!, { title: getExplorerName(chain!), subtitle: getHostnameFromUrl(addressUrl!) });\n  });\n\n  const {\n    isActionsMenuOpen,\n    menuAnchor,\n    menuPositionY,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  } = useDropdownMenu({\n    copy: handleCopy,\n    share: handleShare,\n    addressBook: isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal,\n    explorer: handleTonExplorerOpen,\n  }, {\n    isAddressAlreadySaved,\n    isWalletAddress: Boolean(address && chain && noSavedAddress && !isTransaction),\n    isTransaction,\n    withSavedAddresses,\n    withExplorer,\n    withShare: withShareInMenu,\n  });\n\n  const shouldUseMenu = !spoiler && IS_TOUCH_ENV && menuItems.length > 1;\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({ withPortal: true, preferredPositionY: menuPositionY }));\n\n  const longPressHandlers = useLongPress({\n    onClick: handleMenuShow,\n    onStart: handleCopy,\n  });\n\n  const handleRevealSpoiler = useLastCallback(() => {\n    revealSpoiler();\n    spoilerCallback?.();\n  });\n\n  function renderContentOrSpoiler() {\n    const content = addressName || address || text;\n\n    if (!spoiler) {\n      return renderContent(content);\n    }\n\n    const isConcealed = isConcealedWithSpoiler || !content;\n    return (\n      <Transition activeKey={isConcealed ? 1 : 0} name=\"fade\" className={styles.commentContainer}>\n        {isConcealed ? (\n          <span className={buildClassName(styles.button, styles.button_spoiler, textClassName)}>\n            <i>{spoiler}</i>{' '}\n            <span\n              onClick={handleRevealSpoiler}\n              tabIndex={0}\n              role=\"button\"\n              className={styles.revealSpoiler}\n            >\n              {spoilerRevealText}\n            </span>\n          </span>\n        ) : renderContent(content)}\n      </Transition>\n    );\n  }\n\n  function renderContent(content: string) {\n    let renderedContent: string | TeactNode = content;\n    if (!noDimming && !isTransaction && content === address && content.length > MEANINGFUL_CHAR_LENGTH * 2) {\n      const prefix = content.substring(0, MEANINGFUL_CHAR_LENGTH);\n      const suffixStart = content.length - MEANINGFUL_CHAR_LENGTH;\n      const middle = content.substring(MEANINGFUL_CHAR_LENGTH, suffixStart);\n      const suffix = content.substring(suffixStart);\n\n      renderedContent = (\n        <>\n          <span className={styles.meaningfulPart}>{prefix}</span>\n          <span className={styles.dimmedPart}>{middle}</span>\n          <span className={styles.meaningfulPart}>{suffix}</span>\n        </>\n      );\n    } else if (!noDimming && isTransaction) {\n      renderedContent = <span className={styles.dimmedPart}>{content}</span>;\n    }\n\n    return (\n      <span\n        className={buildClassName(styles.button, isScam && styles.scam, textClassName)}\n        tabIndex={0}\n        role=\"button\"\n        title={!shouldUseMenu ? lang('Copy') : undefined}\n        onClick={!shouldUseMenu ? handleCopy : undefined}\n      >\n        {isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        {isMultichainAccount && !isTransaction && (\n          <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-label={chain} />\n        )}\n        {renderedContent}\n        {Boolean(addressName) && (\n          <span className={buildClassName(styles.shortAddress, isScam && styles.scam)}>{shortenAddress(address!)}</span>\n        )}\n        {Boolean(copyNotification) && !shouldUseMenu && (\n          <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n        )}\n      </span>\n    );\n  }\n\n  function renderActions() {\n    if (shouldUseMenu) {\n      const iconClassName = buildClassName(\n        styles.icon,\n        styles.iconCaretDown,\n        'icon-caret-down',\n        isScam && styles.scam,\n      );\n\n      return (\n        <>\n          <i className={iconClassName} aria-hidden />\n          <DropdownMenu\n            ref={menuRef}\n            withPortal\n            shouldTranslateOptions\n            isOpen={isActionsMenuOpen}\n            items={menuItems}\n            menuPositionY={menuPositionY}\n            menuAnchor={menuAnchor}\n            getLayout={getLayout}\n            getMenuElement={getMenuElement}\n            getRootElement={getRootElement}\n            bubbleClassName={styles.menu}\n            buttonClassName={styles.menuItem}\n            fontIconClassName={styles.menuIcon}\n            onSelect={handleMenuItemSelect}\n            onClose={closeActionsMenu}\n          />\n        </>\n      );\n    }\n\n    return (\n      <>\n        {withSavedAddresses && (\n          <span\n            className={styles.button}\n            title={saveAddressTitle}\n            aria-label={saveAddressTitle}\n            tabIndex={0}\n            role=\"button\"\n            onClick={isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal}\n          >\n            <i\n              className={buildClassName(\n                styles.icon,\n                styles.iconStar,\n                isAddressAlreadySaved ? 'icon-star-filled' : 'icon-star',\n              )}\n              aria-hidden\n            />\n          </span>\n        )}\n\n        {isTransaction && (\n          <span\n            className={styles.button}\n            title={lang('Share Link')}\n            aria-label={lang('Share Link')}\n            onClick={handleShare}\n          >\n            <i className={buildClassName(styles.icon, styles.iconShare, 'icon-link')} aria-hidden />\n          </span>\n        )}\n        {withExplorer && (\n          <a\n            href={addressUrl}\n            className={styles.button}\n            title={explorerTitle}\n            aria-label={explorerTitle}\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            onClick={handleUrlClick}\n          >\n            <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n          </a>\n        )}\n      </>\n    );\n  }\n\n  function renderSaveAddressModal() {\n    return (\n      <Modal\n        title={lang('Save Address')}\n        isCompact\n        isOpen={isSaveAddressModalOpen}\n        onClose={closeSaveAddressModal}\n      >\n        <p>{lang('You can save this address for quick access while sending.')}</p>\n        <Input\n          ref={addressNameRef}\n          placeholder={lang('Name')}\n          onInput={setSavedAddressName}\n          value={savedAddressName}\n          maxLength={SAVED_ADDRESS_NAME_MAX_LENGTH}\n          className={styles.nameInput}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeSaveAddressModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n          <Button\n            onClick={handleSaveAddressSubmit}\n            isPrimary\n            isDisabled={!savedAddressName}\n            className={modalStyles.button}\n          >\n            {lang('Save')}\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <MenuBackdrop\n        isMenuOpen={isActionsMenuOpen && shouldUseMenu}\n        contentRef={contentRef}\n      />\n      <div\n        ref={contentRef}\n        className={buildClassName(styles.wrapper, className)}\n        {...(shouldUseMenu && !isActionsMenuOpen && {\n          ...longPressHandlers,\n          tabIndex: 0,\n          role: 'button',\n        })}\n        onContextMenu={shouldUseMenu ? stopEvent : undefined}\n      >\n        {renderContentOrSpoiler()}\n        {renderActions()}\n      </div>\n\n      {address && (\n        <>\n          {renderSaveAddressModal()}\n          <DeleteSavedAddressModal\n            isOpen={isDeleteSavedAddressModalOpen}\n            address={address}\n            chain={chain}\n            onClose={closeDeleteSavedAddressModal}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n\n    return {\n      savedAddresses: accountState?.savedAddresses,\n      isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n      isTestnet: global.settings.isTestnet,\n    };\n  },\n)(InteractiveTextField));\n\nfunction useDropdownMenu(\n  menuHandlers: Record<MenuHandler, NoneToVoidFunction>,\n  options: {\n    withSavedAddresses?: boolean;\n    withExplorer?: boolean;\n    isAddressAlreadySaved?: boolean;\n    isWalletAddress?: boolean;\n    isTransaction?: boolean;\n    withShare?: boolean;\n  },\n) {\n  const [menuPositionY, setMenuPositionY] = useState<'top' | 'bottom'>('top');\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition | undefined>();\n  const closeActionsMenu = useLastCallback(() => setMenuAnchor(undefined));\n  const isActionsMenuOpen = Boolean(menuAnchor);\n\n  const menuItems = useMemo<DropdownItem<MenuHandler>[]>(() => {\n    const {\n      isAddressAlreadySaved, isWalletAddress, isTransaction, withSavedAddresses, withExplorer, withShare,\n    } = options;\n\n    const items: DropdownItem<MenuHandler>[] = [{\n      name: withSavedAddresses || isWalletAddress\n        ? 'Copy Address'\n        : (isTransaction ? 'Copy Transaction ID' : 'Copy'),\n      fontIcon: 'copy',\n      value: 'copy',\n    }];\n\n    if (withSavedAddresses) {\n      items.push({\n        name: isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address',\n        fontIcon: isAddressAlreadySaved ? 'star-filled' : 'star',\n        value: 'addressBook',\n      });\n    }\n\n    if (isTransaction || withShare) {\n      items.push({\n        name: 'Share Link',\n        fontIcon: IS_IOS ? 'share-ios' : 'share-android',\n        value: 'share',\n      });\n    }\n\n    if (withExplorer) {\n      items.push({\n        name: 'View on Explorer',\n        fontIcon: 'tonexplorer',\n        value: 'explorer',\n      });\n    }\n\n    return items;\n  }, [options]);\n\n  const handleMenuItemSelect = useLastCallback((value: MenuHandler) => {\n    menuHandlers[value]?.();\n    closeActionsMenu();\n  });\n\n  const handleMenuShow = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    stopEvent(e);\n\n    let x: number;\n    if (e.type.startsWith('touch')) {\n      const { changedTouches, touches } = e as React.TouchEvent;\n      if (touches.length > 0) {\n        x = touches[0].clientX;\n      } else {\n        x = changedTouches[0].clientX;\n      }\n    } else {\n      x = (e as React.MouseEvent).clientX;\n    }\n    const { top, bottom } = e.currentTarget.getBoundingClientRect();\n    const menuHeight = menuItems.length * MENU_ITEM_HEIGHT_PX;\n    const screenHeight = windowSize.get().height;\n    if (bottom + menuHeight + MENU_VERTICAL_OFFSET_PX + COMFORT_MARGIN_PX >= screenHeight) {\n      setMenuPositionY('bottom');\n      setMenuAnchor({ x, y: top });\n    } else {\n      setMenuPositionY('top');\n      setMenuAnchor({ x, y: bottom + MENU_VERTICAL_OFFSET_PX });\n    }\n  });\n\n  return {\n    isActionsMenuOpen,\n    menuAnchor,\n    menuPositionY,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  };\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../api/types';\n\nimport { UNKNOWN_TOKEN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport isEmptyObject from '../../util/isEmptyObject';\n\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = {\n  label: TeactNode;\n  amountsBySlug: Record<string, bigint>;\n  nftCount?: number;\n};\n\ntype StateProps = {\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  baseCurrency?: ApiBaseCurrency;\n};\n\nfunction DappAmountField({\n  label,\n  amountsBySlug,\n  nftCount,\n  tokensBySlug,\n  baseCurrency,\n}: OwnProps & StateProps) {\n  const amountTerms: TeactNode[] = [];\n\n  if (nftCount) {\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {`${nftCount} NFT${nftCount > 1 ? 's' : ''}`}\n      </span>,\n    );\n  }\n\n  for (const [tokenSlug, amount] of Object.entries(amountsBySlug)) {\n    if (amountTerms.length) {\n      amountTerms.push(' + ');\n    }\n\n    const token = tokensBySlug[tokenSlug] ?? UNKNOWN_TOKEN;\n\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {formatCurrency(toDecimal(amount, token.decimals), token.symbol)}\n      </span>,\n    );\n  }\n\n  if (!isEmptyObject(amountsBySlug)) {\n    const totalCost = getTotalCost(amountsBySlug, tokensBySlug);\n    amountTerms.push(` (${formatCurrency(totalCost, getShortCurrencySymbol(baseCurrency))})`);\n  }\n\n  return (\n    <>\n      <span className={styles.label}>\n        {label}\n      </span>\n      <div className={buildClassName(styles.payloadField, styles.payloadField_expanded)}>\n        {amountTerms}\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    tokensBySlug: global.tokenInfo.bySlug,\n    baseCurrency: global.settings.baseCurrency,\n  };\n})(DappAmountField));\n\nfunction getTotalCost(amountsBySlug: Record<string, bigint>, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  return Object.entries(amountsBySlug).reduce((sum, [tokenSlug, amount]) => {\n    const token = tokensBySlug[tokenSlug];\n    if (!token) {\n      return sum;\n    }\n    return sum + toBig(amount, token.decimals).toNumber() * token.price;\n  }, 0);\n}\n","import React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer, ApiToken } from '../../api/types';\n\nimport renderText from '../../global/helpers/renderText';\nimport { BIGINT_PREFIX } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\nimport { DEFAULT_DECIMALS } from '../../api/chains/ton/constants';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  transaction: ApiDappTransfer;\n  tokensBySlug: Record<string, ApiToken>;\n}\n\nconst FRACTION_DIGITS = 2;\n\nfunction DappTransactionPayload({ transaction, tokensBySlug }: OwnProps) {\n  const lang = useLang();\n  const payloadRef = useRef<HTMLDivElement>();\n  const [isPayloadExpanded, expandPayload] = useFlag(false);\n\n  useEffect(() => {\n    const payloadElement = payloadRef.current;\n    if (payloadElement && payloadElement.scrollWidth <= payloadElement.clientWidth) {\n      expandPayload();\n    }\n  }, [expandPayload]);\n\n  function renderPayload() {\n    const { payload, rawPayload } = transaction;\n\n    if (!payload || isNftTransferPayload(payload) || isTokenTransferPayload(payload)) {\n      return undefined;\n    }\n\n    switch (payload.type) {\n      case 'comment':\n        return payload.comment;\n\n      case 'tokens:burn': {\n        const { slug: tokenSlug, amount } = payload;\n        const token = tokensBySlug[tokenSlug];\n        const decimals = token?.decimals ?? DEFAULT_DECIMALS;\n        const symbol = token?.symbol ?? '';\n\n        return lang('$dapp_transfer_tokens_burn', {\n          amount: formatCurrency(toDecimal(amount, decimals), symbol, FRACTION_DIGITS),\n        });\n      }\n\n      case 'dns:change-record': {\n        const { record } = payload;\n        const category = record.type !== 'unknown' ? record.type : record.key;\n\n        if (record.type === 'wallet' && record.value) {\n          return lang('$dapp_dns_set_wallet_payload', {\n            address: record.value,\n          });\n        } else if (record.type === 'wallet' && !record.value) {\n          return lang('$dapp_dns_delete_wallet_payload');\n        } else if (record.value) {\n          return lang('$dapp_dns_change_record_payload', {\n            category,\n            value: record.value,\n          });\n        } else {\n          return lang('$dapp_dns_delete_record_payload', {\n            category,\n          });\n        }\n      }\n\n      case 'token-bridge:pay-swap': {\n        return lang('$dapp_token_bridge_pay_swap_payload', {\n          swapId: payload.swapId,\n        });\n      }\n\n      case 'liquid-staking:deposit': {\n        return lang('$dapp_liquid_staking_deposit_payload');\n      }\n\n      case 'liquid-staking:vote': {\n        return lang('$dapp_liquid_staking_vote_payload', {\n          votingAddress: payload.votingAddress,\n          vote: payload.vote,\n        });\n      }\n\n      case 'single-nominator:change-validator': {\n        return lang('$dapp_single_nominator_change_validator_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'single-nominator:withdraw': {\n        return lang('$dapp_single_nominator_withdraw_payload', {\n          amount: toDecimal(payload.amount),\n        });\n      }\n\n      case 'vesting:add-whitelist': {\n        return lang('$dapp_vesting_add_whitelist_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'unknown': {\n        return rawPayload;\n      }\n\n      default:\n        return JSON.stringify(payload, undefined, 2)\n          .replace(`/\"${BIGINT_PREFIX}/g`, '\"');\n    }\n  }\n\n  function renderPayloadLabel() {\n    switch (transaction.payload?.type) {\n      case 'comment':\n        return lang('Comment');\n      case 'unknown':\n        return lang('Payload');\n      default:\n        return lang('Nested Transaction');\n    }\n  }\n\n  const payloadElement = renderPayload();\n\n  if (!payloadElement) {\n    return undefined;\n  }\n\n  return (\n    <>\n      <p className={styles.label}>{renderPayloadLabel()}</p>\n      <div\n        ref={payloadRef}\n        className={buildClassName(styles.payloadField, isPayloadExpanded && styles.payloadField_expanded)}\n      >\n        {payloadElement}\n        {!isPayloadExpanded && (\n          <div className={styles.payloadFieldExpand} onClick={expandPayload}>\n            {lang('View')}\n          </div>\n        )}\n      </div>\n      {transaction.isDangerous && (\n        <div className={styles.warningForPayload}>{renderText(lang('$hardware_payload_warning'))}</div>\n      )}\n    </>\n  );\n}\n\nexport default memo(DappTransactionPayload);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer, ApiToken } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport isEmptyObject from '../../util/isEmptyObject';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport NftInfo from '../transfer/NftInfo';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport DappAmountField from './DappAmountField';\nimport DappTransactionPayload from './DappTransactionPayload';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  transaction?: ApiDappTransfer;\n  tokensBySlug: Record<string, ApiToken>;\n  isActive: boolean;\n  onClose: NoneToVoidFunction;\n  onBack: NoneToVoidFunction;\n}\n\nfunction DappTransaction({ transaction, tokensBySlug, isActive, onClose, onBack }: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({ isActive, onBack });\n\n  return (\n    <>\n      <ModalHeader\n        title={lang('Transaction Info')}\n        onBackButtonClick={onBack}\n        onClose={onClose}\n      />\n      <div className={buildClassName(modalStyles.transitionContent, styles.transactionContent)}>\n        {transaction && (\n          <DappTransactionContent\n            transaction={transaction}\n            tokensBySlug={tokensBySlug}\n          />\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(DappTransaction);\n\nfunction DappTransactionContent({\n  transaction,\n  tokensBySlug,\n}: Required<Pick<OwnProps, 'transaction' | 'tokensBySlug'>>) {\n  const lang = useLang();\n\n  const amountBySlug = useMemo(() => {\n    const { amount: tonAmount, payload } = transaction;\n    const amountBySlug: Record<string, bigint> = {};\n\n    if (isTokenTransferPayload(payload)) {\n      amountBySlug[payload.slug] = payload.amount;\n    }\n\n    if (tonAmount !== 0n || (!isNftTransferPayload(payload) && isEmptyObject(amountBySlug))) {\n      amountBySlug[TONCOIN.slug] = tonAmount;\n    }\n\n    return amountBySlug;\n  }, [transaction]);\n\n  const feeBySlug = useMemo(\n    () => ({ [TONCOIN.slug]: transaction.networkFee }),\n    [transaction.networkFee],\n  );\n\n  return (\n    <>\n      {isNftTransferPayload(transaction.payload) && <NftInfo nft={transaction.payload.nft} />}\n      <p className={styles.label}>{lang('Receiving Address')}</p>\n      <InteractiveTextField\n        chain={TONCOIN.chain}\n        address={transaction.displayedToAddress}\n        isScam={transaction.isScam}\n        className={buildClassName(styles.dataField, styles.receivingAddress)}\n        copyNotification={lang('Address was copied!')}\n      />\n      {!isEmptyObject(amountBySlug) && (\n        <DappAmountField\n          label={isNftTransferPayload(transaction.payload) ? lang('Additional Amount Sent') : lang('Amount')}\n          amountsBySlug={amountBySlug}\n        />\n      )}\n      <DappAmountField label={lang('Fee')} amountsBySlug={feeBySlug} />\n      <DappTransactionPayload transaction={transaction} tokensBySlug={tokensBySlug} />\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"term\":\"KQKXQCYl\",\"tokenIcon\":\"hrsxYQfo\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiToken } from '../../api/types';\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\n\nimport { STARS_SYMBOL, TONCOIN, TRX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport styles from './Fee.module.scss';\n\nconst TERM_SEPARATOR = ' + ';\nconst PRECISION_PREFIX: Record<FeePrecision, string> = {\n  exact: '',\n  approximate: '~\\u202F',\n  lessThan: '<\\u202F',\n};\nconst STARS_TOKEN: FeeToken = {\n  slug: '__stars__',\n  symbol: STARS_SYMBOL,\n  decimals: 0,\n};\nconst UNKNOWN_TOKEN: FeeToken = {\n  slug: '__unknown__',\n  symbol: '',\n  decimals: 0,\n};\nconst TOKEN_ICONS: Record<string, string | undefined> = {\n  [TONCOIN.slug]: 'icon-chain-ton',\n  [TRX.slug]: 'icon-chain-tron',\n};\n\nexport type FeeToken = Pick<ApiToken, 'slug' | 'symbol' | 'decimals'>;\n\ntype FeeListTerm = {\n  tokenType: keyof FeeTerms;\n  amount: FeeValue;\n};\n\nexport type OwnProps = {\n  terms: FeeTerms;\n  /** The token acting as the transferred token in the `terms` object */\n  token: FeeToken;\n  /** Affects the sign indicating the fee precision and standing before the terms. */\n  precision: FeePrecision;\n  shouldPreferIcons?: boolean;\n  termClassName?: string;\n  symbolClassName?: string;\n};\n\n/**\n * Formats a complex fee (containing multiple terms) into a human-readable span\n */\nfunction Fee({\n  terms,\n  token,\n  precision,\n  shouldPreferIcons,\n  termClassName,\n  symbolClassName,\n}: OwnProps) {\n  const nativeToken = findChainConfig(getChainBySlug(token.slug))?.nativeToken ?? UNKNOWN_TOKEN;\n  const content: TeactNode[] = [PRECISION_PREFIX[precision]];\n\n  convertTermsObjectToList(terms).forEach(({ tokenType, amount }, index) => {\n    if (index > 0) {\n      content.push(TERM_SEPARATOR);\n    }\n\n    const currentToken = tokenType === 'stars' ? STARS_TOKEN : tokenType === 'native' ? nativeToken : token;\n    const icon = shouldPreferIcons ? TOKEN_ICONS[currentToken.slug] : undefined;\n\n    if (typeof amount === 'bigint') {\n      amount = toDecimal(amount, currentToken.decimals);\n    }\n\n    let symbolNode = icon\n      ? <i className={buildClassName(icon, styles.tokenIcon)} aria-label={currentToken.symbol} />\n      : currentToken.symbol;\n    if (symbolClassName) {\n      symbolNode = <span className={symbolClassName}>{symbolNode}</span>;\n    }\n\n    content.push(\n      <span className={buildClassName(styles.term, termClassName)}>\n        {formatCurrency(amount, '', undefined, true)}\n        {symbolNode}\n      </span>,\n    );\n  });\n\n  return content;\n}\n\nexport default memo(Fee);\n\nfunction convertTermsObjectToList(terms: FeeTerms) {\n  const termList: FeeListTerm[] = [];\n  let firstDefinedTerm: FeeListTerm | undefined;\n\n  for (const [tokenType, amount] of Object.entries(terms) as [keyof FeeTerms, bigint | undefined][]) {\n    if (amount === undefined) {\n      continue;\n    }\n\n    const term = { tokenType, amount };\n    firstDefinedTerm ||= term;\n\n    if (Number(amount)) {\n      termList.push(term);\n    }\n  }\n\n  // Keeping at least 1 term for better UX\n  if (termList.length === 0) {\n    termList.push(firstDefinedTerm ?? { tokenType: 'native', amount: 0 });\n  }\n\n  return termList;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { OwnProps as FeeProps } from './Fee';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Fee from './Fee';\nimport Transition from './Transition';\n\nimport styles from './FeeLine.module.scss';\n\n/**\n * The component will be rendered empty unless all the required options from `FeeProps` are provided.\n * After that it will fade in.\n */\ntype OwnProps = Partial<Pick<FeeProps, 'terms' | 'token'>> & Pick<FeeProps, 'precision'> & {\n  className?: string;\n  /** Whether the component is rendered on a landscape layout (with a lighter background) */\n  isStatic?: boolean;\n  /** If true, the \"Details\" button will be shown even when no fee can be displayed. */\n  keepDetailsButtonWithoutFee?: boolean;\n  /** If undefined, the details button is not shown */\n  onDetailsClick?(): void;\n};\n\nfunction FeeLine({\n  className,\n  isStatic,\n  terms,\n  token,\n  precision,\n  keepDetailsButtonWithoutFee,\n  onDetailsClick,\n}: OwnProps) {\n  const lang = useLang();\n  let content: TeactNode | undefined;\n\n  if (terms && token) {\n    const langKey = precision === 'exact' ? '$fee_value_with_colon' : '$fee_value';\n    content = lang(langKey, {\n      fee: <Fee terms={terms} token={token} precision={precision} />,\n    });\n  }\n\n  return (\n    <FeeLineContainer\n      className={className}\n      isStatic={isStatic}\n      onDetailsClick={content || keepDetailsButtonWithoutFee ? onDetailsClick : undefined}\n      transitionKey={content ? 1 : 0}\n    >\n      {content}\n    </FeeLineContainer>\n  );\n}\n\nexport default memo(FeeLine);\n\ntype ContainerProps = Pick<OwnProps, 'className' | 'isStatic' | 'onDetailsClick'> & {\n  children?: TeactNode;\n  transitionKey?: number;\n};\n\n/**\n * Use this component when you want to show a content that looks like `FeeLine`, but is not `FeeLine`.\n */\nexport function FeeLineContainer({\n  className,\n  isStatic,\n  onDetailsClick,\n  children,\n  transitionKey = 0,\n}: ContainerProps) {\n  const lang = useLang();\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={transitionKey + (onDetailsClick ? 0x10000 : 0)}\n      className={buildClassName(styles.container, className, isStatic && styles.static)}\n    >\n      {children}\n      {Boolean(children) && onDetailsClick && '  '}\n      {onDetailsClick && (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.details}\n          onClick={() => onDetailsClick()}\n        >\n          {lang('Details')}\n          <i className={buildClassName('icon-chevron-right', styles.detailsIcon)} aria-hidden />\n        </span>\n      )}\n    </Transition>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"fJgsdA7d\",\"static\":\"swvIvbGd\",\"details\":\"K7iB61lh\",\"detailsIcon\":\"WDhuwtt6\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  ApiBaseCurrency,\n  ApiDapp,\n  ApiDappTransfer,\n  ApiEmulationResult,\n  ApiNft,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../global/types';\n\nimport { TONCOIN, UNKNOWN_TOKEN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccountStakingStatesBySlug,\n  selectCurrentAccountState,\n  selectCurrentDappTransferTotals,\n  selectDappTransferInsufficientTokens,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport isEmptyObject from '../../util/isEmptyObject';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\n\nimport Activity from '../main/sections/Content/Activity';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport DappAmountField from './DappAmountField';\nimport DappInfoWithAccount from './DappInfoWithAccount';\nimport DappSkeletonWithContent, { type DappSkeletonRow } from './DappSkeletonWithContent';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  transactions?: ApiDappTransfer[];\n  totalAmountsBySlug: Record<string, bigint>;\n  emulation?: Pick<ApiEmulationResult, 'activities' | 'realFee'>;\n  isScam: boolean;\n  isDangerous: boolean;\n  nftCount: number;\n  dapp?: ApiDapp;\n  isLoading?: boolean;\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug?: Record<string, ApiSwapAsset>;\n  theme: Theme;\n  baseCurrency?: ApiBaseCurrency;\n  nftsByAddress?: Record<string, ApiNft>;\n  currentAccountId: string;\n  stakingStateBySlug: Record<string, ApiStakingState>;\n  savedAddresses?: SavedAddress[];\n  accounts?: Record<string, Account>;\n  insufficientTokens?: string;\n  balancesBySlug?: Record<string, bigint>;\n}\n\ninterface SortedDappTransfer extends ApiDappTransfer {\n  index: number;\n  sortingCost: number;\n}\n\nconst NFT_FAKE_COST_USD = 1_000_000_000;\n\nconst skeletonRows: DappSkeletonRow[] = [\n  { isLarge: false, hasFee: false },\n  { isLarge: true, hasFee: true },\n];\n\nfunction DappTransferInitial({\n  transactions,\n  totalAmountsBySlug,\n  emulation,\n  isScam,\n  isDangerous,\n  nftCount,\n  dapp,\n  isLoading,\n  tokensBySlug,\n  swapTokensBySlug,\n  theme,\n  baseCurrency,\n  nftsByAddress,\n  currentAccountId,\n  stakingStateBySlug,\n  savedAddresses,\n  accounts,\n  insufficientTokens,\n  balancesBySlug,\n  onClose,\n}: OwnProps & StateProps) {\n  const { closeDappTransfer, showDappTransferTransaction, submitDappTransferConfirm } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const renderingTransactions = useCurrentOrPrev(transactions, true);\n  const sortedTransactions = useMemo(\n    () => sortTransactions(renderingTransactions, tokensBySlug),\n    [renderingTransactions, tokensBySlug],\n  );\n  const isDappLoading = dapp === undefined;\n  const hasSufficientBalance = !insufficientTokens;\n\n  const tokenToDisplay = useMemo(() => (\n    calculateTokenToDisplay(totalAmountsBySlug, balancesBySlug, tokensBySlug)\n  ), [totalAmountsBySlug, balancesBySlug, tokensBySlug]);\n\n  function renderContent() {\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <DappInfoWithAccount\n          dapp={dapp}\n          customTokenBalance={tokenToDisplay.balance}\n          customTokenSymbol={tokenToDisplay.symbol}\n          customTokenDecimals={tokenToDisplay.decimals}\n        />\n        {isDangerous && (\n          <div className={buildClassName(styles.transferWarning, styles.warningForPayload)}>\n            {renderText(lang('$hardware_payload_warning'))}\n          </div>\n        )}\n        {renderTransactions()}\n        {renderEmulation()}\n\n        <div className={styles.footer}>\n          {!hasSufficientBalance && (\n            <div className={styles.balanceError}>\n              {lang('Not Enough %symbol%', { symbol: insufficientTokens })}\n            </div>\n          )}\n          <div className={buildClassName(modalStyles.buttons, styles.transferButtons)}>\n            <Button className={modalStyles.button} onClick={onClose}>{lang('Cancel')}</Button>\n            <Button\n              isPrimary\n              isSubmit\n              isLoading={isLoading}\n              isDisabled={isScam || !hasSufficientBalance}\n              className={modalStyles.button}\n              onClick={!isScam && hasSufficientBalance ? submitDappTransferConfirm : undefined}\n            >\n              {lang('Send')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderTransactionRow(transaction: SortedDappTransfer) {\n    const { payload } = transaction;\n\n    const amountText: string[] = [];\n    if (isNftTransferPayload(payload)) {\n      amountText.push('1 NFT');\n    } else if (isTokenTransferPayload(payload)) {\n      const { slug: tokenSlug, amount } = payload;\n      const { decimals, symbol } = tokensBySlug[tokenSlug] ?? UNKNOWN_TOKEN;\n      amountText.push(formatCurrency(toDecimal(amount, decimals), symbol));\n    }\n\n    amountText.push(formatCurrency(toDecimal(transaction.amount + transaction.networkFee), TONCOIN.symbol));\n\n    return (\n      <div\n        key={transaction.index}\n        className={styles.transactionRow}\n        onClick={() => showDappTransferTransaction({ transactionIdx: transaction.index })}\n      >\n        {transaction.isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        <span className={buildClassName(styles.transactionRowAmount, transaction.isScam && styles.scam)}>\n          {amountText.join(' + ')}\n        </span>\n        {' '}\n        <span className={buildClassName(styles.transactionRowAddress, transaction.isScam && styles.scam)}>\n          {lang('$transaction_to', {\n            address: shortenAddress(transaction.displayedToAddress),\n          })}\n        </span>\n        <i className={buildClassName(styles.transactionRowChevron, 'icon-chevron-right')} aria-hidden />\n      </div>\n    );\n  }\n\n  function renderTransactions() {\n    if (!renderingTransactions) {\n      return undefined;\n    }\n\n    const hasAmount = nftCount > 0 || !isEmptyObject(totalAmountsBySlug);\n\n    return (\n      <>\n        <p className={styles.label}>{lang('$many_transactions', renderingTransactions.length, 'i')}</p>\n        <div className={styles.transactionList}>\n          {sortedTransactions?.map(renderTransactionRow)}\n        </div>\n        {renderingTransactions.length > 1 && hasAmount && (\n          <DappAmountField label={lang('Total Amount')} amountsBySlug={totalAmountsBySlug} nftCount={nftCount} />\n        )}\n      </>\n    );\n  }\n\n  function renderEmulation() {\n    if (!emulation?.activities?.length) {\n      return undefined;\n    }\n\n    const { activities, realFee } = emulation;\n\n    return (\n      <>\n        <p className={styles.label}>\n          {lang('Preview')}\n          {' '}\n          <IconWithTooltip message={renderText(lang('$preview_not_guaranteed'))} type=\"warning\" size=\"small\" />\n        </p>\n        <div className={buildClassName(styles.transactionList, styles.emulation)}>\n          {activities.map((activity, index) => (\n            <Activity\n              key={activity.id}\n              activity={activity}\n              isFuture\n              isLast={index === activities.length - 1}\n              tokensBySlug={tokensBySlug}\n              swapTokensBySlug={swapTokensBySlug}\n              appTheme={appTheme}\n              nftsByAddress={nftsByAddress}\n              currentAccountId={currentAccountId}\n              stakingStateBySlug={stakingStateBySlug}\n              savedAddresses={savedAddresses}\n              accounts={accounts}\n              baseCurrency={baseCurrency}\n            />\n          ))}\n        </div>\n        {realFee !== 0n && (\n          <FeeLine\n            terms={{ native: realFee }}\n            token={TONCOIN}\n            precision=\"approximate\"\n            className={styles.emulationFee}\n          />\n        )}\n      </>\n    );\n  }\n\n  return (\n    <Transition name=\"semiFade\" activeKey={isDappLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n      <ModalHeader\n        title={lang(isNftTransferPayload(renderingTransactions?.[0]?.payload) ? 'Send NFT' : 'Send Transaction')}\n        onClose={closeDappTransfer}\n      />\n      {isDappLoading ? <DappSkeletonWithContent rows={skeletonRows} /> : renderContent()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isLoading, dapp, transactions, emulation } = global.currentDappTransfer;\n\n  const accountId = global.currentAccountId!;\n  const accountState = selectCurrentAccountState(global);\n  const accounts = selectNetworkAccounts(global);\n\n  const {\n    amountsBySlug: totalAmountsBySlug,\n    isScam,\n    isDangerous,\n    nftCount,\n  } = selectCurrentDappTransferTotals(global);\n\n  return {\n    transactions,\n    totalAmountsBySlug,\n    emulation,\n    isScam,\n    isDangerous,\n    nftCount,\n    dapp,\n    isLoading,\n    tokensBySlug: global.tokenInfo.bySlug,\n    swapTokensBySlug: global.swapTokenInfo?.bySlug,\n    theme: global.settings.theme,\n    baseCurrency: global.settings.baseCurrency,\n    nftsByAddress: accountState?.nfts?.byAddress,\n    currentAccountId: accountId,\n    stakingStateBySlug: selectAccountStakingStatesBySlug(global, accountId),\n    savedAddresses: accountState?.savedAddresses,\n    accounts,\n    insufficientTokens: selectDappTransferInsufficientTokens(global),\n    balancesBySlug: accountState?.balances?.bySlug,\n  };\n})(DappTransferInitial));\n\ninterface TokenDisplayInfo {\n  balance: bigint;\n  symbol: string;\n  decimals: number;\n}\n\nfunction calculateTokenToDisplay(\n  totalAmountsBySlug?: Record<string, bigint>,\n  balancesBySlug?: Record<string, bigint>,\n  tokensBySlug?: Record<string, ApiTokenWithPrice>,\n): TokenDisplayInfo {\n  // Default to TON if no data\n  if (!totalAmountsBySlug || !balancesBySlug || !tokensBySlug) {\n    return {\n      balance: balancesBySlug?.[TONCOIN.slug] ?? 0n,\n      symbol: TONCOIN.symbol,\n      decimals: TONCOIN.decimals,\n    };\n  }\n\n  const insufficientTokens: Array<{\n    slug: string;\n    insufficientUsdValue: number;\n    balance: bigint;\n    symbol: string;\n    decimals: number;\n  }> = [];\n\n  const sufficientTokens: Array<{\n    slug: string;\n    transactionUsdValue: number;\n    balance: bigint;\n    symbol: string;\n    decimals: number;\n  }> = [];\n\n  // Analyze each token in the transaction\n  for (const [slug, requiredAmount] of Object.entries(totalAmountsBySlug)) {\n    const availableBalance = balancesBySlug[slug] ?? 0n;\n    const token = tokensBySlug[slug];\n\n    if (!token) continue;\n\n    const { symbol, decimals, priceUsd = 0 } = token;\n\n    if (availableBalance < requiredAmount) {\n      // Token is insufficient\n      const insufficientAmount = requiredAmount - availableBalance;\n      const insufficientUsdValue = toBig(insufficientAmount, decimals).toNumber() * priceUsd;\n\n      insufficientTokens.push({\n        slug,\n        insufficientUsdValue,\n        balance: availableBalance,\n        symbol,\n        decimals,\n      });\n    } else {\n      // Token is sufficient\n      const transactionUsdValue = toBig(requiredAmount, decimals).toNumber() * priceUsd;\n\n      sufficientTokens.push({\n        slug,\n        transactionUsdValue,\n        balance: availableBalance,\n        symbol,\n        decimals,\n      });\n    }\n  }\n\n  // If some tokens are insufficient, show the one with maximum insufficient USD value\n  if (insufficientTokens.length > 0) {\n    const maxInsufficientToken = insufficientTokens.reduce((max, current) =>\n      current.insufficientUsdValue > max.insufficientUsdValue ? current : max,\n    );\n\n    return {\n      balance: maxInsufficientToken.balance,\n      symbol: maxInsufficientToken.symbol,\n      decimals: maxInsufficientToken.decimals,\n    };\n  }\n\n  // If all tokens are sufficient, show the one with maximum transaction USD value\n  if (sufficientTokens.length > 0) {\n    const maxTransactionToken = sufficientTokens.reduce((max, current) =>\n      current.transactionUsdValue > max.transactionUsdValue ? current : max,\n    );\n\n    return {\n      balance: maxTransactionToken.balance,\n      symbol: maxTransactionToken.symbol,\n      decimals: maxTransactionToken.decimals,\n    };\n  }\n\n  // Fallback to TON\n  return {\n    balance: balancesBySlug[TONCOIN.slug] ?? 0n,\n    symbol: TONCOIN.symbol,\n    decimals: TONCOIN.decimals,\n  };\n}\n\nfunction sortTransactions(\n  transactions: readonly ApiDappTransfer[] | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice>,\n) {\n  if (!transactions) {\n    return transactions;\n  }\n\n  return transactions\n    .map((transaction, index): SortedDappTransfer => ({\n      ...transaction,\n      index,\n      sortingCost: getTransactionCostForSorting(transaction, tokensBySlug),\n    }))\n    .sort((transaction0, transaction1) => transaction1.sortingCost - transaction0.sortingCost);\n}\n\nfunction getTransactionCostForSorting(transaction: ApiDappTransfer, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  const tonAmount = toBig(transaction.amount + transaction.networkFee, TONCOIN.decimals).toNumber();\n  let cost = tokensBySlug[TONCOIN.slug].priceUsd * tonAmount;\n\n  if (isTokenTransferPayload(transaction.payload)) {\n    const { amount, slug } = transaction.payload;\n    const token = tokensBySlug[slug];\n    if (token) {\n      cost += token.priceUsd * toBig(amount, token.decimals).toNumber();\n    }\n  } else if (isNftTransferPayload(transaction.payload)) {\n    // Simple way to display NFT at top of list\n    cost += NFT_FAKE_COST_USD;\n  }\n\n  return cost;\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiActivity, ApiDappTransfer, ApiToken } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { selectCurrentDappTransferTotals } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport { getActivityHeight } from '../main/sections/Content/Activity';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport DappLedgerWarning from './DappLedgerWarning';\nimport DappTransaction from './DappTransaction';\nimport DappTransferComplete from './DappTransferComplete';\nimport DappTransferInitial from './DappTransferInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentDappTransfer: GlobalState['currentDappTransfer'];\n  tokensBySlug: Record<string, ApiToken>;\n  isMediaViewerOpen?: boolean;\n  isDangerous: boolean;\n}\n\nfunction DappTransferModal({\n  currentDappTransfer: {\n    isLoading,\n    viewTransactionOnIdx,\n    state,\n    transactions,\n    emulation,\n    error,\n  },\n  tokensBySlug,\n  isMediaViewerOpen,\n  isDangerous,\n}: StateProps) {\n  const {\n    setDappTransferScreen,\n    clearDappTransferError,\n    submitDappTransfer,\n    closeDappTransfer,\n    cancelDappTransfer,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== TransferState.None;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const needsExtraHeight = useMemo(\n    () => {\n      // Apply the extra height only on mobile apps.\n      // On the web, the height is controlled by the CSS.\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      if (IS_CAPACITOR && renderingKey === TransferState.Password) {\n        return true;\n      }\n\n      // Do not apply the extra height if the transfer is complete, otherwise the Close button will be hidden on the iOS device\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      if (renderingKey === TransferState.Complete) {\n        return false;\n      }\n\n      return shouldForceFullScreen(transactions, emulation?.activities, isDangerous);\n    },\n    [transactions, emulation, isDangerous, renderingKey],\n  );\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm || state === TransferState.Password) {\n      setDappTransferScreen({ state: TransferState.Initial });\n    }\n  });\n\n  const handleTransferPasswordSubmit = useLastCallback((password: string) => {\n    submitDappTransfer({ password });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitDappTransfer();\n  });\n\n  const handleResetTransfer = useLastCallback(() => {\n    cancelDappTransfer();\n    updateNextKey();\n  });\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Action')} onClose={closeDappTransfer} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          submitLabel={lang('Send')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferPasswordSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearDappTransferError}\n        />\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: TransferState) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return <DappTransferInitial onClose={closeDappTransfer} />;\n\n      case TransferState.WarningHardware:\n        return (\n          <>\n            <ModalHeader title={lang('Send Transaction')} onClose={closeDappTransfer} />\n            <DappLedgerWarning />\n          </>\n        );\n\n      case TransferState.Confirm:\n        return (\n          <DappTransaction\n            transaction={viewTransactionOnIdx !== undefined ? transactions?.[viewTransactionOnIdx] : undefined}\n            tokensBySlug={tokensBySlug}\n            isActive={isActive}\n            onBack={handleBackClick}\n            onClose={closeDappTransfer}\n          />\n        );\n\n      case TransferState.Password:\n        return renderPassword(isActive);\n\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={closeDappTransfer}\n          />\n        );\n\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onTryAgain={handleLedgerConnect}\n            onClose={closeDappTransfer}\n          />\n        );\n\n      case TransferState.Complete:\n        return (\n          <DappTransferComplete\n            isActive={isActive}\n            onClose={closeDappTransfer}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={buildClassName(styles.modalDialog, needsExtraHeight && styles.modalDialogExtraHeight)}\n      nativeBottomSheetKey=\"dapp-transfer\"\n      forceFullNative={needsExtraHeight}\n      onClose={closeDappTransfer}\n      onCloseAnimationEnd={handleResetTransfer}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isDangerous } = selectCurrentDappTransferTotals(global);\n\n  return {\n    currentDappTransfer: global.currentDappTransfer,\n    tokensBySlug: global.tokenInfo.bySlug,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isDangerous,\n  };\n})(DappTransferModal));\n\nfunction shouldForceFullScreen(\n  transactions?: ApiDappTransfer[],\n  activities?: ApiActivity[],\n  isDangerous?: boolean,\n) {\n  let height = 0; // rem\n\n  if (transactions) {\n    height += transactions.length * 3;\n    if (transactions.length > 1) height += 5.125; // The Total Amount field\n  }\n\n  if (activities) {\n    for (const activity of activities) {\n      height += getActivityHeight(activity, true);\n    }\n  }\n\n  if (isDangerous) {\n    height += 4.6;\n  }\n\n  return height >= 14.5; // The actual available height is 15.125. Leaving a margin just in case.\n}\n","import { Dialog } from '@capacitor/dialog';\nimport React, { type FC, memo, useEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { DialogAction, DialogType } from '../global/types';\n\nimport { IS_CAPACITOR } from '../config';\nimport renderText from '../global/helpers/renderText';\nimport { pick } from '../util/iteratees';\n\nimport useFlag from '../hooks/useFlag';\nimport useLang from '../hooks/useLang';\nimport useLastCallback from '../hooks/useLastCallback';\n\nimport Button from './ui/Button';\nimport Modal from './ui/Modal';\n\nimport modalStyles from './ui/Modal.module.scss';\n\ntype StateProps = {\n  dialogs: DialogType[];\n};\n\nconst Dialogs: FC<StateProps> = ({ dialogs }) => {\n  const { dismissDialog } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  const dialog = dialogs[dialogs.length - 1];\n  const title = lang(dialog?.title ?? 'Something went wrong');\n\n  const buttons = dialog?.buttons ?? { confirm: {} };\n  const hasCancel = Boolean(dialog?.buttons?.cancel);\n  const confirmTitle = lang(buttons.confirm.title ?? 'OK');\n  const cancelTitle = hasCancel ? lang(buttons.cancel?.title ?? 'Cancel') : undefined;\n  const isNativeDialog = IS_CAPACITOR && typeof dialog?.message === 'string';\n\n  const handleAction = useLastCallback(() => {\n    if (buttons.confirm.action) {\n      void executeDialogAction(buttons.confirm.action);\n    }\n\n    if (isNativeDialog) {\n      dismissDialog();\n    } else {\n      closeModal();\n    }\n  });\n\n  useEffect(() => {\n    if (!dialog) {\n      closeModal();\n      return;\n    }\n\n    if (isNativeDialog) {\n      if (hasCancel) {\n        void Dialog.confirm({\n          title,\n          message: lang(dialog.message as string),\n          okButtonTitle: confirmTitle,\n          cancelButtonTitle: cancelTitle,\n        }).then((result) => {\n          if (result.value) {\n            handleAction();\n          } else {\n            dismissDialog();\n          }\n        });\n      } else {\n        void Dialog.alert({\n          title,\n          message: lang(dialog.message as string),\n          buttonTitle: confirmTitle,\n        }).then(handleAction);\n      }\n    } else {\n      openModal();\n    }\n  }, [cancelTitle, confirmTitle, dialog, hasCancel, isNativeDialog, lang, title]);\n\n  if (!dialog) {\n    return undefined;\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      isCompact\n      title={title}\n      noBackdropClose={dialog.noBackdropClose}\n      isInAppLock={dialog.isInAppLock}\n      onClose={closeModal}\n      onCloseAnimationEnd={dismissDialog}\n    >\n      <div>\n        {\n          typeof dialog.message === 'string'\n            ? renderText(lang(dialog.message, dialog.entities))\n            : dialog.message\n        }\n      </div>\n      <div className={modalStyles.footerButtons}>\n        {hasCancel && <Button onClick={closeModal}>{cancelTitle}</Button>}\n        <Button\n          isPrimary\n          isDestructive={buttons.confirm.isDestructive}\n          onClick={handleAction}\n        >\n          {confirmTitle}\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['dialogs']),\n)(Dialogs));\n\nasync function executeDialogAction(action: DialogAction) {\n  switch (action) {\n    case 'openBluetoothSettings': {\n      const { openSystemBluetoothSettings } = await import('../util/ledger');\n\n      openSystemBluetoothSettings();\n      break;\n    }\n\n    case 'signOutAll': {\n      const { signOut } = getActions();\n\n      signOut({ level: 'all' });\n      break;\n    }\n  }\n}\n","import React, {\n  memo, useEffect, useState,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { ElectronEvent } from '../../electron/types';\n\nimport { APP_NAME, PRODUCTION_URL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateApp.module.scss';\n\ntype StateProps = {\n  isAppUpdateAvailable?: boolean;\n};\n\nfunction UpdateApp({ isAppUpdateAvailable }: StateProps) {\n  const lang = useLang();\n\n  const [isElectronUpdateDownloaded, setIsElectronUpdateDownloaded] = useState(false);\n  const [isElectronAutoUpdateEnabled, setIsElectronAutoUpdateEnabled] = useState(false);\n  const [isDisabled, disable] = useFlag(false);\n\n  useEffect(() => {\n    const removeUpdateErrorListener = window.electron?.on(ElectronEvent.UPDATE_ERROR, () => {\n      setIsElectronUpdateDownloaded(false);\n    });\n    const removeUpdateDownloadedListener = window.electron?.on(ElectronEvent.UPDATE_DOWNLOADED, () => {\n      setIsElectronUpdateDownloaded(true);\n    });\n\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsElectronAutoUpdateEnabled);\n\n    return () => {\n      removeUpdateErrorListener?.();\n      removeUpdateDownloadedListener?.();\n    };\n  }, []);\n\n  const handleClick = useLastCallback(async () => {\n    if (isDisabled) {\n      return;\n    }\n\n    if (!isElectronAutoUpdateEnabled) {\n      window.open(`${PRODUCTION_URL}/get`, '_blank', 'noopener');\n      return;\n    }\n\n    if (isElectronUpdateDownloaded) {\n      disable();\n      await window.electron?.installUpdate();\n      return;\n    }\n\n    if (isAppUpdateAvailable) {\n      window.location.reload();\n    }\n  });\n\n  const { ref, shouldRender } = useShowTransition({\n    isOpen: isElectronUpdateDownloaded || isAppUpdateAvailable,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) {\n    return null; // eslint-disable-line no-null/no-null\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(\n        styles.container,\n        isDisabled && styles.disabled,\n      )}\n      onClick={handleClick}\n    >\n      <div className={styles.iconWrapper}>\n        <i className={buildClassName('icon-update', styles.icon)} />\n      </div>\n\n      <div className={styles.text}>{lang('Update %app_name%', { app_name: APP_NAME })}</div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isAppUpdateAvailable } = global;\n\n  return { isAppUpdateAvailable };\n})(UpdateApp));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"m3oYVPLL\",\"icon\":\"O2khIMww\",\"disabled\":\"Hz_3Tm4Q\",\"icon-wrapper\":\"cAAhDZj9\",\"iconWrapper\":\"cAAhDZj9\",\"text\":\"vvQKF4lC\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"o0YiMAP8\",\"wrapper\":\"B1_vmNNd\",\"applicationName\":\"F4gGoZNE\",\"buttons\":\"oUKLixL4\",\"windowsButtons\":\"hKXvGlWy\",\"windowsButton\":\"Pgysk0gP\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useRef } from '../../lib/teact/teact';\n\nimport { APP_NAME } from '../../config';\nimport { IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useElectronDrag from '../../hooks/useElectronDrag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport UpdateApp from './UpdateApp';\n\nimport styles from './ElectronHeader.module.scss';\n\ntype Props = {\n  children?: TeactNode;\n  withTitle?: boolean;\n};\n\nexport const ELECTRON_HEADER_HEIGHT_REM = 3;\n\nfunction ElectronHeader({ children, withTitle }: Props) {\n  const containerRef = useRef<HTMLDivElement>();\n  useElectronDrag(containerRef);\n\n  const handleMinimize = useLastCallback(() => {\n    window.electron?.minimize();\n  });\n\n  const handleMaximize = useLastCallback(async () => {\n    if (await window.electron?.getIsMaximized()) {\n      window.electron?.unmaximize();\n    } else {\n      window.electron?.maximize();\n    }\n  });\n\n  const handleClose = useLastCallback(() => {\n    window.electron?.close();\n  });\n\n  const handleDoubleClick = useLastCallback(() => {\n    void window.electron?.handleDoubleClick();\n  });\n\n  if (IS_WINDOWS) {\n    return (\n      <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n        <div className={styles.wrapper}>\n          {Boolean(children) && <div className={styles.buttons}>{children}</div>}\n\n          {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n        </div>\n\n        <div className={styles.windowsButtons}>\n          <UpdateApp />\n\n          <div className={styles.windowsButton} onClick={handleMinimize}>\n            <i className=\"icon-windows-minimize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleMaximize}>\n            <i className=\"icon-windows-maximize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleClose}>\n            <i className=\"icon-windows-close\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n      <div className={styles.wrapper}>\n        {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n\n        <div className={styles.buttons}>\n          <UpdateApp />\n\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(ElectronHeader);\n","import { type ElementRef, useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_ELECTRON, IS_MAC_OS } from '../util/windowEnvironment';\n\nconst DRAG_DISTANCE_THRESHOLD = 5;\n\nconst useElectronDrag = (ref: ElementRef<HTMLDivElement>) => {\n  const isDragging = useRef(false);\n\n  const x = useRef(window.screenX);\n  const y = useRef(window.screenY);\n  const distance = useRef(0);\n\n  useEffect(() => {\n    const element = ref.current;\n    if (!element || !(IS_ELECTRON && IS_MAC_OS)) return undefined;\n\n    const handleClick = (event: MouseEvent) => {\n      distance.current = 0;\n\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n        isDragging.current = false;\n      }\n    };\n\n    const handleMousedown = (event: MouseEvent) => {\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    };\n\n    const handleDrag = (event: MouseEvent) => {\n      if (event.buttons === 1) {\n        distance.current += Math.sqrt((x.current - window.screenX) ** 2 + (y.current - window.screenY) ** 2);\n\n        x.current = window.screenX;\n        y.current = window.screenY;\n\n        if (!isDragging.current && distance.current > DRAG_DISTANCE_THRESHOLD) {\n          isDragging.current = true;\n        }\n      }\n    };\n\n    const handleDoubleClick = (event: MouseEvent) => {\n      if (event.currentTarget === event.target) {\n        void window.electron?.handleDoubleClick();\n      }\n    };\n\n    element.addEventListener('click', handleClick);\n    element.addEventListener('mousedown', handleMousedown);\n    element.addEventListener('mousemove', handleDrag);\n    element.addEventListener('dblclick', handleDoubleClick);\n\n    return () => {\n      element.removeEventListener('click', handleClick);\n      element.removeEventListener('mouseup', handleMousedown);\n      element.removeEventListener('mousemove', handleDrag);\n      element.removeEventListener('dblclick', handleDoubleClick);\n    };\n  }, [ref]);\n};\n\nexport default useElectronDrag;\n","import { useEffect, useRef } from '../../../lib/teact/teact';\n\nimport { IS_IOS } from '../../windowEnvironment';\nimport { disableTelegramMiniAppSwipeToClose, enableTelegramMiniAppSwipeToClose } from '../index';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nexport default function useTelegramMiniAppSwipeToClose(isActive?: boolean) {\n  const isSwipeDisabledRef = useRef(false);\n\n  useEffect(() => {\n    if (!IS_IOS) return;\n\n    if (!isActive && isSwipeDisabledRef.current) {\n      enableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = false;\n    }\n  }, [isActive]);\n\n  const disableSwipeToClose = useLastCallback(() => {\n    if (IS_IOS && !isSwipeDisabledRef.current) {\n      disableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = true;\n    }\n  });\n\n  const enableSwipeToClose = useLastCallback(() => {\n    if (IS_IOS && isSwipeDisabledRef.current) {\n      enableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = false;\n    }\n  });\n\n  return {\n    disableSwipeToClose,\n    enableSwipeToClose,\n  };\n}\n","import { getActions } from '../../../global';\n\nimport type { ApiSite } from '../../../api/types';\n\nimport { openUrl } from '../../../util/openUrl';\nimport { getHostnameFromUrl, isValidUrl } from '../../../util/url';\n\nexport interface SearchSuggestions {\n  history?: string[];\n  sites?: ApiSite[];\n  isEmpty: boolean;\n}\n\nexport interface ProcessedSites {\n  trendingSites: ApiSite[];\n  allSites: Record<number, ApiSite[]>;\n}\nconst GOOGLE_SEARCH_URL = 'https://www.google.com/search?q=';\n\nexport function filterSites(sites?: ApiSite[], shouldRestrict?: boolean) {\n  if (!sites) {\n    return undefined;\n  }\n\n  return shouldRestrict\n    ? sites.filter((site) => !site.canBeRestricted)\n    : sites;\n}\n\nexport function generateSearchSuggestions(\n  searchValue: string,\n  browserHistory?: string[],\n  filteredSites?: ApiSite[],\n) {\n  const search = searchValue.toLowerCase();\n  const historyResult = browserHistory?.filter((url) => url.toLowerCase().includes(search));\n  const sitesResult = search.length && filteredSites\n    ? filteredSites.filter(({ url, name, description }) => {\n      return url.toLowerCase().includes(search)\n        || name.toLowerCase().includes(search)\n        || description.toLowerCase().includes(search);\n    })\n    : undefined;\n\n  return {\n    history: historyResult,\n    sites: sitesResult,\n    isEmpty: (historyResult?.length || 0) + (sitesResult?.length || 0) === 0,\n  };\n}\n\nexport function processSites(sites?: ApiSite[]): ProcessedSites {\n  return (sites || []).reduce((acc, site) => {\n    if (site.isFeatured) {\n      acc.trendingSites.push(site);\n    }\n\n    if (!acc.allSites[site.categoryId!]) {\n      acc.allSites[site.categoryId!] = [];\n    }\n    acc.allSites[site.categoryId!].push(site);\n\n    return acc;\n  }, { trendingSites: [], allSites: {} } as ProcessedSites);\n}\n\nexport function findSiteByUrl(sites?: ApiSite[], targetUrl?: string): ApiSite | undefined {\n  return sites?.find(({ url }) => url === targetUrl);\n}\n\nexport function openSite(originalUrl: string, isExternal?: boolean, title?: string) {\n  let url = originalUrl;\n  if (!url.startsWith('http:') && !url.startsWith('https:')) {\n    url = `https://${url}`;\n  }\n  if (!isValidUrl(url)) {\n    url = `${GOOGLE_SEARCH_URL}${encodeURIComponent(originalUrl)}`;\n  } else {\n    getActions().addSiteToBrowserHistory({ url });\n  }\n\n  void openUrl(url, { isExternal, title, subtitle: getHostnameFromUrl(url) });\n}\n","import { type ElementRef, useEffect } from '../lib/teact/teact';\n\ninterface OwnProps {\n  containerRef: ElementRef<HTMLDivElement>;\n  isDisabled?: boolean;\n  shouldPreventDefault?: boolean;\n  contentSelector?: string;\n}\n\nfunction useHorizontalScroll({\n  containerRef,\n  isDisabled,\n  shouldPreventDefault = false,\n  contentSelector,\n}: OwnProps) {\n  useEffect(() => {\n    const container = containerRef.current;\n\n    if (isDisabled || !container) {\n      return undefined;\n    }\n\n    function handleScroll(e: WheelEvent) {\n      // Ignore horizontal scroll and let it work natively (e.g. on touchpad)\n      if (!e.deltaX) {\n        const content = contentSelector ? container!.querySelector(contentSelector) : container;\n        if (!content) return;\n\n        content.scrollLeft += e.deltaY / 4;\n        if (shouldPreventDefault) e.preventDefault();\n      }\n    }\n\n    container.addEventListener('wheel', handleScroll, { passive: !shouldPreventDefault });\n\n    return () => {\n      container.removeEventListener('wheel', handleScroll);\n    };\n  }, [containerRef, contentSelector, isDisabled, shouldPreventDefault]);\n}\n\nexport default useHorizontalScroll;\n","import { useRef } from '../lib/teact/teact';\n\n// This is not render-dependent and will never allow previous to match current\nexport default function usePrevious2<T>(current: T) {\n  const prevRef = useRef<T>();\n  const lastRef = useRef<T>();\n\n  if (lastRef.current !== current) {\n    prevRef.current = lastRef.current;\n  }\n\n  lastRef.current = current;\n\n  return prevRef.current;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"MEbg8jIh\",\"header\":\"P97rYp1K\",\"folder\":\"uC9KwIK7\",\"interactive\":\"db2WsIPg\",\"subfolder\":\"qqdPrxSH\",\"site\":\"dNJuuV1f\",\"small\":\"rQOZaBwJ\",\"icon\":\"yWoCn5kk\",\"scalable\":\"d8pMxoBU\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl } from '../../util/url';\n\nimport useLang from '../../hooks/useLang';\n\nimport Image from '../ui/Image';\n\nimport styles from './Category.module.scss';\n\ninterface OwnProps {\n  category: ApiSiteCategory;\n  sites: ApiSite[];\n}\n\nfunction Category({ category, sites }: OwnProps) {\n  const { openSiteCategory } = getActions();\n\n  const lang = useLang();\n  const [bigSites, smallSites] = useMemo(() => {\n    if (sites.length <= 4) {\n      return [sites, []];\n    }\n\n    return [\n      sites.slice(0, 3),\n      sites.slice(3, 7),\n    ];\n  }, [sites]);\n\n  function handleCategoryClick() {\n    openSiteCategory({ id: category.id });\n  }\n\n  return (\n    <div className={styles.root}>\n      <h3\n        className={styles.header}\n        role=\"button\"\n        tabIndex={0}\n        onClick={handleCategoryClick}\n      >\n        {lang(category.name)}\n      </h3>\n\n      <div\n        className={buildClassName(styles.folder, smallSites.length > 0 && styles.interactive)}\n        onClick={smallSites.length > 0 ? handleCategoryClick : undefined}\n      >\n        {bigSites.map((site) => (\n          <button\n            key={`${site.url}-${site.name}`}\n            type=\"button\"\n            className={buildClassName(styles.site, styles.scalable)}\n            onClick={(e: React.MouseEvent) => {\n              stopEvent(e);\n\n              void openUrl(\n                site.url, { isExternal: site.isExternal, title: site.name, subtitle: getHostnameFromUrl(site.url) },\n              );\n            }}\n          >\n            <Image\n              url={site.icon}\n              alt={site.name}\n              imageClassName={styles.icon}\n            />\n          </button>\n        ))}\n        {smallSites.length > 0 && (\n          <div className={buildClassName(styles.subfolder, styles.scalable)}>\n            {smallSites.map((site) => (\n              <Image\n                key={`${site.url}-${site.name}`}\n                url={site.icon}\n                alt={site.name}\n                className={buildClassName(styles.site, styles.small)}\n                imageClassName={styles.icon}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Category);\n","export const MEMO_EMPTY_ARRAY = [];\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3Om0rcJ\",\"feed\":\"nA5QFADu\",\"feedEmpty\":\"RcpQnS7j\",\"tiles\":\"y5gkmCay\",\"pills\":\"YTIqRcid\",\"dapp\":\"uOCr1XIF\",\"icon\":\"ZwXhUWQR\",\"dappName\":\"mqKHkpx5\",\"dappTile\":\"in10zDBl\",\"dappPill\":\"x3JEisHt\",\"settingsLabel\":\"CDOOWV_8\",\"iconPill\":\"B18NDC8N\",\"iconTile\":\"ws8erUzz\",\"fallbackIcon\":\"JdTfrjba\",\"settingsButton\":\"kqZ8FwHA\",\"settingsIconContainer\":\"S5zvywKS\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { openUrl } from '../../util/openUrl';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Image from '../ui/Image';\n\nimport dappStyles from '../dapps/Dapp.module.scss';\nimport styles from './DappFeed.module.scss';\n\ninterface OwnProps {\n  iconUrl: string;\n  name: string;\n  url: string;\n  mode: 'pill' | 'tile';\n  isExternal: boolean;\n}\n\nconst RERENDER_DAPPS_FEED_DELAY_MS = SECOND;\n\nconst POPULAR_DAPP_URL_REPLACEMENTS = [{\n  name: 'Fanzee Battles',\n  manifestUrl: 'https://battles-tg-app.fanz.ee/tc-manifest.json',\n  originalUrl: 'https://t.me/fanzeebattlesbot',\n  replacementUrl: 'https://t.me/battlescryptobot?start=myTonWallet',\n}, {\n  name: 'Hamster Kombat',\n  manifestUrl: 'https://hamsterkombatgame.io/tonconnect-manifest.json',\n  originalUrl: 'https://hamsterkombatgame.io/',\n  replacementUrl: 'https://t.me/hamster_kombat_bot/start',\n}, {\n  name: 'Dogs',\n  manifestUrl: 'https://cdn.onetime.dog/manifest.json',\n  originalUrl: 'https://onetime.dog',\n  replacementUrl: 'https://t.me/dogshouse_bot/join',\n}, {\n  name: 'Earn',\n  manifestUrl: 'https://cdn.joincommunity.xyz/earn/manifest.json',\n  originalUrl: 'https://earncommunity.xyz',\n  replacementUrl: 'https://t.me/earn?startapp',\n}];\n\nconst REPLACEMENTS_BY_URL = POPULAR_DAPP_URL_REPLACEMENTS.reduce(\n  (acc: Record<string, string>, { originalUrl, replacementUrl }) => {\n    acc[originalUrl] = replacementUrl;\n\n    return acc;\n  }, {},\n);\n\nfunction DappFeedItem({\n  iconUrl,\n  name,\n  url,\n  mode,\n  isExternal,\n}: OwnProps) {\n  const { updateDappLastOpenedAt } = getActions();\n\n  const lang = useLang();\n\n  function renderIcon() {\n    const iconClassName = mode === 'pill' ? styles.iconPill : styles.iconTile;\n\n    const fallbackIcon = useMemo(() => (\n      <div className={buildClassName(dappStyles.dappLogo, dappStyles.dappLogoIcon, iconClassName)}>\n        <i className={buildClassName(styles.fallbackIcon, 'icon-laptop')} aria-hidden />\n      </div>\n    ), [iconClassName]);\n\n    return (\n      <Image\n        url={iconUrl}\n        className={iconClassName}\n        imageClassName={styles.icon}\n        alt={lang('Icon')}\n        fallback={fallbackIcon}\n      />\n    );\n  }\n\n  const openDapp = useLastCallback(async () => {\n    await openUrl(REPLACEMENTS_BY_URL[url] || url, { isExternal });\n\n    setTimeout(() => void updateDappLastOpenedAt({ url }), RERENDER_DAPPS_FEED_DELAY_MS);\n  });\n\n  return (\n    <button\n      type=\"button\"\n      className={buildClassName(styles.dapp, mode === 'pill' ? styles.dappPill : styles.dappTile)}\n      onClick={openDapp}\n    >\n      {renderIcon()}\n      <span className={styles.dappName}>{name}</span>\n    </button>\n  );\n}\n\nexport default memo(DappFeedItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"rootSlide\":\"ZqS6W7iF\",\"slide\":\"FbWMWVID\",\"list\":\"eHKjqPA4\",\"landscapeList\":\"ajulW8PQ\",\"suggestionsMenu\":\"AcA4Inhz\",\"suggestions\":\"Rr_OedMn\",\"suggestion\":\"goh_kbKG\",\"suggestionIcon\":\"BHtFAOhh\",\"suggestionAddress\":\"hX1s9Ru4\",\"clearSuggestion\":\"k4u3y6_t\",\"item\":\"gSQkL6Gj\",\"trendingImage\":\"bIf54cAx\",\"imageWrapperScalable\":\"jnZY0Ppv\",\"trending\":\"dsHH5C4L\",\"badge\":\"PI6bQC1A\",\"imageWrapper\":\"oZIOx6b0\",\"infoWrapper\":\"SmLsrv__\",\"extended\":\"Qe5qRpIb\",\"withBorder\":\"yvQQOHrd\",\"badgeLabel\":\"vHZqxLRV\",\"image\":\"RpIwnHrh\",\"title\":\"ToW8q6Vp\",\"description\":\"kd6qUnJ8\",\"telegram\":\"Y4mdR7QN\",\"emptyList\":\"OLtywBQ9\",\"emptyListLoading\":\"i6uQ6HHm\",\"searchWrapper\":\"VQJfovbk\",\"searchContainer\":\"Wr0eK8xW\",\"searchIcon\":\"DdYW9BBn\",\"searchInput\":\"Gy204QbI\",\"sectionHeader\":\"HElxzEtm\",\"trendingSection\":\"bX0D8BEZ\",\"trendingList\":\"bZc6NN6v\"};","import React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type ApiDapp } from '../../api/types';\nimport { SettingsState } from '../../global/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { getDappConnectionUniqueId } from '../../util/getDappConnectionUniqueId';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\n\nimport DappFeedItem from './DappFeedItem';\n\nimport styles from './DappFeed.module.scss';\nimport exploreStyles from './Explore.module.scss';\n\ninterface StateProps {\n  dapps: ApiDapp[];\n  dappLastOpenedDatesByUrl?: Record<string, number>;\n}\n\ntype DappWithLastOpenedDate = ApiDapp & { lastOpenedAt?: number };\n\nconst MAX_DAPPS_FOR_PILL_MODE = 3;\nconst HIDDEN_FROM_FEED_DAPP_URLS = new Set(['https://checkin.mytonwallet.org']);\n\nfunction DappFeed({ dapps: dappsFromState, dappLastOpenedDatesByUrl }: StateProps) {\n  const { openSettingsWithState, closeExplore } = getActions();\n\n  const lang = useLang();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const dapps: DappWithLastOpenedDate[] = useMemo(() => {\n    const sortedDapps = dappsFromState\n      .slice()\n      .filter((dapp) => !HIDDEN_FROM_FEED_DAPP_URLS.has(dapp.url))\n      .map((dapp) => ({ ...dapp, lastOpenedAt: dappLastOpenedDatesByUrl?.[dapp.url] }))\n      .sort(compareDapps);\n\n    // Remove duplicates, since we now support multiple connections per dapp. Keep the most recent connection.\n    const seen = new Set<string>();\n    return sortedDapps.filter(({ url }) => {\n      if (seen.has(url)) return false;\n      seen.add(url);\n      return true;\n    });\n  }, [dappLastOpenedDatesByUrl, dappsFromState]);\n\n  const mode = dapps.length > MAX_DAPPS_FOR_PILL_MODE ? 'tile' : 'pill';\n  const isPillMode = mode === 'pill';\n  const iconWrapperClassName = isPillMode ? styles.iconPill : styles.iconTile;\n  const fullClassName = buildClassName(\n    styles.feed,\n    isPillMode ? styles.pills : styles.tiles,\n    !dapps.length && styles.feedEmpty,\n    'dapps-feed',\n  );\n\n  function openSettings() {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    openSettingsWithState({ state: SettingsState.Dapps }, { forceOnHeavyAnimation: true });\n  }\n\n  useHorizontalScroll({\n    containerRef,\n    isDisabled: IS_TOUCH_ENV || dapps.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: '.dapps-feed',\n  });\n\n  if (!dapps.length) {\n    return undefined;\n  }\n\n  return (\n    <div className={styles.root} ref={containerRef}>\n      <h2 className={exploreStyles.sectionHeader}>{lang('Connected')}</h2>\n\n      <div className={fullClassName}>\n        {dapps?.map((dapp) => renderDapp(dapp, mode))}\n\n        {!!dapps.length && (\n          <div\n            className={styles.settingsButton}\n            role=\"button\"\n            tabIndex={0}\n            title={isPillMode ? lang('Settings') : undefined}\n            aria-label={isPillMode ? lang('Settings') : undefined}\n            onClick={openSettings}\n          >\n            <div className={buildClassName(styles.settingsIconContainer, iconWrapperClassName)}>\n              <i className=\"icon-params\" aria-hidden />\n            </div>\n            {!isPillMode && <span className={styles.settingsLabel}>{lang('Settings')}</span>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const { dappLastOpenedDatesByUrl } = selectCurrentAccountState(global) || {};\n\n  return { dapps, dappLastOpenedDatesByUrl };\n})(DappFeed));\n\nfunction compareDapps(a: DappWithLastOpenedDate, b: DappWithLastOpenedDate) {\n  const aLastOpened = a.lastOpenedAt || 0;\n  const bLastOpened = b.lastOpenedAt || 0;\n\n  if (aLastOpened !== bLastOpened) {\n    return bLastOpened - aLastOpened;\n  }\n\n  return b.connectedAt - a.connectedAt;\n}\n\nfunction renderDapp(dapp: DappWithLastOpenedDate, mode: 'pill' | 'tile') {\n  const {\n    iconUrl, name, url,\n  } = dapp;\n\n  const key = `dapp-${url}-${getDappConnectionUniqueId(dapp)}`;\n\n  return (\n    <DappFeedItem\n      key={key}\n      iconUrl={iconUrl}\n      name={name}\n      url={url}\n      mode={mode}\n      isExternal={!!dapp.sse}\n    />\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"menuItem\":\"eMFKmXs8\",\"destructive\":\"C84vY_ER\"};","import type { FC, TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './MenuItem.module.scss';\n\ntype OnClickHandler = (e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>, arg?: any) => void;\n\ninterface OwnProps {\n  className?: string;\n  href?: string;\n  children: TeactNode;\n  onClick?: OnClickHandler;\n  clickArg?: string;\n  isDestructive?: boolean;\n}\n\nconst MenuItem: FC<OwnProps> = (props) => {\n  const {\n    className,\n    href,\n    children,\n    onClick,\n    clickArg,\n    isDestructive,\n  } = props;\n\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e, clickArg);\n  });\n\n  const handleKeyDown = useLastCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.code !== 'Enter' && e.code !== 'Space') {\n      return;\n    }\n\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e);\n  });\n\n  const fullClassName = buildClassName(\n    styles.menuItem,\n    className,\n    isDestructive && styles.destructive,\n  );\n\n  if (href) {\n    return (\n      <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" className={fullClassName}>\n        {children}\n      </a>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      className={fullClassName}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default MenuItem;\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl, isTelegramUrl } from '../../util/url';\n\nimport Image from '../ui/Image';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  site: ApiSite;\n  isTrending?: boolean;\n  isInList?: boolean;\n  className?: string;\n}\n\nfunction Site({\n  site: {\n    url, icon, name, description, isExternal, extendedIcon, withBorder, badgeText,\n  },\n  isTrending,\n  isInList,\n  className,\n}: OwnProps) {\n  function handleClick() {\n    void vibrate();\n    void openUrl(url, { isExternal, title: name, subtitle: getHostnameFromUrl(url) });\n  }\n\n  return (\n    <div\n      className={buildClassName(\n        styles.item,\n        (extendedIcon && isTrending) && styles.extended,\n        isTrending && styles.trending,\n        !isInList && withBorder && styles.withBorder,\n        className,\n      )}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleClick}\n    >\n      <Image\n        url={extendedIcon && isTrending ? extendedIcon : icon}\n        className={buildClassName(styles.imageWrapper, !isTrending && styles.imageWrapperScalable)}\n        imageClassName={buildClassName(styles.image, isTrending && styles.trendingImage)}\n      />\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>\n          {name}\n\n          {!isTrending && isTelegramUrl(url) && (\n            <i className={buildClassName(styles.telegram, 'icon-telegram-filled')} aria-hidden />\n          )}\n          {isInList && badgeText && <div className={styles.badgeLabel}>{badgeText}</div>}\n        </b>\n        <div className={styles.description}>{description}</div>\n      </div>\n      {!isInList && badgeText && <div className={styles.badge}>{badgeText}</div>}\n    </div>\n  );\n}\n\nexport default memo(Site);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { SearchSuggestions } from './helpers/utils';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { getHostnameFromUrl } from '../../util/url';\n\nimport useLang from '../../hooks/useLang';\n\nimport Menu from '../ui/Menu';\nimport MenuItem from '../ui/MenuItem';\nimport Site from './Site';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  isSuggestionsVisible: boolean;\n  searchSuggestions: SearchSuggestions;\n  searchValue: string;\n  onSiteClick: (e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>, url: string) => void;\n  onSiteClear: (e: React.MouseEvent, url: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\nfunction ExploreSearchSuggestions({\n  isSuggestionsVisible,\n  searchSuggestions,\n  searchValue,\n  onSiteClick,\n  onSiteClear,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Menu\n      type=\"suggestion\"\n      noBackdrop\n      isOpen={Boolean(isSuggestionsVisible && !searchSuggestions.isEmpty)}\n      className={styles.suggestions}\n      bubbleClassName={styles.suggestionsMenu}\n      onClose={onClose}\n    >\n      {searchSuggestions?.history?.map((url) => (\n        <MenuItem key={`history-${url}`} className={styles.suggestion} onClick={onSiteClick} clickArg={url}>\n          <i\n            className={buildClassName(styles.suggestionIcon, searchValue.length ? 'icon-search' : 'icon-globe')}\n            aria-hidden\n          />\n          <span className={styles.suggestionAddress}>{getHostnameFromUrl(url)}</span>\n\n          <button\n            className={styles.clearSuggestion}\n            type=\"button\"\n            aria-label={lang('Clear')}\n            title={lang('Clear')}\n            onMouseDown={(e) => onSiteClear(e, url)}\n            onClick={stopEvent}\n          >\n            <i className=\"icon-close\" aria-hidden />\n          </button>\n        </MenuItem>\n      ))}\n      {searchSuggestions?.sites?.map((site) => (\n        <Site key={`site-${site.url}-${site.name}`} className={styles.suggestion} site={site} />\n      ))}\n    </Menu>\n  );\n}\n\nexport default memo(ExploreSearchSuggestions);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './CategoryHeader.module.scss';\n\ninterface OwnProps {\n  id: number;\n  withNotch?: boolean;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n}\n\nfunction CategoryHeader({ id, withNotch, categories }: OwnProps & StateProps) {\n  const { closeSiteCategory } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const category = useMemo(() => {\n    return (categories || [])?.find((item) => id === item.id);\n  }, [categories, id]);\n\n  return (\n    <div className={buildClassName(\n      styles.root,\n      isPortrait && 'with-notch-on-scroll',\n      withNotch && 'is-scrolled',\n    )}\n    >\n      <Button className={styles.backButton} isSimple isText onClick={closeSiteCategory}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <h3 className={styles.title}>\n        {lang(category?.name || '')}\n      </h3>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    categories: global.exploreData?.categories,\n  };\n})(CategoryHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"xWsj5_Wk\",\"backButton\":\"P2bhPLw0\",\"backIcon\":\"FmQAR1hK\",\"title\":\"kW1ssngj\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport CategoryHeader from './CategoryHeader';\nimport Site from './Site';\n\nimport styles from './SiteList.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  categoryId: number;\n  sites: ApiSite[];\n}\n\nfunction SiteList({ isActive, categoryId, sites }: OwnProps) {\n  const { closeSiteCategory } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHistoryBack({\n    isActive,\n    onBack: closeSiteCategory,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div\n      onScroll={isPortrait ? handleContentScroll : undefined}\n      className={buildClassName(styles.root, 'custom-scroll')}\n    >\n      {isPortrait && <CategoryHeader id={categoryId} withNotch={isScrolled} />}\n      <div className={styles.list}>\n        {sites.map((site) => (\n          <Site\n            key={`${site.url}-${site.name}`}\n            site={site}\n            isInList\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SiteList);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LxPuuiTJ\",\"list\":\"Eml6INN5\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\nimport { vibrate } from '../../util/haptics';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport useTelegramMiniAppSwipeToClose from '../../util/telegram/hooks/useTelegramMiniAppSwipeToClose';\nimport {\n  IS_ANDROID, IS_ANDROID_APP, IS_IOS_APP, IS_TOUCH_ENV,\n} from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\nimport {\n  filterSites,\n  findSiteByUrl,\n  generateSearchSuggestions,\n  openSite,\n  processSites,\n  type SearchSuggestions,\n} from './helpers/utils';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../hooks/useFlag';\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\nimport Category from './Category';\nimport DappFeed from './DappFeed';\nimport ExploreSearchSuggestions from './ExploreSearchSuggestions';\nimport Site from './Site';\nimport SiteList from './SiteList';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n  sites?: ApiSite[];\n  shouldRestrict: boolean;\n  browserHistory?: string[];\n  currentSiteCategoryId?: number;\n}\n\nconst SUGGESTIONS_OPEN_DELAY = 300;\nconst enum SLIDES {\n  main,\n  category,\n}\n\nfunction Explore({\n  isActive, categories, sites: originalSites, shouldRestrict, browserHistory, currentSiteCategoryId, onScroll,\n}: OwnProps & StateProps) {\n  const {\n    loadExploreSites,\n    getDapps,\n    removeSiteFromBrowserHistory,\n    openSiteCategory,\n    closeSiteCategory,\n  } = getActions();\n\n  const inputRef = useRef<HTMLInputElement>();\n  const suggestionsTimeoutRef = useRef<number | undefined>(undefined);\n  const transitionRef = useRef<HTMLDivElement>();\n  const trendingContainerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const [searchValue, setSearchValue] = useState<string>('');\n  const [isSearchFocused, markSearchFocused, unmarkSearchFocused] = useFlag(false);\n  const [isSuggestionsVisible, showSuggestions, hideSuggestions] = useFlag(false);\n  const { renderingKey } = useModalTransitionKeys(currentSiteCategoryId || 0, !!isActive);\n  const prevSiteCategoryIdRef = useStateRef(usePrevious2(renderingKey));\n  const { disableSwipeToClose, enableSwipeToClose } = useTelegramMiniAppSwipeToClose(isActive);\n\n  // On desktop should be used external scroll detection via `onScroll` prop\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  useEffect(\n    () => (renderingKey ? captureEscKeyListener(closeSiteCategory) : undefined),\n    [closeSiteCategory, renderingKey],\n  );\n\n  const filteredSites = useMemo(() => filterSites(originalSites, shouldRestrict), [originalSites, shouldRestrict]);\n\n  const searchSuggestions = useMemo<SearchSuggestions>(\n    () => generateSearchSuggestions(searchValue, browserHistory, filteredSites),\n    [browserHistory, searchValue, filteredSites],\n  );\n\n  const { trendingSites, allSites } = useMemo(() => processSites(filteredSites), [filteredSites]);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !filteredSites?.length) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: () => {\n        closeSiteCategory();\n\n        disableSwipeToClose();\n      },\n      onCancel: () => {\n        openSiteCategory({ id: prevSiteCategoryIdRef.current! });\n\n        enableSwipeToClose();\n      },\n    });\n  }, [disableSwipeToClose, enableSwipeToClose, filteredSites?.length, prevSiteCategoryIdRef]);\n\n  useHorizontalScroll({\n    containerRef: trendingContainerRef,\n    isDisabled: IS_TOUCH_ENV || trendingSites.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: `.${styles.trendingList}`,\n  });\n\n  const filteredCategories = useMemo(() => {\n    return categories?.filter((category) => allSites[category.id]?.length > 0);\n  }, [categories, allSites]);\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    getDapps();\n    loadExploreSites({ isLandscape });\n  }, [isActive, isLandscape]);\n\n  const safeShowSuggestions = useLastCallback(() => {\n    if (searchSuggestions.isEmpty) return;\n\n    // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n    if (IS_ANDROID) {\n      suggestionsTimeoutRef.current = window.setTimeout(showSuggestions, SUGGESTIONS_OPEN_DELAY);\n    } else {\n      showSuggestions();\n    }\n  });\n\n  const safeHideSuggestions = useLastCallback(() => {\n    if (isSuggestionsVisible) {\n      hideSuggestions();\n    }\n    window.clearTimeout(suggestionsTimeoutRef.current);\n  });\n\n  useEffectWithPrevDeps(([prevIsSearchFocused]) => {\n    if ((prevIsSearchFocused && !isSearchFocused) || searchSuggestions.isEmpty) {\n      safeHideSuggestions();\n    }\n    if (isSearchFocused && !searchSuggestions.isEmpty) {\n      safeShowSuggestions();\n    }\n  }, [isSearchFocused, searchSuggestions.isEmpty]);\n\n  const handleSiteClick = useLastCallback((\n    e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>,\n    url: string,\n  ) => {\n    void vibrate();\n    hideSuggestions();\n    const site = findSiteByUrl(originalSites, url);\n    openSite(url, site?.isExternal, site?.name);\n  });\n\n  const handleSiteClear = useLastCallback((e: React.MouseEvent, url: string) => {\n    stopEvent(e);\n\n    removeSiteFromBrowserHistory({ url });\n  });\n\n  function handleSearchValueChange(e: React.ChangeEvent<HTMLInputElement>) {\n    setSearchValue(e.target.value);\n  }\n\n  const handleMenuClose = useLastCallback(() => {\n    inputRef.current?.blur();\n  });\n\n  function handleSearchSubmit(e: React.FormEvent<HTMLFormElement>) {\n    stopEvent(e);\n\n    handleMenuClose();\n\n    if (searchValue.length > 0) {\n      openSite(searchValue);\n      setSearchValue('');\n    }\n  }\n\n  function renderSearch() {\n    return (\n      <form action=\"#\" onSubmit={handleSearchSubmit} className={styles.searchContainer} autoComplete=\"off\">\n        <i className={buildClassName(styles.searchIcon, 'icon-search')} aria-hidden />\n        <input\n          name=\"explore-search\"\n          className={styles.searchInput}\n          placeholder={lang('Search or enter address')}\n          value={searchValue}\n          autoCorrect={false}\n          autoCapitalize=\"none\"\n          spellCheck={false}\n          inputMode=\"url\"\n          onChange={handleSearchValueChange}\n          onFocus={markSearchFocused}\n          onBlur={unmarkSearchFocused}\n        />\n      </form>\n    );\n  }\n\n  function renderTrending() {\n    return (\n      <div ref={trendingContainerRef} className={styles.trendingSection}>\n        <h2 className={styles.sectionHeader}>{lang('Trending')}</h2>\n        <div className={styles.trendingList}>\n          {trendingSites.map((site) => (\n            <Site key={`${site.url}-${site.name}`} site={site} isTrending />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.main:\n        return (\n          <div\n            className={buildClassName(styles.slide, 'custom-scroll')}\n            onScroll={isPortrait ? handleContentScroll : onScroll}\n          >\n            <div className={buildClassName(styles.searchWrapper, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n              {renderSearch()}\n              <ExploreSearchSuggestions\n                isSuggestionsVisible={isSuggestionsVisible}\n                searchSuggestions={searchSuggestions}\n                searchValue={searchValue}\n                onSiteClick={handleSiteClick}\n                onSiteClear={handleSiteClear}\n                onClose={handleMenuClose}\n              />\n            </div>\n\n            <DappFeed />\n\n            {Boolean(trendingSites.length) && renderTrending()}\n\n            {Boolean(filteredCategories?.length) && (\n              <>\n                <h2 className={styles.sectionHeader}>{lang('All Dapps')}</h2>\n                <div className={buildClassName(styles.list, isLandscape && styles.landscapeList)}>\n                  {filteredCategories.map((category) => (\n                    <Category key={category.id} category={category} sites={allSites[category.id]} />\n                  ))}\n                </div>\n              </>\n            )}\n          </div>\n        );\n\n      case SLIDES.category: {\n        const currentSiteCategory = allSites[renderingKey];\n        if (!currentSiteCategory) return undefined;\n\n        return (\n          <SiteList\n            key={renderingKey}\n            isActive={isContentActive}\n            categoryId={renderingKey}\n            sites={currentSiteCategory}\n          />\n        );\n      }\n    }\n  }\n\n  if (filteredSites === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (filteredSites.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No partners yet')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <Transition\n      ref={transitionRef}\n      name={resolveSlideTransitionName()}\n      activeKey={renderingKey ? SLIDES.category : SLIDES.main}\n      withSwipeControl\n      className={styles.rootSlide}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { browserHistory, currentSiteCategoryId } = selectCurrentAccountState(global) || {};\n  const { categories, sites } = global.exploreData || {};\n\n  return {\n    sites,\n    categories,\n    shouldRestrict: global.restrictions.isLimitedRegion && (IS_IOS_APP || IS_ANDROID_APP),\n    browserHistory,\n    currentSiteCategoryId,\n  };\n})(Explore));\n","import React, {\n  memo, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { Account } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isStatic?: boolean;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nconst ACCOUNT_ADDRESS_SHIFT = 4;\nconst ACCOUNT_BALANCE_DECIMALS = 3;\n\nfunction LedgerSelectWallets({\n  isActive,\n  isStatic,\n  hardwareWallets,\n  accounts,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const {\n    afterSelectHardwareWallets,\n    loadMoreHardwareWallets,\n  } = getActions();\n  const lang = useLang();\n\n  const [selectedAccountIndices, setSelectedAccountIndices] = useState<number[]>([]);\n  const shouldCloseOnCancel = !onCancel;\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  const handleAccountToggle = useLastCallback((index: number) => {\n    if (selectedAccountIndices.includes(index)) {\n      setSelectedAccountIndices(selectedAccountIndices.filter((id) => id !== index));\n    } else {\n      setSelectedAccountIndices(selectedAccountIndices.concat([index]));\n    }\n  });\n\n  const handleAddLedgerWallets = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: selectedAccountIndices });\n    onClose();\n  });\n\n  const alreadyConnectedList = useMemo(\n    () => Object.values(accounts ?? [])\n      .map(({ addressByChain: { ton: address } }) => address)\n      .filter(Boolean),\n    [accounts],\n  );\n\n  const handleAddWalletClick = useLastCallback(() => {\n    const list = hardwareWallets ?? [];\n    const lastIndex = list[list.length - 1]?.index ?? 0;\n\n    loadMoreHardwareWallets({ lastIndex });\n  });\n\n  function renderAddAccount() {\n    return (\n      <Button\n        className={styles.addAccountContainer}\n        onClick={handleAddWalletClick}\n      >\n        {lang('Add Wallet')}\n        <i className={buildClassName(styles.addAccountIcon, 'icon-plus')} aria-hidden />\n      </Button>\n    );\n  }\n\n  function renderAccount(address: string, balance: bigint, index: number, isConnected: boolean) {\n    const isActiveAccount = isConnected || selectedAccountIndices.includes(index);\n\n    return (\n      <div\n        key={address}\n        className={buildClassName(styles.account, isActiveAccount && styles.account_current)}\n        onClick={isConnected ? undefined : () => handleAccountToggle(index)}\n      >\n        <span className={styles.accountName}>\n          <i className={buildClassName(styles.accountCurrencyIcon, 'icon-ton')} aria-hidden />\n          {formatCurrency(toDecimal(balance), '', ACCOUNT_BALANCE_DECIMALS)}\n        </span>\n        <div className={styles.accountFooter}>\n          <span className={styles.accountAddress}>\n            {shortenAddress(address, ACCOUNT_ADDRESS_SHIFT, ACCOUNT_ADDRESS_SHIFT)}\n          </span>\n        </div>\n\n        <div className={buildClassName(styles.accountCheckMark, isActiveAccount && styles.accountCheckMark_active)} />\n      </div>\n    );\n  }\n\n  function renderAccounts() {\n    const list = hardwareWallets ?? [];\n    const fullClassName = buildClassName(\n      styles.accounts,\n      list.length === 1 && styles.accounts_two,\n      'custom-scroll',\n    );\n\n    return (\n      <div className={fullClassName}>\n        {list.map(\n          ({ address, balance, index }) => renderAccount(\n            address,\n            balance,\n            index,\n            alreadyConnectedList.includes(address),\n          ),\n        )}\n        {renderAddAccount()}\n      </div>\n    );\n  }\n\n  const areAccountsSelected = !selectedAccountIndices.length;\n  const title = selectedAccountIndices.length\n    ? lang('%1$d Selected', selectedAccountIndices.length) as string\n    : lang('Select Ledger Wallets');\n\n  return (\n    <>\n      {!isStatic ? (\n        <ModalHeader\n          title={title}\n          onBackButtonClick={onBackButtonClick}\n          onClose={!onBackButtonClick ? onClose : undefined}\n        />\n      ) : (\n        <div className={settingsStyles.header}>\n          <Button isSimple isText onClick={onClose} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{title}</span>\n        </div>\n      )}\n      <div className={buildClassName(\n        styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n      )}\n      >\n        {renderAccounts()}\n        <div className={styles.actionBlock}>\n          <Button\n            className={styles.button}\n            onClick={shouldCloseOnCancel ? onClose : onCancel}\n          >\n            {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={areAccountsSelected}\n            onClick={handleAddLedgerWallets}\n            className={styles.button}\n          >\n            {lang('Add')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(LedgerSelectWallets);\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport LedgerConnect from './LedgerConnect';\nimport LedgerSelectWallets from './LedgerSelectWallets';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  noBackdropClose?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  areSettingsOpen?: boolean;\n};\n\nenum LedgerModalState {\n  Password,\n  Connect,\n  SelectWallets,\n}\n\nfunction LedgerModal({\n  isOpen,\n  noBackdropClose,\n  onClose,\n  hardwareWallets,\n  accounts,\n  areSettingsOpen,\n}: OwnProps & StateProps) {\n  const { afterSelectHardwareWallets } = getActions();\n\n  const [currentSlide, setCurrentSlide] = useState<LedgerModalState>(\n    LedgerModalState.Connect,\n  );\n  const [nextKey] = useState<LedgerModalState | undefined>(\n    LedgerModalState.SelectWallets,\n  );\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    onClose();\n  });\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setCurrentSlide(LedgerModalState.SelectWallets);\n  });\n\n  const handleLedgerModalClose = useLastCallback(() => {\n    setCurrentSlide(LedgerModalState.Connect);\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: LedgerModalState) {\n    switch (currentKey) {\n      case LedgerModalState.Connect:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleConnected}\n            onClose={onClose}\n          />\n        );\n      case LedgerModalState.SelectWallets:\n        return (\n          <LedgerSelectWallets\n            isActive={isActive}\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      onClose={onClose}\n      onCloseAnimationEnd={handleLedgerModalClose}\n      dialogClassName={buildClassName(styles.modalDialog, areSettingsOpen && styles.modalDialogInsideSettings)}\n      noBackdropClose={noBackdropClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n\n  const { hardwareWallets } = global.hardware;\n\n  return {\n    accounts,\n    hardwareWallets,\n    areSettingsOpen: global.areSettingsOpen,\n  };\n})(LedgerModal));\n","import { IS_CAPACITOR, IS_EXTENSION, IS_TELEGRAM_APP } from '../../../config';\nimport { getSafeAreaTop, getStatusBarHeight } from '../../../util/capacitor';\nimport { getTelegramApp } from '../../../util/telegram';\nimport { IS_ELECTRON, IS_LINUX, IS_OPERA, IS_WINDOWS, REM } from '../../../util/windowEnvironment';\nimport windowSize from '../../../util/windowSize';\n\nimport { ELECTRON_HEADER_HEIGHT_REM } from '../../electron/ElectronHeader';\n\nconst WINDOWS_OPERA_EXTENSION_EXTRA_HEIGHT = 30;\n\nexport function calcSafeAreaTop() {\n  const { safeAreaTop } = windowSize.get();\n  const { safeAreaInset, contentSafeAreaInset } = IS_TELEGRAM_APP ? getTelegramApp()! : {};\n\n  return IS_CAPACITOR\n    // On some iPhones, the result of `getSafeAreaTop` is greater than the result of `getStatusBarHeight`.\n    // Also, the CSS `safeAreaTop` value is calculated with an error due to the specifics of NBS.\n    // In turn, some Android devices calculate `getSafeAreaTop` slightly less than `safeAreaTop` from CSS.\n    // So we need to take the maximum value between `getSafeAreaTop` , `getStatusBarHeight` and `safeAreaTop` from CSS.\n    ? Math.max(getSafeAreaTop(), getStatusBarHeight(), safeAreaTop)\n    : IS_TELEGRAM_APP\n      ? safeAreaInset!.top + contentSafeAreaInset!.top\n      : safeAreaTop\n        + (IS_ELECTRON && !IS_LINUX ? ELECTRON_HEADER_HEIGHT_REM * REM : 0)\n        + (IS_OPERA && IS_WINDOWS && IS_EXTENSION ? WINDOWS_OPERA_EXTENSION_EXTRA_HEIGHT : 0);\n}\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useEffect, useState } from '../lib/teact/teact';\n\ninterface OwnProps {\n  rootMargin: string;\n  threshold?: number[];\n  isDisabled?: boolean;\n  targetRef: ElementRef<HTMLDivElement | undefined>;\n  cb?: (entry: IntersectionObserverEntry) => void;\n}\n\nexport default function useElementVisibility(options: OwnProps) {\n  const {\n    rootMargin,\n    threshold = [0],\n    isDisabled,\n    targetRef,\n    cb,\n  } = options;\n\n  const [isVisible, setIsVisible] = useState(true);\n\n  useEffect(() => {\n    if (isDisabled || !targetRef.current) return undefined;\n\n    const observer = new IntersectionObserver((entries) => {\n      const entry = entries[0];\n\n      setIsVisible(entry.isIntersecting);\n      cb?.(entry);\n    }, {\n      rootMargin,\n      threshold,\n    });\n\n    observer.observe(targetRef.current);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [rootMargin, threshold, isDisabled, targetRef, cb]);\n\n  return { isVisible };\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { stopEvent } from '../util/domEvents';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst metaViewport = document.querySelector('meta[name=\"viewport\"]');\nconst defaultViewportContent = metaViewport?.getAttribute('content') || '';\nconst allowedZoomViewportContent = 'width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover';\n\nexport default function usePreventPinchZoomGesture(isDisabled = false) {\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    if (isDisabled) {\n      // Clean viewport content from values that disable the ability to zoom a webpage\n      // https://web.dev/meta-viewport/\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      return undefined;\n    }\n\n    metaViewport?.setAttribute('content', defaultViewportContent);\n\n    // Since iOS 10 `user-scaleable=no` is disabled in Safari for iOS,\n    // this is only applicable for the browser and does not apply to the PWA mode.\n    // https://newbedev.com/how-do-you-disable-viewport-zooming-on-mobile-safari\n    if (IS_IOS && !IS_PWA) {\n      document.addEventListener('gesturestart', stopEvent);\n    }\n\n    return () => {\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      if (IS_IOS && !IS_PWA) {\n        document.removeEventListener('gesturestart', stopEvent);\n      }\n    };\n  }, [isDisabled]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"o0ZmVyIN\",\"purple\":\"DJCb7ytz\",\"tokenIcon\":\"O2XO33Bj\",\"chainIcon\":\"UKA4ZfVj\",\"green\":\"IHTEYaZx\",\"twoIcons\":\"UD000onR\",\"nftIcon\":\"kRGDvyHS\",\"stacked\":\"gdAuuzmF\",\"image\":\"Q3m3aAJ1\",\"text\":\"LrHNEZly\",\"bold\":\"GQC2YXcS\",\"nftTitle\":\"BAWd380W\",\"address\":\"gWbbue48\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport { useMemo } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { unique } from '../../util/iteratees';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\n\nimport useLang from '../../hooks/useLang';\n\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TransactionBanner.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  imageUrl?: string | string[];\n  text?: string | TeactNode[];\n  withChainIcon?: boolean;\n  tokenOut?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  secondText?: string;\n  color?: 'purple' | 'green';\n  className?: string;\n}\n\nfunction TransactionBanner({\n  tokenIn,\n  imageUrl,\n  text,\n  withChainIcon,\n  tokenOut,\n  secondText,\n  color,\n  className,\n}: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.root,\n    color && styles[color],\n    tokenOut && styles.twoIcons,\n    className,\n  );\n\n  const isNftTransaction = !!imageUrl;\n\n  const imageUrls = useMemo(() => {\n    return unique(Array.isArray(imageUrl) ? imageUrl : [imageUrl]);\n  }, [imageUrl]);\n\n  function renderNftIcon() {\n    return (\n      <div className={buildClassName(styles.nftIcon, Array.isArray(imageUrl) && imageUrl.length > 1 && styles.stacked)}>\n        {imageUrls.map((image) => (\n          <img src={image} alt=\"\" key={image} className={styles.image} />\n        ))}\n        {withChainIcon && tokenIn?.chain && (\n          <img\n            src={getChainNetworkIcon(tokenIn.chain)}\n            alt=\"\"\n            className={styles.chainIcon}\n            draggable={false}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={fullClassName}>\n      {tokenIn && !isNftTransaction && (\n        <TokenIcon\n          token={tokenIn}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n      {isNftTransaction && renderNftIcon()}\n      <span className={styles.text}>\n        {secondText\n          ? text\n            ? (\n              lang('%amount% to %address%', {\n                amount: (\n                  <span className={buildClassName(styles.bold, isNftTransaction && styles.nftTitle)}>\n                    {text}\n                  </span>\n                ),\n                address: <span className={buildClassName(styles.bold, styles.address)}>{secondText}</span>,\n              })\n            )\n            : lang('$transaction_to', { address: <span className={styles.bold}>{secondText}</span> })\n          : <span className={styles.bold}>{text}</span>}\n      </span>\n      {tokenOut && (\n        <TokenIcon\n          token={tokenOut}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(TransactionBanner);\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport { IS_CAPACITOR } from '../config';\nimport { getIsMobileTelegramApp } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nlet isQrScannerSupported = getIsMobileTelegramApp();\n\nexport default function useQrScannerSupport() {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    if (!IS_CAPACITOR || isQrScannerSupported) return;\n\n    void BarcodeScanner\n      .isSupported()\n      .then((result) => {\n        isQrScannerSupported = result.supported;\n        forceUpdate();\n      });\n  });\n\n  return isQrScannerSupported;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"NvbEOoOC\",\"help\":\"LugNLsCQ\",\"label\":\"erx70q4_\",\"balanceError\":\"Jag9KEHr\",\"description\":\"s8vGyddw\",\"addressWidget\":\"fVQ8S1pD\",\"inputReadOnly\":\"Pne6FnQc\",\"inputReadOnly_words\":\"NH87E1kW\",\"inputReadOnlyWords\":\"NH87E1kW\",\"currencySymbol\":\"aNzt5kkC\",\"commentInputWrapper\":\"eBKrZtom\",\"sticker\":\"ZDG5rllO\",\"sticker_sizeSmall\":\"ol7Kgi48\",\"stickerSizeSmall\":\"ol7Kgi48\",\"buttonLoading\":\"PYuzODzS\",\"buttonText\":\"Cso7xEQu\",\"button-loading-spinner\":\"Kx52LskK\",\"buttonLoadingSpinner\":\"Kx52LskK\",\"savedAddressBubble\":\"keyC_8Hs\",\"savedAddressItem\":\"WI13wV5I\",\"savedAddressName\":\"ZEsl45OR\",\"savedAddressNameText\":\"HLnOPUyB\",\"iconLedger\":\"bdYXzf2H\",\"savedAddressAddress\":\"sDGTQ4jr\",\"savedAddressDelete\":\"ozjjQpYQ\",\"savedAddressDeleteInner\":\"UWDrZutz\",\"savedAddressDeleteIcon\":\"rO6SGoH9\",\"chainIcon\":\"g2vfXFiv\",\"inputStatic\":\"RJsBtjCe\",\"inputWithIcon\":\"uMO1BRcS\",\"footer\":\"yVExFE73\",\"footer_shifted\":\"NGWUkuR3\",\"footerShifted\":\"NGWUkuR3\",\"buttons\":\"oMCN3Z8P\",\"button\":\"U6ZAbMe2\",\"warningTooltipContainer\":\"lcmy9IMt\",\"transactionBanner\":\"Pxmu6Hot\",\"infoBox\":\"vKJsXVsk\",\"burnWarning\":\"CWZdgy5e\",\"error\":\"pUMdj3j5\",\"spinner\":\"gigiDFmZ\",\"formSlide\":\"TEJfM3gl\",\"formSlide_static\":\"mfCYg0_s\",\"formSlideStatic\":\"mfCYg0_s\"};","import type { MouseEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiChain } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport styles from '../transfer/Transfer.module.scss';\n\ninterface OwnProps {\n  address: string;\n  name?: string;\n  chain?: ApiChain;\n  isHardware?: boolean;\n  isSavedAddress?: boolean;\n  deleteLabel?: string;\n  onClick: (address: string) => void;\n  onDeleteClick?: (address: string) => void;\n}\n\nfunction AddressBookItem({\n  address,\n  name,\n  chain,\n  isHardware,\n  isSavedAddress,\n  deleteLabel,\n  onClick,\n  onDeleteClick,\n}: OwnProps) {\n  const handleClick = () => {\n    onClick(address);\n  };\n\n  const handleDeleteClick = (e: MouseEvent) => {\n    stopEvent(e);\n\n    onDeleteClick!(address);\n  };\n\n  return (\n    <div\n      tabIndex={-1}\n      role=\"button\"\n      onMouseDown={IS_TOUCH_ENV ? undefined : handleClick}\n      onClick={IS_TOUCH_ENV ? handleClick : undefined}\n      className={styles.savedAddressItem}\n    >\n      <span className={styles.savedAddressName}>\n        <span className={styles.savedAddressNameText}>\n          {name || shortenAddress(address)}\n        </span>\n        {isHardware && <i className={buildClassName(styles.iconLedger, 'icon-ledger')} aria-hidden />}\n      </span>\n      {isSavedAddress && onDeleteClick && (\n        <span className={styles.savedAddressDelete}>\n          <span\n            tabIndex={-1}\n            role=\"button\"\n            className={styles.savedAddressDeleteInner}\n            onMouseDown={handleDeleteClick}\n          >\n            {deleteLabel}\n          </span>\n        </span>\n      )}\n      {name && (\n        <span className={styles.savedAddressAddress}>\n          {chain && <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-hidden />}\n          {shortenAddress(address)}\n        </span>\n      )}\n      {isSavedAddress && onDeleteClick && (\n        <span\n          className={styles.savedAddressDeleteIcon}\n          role=\"button\"\n          tabIndex={-1}\n          onMouseDown={handleDeleteClick}\n          onClick={stopEvent}\n          aria-label={deleteLabel}\n        >\n          <i className=\"icon-trash\" aria-hidden />\n        </span>\n      )}\n    </div>\n  );\n}\n\nexport default memo(AddressBookItem);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { Account, SavedAddress } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport { selectCurrentAccountState, selectIsMultichainAccount, selectNetworkAccounts } from '../../global/selectors';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\n\nimport AddressBookItem from './AddressBookItem';\nimport Menu from './Menu';\n\nimport styles from '../transfer/Transfer.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  currentChain?: ApiChain;\n  currentAddress?: string;\n  otherAccountIds?: string[];\n  onClose: NoneToVoidFunction;\n  onAddressSelect: (address: string) => void;\n  onSavedAddressDelete: (address: string) => void;\n}\n\ninterface StateProps {\n  savedAddresses?: SavedAddress[];\n  accounts?: Record<string, Account>;\n  isMultichainAccount?: boolean;\n}\n\nfunction AddressBook({\n  isOpen, currentChain, currentAddress = '', otherAccountIds,\n  accounts, savedAddresses, isMultichainAccount,\n  onAddressSelect, onSavedAddressDelete, onClose,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const renderedSavedAddresses = useMemo(() => {\n    if (!savedAddresses || savedAddresses.length === 0) {\n      return undefined;\n    }\n\n    return savedAddresses\n      .filter((item) => {\n        return (!currentChain || item.chain === currentChain) && doesSavedAddressFitSearch(item, currentAddress);\n      })\n      .map((item) => (\n        <AddressBookItem\n          key={`saved-${item.address}-${item.chain}`}\n          address={item.address}\n          name={item.name}\n          chain={isMultichainAccount ? item.chain : undefined}\n          deleteLabel={lang('Delete')}\n          isSavedAddress\n          onClick={onAddressSelect}\n          onDeleteClick={onSavedAddressDelete}\n        />\n      ));\n  }, [currentAddress, isMultichainAccount, currentChain, lang, onAddressSelect, onSavedAddressDelete, savedAddresses]);\n\n  const renderedOtherAccounts = useMemo(() => {\n    if (!otherAccountIds || otherAccountIds.length === 0) return undefined;\n\n    const addressesToBeIgnored = savedAddresses?.map((item) => `${item.chain}:${item.address}`) ?? [];\n    const uniqueAddresses = new Set<string>();\n    const otherAccounts = otherAccountIds\n      .reduce((acc, accountId) => {\n        const account = accounts![accountId];\n\n        Object.keys(account.addressByChain).forEach((addressChain) => {\n          const address = account.addressByChain[addressChain as ApiChain];\n          const key = `${addressChain}:${address}`;\n          if (\n            address\n            && !uniqueAddresses.has(key)\n            && (!currentChain || addressChain === currentChain)\n            && (isMultichainAccount || addressChain === TONCOIN.chain)\n            && !addressesToBeIgnored.includes(`${addressChain}:${address}`)\n          ) {\n            uniqueAddresses.add(key);\n            acc.push({\n              name: account.title || shortenAddress(address)!,\n              address,\n              chain: addressChain as ApiChain,\n              isHardware: account.type === 'hardware',\n            });\n          }\n        });\n\n        return acc;\n      }, [] as (SavedAddress & { isHardware?: boolean })[]);\n\n    return otherAccounts.filter(\n      (item) => doesSavedAddressFitSearch(item, currentAddress),\n    ).map(({\n      address, name, chain: addressChain, isHardware,\n    }) => (\n      <AddressBookItem\n        key={`address-${address}-${addressChain}`}\n        address={address}\n        name={name}\n        chain={isMultichainAccount ? addressChain : undefined}\n        isHardware={isHardware}\n        onClick={onAddressSelect}\n      />\n    ));\n  }, [otherAccountIds, savedAddresses, accounts, currentChain, isMultichainAccount, currentAddress, onAddressSelect]);\n\n  const shouldRender = Boolean(renderedOtherAccounts?.length || renderedSavedAddresses?.length);\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <Menu\n      positionX=\"right\"\n      type=\"suggestion\"\n      noBackdrop\n      bubbleClassName={styles.savedAddressBubble}\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      {renderedSavedAddresses}\n      {renderedOtherAccounts}\n    </Menu>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    savedAddresses: accountState?.savedAddresses,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n    accounts: selectNetworkAccounts(global),\n  };\n})(AddressBook));\n\nfunction doesSavedAddressFitSearch(savedAddress: SavedAddress, search: string) {\n  const searchQuery = search.toLowerCase();\n  const { address, name } = savedAddress;\n\n  return (\n    address.toLowerCase().startsWith(searchQuery)\n    || address.toLowerCase().endsWith(searchQuery)\n    || name.toLowerCase().split(/\\s+/).some((part) => part.startsWith(searchQuery))\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"inputButtonWrapper\":\"L_5kIPIy\",\"inputButtonWrapperWithFocus\":\"BJFtkvaJ\",\"inputButton\":\"vnQc1YiQ\",\"inputButtonClear\":\"tl4TUzu3\",\"inputButtonTransition\":\"ayhHYxLn\",\"addressName\":\"S1nUS2km\",\"addressValue\":\"DdHkCftA\",\"addressValueSingle\":\"m2Fe0uv6\",\"inputStatic\":\"Nrn6AoJg\",\"inputWithIcon\":\"K9Nd_zOE\"};","import React, {\n  type ElementRef,\n  memo,\n  useMemo,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { Account, SavedAddress } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { isDnsDomain } from '../../util/dns';\nimport { getLocalAddressName } from '../../util/getLocalAddressName';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID,\n  IS_CLIPBOARDS_SUPPORTED,\n  IS_IOS,\n} from '../../util/windowEnvironment';\n\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport AddressBook from './AddressBook';\nimport Button from './Button';\nimport Input from './Input';\nimport Transition from './Transition';\n\nimport styles from './AddressInput.module.scss';\n\nexport const INPUT_CLEAR_BUTTON_ID = 'input-clear-button';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLInputElement | HTMLTextAreaElement>;\n  label: string;\n  value: string;\n  chain?: ApiChain;\n  isStatic?: boolean;\n  withQrScan?: boolean;\n  address: string;\n  addressName: string;\n  addressBookChain?: ApiChain;\n  accounts?: Record<string, Account>;\n  currentAccountId: string;\n  savedAddresses?: SavedAddress[];\n  validateAddress?: ({ address }: { address?: string }) => void;\n  error?: string;\n  onInput: (value: string, isValueReplaced?: boolean) => void;\n  onClose: NoneToVoidFunction;\n}\n\nconst SHORT_ADDRESS_SHIFT = 4;\nconst SHORT_SINGLE_ADDRESS_SHIFT = 11;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_SINGLE_ADDRESS_SHIFT * 2;\nconst SAVED_ADDRESS_OPEN_DELAY = 300;\n\nfunction AddressInput({\n  ref,\n  label,\n  value,\n  chain,\n  isStatic,\n  withQrScan,\n  address,\n  addressName,\n  addressBookChain,\n  accounts,\n  currentAccountId,\n  savedAddresses,\n  validateAddress,\n  error,\n  onInput,\n  onClose,\n}: OwnProps) {\n  const {\n    showNotification,\n    requestOpenQrScanner,\n  } = getActions();\n\n  const lang = useLang();\n\n  const addressBookTimeoutRef = useRef<number>();\n\n  const [addressForDeletion, setAddressForDeletion] = useState<string | undefined>();\n  const [chainForDeletion, setChainForDeletion] = useState<ApiChain | undefined>();\n  const [isAddressBookOpen, openAddressBook, closeAddressBook] = useFlag();\n  const [isFocused, markFocused, unmarkFocused] = useFlag();\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const isQrScannerSupported = useQrScannerSupport();\n  const inputId = useUniqueId('address-');\n\n  const isAddressValid = chain ? isValidAddressOrDomain(value, chain) : undefined;\n  const hasAddressError = value.length > 0 && !isAddressValid;\n  const localError = hasAddressError ? lang('Incorrect address') : undefined;\n\n  const addressBookAccountIds = useMemo(() => {\n    return accounts ? Object.keys(accounts).filter((accountId) => accountId !== currentAccountId) : [];\n  }, [currentAccountId, accounts]);\n  const shouldUseAddressBook = useMemo(() => {\n    return addressBookAccountIds.length > 0 || (savedAddresses && savedAddresses.length > 0);\n  }, [addressBookAccountIds.length, savedAddresses]);\n\n  const localAddressName = useMemo(() => {\n    return chain && value ? getLocalAddressName({\n      address: value,\n      chain,\n      currentAccountId,\n      savedAddresses,\n      accounts: accounts!,\n    }) : undefined;\n  }, [accounts, chain, currentAccountId, savedAddresses, value]);\n\n  const withPasteButton = shouldRenderPasteButton && !value;\n  const withQrButton = withQrScan && isQrScannerSupported;\n  const withButton = withQrButton || withPasteButton || !!value.length;\n\n  useEffectOnce(() => {\n    return () => {\n      if (addressBookTimeoutRef.current) {\n        window.clearTimeout(addressBookTimeoutRef.current);\n      }\n    };\n  });\n\n  const addressOverlay = useMemo(() => {\n    if (!address) return undefined;\n    const renderedAddressName = localAddressName || addressName;\n\n    const addressShort = !renderedAddressName && address.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n      ? shortenAddress(address, SHORT_SINGLE_ADDRESS_SHIFT) || ''\n      : address;\n\n    return (\n      <>\n        {renderedAddressName && <span className={styles.addressName}>{renderedAddressName}</span>}\n        <span className={buildClassName(styles.addressValue, !renderedAddressName && styles.addressValueSingle)}>\n          {renderedAddressName ? shortenAddress(address, SHORT_ADDRESS_SHIFT) : addressShort}\n        </span>\n      </>\n    );\n  }, [address, localAddressName, addressName]);\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        const newValue = text.trim();\n        onInput(newValue, true);\n\n        handleAddressCheck(newValue);\n      }\n    } catch (err: any) {\n      showNotification({ message: lang('Error reading clipboard') });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    if (IS_IOS && getIsMobileTelegramApp()) {\n      alert('Scanning is temporarily not available');\n      return;\n    }\n\n    requestOpenQrScanner();\n    onClose();\n  });\n\n  const handleAddressCheck = useLastCallback((address?: string) => {\n    if (!validateAddress) return;\n\n    if ((address && chain && isValidAddressOrDomain(address, chain)) || !address) {\n      validateAddress({ address });\n    }\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    markFocused();\n\n    if (shouldUseAddressBook) {\n      // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n      if (IS_ANDROID) {\n        addressBookTimeoutRef.current = window.setTimeout(openAddressBook, SAVED_ADDRESS_OPEN_DELAY);\n      } else {\n        openAddressBook();\n      }\n    }\n  });\n\n  const handleAddressBlur = useLastCallback((e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    unmarkFocused();\n\n    if (e.relatedTarget?.id === INPUT_CLEAR_BUTTON_ID) {\n      handleAddressBookClose();\n      handleAddressCheck(value);\n\n      return;\n    }\n\n    let addressToCheck = value;\n    if (isDnsDomain(value) && value !== value.toLowerCase()) {\n      addressToCheck = value.toLowerCase().trim();\n      onInput(addressToCheck);\n    } else if (value !== value.trim()) {\n      addressToCheck = value.trim();\n      onInput(addressToCheck);\n    }\n\n    requestAnimationFrame(() => {\n      handleAddressBookClose();\n      handleAddressCheck(addressToCheck);\n    });\n  });\n\n  const handleAddressClear = useLastCallback(() => {\n    onInput('');\n    handleAddressCheck();\n  });\n\n  const handleAddressBookClose = useLastCallback(() => {\n    if (!shouldUseAddressBook || !isAddressBookOpen) return;\n\n    closeAddressBook();\n\n    if (addressBookTimeoutRef.current) {\n      window.clearTimeout(addressBookTimeoutRef.current);\n    }\n  });\n\n  const handleDeleteSavedAddressClick = useLastCallback((address: string) => {\n    setAddressForDeletion(address);\n    setChainForDeletion(chain);\n    closeAddressBook();\n  });\n\n  const handleDeleteSavedAddressModalClose = useLastCallback(() => {\n    setAddressForDeletion(undefined);\n    setChainForDeletion(undefined);\n  });\n\n  const handleAddressBookItemSelect = useLastCallback((address: string) => {\n    onInput(address, true);\n    closeAddressBook();\n  });\n\n  function renderInputActions() {\n    const wrapperClassName = buildClassName(\n      styles.inputButtonWrapper,\n      isFocused && styles.inputButtonWrapperWithFocus,\n    );\n\n    return (\n      <Transition className={styles.inputButtonTransition} activeKey={value.length ? 0 : 1} name=\"fade\">\n        {value.length ? (\n          <div className={wrapperClassName}>\n            <Button\n              isSimple\n              id={INPUT_CLEAR_BUTTON_ID}\n              className={buildClassName(styles.inputButton, styles.inputButtonClear)}\n              onClick={handleAddressClear}\n              ariaLabel={lang('Clear')}\n            >\n              <i className=\"icon-close-filled\" aria-hidden />\n            </Button>\n          </div>\n        ) : (\n          <div className={wrapperClassName}>\n            {withQrButton && (\n              <Button\n                isSimple\n                className={styles.inputButton}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </div>\n        )}\n      </Transition>\n    );\n  }\n\n  return (\n    <>\n      <Input\n        id={inputId}\n        ref={ref}\n        className={buildClassName(isStatic && styles.inputStatic, withButton && styles.inputWithIcon)}\n        isRequired\n        isStatic={isStatic}\n        label={label}\n        placeholder={lang('Wallet address or domain')}\n        value={value}\n        error={localError || error}\n        autoCorrect={false}\n        valueOverlay={!localError ? addressOverlay : undefined}\n        onInput={onInput}\n        onFocus={handleAddressFocus}\n        onBlur={handleAddressBlur}\n      >\n        {renderInputActions()}\n      </Input>\n      {shouldUseAddressBook && (\n        <>\n          <AddressBook\n            isOpen={isAddressBookOpen}\n            currentChain={addressBookChain}\n            currentAddress={value}\n            otherAccountIds={addressBookAccountIds}\n            onAddressSelect={handleAddressBookItemSelect}\n            onSavedAddressDelete={handleDeleteSavedAddressClick}\n            onClose={closeAddressBook}\n          />\n          <DeleteSavedAddressModal\n            isOpen={Boolean(addressForDeletion)}\n            address={addressForDeletion}\n            chain={chainForDeletion}\n            onClose={handleDeleteSavedAddressModalClose}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(AddressInput);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"gRT6bZt3\",\"modalTitle\":\"cmL5TjIH\",\"headerTitle\":\"NtG0ddPE\",\"headerDate\":\"u4jvqiGf\",\"sticker\":\"BrPVwQU4\",\"transactionBanner\":\"Ps7kqvix\",\"nftContainer\":\"Dnc6lzH5\",\"multiNftChips\":\"p6JeJnTy\",\"footer\":\"W2G5uyVG\",\"button\":\"hdNHgPt2\",\"buttons\":\"jQftqhh0\",\"buttonsAfterNft\":\"uM1QBU1t\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { Account, GlobalState, SavedAddress } from '../../global/types';\nimport { DomainLinkingState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectCurrentToncoinBalance,\n  selectNetworkAccounts,\n  selectTonDnsLinkedAddress,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport useSyncEffectWithPrevDeps from '../../hooks/useSyncEffectWithPrevDeps';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport NftInfo from '../transfer/NftInfo';\nimport AddressInput from '../ui/AddressInput';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './RenewDomainModal.module.scss';\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n  currentDomainLinking: GlobalState['currentDomainLinking'];\n  byAddress?: Record<string, ApiNft>;\n  tonBalance: bigint;\n  savedAddresses?: SavedAddress[];\n  accounts?: Record<string, Account>;\n  currentTonAddress?: string;\n  currentLinkedWalletAddress?: string;\n}\n\nconst FULL_NATIVE_STATES = new Set([\n  DomainLinkingState.Password,\n  DomainLinkingState.ConnectHardware,\n  DomainLinkingState.ConfirmHardware,\n]);\n\nfunction LinkingDomainModal({\n  currentDomainLinking: {\n    address,\n    state,\n    error,\n    isLoading,\n    realFee,\n    walletAddress = '',\n    walletAddressName = '',\n    resolvedWalletAddress,\n    txId,\n  },\n  isMediaViewerOpen,\n  byAddress,\n  tonBalance,\n  accounts,\n  savedAddresses,\n  currentTonAddress,\n  currentLinkedWalletAddress,\n}: StateProps) {\n  const {\n    startDomainLinking,\n    cancelDomainLinking,\n    clearDomainLinkingError,\n    submitDomainLinking,\n    checkDomainLinkingDraft,\n    checkLinkingAddress,\n    setDomainLinkingWalletAddress,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== DomainLinkingState.None && !isMediaViewerOpen;\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n  const domainNft = address ? byAddress?.[address] : undefined;\n  const isInsufficientBalance = realFee ? tonBalance < realFee : undefined;\n  const forceFullNative = FULL_NATIVE_STATES.has(renderingKey);\n  const feeTerms = useMemo(() => (realFee ? { native: realFee } : undefined), [realFee]);\n  const modalTitle = currentLinkedWalletAddress ? 'Change Linked Wallet' : 'Link to Wallet';\n  const isAddressValid = isValidAddressOrDomain(walletAddress, 'ton');\n\n  const handleWalletAddressInput = useLastCallback((newToAddress?: string) => {\n    setDomainLinkingWalletAddress({ address: newToAddress });\n  });\n\n  const canSubmit = isAddressValid && walletAddress !== currentLinkedWalletAddress\n    && !isInsufficientBalance && !isLoading;\n\n  useSyncEffectWithPrevDeps(([prevIsOpen]) => {\n    if (!prevIsOpen && isOpen) {\n      handleWalletAddressInput(walletAddress || currentLinkedWalletAddress || currentTonAddress);\n    }\n  }, [isOpen, currentLinkedWalletAddress, walletAddress, currentTonAddress]);\n\n  useEffect(() => {\n    if (isOpen) {\n      checkDomainLinkingDraft({ nft: domainNft! });\n    }\n  }, [domainNft, isOpen]);\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    if (canSubmit) {\n      submitDomainLinking({ password });\n    }\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (canSubmit) {\n      submitDomainLinking();\n    }\n  });\n\n  const handleInfoClick = useLastCallback(() => {\n    cancelDomainLinking();\n    showActivityInfo({ id: txId! });\n  });\n\n  function renderInitialContent() {\n    return (\n      <>\n        <ModalHeader title={lang(modalTitle)} onClose={cancelDomainLinking} />\n\n        <div className={modalStyles.transitionContent}>\n          <div className={styles.nftContainer}>\n            <NftInfo nft={domainNft} withMediaViewer />\n\n            <AddressInput\n              withQrScan\n              value={walletAddress}\n              // It is necessary to allow linking of current wallet address to the domain, so pass an empty string\n              currentAccountId=\"\"\n              // Domain linking is available only for TON blockchain\n              addressBookChain=\"ton\"\n              chain=\"ton\"\n              accounts={accounts}\n              savedAddresses={savedAddresses}\n              validateAddress={checkLinkingAddress}\n              label={currentLinkedWalletAddress ? lang('Linked Wallet') : lang('Wallet')}\n              address={resolvedWalletAddress || walletAddress}\n              addressName={walletAddressName}\n              onInput={handleWalletAddressInput}\n              onClose={cancelDomainLinking}\n            />\n          </div>\n\n          <FeeLine terms={feeTerms} token={TONCOIN} precision=\"exact\" />\n          <div className={buildClassName(modalStyles.buttons, styles.footer)}>\n            <Button\n              isPrimary\n              isDestructive={isInsufficientBalance}\n              isDisabled={!canSubmit}\n              isLoading={!realFee || isLoading}\n              className={styles.button}\n              onClick={startDomainLinking}\n            >\n              {isInsufficientBalance\n                ? lang('Insufficient Balance')\n                : lang('Link')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Linking')} onClose={cancelDomainLinking} />}\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          isLoading={isLoading}\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={cancelDomainLinking}\n          onUpdate={clearDomainLinkingError}\n          skipAuthScreen\n        >\n          <TransactionBanner\n            imageUrl={domainNft?.thumbnail}\n            text={domainNft?.name ?? '1 domain'}\n            className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          />\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Domain has been linked!')} onClose={cancelDomainLinking} />\n\n        <div className={modalStyles.transitionContent}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <NftInfo nft={domainNft} withMediaViewer />\n          {!!txId && (\n            <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n              <Button onClick={handleInfoClick}>{lang('Details')}</Button>\n            </div>\n          )}\n\n          <div className={modalStyles.buttons}>\n            <Button className={styles.button} onClick={cancelDomainLinking} isPrimary>\n              {lang('Close')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: DomainLinkingState) {\n    switch (currentKey) {\n      case DomainLinkingState.Initial:\n        return renderInitialContent();\n\n      case DomainLinkingState.Password:\n        return renderPasswordForm(isActive);\n\n      case DomainLinkingState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelDomainLinking}\n          />\n        );\n\n      case DomainLinkingState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelDomainLinking}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case DomainLinkingState.Complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"link-domain\"\n      forceFullNative={forceFullNative}\n      dialogClassName={styles.modalDialog}\n      onClose={cancelDomainLinking}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const {\n      currentDomainLinking,\n      mediaViewer: { mediaId },\n    } = global;\n    const currentAccount = selectCurrentAccount(global);\n    const accountState = selectCurrentAccountState(global);\n    const { byAddress } = accountState?.nfts || {};\n    const domainNft = currentDomainLinking.address ? byAddress?.[currentDomainLinking.address] : undefined;\n    const currentLinkedWalletAddress = domainNft ? selectTonDnsLinkedAddress(global, domainNft) : '';\n\n    return {\n      isMediaViewerOpen: Boolean(mediaId),\n      currentDomainLinking,\n      byAddress,\n      tonBalance: selectCurrentToncoinBalance(global),\n      accounts: selectNetworkAccounts(global),\n      savedAddresses: accountState?.savedAddresses,\n      currentLinkedWalletAddress,\n      currentTonAddress: currentAccount?.addressByChain.ton,\n    };\n  })(LinkingDomainModal),\n);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { NftTransfer } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './NftChips.module.scss';\n\ninterface OwnProps {\n  nfts: NftTransfer[];\n  isStatic?: boolean;\n  className?: string;\n}\n\nconst LIMIT = 10;\n\nfunction NftChips({ nfts, isStatic, className }: OwnProps) {\n  const lang = useLang();\n  const [isCollapsed, , expand] = useFlag(true);\n  const shouldRenderExpander = isCollapsed && nfts.length > LIMIT + 1;\n  const renderedNfts = useMemo(\n    () => (shouldRenderExpander ? nfts.slice(0, LIMIT) : nfts),\n    [shouldRenderExpander, nfts],\n  );\n\n  function renderNft(nft: NftTransfer) {\n    return (\n      <div key={nft.address} className={styles.nft}>\n        <img src={nft.thumbnail} alt={nft.name} className={styles.image} />\n        <span className={styles.name}>{nft.name || nft.address}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, isStatic && styles.static, 'custom-scroll', className)}>\n      {renderedNfts.map(renderNft)}\n      {shouldRenderExpander && (\n        <button type=\"button\" className={styles.expander} onClick={() => expand()}>\n          +{lang('%amount% NFTs', { amount: nfts.length - LIMIT })}\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(NftChips);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OW45fd9i\",\"static\":\"h6wiRr_r\",\"nft\":\"HmnTdlh8\",\"image\":\"H3EA9Tak\",\"name\":\"_gZbYTeY\",\"expander\":\"T7bQHi3K\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport { DomainRenewalState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport { selectCurrentAccountState, selectCurrentToncoinBalance } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatFullDay, formatTime, MINUTE, YEAR } from '../../util/dateFormat';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport NftChips from '../transfer/NftChips';\nimport NftInfo from '../transfer/NftInfo';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './RenewDomainModal.module.scss';\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n  currentDomainRenewal: GlobalState['currentDomainRenewal'];\n  byAddress?: Record<string, ApiNft>;\n  tonBalance: bigint;\n}\n\nconst FULL_NATIVE_STATES = new Set([\n  DomainRenewalState.Password,\n  DomainRenewalState.ConnectHardware,\n  DomainRenewalState.ConfirmHardware,\n]);\n\nconst THUMBNAILS_COUNT = 3;\n\nfunction RenewDomainModal({\n  currentDomainRenewal: {\n    addresses,\n    state,\n    error,\n    isLoading,\n    realFee,\n    txId,\n  },\n  isMediaViewerOpen,\n  byAddress,\n  tonBalance,\n}: StateProps) {\n  const {\n    startDomainsRenewal,\n    cancelDomainsRenewal,\n    clearDomainsRenewalError,\n    submitDomainsRenewal,\n    checkDomainsRenewalDraft,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n\n  const isOpen = state !== DomainRenewalState.None && !isMediaViewerOpen;\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n  const domainNfts = useMemo(() => {\n    return (addresses || []).map((address) => byAddress?.[address]).filter<ApiNft>(Boolean);\n  }, [addresses, byAddress]);\n  const isInsufficientBalance = realFee ? tonBalance < realFee : undefined;\n  const forceFullNative = FULL_NATIVE_STATES.has(renderingKey);\n  const feeTerms = useMemo(() => (realFee ? { native: realFee } : undefined), [realFee]);\n  const newExpireTimestamp = Date.now() + YEAR;\n  const domainNftThumbnails = useMemo(() => {\n    return domainNfts.map((nft) => nft?.thumbnail).filter(Boolean).slice(0, THUMBNAILS_COUNT);\n  }, [domainNfts]);\n\n  useInterval(forceUpdate, isOpen ? MINUTE : undefined, true);\n  useEffect(() => {\n    if (isOpen) {\n      checkDomainsRenewalDraft({ nfts: domainNfts });\n    }\n  }, [domainNfts, isOpen]);\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDomainsRenewal({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    submitDomainsRenewal();\n  });\n\n  const handleInfoClick = useLastCallback(() => {\n    cancelDomainsRenewal();\n    showActivityInfo({ id: txId! });\n  });\n\n  function renderHeader() {\n    return (\n      <div className={buildClassName(modalStyles.header, modalStyles.header_wideContent)}>\n        <div className={buildClassName(modalStyles.title, styles.modalTitle)}>\n          <div className={styles.headerTitle}>\n            {lang(addresses && addresses.length > 1 ? 'Renew Domains' : 'Renew Domain')}\n          </div>\n          {!!newExpireTimestamp && (\n            <div className={styles.headerDate}>\n              {lang('Until %date%', {\n                date: [formatFullDay(lang.code!, newExpireTimestamp), formatTime(newExpireTimestamp)].join(', '),\n              })}\n            </div>\n          )}\n        </div>\n        <Button isRound className={modalStyles.closeButton} ariaLabel={lang('Close')} onClick={cancelDomainsRenewal}>\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      </div>\n    );\n  }\n\n  function renderInitialContent() {\n    return (\n      <div className={modalStyles.transitionContent}>\n        <div className={styles.nftContainer}>\n          {domainNfts.length === 1 && <NftInfo nft={domainNfts[0]} withMediaViewer />}\n          {domainNfts.length > 1 && <NftChips nfts={domainNfts} className={styles.multiNftChips} />}\n        </div>\n\n        <FeeLine terms={feeTerms} token={TONCOIN} precision=\"exact\" />\n        <div className={buildClassName(modalStyles.buttons, styles.footer)}>\n          <Button\n            isPrimary\n            isDestructive={isInsufficientBalance}\n            isDisabled={isInsufficientBalance}\n            isLoading={!realFee || isLoading}\n            className={styles.button}\n            onClick={startDomainsRenewal}\n          >\n            {isInsufficientBalance\n              ? lang('Insufficient Balance')\n              : domainNfts.length > 1\n                ? lang('Renew All')\n                : lang('Renew')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Renewing')} onClose={cancelDomainsRenewal} />}\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          isLoading={isLoading}\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={cancelDomainsRenewal}\n          onUpdate={clearDomainsRenewalError}\n          skipAuthScreen\n        >\n          <TransactionBanner\n            imageUrl={domainNftThumbnails}\n            text={\n              domainNfts.length === 1 && Boolean(domainNfts[0]?.name)\n                ? domainNfts[0]?.name\n                : lang('$domains_amount %1$d', domainNfts.length, 'i')\n            }\n            className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          />\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={domainNfts.length > 1 ? lang('Domains have been renewed!') : lang('Domain has been renewed!')}\n          onClose={cancelDomainsRenewal}\n        />\n\n        <div className={modalStyles.transitionContent}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <div className={styles.nftContainer}>\n            {domainNfts.length === 1 && <NftInfo nft={domainNfts[0]} withMediaViewer />}\n            {domainNfts.length > 1 && <NftChips nfts={domainNfts} />}\n\n            {domainNfts.length === 1 && !!txId && (\n              <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n                <Button onClick={handleInfoClick}>{lang('Details')}</Button>\n              </div>\n            )}\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelDomainsRenewal} isPrimary>\n              {lang('Close')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: DomainRenewalState) {\n    switch (currentKey) {\n      case DomainRenewalState.Initial:\n        return (\n          <>\n            {renderHeader()}\n            {renderInitialContent()}\n          </>\n        );\n\n      case DomainRenewalState.Password:\n        return renderPasswordForm(isActive);\n\n      case DomainRenewalState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelDomainsRenewal}\n          />\n        );\n\n      case DomainRenewalState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelDomainsRenewal}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case DomainRenewalState.Complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"renew-domain\"\n      forceFullNative={forceFullNative}\n      dialogClassName={styles.modalDialog}\n      onClose={cancelDomainsRenewal}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const {\n      currentDomainRenewal,\n      mediaViewer: { mediaId },\n    } = global;\n    const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n\n    return {\n      isMediaViewerOpen: Boolean(mediaId),\n      currentDomainRenewal,\n      byAddress,\n      tonBalance: selectCurrentToncoinBalance(global),\n    };\n  })(RenewDomainModal),\n);\n","// https://github.com/toncenter/tonweb/blob/944455da2effaa307a2030d00e19a37e6e94897c/src/utils/index.js#L94-L109\nexport default function formatTransferUrl(address: string, amount?: bigint, text?: string, jettonAddress?: string) {\n  const url = `ton://transfer/${address}`;\n\n  const params = [];\n\n  if (amount) {\n    params.push(`amount=${amount}`);\n  }\n  if (text) {\n    params.push(`text=${encodeURIComponent(text)}`);\n  }\n  if (jettonAddress) {\n    params.push(`jetton=${encodeURIComponent(jettonAddress)}`);\n  }\n\n  if (params.length === 0) return url;\n\n  return `${url}?${params.join('&')}`;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ZSZY1phv\",\"slide\":\"vCCqOvOq\",\"button\":\"XIxoy7tw\",\"tokenIcon\":\"SS8KpgmL\",\"content\":\"ISsYr_9r\",\"chevronIcon\":\"D_7DrGaN\"};","import React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { setExtraStyles } from '../../lib/teact/teact-dom';\n\nimport type { ApiToken } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { REM } from '../../util/windowEnvironment';\n\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport Transition from '../ui/Transition';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './SelectTokenButton.module.scss';\n\ninterface OwnProps {\n  token?: ApiToken;\n  noChainIcon?: boolean;\n  className?: string;\n  onClick: NoneToVoidFunction;\n}\n\nfunction SelectTokenButton({\n  token, className, noChainIcon, onClick,\n}: OwnProps) {\n  const { transitionRef } = useSelectorWidth(token);\n  const buttonTransitionKeyRef = useRef(0);\n  const buttonStateStr = `${token?.symbol}_${token?.chain}`;\n\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [buttonStateStr]);\n\n  function handleClick(e: React.MouseEvent<HTMLButtonElement>) {\n    stopEvent(e);\n\n    onClick();\n  }\n\n  function renderToken(tokenToRender?: ApiToken) {\n    return (\n      <Transition\n        ref={transitionRef}\n        name=\"fade\"\n        activeKey={buttonTransitionKeyRef.current}\n        className={buildClassName(styles.wrapper, className)}\n        slideClassName={styles.slide}\n      >\n        <button\n          type=\"button\"\n          className={styles.button}\n          onClick={handleClick}\n        >\n          {tokenToRender && (\n            <TokenIcon\n              token={tokenToRender}\n              withChainIcon={!noChainIcon}\n              size=\"middle\"\n              className={styles.tokenIcon}\n            />\n          )}\n          <div className={styles.content}>\n            <span>{tokenToRender?.symbol}</span>\n            <i className={buildClassName('icon-chevron-right', styles.chevronIcon)} aria-hidden />\n          </div>\n        </button>\n      </Transition>\n    );\n  }\n\n  return renderToken(token);\n}\n\nexport default memo(SelectTokenButton);\n\nconst BUTTON_WIDTH = 70 / REM;\nconst CHARACTER_WIDTH = 10;\n\nfunction useSelectorWidth(token?: ApiToken) {\n  const transitionRef = useRef<HTMLDivElement>();\n\n  useLayoutEffect(() => {\n    if (!transitionRef.current || !token) return;\n\n    const symbolWidth = (token.symbol.length * CHARACTER_WIDTH) / REM;\n    const minWidth = `${symbolWidth + BUTTON_WIDTH}rem`;\n\n    setExtraStyles(transitionRef.current, {\n      minWidth,\n    });\n  }, [token]);\n\n  return {\n    transitionRef,\n  };\n}\n","const NETWORK_NAMES_EXCEPTIONS: Record<string, string> = {\n  binance_smart_chain: 'Binance Smart Chain',\n  internet_computer: 'Internet Computer',\n  ethereum_classic: 'Ethereum Classic',\n  bitcoin_cash: 'Bitcoin Cash',\n  binance_dex: 'Binance Dex',\n  ton: 'TON',\n  bitcoin: 'Bitcoin',\n  ethereum: 'Ethereum',\n  solana: 'Solana',\n  tron: 'TRON',\n  stellar: 'Stellar',\n  doge: 'DOGE',\n  eos: 'EOS',\n  avalanche: 'Avalanche',\n  cardano: 'Cardano',\n  monero: 'Monero',\n  dash: 'Dash',\n  ripple: 'Ripple',\n  cosmos: 'Cosmos',\n  litecoin: 'Litecoin',\n  zcash: 'Zcash',\n  polkadot: 'Polkadot',\n  iota: 'IOTA',\n};\n\nexport default function getChainNetworkName(networkName?: string) {\n  if (!networkName) return '';\n\n  return NETWORK_NAMES_EXCEPTIONS[networkName] ?? networkName;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"tokenSelectInputWrapper\":\"oCuiJXQ_\",\"tokenSelectSearchIcon\":\"zftr1vD0\",\"tokenSelectSearchResetWrapper\":\"Ss4Pd7B2\",\"tokenSelectSearchReset\":\"oDrN01CP\",\"tokenSelectSearchResetIcon\":\"ok_5nHql\",\"tokenSelectInput\":\"fDjHi6pe\",\"tokenSelectContent\":\"LodBlyss\",\"tokenGroupContainer\":\"MbjJDq0G\",\"tokenGroupHeader\":\"RpUAt2yS\",\"tokenGroupTitle\":\"WhzSaV_6\",\"tokenGroupAdditionalTitle\":\"FdHSpaSV\",\"tokenContainer\":\"eUkSUO8W\",\"tokenContainerDisabled\":\"tHJSsGRH\",\"tokenLogoContainer\":\"nsViIoST\",\"logoContainer\":\"adBlSlrG\",\"tokenLogoSkeleton\":\"cGf45x9B\",\"tokenLogoSymbol\":\"PSK73bRe\",\"tokenLogo\":\"xiUmZwCy\",\"tokenLogoDisabled\":\"OwvlXRrn\",\"tokenNetworkLogoSkeleton\":\"MO1xaZfl\",\"nameContainer\":\"ZPTo397c\",\"tokenPriceContainer\":\"qGxMTfbW\",\"tokenName\":\"Wgp2h4bc\",\"tokenAmount\":\"QWmp5WQP\",\"tokenNetwork\":\"gBNLwjjP\",\"tokenValue\":\"S1V0VVx3\",\"tokenNameSkeleton\":\"GkqdgXVp\",\"tokenValueSkeleton\":\"AhEbK2G0\",\"tokenNotFound\":\"zp0dyh68\",\"tokenNotFoundTitle\":\"R7aa_jfY\",\"tokenNotFoundDesc\":\"XlzS0_qG\",\"tokenTextDisabled\":\"lotwVvdo\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiChain } from '../../api/types';\nimport {\n  type AssetPairs, SettingsState, type UserSwapToken, type UserToken,\n} from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX, TON_USDT_SLUG, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG,\n} from '../../config';\nimport {\n  selectAvailableUserForSwapTokens,\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectPopularTokens,\n  selectSwapTokens,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport ModalHeader from '../ui/ModalHeader';\nimport SensitiveData from '../ui/SensitiveData';\nimport Transition from '../ui/Transition';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TokenSelector.module.scss';\n\ntype TokenType = UserToken | UserSwapToken;\n\ntype TokenSortFactors = {\n  tickerExactMatch: number;\n  tickerMatchLength: number;\n  nameMatchLength: number;\n  specialOrder: number;\n};\n\ninterface OwnProps {\n  isActive?: boolean;\n  shouldFilter?: boolean;\n  shouldUseSwapTokens?: boolean;\n  shouldHideMyTokens?: boolean;\n  shouldHideNotSupportedTokens?: boolean;\n  selectedChain?: ApiChain;\n  header?: TeactNode;\n  onClose: NoneToVoidFunction;\n  onBack: NoneToVoidFunction;\n  onTokenSelect: (token: TokenType) => void;\n}\n\ninterface StateProps {\n  token?: TokenType;\n  userTokens?: TokenType[];\n  popularTokens?: TokenType[];\n  swapTokens?: UserSwapToken[];\n  tokenInSlug?: string;\n  pairsBySlug?: Record<string, AssetPairs>;\n  shouldShowAllPairs?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  isLoading?: boolean;\n  isMultichain: boolean;\n  availableChains?: Partial<Record<ApiChain, unknown>>;\n  isSensitiveDataHidden?: true;\n}\n\nenum SearchState {\n  Initial,\n  Search,\n  Loading,\n  TokenByAddress,\n  Empty,\n}\n\nconst EMPTY_ARRAY: never[] = [];\nconst EMPTY_OBJECT = {};\n\nfunction TokenSelector({\n  token,\n  userTokens: userTokensProp = EMPTY_ARRAY,\n  swapTokens = EMPTY_ARRAY,\n  popularTokens: popularTokensProp = EMPTY_ARRAY,\n  header,\n  shouldFilter,\n  shouldUseSwapTokens,\n  baseCurrency,\n  tokenInSlug,\n  pairsBySlug,\n  shouldShowAllPairs,\n  isActive,\n  isLoading,\n  shouldHideMyTokens,\n  shouldHideNotSupportedTokens = false,\n  isMultichain,\n  availableChains = EMPTY_OBJECT,\n  selectedChain,\n  isSensitiveDataHidden,\n  onTokenSelect,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const { importToken, resetImportToken, openSettingsWithState } = getActions();\n  const lang = useLang();\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const scrollContainerRef = useRef<HTMLDivElement>();\n  const searchInputRef = useRef<HTMLInputElement>();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return enableSwipeToClose;\n  }, [isActive]);\n\n  useFocusAfterAnimation(searchInputRef, !isActive);\n\n  const {\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [searchValue, setSearchValue] = useState('');\n  const [isResetButtonVisible, setIsResetButtonVisible] = useState(false);\n  const [renderingKey, setRenderingKey] = useState(SearchState.Initial);\n  const [searchTokenList, setSearchTokenList] = useState<TokenType[]>([]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const filterTokens = useCallback((tokens: TokenType[]) => {\n    return filterAndSortTokens(tokens, isMultichain, tokenInSlug, pairsBySlug, shouldShowAllPairs);\n  }, [pairsBySlug, tokenInSlug, isMultichain, shouldShowAllPairs]);\n\n  const userTokens = useMemo(\n    () => filterSupportedTokens(userTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [userTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const allTokens = useMemo(\n    () => filterSupportedTokens(swapTokens, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [swapTokens, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const popularTokens = useMemo(\n    () => filterSupportedTokens(popularTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [popularTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const { userTokensWithFilter, popularTokensWithFilter, swapTokensWithFilter } = useMemo(() => {\n    if (!shouldFilter) {\n      return {\n        userTokensWithFilter: userTokens,\n        popularTokensWithFilter: popularTokens,\n        swapTokensWithFilter: swapTokens,\n      };\n    }\n\n    return {\n      userTokensWithFilter: filterTokens(userTokens),\n      popularTokensWithFilter: filterTokens(popularTokens),\n      swapTokensWithFilter: filterTokens(swapTokens),\n    };\n  }, [filterTokens, popularTokens, shouldFilter, swapTokens, userTokens]);\n\n  const filteredTokenList = useMemo(() => {\n    const tokensToFilter = shouldUseSwapTokens ? swapTokensWithFilter : allTokens;\n    const untrimmedSearchValue = searchValue.toLowerCase();\n    const lowerCaseSearchValue = untrimmedSearchValue.trim();\n\n    if (untrimmedSearchValue.length && !lowerCaseSearchValue.length) {\n      return [];\n    }\n\n    const filteredTokens = tokensToFilter.filter(({\n      name, symbol, keywords, isDisabled,\n    }) => {\n      if (isDisabled) {\n        return false;\n      }\n\n      const isName = name.toLowerCase().includes(lowerCaseSearchValue);\n      const isSymbol = symbol.toLowerCase().includes(lowerCaseSearchValue);\n      const isKeyword = keywords?.some((key) => key.toLowerCase().includes(lowerCaseSearchValue));\n\n      return isName || isSymbol || isKeyword;\n    }) ?? [];\n\n    const sortFactors = filteredTokens.reduce((acc, searchResultToken) => {\n      const factors = {\n        tickerExactMatch: 0,\n        tickerMatchLength: 0,\n        nameMatchLength: 0,\n        specialOrder: 0, // The higher the value, the higher the position\n      };\n\n      const tokenSymbol = searchResultToken.symbol.toLowerCase();\n      const tokenName = searchResultToken.name.toLowerCase();\n\n      if (tokenSymbol === lowerCaseSearchValue) {\n        factors.tickerExactMatch = 1;\n      }\n\n      if (tokenSymbol.includes(lowerCaseSearchValue)) {\n        factors.tickerMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (tokenName.includes(lowerCaseSearchValue)) {\n        factors.nameMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (searchResultToken.slug === TON_USDT_SLUG) {\n        factors.specialOrder = 2;\n      }\n\n      if (searchResultToken.slug === TRC20_USDT_MAINNET_SLUG || searchResultToken.slug === TRC20_USDT_TESTNET_SLUG) {\n        factors.specialOrder = 1;\n      }\n\n      acc[searchResultToken.slug] = factors;\n\n      return acc;\n    }, {} as Record<string, TokenSortFactors>);\n\n    return filteredTokens.sort((a, b) => {\n      const factorA = sortFactors[a.slug];\n      const factorB = sortFactors[b.slug];\n      const comparisonResult = compareTokens(factorA, factorB);\n      if (comparisonResult !== 0) return comparisonResult;\n\n      return Number(b.amount - a.amount);\n    });\n  }, [allTokens, shouldUseSwapTokens, searchValue, swapTokensWithFilter]);\n\n  const resetSearch = () => {\n    setSearchValue('');\n  };\n\n  useSyncEffect(() => {\n    setIsResetButtonVisible(Boolean(searchValue.length));\n\n    const isValidAddress = isValidAddressOrDomain(searchValue, 'ton');\n    let newRenderingKey = SearchState.Initial;\n\n    if (isLoading && isValidAddress) {\n      newRenderingKey = SearchState.Loading;\n    } else if (token && isValidAddress) {\n      newRenderingKey = SearchState.TokenByAddress;\n    } else if (searchValue.length && filteredTokenList.length !== 0) {\n      newRenderingKey = SearchState.Search;\n    } else if (filteredTokenList.length === 0) {\n      newRenderingKey = SearchState.Empty;\n    }\n\n    setRenderingKey(newRenderingKey);\n\n    if (newRenderingKey !== SearchState.Initial) {\n      setSearchTokenList(filteredTokenList);\n    }\n  }, [searchTokenList.length, isLoading, searchValue, token, filteredTokenList]);\n\n  useEffect(() => {\n    if ('ton' in availableChains && isValidAddressOrDomain(searchValue, 'ton')) {\n      importToken({ address: searchValue, isSwap: true });\n      setRenderingKey(SearchState.Loading);\n    } else {\n      resetImportToken();\n    }\n  }, [searchValue, availableChains]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !scrollContainerRef.current) return;\n\n    scrollContainerRef.current.scrollTop = 0;\n  }, [isActive]);\n\n  const handleTokenClick = useLastCallback((selectedToken: TokenType) => {\n    searchInputRef.current?.blur();\n\n    onTokenSelect(selectedToken);\n\n    resetSearch();\n\n    onBack();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    onClose();\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  function renderSearch() {\n    return (\n      <div className={styles.tokenSelectInputWrapper}>\n        <i className={buildClassName(styles.tokenSelectSearchIcon, 'icon-search')} aria-hidden />\n        <input\n          ref={searchInputRef}\n          name=\"token-search-modal\"\n          className={styles.tokenSelectInput}\n          onChange={(e) => setSearchValue(e.target.value)}\n          placeholder={lang('Name or Address...')}\n          value={searchValue}\n        />\n        <Transition\n          name=\"fade\"\n          activeKey={isResetButtonVisible ? 0 : 1}\n          className={styles.tokenSelectSearchResetWrapper}\n        >\n          {isResetButtonVisible && (\n            <button\n              type=\"button\"\n              className={styles.tokenSelectSearchReset}\n              aria-label={lang('Clear')}\n              onClick={resetSearch}\n            >\n              <i className={buildClassName(styles.tokenSelectSearchResetIcon, 'icon-close')} aria-hidden />\n            </button>\n          )}\n        </Transition>\n      </div>\n    );\n  }\n\n  function renderToken(currentToken: TokenType) {\n    const isAvailable = Boolean(!shouldFilter || currentToken.canSwap);\n    const withChainIcon = Boolean((isMultichain || shouldUseSwapTokens) && !selectedChain);\n    const descriptionText = isAvailable\n      ? getChainNetworkName(currentToken.chain)\n      : lang('Unavailable');\n\n    const tokenPrice = currentToken.price === 0\n      ? lang('No Price')\n      : formatCurrency(currentToken.price, shortBaseSymbol, undefined, true);\n\n    return (\n      <Token\n        key={currentToken.slug}\n        isAvailable={isAvailable}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        withChainIcon={withChainIcon}\n        descriptionText={descriptionText}\n        token={currentToken}\n        tokenPrice={tokenPrice}\n        onSelect={handleTokenClick}\n      />\n    );\n  }\n\n  function renderTokenGroup(tokens: TokenType[], title: string, shouldShowSettings?: boolean) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        <div className={styles.tokenGroupHeader}>\n          <span className={styles.tokenGroupTitle}>{title}</span>\n          {shouldShowSettings && (\n            <span\n              className={styles.tokenGroupAdditionalTitle}\n              onClick={handleOpenSettings}\n            >\n              {lang('Settings')}\n            </span>\n          )}\n        </div>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderAllTokens(tokens: TokenType[]) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderTokenSkeleton() {\n    return (\n      <div className={buildClassName(styles.tokenContainer, styles.tokenContainerDisabled)}>\n        <div className={styles.tokenLogoContainer}>\n          <div className={styles.logoContainer}>\n            <div className={styles.tokenLogoSkeleton} />\n            <div className={styles.tokenNetworkLogoSkeleton} />\n          </div>\n          <div className={styles.nameContainer}>\n            <span className={styles.tokenNameSkeleton} />\n            <span className={styles.tokenValueSkeleton} />\n          </div>\n        </div>\n        <div className={styles.tokenPriceContainer}>\n          <span className={buildClassName(styles.tokenNameSkeleton, styles.rotateSkeleton)} />\n          <span className={styles.tokenValueSkeleton} />\n        </div>\n      </div>\n    );\n  }\n\n  function renderNotFound(shouldPlay: boolean) {\n    return (\n      <div className={styles.tokenNotFound}>\n        <AnimatedIconWithPreview\n          play={shouldPlay}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <span className={styles.tokenNotFoundTitle}>{lang('Not Found')}</span>\n        <span className={styles.tokenNotFoundDesc}>{lang('Try another keyword or address.')}</span>\n      </div>\n    );\n  }\n\n  function renderSearchResults(tokenToImport?: TokenType) {\n    if (tokenToImport) {\n      return (\n        <div className={styles.tokenGroupContainer}>\n          {renderToken(tokenToImport)}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n      </>\n    );\n  }\n\n  function renderTokenGroups() {\n    return (\n      <>\n        {!shouldHideMyTokens && renderTokenGroup(userTokensWithFilter, lang('MY'), true)}\n        {renderTokenGroup(popularTokensWithFilter, lang('POPULAR'))}\n      </>\n    );\n  }\n\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: SearchState) {\n    switch (currentKey) {\n      case SearchState.Initial:\n        return renderTokenGroups();\n      case SearchState.Loading:\n        return renderSearchResults();\n      case SearchState.Search:\n        return renderAllTokens(searchTokenList);\n      case SearchState.TokenByAddress:\n        return renderSearchResults(token);\n      case SearchState.Empty:\n        return renderNotFound(isContentActive);\n    }\n  }\n\n  return (\n    <>\n      {header || (\n        <ModalHeader\n          title={lang('Select Token')}\n          onBackButtonClick={onBack}\n          onClose={onClose}\n        />\n      )}\n      {renderSearch()}\n\n      <div\n        ref={scrollContainerRef}\n        className={buildClassName(styles.tokenSelectContent, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition name=\"fade\" activeKey={renderingKey}>\n          {renderContent}\n        </Transition>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { baseCurrency, isSensitiveDataHidden } = global.settings;\n  const { isLoading, token } = global.settings.importToken ?? {};\n  const { tokenInSlug, shouldShowAllPairs } = global.currentSwap ?? {};\n  const pairsBySlug = global.swapPairs?.bySlug;\n  const userTokens = selectAvailableUserForSwapTokens(global);\n  const popularTokens = selectPopularTokens(global);\n  const swapTokens = selectSwapTokens(global);\n  const isMultichain = selectIsMultichainAccount(global, global.currentAccountId!);\n  const availableChains = selectCurrentAccount(global)?.addressByChain;\n\n  return {\n    baseCurrency,\n    isLoading,\n    token,\n    pairsBySlug,\n    shouldShowAllPairs,\n    tokenInSlug,\n    userTokens,\n    popularTokens,\n    swapTokens,\n    isMultichain,\n    availableChains,\n    isSensitiveDataHidden,\n  };\n})(TokenSelector));\n\nfunction Token({\n  token,\n  isAvailable,\n  isSensitiveDataHidden,\n  withChainIcon,\n  descriptionText,\n  tokenPrice,\n  onSelect,\n}: {\n  token: TokenType;\n  isAvailable: boolean;\n  isSensitiveDataHidden?: true;\n  withChainIcon: boolean;\n  descriptionText: string;\n  tokenPrice: string;\n  onSelect: (token: TokenType) => void;\n}) {\n  const handleClick = isAvailable ? () => onSelect(token) : undefined;\n  const cols = useMemo(() => getPseudoRandomNumber(4, 10, token.slug), [token.slug]);\n\n  return (\n    <div\n\n      className={buildClassName(\n        styles.tokenContainer,\n        !isAvailable && styles.tokenContainerDisabled,\n      )}\n      onClick={handleClick}\n    >\n      <div className={styles.tokenLogoContainer}>\n        <TokenIcon\n          token={token}\n          withChainIcon={withChainIcon}\n          className={buildClassName(styles.tokenLogo, !isAvailable && styles.tokenLogoDisabled)}\n        />\n\n        <div className={styles.nameContainer}>\n          <span className={buildClassName(styles.tokenName, !isAvailable && styles.tokenTextDisabled)}>\n            {token.name}\n          </span>\n          <span\n            className={buildClassName(\n              styles.tokenNetwork,\n              !isAvailable && styles.tokenTextDisabled,\n            )}\n          >\n            {descriptionText}\n          </span>\n        </div>\n      </div>\n      <div className={styles.tokenPriceContainer}>\n        <SensitiveData\n          isActive={isSensitiveDataHidden}\n          cols={cols}\n          rows={2}\n          cellSize={8}\n          align=\"right\"\n          className={buildClassName(\n            styles.tokenAmount,\n            !isAvailable && styles.tokenTextDisabled,\n          )}\n        >\n          {formatCurrency(toDecimal(token.amount, token?.decimals), token.symbol)}\n        </SensitiveData>\n        <span className={buildClassName(\n          styles.tokenValue,\n          !isAvailable && styles.tokenTextDisabled,\n        )}\n        >\n          {tokenPrice}\n        </span>\n      </div>\n    </div>\n  );\n}\n\nfunction filterAndSortTokens(\n  tokens: TokenType[],\n  isMultichain: boolean,\n  tokenInSlug?: string,\n  pairsBySlug?: Record<string, AssetPairs>,\n  shouldShowAllPairs?: boolean,\n) {\n  if (!tokens.length || !tokenInSlug) return [];\n\n  return tokens.map((token) => {\n    let canSwap: boolean;\n\n    if (shouldShowAllPairs) {\n      canSwap = true;\n    } else {\n      const pair = pairsBySlug?.[tokenInSlug]?.[token.slug];\n      canSwap = Boolean(isMultichain ? pair : (pair && !pair.isMultichain));\n    }\n    return { ...token, canSwap };\n  }).sort((a, b) => Number(b.canSwap) - Number(a.canSwap));\n}\n\nfunction compareTokens(a: TokenSortFactors, b: TokenSortFactors) {\n  if (a.specialOrder !== b.specialOrder) {\n    return b.specialOrder - a.specialOrder;\n  }\n  if (a.tickerExactMatch !== b.tickerExactMatch) {\n    return b.tickerExactMatch - a.tickerExactMatch;\n  }\n  if (a.tickerMatchLength !== b.tickerMatchLength) {\n    return b.tickerMatchLength - a.tickerMatchLength;\n  }\n  return b.nameMatchLength - a.nameMatchLength;\n}\n\nfunction filterSupportedTokens<T extends TokenType>(\n  tokens: T[],\n  isFilterActive: boolean,\n  availableChains: Partial<Record<ApiChain, unknown>>,\n  selectedChain?: ApiChain,\n): T[] {\n  if (!isFilterActive && !selectedChain) {\n    return tokens;\n  }\n\n  return tokens.filter((token) => {\n    if (isFilterActive && !(token.chain in availableChains)) {\n      return false;\n    }\n\n    return !(selectedChain && token.chain !== selectedChain);\n  });\n}\n","import { FRACTION_DIGITS, WHOLE_PART_DELIMITER } from '../../../config';\n\nimport styles from '../Input.module.scss';\n\nexport function buildContentHtml(\n  text: string,\n  prefix = '',\n  suffix = '',\n  decimals = FRACTION_DIGITS,\n  withRadix = false,\n) {\n  text = sanitizeHtml(text);\n  prefix = sanitizeHtml(prefix);\n  suffix = sanitizeHtml(suffix);\n\n  if (!text) {\n    return '';\n  }\n\n  const hasDot = text.includes('.');\n  const [wholePart = '0', fractionPart] = hasDot ? text.split('.') : [text];\n\n  const formattedWholePart = withRadix\n    ? wholePart.replace(/\\d(?=(\\d{3})+($|\\.))/g, `$&${WHOLE_PART_DELIMITER}`)\n    : wholePart;\n  const fractionStr = hasDot ? `.${(fractionPart || '').substring(0, decimals)}` : '';\n  const suffixStr = suffix ? `&thinsp;${suffix}` : '';\n  const extraSpan = fractionStr || suffixStr ? (\n    `<span class=\"${styles.fractional}\">${fractionStr}${suffixStr}</span>`\n  ) : '';\n\n  return `${prefix}${formattedWholePart}${extraSpan}`;\n}\n\nfunction sanitizeHtml(string: string) {\n  const tempEl = document.createElement('span');\n  tempEl.textContent = string;\n  return tempEl.innerHTML;\n}\n","import { type ElementRef, useRef } from '../lib/teact/teact';\n\nimport { suppressStrict } from '../lib/fasterdom/stricterdom';\nimport buildClassName from '../util/buildClassName';\nimport useLastCallback from './useLastCallback';\n\nconst MIN_SIZE_SCALE = 0.25; // 12px\n\nfunction useFontScale(inputRef: ElementRef<HTMLElement>, shouldGetParentWidth?: boolean) {\n  const isFontChangedRef = useRef(false);\n  const measureEl = useRef(document.createElement('div'));\n\n  const updateFontScale = useLastCallback(() => {\n    const input = inputRef.current;\n\n    suppressStrict(() => {\n      if (!input?.offsetParent) return;\n\n      let { clientWidth: width } = shouldGetParentWidth ? input.parentElement! : input;\n\n      if (shouldGetParentWidth) {\n        const { paddingLeft, paddingRight } = getComputedStyle(input);\n        width -= parseFloat(paddingLeft) + parseFloat(paddingRight);\n      }\n      measureEl.current.className = buildClassName(input.className, 'measure-hidden');\n      measureEl.current.style.width = `${width}px`;\n      measureEl.current.innerHTML = ''; // `measureEl.current.innerHTML = input.innerHTML` is not used, because it violates the CSP\n      measureEl.current.append(...input.cloneNode(true).childNodes);\n      document.body.appendChild(measureEl.current);\n\n      let scale = 1;\n\n      while (scale > MIN_SIZE_SCALE) {\n        measureEl.current.style.setProperty('--font-size-scale', scale.toString());\n\n        if (measureEl.current.scrollWidth <= width) break;\n        scale -= 0.05;\n      }\n\n      isFontChangedRef.current = scale < 1;\n      document.body.removeChild(measureEl.current);\n      measureEl.current.className = '';\n      input.style.setProperty('--font-size-scale', scale.toString());\n    });\n  });\n\n  return { updateFontScale, isFontChangedRef };\n}\n\nexport default useFontScale;\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { saveCaretPosition } from '../../util/saveCaretPosition';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFontScale from '../../hooks/useFontScale';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: TeactNode;\n  value?: string;\n  hasError?: boolean;\n  isLoading?: boolean;\n  prefix?: string;\n  suffix?: string;\n  className?: string;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  cornerClassName?: string;\n  children?: TeactNode;\n  onChange?: (value?: string) => void;\n  onBlur?: NoneToVoidFunction;\n  onFocus?: NoneToVoidFunction;\n  onPressEnter?: (e: React.KeyboardEvent<HTMLDivElement>) => void;\n  /** Expected to fire when regardless of the `disabled` prop value */\n  onInputClick?: NoneToVoidFunction;\n  decimals?: number;\n  disabled?: boolean;\n  isStatic?: boolean;\n  size?: 'large' | 'normal';\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberInput({\n  id,\n  labelText,\n  hasError,\n  isLoading = false,\n  prefix = '',\n  suffix = '',\n  value,\n  children,\n  className,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  cornerClassName,\n  onChange,\n  onBlur,\n  onFocus,\n  onPressEnter,\n  onInputClick,\n  decimals = FRACTION_DIGITS,\n  disabled = false,\n  isStatic = false,\n  size = 'large',\n}: OwnProps) {\n  const inputRef = useRef<HTMLInputElement>();\n  const placeholderRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n\n  const [hasFocus, markHasFocus, unmarkHasFocus] = useFlag(false);\n  const { updateFontScale, isFontChangedRef } = useFontScale(inputRef);\n\n  const textRef = useRef('');\n\n  const updateHtml = useLastCallback((newText: string) => {\n    const input = inputRef.current!;\n    const html = buildContentHtml(newText, prefix, suffix, decimals);\n\n    // Don't use the :empty pseudo-class to hide the placeholder, because it's noticeable delayed on iOS\n    placeholderRef.current!.innerHTML = newText ? '' : buildContentHtml('0', prefix, suffix);\n\n    if (html !== input.innerHTML) {\n      const restoreCaretPosition = document.activeElement === input\n        ? saveCaretPosition(input, prefix.length, decimals)\n        : undefined;\n\n      input.innerHTML = html;\n      restoreCaretPosition?.();\n    }\n\n    if (`${prefix}${newText}${suffix}`.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale();\n    }\n  });\n\n  useLayoutEffect(() => {\n    const newText = clearText(value);\n\n    if (!newText || !textRef.current.startsWith(newText)) {\n      updateHtml(newText);\n      textRef.current = newText;\n    }\n  }, [textRef, value]);\n\n  useLayoutEffect(() => {\n    updateHtml(textRef.current);\n  }, [prefix, suffix, decimals]);\n\n  function handleChange(e: React.FormEvent<HTMLDivElement>) {\n    const newText = clearText(e.currentTarget.textContent ?? undefined);\n\n    updateHtml(newText);\n\n    if (newText !== textRef.current) {\n      textRef.current = newText;\n\n      if (onChange && isValidValue(newText)) {\n        onChange(newText);\n      }\n    }\n  }\n\n  const handleFocus = useLastCallback(() => {\n    if (disabled) return;\n\n    markHasFocus();\n    onFocus?.();\n  });\n\n  const handleBlur = useLastCallback(() => {\n    if (disabled) return;\n\n    unmarkHasFocus();\n    onBlur?.();\n  });\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.key === 'Enter') {\n      onPressEnter?.(e);\n    }\n  };\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    isStatic && styles.inputWrapperStatic,\n    hasError && styles.error,\n    hasFocus && styles.input__wrapper_hasFocus,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.input,\n    size === 'large' && styles.large,\n    valueClassName,\n    disabled && styles.disabled,\n    isLoading && styles.isLoading,\n    'rounded-font',\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    hasError && styles.error,\n    labelClassName,\n  );\n  const cornerFullClass = buildClassName(\n    cornerClassName,\n    hasFocus && styles.swapCorner,\n    hasError && styles.swapCorner_error,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {Boolean(labelText) && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        <div className={styles.rich}>\n          <div\n            ref={inputRef}\n            contentEditable={!disabled && !isLoading}\n            id={id}\n            role=\"textbox\"\n            aria-required\n            aria-placeholder={lang('Amount value')}\n            aria-labelledby={labelText ? `${id}Label` : undefined}\n            tabIndex={0}\n            inputMode=\"decimal\"\n            className={buildClassName(inputFullClass, styles.rich__value)}\n            onKeyDown={handleKeyDown}\n            onChange={handleChange}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            onClick={onInputClick}\n          />\n          <div\n            ref={placeholderRef}\n            className={buildClassName(inputFullClass, styles.rich__placeholder)}\n          />\n        </div>\n        {children}\n      </div>\n      {cornerClassName && <div className={cornerFullClass} />}\n    </div>\n  );\n}\n\nfunction clearText(text?: string) {\n  if (!text) return '';\n\n  return (\n    text\n      .trim()\n      .replace(',', '.') // Replace comma to point\n      .replace(/[^\\d.]/g, '') // Remove incorrect symbols\n      .replace(/^0+(?=([1-9]|0\\.))/, '') // Trim extra zeros at beginning\n      .replace(/^0+$/, '0') // Trim extra zeros (if only zeros are entered)\n      ?? ''\n  );\n}\n\nfunction isValidValue(text: string) {\n  return !Number.isNaN(Number(text));\n}\n\nexport default memo(RichNumberInput);\n\nexport function focusAtTheEnd(inputId: string) {\n  const input = document.getElementById(inputId);\n  const selection = window.getSelection();\n  if (!input || !selection) {\n    return;\n  }\n\n  const range = document.createRange();\n  range.selectNodeContents(input);\n  range.collapse(false);\n  selection.removeAllRanges();\n  selection.addRange(range);\n}\n","export function saveCaretPosition(context: HTMLElement, prefixLength: number, decimals: number) {\n  const selection = window.getSelection();\n  if (!selection || selection.rangeCount === 0) {\n    return undefined;\n  }\n\n  const range = selection.getRangeAt(0);\n  range.setStart(context, 0);\n  const clearedValue = range.toString().match(new RegExp(`(\\\\d+(?:[.,]\\\\d{0,${decimals}})?)`));\n  const len = prefixLength + (clearedValue?.[0]?.length || range.toString().length || 0);\n\n  return function restore() {\n    try {\n      const { node, position } = getTextNodeAtPosition(context, len);\n\n      selection.removeAllRanges();\n      const newRange = new Range();\n      newRange.setStart(node, position);\n      newRange.setEnd(node, position);\n      selection.addRange(newRange);\n    } catch (e) {\n      // ignore\n    }\n  };\n}\n\nfunction getTextNodeAtPosition(root: HTMLElement, index: number) {\n  const NODE_TYPE = NodeFilter.SHOW_TEXT;\n  const treeWalker = document.createTreeWalker(root, NODE_TYPE, (elem) => {\n    if (index > elem.textContent!.length) {\n      index -= elem.textContent!.length;\n      return NodeFilter.FILTER_REJECT;\n    }\n\n    return NodeFilter.FILTER_ACCEPT;\n  });\n\n  const node = treeWalker.nextNode() ?? treeWalker.currentNode;\n\n  return {\n    node,\n    // Limiting the position for cases when `index` is outside the `root`.\n    // It happens when the prefix disappears after the change.\n    position: Math.min(index, node.textContent!.length),\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"pOo4Z_aH\",\"iosModalDialog\":\"q6jp1iyp\",\"contentWrapper\":\"jvZQQwjc\",\"content\":\"SRNIOpBE\",\"contentTitle\":\"GKe6CMiw\",\"contentTitleQr\":\"FleNuH6I\",\"contentTitleLedger\":\"uEJfLLFI\",\"contentTitleLedgerStatic\":\"zolk8bhu\",\"tabsInModal\":\"kxmoYeWl\",\"receiveHeader\":\"k3MxFquM\",\"receiveHeaderNoTabs\":\"RJOW3R8W\",\"contentStatic\":\"CDl3KL71\",\"tabs\":\"Bq7mtmdH\",\"tabsOverlay\":\"dsNYuIgk\",\"tronActive\":\"ikLKZGDP\",\"tab\":\"YpO46ybD\",\"tabTon\":\"JKtWSSiZ\",\"tabTron\":\"U6XprGM_\",\"qrCode\":\"Bol24ap4\",\"qrCodeStatic\":\"VkwtgLpL\",\"qrCodeHidden\":\"yC4eGg0t\",\"labelForInvoice\":\"ykqIpMy7\",\"addressWrapper\":\"aUXplGt1\",\"copyButtonStatic\":\"EbsE8cY6\",\"tokenButton\":\"vgInBvx7\",\"invoiceComment\":\"U6Z9qzVb\",\"dottedLink\":\"xzGjTX1X\",\"actionButtons\":\"QxrwhhFf\",\"actionButton\":\"ARg65twE\"};","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport { IS_CAPACITOR, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectAccount, selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal } from '../../util/decimals';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport formatTransferUrl from '../../util/ton/formatTransferUrl';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SelectTokenButton from '../common/SelectTokenButton';\nimport TokenSelector from '../common/TokenSelector';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  tokenSlug?: string;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  address?: string;\n}\n\nconst enum SLIDES {\n  Initial,\n  Selector,\n}\n\nfunction InvoiceModal({\n  address,\n  tokenSlug,\n  tokensBySlug,\n  isOpen,\n}: StateProps) {\n  const { changeInvoiceToken, closeInvoiceModal } = getActions();\n\n  const lang = useLang();\n  const selectedToken = tokensBySlug && tokenSlug ? tokensBySlug[tokenSlug] : TONCOIN;\n  const [isTokenSelectorOpen, openTokenSelector, closeTokenSelector] = useFlag(false);\n  const [amountValue, setAmountValue] = useState<string | undefined>(undefined);\n  const [comment, setComment] = useState<string>('');\n\n  const decimals = selectedToken?.decimals ?? TONCOIN.decimals;\n  const amount = amountValue ? fromDecimal(amountValue, decimals) : 0n;\n  const tokenAddress = 'tokenAddress' in selectedToken ? selectedToken?.tokenAddress : undefined;\n  const invoiceUrl = address ? formatTransferUrl(address, amount, comment, tokenAddress) : '';\n\n  const handleTokenSelect = useLastCallback((token: UserToken | UserSwapToken) => {\n    changeInvoiceToken({ tokenSlug: token.slug });\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.Initial:\n        return (\n          <>\n            <ModalHeader\n              title={lang('Deposit Link')}\n              onClose={closeInvoiceModal}\n            />\n            <div className={styles.content}>\n              <div className={styles.contentTitle}>\n                {renderText(lang('$receive_invoice_description'))}\n              </div>\n              <RichNumberInput\n                key=\"amount\"\n                id=\"amount\"\n                value={amountValue}\n                labelText={lang('Amount')}\n                onChange={setAmountValue}\n              >\n                <SelectTokenButton\n                  noChainIcon\n                  token={selectedToken}\n                  className={styles.tokenButton}\n                  onClick={openTokenSelector}\n                />\n              </RichNumberInput>\n              <Input\n                value={comment}\n                label={lang('Comment')}\n                placeholder={lang('Optional')}\n                wrapperClassName={styles.invoiceComment}\n                onInput={setComment}\n              />\n\n              <p className={styles.labelForInvoice}>\n                {lang('Share this URL to receive %token%', { token: selectedToken?.symbol })}\n              </p>\n              <InteractiveTextField\n                text={invoiceUrl}\n                addressUrl={IS_CAPACITOR ? invoiceUrl : undefined}\n                noExplorer\n                withShareInMenu={IS_CAPACITOR}\n                copyNotification={lang('Invoice link was copied!')}\n                className={styles.invoiceLinkField}\n              />\n            </div>\n          </>\n        );\n\n      case SLIDES.Selector:\n        return (\n          <TokenSelector\n            isActive={isActive}\n            shouldHideNotSupportedTokens\n            selectedChain=\"ton\"\n            onTokenSelect={handleTokenSelect}\n            onBack={closeTokenSelector}\n            onClose={closeInvoiceModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"invoice\"\n      onClose={closeInvoiceModal}\n      onCloseAnimationEnd={closeTokenSelector}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={isTokenSelectorOpen ? SLIDES.Selector : SLIDES.Initial}\n        nextKey={isTokenSelectorOpen ? SLIDES.Initial : SLIDES.Selector}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const address = selectAccount(global, global.currentAccountId!)?.addressByChain?.ton;\n    const { invoiceTokenSlug } = selectCurrentAccountState(global) || {};\n\n    return {\n      isOpen: global.isInvoiceModalOpen,\n      tokenSlug: invoiceTokenSlug,\n      tokensBySlug: global.tokenInfo?.bySlug,\n      address,\n    };\n  })(InvoiceModal),\n);\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animate } from './animation';\n\nconst DEFAULT_DURATION = 300;\n\nconst stopById = new Map<string, VoidFunction>();\n\nexport default function animateHorizontalScroll(container: HTMLElement, left: number, duration = DEFAULT_DURATION) {\n  const isRtl = container.getAttribute('dir') === 'rtl';\n  const {\n    scrollLeft, offsetWidth: containerWidth, scrollWidth, dataset: { scrollId },\n  } = container;\n\n  let path = left - scrollLeft;\n\n  if (path < 0) {\n    const remainingPath = -scrollLeft * (isRtl ? -1 : 1);\n    path = Math.max(path, remainingPath);\n  } else if (path > 0) {\n    const remainingPath = scrollWidth - (scrollLeft + containerWidth);\n    path = Math.min(path, remainingPath);\n  }\n\n  if (path === 0) {\n    return Promise.resolve();\n  }\n\n  if (scrollId && stopById.has(scrollId)) {\n    stopById.get(scrollId)!();\n  }\n\n  const target = scrollLeft + path;\n\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      if (duration === 0) {\n        container.scrollLeft = target;\n        resolve();\n        return;\n      }\n\n      let isStopped = false;\n      const id = Math.random().toString();\n      container.dataset.scrollId = id;\n      stopById.set(id, () => {\n        isStopped = true;\n      });\n\n      container.style.scrollSnapType = 'none';\n\n      const startAt = Date.now();\n\n      animate(() => {\n        if (isStopped) return false;\n\n        const t = Math.min((Date.now() - startAt) / duration, 1);\n\n        const currentPath = path * (1 - transition(t));\n        container.scrollLeft = Math.round(target - currentPath);\n\n        if (t >= 1) {\n          container.style.scrollSnapType = '';\n          delete container.dataset.scrollId;\n          stopById.delete(id);\n          resolve();\n        }\n\n        return t < 1;\n      }, requestMutation);\n    });\n  });\n}\n\nfunction transition(t: number) {\n  return 1 - ((1 - t) ** 3.5);\n}\n","import React, { useRef, useState } from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownMenu from './DropdownMenu';\n\nimport styles from './Tab.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  icon?: string;\n  title: string;\n  menuItems?: DropdownItem[];\n  className?: string;\n  onClick: (arg: number) => void;\n  clickArg: number;\n  onMenuItemClick?: (value: string) => void;\n  onActiveClick?: NoneToVoidFunction;\n};\n\nfunction Tab({\n  isActive,\n  icon,\n  title,\n  menuItems,\n  className,\n  onClick,\n  clickArg,\n  onMenuItemClick,\n  onActiveClick,\n}: OwnProps) {\n  const menuRef = useRef<HTMLDivElement>();\n  const contentRef = useRef<HTMLDivElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition | undefined>();\n  const hasMenu = Boolean(menuItems?.length);\n  const isMenuOpen = Boolean(menuAnchor);\n\n  const getTriggerElement = useLastCallback(() => contentRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n  const closeMenu = useLastCallback(() => setMenuAnchor(undefined));\n\n  const handleClick = useLastCallback(() => {\n    if (isActive && !hasMenu) {\n      onActiveClick?.();\n      return;\n    }\n\n    if (!isActive) {\n      onClick(clickArg);\n      return;\n    }\n\n    if (isMenuOpen) {\n      closeMenu();\n    } else {\n      const { right: x, y, height } = contentRef.current!.getBoundingClientRect();\n      setMenuAnchor({ x, y: y + height });\n    }\n  });\n\n  return (\n    <div\n      className={buildClassName(styles.Tab, isActive && styles.Tab_active, className, hasMenu && styles.interactive)}\n      onClick={handleClick}\n    >\n      <span className={styles.content} ref={contentRef}>\n        {icon && <i className={buildClassName(icon, styles.icon)} aria-hidden />}\n        {title}\n        {hasMenu && (\n          <i className={buildClassName('icon-caret-down', styles.caretIcon)} aria-hidden />\n        )}\n      </span>\n      {hasMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          ref={menuRef}\n          items={menuItems}\n          withPortal\n          buttonClassName={styles.menuItem}\n          menuPositionX=\"right\"\n          menuAnchor={menuAnchor}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={onMenuItemClick}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Tab;\n","// extracted by mini-css-extract-plugin\nexport default {\"Tab\":\"D6as8ltx\",\"tab\":\"D6as8ltx\",\"Tab_active\":\"O4d43EtE\",\"tabActive\":\"O4d43EtE\",\"content\":\"vwr4su2y\",\"interactive\":\"MiCetFPJ\",\"menuItem\":\"tUY9MzOP\",\"icon\":\"EDDQtmOa\",\"caretIcon\":\"UgBDhvZa\"};","import React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport animateHorizontalScroll from '../../util/animateHorizontalScroll';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport Tab from './Tab';\n\nimport styles from './TabList.module.scss';\n\nexport type TabWithProperties = {\n  id: number;\n  icon?: string;\n  title: string;\n  className?: string;\n  menuItems?: DropdownItem[];\n  onMenuItemClick?: (value: string) => void;\n};\n\ntype OwnProps = {\n  isActive?: boolean;\n  tabs: readonly TabWithProperties[];\n  activeTab: number;\n  className?: string;\n  overlayClassName?: string;\n  onSwitchTab: (index: number) => void;\n  onActiveTabClick?: NoneToVoidFunction;\n};\n\nconst TAB_SCROLL_THRESHOLD_PX = 16;\n// Should match duration from `--slide-transition` CSS variable\nconst SCROLL_DURATION = IS_IOS ? 450 : IS_ANDROID ? 400 : 300;\nconst CLIP_PATH_CONTAINER_CLASS_NAME = 'clip-path-container';\n\nfunction TabList({\n  isActive, tabs, activeTab, className, overlayClassName, onSwitchTab, onActiveTabClick,\n}: OwnProps) {\n  const lang = useLang();\n  const containerRef = useRef<HTMLDivElement>();\n  const { width: appWidth } = useWindowSize();\n\n  const fullClassName = buildClassName(\n    styles.container,\n    'no-scrollbar',\n    className,\n  );\n\n  useHorizontalScroll({\n    containerRef,\n    shouldPreventDefault: true,\n  });\n\n  useActiveTabCentering(activeTab, containerRef.current);\n\n  useEffect(() => {\n    const container = containerRef.current?.querySelector(`.${CLIP_PATH_CONTAINER_CLASS_NAME}`) as HTMLElement | null;\n    const activeTabElement = container?.childNodes[activeTab] as HTMLElement | null;\n\n    if (container && activeTabElement) {\n      const clipPath = calculateClipPath(activeTabElement, container);\n      requestMutation(() => {\n        container.style.clipPath = clipPath;\n      });\n    }\n    // When the following dependencies change, `clipPath` must be updated\n  }, [isActive, activeTab, tabs, lang, containerRef, appWidth]);\n\n  return (\n    <div ref={containerRef} className={fullClassName}>\n      {tabs.map((tab, i) => (\n        <Tab\n          key={tab.title}\n          title={tab.title}\n          isActive={i === activeTab}\n          className={tab?.className}\n          menuItems={tab?.menuItems}\n          onMenuItemClick={tab?.onMenuItemClick}\n          onActiveClick={onActiveTabClick}\n          onClick={onSwitchTab}\n          clickArg={tab.id}\n          icon={tab.icon}\n        />\n      ))}\n\n      <div\n        className={buildClassName(styles.clipPathContainer, overlayClassName, CLIP_PATH_CONTAINER_CLASS_NAME)}\n        aria-hidden\n      >\n        {tabs.map((tab, i) => (\n          <Tab\n            key={tab.title}\n            title={tab.title}\n            isActive={i === activeTab}\n            className={buildClassName(tab?.className, i === activeTab && 'current-tab')}\n            menuItems={tab?.menuItems}\n            onActiveClick={onActiveTabClick}\n            onMenuItemClick={tab?.onMenuItemClick}\n            onClick={onSwitchTab}\n            clickArg={tab.id}\n            icon={tab.icon}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(TabList);\n\nfunction calculateClipPath(activeElement: HTMLElement, container: HTMLElement) {\n  const { paddingTop, paddingBottom } = getComputedStyle(activeElement);\n  const {\n    offsetLeft,\n    offsetWidth,\n  } = activeElement;\n\n  const clipLeft = offsetLeft;\n  const clipRight = offsetLeft + offsetWidth;\n  const rightPosition = Number(100 - (clipRight / container.offsetWidth) * 100).toFixed(3);\n  const leftPosition = Number((clipLeft / container.offsetWidth) * 100).toFixed(3);\n\n  return `inset(${parseInt(paddingTop)}px ${rightPosition}% ${parseInt(paddingBottom)}px ${leftPosition}% round 1rem)`;\n}\n\n// Scroll container to place active tab in the center\nfunction useActiveTabCentering(activeTab: number, container?: HTMLDivElement) {\n  useEffect(() => {\n    if (!container) return;\n\n    const { scrollWidth, offsetWidth, scrollLeft } = container;\n    if (scrollWidth <= offsetWidth) {\n      return;\n    }\n\n    const activeTabElement = container.childNodes[activeTab] as HTMLElement | null;\n    if (!activeTabElement) {\n      return;\n    }\n\n    const { offsetLeft: activeTabOffsetLeft, offsetWidth: activeTabOffsetWidth } = activeTabElement;\n    const newLeft = activeTabOffsetLeft - (offsetWidth / 2) + (activeTabOffsetWidth / 2);\n\n    // Prevent scrolling by only a couple of pixels, which doesn't look smooth\n    if (Math.abs(newLeft - scrollLeft) < TAB_SCROLL_THRESHOLD_PX) {\n      return;\n    }\n\n    void animateHorizontalScroll(container, newLeft, SCROLL_DURATION);\n  }, [activeTab, container]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Jya4TQTw\",\"clipPathContainer\":\"GMG3Qgat\"};","// extracted by mini-css-extract-plugin\nexport default {\"actionSheetDialog\":\"Vdr2S2qS\",\"actionButtons\":\"eWsAO42f\",\"actionButtonStatic\":\"E2TFEkdV\",\"actionButton\":\"GUHQ1MCW\",\"disabled\":\"wOo6dgfN\",\"actionIcon\":\"Zc6rtbsT\",\"iconChevronRight\":\"onRwV8fb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG, TONCOIN } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n}\n\nfunction TonActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n    openInvoiceModal,\n    closeReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'ton' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n      tokenOutSlug: TONCOIN.slug,\n      amountIn: '100',\n    });\n    onClose?.();\n  });\n\n  const handleReceiveClick = useLastCallback(() => {\n    closeReceiveModal();\n    openInvoiceModal();\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div className={styles.actionButton} onClick={handleBuyFiat}>\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      <div className={styles.actionButton} onClick={handleReceiveClick}>\n        <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n        {lang('Create Deposit Link')}\n        <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n  };\n})(TonActions));\n","import type QRCodeStyling from 'qr-code-styling';\nimport {\n  type ElementRef,\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../lib/teact/teact';\nimport { removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { ApiChain } from '../api/types';\n\nimport { IS_CORE_WALLET } from '../config';\nimport getChainNetworkIcon from '../util/swap/getChainNetworkIcon';\nimport formatTransferUrl from '../util/ton/formatTransferUrl';\n\nconst QR_SIZE = 600;\n\ninterface UseQRCodeHook {\n  qrCodeRef: ElementRef<HTMLDivElement>;\n  isInitialized: boolean;\n}\n\nlet qrCode: QRCodeStyling;\n\nexport default function useQrCode({\n  address,\n  chain,\n  isActive,\n  hiddenClassName,\n  hideLogo,\n  withFormatTransferUrl,\n}: {\n  address?: string;\n  chain?: ApiChain;\n  isActive?: boolean;\n  hiddenClassName?: string;\n  hideLogo?: boolean;\n  withFormatTransferUrl?: boolean;\n}): UseQRCodeHook {\n  const [isInitialized, setIsInitialized] = useState(!!qrCode);\n  const logoUrl = IS_CORE_WALLET ? './coreWallet/logo.svg' : './logo.svg';\n\n  const qrCodeRef = useRef<HTMLDivElement>();\n\n  useEffect(() => {\n    if (isInitialized) return;\n\n    void import('qr-code-styling')\n      .then(({ default: QrCodeStyling }) => {\n        qrCode = new QrCodeStyling({\n          width: QR_SIZE,\n          height: QR_SIZE,\n          image: chain ? getChainNetworkIcon(chain) : logoUrl,\n          margin: 0,\n          type: 'canvas',\n          dotsOptions: { type: 'rounded' },\n          cornersSquareOptions: { type: 'extra-rounded' },\n          imageOptions: { imageSize: 0.4, margin: 8, crossOrigin: 'anonymous' },\n          qrOptions: { errorCorrectionLevel: 'M' },\n          data: formatTransferUrl(''),\n        });\n\n        setIsInitialized(true);\n      });\n  }, [chain, isInitialized, logoUrl]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !isInitialized) return;\n\n    if (qrCodeRef.current && hiddenClassName) removeExtraClass(qrCodeRef.current, hiddenClassName);\n\n    if (qrCodeRef.current) {\n      qrCode?.append(qrCodeRef.current);\n\n      qrCode._options.image = hideLogo\n        ? undefined\n        : (chain ? getChainNetworkIcon(chain) : logoUrl);\n    }\n  }, [isActive, isInitialized, hiddenClassName, hideLogo, chain, logoUrl]);\n\n  useEffect(() => {\n    if (!address || !isActive || !qrCode || !isInitialized) return;\n\n    qrCode.update({ data: withFormatTransferUrl ? formatTransferUrl(address) : address });\n  }, [address, isActive, isInitialized, withFormatTransferUrl]);\n\n  return { qrCodeRef, isInitialized };\n}\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TonActions from './TonActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  isLedger?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TonContent({\n  isActive,\n  isStatic,\n  isLedger,\n  address,\n  onClose,\n}: OwnProps) {\n  const { verifyHardwareAddress } = getActions();\n\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'ton',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: true,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  const handleVerify = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    verifyHardwareAddress();\n  };\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_ton_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"ton\"\n        address={address}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {isLedger && (\n        <div className={buildClassName(\n          styles.contentTitle, styles.contentTitleLedger, isStatic && styles.contentTitleLedgerStatic,\n        )}\n        >\n          {renderText(lang('$ledger_verify_address'))}\n          {' '}\n          <a href=\"#\" onClick={handleVerify} className={styles.dottedLink}>\n            {lang('Verify now')}\n          </a>\n        </div>\n      )}\n\n      {!isStatic && <TonActions isLedger={isLedger} onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TonContent);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiCountryCode } from '../../../api/types';\n\nimport { DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG, TRX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  countryCode?: ApiCountryCode;\n}\n\nfunction TronActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  countryCode,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const canBuyWithCard = countryCode !== 'RU';\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  // TRX purchase is not possible via the Dreamwalkers service (Russian), however in static mode we show the buy button\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled && (canBuyWithCard || isStatic);\n  const shouldRender = Boolean(isSwapAllowed || isOnRampAllowed || isStatic);\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'tron' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG,\n      tokenOutSlug: TRX.slug,\n      amountIn: '10',\n    });\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div\n          className={buildClassName(styles.actionButton, !canBuyWithCard && styles.disabled)}\n          onClick={canBuyWithCard ? handleBuyFiat : undefined}\n        >\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isStatic && (\n        <div className={buildClassName(styles.actionButton, styles.disabled)}>\n          <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n          {lang('Create Deposit Link')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  };\n})(TronActions));\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TronActions from './TronActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TronContent({\n  isActive,\n  isStatic,\n  address,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'tron',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: false,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_tron_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"tron\"\n        address={address}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {!isStatic && <TronActions onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TronContent);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { Account } from '../../global/types';\nimport type { TabWithProperties } from '../ui/TabList';\n\nimport { selectAccount, selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TabList from '../ui/TabList';\nimport Transition from '../ui/Transition';\nimport TonActions from './content/TonActions';\nimport TonContent from './content/TonContent';\nimport TronActions from './content/TronActions';\nimport TronContent from './content/TronContent';\n\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  isLedger?: boolean;\n  chain?: ApiChain;\n}\n\ntype OwnProps = {\n  isOpen?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n};\n\nexport const TON_TAB_ID = 0;\nexport const TRON_TAB_ID = 1;\n\nfunction Content({\n  isOpen, addressByChain, chain, isStatic, isLedger, onClose,\n}: StateProps & OwnProps) {\n  const { setReceiveActiveTab } = getActions();\n\n  // `lang.code` is used to force redrawing of the `Transition` content,\n  // since the height of the content differs from translation to translation.\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const tabs = useMemo(() => {\n    const result: TabWithProperties[] = [];\n    if (addressByChain?.ton) {\n      result.push({\n        id: TON_TAB_ID,\n        title: 'TON',\n        className: buildClassName(styles.tab, styles.tabTon),\n      });\n    }\n    if (addressByChain?.tron) {\n      result.push({\n        id: TRON_TAB_ID,\n        title: 'TRON',\n        className: buildClassName(styles.tab, styles.tabTron),\n      });\n    }\n\n    return result;\n  }, [addressByChain?.ton, addressByChain?.tron]);\n\n  const activeTab = useMemo(() => {\n    if (!chain) return tabs.length ? tabs[0].id : TON_TAB_ID;\n    return chain === 'tron' ? TRON_TAB_ID : TON_TAB_ID;\n  }, [chain, tabs]);\n\n  const handleSwitchTab = useLastCallback((tabId: number) => {\n    const newChain = tabId === TRON_TAB_ID ? 'tron' : 'ton';\n    setReceiveActiveTab({ chain: newChain });\n  });\n\n  function renderActions() {\n    const currentTab = tabs.find((tab) => tab.id === activeTab);\n    if (currentTab?.id === TRON_TAB_ID) {\n      return <TronActions isStatic />;\n    }\n\n    return <TonActions isStatic isLedger={isLedger} />;\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TON_TAB_ID:\n        return (\n          <TonContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            isLedger={isLedger}\n            address={addressByChain!.ton!}\n            onClose={onClose}\n          />\n        );\n\n      case TRON_TAB_ID:\n        return (\n          <TronContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            address={addressByChain!.tron!}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  if (!tabs.length) {\n    return undefined;\n  }\n\n  return (\n    <>\n      {isStatic && renderActions()}\n\n      {tabs.length > 1 && (\n        <TabList\n          tabs={tabs}\n          activeTab={activeTab}\n          className={buildClassName(styles.tabs, !isStatic && styles.tabsInModal)}\n          overlayClassName={buildClassName(\n            styles.tabsOverlay,\n            activeTab === TRON_TAB_ID && styles.tronActive,\n          )}\n          onSwitchTab={handleSwitchTab}\n        />\n      )}\n      <Transition\n        key={`content_${lang.code}`}\n        activeKey={activeTab}\n        name={isPortrait ? 'slide' : 'slideFade'}\n        className={styles.contentWrapper}\n        slideClassName={buildClassName(styles.content, isStatic && styles.contentStatic, 'custom-scroll')}\n        shouldRestoreHeight={isStatic}\n      >\n        {renderContent}\n      </Transition>\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const account = selectAccount(global, global.currentAccountId!);\n    const { receiveModalChain } = selectCurrentAccountState(global) || {};\n\n    return {\n      addressByChain: account?.addressByChain,\n      isLedger: Boolean(account?.ledger),\n      chain: receiveModalChain,\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId))(Content),\n);\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { selectCurrentAccount, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Content from './Content';\n\nimport styles from './ReceiveModal.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n  isLedger?: boolean;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isOnRampDisabled: boolean;\n  isMultichainAccount: boolean;\n};\n\nfunction ReceiveModal({\n  isOpen,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isMultichainAccount,\n}: StateProps) {\n  const { closeReceiveModal } = getActions();\n\n  const lang = useLang();\n\n  const { isLandscape } = useDeviceScreen();\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const modalTitle = lang(isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  useEffect(() => {\n    if (isOpen && isLandscape) {\n      closeReceiveModal();\n    }\n  }, [isLandscape, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      dialogClassName={IS_IOS_APP ? styles.iosModalDialog : styles.modalDialog}\n      nativeBottomSheetKey=\"receive\"\n      onClose={closeReceiveModal}\n    >\n      <ModalHeader\n        title={modalTitle}\n        className={buildClassName(styles.receiveHeader, !isMultichainAccount && styles.receiveHeaderNoTabs)}\n        onClose={closeReceiveModal}\n      />\n      <Content\n        isOpen={isOpen}\n        onClose={closeReceiveModal}\n      />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n  const account = selectCurrentAccount(global);\n\n  return {\n    isOpen: global.isReceiveModalOpen,\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    isLedger: Boolean(account?.ledger),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(ReceiveModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport SensitiveData from '../ui/SensitiveData';\n\nimport styles from './TransferResult.module.scss';\n\ninterface OwnProps {\n  playAnimation?: boolean;\n  color?: 'green' | 'purple';\n  noSign?: boolean;\n  amount?: bigint;\n  tokenSymbol?: string;\n  decimals?: number;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  isSensitiveDataHidden?: true;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n}\n\nfunction TransferResult({\n  isSensitiveDataHidden,\n  playAnimation,\n  amount = 0n,\n  tokenSymbol = TONCOIN.symbol,\n  decimals = TONCOIN.decimals,\n  noSign,\n  color,\n  firstButtonText,\n  secondButtonText,\n  onFirstButtonClick,\n  onSecondButtonClick,\n}: OwnProps) {\n  const amountString = toDecimal(amount, decimals);\n  const [wholePart, fractionPart] = formatCurrencyExtended(amountString, '', noSign, decimals).split('.');\n  const amountCols = useMemo(() => getPseudoRandomNumber(5, 13, tokenSymbol), [tokenSymbol]);\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button className={styles.button} onClick={onFirstButtonClick}>{firstButtonText}</Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={amountCols}\n        rows={3}\n        cellSize={18}\n        align=\"center\"\n        maskSkin=\"green\"\n        className={buildClassName(styles.amount, color && styles[`amount_${color}`], 'rounded-font')}\n      >\n        {wholePart.trim().replace('\\u202F', '').replace('-', '')}\n        {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n        <span className={styles.amountSymbol}>{tokenSymbol}</span>\n      </SensitiveData>\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(TransferResult);\n","import type { LangCode } from '../types';\n\nimport { HELP_CENTER_URL } from '../../config';\n\nexport function getHelpCenterUrl(langCode: LangCode | undefined, type: keyof typeof HELP_CENTER_URL): string {\n  if (!langCode) return '';\n\n  return (HELP_CENTER_URL[type] as Partial<Record<LangCode, string>>)?.[langCode] ?? HELP_CENTER_URL[type].en;\n}\n","import { useRef, useState } from '../../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../../api/types';\n\nimport { CURRENCIES } from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { fromDecimal, toDecimal } from '../../../util/decimals';\nimport { vibrate } from '../../../util/haptics';\nimport { DEFAULT_DECIMALS } from '../../../api/chains/ton/constants';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\ntype CurrentToken = Pick<ApiTokenWithPrice, 'slug' | 'price' | 'decimals'>;\n\ninterface AmountInputStateInput {\n  /** The `token` amount from the state. Expressed in `token` regardless of `isBaseCurrency`. */\n  amount?: bigint;\n  token?: CurrentToken;\n  baseCurrency: ApiBaseCurrency;\n  isAmountReadonly?: boolean;\n  onAmountChange: (amount?: bigint, isValueReplaced?: boolean) => void;\n  /** `id` is the token slug unless `id` is specified explicitly in the token dropdown items */\n  onTokenChange?: (id: string) => void;\n}\n\nexport interface AmountInputStateOutput {\n  isBaseCurrency: boolean;\n  inputValue: string | undefined;\n  alternativeValue: string | undefined;\n  baseCurrency: ApiBaseCurrency;\n  isAmountReadonly?: boolean;\n  onInputChange: (value?: string) => void;\n  onMaxAmountClick: (maxAmount?: bigint) => void;\n  onAlternativeAmountClick: () => void;\n  onTokenChange: (id: string, token?: CurrentToken) => void;\n}\n\n/**\n * Provides the stateful functionality for `AmountInput`. It is not embedded into `AmountInput`, because sometimes\n * `<AmountInput>` has to be remounted while its state must persist.\n */\nexport function useAmountInputState(input: AmountInputStateInput): AmountInputStateOutput {\n  const { baseCurrency, onAmountChange } = input;\n  const { isBaseCurrency, switchCurrency, ...output } = useCurrencySwitch(input);\n\n  const onMaxAmountClick = useLastCallback((maxAmount?: bigint) => {\n    if (maxAmount === undefined) {\n      return;\n    }\n\n    void vibrate();\n    switchCurrency(false);\n    onAmountChange(maxAmount, true);\n  });\n\n  const onAlternativeAmountClick = useLastCallback(() => {\n    void vibrate();\n    switchCurrency(!isBaseCurrency);\n  });\n\n  return {\n    ...output,\n    isBaseCurrency,\n    baseCurrency,\n    onMaxAmountClick,\n    onAlternativeAmountClick,\n  };\n}\n\nfunction useCurrencySwitch({\n  baseCurrency,\n  amount: tokenAmountBI,\n  token,\n  isAmountReadonly,\n  onAmountChange,\n  onTokenChange: setToken,\n}: AmountInputStateInput) {\n  const [isBaseCurrency, setIsBaseCurrency] = useState(false);\n  const tokenAmountRef = useRef<string | undefined>();\n  const currencyAmountRef = useRef<string | undefined>();\n  const currencyDecimals = CURRENCIES[baseCurrency].decimals;\n\n  const setAmountsFromToken = (tokenAmount: string | undefined) => {\n    tokenAmountRef.current = tokenAmount;\n    currencyAmountRef.current = tokenAmountToCurrencyAmount(tokenAmount, token?.price, currencyDecimals);\n  };\n\n  const setAmountsFromCurrency = (currencyAmount: string | undefined) => {\n    tokenAmountRef.current = currencyAmountToTokenAmount(currencyAmount, token?.price, token?.decimals);\n    currencyAmountRef.current = currencyAmount;\n  };\n\n  const setAndReportAmountFromPrice = (price: number | undefined, decimals: number | undefined) => {\n    if (isBaseCurrency && !isAmountReadonly) {\n      const newTokenAmount = currencyAmountToTokenAmount(currencyAmountRef.current, price, decimals);\n      if (newTokenAmount !== formalizeStringAmount(tokenAmountRef.current)) {\n        tokenAmountRef.current = newTokenAmount; // If not set, the render following the `onAmountChange` call may change the input value\n        onAmountChange(tokenAmountToBigInt(newTokenAmount, decimals));\n      }\n    } else {\n      currencyAmountRef.current = tokenAmountToCurrencyAmount(tokenAmountRef.current, price, currencyDecimals);\n    }\n  };\n\n  // Actualizes both values when a new token amount arrives from the parent\n  useSyncEffect(() => {\n    const newTokenAmount = tokenAmountFromBigInt(tokenAmountBI, token?.decimals);\n    if (newTokenAmount !== formalizeStringAmount(tokenAmountRef.current)) {\n      setAmountsFromToken(newTokenAmount);\n    }\n  }, [tokenAmountBI, token?.decimals]); // eslint-disable-line react-hooks-static-deps/exhaustive-deps\n\n  // Actualizes the alternative (below the input) value when the token price changes.\n  // If the input is readonly, actualizes only the currency value regardless of `isBaseCurrency`\n  useSyncEffect(() => {\n    setAndReportAmountFromPrice(token?.price, token?.decimals);\n  }, [token?.price, token?.decimals, currencyDecimals]); // eslint-disable-line react-hooks-static-deps/exhaustive-deps\n\n  const onInputChange = useLastCallback((value?: string) => {\n    value ||= undefined;\n\n    if (isBaseCurrency) {\n      setAmountsFromCurrency(value);\n    } else {\n      setAmountsFromToken(value);\n    }\n\n    onAmountChange(tokenAmountToBigInt(tokenAmountRef.current, token?.decimals));\n  });\n\n  const onTokenChange = useLastCallback((id: string, newToken?: CurrentToken) => {\n    setToken?.(id);\n\n    if (newToken) {\n      // The goal is to make the new token and the new amount arrive in the same next render.\n      // Otherwise, the token amount won't change until the next render (by an above `useSyncEffect`).\n      // This could cause unwanted visual glitches like a blinking balance error.\n      setAndReportAmountFromPrice(newToken.price, newToken.decimals);\n    }\n  });\n\n  return {\n    isBaseCurrency,\n    isAmountReadonly,\n    inputValue: isBaseCurrency ? currencyAmountRef.current : tokenAmountRef.current,\n    alternativeValue: isBaseCurrency ? tokenAmountRef.current : currencyAmountRef.current,\n    switchCurrency: setIsBaseCurrency,\n    onInputChange,\n    onTokenChange,\n  };\n}\n\nfunction tokenAmountToCurrencyAmount(\n  amount: string | undefined,\n  tokenPrice: number | undefined,\n  currencyDecimals: number,\n) {\n  return amount && tokenPrice !== undefined\n    ? Big(amount).mul(tokenPrice).round(currencyDecimals).toString()\n    : undefined;\n}\n\nfunction currencyAmountToTokenAmount(\n  amount: string | undefined,\n  tokenPrice: number | undefined,\n  tokenDecimals: number | undefined,\n) {\n  // Avoiding dividing by zero for tokens with price 0\n  return amount && tokenPrice\n    ? Big(amount).div(tokenPrice).round(tokenDecimals ?? DEFAULT_DECIMALS).toString()\n    : undefined;\n}\n\nfunction tokenAmountToBigInt(amount: string | undefined, decimals: number | undefined) {\n  return amount\n    ? fromDecimal(amount, decimals)\n    : undefined;\n}\n\nfunction tokenAmountFromBigInt(amount: bigint | undefined, decimals: number | undefined) {\n  return amount === undefined\n    ? undefined\n    : toDecimal(amount, decimals);\n}\n\n/** For example, turns '1.2300' into '1.23' */\nfunction formalizeStringAmount(amount: string | undefined) {\n  if (!amount) {\n    return undefined;\n  }\n\n  if (!amount.includes('.')) {\n    return amount;\n  }\n\n  let end = amount.length;\n  while (amount[end - 1] === '0') {\n    end--;\n  }\n  if (amount[end - 1] === '.') {\n    end--;\n  }\n\n  return amount.slice(0, end);\n}\n","import { useMemo } from '../../../lib/teact/teact';\n\nimport type { ApiStakingState } from '../../../api/types';\nimport type { AmountInputToken } from '../../ui/AmountInput';\n\nimport { getIsActiveStakingState } from '../../../util/staking';\n\ninterface Options {\n  tokenBySlug?: Record<string, AmountInputToken>;\n  states?: ApiStakingState[];\n  shouldUseNominators?: boolean;\n  selectedStakingId?: string;\n  isViewMode?: boolean;\n}\n\nexport function useTokenDropdown({\n  tokenBySlug, states, shouldUseNominators, selectedStakingId, isViewMode,\n}: Options) {\n  const selectableTokens = useMemo(() => {\n    if (!tokenBySlug || !states) {\n      return [];\n    }\n\n    let tokens = getStakingTokens(tokenBySlug, states, shouldUseNominators);\n\n    if (isViewMode) {\n      tokens = tokens.filter(({ id }) => id === selectedStakingId);\n    }\n\n    return tokens;\n  }, [tokenBySlug, states, shouldUseNominators, isViewMode, selectedStakingId]);\n\n  const selectedToken = useMemo(\n    () => selectableTokens.find((token) => token.id === selectedStakingId),\n    [selectableTokens, selectedStakingId],\n  );\n\n  return [selectedToken, selectableTokens] as const;\n}\n\nfunction getStakingTokens(\n  tokenBySlug: Record<string, AmountInputToken>,\n  states: ApiStakingState[],\n  shouldUseNominators?: boolean,\n) {\n  const hasNominatorsStake = states.some((state) => state.type === 'nominators' && getIsActiveStakingState(state));\n  const hasLiquidStake = states.some((state) => state.type === 'liquid' && getIsActiveStakingState(state));\n\n  if (shouldUseNominators && !hasLiquidStake) {\n    states = states.filter((state) => state.type !== 'liquid');\n  }\n\n  if (!shouldUseNominators && !hasNominatorsStake) {\n    states = states.filter((state) => state.type !== 'nominators');\n  }\n\n  return states\n    .filter((state) => tokenBySlug[state.tokenSlug])\n    .map<AmountInputToken>((state) => ({\n      ...tokenBySlug[state.tokenSlug],\n      id: state.id,\n    }));\n}\n","import { useMemo, useRef } from '../lib/teact/teact';\n\n// Use this hook to bind `<Transition />` animation to changes in the dependency array.\n// Use optional parameter `noAnimation` if you want to prevent the animation even if the dependency array changes.\nexport function useTransitionActiveKey(deps: unknown[], noAnimation?: boolean): number {\n  const activeKey = useRef(0);\n\n  useMemo(() => {\n    if (!noAnimation) activeKey.current += 1;\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps);\n\n  return activeKey.current;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"OEF25dXJ\",\"content\":\"zfocSjTR\",\"link\":\"KwAXOVQ_\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiToken } from '../../api/types';\n\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, formatCurrencySimple } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\n\nimport Transition from './Transition';\n\nimport styles from './AmountInputMaxButton.module.scss';\n\ninterface OwnProps {\n  maxAmount?: bigint;\n  token?: Pick<ApiToken, 'symbol' | 'decimals'>;\n  isLoading?: boolean;\n  isSensitiveDataHidden?: boolean;\n  /** If true, the label will say \"All\" instead of \"Max\" and all the amount digits will be shown (made for unstaking) */\n  isAllMode?: boolean;\n  onAmountClick(maxAmount?: bigint): void;\n}\n\n/**\n * Put the element right above a <RichNumberInput />, it will take the space right to the input label without moving the\n * around content.\n */\nfunction AmountInputMaxButton({\n  maxAmount,\n  token,\n  isLoading,\n  isSensitiveDataHidden,\n  isAllMode,\n  onAmountClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  const content = isLoading\n    ? lang('Loading...')\n    : !token || maxAmount === undefined\n      ? ''\n      : isSensitiveDataHidden\n        ? `*** ${token.symbol}`\n        : isAllMode\n          ? formatCurrencySimple(maxAmount, token.symbol, token.decimals)\n          : formatCurrency(toDecimal(maxAmount, token.decimals), token.symbol);\n\n  const transitionKey = useTransitionActiveKey([!content, token?.symbol, isLoading, isSensitiveDataHidden]);\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={transitionKey}\n      shouldCleanup\n      className={styles.container}\n    >\n      {content && (\n        <span className={styles.content}>\n          {lang(isAllMode ? '$all_balance' : '$max_balance', {\n            balance: (\n              <div\n                role=\"button\"\n                tabIndex={0}\n                onClick={() => onAmountClick(maxAmount)}\n                className={styles.link}\n              >\n                {content}\n              </div>\n            ),\n          })}\n        </span>\n      )}\n    </Transition>\n  );\n}\n\nexport default memo(AmountInputMaxButton);\n","// extracted by mini-css-extract-plugin\nexport default {\"dropdown\":\"ZNn8fpqd\",\"dropdown__prefix\":\"u0_9mbdz\",\"dropdownPrefix\":\"u0_9mbdz\",\"prefix\":\"yhhTwepY\",\"purple\":\"fP_2Gh_l\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiTokenWithPrice } from '../../api/types';\n\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { ASSET_LOGO_PATHS } from './helpers/assetLogos';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Dropdown, { type DropdownItem } from './Dropdown';\n\nimport styles from './TokenDropdown.module.scss';\n\nexport type TokenWithId = Pick<ApiTokenWithPrice, 'slug' | 'symbol' | 'image' | 'chain'> & {\n  /**\n   * The token unique id to use instead of slug.\n   * Made for cases when there multiple dropdown items with the same token.\n   */\n  id?: string;\n};\n\ninterface OwnProps<T extends TokenWithId> {\n  selectedToken?: T | string;\n  allTokens?: T[];\n  isMultichainAccount?: boolean;\n  theme?: 'purple';\n  isInMode?: boolean;\n  /** `id` is the token slug, unless an `id` property is specified explicitly in the `allTokens` items */\n  onChange?: (id: string, token: T) => void;\n}\n\nconst EMPTY_TOKEN_LIST: never[] = [];\n\nfunction TokenDropdown<T extends TokenWithId>({\n  selectedToken,\n  allTokens = EMPTY_TOKEN_LIST,\n  isMultichainAccount,\n  theme,\n  isInMode,\n  onChange,\n}: OwnProps<T>) {\n  const lang = useLang();\n\n  const buttonPrefixText = lang('$in_currency', { currency: '' });\n  const buttonPrefix = useMemo(\n    () => {\n      return isInMode && (\n        <span className={styles.prefix}>\n          {buttonPrefixText}\n        </span>\n      );\n    },\n    [isInMode, buttonPrefixText],\n  );\n\n  const items = useMemo(\n    () => allTokens.map((token) => tokenToDropdownItem(token, isMultichainAccount)),\n    [allTokens, isMultichainAccount],\n  );\n\n  const tokenById = useMemo(\n    () => allTokens.reduce<Record<string, T>>((byId, token) => {\n      byId[getTokenId(token)] = token;\n      return byId;\n    }, {}),\n    [allTokens],\n  );\n\n  const handleChange = useLastCallback((id: string) => {\n    const token = tokenById[id];\n    onChange?.(id, token);\n  });\n\n  if (!items.length) {\n    return undefined;\n  }\n\n  const selectedTokenId = !selectedToken || typeof selectedToken === 'string'\n    ? selectedToken\n    : getTokenId(selectedToken);\n\n  return (\n    <Dropdown\n      items={items}\n      selectedValue={selectedTokenId}\n      buttonPrefix={buttonPrefix}\n      className={styles.dropdown}\n      menuClassName={theme && styles[theme]}\n      onChange={handleChange}\n    />\n  );\n}\n\nexport default memo(TokenDropdown);\n\nexport function getTokenId(token: TokenWithId) {\n  return token.id ?? token.slug;\n}\n\nexport function tokenToDropdownItem(token: TokenWithId, isMultichainAccount?: boolean): DropdownItem {\n  return {\n    value: getTokenId(token),\n    icon: ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS]\n      || token.image,\n    overlayIcon: isMultichainAccount ? getChainNetworkIcon(token.chain) : undefined,\n    name: token.symbol,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"u5uvgNoY\",\"container__slide\":\"OeHWkJFQ\",\"containerSlide\":\"OeHWkJFQ\",\"input\":\"me9Fg5VF\",\"bottom\":\"xPmDv9gI\",\"bottom__right\":\"uMCMe6l_\",\"bottomRight\":\"uMCMe6l_\",\"alternative\":\"hx_H7UUP\",\"alternative__icon\":\"Agk5w0hD\",\"alternativeIcon\":\"Agk5w0hD\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { ApiTokenWithPrice } from '../../api/types';\nimport type { AmountInputStateOutput } from './hooks/useAmountInputState';\nimport type { TokenWithId } from './TokenDropdown';\n\nimport { CURRENCIES } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { setCancellableTimeout } from '../../util/schedulers';\nimport { SEC } from '../../api/constants';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport AmountInputMaxButton from './AmountInputMaxButton';\nimport RichNumberInput, { focusAtTheEnd } from './RichNumberInput';\nimport TokenDropdown from './TokenDropdown';\nimport Transition from './Transition';\n\nimport styles from './AmountInput.module.scss';\n\nexport type AmountInputToken = TokenWithId & Pick<ApiTokenWithPrice, 'price' | 'decimals'>;\n\ninterface OwnProps extends AmountInputStateOutput {\n  /** Expressed in `token` regardless of `isBaseCurrency` */\n  maxAmount?: bigint;\n  token: AmountInputToken | undefined;\n  allTokens?: AmountInputToken[];\n  isStatic?: boolean;\n  hasError: boolean;\n  isMultichainAccount?: boolean;\n  isSensitiveDataHidden?: true;\n  isMaxAmountLoading?: boolean;\n  /** If true, the max amount label will say \"All\" instead of \"Max\" and all the amount digits will be shown (made for unstaking) */\n  isMaxAmountAllMode?: boolean;\n  labelText?: TeactNode;\n  renderBottomRight: (className: string) => TeactNode;\n  onPressEnter?: (e: React.KeyboardEvent<HTMLDivElement>) => void;\n}\n\nfunction AmountInput({\n  isBaseCurrency,\n  inputValue,\n  alternativeValue,\n  baseCurrency,\n  maxAmount,\n  token,\n  allTokens,\n  isStatic,\n  hasError,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n  isMaxAmountLoading,\n  isMaxAmountAllMode,\n  renderBottomRight,\n  isAmountReadonly,\n  labelText,\n  onTokenChange,\n  onPressEnter,\n  onInputChange,\n  onMaxAmountClick,\n  onAlternativeAmountClick,\n}: OwnProps) {\n  const lang = useLang();\n  const transitionKey = isBaseCurrency ? 0 : 1;\n  const { inputId, onInputFocus, onInputBlur, onClick: keepInputFocus } = useKeepInputFocus(transitionKey);\n\n  const handleMaxAmountClick = useLastCallback(() => {\n    onMaxAmountClick(maxAmount);\n    keepInputFocus();\n  });\n\n  function renderBalance() {\n    return (\n      <AmountInputMaxButton\n        maxAmount={isAmountReadonly ? undefined : maxAmount}\n        token={token}\n        isLoading={isMaxAmountLoading}\n        isAllMode={isMaxAmountAllMode}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onAmountClick={handleMaxAmountClick}\n      />\n    );\n  }\n\n  function renderInput() {\n    let prefix: string | undefined;\n    let suffix: string | undefined;\n\n    if (isBaseCurrency) {\n      const { shortSymbol } = CURRENCIES[baseCurrency];\n      if (shortSymbol) {\n        prefix = shortSymbol;\n      } else {\n        suffix = baseCurrency;\n      }\n    }\n\n    return (\n      <RichNumberInput\n        id={inputId}\n        hasError={hasError}\n        value={inputValue}\n        labelText={labelText ?? lang('Amount')}\n        decimals={isBaseCurrency ? CURRENCIES[baseCurrency].decimals : token?.decimals}\n        className={styles.input}\n        isStatic={isStatic}\n        prefix={prefix}\n        suffix={suffix}\n        disabled={isAmountReadonly}\n        onChange={onInputChange}\n        onPressEnter={onPressEnter}\n        onFocus={onInputFocus}\n        onBlur={onInputBlur}\n      >\n        {renderTokens()}\n      </RichNumberInput>\n    );\n  }\n\n  function renderTokens() {\n    return (\n      <TokenDropdown<AmountInputToken>\n        selectedToken={token}\n        allTokens={allTokens}\n        isInMode={isBaseCurrency}\n        isMultichainAccount={isMultichainAccount}\n        onChange={onTokenChange}\n      />\n    );\n  }\n\n  function renderAlternativeAmount() {\n    const symbol = isBaseCurrency\n      ? (token?.symbol ?? '')\n      : getShortCurrencySymbol(baseCurrency);\n\n    const onClick = () => {\n      onAlternativeAmountClick();\n      keepInputFocus();\n    };\n\n    // The main reason to use <button> is preventing the comment type selector (which is also a <button>) from hijacking\n    // the clicks on touch screens.\n    return (\n      <button type=\"button\" className={styles.alternative} onClick={onClick}>\n        &thinsp;\n        {formatCurrency(alternativeValue ?? 0, symbol, undefined, true)}\n        <i className={buildClassName(styles.alternative__icon, 'icon-switch')} aria-hidden />\n      </button>\n    );\n  }\n\n  return (\n    <Transition\n      activeKey={transitionKey}\n      name=\"semiFade\"\n      shouldCleanup\n      className={styles.container}\n      slideClassName={styles.container__slide}\n    >\n      {renderBalance()}\n      {renderInput()}\n      <div className={styles.bottom}>\n        {renderAlternativeAmount()}\n        {renderBottomRight(styles.bottom__right)}\n      </div>\n    </Transition>\n  );\n}\n\nexport default memo(AmountInput);\n\n/**\n * Clicking the currency switch button un-focuses the input. This creates a bad UX with virtual keyboard.\n * To improve the UX, we focus the input back when the user clicks the currency switch button.\n * We focus only if the input was focused before the click, because Native Bottom Sheet renders a couple blank\n * frames when the virtual keyboard is not open and the focus is triggered programmatically.\n */\nfunction useKeepInputFocus(transitionKey: number) {\n  const inputId = `${useUniqueId()}_${transitionKey}`;\n  const isFocused = useRef(false);\n  const cancelFocusTimer = useRef<NoneToVoidFunction>();\n  const inputFocusPersistDuration = 0.5 * SEC;\n\n  const onInputFocus = useLastCallback(() => {\n    cancelFocusTimer.current?.();\n    isFocused.current = true;\n  });\n\n  const onInputBlur = useLastCallback(() => {\n    cancelFocusTimer.current?.();\n    cancelFocusTimer.current = setCancellableTimeout(inputFocusPersistDuration, () => {\n      isFocused.current = false;\n    });\n  });\n\n  const onClick = () => {\n    if (isFocused.current) {\n      focusAtTheEnd(inputId); // To keep the virtual keyboard open\n    }\n  };\n\n  // The input element is replaced as a result of the transition, so we need to focus the new input\n  useEffect(() => {\n    if (isFocused.current) {\n      focusAtTheEnd(inputId);\n    }\n  }, [transitionKey]); // eslint-disable-line react-hooks-static-deps/exhaustive-deps\n\n  return { inputId, onInputFocus, onInputBlur, onClick };\n}\n","import { TONCOIN } from '../../config';\nimport withCache from '../../util/withCache';\n\nexport const getNumberRegex = withCache((decimals: number): RegExp => {\n  return decimals === 0\n    ? /^(\\d+)/\n    : new RegExp(`^(\\\\d+)([.,])?(\\\\d{1,${decimals}})?`);\n});\n\nexport function getNumberParts(value: string, decimals: number = TONCOIN.decimals) {\n  const regex = getNumberRegex(decimals);\n  return value.match(regex) || undefined;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport type { SensitiveDataMaskSkin } from '../common/SensitiveDataMask';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport { getNumberRegex } from '../../global/helpers/number';\nimport buildClassName from '../../util/buildClassName';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFontScale from '../../hooks/useFontScale';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SensitiveData from './SensitiveData';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: string;\n  value?: string;\n  error?: string;\n  prefix?: string;\n  suffix?: string;\n  zeroValue?: string;\n  decimals?: number;\n  className?: string;\n  isSensitiveData?: true;\n  isSensitiveDataHidden?: true;\n  sensitiveDataMaskSkin?: SensitiveDataMaskSkin;\n  isStatic?: boolean;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  children?: TeactNode;\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberField({\n  id,\n  labelText,\n  value,\n  error,\n  prefix,\n  suffix,\n  zeroValue,\n  decimals = FRACTION_DIGITS,\n  className,\n  isSensitiveData,\n  isSensitiveDataHidden,\n  sensitiveDataMaskSkin,\n  isStatic,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  children,\n}: OwnProps) {\n  const contentRef = useRef<HTMLInputElement>();\n  const prevValueRef = useRef<string>('');\n  const { updateFontScale, isFontChangedRef } = useFontScale(contentRef, true);\n\n  const renderValue = useLastCallback((inputValue = '', noFallbackToPrev = false) => {\n    const contentEl = contentRef.current!;\n\n    const valueRegex = getNumberRegex(decimals);\n    const values = inputValue.match(valueRegex);\n\n    // eslint-disable-next-line no-null/no-null\n    if (values === null || values.length < 4 || values[0] === '') {\n      if (noFallbackToPrev || inputValue === '') {\n        prevValueRef.current = '';\n        contentEl.innerText = '';\n      } else {\n        renderValue(prevValueRef.current, true);\n      }\n\n      return;\n    }\n    const textContent = values?.[0] || '';\n    prevValueRef.current = inputValue;\n\n    contentEl.innerHTML = buildContentHtml(inputValue, prefix, suffix, decimals, true);\n\n    if (textContent.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale();\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (value) {\n      renderValue(value);\n    } else if (zeroValue) {\n      contentRef.current!.textContent = zeroValue;\n    }\n  }, [prefix, suffix, decimals, renderValue, value, zeroValue]);\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    isStatic && styles.inputWrapperStatic,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.rich__value,\n    styles.input,\n    styles.large,\n    styles.disabled,\n    error && styles.error,\n    'rounded-font',\n    valueClassName,\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    labelClassName,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {error && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {labelText && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        {isSensitiveData ? (\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={8}\n            rows={3}\n            cellSize={16}\n            maskSkin={sensitiveDataMaskSkin}\n            // Adding `.large` to remove the excessive bottom padding created by SensitiveData (the `height` property does the job)\n            className={buildClassName(styles.rich, styles.large)}\n            maskClassName={styles.mask}\n          >\n            <div ref={contentRef} id={id} className={inputFullClass} />\n          </SensitiveData>\n        ) : (\n          <div className={styles.rich}>\n            <div ref={contentRef} id={id} className={inputFullClass} />\n          </div>\n        )}\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(RichNumberField);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"oJIiPolp\",\"welcome\":\"TiFPq3C6\",\"welcome_static\":\"Rv6oYnJ8\",\"welcomeStatic\":\"Rv6oYnJ8\",\"welcomeInformation\":\"Xg9cqUJJ\",\"welcomeInformation_static\":\"o_nJd5KS\",\"welcomeInformationStatic\":\"o_nJd5KS\",\"stakingApy\":\"HKeaaGYy\",\"textButton\":\"fole9hpS\",\"sticker\":\"bPhlS4F_\",\"sticker_static\":\"uaQ89610\",\"stickerStatic\":\"uaQ89610\",\"stakingSafeDialog\":\"zNAkvVGS\",\"amountBottomRight\":\"VuUMtt0r\",\"amountBottomRight_error\":\"XziKGimY\",\"amountBottomRightError\":\"XziKGimY\",\"amountBottomRight_slide\":\"D7jfmDqZ\",\"amountBottomRightSlide\":\"D7jfmDqZ\",\"animating\":\"idaRXWqT\",\"from\":\"w5MTAdBs\",\"to\":\"OH6m_v4W\",\"balanceError\":\"XV91oi_1\",\"historyTotalValue\":\"ps_1E9fe\",\"stakingBalance\":\"ZzjyhAIi\",\"balanceResultWrapper\":\"vtSKtwOl\",\"balanceResultWrapper__slide\":\"ri2mpmSG\",\"balanceResultWrapperSlide\":\"ri2mpmSG\",\"balanceResultInput\":\"oiRjkkEM\",\"balanceResultLabel\":\"h10QGypW\",\"balanceStakedLabel\":\"DlWk_wtQ\",\"balanceStakedResult\":\"Zvcxz1_r\",\"balanceResult\":\"ANb8RM_U\",\"stakingInfoModal\":\"WPEajhsz\",\"stakingInfoModal_withHistory\":\"RmyjusO4\",\"stakingInfoModalWithHistory\":\"RmyjusO4\",\"stakingInfo\":\"jqjfDFur\",\"stakingInfo_modal\":\"WPEajhsz\",\"stakingInfoNoHistory\":\"JhvH7wqN\",\"stakingInfoModalContent\":\"adkWFcPE\",\"history\":\"vrPulHrK\",\"historyList\":\"Y0yHbYn0\",\"withBackground\":\"seOnXIX2\",\"stakingInfoLoading\":\"FpmrUch0\",\"stakingInfoLoadingAnimation\":\"HhFmzxoC\",\"stakingInfoClose\":\"hUegI624\",\"stakingInfoButtons\":\"p0aoyqxp\",\"stakingInfoButtons_withMargin\":\"pa9mJcSA\",\"stakingInfoButtonsWithMargin\":\"pa9mJcSA\",\"stakingInfoButtons_adaptiveWidth\":\"KhWpHXOV\",\"stakingInfoButtonsAdaptiveWidth\":\"KhWpHXOV\",\"stakingInfoButton\":\"ANY2XY_3\",\"checkEligibilityButton\":\"aM6EzHZ6\",\"insufficientBalance\":\"rGOjgmuu\",\"unstakeTime\":\"AQ56tknq\",\"unstakeTime_purple\":\"LqS98rhM\",\"unstakeTimePurple\":\"LqS98rhM\",\"unstakeTimeIcon\":\"tyhEzoP5\",\"history_static\":\"s2VvvIeZ\",\"historyStatic\":\"s2VvvIeZ\",\"historyTotal\":\"saWAKbAc\",\"historyTitle\":\"Y0cCgJMS\",\"historyList_static\":\"axMdO17j\",\"historyListStatic\":\"axMdO17j\",\"transactionBanner\":\"qrdHJFDS\",\"unstakeInfoTransition\":\"dyqJuGUL\",\"unstakeInfo\":\"m1LUZiWL\"};","import { Dialog } from '@capacitor/dialog';\nimport React, { memo, type TeactNode, useCallback, useEffect, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport type { Big } from '../../lib/big.js';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  CURRENCIES,\n  DEFAULT_PRICE_CURRENCY,\n  ETHENA_ELIGIBILITY_CHECK_URL,\n  JVAULT_URL,\n  SHORT_FRACTION_DIGITS,\n  TONCOIN,\n} from '../../config';\nimport { getHelpCenterUrl } from '../../global/helpers/getHelpCenterUrl';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n} from '../../global/selectors';\nimport { bigintMax } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport { throttle } from '../../util/schedulers';\nimport { getStakingMinAmount, getStakingTitle } from '../../util/staking';\nimport { buildUserToken, getIsNativeToken, getNativeToken } from '../../util/tokens';\nimport calcJettonStakingApr from '../../util/ton/calcJettonStakingApr';\nimport { getHostnameFromUrl } from '../../util/url';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport { useAmountInputState } from '../ui/hooks/useAmountInputState';\nimport { useTokenDropdown } from './hooks/useTokenDropdown';\n\nimport AmountInput from '../ui/AmountInput';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport RichNumberField from '../ui/RichNumberField';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  isLoading?: boolean;\n  isViewMode: boolean;\n  apiError?: string;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  stakingState?: ApiStakingState;\n  states?: ApiStakingState[];\n  shouldUseNominators?: boolean;\n  isSensitiveDataHidden?: true;\n  baseCurrency: ApiBaseCurrency;\n}\n\nconst enum BottomRightSlide {\n  Fee,\n  InsufficientBalance,\n  InsufficientFee,\n  BelowMinimumAmount,\n  ApiError,\n}\n\nconst ACTIVE_STATES = new Set([StakingState.StakeInitial, StakingState.None]);\n\nconst runThrottled = throttle((cb) => cb(), 1500, true);\n\nfunction StakingInitial({\n  isActive,\n  isStatic,\n  isLoading,\n  isViewMode,\n  apiError,\n  tokens,\n  tokenBySlug,\n  stakingState,\n  states,\n  shouldUseNominators,\n  isSensitiveDataHidden,\n  baseCurrency,\n}: OwnProps & StateProps) {\n  const {\n    submitStakingInitial, fetchStakingFee, cancelStaking, changeCurrentStaking,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [isSafeInfoModalOpen, openSafeInfoModal, closeSafeInfoModal] = useFlag();\n  const [amount, setAmount] = useState<bigint | undefined>();\n  let isIncorrectAmount = false;\n  let isInsufficientBalance = false;\n  let isInsufficientFee = false;\n  let isBelowMinimumAmount = false;\n\n  const {\n    id: stakingId,\n    type: stakingType,\n    tokenSlug,\n  } = stakingState ?? {};\n\n  const token: UserToken | undefined = useMemo(() => {\n    if (!tokenSlug || !tokens || !tokenBySlug) return undefined;\n    let userToken = tokens.find(({ slug }) => slug === tokenSlug);\n    if (!userToken && tokenSlug in tokenBySlug) {\n      userToken = buildUserToken(tokenBySlug[tokenSlug]);\n    }\n    return userToken;\n  }, [tokenSlug, tokens, tokenBySlug]);\n  const { amount: balance = 0n, symbol, decimals = TONCOIN.decimals } = token ?? {};\n\n  let { annualYield = 0 } = stakingState ?? {};\n  let annualYieldText = `${annualYield}%`;\n  if (stakingState?.type === 'jetton' && amount) {\n    annualYield = calcJettonStakingApr({\n      tvl: stakingState.tvl + amount,\n      dailyReward: stakingState.dailyReward,\n      decimals,\n    });\n  } else if (stakingState?.type === 'ethena') {\n    const { annualYieldStandard, annualYieldVerified } = stakingState;\n    annualYieldText = `${annualYieldStandard}%${annualYieldVerified}%`;\n  }\n\n  const isNativeToken = getIsNativeToken(token?.slug);\n  const nativeToken = useMemo(() => {\n    if (!tokens || !token) return undefined;\n    if (isNativeToken) return token;\n    const nativeSlug = getNativeToken(token.chain).slug;\n    return tokens.find(({ slug }) => slug === nativeSlug);\n  }, [tokens, token, isNativeToken]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const minAmount = getStakingMinAmount(stakingType);\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).stake;\n\n  const nativeAmount = isNativeToken && amount ? amount + networkFee : networkFee;\n  const doubleNetworkFee = networkFee * 2n;\n  const shouldLeaveForUnstake = isNativeToken && balance >= doubleNetworkFee;\n  const maxAmount = (() => {\n    let value = balance;\n    if (isNativeToken && value) {\n      value -= shouldLeaveForUnstake ? doubleNetworkFee : networkFee;\n    }\n    return bigintMax(0n, value);\n  })();\n\n  const title = getStakingTitle();\n\n  if (amount !== undefined) {\n    if (Number.isNaN(amount) || amount < 0) {\n      isIncorrectAmount = true;\n    } else if (amount < minAmount) {\n      isBelowMinimumAmount = true;\n    } else if (!maxAmount || amount > balance) {\n      isInsufficientBalance = true;\n    } else if (nativeBalance < networkFee || (isNativeToken && nativeAmount > balance)) {\n      isInsufficientFee = true;\n    }\n  }\n\n  const [selectedToken, selectableTokens] = useTokenDropdown({\n    tokenBySlug,\n    states,\n    shouldUseNominators,\n    selectedStakingId: stakingId,\n  });\n\n  const handleHelpCenterClick = useLastCallback(() => {\n    const url = getHelpCenterUrl(lang.code, 'ethenaStaking');\n    void openUrl(url, { title: lang('Help Center'), subtitle: getHostnameFromUrl(url) });\n  });\n\n  useEffect(() => {\n    if (!amount) {\n      return;\n    }\n\n    runThrottled(() => {\n      fetchStakingFee({\n        amount,\n      });\n    });\n  }, [amount, fetchStakingFee]);\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isSafeInfoModalOpen) {\n      let text: string[];\n      switch (stakingState?.type) {\n        case 'jetton':\n          text = [\n            // We use `replace` instead of `lang` argument to avoid JSX output\n            `${lang('$safe_staking_description_jetton1').replace('%jvault_link%', 'JVault')}`,\n            `${lang('$safe_staking_description_jetton2')}`,\n          ];\n          break;\n        case 'ethena':\n          text = [\n            `1. ${lang('$safe_staking_ethena_description1')}`,\n            `2. ${lang('$safe_staking_ethena_description2')}`,\n            `3. ${lang('$safe_staking_ethena_description3')}`,\n          ];\n          break;\n        default:\n          text = [\n            `1. ${lang('$safe_staking_description1')}`,\n            `2. ${lang('$safe_staking_description2')}`,\n            `3. ${lang('$safe_staking_description3')}`,\n          ];\n      }\n\n      if (stakingState?.type === 'ethena') {\n        void Dialog.confirm({\n          title: lang(title),\n          message: text.join('\\n\\n').replace(/\\*\\*/g, ''),\n          okButtonTitle: lang('Close'),\n          cancelButtonTitle: lang('Help Center'),\n        })\n          .then((result) => {\n            closeSafeInfoModal();\n\n            if (!result.value) {\n              handleHelpCenterClick();\n            }\n          });\n      } else {\n        void Dialog.alert({\n          title: lang(title),\n          message: text.join('\\n\\n').replace(/\\*\\*/g, ''),\n        })\n          .then(closeSafeInfoModal);\n      }\n    }\n  }, [isSafeInfoModalOpen, lang, stakingState, title]);\n\n  const canSubmit = amount\n    && maxAmount\n    && !isViewMode\n    && !isIncorrectAmount\n    && !isBelowMinimumAmount\n    && !isInsufficientFee\n    && !isInsufficientBalance;\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitStakingInitial({ amount });\n  });\n\n  const handleCheckEligibility = useLastCallback(() => {\n    void openUrl(ETHENA_ELIGIBILITY_CHECK_URL);\n  });\n\n  const [error, errorTransitionKey] = useMemo(() => {\n    if (isInsufficientBalance) {\n      return [\n        lang('Insufficient balance'),\n        BottomRightSlide.InsufficientBalance,\n      ];\n    }\n\n    if (isInsufficientFee) {\n      return [\n        lang('$insufficient_fee', { fee: formatCurrency(toDecimal(networkFee), nativeToken?.symbol ?? '') }),\n        BottomRightSlide.InsufficientFee,\n      ];\n    }\n\n    if (isBelowMinimumAmount) {\n      return [\n        lang('$min_value', { value: formatCurrency(toDecimal(minAmount, decimals), symbol ?? '') }),\n        BottomRightSlide.BelowMinimumAmount,\n      ];\n    }\n\n    return apiError\n      ? [lang(apiError), BottomRightSlide.ApiError]\n      : [undefined, BottomRightSlide.Fee];\n  }, [\n    apiError, decimals, isBelowMinimumAmount, isInsufficientBalance, isInsufficientFee, lang, minAmount,\n    nativeToken?.symbol, networkFee, symbol,\n  ]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const renderBottomRight = useCallback((className?: string) => {\n    let content: string | TeactNode[] | React.JSX.Element = ' ';\n\n    if (error) {\n      content = (\n        <span className={styles.balanceError}>{error}</span>\n      );\n    } else {\n      content = token ? lang('$fee_value', {\n        fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n      }) : '';\n    }\n\n    return (\n      <Transition\n        className={buildClassName(\n          styles.amountBottomRight,\n          isIncorrectAmount && styles.amountBottomRight_error,\n          className,\n        )}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"semiFade\"\n        activeKey={errorTransitionKey}\n      >\n        {content}\n      </Transition>\n    );\n  }, [error, errorTransitionKey, isIncorrectAmount, lang, realFee, token]);\n\n  function renderJettonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton1', {\n            jvault_link: (\n              <a href={JVAULT_URL} target=\"_blank\" rel=\"noreferrer\"><b>JVault</b></a>\n            ),\n          }))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton2'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderTonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description1'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description2'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description3'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderEthenaDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_ethena_description1'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_ethena_description2'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_ethena_description3'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderSafeDescription() {\n    switch (stakingState!.type) {\n      case 'jetton':\n        return renderJettonDescription();\n\n      case 'ethena':\n        return renderEthenaDescription();\n\n      default:\n        return renderTonDescription();\n    }\n  }\n\n  function renderSafeInfoModal() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isSafeInfoModalOpen}\n        title={lang(title)}\n        onClose={closeSafeInfoModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        {!!stakingState && renderSafeDescription()}\n        <div className={modalStyles.buttons}>\n          {stakingState!.type === 'ethena' && (\n            <Button onClick={handleHelpCenterClick}>\n              {lang('Help Center')}\n            </Button>\n          )}\n          <Button onClick={closeSafeInfoModal}>{lang('Close')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  function renderStakingResult() {\n    const amountBig = toBig(amount ?? 0, decimals);\n    let currentAmount: Big;\n    let prefix: string | undefined;\n    let suffix: string | undefined;\n\n    if (amountInputProps.isBaseCurrency) {\n      currentAmount = amountBig.mul(token?.price ?? 0);\n      const { shortSymbol } = CURRENCIES[baseCurrency];\n      if (shortSymbol) {\n        prefix = shortSymbol;\n      } else {\n        suffix = baseCurrency;\n      }\n    } else {\n      currentAmount = amountBig;\n    }\n\n    const balanceResult = currentAmount.mul((annualYield / 100) + 1).toString();\n\n    return (\n      <Transition\n        activeKey={amountInputProps.isBaseCurrency ? 0 : 1}\n        name=\"semiFade\"\n        className={styles.balanceResultWrapper}\n        slideClassName={styles.balanceResultWrapper__slide}\n        shouldCleanup\n      >\n        <RichNumberField\n          labelText={lang('Est. balance in a year')}\n          zeroValue=\"...\"\n          value={balanceResult}\n          decimals={SHORT_FRACTION_DIGITS}\n          prefix={prefix}\n          suffix={suffix}\n          isStatic={isStatic}\n          inputClassName={styles.balanceResultInput}\n          labelClassName={styles.balanceResultLabel}\n          valueClassName={styles.balanceResult}\n        />\n      </Transition>\n    );\n  }\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    cancelStaking();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  const amountInputProps = useAmountInputState({\n    amount,\n    token,\n    baseCurrency,\n    onAmountChange: setAmount,\n    onTokenChange: handleChangeStaking,\n  });\n\n  return (\n    <form\n      className={isStatic ? undefined : modalStyles.transitionContent}\n      onSubmit={handleSubmit}\n    >\n      <div className={buildClassName(styles.welcome, isStatic && styles.welcome_static)}>\n        <AnimatedIconWithPreview\n          size={isStatic ? ANIMATED_STICKER_MIDDLE_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={buildClassName(styles.sticker, isStatic && styles.sticker_static)}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n        <div className={buildClassName(styles.welcomeInformation, isStatic && styles.welcomeInformation_static)}>\n          <div>{lang('Earn from your tokens while holding them', { symbol })}</div>\n          <div className={styles.stakingApy}>{lang('Est. %annual_yield%', { annual_yield: annualYieldText })}</div>\n          {stakingType === 'ethena' && (\n            <Button isText className={styles.textButton} onClick={handleCheckEligibility}>\n              {lang('Check eligibility')}\n            </Button>\n          )}\n          <Button isText className={styles.textButton} onClick={openSafeInfoModal}>\n            {lang(getStakingTitle(stakingType))}\n          </Button>\n        </div>\n      </div>\n\n      <AmountInput\n        {...amountInputProps}\n        maxAmount={maxAmount}\n        token={selectedToken}\n        allTokens={selectableTokens}\n        isStatic={isStatic}\n        hasError={isIncorrectAmount || isInsufficientBalance}\n        isMaxAmountLoading={!selectedToken}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        renderBottomRight={renderBottomRight}\n        onPressEnter={handleSubmit}\n      />\n\n      {renderStakingResult()}\n\n      {!isViewMode && (\n        <div className={modalStyles.buttons}>\n          <Button\n            isPrimary\n            isSubmit\n            isDisabled={!canSubmit}\n            isLoading={isLoading}\n          >\n            {lang('$stake_asset', { symbol: token?.symbol })}\n          </Button>\n        </div>\n      )}\n      {renderSafeInfoModal()}\n    </form>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const accountState = selectCurrentAccountState(global);\n      const tokens = selectCurrentAccountTokens(global);\n      const tokenBySlug = global.tokenInfo.bySlug;\n      const { baseCurrency = DEFAULT_PRICE_CURRENCY, isSensitiveDataHidden } = global.settings;\n\n      const {\n        state,\n        isLoading,\n        error: apiError,\n      } = global.currentStaking;\n\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const stakingState = selectAccountStakingState(global, global.currentAccountId!);\n\n      return {\n        isViewMode: selectIsCurrentAccountViewMode(global),\n        isLoading: isLoading && ACTIVE_STATES.has(state),\n        tokens,\n        tokenBySlug,\n        apiError,\n        stakingState,\n        states,\n        shouldUseNominators: accountState?.staking?.shouldUseNominators,\n        isSensitiveDataHidden,\n        baseCurrency,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(StakingInitial),\n);\n","import { DAYS_IN_YEAR } from '../../api/constants';\nimport { toBig } from '../decimals';\n\nexport default function calcJettonStakingApr({\n  tvl, dailyReward, decimals,\n}: {\n  tvl: bigint;\n  dailyReward: bigint;\n  decimals: number;\n}) {\n  if (!tvl) {\n    return 0;\n  }\n\n  const apr = toBig(dailyReward, decimals)\n    .div(toBig(tvl, decimals))\n    .mul(DAYS_IN_YEAR)\n    .mul(100)\n    .toFixed(2);\n\n  return Number(apr);\n}\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport {\n  selectAccountStakingState,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport StakingInitial from './StakingInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  stakingState?: ApiStakingState;\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  isMultichainAccount: boolean;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.StakeInitial,\n  StakingState.StakePassword,\n  StakingState.StakeConnectHardware,\n  StakingState.StakeConfirmHardware,\n  StakingState.StakeComplete,\n]);\n\nfunction StakeModal({\n  state,\n  stakingState,\n  isLoading,\n  amount,\n  error,\n  tokenBySlug,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    startStaking,\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStaking,\n    openStakingInfo,\n  } = getActions();\n\n  const { tokenSlug } = stakingState ?? {};\n\n  const token = tokenSlug && tokenBySlug ? tokenBySlug[tokenSlug] : undefined;\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n  const [renderedStakingAmount, setRenderedStakingAmount] = useState(amount);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.StakePassword) {\n      clearStakingError();\n      setStakingScreen({ state: StakingState.StakeInitial });\n    }\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setRenderedStakingAmount(amount);\n    submitStaking();\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedStakingAmount(amount);\n    submitStaking({ password });\n  });\n\n  const handleViewStakingInfoClick = useLastCallback(() => {\n    cancelStaking();\n    openStakingInfo();\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !amount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"purple\"\n        text={formatCurrency(toDecimal(amount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Staking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"staking\"\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n          skipAuthScreen\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Coins have been staked!')} onClose={cancelStaking} />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color=\"purple\"\n            playAnimation={isActive}\n            amount={renderedStakingAmount}\n            decimals={token?.decimals}\n            tokenSymbol={token?.symbol}\n            noSign\n            firstButtonText={lang('View')}\n            secondButtonText={lang('Stake More')}\n            onFirstButtonClick={handleViewStakingInfoClick}\n            onSecondButtonClick={startStaking}\n          />\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: StakingState) {\n    switch (currentKey) {\n      case StakingState.StakeInitial:\n        return (\n          <>\n            <ModalHeader title={lang('$stake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n            <StakingInitial isActive={isActive} />\n          </>\n        );\n\n      case StakingState.StakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.StakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.StakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.StakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"stake\"\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      forceFullNative={renderingKey === StakingState.StakePassword}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const tokenBySlug = global.tokenInfo.bySlug;\n\n  return {\n    ...global.currentStaking,\n    stakingState,\n    tokenBySlug,\n    isMultichainAccount,\n  };\n})(StakeModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiEthenaStakingState, ApiJettonStakingState } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { SHORT_FRACTION_DIGITS, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './StakingClaimModal.module.scss';\n\ninterface StateProps {\n  stakingState?: ApiJettonStakingState | ApiEthenaStakingState;\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: StakingState;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.ClaimPassword,\n  StakingState.ClaimConfirmHardware,\n  StakingState.ClaimConnectHardware,\n  StakingState.ClaimComplete,\n]);\n\nfunction StakingClaimModal({\n  stakingState,\n  isOpen,\n  tokens,\n  isLoading,\n  address,\n  error,\n  state = StakingState.ClaimPassword,\n  isHardwareAccount,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n}: StateProps) {\n  const { submitStakingClaim, cancelStakingClaim, clearStakingError } = getActions();\n\n  const {\n    tokenSlug,\n  } = stakingState ?? {};\n\n  const rewardAmount = stakingState && 'unclaimedRewards' in stakingState\n    ? stakingState.unclaimedRewards\n    : stakingState?.unstakeRequestAmount ?? 0n;\n\n  const lang = useLang();\n\n  const token = useMemo(() => tokens?.find(({ slug }) => slug === tokenSlug), [tokens, tokenSlug]);\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const { gas: networkFee, real: realNetworkFee } = getTonStakingFees(stakingState?.type).claim!;\n  const isNativeEnough = nativeBalance > networkFee;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = state === StakingState.ClaimComplete || (!isHardwareAccount && !getDoesUsePinPad());\n  const modalTitle = withModalHeader\n    ? lang(state === StakingState.ClaimComplete\n      ? 'Coins have been unstaked!'\n      : stakingState?.type === 'ethena'\n        ? 'Confirm Unstaking'\n        : 'Confirm Rewards Claim')\n    : undefined;\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (!isNativeEnough) return;\n    submitStakingClaim({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (!isNativeEnough) return;\n    submitStakingClaim();\n  });\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n    const content = isSensitiveDataHidden\n      ? `*** ${token!.symbol}`\n      : formatCurrency(toDecimal(rewardAmount, token!.decimals), token!.symbol, SHORT_FRACTION_DIGITS);\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={token}\n          withChainIcon={isMultichainAccount}\n          text={content}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={address && shortenAddress(address)}\n        />\n        <div className={feeClassName}>\n          {token && renderText(lang('$fee_value_bold', {\n            fee: (\n              <Fee\n                terms={{ native: isNativeEnough ? realNetworkFee : networkFee }}\n                precision={isNativeEnough ? 'approximate' : 'lessThan'}\n                token={token}\n              />\n            ),\n          }))}\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: StakingState) {\n    switch (currentKey) {\n      case StakingState.ClaimConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelStakingClaim}\n          />\n        );\n\n      case StakingState.ClaimConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelStakingClaim}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case StakingState.ClaimPassword:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"claim\"\n            error={!isNativeEnough ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelStakingClaim}\n            onUpdate={clearStakingError}\n            skipAuthScreen\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n\n      case StakingState.ClaimComplete:\n        return (\n          <div className={modalStyles.transitionContent}>\n            <TransferResult\n              isSensitiveDataHidden={isSensitiveDataHidden}\n              color=\"green\"\n              playAnimation={isActive}\n              amount={rewardAmount}\n              tokenSymbol={token?.symbol}\n              decimals={token?.decimals}\n              noSign\n            />\n\n            <div className={styles.unstakeInfo}>\n              {lang('$unstake_information_instantly')}\n            </div>\n\n            <div className={modalStyles.buttons}>\n              <Button onClick={cancelStakingClaim} isPrimary>{lang('Close')}</Button>\n            </div>\n          </div>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={modalTitle}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"staking-claim\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelStakingClaim}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const { addressByChain } = selectAccount(global, accountId!) || {};\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    state,\n    isLoading,\n    error,\n  } = global?.currentStaking || {};\n\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n  const tokens = selectCurrentAccountTokens(global);\n  const canBeClaimed = stakingState?.type === 'jetton' || stakingState?.type === 'ethena';\n\n  return {\n    stakingState: canBeClaimed ? stakingState : undefined,\n    isOpen: IS_OPEN_STATES.has(state),\n    state,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, accountId!),\n    isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n  };\n})(StakingClaimModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"kJywiaI2\",\"passwordModalDialog\":\"FYtlcmCw\",\"transactionBanner\":\"yYT_DSGe\",\"operationInfoFee\":\"k75dvmdJ\",\"operationInfoFeeWithGap\":\"F2nQ3VmO\",\"unstakeInfo\":\"zw06OBVe\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatHumanDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport SensitiveData from '../ui/SensitiveData';\n\nimport styles from './StakingProfileItem.module.scss';\n\ninterface OwnProps {\n  tonToken: UserToken;\n  timestamp: number;\n  profit: string;\n  isSensitiveDataHidden?: true;\n}\n\nfunction StakingProfitItem({\n  tonToken, timestamp, profit, isSensitiveDataHidden,\n}: OwnProps) {\n  const lang = useLang();\n  const amountCols = useMemo(() => getPseudoRandomNumber(4, 10, timestamp.toString()), [timestamp]);\n\n  return (\n    <div className={styles.item}>\n      <i className={buildClassName(styles.icon, 'icon-earn')} aria-hidden />\n      <div className={styles.leftBlock}>\n        <div className={styles.operationName}>{lang('Earned')}</div>\n        <div className={styles.date}>{formatHumanDay(lang, timestamp)}, {formatTime(timestamp)}</div>\n      </div>\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cellSize={8}\n        rows={2}\n        cols={amountCols}\n        align=\"right\"\n        className={styles.amount}\n      >\n        {formatCurrencyExtended(profit, tonToken.symbol)}\n      </SensitiveData>\n    </div>\n  );\n}\n\nexport default memo(StakingProfitItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"nq4YjGn3\",\"icon\":\"jLdRlENh\",\"leftBlock\":\"nxAiUgO_\",\"amount\":\"x2kd8DjZ\",\"operationName\":\"uDw7ob8E\",\"date\":\"aJl0mknc\"};","import React, {\n  memo, type TeactNode, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingHistory, ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { Theme, UserToken } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ETHENA_ELIGIBILITY_CHECK_URL,\n  SHORT_FRACTION_DIGITS,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectAccountStakingHistory,\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectAccountStakingTotalProfit,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { openUrl } from '../../util/openUrl';\nimport { getStakingStateStatus, getUnstakeTime } from '../../util/staking';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\nimport useWindowSize from '../../hooks/useWindowSize';\nimport { useTokenDropdown } from './hooks/useTokenDropdown';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\nimport Spinner from '../ui/Spinner';\nimport TokenDropdown from '../ui/TokenDropdown';\nimport Transition from '../ui/Transition';\nimport StakingProfitItem from './StakingProfitItem';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isViewMode: boolean;\n  states?: ApiStakingState[];\n  stakingState?: ApiStakingState;\n  totalProfit: bigint;\n  stakingHistory?: ApiStakingHistory;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  theme: Theme;\n  shouldUseNominators?: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst HISTORY_SCROLL_APPEARANCE_HEIGHT_PX = 640;\nconst FRACTION_DIGITS = 2;\n\nfunction StakingInfoContent({\n  states,\n  stakingState,\n  isActive,\n  isStatic,\n  totalProfit,\n  stakingHistory,\n  tokens,\n  tokenBySlug,\n  theme,\n  shouldUseNominators,\n  isViewMode,\n  isSensitiveDataHidden,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startStaking,\n    startUnstaking,\n    startStakingClaim,\n    fetchStakingHistory,\n    changeCurrentStaking,\n  } = getActions();\n\n  const {\n    id: stakingId,\n    tokenSlug,\n    balance: amount,\n    annualYield = 0,\n    unstakeRequestAmount,\n    type: stakingType,\n  } = stakingState ?? {};\n\n  const unstakeTime = getUnstakeTime(stakingState);\n  const canBeClaimed = stakingState ? getStakingStateStatus(stakingState) === 'readyToClaim' : undefined;\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => tokenSlug === slug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  const { decimals, symbol } = token ?? {};\n\n  const lang = useLang();\n  const isLoading = amount === undefined;\n  const hasHistory = Boolean(stakingHistory?.length);\n  const {\n    shouldRender: shouldRenderSpinner,\n    ref: spinnerRef,\n  } = useShowTransition({\n    isOpen: isLoading && isActive,\n    withShouldRender: true,\n  });\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens])!;\n  const forceUpdate = useForceUpdate();\n  const { height } = useWindowSize();\n  const appTheme = useAppTheme(theme);\n  const {\n    shouldRender: shouldRenderTotalAmount,\n    ref: totalAmountRef,\n  } = useShowTransition({\n    isOpen: !isSensitiveDataHidden,\n    withShouldRender: true,\n  });\n\n  const unclaimedRewards = stakingState?.type === 'jetton'\n    ? stakingState.unclaimedRewards\n    : undefined;\n\n  // Updates the unstaking countdown\n  useInterval(forceUpdate, unstakeRequestAmount ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isActive) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isActive]);\n\n  const handleStakeClick = useLastCallback(() => {\n    onClose?.();\n    startStaking();\n  });\n\n  const handleUnstakeClick = useLastCallback(() => {\n    onClose?.();\n    startUnstaking();\n  });\n\n  const handleClaimClick = useLastCallback(() => {\n    onClose?.();\n    startStakingClaim();\n  });\n\n  let stakingResult = '0';\n  let balanceResult = '0';\n  if (amount) {\n    stakingResult = toBig(amount, decimals).round(SHORT_FRACTION_DIGITS).toString();\n    balanceResult = toBig(amount, decimals).mul((annualYield / 100) + 1).round(SHORT_FRACTION_DIGITS).toString();\n  }\n\n  const handleCheckEligibility = useLastCallback(() => {\n    void openUrl(ETHENA_ELIGIBILITY_CHECK_URL);\n  });\n\n  const [selectedToken, selectableTokens] = useTokenDropdown({\n    tokenBySlug,\n    states,\n    shouldUseNominators,\n    selectedStakingId: stakingId,\n    isViewMode,\n  });\n\n  function renderUnstakeDescription() {\n    let text: string | TeactNode[] | undefined;\n\n    if (unstakeTime) {\n      let textKey = '$unstaking_when_receive_with_amount';\n\n      if (stakingType === 'ethena') {\n        textKey = '$unstaking_when_receive_with_amount_ethena';\n      } else if (stakingType === 'nominators') {\n        textKey = '$unstaking_when_receive';\n      }\n\n      text = lang(textKey, {\n        time: (\n          <strong>\n            {formatRelativeHumanDateTime(lang.code, unstakeTime)}\n          </strong>\n        ),\n        amount: (\n          <strong>\n            {formatCurrency(toDecimal(unstakeRequestAmount ?? 0n, decimals), symbol!).replace(' ', '\\u00A0')}\n          </strong>\n        ),\n      });\n    }\n\n    return (\n      <div className={buildClassName(styles.unstakeTime, styles.unstakeTime_purple)}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n        />\n        <div>\n          {text}\n        </div>\n      </div>\n    );\n  }\n\n  function renderHistory() {\n    return (\n      <div className={buildClassName(styles.history, isStatic && styles.history_static)}>\n        {shouldRenderTotalAmount && (\n          <div ref={totalAmountRef} className={styles.historyTotal}>\n            {lang('$total', {\n              value: (\n                <span className={styles.historyTotalValue}>\n                  {formatCurrency(toDecimal(totalProfit), TONCOIN.symbol)}\n                </span>\n              ),\n            })}\n          </div>\n        )}\n        <div className={styles.historyTitle}>{lang('Earning History')}</div>\n        <div className={buildClassName(\n          styles.historyList,\n          isStatic && styles.historyList_static,\n          isStatic && 'custom-scroll',\n          !isStatic && height >= HISTORY_SCROLL_APPEARANCE_HEIGHT_PX && 'custom-scroll',\n        )}\n        >\n          {stakingHistory?.map((record) => (\n            <StakingProfitItem\n              key={record.timestamp}\n              profit={record.profit}\n              timestamp={record.timestamp}\n              tonToken={tonToken}\n              isSensitiveDataHidden={isSensitiveDataHidden}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.stakingInfo,\n    !isStatic && styles.stakingInfo_modal,\n    !hasHistory && styles.stakingInfoNoHistory,\n    isStatic && 'staking-info',\n  );\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    onClose?.();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  function renderRewards() {\n    const rewardString = toDecimal(unclaimedRewards!, decimals);\n\n    return (\n      <>\n        <RichNumberField\n          isSensitiveData\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          sensitiveDataMaskSkin=\"purple\"\n          labelText={lang('Accumulated Rewards')}\n          zeroValue=\"...\"\n          value={rewardString}\n          decimals={decimals}\n          suffix={symbol}\n          labelClassName={styles.balanceStakedLabel}\n          valueClassName={styles.balanceResult}\n        />\n        {!isViewMode && (\n          <div className={styles.stakingInfoButtons}>\n            <Button\n              className={styles.stakingInfoButton}\n              isDisabled={isLoading}\n              onClick={handleClaimClick}\n            >\n              {lang('Claim')}\n            </Button>\n          </div>\n        )}\n      </>\n    );\n  }\n\n  function render() {\n    return (\n      <>\n        <div className={fullClassName}>\n          {!isStatic && (\n            <ModalHeader\n              title={lang('Staking')}\n              closeClassName={styles.stakingInfoClose}\n              onClose={onClose}\n            />\n          )}\n\n          <RichNumberField\n            isSensitiveData\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            sensitiveDataMaskSkin=\"purple\"\n            labelText={lang('Currently Staked')}\n            zeroValue=\"...\"\n            value={stakingResult}\n            decimals={decimals}\n            className={styles.stakingBalance}\n            labelClassName={styles.balanceStakedLabel}\n            valueClassName={styles.balanceStakedResult}\n          >\n            <div className={styles.stakingInfoLoading}>\n              {shouldRenderSpinner && (\n                <Spinner ref={spinnerRef} className={styles.stakingInfoLoadingAnimation} />\n              )}\n            </div>\n\n            <TokenDropdown\n              selectedToken={selectedToken}\n              allTokens={selectableTokens}\n              theme=\"purple\"\n              onChange={handleChangeStaking}\n            />\n\n          </RichNumberField>\n          {unstakeRequestAmount && unstakeRequestAmount > 0n && stakingType !== 'ethena'\n            ? renderUnstakeDescription()\n            : (\n              <>\n                <RichNumberField\n                  isSensitiveData\n                  isSensitiveDataHidden={isSensitiveDataHidden}\n                  sensitiveDataMaskSkin=\"purple\"\n                  labelText={lang('Est. balance in a year')}\n                  zeroValue=\"...\"\n                  value={balanceResult}\n                  decimals={decimals}\n                  suffix={symbol}\n                  labelClassName={styles.balanceStakedLabel}\n                  valueClassName={styles.balanceResult}\n                />\n                {stakingType === 'ethena' && !canBeClaimed && !!unstakeRequestAmount && renderUnstakeDescription()}\n                {!isViewMode && (\n                  <div\n                    className={buildClassName(\n                      styles.stakingInfoButtons,\n                      stakingType === 'ethena' && styles.stakingInfoButtonsAdaptiveWidth,\n                      !!unclaimedRewards && styles.stakingInfoButtonsWithMargin,\n                    )}\n                  >\n                    <Button\n                      className={styles.stakingInfoButton}\n                      isPrimary\n                      isDisabled={isLoading}\n                      onClick={handleStakeClick}\n                    >\n                      {lang('Stake More')}\n                    </Button>\n                    {(stakingType !== 'ethena' || !canBeClaimed) && (\n                      <Button\n                        className={styles.stakingInfoButton}\n                        isDisabled={isLoading}\n                        onClick={handleUnstakeClick}\n                      >\n                        {lang(stakingType === 'ethena' ? 'Request Unstaking' : 'Unstake')}\n                      </Button>\n                    )}\n                    {canBeClaimed && (\n                      <Button\n                        className={styles.stakingInfoButton}\n                        isDisabled={isLoading}\n                        onClick={handleClaimClick}\n                      >\n                        {lang('Unstake %amount%', {\n                          amount: isSensitiveDataHidden\n                            ? `*** ${symbol}`\n                            : formatCurrency(toDecimal(unstakeRequestAmount!, decimals), symbol!, FRACTION_DIGITS),\n                        })}\n                      </Button>\n                    )}\n                  </div>\n                )}\n                {!isViewMode && stakingType === 'ethena' && (\n                  <Button isText className={styles.checkEligibilityButton} onClick={handleCheckEligibility}>\n                    {lang('Check eligibility for max APY')}\n                  </Button>\n                )}\n                {!!unclaimedRewards && renderRewards()}\n              </>\n            )}\n        </div>\n\n        {hasHistory && renderHistory()}\n      </>\n    );\n  }\n\n  // No need to animate if it's in modal (`!isStatic`), because the modal is animated itself\n  const activeKey = useTransitionActiveKey([isStatic, stakingId], !isStatic);\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={activeKey}\n      shouldCleanup\n      className={styles.stakingTransition}\n      slideClassName={isStatic ? 'staking-info' : undefined}\n    >\n      {render()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const {\n    settings: { theme, isSensitiveDataHidden },\n    tokenInfo: { bySlug: tokenBySlug },\n  } = global;\n  const accountState = selectCurrentAccountState(global);\n\n  const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  const stakingHistory = accountId ? selectAccountStakingHistory(global, accountId) : undefined;\n  const totalProfit = accountId ? selectAccountStakingTotalProfit(global, accountId) : 0n;\n\n  return {\n    stakingState,\n    states,\n    totalProfit,\n    stakingHistory,\n    tokens: selectCurrentAccountTokens(global),\n    tokenBySlug,\n    theme,\n    shouldUseNominators: accountState?.staking?.shouldUseNominators,\n    isSensitiveDataHidden,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(StakingInfoContent));\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TONCOIN } from '../../config';\nimport { selectAccountStakingHistory, selectAccountStakingState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport Modal from '../ui/Modal';\nimport StakingInfoContent from './StakingInfoContent';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokenSlug?: string;\n  hasHistory?: boolean;\n}\n\nfunction StakingInfoModal({\n  isOpen,\n  tokenSlug,\n  hasHistory,\n  onClose,\n}: OwnProps & StateProps) {\n  const { fetchStakingHistory } = getActions();\n  const withBackground = tokenSlug !== TONCOIN.slug;\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={buildClassName(styles.stakingInfoModalContent, withBackground && styles.withBackground)}\n      nativeBottomSheetKey=\"staking-info\"\n      onClose={onClose}\n      forceFullNative={hasHistory}\n    >\n      <StakingInfoContent isActive={isOpen} onClose={onClose} />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const stakingHistory = accountId\n    ? selectAccountStakingHistory(global, accountId)\n    : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  return {\n    tokenSlug: stakingState?.tokenSlug,\n    hasHistory: Boolean(stakingHistory?.length),\n  };\n})(StakingInfoModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../api/types';\nimport type { GlobalState, Theme, UserToken } from '../../global/types';\nimport { ApiTransactionDraftError } from '../../api/types';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  DEFAULT_PRICE_CURRENCY,\n  IS_CAPACITOR,\n  TONCOIN,\n  VALIDATION_PERIOD_MS,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { getIsLongUnstake, getUnstakeTime } from '../../util/staking';\nimport { getIsMobileTelegramApp } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport { useAmountInputState } from '../ui/hooks/useAmountInputState';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AmountInput from '../ui/AmountInput';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  isViewMode: boolean;\n  tokens?: UserToken[];\n  baseCurrency: ApiBaseCurrency;\n  isNominators?: boolean;\n  theme: Theme;\n  isMultichainAccount: boolean;\n  stakingState?: ApiStakingState;\n  isSensitiveDataHidden?: true;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.UnstakeInitial,\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n  StakingState.UnstakeComplete,\n]);\n\nconst FULL_SIZE_NBS_STATES = new Set([\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n]);\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\n\nfunction UnstakeModal({\n  state,\n  isViewMode,\n  isLoading,\n  error,\n  tokens,\n  baseCurrency,\n  isNominators,\n  isMultichainAccount,\n  theme,\n  amount,\n  stakingState,\n  isSensitiveDataHidden,\n}: StateProps) {\n  const {\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingInitial,\n    submitStaking,\n    fetchStakingHistory,\n  } = getActions();\n\n  const {\n    type: stakingType,\n    tokenSlug,\n    balance: stakingBalance,\n  } = stakingState ?? {};\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).unstake;\n\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const isNativeEnough = nativeToken && nativeToken.amount >= networkFee;\n  const instantAvailable = stakingState?.type === 'liquid' ? stakingState.instantAvailable : undefined;\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => slug === tokenSlug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  let hasAmountError = false;\n  let isInsufficientBalance = false;\n\n  const isOnlyFullAmount = isNominators;\n  const [unstakeAmount, setUnstakeAmount] = useState(isOnlyFullAmount ? stakingBalance : undefined);\n  const [successUnstakeAmount, setSuccessUnstakeAmount] = useState<bigint | undefined>(undefined);\n\n  const unstakeTime = getUnstakeTime(stakingState);\n  const isLongUnstake = stakingState ? getIsLongUnstake(stakingState, unstakeAmount) : undefined;\n\n  const [unstakeDate, setUnstakeDate] = useState<number>(unstakeTime ?? Date.now() + VALIDATION_PERIOD_MS);\n  const forceUpdate = useForceUpdate();\n  const appTheme = useAppTheme(theme);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const isUnstakeDisabled = !isNativeEnough || isInsufficientBalance || !unstakeAmount;\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n      setUnstakeAmount(isOnlyFullAmount ? stakingBalance : undefined);\n    }\n  }, [isOpen, fetchStakingHistory, isOnlyFullAmount, stakingBalance]);\n\n  useSyncEffect(() => {\n    if (unstakeTime) {\n      setUnstakeDate(unstakeTime);\n    }\n  }, [unstakeTime]);\n\n  if (error === ApiTransactionDraftError.InsufficientBalance) {\n    isInsufficientBalance = true;\n  }\n\n  const refreshUnstakeDate = useLastCallback(() => {\n    if (unstakeDate < Date.now()) {\n      fetchStakingHistory();\n    }\n    forceUpdate();\n  });\n\n  useInterval(refreshUnstakeDate, UPDATE_UNSTAKE_DATE_INTERVAL_MS);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.UnstakePassword) {\n      setStakingScreen({ state: StakingState.UnstakeInitial });\n    }\n  });\n\n  const handleStartUnstakeClick = useLastCallback(() => {\n    submitStakingInitial({ isUnstaking: true, amount: unstakeAmount });\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setSuccessUnstakeAmount(amount);\n\n    submitStaking({ password, isUnstaking: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setSuccessUnstakeAmount(amount);\n    submitStaking({ isUnstaking: true });\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !unstakeAmount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"green\"\n        text={formatCurrency(toDecimal(unstakeAmount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  if (unstakeAmount !== undefined) {\n    if (unstakeAmount < 0) {\n      hasAmountError = true;\n    } else if (!stakingBalance || unstakeAmount > stakingBalance) {\n      hasAmountError = true;\n      isInsufficientBalance = true;\n    }\n  }\n\n  const amountInputProps = useAmountInputState({\n    amount: unstakeAmount,\n    token,\n    baseCurrency,\n    isAmountReadonly: isOnlyFullAmount,\n    onAmountChange: setUnstakeAmount,\n  });\n\n  // Wa want to render just the token name, not a token select button. To achieve that, we rely on the fact that\n  // `Dropdown` renders with no button border when there is only 1 item.\n  const selectableTokens = useMemo(() => token && [token], [token]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const renderBottomRight = useCallback((className?: string) => {\n    const activeKey = isInsufficientBalance ? 0\n      : !isNativeEnough ? 1\n        : instantAvailable ? 2\n          : 3;\n\n    let content: string | React.JSX.Element | TeactNode[] = token ? lang('$fee_value', {\n      fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n    }) : '';\n\n    if (token) {\n      if (isInsufficientBalance) {\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (!isNativeEnough) {\n        content = (\n          <span className={styles.balanceError}>\n            {lang('$insufficient_fee', {\n              fee: formatCurrency(toBig(networkFee), nativeToken?.symbol ?? ''),\n            })}\n          </span>\n        );\n      } else if (instantAvailable) {\n        content = lang('$unstake_up_to_information', {\n          value: formatCurrency(toDecimal(instantAvailable, token.decimals), token.symbol),\n        });\n      }\n    }\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountBottomRight, className)}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"semiFade\"\n        activeKey={activeKey}\n      >\n        {content}\n      </Transition>\n    );\n  }, [instantAvailable, isInsufficientBalance, isNativeEnough, lang, nativeToken?.symbol, networkFee, realFee, token]);\n\n  function renderUnstakeTimer() {\n    const unstakeDateText = stakingType === 'ethena'\n      ? renderText(lang('$unstaking_when_receive_ethena'))\n      : lang('$unstaking_when_receive', {\n        time: (\n          <strong>{formatRelativeHumanDateTime(lang.code, unstakeDate)}</strong>\n        ),\n      });\n\n    return (\n      <div className={buildClassName(styles.unstakeTime)}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n        />\n        <div>{unstakeDateText}</div>\n      </div>\n    );\n  }\n\n  function renderUnstakeInfo() {\n    const shouldShowInfo = !isInsufficientBalance && unstakeAmount;\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={!shouldShowInfo ? 0 : !isLongUnstake ? 1 : 2}\n        className={styles.unstakeInfoTransition}\n      >\n        {!shouldShowInfo ? undefined\n          : (\n            !isLongUnstake\n              ? (\n                <div className={styles.unstakeInfo}>\n                  {lang('$unstake_information_instantly')}\n                </div>\n              )\n              : renderUnstakeTimer()\n          )}\n      </Transition>\n    );\n  }\n\n  function renderInitial() {\n    return (\n      <>\n        <ModalHeader title={lang('$unstake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n        <div className={modalStyles.transitionContent}>\n          <AmountInput\n            {...amountInputProps}\n            labelText={lang('Amount to unstake')}\n            maxAmount={stakingBalance}\n            token={token}\n            allTokens={selectableTokens}\n            hasError={hasAmountError}\n            isMaxAmountLoading={stakingBalance === undefined || !token}\n            isMaxAmountAllMode\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            renderBottomRight={renderBottomRight}\n          />\n\n          {renderUnstakeInfo()}\n\n          {!isViewMode && (\n            <div className={modalStyles.buttons}>\n              <Button\n                isPrimary\n                isLoading={isLoading}\n                isDisabled={isUnstakeDisabled}\n                onClick={handleStartUnstakeClick}\n              >\n                {lang('Unstake')}\n              </Button>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Unstaking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"unstaking\"\n          error={error}\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n          skipAuthScreen\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={getIsMobileTelegramApp()\n            ? lang('Request is sent!')\n            : stakingType === 'ethena'\n              ? lang('Request for unstaking is sent!')\n              : lang('Coins have been unstaked!')}\n          onClose={cancelStaking}\n        />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color={stakingType !== 'ethena' ? 'green' : undefined}\n            playAnimation={isActive}\n            amount={successUnstakeAmount}\n            tokenSymbol={token?.symbol}\n            decimals={token?.decimals}\n            noSign\n          />\n\n          {isLongUnstake && renderUnstakeTimer()}\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: StakingState) {\n    switch (currentKey) {\n      case StakingState.UnstakeInitial:\n        return renderInitial();\n\n      case StakingState.UnstakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.UnstakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.UnstakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.UnstakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"unstake\"\n      forceFullNative={FULL_SIZE_NBS_STATES.has(renderingKey)}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const tokens = selectCurrentAccountTokens(global);\n  const { baseCurrency = DEFAULT_PRICE_CURRENCY, isSensitiveDataHidden } = global.settings;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const isNominators = stakingState?.type === 'nominators';\n\n  return {\n    ...global.currentStaking,\n    tokens,\n    baseCurrency,\n    isNominators,\n    theme: global.settings.theme,\n    isMultichainAccount,\n    stakingState,\n    isSensitiveDataHidden,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(UnstakeModal));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport {\n  APP_INSTALL_URL,\n  APP_NAME,\n  APP_REPO_URL,\n  IS_ANDROID_DIRECT,\n  IS_FIREFOX_EXTENSION,\n} from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport {\n  IS_ANDROID_APP,\n  IS_CHROME_EXTENSION,\n  IS_EDGE,\n  IS_IOS_APP,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateAvailable.module.scss';\n\ninterface StateProps {\n  isAppUpdateAvailable?: boolean;\n  isAppUpdateRequired?: boolean;\n  newAppVersion?: string;\n}\n\nfunction UpdateAvailable({ isAppUpdateAvailable, newAppVersion, isAppUpdateRequired }: StateProps) {\n  const lang = useLang();\n\n  const { shouldRender, ref } = useShowTransition<HTMLButtonElement>({\n    isOpen: (IS_ANDROID_DIRECT && isAppUpdateAvailable) || isAppUpdateRequired,\n    withShouldRender: true,\n  });\n\n  const handleClick = () => {\n    if (IS_WEB) {\n      window.location.reload();\n      return;\n    }\n\n    void openUrl(getUrl(newAppVersion), { isExternal: true });\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <button ref={ref} type=\"button\" className={styles.wrapper} onClick={handleClick}>\n      <i className={buildClassName('icon icon-download-filled', styles.icon)} aria-hidden />\n      {lang('Update %app_name%', { app_name: APP_NAME })}\n    </button>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => ({\n  isAppUpdateAvailable: global.isAppUpdateAvailable,\n  newAppVersion: global.latestAppVersion,\n  isAppUpdateRequired: global.isAppUpdateRequired,\n}))(UpdateAvailable));\n\nfunction getUrl(appVersion?: string) {\n  if (IS_ANDROID_DIRECT) {\n    return appVersion\n      ? `${APP_REPO_URL}/releases/download/v${encodeURIComponent(appVersion || '')}/${encodeURIComponent(APP_NAME)}.apk`\n      : 'https://github.com/mytonwallet-org/mytonwallet/releases/latest';\n  }\n\n  if (IS_ANDROID_APP) {\n    return `${APP_INSTALL_URL}android-store`;\n  }\n\n  if (IS_IOS_APP) {\n    return `${APP_INSTALL_URL}ios`;\n  }\n\n  if (IS_CHROME_EXTENSION) {\n    return `${APP_INSTALL_URL}${IS_EDGE ? 'edge-extension' : 'chrome-extension'}`;\n  }\n\n  if (IS_FIREFOX_EXTENSION) {\n    return `${APP_INSTALL_URL}firefox-extension`;\n  }\n\n  return APP_INSTALL_URL;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"eU8arlH4\",\"icon\":\"X9C5VDdJ\"};","import type { ApiVestingInfo, ApiVestingPartStatus } from '../../../api/types';\n\nexport function calcVestingAmountByStatus(vesting: ApiVestingInfo[], statuses: ApiVestingPartStatus[]) {\n  return vesting.reduce((acc, currentVesting) => {\n    return acc + currentVesting.parts.reduce((currentAcc, part) => {\n      return currentAcc + (statuses.includes(part.status) ? part.amount : 0);\n    }, 0);\n  }, 0).toString();\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"Z3AdvY3j\",\"modalHeader\":\"UGaC6iSp\",\"passwordModalDialog\":\"TSf_GkYf\",\"amountWrapper\":\"nmSXdbkU\",\"close\":\"gj76sp0s\",\"inputWrapper\":\"WYLJUay4\",\"inputLabel\":\"af6G76Qu\",\"inputValue\":\"W2jkzSKT\",\"unfreezeInput\":\"laFaO54G\",\"unfreezeResult\":\"Da5SKOto\",\"buttons\":\"TDJhFbKs\",\"button\":\"q0MWzlSV\",\"unfreezeTime\":\"nOY_rRWD\",\"unfreezeTimeIcon\":\"B_mbvdNt\",\"actions\":\"qVDajNe7\",\"actionsTitle\":\"mwrjA2Wq\",\"actionsList\":\"Gvf3taGj\",\"block\":\"N60lIj1U\",\"vestingInfo\":\"aLa4cQLd\",\"blockTitle\":\"RlCMRY3O\",\"blockSubtitle\":\"A2xAIJdW\",\"part\":\"tbB7hrjM\",\"partInteractive\":\"Fi06J8yl\",\"active\":\"hNrDT2Be\",\"partIcon\":\"Bc1llfyb\",\"partValue\":\"oTZtwcWo\",\"transactionBanner\":\"pu3vP7ZP\",\"operationInfoFee\":\"V5IIeyTC\",\"operationInfoFeeWithGap\":\"ZROURKjf\",\"partName\":\"SkSkSLJA\",\"bold\":\"_7RDFG6sc\",\"date\":\"F8H8tP5h\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { Theme } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, SHORT_FRACTION_DIGITS } from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectMycoin,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\n\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isViewMode: boolean;\n  isUnfreezeRequested?: boolean;\n  vesting?: ApiVestingInfo[];\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst MY_TOKEN_SYMBOL = 'MY';\n\nfunction VestingModal({\n  isOpen,\n  isViewMode,\n  isUnfreezeRequested,\n  vesting,\n  mycoin,\n  theme,\n}: StateProps) {\n  const { fetchStakingHistory, closeVestingModal, startClaimingVesting } = getActions();\n\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const currentlyFrozenAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['frozen', 'ready']);\n  }, [vesting]);\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const isDisabledUnfreeze = currentlyReadyToUnfreezeAmount === '0';\n  const appTheme = useAppTheme(theme);\n\n  useInterval(forceUpdate, isUnfreezeRequested ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  const handleStartClaimingVesting = useLastCallback(() => {\n    startClaimingVesting();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderUnfrozenDescription() {\n    return (\n      <div className={styles.unfreezeTime}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unfreezeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockBlue}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockBlue}\n        />\n        <div>\n          {lang('You will receive your unfrozen coins in a few minutes.')}\n        </div>\n      </div>\n    );\n  }\n\n  function renderVestingInfo(info: ApiVestingInfo) {\n    return (\n      <div key={info.id} className={styles.block}>\n        <div className={styles.vestingInfo}>\n          <div className={styles.blockTitle}>{info.title}</div>\n          <div className={styles.blockSubtitle}>\n            {lang('%volume% in %amount% parts', {\n              volume: <b>{formatCurrency(info.initialAmount, mycoin!.symbol, mycoin!.decimals)}</b>,\n              amount: info.parts.length.toString(),\n            })}\n          </div>\n        </div>\n        {info.parts.map((part) => {\n          const icon = part.status === 'frozen'\n            ? 'icon-snow'\n            : (part.status === 'missed' ? 'icon-missed' : part.status === 'unfrozen' ? 'icon-check' : 'icon-fire');\n          const title = part.status === 'frozen'\n            ? 'Frozen'\n            : (part.status === 'missed' ? 'Missed' : part.status === 'unfrozen' ? 'Unfrozen' : 'Ready to Unfreeze');\n          const isInteractive = !isViewMode && !isUnfreezeRequested && part.status === 'ready';\n          const endsAt = part.status === 'frozen'\n            ? part.time\n            : part.status === 'ready'\n              ? part.timeEnd\n              : undefined;\n\n          return (\n            <div\n              key={part.id}\n              role={isInteractive ? 'button' : undefined}\n              className={buildClassName(styles.part, part.status, isInteractive && styles.partInteractive)}\n              onClick={isInteractive ? handleStartClaimingVesting : undefined}\n            >\n              <i\n                className={buildClassName(styles.partIcon, icon, part.status)}\n                aria-hidden\n              />\n              <div className={styles.partName}>\n                {lang(title)}\n                {Boolean(endsAt) && (\n                  <div className={styles.date}>\n                    {lang('until %date%', {\n                      date: (\n                        <>\n                          <span className={styles.bold}>{formatFullDay(lang.code!, endsAt)}</span>,\n                          {' '}{formatTime(endsAt)}\n                        </>),\n                    })}\n                  </div>\n                )}\n              </div>\n              <div className={buildClassName(styles.partValue, part.status)}>\n                {formatCurrency(part.amount, mycoin!.symbol, mycoin!.decimals)}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderVestingSchedule() {\n    return (\n      <div className={styles.actions}>\n        <div className={styles.actionsTitle}>{lang('Vesting Schedule')}</div>\n        <div className={buildClassName(styles.actionsList, 'custom-scroll')}>\n          {vesting?.map(renderVestingInfo)}\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <>\n        <div className={styles.amountWrapper}>\n          <ModalHeader\n            title={lang('Vesting')}\n            className={styles.modalHeader}\n            closeClassName={styles.close}\n            onClose={closeVestingModal}\n          />\n          <RichNumberField\n            labelText={lang('Vesting Balance')}\n            zeroValue=\"...\"\n            value={currentlyFrozenAmount || '0'}\n            decimals={SHORT_FRACTION_DIGITS}\n            suffix={MY_TOKEN_SYMBOL}\n            className={styles.inputWrapper}\n            labelClassName={styles.inputLabel}\n            valueClassName={styles.inputValue}\n          />\n          {isUnfreezeRequested\n            ? renderUnfrozenDescription()\n            : (\n              <>\n                <RichNumberField\n                  labelText={lang('Ready to Unfreeze')}\n                  zeroValue=\"...\"\n                  value={currentlyReadyToUnfreezeAmount}\n                  decimals={SHORT_FRACTION_DIGITS}\n                  suffix={MY_TOKEN_SYMBOL}\n                  className={styles.inputWrapper}\n                  inputClassName={styles.unfreezeInput}\n                  labelClassName={styles.inputLabel}\n                  valueClassName={styles.unfreezeResult}\n                />\n                {!isViewMode && (\n                  <div className={styles.buttons}>\n                    <Button\n                      className={styles.button}\n                      isPrimary\n                      isDisabled={isDisabledUnfreeze}\n                      onClick={!isDisabledUnfreeze ? handleStartClaimingVesting : undefined}\n                    >\n                      {lang('Unfreeze')}\n                    </Button>\n                  </div>\n                )}\n              </>\n            )}\n        </div>\n        {renderVestingSchedule()}\n      </>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"vesting-info\"\n      forceFullNative\n      onClose={closeVestingModal}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const { info: vesting, unfreezeRequestedIds } = accountState?.vesting || {};\n\n  return {\n    isOpen: global.isVestingModalOpen,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    vesting,\n    isUnfreezeRequested: Boolean(unfreezeRequestedIds?.length),\n    mycoin: selectMycoin(global),\n    theme: global.settings.theme,\n  };\n})(VestingModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport { VestingUnfreezeState } from '../../global/types';\n\nimport { CLAIM_AMOUNT, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectMycoin,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  vesting?: ApiVestingInfo[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: VestingUnfreezeState;\n  mycoin?: ApiTokenWithPrice;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n}\nfunction VestingPasswordModal({\n  isOpen,\n  vesting,\n  tokens,\n  isLoading,\n  address,\n  error,\n  mycoin,\n  state = VestingUnfreezeState.Password,\n  isHardwareAccount,\n  isMultichainAccount,\n}: StateProps) {\n  const { submitClaimingVesting, cancelClaimingVesting, clearVestingError } = getActions();\n\n  const lang = useLang();\n  const {\n    amount: balance,\n  } = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]) || {};\n  const claimAmount = toBig(CLAIM_AMOUNT);\n  const hasAmountError = !balance || balance < CLAIM_AMOUNT;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = !isHardwareAccount && !getDoesUsePinPad();\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (hasAmountError) return;\n    submitClaimingVesting({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (hasAmountError) return;\n    submitClaimingVesting();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={mycoin}\n          withChainIcon={isMultichainAccount}\n          text={formatCurrency(currentlyReadyToUnfreezeAmount, mycoin!.symbol, mycoin!.decimals)}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={address && shortenAddress(address)}\n        />\n        <div className={feeClassName}>\n          {renderText(lang('$fee_value_bold', { fee: formatCurrency(claimAmount, TONCOIN.symbol) }))}\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: VestingUnfreezeState) {\n    switch (currentKey) {\n      case VestingUnfreezeState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelClaimingVesting}\n          />\n        );\n\n      case VestingUnfreezeState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelClaimingVesting}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case VestingUnfreezeState.Password:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"unfreeze\"\n            error={hasAmountError ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelClaimingVesting}\n            onUpdate={clearVestingError}\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={withModalHeader ? lang('Confirm Unfreezing') : undefined}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"vesting-confirm\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelClaimingVesting}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const accountState = selectCurrentAccountState(global);\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    isConfirmRequested: isOpen,\n    info: vesting,\n    isLoading,\n    error,\n    unfreezeState,\n  } = accountState?.vesting || {};\n  const tokens = selectCurrentAccountTokens(global);\n\n  return {\n    isOpen,\n    vesting,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    state: unfreezeState,\n    mycoin: selectMycoin(global),\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(VestingPasswordModal));\n","import type { DropdownItem } from '../../../../ui/Dropdown';\n\nimport { MYTONWALLET_MULTISEND_DAPP_URL } from '../../../../../config';\nimport { vibrate } from '../../../../../util/haptics';\nimport { getTranslation } from '../../../../../util/langProvider';\nimport { openUrl } from '../../../../../util/openUrl';\nimport { getHostnameFromUrl } from '../../../../../util/url';\n\nexport type MenuHandler = 'multisend';\n\nexport const SEND_CONTEXT_MENU_ITEMS: DropdownItem<MenuHandler>[] = [{\n  name: 'Multisend',\n  fontIcon: 'menu-multisend',\n  value: 'multisend',\n}];\n\nexport function handleSendMenuItemClick(value: MenuHandler) {\n  if (value === 'multisend') {\n    void vibrate();\n    void openUrl(MYTONWALLET_MULTISEND_DAPP_URL, {\n      title: getTranslation('Multisend'),\n      subtitle: getHostnameFromUrl(MYTONWALLET_MULTISEND_DAPP_URL),\n    });\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ejEBAbV8\",\"chartLabels\":\"SpaIcYmy\",\"chartLabel\":\"Ehn5yB9o\",\"realFee\":\"ZXtTwJ2M\",\"excessFee\":\"wvOK88A2\",\"chartLines\":\"f8dLAhsP\",\"chartLine\":\"ow57IO0l\",\"explanation\":\"Tbn84o8Q\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\nimport type { FeeToken } from '../ui/Fee';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { getChainConfig } from '../../util/chain';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './FeeDetailsModal.module.scss';\n\ntype OwnProps = {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  fullFee: FeeTerms | undefined;\n  realFee: FeeTerms | undefined;\n  realFeePrecision: FeePrecision | undefined;\n  /** The excess fee is always measured in the native token */\n  excessFee: FeeValue | undefined;\n  excessFeePrecision: FeePrecision | undefined;\n  /** The token denoting the `token` fields of the `FeeTerms` objects. */\n  token: FeeToken | undefined;\n  title?: TeactNode;\n  extraContent?: TeactNode;\n};\n\nfunction FeeDetailsModal({ isOpen, onClose, title, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      isCompact\n      title={title ?? lang('Blockchain Fee Details')}\n      contentClassName={styles.content}\n    >\n      <FeeDetailsContent onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nexport default memo(FeeDetailsModal);\n\nfunction FeeDetailsContent({\n  onClose,\n  fullFee,\n  realFee,\n  realFeePrecision = 'exact',\n  excessFee,\n  excessFeePrecision = 'exact',\n  token,\n  extraContent,\n}: Omit<OwnProps, 'isOpen' | 'title'>) {\n  const chain = token && getChainBySlug(token.slug);\n  const nativeToken = chain && getChainConfig(chain).nativeToken;\n  const lang = useLang();\n\n  return (\n    <>\n      <div>\n        <div className={styles.chartLabels}>\n          <div className={buildClassName(styles.chartLabel, styles.realFee)}>\n            {lang('Final Fee')}\n          </div>\n          <div className={buildClassName(styles.chartLabel, styles.excessFee)}>\n            {lang('Excess')}\n          </div>\n        </div>\n        <div className={styles.chartLines}>\n          <div className={buildClassName(styles.chartLine, styles.realFee)}>\n            {realFee && token && (\n              <Fee\n                terms={realFee}\n                precision={realFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n          <div className={buildClassName(styles.chartLine, styles.excessFee)}>\n            {excessFee !== undefined && token && (\n              <Fee\n                terms={{ native: excessFee }}\n                precision={excessFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n        </div>\n      </div>\n      <div className={styles.explanation}>\n        <div>\n          {renderText(lang('$fee_details', {\n            full_fee: fullFee && token && <b><Fee terms={fullFee} precision=\"exact\" token={token} /></b>,\n            excess_symbol: <b>{nativeToken?.symbol}</b>,\n            chain_name: chain?.toUpperCase(),\n          }))}\n        </div>\n        {extraContent}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button isPrimary className={modalStyles.button} onClick={onClose}>\n          {lang('Got It')}\n        </Button>\n      </div>\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"tGUq61Uw\",\"scrollContent\":\"m5XAGki9\",\"amountInput\":\"SZC58ifv\",\"amountInputBuy\":\"uBBR78Gi\",\"inputLabel\":\"EeV5B584\",\"amountInputInner\":\"L752Cv1F\",\"advancedSlippageContainer\":\"jiH3u0SA\",\"content\":\"dQUuISOK\",\"inputContainer\":\"IkAedzyb\",\"advancedSlippageButton\":\"nnFruaI2\",\"swapButtonWrapper\":\"eEwTqlEP\",\"swapButtonWrapperStatic\":\"z1UgQ2yi\",\"swapButton\":\"hrHymNJu\",\"footerBlock\":\"yPmfwG9j\",\"footerBlockStatic\":\"Edk19FlP\",\"dot\":\"ru4rAllW\",\"advancedBlock\":\"dx6Hf2xp\",\"advancedRow\":\"QPeOMoOM\",\"advancedDescription\":\"YzXjxATB\",\"advancedTooltip\":\"QdMU2Tgb\",\"advancedTooltipContainer\":\"VGq4FFXS\",\"advancedValue\":\"JTLP1WRv\",\"advancedSlippageError\":\"NW_aag3U\",\"advancedSlippage\":\"K4rGLITC\",\"advancedInput\":\"uWjxL_tL\",\"advancedInputValue\":\"Y_KEhiFS\",\"isEmpty\":\"lP4fP0kG\",\"advancedError\":\"X2kTDRkO\",\"advancedLink\":\"NlT_I8kT\",\"advancedLinkIcon\":\"A0XDmIY2\",\"advancedPlaceholder\":\"vvtzW7L0\",\"footerButtonWrapper\":\"_5_NPQXE0\",\"footerButton\":\"qzfAPYMD\",\"footerButtonInner\":\"Ns4lxltP\",\"swapArrowIcon\":\"Vzdj7mTH\",\"changellyInfo\":\"gCMqbJwS\",\"priceImpact\":\"nwwHhwFa\",\"feeLine\":\"vz3aF88G\",\"priceImpactSticker\":\"YaZn9OUh\",\"priceImpactContent\":\"UUOZvXZT\",\"priceImpactTitle\":\"sbyrAyQC\",\"priceImpactArrow\":\"cEk2aQ7Z\",\"priceImpactDescription\":\"olGNOU3k\",\"swapCornerTop\":\"csDd7Ni1\",\"swapCornerBottom\":\"xyxUxtsY\",\"swapCornerStaticTop\":\"B7ECmlJ1\",\"swapCornerStaticBottom\":\"WuHn_HeC\",\"selectBlockchainBlock\":\"prVCHnG1\",\"inputAddressWrapper\":\"DTAq0std\",\"inputAddress\":\"b7EwDSEo\",\"blockchainHintWrapper\":\"ywkeppF2\",\"changellyDescription\":\"V7p8St7r\",\"blockchainHintText\":\"CBP3_LjF\",\"blockchainHintTextError\":\"t2EtyAQD\",\"inputButton\":\"IpN3STYq\",\"inputButtonShifted\":\"xDE5m07O\",\"changellyInfoStatic\":\"EvrCvWOD\",\"priceImpactStatic\":\"eoiWwJ0m\",\"changellyInfoTitle\":\"fwJQ9lpO\",\"changellyInfoDescription\":\"Y38OidS3\",\"changellyIcon\":\"ieB34P8k\",\"changellyInfoBlock\":\"aQOSkXKG\",\"blockchainButtons\":\"pQ9YM0ta\",\"changellyTextField\":\"cTKYWTLL\",\"textFieldWrapperFullWidth\":\"VR4c3lOH\",\"changellyImportantRed\":\"M_DwJtlB\",\"arrowContainer\":\"abK4XtWe\",\"arrowContainerInverted\":\"OSP7z62u\",\"arrow\":\"ZktBDvds\",\"arrowNew\":\"Z8CqJe5c\",\"arrowOld\":\"G_2MIwOh\",\"animateDisappear\":\"PpIbnc8v\",\"arrow-disappear\":\"VKHzIRP6\",\"arrowDisappear\":\"VKHzIRP6\",\"animateAppear\":\"STVPF9rF\",\"arrow-appear\":\"igBksUDT\",\"arrowAppear\":\"igBksUDT\",\"transactionBanner\":\"T1jLnRBM\",\"changellyDescriptionBold\":\"Vbj5MEAN\",\"qrCode\":\"MuLyFrfU\",\"qrCodeHidden\":\"Fn7oQpnQ\",\"textFieldLabel\":\"ak6Vmppj\"};","import React, { memo, useRef } from '../../../lib/teact/teact';\n\nimport type { DieselStatus, UserSwapToken } from '../../../global/types';\nimport { SwapErrorType, SwapType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrencySimple } from '../../../util/formatNumber';\n\nimport { useThrottledSignal } from '../../../hooks/useAsyncResolvers';\nimport useDerivedSignal from '../../../hooks/useDerivedSignal';\nimport useDerivedState from '../../../hooks/useDerivedState';\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Transition from '../../ui/Transition';\n\nimport styles from '../Swap.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  isEstimating?: boolean;\n  isSending?: boolean;\n  isNotEnoughNative?: boolean;\n  nativeToken?: UserSwapToken;\n  dieselStatus?: DieselStatus;\n  isPriceImpactError?: boolean;\n  canSubmit?: boolean;\n  errorType?: SwapErrorType;\n  limits?: {\n    fromMin?: string;\n    fromMax?: string;\n  };\n}\n\nconst BUTTON_ANIMATION_DURATION = 250 + ANIMATION_END_DELAY;\n\nfunction SwapSubmitButton({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  isEstimating,\n  isSending,\n  isNotEnoughNative,\n  nativeToken,\n  dieselStatus,\n  isPriceImpactError,\n  canSubmit,\n  errorType,\n  limits,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isErrorExist = errorType !== undefined;\n  const shouldSendingBeVisible = isSending && swapType === SwapType.CrosschainToWallet;\n  const isDisabled = !canSubmit || shouldSendingBeVisible;\n  const isLoading = isEstimating || shouldSendingBeVisible;\n\n  const errorMsgByType = {\n    [SwapErrorType.UnexpectedError]: lang('Unexpected Error'),\n    [SwapErrorType.InvalidPair]: lang('Invalid Pair'),\n    [SwapErrorType.NotEnoughLiquidity]: lang('Insufficient liquidity'),\n    [SwapErrorType.ChangellyMinSwap]: lang('Minimum amount', {\n      value: formatCurrencySimple(limits?.fromMin ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.ChangellyMaxSwap]: lang('Maximum amount', {\n      value: formatCurrencySimple(limits?.fromMax ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.NotEnoughForFee]: lang('Not Enough %symbol%', {\n      symbol: tokenIn?.symbol,\n    }),\n    [SwapErrorType.TooSmallAmount]: lang('$swap_too_small_amount'),\n  };\n\n  const isTouched = Boolean(amountIn || amountOut);\n\n  let text: string | string[] = '$swap_from_to';\n\n  if (isTouched) {\n    if (isErrorExist) {\n      text = errorMsgByType[errorType] as string;\n    } else if (nativeToken) {\n      if (isNotEnoughNative && tokenIn?.chain === 'ton' && tokenIn?.tokenAddress) {\n        if (dieselStatus === 'not-available') {\n          text = lang('Not Enough %symbol%', { symbol: 'TON' }) as string;\n        } else if (dieselStatus === 'pending-previous') {\n          text = lang('Awaiting Previous Fee');\n        } else if (dieselStatus === 'not-authorized') {\n          text = lang('Authorize %token% Fee', { token: tokenIn?.symbol }) as string;\n        }\n      } else if (isNotEnoughNative) {\n        text = lang('Not Enough %symbol%', { symbol: nativeToken?.symbol }) as string;\n      }\n    }\n  }\n\n  const textStr = Array.isArray(text) ? text.join('') : text;\n\n  const shouldShowError = !isEstimating && (\n    isPriceImpactError\n    || isErrorExist\n    || (nativeToken && isNotEnoughNative && (\n      !dieselStatus\n      || dieselStatus === 'not-available'\n      || dieselStatus === 'pending-previous'\n    ))\n  );\n\n  const isDestructive = isTouched && shouldShowError;\n\n  const transitionKeyRef = useRef(0);\n  const render = useDerivedSignal(() => {\n    const renderedText = textStr === '$swap_from_to'\n      ? lang('$swap_from_to', {\n        from: tokenIn?.symbol,\n        icon: <i className={buildClassName('icon-chevron-right', styles.swapArrowIcon)} aria-hidden />,\n        to: tokenOut?.symbol,\n      })\n      : textStr;\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        className={styles.footerButtonWrapper}\n        activeKey={transitionKeyRef.current++}\n      >\n        <Button\n          isPrimary\n          isSubmit\n          className={styles.footerButton}\n          isDisabled={isDisabled}\n          isLoading={isLoading}\n          isDestructive={isDestructive}\n        >\n          {/* The <span> is to have inline content positioning to align the icon properly */}\n          <span className={styles.footerButtonInner}>{renderedText}</span>\n        </Button>\n      </Transition>\n    );\n  }, [isDestructive, isDisabled, isLoading, lang, textStr, tokenIn?.symbol, tokenOut?.symbol]);\n\n  const renderThrottled = useThrottledSignal(render, BUTTON_ANIMATION_DURATION);\n  const rendered = useDerivedState(renderThrottled);\n\n  return rendered;\n}\n\nexport default memo(SwapSubmitButton);\n","import type { Scheduler } from '../util/schedulers';\nimport type { Signal } from '../util/signals';\n\nimport useDebouncedCallback from './useDebouncedCallback';\nimport useDerivedSignal from './useDerivedSignal';\nimport useThrottledCallback from './useThrottledCallback';\n\nexport function useThrottledResolver<T>(\n  resolver: () => T,\n  deps: unknown[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  return useThrottledCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, msOrSchedulerFn, noFirst);\n}\n\nexport function useThrottledSignal<T>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n): Signal<T> {\n  const throttledResolver = useThrottledResolver(() => getValue(), [getValue], ms, noFirst);\n\n  return useDerivedSignal(\n    throttledResolver, [throttledResolver, getValue], true,\n  );\n}\n\nexport function useDebouncedResolver<T>(\n  resolver: () => T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  return useDebouncedCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, ms, noFirst, noLast);\n}\n\nexport function useDebouncedSignal<T>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n  noLast = false,\n): Signal<T> {\n  const debouncedResolver = useDebouncedResolver(() => getValue(), [getValue], ms, noFirst, noLast);\n\n  return useDerivedSignal(\n    debouncedResolver, [debouncedResolver, getValue], true,\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"mdHmid9q\",\"container\":\"y7MeqLtP\",\"content\":\"M5luQatq\",\"button\":\"bmtS8v9y\",\"static\":\"VF77TUMq\",\"label\":\"Er8PXP6e\",\"labelText\":\"IIv2eCYK\",\"iconArrowRight\":\"jDHaQfBV\",\"dexList\":\"NlzL4Voz\",\"dexItem\":\"lL1VFeQA\",\"bestRate\":\"AC6eCyuu\",\"current\":\"_F70O58C\",\"dexValue\":\"J5iGiLKz\",\"dexTitle\":\"YT_HY2ps\",\"dexIcon\":\"V0Td82aA\",\"dexValueFractional\":\"jQ6cgMjD\",\"dexExchangeRate\":\"JAHr4SCc\",\"dexInfo\":\"sRFnXBUF\",\"dexInfoDisabled\":\"e9qAwzfb\",\"bestLabel\":\"gq26TBf_\",\"dexSubmitSlide\":\"i8eq5QM3\",\"dexSubmitButtons\":\"IfkI_jwY\",\"dexBestRateButton\":\"MevYjouy\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapDexLabel, ApiSwapEstimateVariant } from '../../api/types';\nimport type { GlobalState, UserSwapToken } from '../../global/types';\nimport { SwapInputSource } from '../../global/types';\n\nimport {\n  DEFAULT_OUR_SWAP_FEE,\n  SHORT_FRACTION_DIGITS,\n  SWAP_DEX_LABELS,\n  WHOLE_PART_DELIMITER,\n} from '../../config';\nimport { getNumberParts } from '../../global/helpers/number';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './SwapDexChooser.module.scss';\n\nimport DedustPath from '../../assets/logo/dedust.png';\nimport StonfiPath from '../../assets/logo/stonfi.png';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n  swapVersion: GlobalState['swapVersion'];\n}\n\nconst IS_WHOLE_PART_BIG_REGEX = /^\\d{5,}([.,]|$)/;\n\nfunction SwapDexChooser({\n  tokenIn,\n  tokenOut,\n  isStatic,\n  currentSwap: {\n    amountOut,\n    amountIn,\n    estimates,\n    currentDexLabel,\n    bestRateDexLabel,\n    inputSource,\n    ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  },\n  swapVersion,\n}: OwnProps & StateProps) {\n  const { setSwapDex } = getActions();\n\n  const lang = useLang();\n\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [selectedDexLabel, setSelectedDexLabel] = useState<ApiSwapDexLabel | undefined>(currentDexLabel);\n  const renderedDexItems = useCurrentOrPrev(estimates?.length ? estimates : undefined, true);\n  const renderedCurrentDexLabel = useCurrentOrPrev(currentDexLabel, true);\n  const renderedBestRateDexLabel = useCurrentOrPrev(bestRateDexLabel, true);\n  const isBestRateSelected = Boolean(bestRateDexLabel && bestRateDexLabel === selectedDexLabel);\n  const confirmLabel = isBestRateSelected\n    ? lang('Use Best Rate')\n    : lang('Switch to %dex_name%', {\n      dex_name: selectedDexLabel ? SWAP_DEX_LABELS[selectedDexLabel] : '',\n    });\n\n  const shouldRenderForSwapV2 = !!estimates?.length && !!tokenOut && !!amountOut && !!amountIn;\n\n  const { shouldRender, ref: rootRef } = useShowTransition({\n    isOpen: swapVersion === 2 && shouldRenderForSwapV2,\n    withShouldRender: true,\n  });\n\n  const handleDexConfirm = useLastCallback(() => {\n    if (selectedDexLabel) {\n      setSwapDex({ dexLabel: selectedDexLabel });\n    }\n    closeModal();\n  });\n\n  function toggleDexMenu() {\n    if (isModalOpen) {\n      closeModal();\n    } else {\n      setSelectedDexLabel(currentDexLabel);\n      openModal();\n    }\n  }\n\n  const { shouldRender: shouldRenderBenefit, value: benefitAmount } = useMemo(() => {\n    return calculateBenefitAmount({\n      ourFeePercent,\n      decimals: inputSource === SwapInputSource.In ? tokenOut?.decimals : tokenIn?.decimals,\n      estimates,\n      inputSource,\n      bestRateDexLabel: renderedBestRateDexLabel,\n    });\n  }, [renderedBestRateDexLabel, estimates, inputSource, ourFeePercent, tokenIn?.decimals, tokenOut?.decimals]);\n\n  const renderedAmounts = useMemo<Record<ApiSwapDexLabel, TeactNode> | undefined>(() => {\n    if (!renderedDexItems?.length || renderedDexItems.length < 2) return undefined;\n\n    return renderedDexItems.reduce((acc, item) => {\n      const { fromAmount, toAmount, dexLabel } = item;\n      const amount = inputSource === SwapInputSource.In ? toAmount : fromAmount;\n      const token = inputSource === SwapInputSource.In ? tokenOut! : tokenIn!;\n\n      if (IS_WHOLE_PART_BIG_REGEX.test(amount)) {\n        const formattedAmount = formatDexItemAmount(amount, token);\n\n        if (formattedAmount) {\n          acc[dexLabel] = formattedAmount;\n        }\n      } else {\n        acc[dexLabel] = formatCurrency(amount, token.symbol);\n      }\n\n      return acc;\n    }, {} as Record<ApiSwapDexLabel, TeactNode>);\n  }, [inputSource, renderedDexItems, tokenIn, tokenOut]);\n\n  if (!shouldRender || !renderedDexItems?.length) return undefined;\n\n  const buttonContent = (\n    <>\n      {renderedBestRateDexLabel === renderedCurrentDexLabel && renderedDexItems.length > 1 && (\n        <span className={styles.label}><span className={styles.labelText}>{lang('Best Rate')}</span></span>\n      )}\n      {lang('via %dex_name%', {\n        dex_name: <strong>{SWAP_DEX_LABELS[renderedCurrentDexLabel!]}</strong>,\n      })}\n      {renderedDexItems.length > 1 && (\n        <i className={buildClassName('icon-chevron-right', styles.iconArrowRight)} aria-hidden />\n      )}\n    </>\n  );\n\n  if (renderedDexItems.length === 1) {\n    return (\n      <div ref={rootRef} className={styles.root}>\n        <div className={styles.container}>\n          <span className={buildClassName(styles.content, isStatic && styles.static)}>{buttonContent}</span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderedDexItem(item: ApiSwapEstimateVariant) {\n    const rate = getSwapRate(item.fromAmount, item.toAmount, tokenIn, tokenOut);\n\n    return (\n      <div\n        key={item.dexLabel}\n        tabIndex={0}\n        role=\"button\"\n        className={buildClassName(\n          styles.dexItem,\n          renderedBestRateDexLabel === item.dexLabel && styles.bestRate,\n          selectedDexLabel === item.dexLabel && styles.current,\n        )}\n        onClick={() => { setSelectedDexLabel(item.dexLabel); }}\n      >\n        <div className={styles.dexTitle}>\n          <img\n            src={item.dexLabel === 'dedust' ? DedustPath : StonfiPath}\n            alt={SWAP_DEX_LABELS[item.dexLabel]}\n            className={styles.dexIcon}\n          />\n          {SWAP_DEX_LABELS[item.dexLabel]}\n        </div>\n        <div className={styles.dexValue}>{renderedAmounts?.[item.dexLabel]}</div>\n        <div className={styles.dexExchangeRate}>\n          {rate ? <>{rate.firstCurrencySymbol}&nbsp; {rate.price}&nbsp;{rate.secondCurrencySymbol}</> : undefined}\n        </div>\n        {item.dexLabel === renderedBestRateDexLabel && (\n          <span className={styles.bestLabel}>{lang('Best')}</span>\n        )}\n      </div>\n    );\n  }\n\n  function renderBenefitAmount() {\n    if (inputSource === SwapInputSource.Out) {\n      return (\n        <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n          {renderText(lang('You will spend %amount% **less**.', {\n            amount: <strong>{formatCurrency(benefitAmount, tokenIn!.symbol)}</strong>,\n          }))}\n        </p>\n      );\n    }\n\n    return (\n      <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n        {renderText(lang('You will receive %amount% **more**.', {\n          amount: <strong>{formatCurrency(benefitAmount, tokenOut!.symbol)}</strong>,\n        }))}\n      </p>\n    );\n  }\n\n  return (\n    <div ref={rootRef} className={styles.root}>\n      <div className={styles.container}>\n        <button\n          type=\"button\"\n          className={buildClassName(styles.button, isStatic && styles.static)}\n          onClick={toggleDexMenu}\n        >\n          {buttonContent}\n        </button>\n        <Modal\n          isOpen={isModalOpen}\n          isCompact\n          title={lang('Built-in DEX Aggregator')}\n          onClose={closeModal}\n        >\n          <div className={styles.dexList}>\n            {renderedDexItems.map((item) => renderedDexItem(item))}\n          </div>\n\n          <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n            {renderText(lang('$swap_dex_chooser_rate_title'))}\n          </p>\n          {shouldRenderBenefit && renderBenefitAmount()}\n\n          <div className={buildClassName(modalStyles.buttons, styles.dexSubmitButtons)}>\n            <Transition\n              activeKey={isBestRateSelected ? 0 : 1}\n              name=\"semiFade\"\n              slideClassName={styles.dexSubmitSlide}\n            >\n              <Button\n                isPrimary\n                className={buildClassName(modalStyles.buttonFullWidth, isBestRateSelected && styles.dexBestRateButton)}\n                onClick={handleDexConfirm}\n              >\n                {confirmLabel}\n              </Button>\n            </Transition>\n\n          </div>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    currentSwap: global.currentSwap,\n    swapVersion: global.swapVersion,\n  };\n})(SwapDexChooser));\n\nfunction calculateBenefitAmount({\n  ourFeePercent,\n  decimals,\n  bestRateDexLabel,\n  estimates,\n  inputSource,\n}: {\n  ourFeePercent: number;\n  decimals?: number;\n  estimates?: ApiSwapEstimateVariant[];\n  bestRateDexLabel?: ApiSwapDexLabel;\n  inputSource?: SwapInputSource;\n}) {\n  if (!estimates || estimates.length < 2) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const bestRateEstimate = estimates.find(({ dexLabel }) => dexLabel === bestRateDexLabel);\n  const otherEstimate = estimates.find(({ dexLabel }) => dexLabel !== bestRateDexLabel);\n\n  if (!otherEstimate || !bestRateEstimate) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const isDirectSwap = inputSource === SwapInputSource.In;\n  const amountKey = isDirectSwap ? 'toAmount' : 'fromAmount';\n  const ourFeeValue = (Number(bestRateEstimate[amountKey]) / 100) * ourFeePercent;\n  const benefit = (fromDecimal(bestRateEstimate[amountKey], decimals) - fromDecimal(otherEstimate[amountKey], decimals))\n    * (isDirectSwap ? 1n : -1n);\n  const shouldRender = (benefit - fromDecimal(ourFeeValue, decimals)) > 0n;\n\n  return {\n    shouldRender,\n    value: toDecimal(benefit, decimals),\n  };\n}\n\nfunction formatDexItemAmount(toAmount: string, tokenOut: UserSwapToken): TeactNode | undefined {\n  const parts = getNumberParts(toAmount, SHORT_FRACTION_DIGITS);\n  if (!parts) return undefined;\n\n  const [, wholePartRaw, dotPart, fractionPart] = parts;\n  const fractionStr = fractionPart || dotPart\n    ? `.${(fractionPart || '').substring(0, SHORT_FRACTION_DIGITS)}`\n    : '';\n\n  const formattedWholePart = wholePartRaw.replace(/\\d(?=(\\d{3})+($))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return (\n    <>\n      {formattedWholePart}\n      <span className={styles.dexValueFractional}>{fractionStr}&thinsp;{tokenOut.symbol}</span>\n    </>\n  );\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { DieselStatus } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { explainSwapFee } from '../../util/fee/swapFee';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport Modal from '../ui/Modal';\nimport RichNumberInput from '../ui/RichNumberInput';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  showFullNetworkFee?: boolean;\n  onClose: () => void;\n  onNetworkFeeClick?: () => void;\n}\n\ninterface StateProps {\n  amountIn?: string;\n  amountOut?: string;\n  tokenIn?: ApiSwapAsset;\n  tokenOut?: ApiSwapAsset;\n  networkFee?: string;\n  realNetworkFee?: string;\n  swapType: SwapType;\n  slippage: number;\n  priceImpact?: number;\n  amountOutMin?: string;\n  ourFee?: string;\n  ourFeePercent?: number;\n  dieselStatus?: DieselStatus;\n  dieselFee?: string;\n  nativeTokenInBalance?: bigint;\n}\n\nconst SLIPPAGE_VALUES = [0.5, 1, 2, 5, 10];\nconst MAX_SLIPPAGE_VALUE = 50;\n\nexport const MAX_PRICE_IMPACT_VALUE = 5;\n\nfunction SwapSettingsContent({\n  onClose,\n  amountIn,\n  amountOut,\n  swapType,\n  tokenIn,\n  tokenOut,\n  slippage,\n  priceImpact,\n  networkFee,\n  realNetworkFee,\n  amountOutMin,\n  ourFee,\n  ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  dieselStatus,\n  dieselFee,\n  nativeTokenInBalance,\n  showFullNetworkFee,\n  onNetworkFeeClick,\n}: Omit<OwnProps, 'isOpen'> & StateProps) {\n  const { setSlippage } = getActions();\n  const lang = useLang();\n  const canEditSlippage = swapType === SwapType.OnChain;\n\n  // In order to reset this state when the modal is closed, we rely on the fact that Modal unmounts the content when\n  // it's closed.\n  const [currentSlippage, setCurrentSlippage] = useState<number | undefined>(slippage);\n\n  const priceImpactError = (priceImpact ?? 0) >= MAX_PRICE_IMPACT_VALUE;\n  const slippageError = currentSlippage === undefined\n    ? 'Slippage not specified'\n    : currentSlippage > MAX_SLIPPAGE_VALUE\n      ? 'Slippage too high'\n      : '';\n\n  const handleSave = useLastCallback(() => {\n    setSlippage({ slippage: currentSlippage! });\n    onClose();\n  });\n\n  const handleInputChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? Number(stringValue) : undefined;\n    setCurrentSlippage(value);\n  });\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug: tokenIn?.slug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenIn, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  function renderSlippageValues() {\n    const slippageList = SLIPPAGE_VALUES.map((value, index) => {\n      return (\n        <div key={value} className={styles.advancedSlippageButton}>\n          <div\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => setCurrentSlippage(value)}\n            className={styles.balanceLink}\n          >{value}%\n          </div>\n          {index + 1 !== SLIPPAGE_VALUES.length && <i className={styles.dot} aria-hidden />}\n        </div>\n      );\n    });\n\n    return (\n      <div className={styles.advancedSlippageContainer}>\n        <span className={styles.advancedSlippage}>{slippageList}</span>\n      </div>\n    );\n  }\n\n  function renderSlippageError() {\n    return (\n      <div className={styles.advancedSlippageError}>\n        <span>{lang(slippageError)}</span>\n      </div>\n    );\n  }\n\n  function renderRate() {\n    const rate = getSwapRate(\n      amountIn,\n      amountOut,\n      tokenIn,\n      tokenOut,\n      true,\n    );\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Exchange Rate')}\n        </span>\n        <span className={styles.advancedValue}>\n          {rate\n            ? `${rate.firstCurrencySymbol}  ${rate.price} ${rate.secondCurrencySymbol}`\n            : <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderNetworkFee() {\n    const actualFee = showFullNetworkFee ? explainedFee.fullFee : explainedFee.realFee;\n    let feeElement = actualFee && tokenIn && (\n      <Fee\n        terms={actualFee.networkTerms}\n        precision={actualFee.precision}\n        token={tokenIn}\n      />\n    );\n\n    if (feeElement && onNetworkFeeClick) {\n      feeElement = (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.advancedLink}\n          onClick={() => onNetworkFeeClick()}\n        >\n          <span>{feeElement}</span>\n          <i className={buildClassName('icon-chevron-right', styles.advancedLinkIcon)} aria-hidden />\n        </span>\n      );\n    }\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Blockchain Fee')}\n        </span>\n        <span className={styles.advancedValue}>\n          {feeElement || <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderSlippageLabel() {\n    return (\n      <>\n        {lang('Slippage')}\n        <Tooltip isError={Boolean(slippageError)}>\n          <span>{lang('$swap_slippage_tooltip1')}</span>\n          <span>{lang('$swap_slippage_tooltip2')}</span>\n        </Tooltip>\n      </>\n    );\n  }\n\n  return (\n    <>\n      {canEditSlippage && (\n        <div className={styles.advancedInput}>\n          {renderSlippageValues()}\n          <RichNumberInput\n            labelText={renderSlippageLabel()}\n            labelClassName={styles.slippageLabel}\n            value={currentSlippage?.toString()}\n            hasError={Boolean(slippageError)}\n            decimals={2}\n            suffix=\"%\"\n            size=\"normal\"\n            onChange={handleInputChange}\n          />\n          {renderSlippageError()}\n        </div>\n      )}\n      <div className={styles.advancedBlock}>\n        {renderRate()}\n        {renderNetworkFee()}\n\n        {explainedFee.shouldShowOurFee && (\n          <div className={styles.advancedRow}>\n            <span className={styles.advancedDescription}>\n              {lang('Aggregator Fee')}\n              <Tooltip>\n                <span>{renderText(lang('$swap_aggregator_fee_tooltip', { percent: `${ourFeePercent}%` }))}</span>\n              </Tooltip>\n            </span>\n            <span className={styles.advancedValue}>\n              {ourFee !== undefined\n                ? formatCurrency(ourFee, tokenIn?.symbol ?? '', undefined, true)\n                : <ValuePlaceholder />}\n            </span>\n          </div>\n        )}\n        {swapType === SwapType.OnChain && (\n          <>\n            <div className={styles.advancedRow}>\n              <span className={buildClassName(styles.advancedDescription, priceImpactError && styles.advancedError)}>\n                {lang('Price Impact')}\n                <Tooltip isError={Boolean(priceImpactError)}>\n                  <span>{lang('$swap_price_impact_tooltip1')}</span>\n                  <span>{lang('$swap_price_impact_tooltip2')}</span>\n                </Tooltip>\n              </span>\n              <span className={buildClassName(styles.advancedValue, priceImpactError && styles.advancedError)}>\n                {priceImpact !== undefined ? `${priceImpact}%` : <ValuePlaceholder />}\n              </span>\n            </div>\n            <div className={styles.advancedRow}>\n              <span className={styles.advancedDescription}>\n                {lang('Minimum Received')}\n                <Tooltip>\n                  <span>{lang('$swap_minimum_received_tooltip1')}</span>\n                  <span>{lang('$swap_minimum_received_tooltip2')}</span>\n                </Tooltip>\n              </span>\n              <span className={styles.advancedValue}>\n                {amountOutMin !== undefined && tokenOut\n                  ? formatCurrency(amountOutMin, tokenOut.symbol)\n                  : <ValuePlaceholder />}\n              </span>\n            </div>\n          </>\n        )}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button\n          className={modalStyles.button}\n          onClick={onClose}\n        >\n          {lang('Close')}\n        </Button>\n        {canEditSlippage && (\n          <Button\n            isPrimary\n            isDisabled={Boolean(slippageError)}\n            className={modalStyles.button}\n            onClick={handleSave}\n          >\n            {lang('Save')}\n          </Button>\n        )}\n      </div>\n    </>\n  );\n}\n\nconst SwapSettings = memo(\n  withGlobal<Omit<OwnProps, 'isOpen'>>((global): StateProps => {\n    const {\n      tokenInSlug,\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n    } = global.currentSwap;\n\n    const nativeToken = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n    const nativeTokenInBalance = nativeToken ? selectCurrentAccountTokenBalance(global, nativeToken.slug) : undefined;\n\n    return {\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      swapType: selectSwapType(global),\n      tokenIn: selectCurrentSwapTokenIn(global),\n      tokenOut: selectCurrentSwapTokenOut(global),\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    };\n  })(SwapSettingsContent),\n);\n\nexport default function SwapSettingsModal({ isOpen, onClose, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} isCompact title={lang('Swap Details')}>\n      <SwapSettings onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nfunction ValuePlaceholder() {\n  const lang = useLang();\n  return <span className={styles.advancedPlaceholder}>{lang('No Data')}</span>;\n}\n\nfunction Tooltip({ children, isError }: { children: TeactNode; isError?: boolean }) {\n  return (\n    <>\n      {' '}\n      <IconWithTooltip\n        message={children}\n        size=\"small\"\n        iconClassName={buildClassName(styles.advancedTooltip, isError && styles.advancedError)}\n        tooltipClassName={styles.advancedTooltipContainer}\n      />\n    </>\n  );\n}\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { ApiChain, ApiToken } from '../../api/types';\nimport type {\n  Account, ActionPayloads, AssetPairs, GlobalState, UserSwapToken,\n} from '../../global/types';\nimport type { LangFn } from '../../hooks/useLang';\nimport type { ExplainedSwapFee } from '../../util/fee/swapFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport { SwapInputSource, SwapState, SwapType } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_SIZE_PX,\n  ANIMATION_LEVEL_MAX,\n  CHANGELLY_AML_KYC,\n  CHANGELLY_PRIVACY_POLICY,\n  CHANGELLY_TERMS_OF_USE,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { explainSwapFee, getMaxSwapAmount, isBalanceSufficientForSwap } from '../../util/fee/swapFee';\nimport { vibrate } from '../../util/haptics';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport SelectTokenButton from '../common/SelectTokenButton';\nimport AmountInputMaxButton from '../ui/AmountInputMaxButton';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport FeeLine from '../ui/FeeLine';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport SwapSubmitButton from './components/SwapSubmitButton';\nimport SwapDexChooser from './SwapDexChooser';\nimport SwapSettingsModal, { MAX_PRICE_IMPACT_VALUE } from './SwapSettingsModal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  currentSwap: GlobalState['currentSwap'];\n  tokens?: UserSwapToken[];\n  isMultichainAccount?: boolean;\n  swapType: SwapType;\n  isSensitiveDataHidden?: true;\n  pairsBySlug?: Record<string, AssetPairs>;\n}\n\nconst ESTIMATE_REQUEST_INTERVAL = 1_000;\nconst SET_AMOUNT_DEBOUNCE_TIME = 500;\n\nfunction SwapInitial({\n  currentSwap: {\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn,\n    amountOut,\n    errorType,\n    isEstimating,\n    networkFee,\n    realNetworkFee,\n    priceImpact = 0,\n    inputSource,\n    limits,\n    isLoading,\n    dieselStatus,\n    ourFee,\n    ourFeePercent,\n    dieselFee,\n  },\n  addressByChain,\n  tokens,\n  isActive,\n  isStatic,\n  isMultichainAccount,\n  swapType,\n  isSensitiveDataHidden,\n  pairsBySlug,\n}: OwnProps & StateProps) {\n  const {\n    setDefaultSwapParams,\n    setSwapAmountIn,\n    setSwapAmountOut,\n    switchSwapTokens,\n    estimateSwap,\n    setSwapScreen,\n    setSwapCexAddress,\n    authorizeDiesel,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n\n  const inputInRef = useRef<HTMLDivElement>();\n  const inputOutRef = useRef<HTMLDivElement>();\n\n  const currentTokenInSlug = tokenInSlug ?? TONCOIN.slug;\n  const currentTokenOutSlug = tokenOutSlug ?? DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n  const tokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenInSlug),\n    [currentTokenInSlug, tokens],\n  );\n  const tokenOut = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenOutSlug),\n    [currentTokenOutSlug, tokens],\n  );\n\n  const nativeTokenInSlug = isMultichainAccount || tokenIn?.chain === 'ton'\n    ? findChainConfig(tokenIn?.chain)?.nativeToken.slug\n    : undefined;\n  const nativeUserTokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === nativeTokenInSlug),\n    [nativeTokenInSlug, tokens],\n  );\n  const nativeTokenInBalance = nativeUserTokenIn?.amount ?? 0n;\n\n  const amountInBigint = amountIn && tokenIn ? fromDecimal(amountIn, tokenIn.decimals) : undefined;\n  const amountOutBigint = amountOut && tokenOut ? fromDecimal(amountOut, tokenOut.decimals) : undefined;\n  const balanceIn = tokenIn?.amount ?? 0n;\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenInSlug, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  const maxAmount = getMaxSwapAmount({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n  });\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForSwap({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n    amountIn,\n    nativeTokenInBalance,\n  });\n\n  const networkFeeBigint = networkFee !== undefined && nativeUserTokenIn\n    ? fromDecimal(networkFee, nativeUserTokenIn.decimals)\n    : 0n;\n  const isEnoughNative = nativeTokenInBalance >= networkFeeBigint;\n\n  const isDieselNotAuthorized = explainedFee.isGasless && dieselStatus === 'not-authorized';\n\n  const canSubmit = isDieselNotAuthorized || (\n    (amountInBigint ?? 0n) > 0n\n    && (amountOutBigint ?? 0n) > 0n\n    && isEnoughBalance\n    && (!explainedFee.isGasless || dieselStatus === 'available' || dieselStatus === 'stars-fee')\n    && !isEstimating\n    && errorType === undefined\n  );\n\n  const hasAmountInError = amountInBigint !== undefined && maxAmount !== undefined && amountInBigint > maxAmount;\n  const amountOutValue = (amountInBigint ?? 0n) <= 0n && inputSource === SwapInputSource.In\n    ? ''\n    : amountOut?.toString();\n  const isAmountGreaterThanBalance = balanceIn !== undefined && amountInBigint !== undefined\n    && amountInBigint > balanceIn;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && dieselStatus !== 'not-authorized' && dieselStatus !== 'pending-previous';\n\n  const isPriceImpactError = priceImpact >= MAX_PRICE_IMPACT_VALUE;\n  const isCrosschain = swapType === SwapType.CrosschainFromWallet || swapType === SwapType.CrosschainToWallet;\n\n  const [isBuyAmountInputDisabled, handleBuyAmountInputClick] = useReverseProhibited(\n    isCrosschain,\n    pairsBySlug,\n    currentTokenInSlug,\n    currentTokenOutSlug,\n    showNotification,\n    lang,\n  );\n\n  const handleEstimateSwap = useLastCallback(() => {\n    if ((!isActive || isBackgroundModeActive()) && !isEstimating) return;\n\n    estimateSwap();\n  });\n\n  const debounceSetAmountIn = useDebouncedCallback(\n    setSwapAmountIn, [setSwapAmountIn], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n  const debounceSetAmountOut = useDebouncedCallback(\n    setSwapAmountOut, [setSwapAmountOut], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n\n  const [currentSubModal, openSettingsModal, openFeeModal, closeSubModal] = useSubModals(explainedFee);\n\n  useEffect(() => {\n    if (!tokenInSlug && !tokenOutSlug) {\n      setDefaultSwapParams();\n    }\n  }, [tokenInSlug, tokenOutSlug]);\n\n  useEffect(() => {\n    if (isEstimating) {\n      handleEstimateSwap();\n    }\n\n    const intervalId = setInterval(handleEstimateSwap, ESTIMATE_REQUEST_INTERVAL);\n    return () => clearInterval(intervalId);\n  }, [isEstimating]);\n\n  const handleAmountInChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountIn({ amount: amount || undefined });\n    },\n  );\n\n  const handleSelectTokenInModalOpen = useLastCallback(() => {\n    setSwapScreen({ state: SwapState.SelectTokenFrom });\n  });\n\n  const handleSelectTokenOutModalOpen = useLastCallback(() => {\n    setSwapScreen({ state: SwapState.SelectTokenTo });\n  });\n\n  const handleAmountOutChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountOut({ amount: amount || undefined });\n    },\n  );\n\n  const handleMaxAmountClick = useLastCallback(() => {\n    if (maxAmount === undefined) {\n      return;\n    }\n\n    void vibrate();\n\n    const amount = toDecimal(maxAmount, tokenIn!.decimals);\n    setSwapAmountIn({ amount, isMaxAmount: true });\n  });\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    void vibrate();\n\n    if (isCrosschain) {\n      setSwapCexAddress({ toAddress: '' });\n      if (swapType === SwapType.CrosschainToWallet) {\n        setSwapScreen({ state: SwapState.Password });\n      } else if (\n        isMultichainAccount\n        && addressByChain![tokenIn!.chain as ApiChain]\n        && addressByChain![tokenOut!.chain as ApiChain]\n      ) {\n        setSwapCexAddress({ toAddress: addressByChain![tokenOut!.chain as ApiChain]! });\n        setSwapScreen({ state: SwapState.Password });\n      } else {\n        setSwapScreen({ state: SwapState.Blockchain });\n      }\n      return;\n    }\n\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleSwitchTokens = useLastCallback(() => {\n    void vibrate();\n    switchSwapTokens();\n  });\n\n  function renderBalance() {\n    return (\n      <AmountInputMaxButton\n        maxAmount={maxAmount}\n        token={tokenIn}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onAmountClick={handleMaxAmountClick}\n      />\n    );\n  }\n\n  function renderFee() {\n    const shouldShow = (amountIn && amountOut) // We aim to synchronize the disappearing of the fee with the DEX chooser disappearing\n      || ((amountIn || amountOut) && errorType); // Without this sub-condition the fee wouldn't be shown when the amount is outside the Changelly limits\n\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (shouldShow) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : undefined;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={tokenIn}\n        precision={precision}\n        keepDetailsButtonWithoutFee\n        onDetailsClick={openSettingsModal}\n        className={styles.feeLine}\n      />\n    );\n  }\n\n  function renderPriceImpactWarning() {\n    if (!priceImpact || !isPriceImpactError || isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.priceImpact, isStatic && styles.priceImpactStatic)}\n        onClick={openSettingsModal}\n      >\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.run}\n          previewUrl={ANIMATED_STICKERS_PATHS.runPreview}\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.priceImpactSticker}\n        />\n        <div className={styles.priceImpactContent}>\n          <span className={styles.priceImpactTitle}>\n            {lang('The exchange rate is below market value!', { value: `${priceImpact}%` })}\n            <i className={buildClassName(styles.priceImpactArrow, 'icon-chevron-right')} aria-hidden />\n          </span>\n          <span className={styles.priceImpactDescription}>\n            {lang('We do not recommend to perform an exchange, try to specify a lower amount.')}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (!isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div className={buildClassName(styles.changellyInfo, isStatic && styles.changellyInfoStatic)}>\n        <span className={styles.changellyInfoTitle}>\n          <i className={buildClassName('icon-changelly', styles.changellyIcon)} aria-hidden />\n          {lang('Cross-chain exchange provided by Changelly')}\n        </span>\n        <span className={styles.changellyInfoDescription}>\n          {\n            lang('$swap_changelly_agreement_message', {\n              terms: (\n                <a href={CHANGELLY_TERMS_OF_USE} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_terms_of_use')}\n                </a>\n              ),\n              policy: (\n                <a href={CHANGELLY_PRIVACY_POLICY} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_privacy_policy')}\n                </a>\n              ),\n              kyc: <a href={CHANGELLY_AML_KYC} target=\"_blank\" rel=\"noreferrer\">Changelly AML/KYC</a>,\n            })\n          }\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form className={isStatic ? undefined : modalStyles.transitionContent} onSubmit={handleSubmit}>\n        <div className={styles.content}>\n          <div ref={inputInRef} className={styles.inputContainer}>\n            {renderBalance()}\n            <RichNumberInput\n              id=\"swap-sell\"\n              labelText={lang('You sell')}\n              className={styles.amountInput}\n              hasError={hasAmountInError}\n              value={amountIn?.toString()}\n              isLoading={isEstimating && inputSource === SwapInputSource.Out}\n              onChange={handleAmountInChange}\n              onPressEnter={handleSubmit}\n              decimals={tokenIn?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerTop, isStatic && styles.swapCornerStaticTop)}\n              isStatic={isStatic}\n            >\n              <SelectTokenButton token={tokenIn as ApiToken} onClick={handleSelectTokenInModalOpen} />\n            </RichNumberInput>\n          </div>\n\n          <div className={buildClassName(styles.swapButtonWrapper, isStatic && styles.swapButtonWrapperStatic)}>\n            <AnimatedArrows onClick={handleSwitchTokens} />\n          </div>\n\n          <div ref={inputOutRef} className={styles.inputContainer}>\n            <RichNumberInput\n              id=\"swap-buy\"\n              labelText={lang('You buy')}\n              className={styles.amountInputBuy}\n              value={amountOutValue}\n              isLoading={isEstimating && inputSource === SwapInputSource.In}\n              disabled={isBuyAmountInputDisabled}\n              onChange={handleAmountOutChange}\n              onPressEnter={handleSubmit}\n              onInputClick={handleBuyAmountInputClick}\n              decimals={tokenOut?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerBottom, isStatic && styles.swapCornerStaticBottom)}\n              isStatic={isStatic}\n            >\n              <SelectTokenButton token={tokenOut as ApiToken} onClick={handleSelectTokenOutModalOpen} />\n            </RichNumberInput>\n          </div>\n        </div>\n        <SwapDexChooser tokenIn={tokenIn} tokenOut={tokenOut} isStatic={isStatic} />\n\n        <div className={buildClassName(styles.footerBlock, isStatic && styles.footerBlockStatic)}>\n          {renderFee()}\n          {renderPriceImpactWarning()}\n          {renderChangellyInfo()}\n\n          <SwapSubmitButton\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            amountIn={amountIn}\n            amountOut={amountOut}\n            swapType={swapType}\n            isEstimating={isEstimating}\n            isNotEnoughNative={!isEnoughNative}\n            nativeToken={nativeUserTokenIn}\n            dieselStatus={dieselStatus}\n            isSending={isLoading}\n            isPriceImpactError={isPriceImpactError}\n            canSubmit={canSubmit}\n            errorType={errorType}\n            limits={limits}\n          />\n        </div>\n      </form>\n      <SwapSettingsModal\n        isOpen={currentSubModal === 'settings'}\n        onClose={closeSubModal}\n        onNetworkFeeClick={openFeeModal}\n        showFullNetworkFee={hasInsufficientFeeError}\n      />\n      <FeeDetailsModal\n        isOpen={currentSubModal === 'feeDetails'}\n        onClose={closeSubModal}\n        fullFee={explainedFee.fullFee?.networkTerms}\n        realFee={explainedFee.realFee?.networkTerms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={tokenIn}\n      />\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const account = selectCurrentAccount(global);\n\n      return {\n        currentSwap: global.currentSwap,\n        tokens: selectSwapTokens(global),\n        addressByChain: account?.addressByChain,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        swapType: selectSwapType(global),\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        pairsBySlug: global.swapPairs?.bySlug,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(SwapInitial),\n);\n\nfunction useReverseProhibited(\n  isCrosschain: boolean,\n  pairsBySlug: Record<string, AssetPairs> | undefined,\n  currentTokenInSlug: string,\n  currentTokenOutSlug: string,\n  showNotification: (arg: ActionPayloads['showNotification']) => void,\n  lang: LangFn,\n) {\n  const isReverseProhibited = isCrosschain\n    || pairsBySlug?.[currentTokenInSlug]?.[currentTokenOutSlug]?.isReverseProhibited;\n  const isBuyAmountInputDisabled = isReverseProhibited;\n\n  const handleBuyAmountInputClick = useMemo(() => {\n    return isReverseProhibited\n      ? () => {\n        void vibrate();\n        showNotification({ message: lang('$swap_reverse_prohibited') });\n      }\n      : undefined;\n  }, [isReverseProhibited, lang, showNotification]);\n\n  return [isBuyAmountInputDisabled, handleBuyAmountInputClick] as const;\n}\n\nfunction AnimatedArrows({ onClick }: { onClick?: NoneToVoidFunction }) {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const shouldAnimate = (animationLevel === ANIMATION_LEVEL_MAX);\n  const [hasAnimation, startAnimation, stopAnimation] = useFlag(false);\n\n  const handleClick = useLastCallback(() => {\n    if (shouldAnimate) {\n      startAnimation();\n      window.setTimeout(() => {\n        stopAnimation();\n      }, 350);\n    }\n\n    onClick?.();\n  });\n\n  function renderArrow(isInverted?: boolean) {\n    return (\n      <div className={buildClassName(styles.arrowContainer, isInverted && styles.arrowContainerInverted)}>\n        <div className={styles.arrow}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowOld, hasAnimation && styles.animateDisappear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowNew, hasAnimation && styles.animateAppear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.swapButton} onClick={handleClick}>\n      {renderArrow()}\n      {renderArrow(true)}\n    </div>\n  );\n}\n\nfunction useSubModals(explainedFee: ExplainedSwapFee) {\n  const isFeeModalAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [currentModal, setCurrentModal] = useState<'settings' | 'feeDetails'>();\n\n  const openSettings = useLastCallback(() => setCurrentModal('settings'));\n  const openFeeDetailsIfAvailable = useMemo(\n    () => (isFeeModalAvailable ? () => setCurrentModal('feeDetails') : undefined),\n    [isFeeModalAvailable],\n  );\n  const close = useLastCallback(() => setCurrentModal(undefined));\n\n  return [currentModal, openSettings, openFeeDetailsIfAvailable, close] as const;\n}\n","export function trimStringByMaxBytes(str: string, maxBytes: number): string {\n  const decoder = new TextDecoder('utf-8');\n  const encoded = new TextEncoder().encode(str);\n  const sliced = encoded.slice(0, maxBytes);\n\n  return decoder.decode(sliced).replace(/\\uFFFD/g, '');\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\n\nimport renderText from '../../global/helpers/renderText';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Dropdown from '../ui/Dropdown';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\n\nimport styles from './Transfer.module.scss';\n\nconst COMMENT_DROPDOWN_ITEMS = [\n  { value: 'raw', name: 'Comment or Memo' },\n  { value: 'encrypted', name: 'Encrypted Message' },\n];\n\ninterface OwnProps {\n  comment: string;\n  shouldEncrypt?: boolean;\n  binPayload?: string;\n  stateInit?: string;\n  chain?: ApiChain;\n  isStatic?: boolean;\n  isCommentRequired?: boolean;\n  isEncryptedCommentSupported: boolean;\n  onCommentChange: (value: string) => void;\n}\n\nfunction CommentSection({\n  comment,\n  shouldEncrypt,\n  binPayload,\n  stateInit,\n  chain,\n  isStatic,\n  isCommentRequired,\n  isEncryptedCommentSupported,\n  onCommentChange,\n}: OwnProps) {\n  const { setTransferShouldEncrypt } = getActions();\n\n  const lang = useLang();\n\n  const handleCommentOptionsChange = useLastCallback((option: string) => {\n    setTransferShouldEncrypt({ shouldEncrypt: option === 'encrypted' });\n  });\n\n  const dropdownItems = useMemo(\n    () => isEncryptedCommentSupported ? COMMENT_DROPDOWN_ITEMS : COMMENT_DROPDOWN_ITEMS.slice(0, 1),\n    [isEncryptedCommentSupported],\n  );\n\n  function renderCommentLabel() {\n    return (\n      <Dropdown\n        items={dropdownItems}\n        selectedValue={COMMENT_DROPDOWN_ITEMS[shouldEncrypt ? 1 : 0].value}\n        theme=\"inherit\"\n        disabled={chain === 'tron'}\n        menuPositionX=\"left\"\n        shouldTranslateOptions\n        onChange={handleCommentOptionsChange}\n      />\n    );\n  }\n\n  if (binPayload || stateInit) {\n    return (\n      <>\n        {binPayload && (\n          <>\n            <div className={styles.label}>{lang('Signing Data')}</div>\n            <InteractiveTextField\n              text={binPayload}\n              copyNotification={lang('Data was copied!')}\n              className={styles.addressWidget}\n            />\n          </>\n        )}\n\n        {stateInit && (\n          <>\n            <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n            <InteractiveTextField\n              text={stateInit}\n              copyNotification={lang('Data was copied!')}\n              className={styles.addressWidget}\n            />\n          </>\n        )}\n\n        <div className={styles.error}>\n          {renderText(lang('$signature_warning'))}\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <Input\n      wrapperClassName={styles.commentInputWrapper}\n      className={isStatic ? styles.inputStatic : undefined}\n      label={renderCommentLabel()}\n      placeholder={isCommentRequired ? lang('Required') : lang('Optional')}\n      value={comment}\n      isMultiline\n      isDisabled={chain === 'tron'}\n      onInput={onCommentChange}\n      isRequired={isCommentRequired}\n    />\n  );\n}\n\nexport default memo(CommentSection);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { ApiBaseCurrency, ApiNft } from '../../api/types';\nimport type { Account, SavedAddress, UserToken } from '../../global/types';\nimport type { LangFn } from '../../hooks/useLang';\nimport type { ExplainedTransferFee } from '../../util/fee/transferFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport { ScamWarningType, TransferState } from '../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, TONCOIN } from '../../config';\nimport { getHelpCenterUrl } from '../../global/helpers/getHelpCenterUrl';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokenBalance,\n  selectCurrentAccountTokens,\n  selectIsAllowSuspiciousActions,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectIsMultisigAccount,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { stopEvent } from '../../util/domEvents';\nimport {\n  explainApiTransferFee,\n  getMaxTransferAmount,\n  isBalanceSufficientForTransfer,\n} from '../../util/fee/transferFee';\nimport { vibrate } from '../../util/haptics';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { debounce } from '../../util/schedulers';\nimport { trimStringByMaxBytes } from '../../util/text';\nimport { getChainBySlug, getIsServiceToken, getNativeToken } from '../../util/tokens';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\nimport { useAmountInputState } from '../ui/hooks/useAmountInputState';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport AddressInput from '../ui/AddressInput';\nimport AmountInputSection from '../ui/AmountInput';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport CommentSection from './CommentSection';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  slideClassName?: string;\n}\n\ninterface StateProps {\n  toAddress?: string;\n  resolvedAddress?: string;\n  toAddressName?: string;\n  amount?: bigint;\n  comment?: string;\n  shouldEncrypt?: boolean;\n  isActive: boolean;\n  isLoading?: boolean;\n  fee?: bigint;\n  realFee?: bigint;\n  tokenSlug: string;\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  nativeTokenBalance: bigint;\n  isEncryptedCommentSupported: boolean;\n  isMemoRequired?: boolean;\n  baseCurrency: ApiBaseCurrency;\n  nfts?: ApiNft[];\n  binPayload?: string;\n  stateInit?: string;\n  diesel?: ApiFetchEstimateDieselResult;\n  isDieselAuthorizationStarted?: boolean;\n  isMultichainAccount: boolean;\n  isMultisig: boolean;\n  isSensitiveDataHidden?: true;\n  scamWarningType?: ScamWarningType;\n  isAllowSuspiciousActions: boolean;\n}\n\nconst COMMENT_MAX_SIZE_BYTES = 5000;\nconst ACTIVE_STATES = new Set([TransferState.Initial, TransferState.None]);\nconst AUTHORIZE_DIESEL_INTERVAL_MS = SECOND;\n\nconst runDebounce = debounce((cb) => cb(), 500, false);\n\nfunction TransferInitial({\n  isStatic,\n  slideClassName,\n  tokenSlug,\n  toAddress = '',\n  resolvedAddress,\n  toAddressName = '',\n  amount,\n  comment = '',\n  shouldEncrypt,\n  tokens,\n  fee,\n  realFee,\n  savedAddresses,\n  accounts,\n  nativeTokenBalance,\n  currentAccountId,\n  isEncryptedCommentSupported,\n  isMemoRequired,\n  isActive,\n  isLoading,\n  baseCurrency,\n  nfts,\n  binPayload,\n  stateInit,\n  diesel,\n  isDieselAuthorizationStarted,\n  isMultichainAccount,\n  isMultisig,\n  isSensitiveDataHidden,\n  scamWarningType,\n  isAllowSuspiciousActions,\n}: OwnProps & StateProps) {\n  const {\n    submitTransferInitial,\n    fetchTransferFee,\n    fetchNftFee,\n    changeTransferToken,\n    setTransferAmount,\n    setTransferToAddress,\n    setTransferComment,\n    setTransferShouldEncrypt,\n    cancelTransfer,\n    showDialog,\n    authorizeDiesel,\n    fetchTransferDieselState,\n    checkTransferAddress,\n    dismissTransferScamWarning,\n  } = getActions();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    // Token and amount can't be selected in the NFT transfer form, so they are overwritten once for convenience\n    tokenSlug = TONCOIN.slug;\n    amount = undefined;\n  }\n\n  const lang = useLang();\n\n  const transferToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const { amount: balance, symbol, chain } = transferToken || {};\n\n  const renderedScamWarningType = useCurrentOrPrev(scamWarningType, true);\n  const isDisabledDebounce = useRef<boolean>(false);\n  const isToncoin = tokenSlug === TONCOIN.slug;\n  const isAddressValid = chain ? isValidAddressOrDomain(toAddress, chain) : undefined;\n  const doesSupportComment = chain === 'ton';\n  const transitionKey = useTransitionActiveKey(nfts?.length ? nfts : [tokenSlug]);\n\n  const handleAddressInput = useLastCallback((newToAddress?: string, isValueReplaced?: boolean) => {\n    // If value is replaced, callbacks must be executed immediately, without debounce\n    if (isValueReplaced) {\n      isDisabledDebounce.current = true;\n    }\n\n    setTransferToAddress({ toAddress: newToAddress });\n  });\n\n  const shouldDisableClearButton = !toAddress && !(comment || binPayload) && !shouldEncrypt\n    && !(isNftTransfer ? isStatic : amount !== undefined);\n\n  const explainedFee = useMemo(\n    () => explainApiTransferFee({\n      fee, realFee, diesel, tokenSlug,\n    }),\n    [fee, realFee, diesel, tokenSlug],\n  );\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForTransfer({\n    tokenBalance: balance,\n    nativeTokenBalance,\n    transferAmount: isNftTransfer ? 0n : amount,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isAmountMissing = !isNftTransfer && !amount;\n\n  const maxAmount = getMaxTransferAmount({\n    tokenBalance: balance,\n    tokenSlug,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isDieselNotAuthorized = diesel?.status === 'not-authorized';\n  const authorizeDieselInterval = isDieselNotAuthorized && isDieselAuthorizationStarted\n    ? AUTHORIZE_DIESEL_INTERVAL_MS\n    : undefined;\n\n  const updateDieselState = useLastCallback(() => {\n    fetchTransferDieselState({ tokenSlug });\n  });\n\n  useInterval(updateDieselState, authorizeDieselInterval);\n\n  useEffect(() => {\n    if (\n      isToncoin\n      && balance && amount && fee\n      && amount < balance\n      && fee < balance\n      && amount + fee >= balance\n    ) {\n      setTransferAmount({ amount: balance - fee });\n    }\n  }, [isToncoin, amount, balance, fee]);\n\n  // Note: this effect doesn't watch amount changes mainly because it's tricky to program a fee recalculation avoidance\n  // when the amount changes due to a fee change. And it's not needed because the fee doesn't depend on the amount.\n  useEffect(() => {\n    if (isAmountMissing || !isAddressValid) {\n      return;\n    }\n\n    const runFunction = () => {\n      if (isNftTransfer) {\n        fetchNftFee({\n          toAddress,\n          comment,\n          nfts: nfts ?? [],\n        });\n      } else {\n        fetchTransferFee({\n          tokenSlug,\n          toAddress,\n          comment,\n          shouldEncrypt,\n          binPayload,\n          stateInit,\n        });\n      }\n    };\n\n    if (!isDisabledDebounce.current) {\n      runDebounce(runFunction);\n    } else {\n      isDisabledDebounce.current = false;\n      runFunction();\n    }\n  }, [\n    isAmountMissing, binPayload, comment, shouldEncrypt, isAddressValid, isNftTransfer, nfts, stateInit, toAddress,\n    tokenSlug,\n  ]);\n\n  useEffect(() => {\n    if (getIsServiceToken(transferToken)) {\n      showDialog({\n        title: lang('Warning!'),\n        message: lang('$service_token_transfer_warning'),\n        noBackdropClose: true,\n      });\n    }\n  }, [lang, transferToken]);\n\n  const handleTokenChange = useLastCallback((slug: string) => {\n    changeTransferToken({ tokenSlug: slug });\n  });\n\n  function clearForm() {\n    handleAddressInput('');\n    checkTransferAddress({ address: '' });\n    setTransferAmount({ amount: undefined });\n    setTransferComment({ comment: undefined });\n    setTransferShouldEncrypt({ shouldEncrypt: false });\n  }\n\n  const handleClear = useLastCallback(() => {\n    if (isStatic) {\n      cancelTransfer({ shouldReset: true });\n    } else {\n      clearForm();\n    }\n  });\n\n  const handleScamWarningModalClose = useLastCallback(() => {\n    dismissTransferScamWarning();\n\n    if (isStatic) {\n      clearForm();\n    } else {\n      cancelTransfer({ shouldReset: true });\n    }\n  });\n\n  const handleAmountChange = (amount?: bigint, isValueReplaced?: boolean) => {\n    // The amount input may change the amount when it's in the base currency mode and the token price changes.\n    // Meanwhile, the amount in the global state must not change after the transfer form is submitted.\n    if (!isActive) {\n      return;\n    }\n\n    if (amount !== undefined && amount < 0) {\n      return;\n    }\n\n    // If the value is replaced, callbacks must be executed immediately, without debounce\n    if (isValueReplaced) {\n      isDisabledDebounce.current = true;\n    }\n\n    setTransferAmount({ amount });\n  };\n\n  const handlePaste = useLastCallback(() => {\n    isDisabledDebounce.current = true;\n  });\n\n  const handleCommentChange = useLastCallback((value) => {\n    setTransferComment({ comment: trimStringByMaxBytes(value, COMMENT_MAX_SIZE_BYTES) });\n  });\n\n  const isAmountGreaterThanBalance = !isNftTransfer && balance !== undefined && amount !== undefined\n    && amount > balance;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && diesel?.status !== 'not-authorized' && diesel?.status !== 'pending-previous';\n  const hasAmountError = !isNftTransfer && amount !== undefined && (\n    (maxAmount !== undefined && amount > maxAmount)\n    || hasInsufficientFeeError // Ideally, the insufficient fee error message should be displayed somewhere else\n  );\n  const isCommentRequired = Boolean(toAddress) && isMemoRequired;\n  const hasCommentError = isCommentRequired && !comment;\n\n  const canSubmit = isDieselNotAuthorized || Boolean(\n    isAddressValid\n    && !isAmountMissing && !hasAmountError\n    && isEnoughBalance\n    && !hasCommentError\n    && !isMultisig\n    && (!explainedFee.isGasless || diesel?.status === 'available' || diesel?.status === 'stars-fee')\n    && !(isNftTransfer && !nfts?.length),\n  );\n\n  const handleSubmit = useLastCallback((e?: React.FormEvent | React.UIEvent) => {\n    if (e) stopEvent(e);\n\n    if (scamWarningType) return;\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitTransferInitial({\n      tokenSlug,\n      amount: amount ?? 0n,\n      toAddress,\n      comment,\n      binPayload,\n      shouldEncrypt,\n      nfts,\n      withDiesel: explainedFee.isGasless,\n      isGaslessWithStars: diesel?.status === 'stars-fee',\n      stateInit,\n    });\n  });\n\n  const [isFeeModalOpen, openFeeModal, closeFeeModal] = useFeeModal(explainedFee);\n\n  const tokensToSelect = useMemo(\n    () => (tokens ?? []).filter((token) => isSelectableToken(token, tokenSlug)),\n    [tokens, tokenSlug],\n  );\n\n  const amountInputProps = useAmountInputState({\n    amount,\n    token: transferToken,\n    baseCurrency,\n    onAmountChange: handleAmountChange,\n    onTokenChange: handleTokenChange,\n  });\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const renderBottomRight = useCallback((className?: string) => {\n    let transitionKey = 0;\n    let content: TeactNode = ' ';\n\n    if (isMultisig) {\n      transitionKey = 1;\n      content = <span className={styles.balanceError}>{lang('Multisig sending disabled')}</span>;\n    } else if (amount) {\n      if (isAmountGreaterThanBalance) {\n        transitionKey = 2;\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (hasInsufficientFeeError) {\n        transitionKey = 3;\n        content = <span className={styles.balanceError}>{lang('Insufficient fee')}</span>;\n      }\n    }\n\n    return (\n      <Transition\n        className={className}\n        name=\"fade\"\n        activeKey={transitionKey}\n      >\n        {content}\n      </Transition>\n    );\n  }, [amount, hasInsufficientFeeError, isAmountGreaterThanBalance, isMultisig, lang]);\n\n  function renderButtonText() {\n    if (diesel?.status === 'not-authorized') {\n      return lang('Authorize %token% Fee', { token: symbol! });\n    }\n    if (diesel?.status === 'pending-previous') {\n      return lang('Awaiting Previous Fee');\n    }\n    return lang('$send_token_symbol', isNftTransfer ? 'NFT' : symbol || 'TON');\n  }\n\n  function renderFee() {\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (!isAmountMissing) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : explainedFee.realFee;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={transferToken}\n        precision={precision}\n        onDetailsClick={openFeeModal}\n      />\n    );\n  }\n\n  return (\n    <>\n      <form\n        className={isStatic ? undefined : modalStyles.transitionContent}\n        onSubmit={handleSubmit}\n        onPaste={handlePaste}\n      >\n        <Transition\n          activeKey={transitionKey}\n          name=\"semiFade\"\n          direction={isStatic && !doesSupportComment ? 'inverse' : undefined}\n          shouldCleanup\n          slideClassName={buildClassName(styles.formSlide, isStatic && styles.formSlide_static, slideClassName)}\n        >\n          {nfts?.length === 1 && <NftInfo nft={nfts[0]} isStatic={isStatic} withMediaViewer />}\n          {Boolean(nfts?.length) && nfts.length > 1 && <NftChips nfts={nfts} isStatic={isStatic} />}\n\n          <AddressInput\n            label={lang('Recipient Address')}\n            value={toAddress}\n            chain={chain}\n            // NFT transfers are available only on the TON blockchain on this moment\n            addressBookChain={isNftTransfer ? 'ton' : undefined}\n            currentAccountId={currentAccountId}\n            accounts={accounts}\n            savedAddresses={savedAddresses}\n            validateAddress={checkTransferAddress}\n            isStatic={isStatic}\n            withQrScan\n            address={resolvedAddress || toAddress}\n            addressName={toAddressName}\n            onInput={handleAddressInput}\n            onClose={cancelTransfer}\n          />\n\n          {!isNftTransfer && (\n            <AmountInputSection\n              {...amountInputProps}\n              maxAmount={maxAmount}\n              token={transferToken}\n              allTokens={tokensToSelect}\n              isStatic={isStatic}\n              hasError={hasAmountError}\n              isMultichainAccount={isMultichainAccount}\n              isMaxAmountLoading={maxAmount === undefined}\n              isSensitiveDataHidden={isSensitiveDataHidden}\n              renderBottomRight={renderBottomRight}\n              onPressEnter={handleSubmit}\n            />\n          )}\n\n          {doesSupportComment && (\n            <CommentSection\n              comment={comment}\n              shouldEncrypt={shouldEncrypt}\n              binPayload={binPayload}\n              stateInit={stateInit}\n              chain={chain}\n              isStatic={isStatic}\n              isCommentRequired={isCommentRequired}\n              isEncryptedCommentSupported={isEncryptedCommentSupported}\n              onCommentChange={handleCommentChange}\n            />\n          )}\n\n          <div className={buildClassName(styles.footer, isStatic && chain !== 'ton' && styles.footer_shifted)}>\n            {renderFee()}\n\n            <div className={styles.buttons}>\n              <Button\n                isDisabled={shouldDisableClearButton || isLoading}\n                className={styles.button}\n                onClick={handleClear}\n              >\n                {lang('Clear')}\n              </Button>\n              <Button\n                isPrimary\n                isSubmit\n                isDisabled={!canSubmit}\n                isLoading={isLoading}\n                className={styles.button}\n              >\n                {renderButtonText()}\n              </Button>\n            </div>\n          </div>\n        </Transition>\n      </form>\n      <FeeDetailsModal\n        isOpen={isFeeModalOpen}\n        onClose={closeFeeModal}\n        fullFee={explainedFee.fullFee?.terms}\n        realFee={explainedFee.realFee?.terms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={transferToken}\n      />\n      <Modal\n        isOpen={Boolean(scamWarningType)}\n        isCompact\n        title={lang('Warning!')}\n        noBackdropClose\n        onClose={handleScamWarningModalClose}\n      >\n        <div>\n          {getScamWarning(lang, renderedScamWarningType)}\n        </div>\n        <div className={modalStyles.footerButtons}>\n          {isAllowSuspiciousActions ? (\n            <>\n              <Button\n                className={modalStyles.button}\n                onClick={handleScamWarningModalClose}\n              >\n                {lang('Close')}\n              </Button>\n              <Button\n                isPrimary\n                isDestructive\n                className={modalStyles.button}\n                onClick={dismissTransferScamWarning}\n              >\n                {lang('Continue')}\n              </Button>\n            </>\n          ) : (\n            <Button onClick={handleScamWarningModalClose}>{lang('Close')}</Button>\n          )}\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        toAddress,\n        resolvedAddress,\n        toAddressName,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        tokenSlug,\n        isLoading,\n        state,\n        nfts,\n        binPayload,\n        isMemoRequired,\n        diesel,\n        stateInit,\n        scamWarningType,\n      } = global.currentTransfer;\n\n      const isLedger = selectIsHardwareAccount(global);\n      const accountState = selectCurrentAccountState(global);\n      const { baseCurrency = DEFAULT_PRICE_CURRENCY, isSensitiveDataHidden } = global.settings;\n      const isActive = ACTIVE_STATES.has(state);\n\n      const chain = getChainBySlug(tokenSlug);\n      return {\n        toAddress,\n        resolvedAddress,\n        toAddressName,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        nfts,\n        tokenSlug,\n        binPayload,\n        stateInit,\n        tokens: selectCurrentAccountTokens(global),\n        savedAddresses: accountState?.savedAddresses,\n        isEncryptedCommentSupported: !isLedger && !nfts?.length && !isMemoRequired,\n        isMemoRequired,\n        isActive,\n        isLoading: isLoading && isActive,\n        baseCurrency,\n        currentAccountId: global.currentAccountId!,\n        accounts: selectNetworkAccounts(global),\n        nativeTokenBalance: selectCurrentAccountTokenBalance(global, getNativeToken(chain).slug),\n        diesel,\n        isDieselAuthorizationStarted: accountState?.isDieselAuthorizationStarted,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        isMultisig: selectIsMultisigAccount(global, global.currentAccountId!, chain),\n        isSensitiveDataHidden,\n        scamWarningType,\n        isAllowSuspiciousActions: selectIsAllowSuspiciousActions(global, global.currentAccountId!),\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(TransferInitial),\n);\n\nfunction useFeeModal(explainedFee: ExplainedTransferFee) {\n  const isAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [isOpen, open, close] = useFlag(false);\n  const openIfAvailable = isAvailable ? open : undefined;\n  return [isOpen, openIfAvailable, close] as const;\n}\n\nfunction isSelectableToken(token: UserToken, selectedTokenSlug: string) {\n  return token.type !== 'lp_token'\n    || (token.amount > 0 && !token.isDisabled)\n    || token.slug === selectedTokenSlug;\n}\n\nfunction getScamWarning(lang: LangFn, scamWarning: ScamWarningType | undefined) {\n  if (!scamWarning) return undefined;\n\n  return lang(scamWarning === ScamWarningType.DomainLike\n    ? '$domain_like_scam_warning'\n    : '$seed_phrase_scam_warning', {\n    help_center_link: (\n      <a\n        href={getHelpCenterUrl(lang.code, scamWarning === ScamWarningType.DomainLike ? 'domainScam' : 'seedScam')}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        <b>{lang('$help_center_prepositional')}</b>\n      </a>\n    ),\n  });\n}\n","import { type ElementRef, useEffect, useState } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../global/types';\n\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { stopEvent } from '../util/domEvents';\nimport { vibrate } from '../util/haptics';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\nconst LONG_TAP_DURATION_MS = 200;\nconst IOS_PWA_CONTEXT_MENU_DELAY_MS = 100;\n\ninterface OwnProps {\n  elementRef: ElementRef<HTMLElement>;\n  isMenuDisabled?: boolean;\n  shouldDisableOnLink?: boolean;\n  shouldDisableOnLongTap?: boolean;\n  shouldDisablePropagation?: boolean;\n}\n\nconst useContextMenuHandlers = ({\n  elementRef,\n  isMenuDisabled,\n  shouldDisableOnLink,\n  shouldDisableOnLongTap,\n  shouldDisablePropagation,\n}: OwnProps) => {\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false);\n  const [contextMenuAnchor, setContextMenuAnchor] = useState<IAnchorPosition | undefined>(undefined);\n  const [contextMenuTarget, setContextMenuTarget] = useState<HTMLElement | undefined>(undefined);\n\n  const handleBeforeContextMenu = useLastCallback((e: React.MouseEvent) => {\n    if (!isMenuDisabled && e.button === 2) {\n      requestMutation(() => {\n        addExtraClass(e.target as HTMLElement, 'no-selection');\n      });\n    }\n  });\n\n  const handleContextMenu = useLastCallback((e: React.MouseEvent) => {\n    requestMutation(() => {\n      removeExtraClass(e.target as HTMLElement, 'no-selection');\n    });\n\n    if (isMenuDisabled || (shouldDisableOnLink && (e.target as HTMLElement).matches('a[href]'))) {\n      return;\n    }\n    stopEvent(e);\n\n    if (contextMenuAnchor) {\n      return;\n    }\n\n    setIsContextMenuOpen(true);\n    setContextMenuAnchor({ x: e.clientX, y: e.clientY });\n    setContextMenuTarget(e.target as HTMLElement);\n    void vibrate();\n  });\n\n  const handleContextMenuClose = useLastCallback(() => {\n    setIsContextMenuOpen(false);\n  });\n\n  const handleContextMenuHide = useLastCallback(() => {\n    setContextMenuAnchor(undefined);\n  });\n\n  const handleTouchMove = useLastCallback((e: TouchEvent) => {\n    if (isContextMenuOpen) {\n      stopEvent(e);\n    }\n  });\n\n  // Support context menu on touch devices\n  useEffect(() => {\n    if (isMenuDisabled || !IS_TOUCH_ENV || shouldDisableOnLongTap) {\n      return undefined;\n    }\n\n    const element = elementRef.current;\n    if (!element) {\n      return undefined;\n    }\n\n    let timer: number | undefined;\n\n    const clearLongPressTimer = () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = undefined;\n      }\n    };\n    const clearLongPressTimerAndStopEvent = (origialEvent: TouchEvent) => {\n      clearLongPressTimer();\n      handleTouchMove(origialEvent);\n    };\n\n    const emulateContextMenuEvent = (originalEvent: TouchEvent) => {\n      clearLongPressTimer();\n\n      const { clientX, clientY, target } = originalEvent.touches[0];\n\n      if (contextMenuAnchor || (shouldDisableOnLink && (target as HTMLElement).matches('a[href]'))) {\n        return;\n      }\n\n      // Temporarily intercept and clear the next click\n      document.addEventListener('touchend', (e) => {\n        // On iOS in PWA mode, the context menu may cause click-through to the element in the menu upon opening\n        if (IS_IOS && IS_PWA) {\n          setTimeout(() => {\n            document.removeEventListener('mousedown', stopEvent, {\n              capture: true,\n            });\n            document.removeEventListener('click', stopEvent, {\n              capture: true,\n            });\n          }, IOS_PWA_CONTEXT_MENU_DELAY_MS);\n        }\n        stopEvent(e);\n      }, {\n        once: true,\n        capture: true,\n      });\n\n      // On iOS15, in PWA mode, the context menu immediately closes after opening\n      if (IS_PWA && IS_IOS) {\n        document.addEventListener('mousedown', stopEvent, {\n          once: true,\n          capture: true,\n        });\n        document.addEventListener('click', stopEvent, {\n          once: true,\n          capture: true,\n        });\n      }\n\n      setIsContextMenuOpen(true);\n      setContextMenuAnchor({ x: clientX, y: clientY });\n      void vibrate();\n    };\n\n    const startLongPressTimer = (e: TouchEvent) => {\n      if (isMenuDisabled) {\n        return;\n      }\n      if (shouldDisablePropagation) e.stopPropagation();\n      clearLongPressTimer();\n\n      timer = window.setTimeout(() => emulateContextMenuEvent(e), LONG_TAP_DURATION_MS);\n    };\n\n    // @perf Consider event delegation\n    element.addEventListener('touchstart', startLongPressTimer, { passive: true });\n    element.addEventListener('touchcancel', clearLongPressTimer, true);\n    element.addEventListener('touchend', clearLongPressTimer, true);\n    // `useCapture` is needed to prevent the content from scrolling behind the context menu\n    element.addEventListener('touchmove', clearLongPressTimerAndStopEvent, true);\n\n    return () => {\n      clearLongPressTimer();\n      element.removeEventListener('touchstart', startLongPressTimer);\n      element.removeEventListener('touchcancel', clearLongPressTimer, true);\n      element.removeEventListener('touchend', clearLongPressTimer, true);\n      element.removeEventListener('touchmove', clearLongPressTimerAndStopEvent, true);\n    };\n  }, [\n    contextMenuAnchor, isMenuDisabled, shouldDisableOnLongTap, elementRef, shouldDisableOnLink,\n    shouldDisablePropagation,\n  ]);\n\n  return {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    contextMenuTarget,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  };\n};\n\nexport default useContextMenuHandlers;\n","import type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { useRef } from '../../lib/teact/teact';\n\nimport type { Layout } from '../../hooks/useMenuPosition';\nimport type { DropdownItem } from './Dropdown';\n\nimport useContextMenuHandlers from '../../hooks/useContextMenuHandlers';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownMenu from './DropdownMenu';\nimport MenuBackdrop from './MenuBackdrop';\n\ninterface Props<T extends string> {\n  items: DropdownItem<T>[];\n  rootRef?: ElementRef<HTMLDivElement>;\n  onItemClick: (value: T) => void;\n  children: (buttonProps: {\n    ref: ElementRef<HTMLDivElement | HTMLButtonElement>;\n    onMouseDown: (e: React.MouseEvent) => void;\n    onContextMenu: (e: React.MouseEvent) => void;\n    className?: string;\n  }, isMenuOpen: boolean) => TeactNode;\n  menuClassName?: string;\n  menuPositionY?: 'top' | 'bottom';\n}\n\nexport default function WithContextMenu<T extends string>({\n  items,\n  rootRef,\n  onItemClick,\n  children,\n  menuClassName,\n  menuPositionY = 'bottom',\n}: Props<T>) {\n  const buttonRef = useRef<HTMLDivElement | HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n\n  const { isPortrait } = useDeviceScreen();\n  const getTriggerElement = useLastCallback(() => buttonRef.current);\n  const getRootElement = useLastCallback(() => rootRef?.current ?? document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout: () => Layout = useLastCallback(() => ({\n    withPortal: true,\n    doNotCoverTrigger: true,\n    centerHorizontally: true,\n  }));\n\n  const {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  } = useContextMenuHandlers({\n    elementRef: buttonRef,\n    shouldDisablePropagation: true,\n  });\n\n  const handleMenuItemSelect = useLastCallback((value: T) => {\n    onItemClick(value);\n  });\n\n  return (\n    <>\n      {isPortrait && (\n        <MenuBackdrop\n          isMenuOpen={isContextMenuOpen}\n          contentRef={buttonRef}\n          contentClassName={menuClassName}\n        />\n      )}\n      {children(\n        {\n          ref: buttonRef,\n          onMouseDown: handleBeforeContextMenu,\n          onContextMenu: handleContextMenu,\n        },\n        isContextMenuOpen,\n      )}\n      {!!contextMenuAnchor && (\n        <DropdownMenu\n          ref={menuRef}\n          withPortal\n          shouldTranslateOptions\n          isOpen={isContextMenuOpen}\n          items={items}\n          menuPositionY={menuPositionY}\n          menuAnchor={contextMenuAnchor}\n          bubbleClassName={menuClassName}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={handleMenuItemSelect}\n          onClose={handleContextMenuClose}\n          onCloseAnimationEnd={handleContextMenuHide}\n        />\n      )}\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oiB1R7GB\",\"tabs\":\"Sue0UN3j\",\"notAllTabs\":\"QLxHVfeT\",\"tab\":\"qUqbpDN6\",\"active\":\"PSKCyspY\",\"tab_purple\":\"Hw7rCAOU\",\"tabPurple\":\"Hw7rCAOU\",\"tab_purpleText\":\"Y4BNELoX\",\"tabPurpleText\":\"Y4BNELoX\",\"tabDelimiter\":\"CLfyAuI6\",\"withContextMenu\":\"xFC2ES5I\",\"tabDecoration\":\"SSnDTAfy\",\"tabIcon\":\"nIk_Y_3d\",\"tabText\":\"IfCQ498V\",\"contentHeader\":\"LzaI7YWC\",\"firstActive\":\"G0Sd_POg\",\"contentHeaderInner\":\"rWtZ588N\",\"lastActive\":\"Y80L38VI\",\"contentBg\":\"ibE61V3n\",\"contentFooter\":\"WvrNEDxt\",\"contentSlideStaked\":\"F0M6K6CS\",\"tab-0\":\"NmGloXOI\",\"tab0\":\"NmGloXOI\",\"tab-1\":\"S7XD0emA\",\"tab1\":\"S7XD0emA\",\"slideContent\":\"bTsglo_e\",\"transitionContent\":\"YJuoqMiV\",\"slideContentAddBuy\":\"QO6jMpRA\",\"spinner\":\"KCsGLTLM\",\"menu\":\"Q6q8HQcu\"};","import React, { type ElementRef, memo, useEffect, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { Theme } from '../../../../global/types';\nimport type { StakingStateStatus } from '../../../../util/staking';\nimport { ActiveTab } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_ICON_PX, DEFAULT_LANDSCAPE_ACTION_TAB_ID } from '../../../../config';\nimport { requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport {\n  selectAccountState,\n  selectCurrentAccountSettings,\n  selectIsStakingDisabled,\n  selectIsSwapDisabled,\n} from '../../../../global/selectors';\nimport { ACCENT_COLORS } from '../../../../util/accentColor/constants';\nimport buildClassName from '../../../../util/buildClassName';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { IS_TOUCH_ENV } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport { handleSendMenuItemClick, SEND_CONTEXT_MENU_ITEMS } from './helpers/sendMenu';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\nimport useUniqueId from '../../../../hooks/useUniqueId';\n\nimport Content from '../../../receive/Content';\nimport StakingInfoContent from '../../../staking/StakingInfoContent';\nimport StakingInitial from '../../../staking/StakingInitial';\nimport SwapInitial from '../../../swap/SwapInitial';\nimport TransferInitial from '../../../transfer/TransferInitial';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Transition, { ACTIVE_SLIDE_CLASS_NAME, TO_SLIDE_CLASS_NAME } from '../../../ui/Transition';\nimport WithContextMenu from '../../../ui/WithContextMenu';\n\nimport styles from './LandscapeActions.module.scss';\n\ninterface OwnProps {\n  containerRef: ElementRef<HTMLDivElement>;\n  stakingStatus: StakingStateStatus;\n  isLedger?: boolean;\n  theme: Theme;\n}\n\ninterface StateProps {\n  activeTabIndex?: ActiveTab;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isStakingDisabled: boolean;\n  isOnRampDisabled: boolean;\n  accentColorIndex?: number;\n}\n\nconst TABS = [ActiveTab.Receive, ActiveTab.Transfer, ActiveTab.Swap, ActiveTab.Stake];\nconst ANIMATED_STICKER_SPEED = 2;\nexport const STAKING_TAB_TEXT_VARIANTS: Record<StakingStateStatus, string> = {\n  inactive: 'Earn',\n  active: 'Earning',\n  unstakeRequested: '$unstaking_short',\n  readyToClaim: '$unstaking_short',\n};\n\nfunction LandscapeActions({\n  containerRef,\n  stakingStatus,\n  isLedger,\n  theme,\n  activeTabIndex = DEFAULT_LANDSCAPE_ACTION_TAB_ID,\n  isTestnet,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isStakingDisabled,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const { setLandscapeActionsActiveTabIndex: setActiveTabIndex } = getActions();\n\n  const lang = useLang();\n\n  const isStaking = activeTabIndex === ActiveTab.Stake && stakingStatus !== 'inactive';\n\n  const transferSlideClassName = `transfer_slide_${useUniqueId()}`;\n  const {\n    renderedBgHelpers,\n    transitionRef,\n  } = useTabHeightAnimation(\n    styles.slideContent,\n    transferSlideClassName,\n    isStaking ? styles.contentSlideStaked : undefined,\n    isStaking,\n  );\n\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const areNotAllTabs = isSwapDisabled || isStakingDisabled;\n  const isLastTab = (isStakingDisabled && isSwapDisabled && activeTabIndex === ActiveTab.Transfer)\n    || (isStakingDisabled && !isSwapDisabled && activeTabIndex === ActiveTab.Swap)\n    || (!isStakingDisabled && activeTabIndex === ActiveTab.Stake);\n\n  const [isAddBuyAnimating, playAddBuyAnimation, stopAddBuyAnimation] = useFlag();\n  const [isSendAnimating, playSendAnimation, stopSendAnimation] = useFlag();\n  const [isSwapAnimating, playSwapAnimation, stopSwapAnimation] = useFlag();\n  const [isStakeAnimating, playStakeAnimation, stopStakeAnimation] = useFlag();\n  const appTheme = useAppTheme(theme);\n  const stickerPaths = ANIMATED_STICKERS_PATHS[appTheme];\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n  const buttonTransitionKeyRef = useRef(0);\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [accentColor]);\n\n  useEffect(() => {\n    if (\n      (isSwapDisabled && activeTabIndex === ActiveTab.Swap)\n      || (isStakingDisabled && activeTabIndex === ActiveTab.Stake)\n    ) {\n      setActiveTabIndex({ index: ActiveTab.Transfer });\n    }\n  }, [activeTabIndex, isTestnet, isLedger, isSwapDisabled, isStakingDisabled]);\n\n  function renderCurrentTab(isActive: boolean) {\n    switch (activeTabIndex) {\n      case ActiveTab.Receive:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentAddBuy)}>\n            <Content isOpen={isActive} isStatic />\n          </div>\n        );\n\n      case ActiveTab.Transfer:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentTransfer)}>\n            <TransferInitial isStatic slideClassName={transferSlideClassName} />\n          </div>\n        );\n\n      case ActiveTab.Swap:\n        return (\n          <div className={styles.slideContent}>\n            <SwapInitial isStatic isActive={isActive} />\n          </div>\n        );\n\n      case ActiveTab.Stake:\n        return (\n          <div className={styles.slideContent}>\n            {\n              stakingStatus === 'inactive'\n                ? <StakingInitial isStatic isActive={isActive} />\n                : <StakingInfoContent isStatic isActive={isActive} />\n            }\n          </div>\n        );\n\n      default:\n        return undefined;\n    }\n  }\n\n  function handleSelectTab(index: ActiveTab, onTouchStart: NoneToVoidFunction) {\n    if (IS_TOUCH_ENV) onTouchStart();\n\n    setActiveTabIndex({ index }, { forceOnHeavyAnimation: true });\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={buildClassName(styles.tabs, areNotAllTabs && styles.notAllTabs)}>\n        <div\n          className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Receive && styles.active)}\n          onMouseEnter={!IS_TOUCH_ENV ? playAddBuyAnimation : undefined}\n          onContextMenu={stopEvent}\n          onClick={() => {\n            handleSelectTab(ActiveTab.Receive, playAddBuyAnimation);\n          }}\n        >\n          <AnimatedIconWithPreview\n            play={isAddBuyAnimating}\n            size={ANIMATED_STICKER_ICON_PX}\n            speed={ANIMATED_STICKER_SPEED}\n            className={styles.tabIcon}\n            key={accentColor}\n            color={accentColor}\n            nonInteractive\n            forceOnHeavyAnimation\n            tgsUrl={stickerPaths.iconAdd}\n            iconPreviewClass=\"icon-action-add\"\n            onEnded={stopAddBuyAnimation}\n          />\n          <span className={styles.tabText}>{lang(!isSwapDisabled || isOnRampAllowed ? 'Add / Buy' : 'Add')}</span>\n\n          <span className={styles.tabDecoration} aria-hidden />\n        </div>\n        <WithContextMenu\n          items={SEND_CONTEXT_MENU_ITEMS}\n          rootRef={containerRef}\n          menuClassName={styles.menu}\n          onItemClick={handleSendMenuItemClick}\n        >\n          {({ ref, ...restButtonProps }) => (\n            <div\n              {...restButtonProps}\n              ref={ref as ElementRef<HTMLDivElement>}\n              className={buildClassName(\n                styles.tab,\n                activeTabIndex === ActiveTab.Transfer && styles.active,\n                styles.withContextMenu,\n              )}\n              onMouseEnter={!IS_TOUCH_ENV ? playSendAnimation : undefined}\n              onClick={() => {\n                handleSelectTab(ActiveTab.Transfer, playSendAnimation);\n              }}\n            >\n              <AnimatedIconWithPreview\n                play={isSendAnimating}\n                size={ANIMATED_STICKER_ICON_PX}\n                speed={ANIMATED_STICKER_SPEED}\n                className={styles.tabIcon}\n                key={accentColor}\n                color={accentColor}\n                nonInteractive\n                forceOnHeavyAnimation\n                tgsUrl={stickerPaths.iconSend}\n                iconPreviewClass=\"icon-action-send\"\n                onEnded={stopSendAnimation}\n              />\n              <span className={styles.tabText}>{lang('Send')}</span>\n              <span className={styles.tabDecoration} aria-hidden />\n              <span className={styles.tabDelimiter} aria-hidden />\n            </div>\n          )}\n        </WithContextMenu>\n        {!isSwapDisabled && (\n          <div\n            className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Swap && styles.active)}\n            onMouseEnter={!IS_TOUCH_ENV ? playSwapAnimation : undefined}\n            onContextMenu={stopEvent}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Swap, playSwapAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isSwapAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths.iconSwap}\n              iconPreviewClass=\"icon-action-swap\"\n              onEnded={stopSwapAnimation}\n            />\n            <span className={styles.tabText}>{lang('Swap')}</span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n        {!isStakingDisabled && (\n          <div\n            className={buildClassName(\n              styles.tab,\n              activeTabIndex === ActiveTab.Stake && styles.active,\n              isStaking && styles.tab_purple,\n              stakingStatus !== 'inactive' && styles.tab_purpleText,\n            )}\n            onMouseEnter={!IS_TOUCH_ENV ? playStakeAnimation : undefined}\n            onContextMenu={stopEvent}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Stake, playStakeAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isStakeAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths[stakingStatus !== 'inactive' ? 'iconEarnPurple' : 'iconEarn']}\n              iconPreviewClass={buildClassName(\n                'icon-action-earn',\n                stakingStatus !== 'inactive' && styles.tab_purpleText,\n              )}\n              onEnded={stopStakeAnimation}\n            />\n            <span className={styles.tabText}>{lang(STAKING_TAB_TEXT_VARIANTS[stakingStatus])}</span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n      </div>\n\n      <div\n        className={buildClassName(\n          styles.contentHeader,\n          activeTabIndex === ActiveTab.Receive && styles.firstActive,\n          isLastTab && styles.lastActive,\n        )}\n      >\n        <div className={buildClassName(styles.contentHeaderInner, isStaking && styles.contentSlideStaked)} />\n      </div>\n      {renderedBgHelpers}\n\n      <Transition\n        ref={transitionRef}\n        name=\"slideFade\"\n        activeKey={activeTabIndex}\n        renderCount={TABS.length}\n        className={buildClassName(styles.transitionContent, 'static-container')}\n      >\n        {renderCurrentTab}\n      </Transition>\n    </div>\n  );\n}\n\nfunction useTabHeightAnimation(\n  slideClassName: string,\n  transferSlideClassName: string,\n  contentBackgroundClassName?: string,\n  isUnstaking = false,\n) {\n  const transitionRef = useRef<HTMLDivElement>();\n  const contentBgRef = useRef<HTMLDivElement>();\n  const contentFooterRef = useRef<HTMLDivElement>();\n  const lastHeightRef = useRef<number>();\n\n  const adjustBg = useLastCallback((noTransition = false) => {\n    const activeSlideSelector = `.${slideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const toSlideSelector = `.${slideClassName}.${TO_SLIDE_CLASS_NAME}`;\n    const suffix = isUnstaking ? ' .staking-info' : '';\n    // eslint-disable-next-line @stylistic/max-len\n    const transferQuery = `${activeSlideSelector} .${transferSlideClassName}.${TO_SLIDE_CLASS_NAME}, ${activeSlideSelector} .${transferSlideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const query = `${toSlideSelector}${suffix}, ${activeSlideSelector}${suffix}`;\n    const slide = (transitionRef.current?.querySelector(transferQuery) || transitionRef.current?.querySelector(query))!;\n    const rect = slide.getBoundingClientRect();\n    const shouldRenderWithoutTransition = !lastHeightRef.current || noTransition;\n\n    if (lastHeightRef.current === rect.height || !contentBgRef.current) return;\n\n    requestMutation(() => {\n      if (!contentBgRef.current || !contentFooterRef.current) return;\n\n      const contentBgStyle = contentBgRef.current.style;\n      const contentFooterStyle = contentFooterRef.current.style;\n\n      if (shouldRenderWithoutTransition) {\n        contentBgStyle.transition = 'none';\n        contentFooterStyle.transition = 'none';\n      }\n\n      contentBgStyle.transform = `scaleY(calc(${rect.height} / 100))`;\n      contentFooterStyle.transform = `translateY(${Math.floor(rect.height)}px)`;\n\n      if (shouldRenderWithoutTransition) {\n        requestMutation(() => {\n          if (!contentBgRef.current || !contentFooterRef.current) return;\n\n          contentBgRef.current.style.transition = '';\n          contentFooterRef.current.style.transition = '';\n        });\n      }\n\n      lastHeightRef.current = rect.height;\n    });\n  });\n\n  useEffect(() => {\n    adjustBg(true);\n\n    const componentObserver = new ResizeObserver((entries) => {\n      if (!entries.length) return;\n      adjustBg();\n    });\n\n    if (transitionRef.current) {\n      componentObserver.observe(transitionRef.current);\n    }\n\n    return () => {\n      componentObserver.disconnect();\n    };\n  }, [adjustBg]);\n\n  const renderedBgHelpers = useMemo(() => {\n    return (\n      <>\n        <div ref={contentBgRef} className={buildClassName(styles.contentBg, contentBackgroundClassName)} />\n        <div ref={contentFooterRef} className={buildClassName(styles.contentFooter, contentBackgroundClassName)} />\n      </>\n    );\n  }, [contentBackgroundClassName]);\n\n  return {\n    renderedBgHelpers,\n    transitionRef,\n  };\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectAccountState(global, global.currentAccountId!) ?? {};\n\n      const { isOnRampDisabled } = global.restrictions;\n\n      return {\n        activeTabIndex: accountState?.landscapeActionsActiveTabIndex,\n        isTestnet: global.settings.isTestnet,\n        isSwapDisabled: selectIsSwapDisabled(global),\n        isStakingDisabled: selectIsStakingDisabled(global),\n        isOnRampDisabled,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(LandscapeActions),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oAYeit4x\",\"buttons\":\"Xw7VtigI\",\"button\":\"f9uDJdvE\",\"button_purple\":\"DSist0sY\",\"buttonPurple\":\"DSist0sY\",\"buttonActive\":\"s05GLla1\",\"buttonIcon\":\"iQddp8Ac\",\"menu\":\"kJbEm897\"};","import React, { type ElementRef, memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { StakingStateStatus } from '../../../../util/staking';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { vibrate } from '../../../../util/haptics';\nimport { handleSendMenuItemClick, SEND_CONTEXT_MENU_ITEMS } from './helpers/sendMenu';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport WithContextMenu from '../../../ui/WithContextMenu';\nimport { STAKING_TAB_TEXT_VARIANTS } from './LandscapeActions';\n\nimport styles from './PortraitActions.module.scss';\n\ninterface OwnProps {\n  isTestnet?: boolean;\n  isLedger?: boolean;\n  stakingStatus: StakingStateStatus;\n  isSwapDisabled?: boolean;\n  isStakingDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  containerRef: ElementRef<HTMLDivElement>;\n  onEarnClick: NoneToVoidFunction;\n}\n\nfunction PortraitActions({\n  isTestnet,\n  stakingStatus,\n  isStakingDisabled,\n  isSwapDisabled,\n  isOnRampDisabled,\n  containerRef,\n  onEarnClick,\n}: OwnProps) {\n  const {\n    startTransfer, startSwap, openReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const addBuyButtonName = IS_CORE_WALLET\n    ? 'Receive'\n    : (!isSwapDisabled || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  const handleStartSwap = useLastCallback(() => {\n    void vibrate();\n\n    startSwap();\n  });\n\n  const handleStartTransfer = useLastCallback(() => {\n    void vibrate();\n\n    startTransfer({ isPortrait: true });\n  });\n\n  const handleAddBuyClick = useLastCallback(() => {\n    void vibrate();\n\n    openReceiveModal();\n  });\n\n  const handleEarnClick = useLastCallback(() => {\n    void vibrate();\n\n    onEarnClick();\n  });\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.buttons}>\n        <Button\n          isSimple\n          className={styles.button}\n          onClick={handleAddBuyClick}\n        >\n          <i className={buildClassName(styles.buttonIcon, 'icon-action-add')} aria-hidden />\n          {lang(addBuyButtonName)}\n        </Button>\n        <WithContextMenu\n          rootRef={containerRef}\n          items={SEND_CONTEXT_MENU_ITEMS}\n          menuClassName={styles.menu}\n          onItemClick={handleSendMenuItemClick}\n        >\n          {(buttonProps, isMenuOpen) => (\n            <Button\n              {...buttonProps}\n              isSimple\n              className={buildClassName(styles.button, isMenuOpen && styles.buttonActive)}\n              onClick={handleStartTransfer}\n              ref={buttonProps.ref as ElementRef<HTMLButtonElement>}\n            >\n              <i className={buildClassName(styles.buttonIcon, 'icon-action-send')} aria-hidden />\n              {lang('Send')}\n            </Button>\n          )}\n        </WithContextMenu>\n        {!isSwapDisabled && (\n          <Button\n            isSimple\n            className={styles.button}\n            onClick={handleStartSwap}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-swap')} aria-hidden />\n            {lang('Swap')}\n          </Button>\n        )}\n        {!isStakingDisabled && (\n          <Button\n            isSimple\n            className={buildClassName(styles.button, stakingStatus !== 'inactive' && styles.button_purple)}\n            onClick={handleEarnClick}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-earn')} aria-hidden />\n            {lang(STAKING_TAB_TEXT_VARIANTS[stakingStatus])}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(PortraitActions);\n","import { Big } from '../lib/big.js';\n\nexport function calcChangeValue(currentPrice: number, changeFactor: number) {\n  return currentPrice - currentPrice / (1 + changeFactor);\n}\n\nexport function calcBigChangeValue(currentPrice: Big | string, changeFactor: Big | number) {\n  currentPrice = Big(currentPrice);\n  changeFactor = Big(changeFactor);\n  return currentPrice.minus(currentPrice.div(changeFactor.plus(1)));\n}\n","import type { ApiStakingState } from '../../../../../api/types';\nimport type { UserToken } from '../../../../../global/types';\n\nimport { STAKED_TOKEN_SLUGS } from '../../../../../config';\nimport { Big } from '../../../../../lib/big.js';\nimport { calcBigChangeValue } from '../../../../../util/calcChangeValue';\nimport { toBig } from '../../../../../util/decimals';\nimport { formatNumber } from '../../../../../util/formatNumber';\nimport { buildCollectionByKey } from '../../../../../util/iteratees';\nimport { round } from '../../../../../util/math';\nimport { getFullStakingBalance } from '../../../../../util/staking';\n\ntype ChangePrefix = 'up' | 'down' | undefined;\n\nexport function calculateFullBalance(tokens: UserToken[], stakingStates?: ApiStakingState[]) {\n  const stakingStateBySlug = buildCollectionByKey(stakingStates ?? [], 'tokenSlug');\n\n  const primaryValue = tokens.reduce((acc, token) => {\n    if (STAKED_TOKEN_SLUGS.has(token.slug)) {\n      // Cost of staked tokens is already taken into account\n      return acc;\n    }\n\n    const stakingState = stakingStateBySlug[token.slug];\n\n    if (stakingState) {\n      const stakingAmount = toBig(getFullStakingBalance(stakingState), token.decimals);\n      acc = acc.plus(stakingAmount.mul(token.price));\n    }\n\n    return acc.plus(token.totalValue);\n  }, Big(0));\n\n  const [primaryWholePart, primaryFractionPart] = formatNumber(primaryValue).split('.');\n  const changeValue = tokens.reduce((acc, token) => {\n    return acc.plus(calcBigChangeValue(token.totalValue, token.change24h));\n  }, Big(0)).round(4).toNumber();\n\n  const changePercent = round(primaryValue ? (changeValue / (primaryValue.toNumber() - changeValue)) * 100 : 0, 2);\n  const changePrefix: ChangePrefix = changeValue > 0 ? 'up' : changeValue < 0 ? 'down' : undefined;\n\n  return {\n    primaryValue: primaryValue.toString(),\n    primaryWholePart,\n    primaryFractionPart,\n    changePrefix,\n    changePercent,\n    changeValue,\n  };\n}\n","import { useState } from '../lib/teact/teact';\nimport { getGlobal } from '../global';\n\nimport { selectCurrentAccountState } from '../global/selectors';\nimport useInterval from './useInterval';\n\nconst ONE_SECOND = 1000;\nconst SHOW_INDICATOR_DELAY_MS = 2 * ONE_SECOND;\n\nexport default function useUpdateIndicator(updateStartedAtKey: 'balanceUpdateStartedAt' | 'activitiesUpdateStartedAt') {\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  useInterval(() => {\n    const updateStartedAt = selectCurrentAccountState(getGlobal())?.[updateStartedAtKey];\n\n    if (!updateStartedAt) {\n      setIsUpdating(false);\n      return;\n    }\n\n    const timeElapsedSinceLastUpdateStarted = Date.now() - updateStartedAt;\n\n    setIsUpdating(timeElapsedSinceLastUpdateStarted > SHOW_INDICATOR_DELAY_MS);\n  }, ONE_SECOND, false);\n\n  return isUpdating;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"icon\":\"avkqxacs\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport styles from './ClockIcon.module.scss';\n\ninterface OwnProps {\n  className?: string;\n  noAnimation?: boolean;\n}\n\nfunction ClockIcon({ className, noAnimation }: OwnProps) {\n  const svgMaskId = useUniqueId('transparentMask-');\n\n  return (\n    <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\" className={className}>\n      <mask id={svgMaskId}>\n        <rect width=\"32\" height=\"32\" fill=\"black\" />\n        <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"white\" />\n        <path\n          d=\"M17.375 8.87438C17.375 8.11563 16.7594 7.5 16 7.5C15.2406 7.5 14.625 8.11563 14.625\n              8.87438V16.0006C14.625 16.76 15.2406 17.375 16 17.375C16.7594 17.375 17.375 16.76 17.375 16.0006V8.87438Z\"\n          fill=\"black\"\n        >\n          {!noAnimation && (\n            <animateTransform\n              attributeName=\"transform\"\n              type=\"rotate\"\n              from=\"0 16 16\"\n              to=\"360 16 16\"\n              dur=\"2s\"\n              repeatCount=\"indefinite\"\n            />\n          )}\n        </path>\n        <path\n          d=\"M17.375 11.985C17.375 11.2337 16.7594 10.625 16 10.625C15.2406 10.625 14.625 11.2337 14.625\n              11.985V16.015C14.625 16.7662 15.2406 17.375 16 17.375C16.7594 17.375 17.375 16.7662 17.375 16.015V11.985Z\"\n          fill=\"black\"\n        >\n          {!noAnimation && (\n            <animateTransform\n              attributeName=\"transform\"\n              type=\"rotate\"\n              from=\"0 16 16\"\n              to=\"360 16 16\"\n              dur=\"12s\"\n              repeatCount=\"indefinite\"\n            />\n          )}\n        </path>\n      </mask>\n\n      <rect\n        className={styles.icon}\n        width=\"32\"\n        height=\"32\"\n        mask={`url(#${svgMaskId})`}\n      />\n    </svg>\n  );\n}\n\nexport default memo(ClockIcon);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\n\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport ClockIcon from '../ui/ClockIcon';\n\nimport styles from './MintCardButton.module.scss';\n\ninterface StateProps {\n  isCardMinting?: boolean;\n  hasCardsInfo?: boolean;\n  noAnimation?: boolean;\n}\n\nfunction MintCardButton({\n  isCardMinting,\n  hasCardsInfo,\n  noAnimation,\n}: StateProps) {\n  const { openMintCardModal } = getActions();\n\n  const lang = useLang();\n  const {\n    shouldRender: shouldRenderMintCardsButton,\n    ref: mintCardsButtonRef,\n  } = useShowTransition<HTMLButtonElement>({\n    isOpen: hasCardsInfo || isCardMinting,\n    withShouldRender: true,\n  });\n\n  if (!shouldRenderMintCardsButton) return undefined;\n\n  return (\n    <button\n      ref={mintCardsButtonRef}\n      type=\"button\"\n      className={styles.button}\n      aria-label={lang('Mint Cards')}\n      title={lang('Mint Cards')}\n      onClick={() => openMintCardModal()}\n    >\n      <i className={isCardMinting ? 'icon-magic-wand-loading' : 'icon-magic-wand'} aria-hidden />\n      {isCardMinting && <ClockIcon className={styles.icon} noAnimation={noAnimation} />}\n    </button>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const { config } = selectCurrentAccountState(global) || {};\n  const animationLevel = global.settings.animationLevel;\n\n  return {\n    hasCardsInfo: Boolean(config?.cardsInfo),\n    isCardMinting: accountState?.isCardMinting,\n    noAnimation: animationLevel === ANIMATION_LEVEL_MIN,\n  };\n})(MintCardButton));\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"XUXxtxF8\",\"icon\":\"uN651IGD\"};","import type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MAX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { throttleWithTickEnd } from '../../util/schedulers';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLang from '../../hooks/useLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport styles from './AnimatedCounter.module.scss';\n\ntype OwnProps = {\n  text: string;\n  isDisabled?: boolean;\n};\n\nconst ANIMATION_TIME = 200;\nconst MAX_SIMULTANEOUS_ANIMATIONS = 10;\n\nlet scheduledAnimationsCounter = 0;\n\nconst resetCounterOnTickEnd = throttleWithTickEnd(() => {\n  scheduledAnimationsCounter = 0;\n});\n\nconst AnimatedCounter: FC<OwnProps> = ({\n  text,\n  isDisabled,\n}) => {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const { isRtl } = useLang();\n\n  const prevText = usePrevious(text);\n  const forceUpdate = useForceUpdate();\n\n  const shouldAnimate = scheduleAnimation(\n    !isDisabled && animationLevel === ANIMATION_LEVEL_MAX && prevText !== undefined && prevText !== text,\n  );\n\n  const characters = useMemo(() => {\n    return shouldAnimate ? renderAnimatedCharacters(text, prevText) : text;\n  }, [shouldAnimate, prevText, text]);\n\n  useEffect(() => {\n    if (!shouldAnimate) return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      forceUpdate();\n    }, ANIMATION_TIME);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [shouldAnimate, text]);\n\n  return (\n    <span className={buildClassName(!isDisabled && styles.root)} dir={isRtl ? 'rtl' : undefined}>\n      {characters}\n    </span>\n  );\n};\n\nexport default memo(AnimatedCounter);\n\nfunction scheduleAnimation(condition: boolean) {\n  if (!condition || scheduledAnimationsCounter >= MAX_SIMULTANEOUS_ANIMATIONS) return false;\n\n  if (scheduledAnimationsCounter === 0) {\n    resetCounterOnTickEnd();\n  }\n\n  scheduledAnimationsCounter++;\n\n  return true;\n}\n\nfunction renderAnimatedCharacters(text: string, prevText?: string) {\n  const elements: TeactNode[] = [];\n  const textLength = text.length;\n  const prevTextLength = prevText?.length ?? 0;\n\n  for (let i = 0; i <= textLength; i++) {\n    const charIndex = textLength - i;\n    const prevTextCharIndex = prevTextLength - i;\n\n    if (prevText && prevTextCharIndex >= 0 && text[charIndex] !== prevText[prevTextCharIndex]) {\n      elements.unshift(\n        <div className={styles.characterContainer}>\n          <div className={styles.character}>{text[charIndex] ?? ''}</div>\n          <div className={styles.characterOld}>{prevText[prevTextCharIndex]}</div>\n          <div className={styles.characterNew}>{text[charIndex] ?? ''}</div>\n        </div>,\n      );\n    } else {\n      elements.unshift(<span>{text[charIndex] ?? ''}</span>);\n    }\n  }\n\n  return elements;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UizaBW8F\",\"character-container\":\"o6dPPa5S\",\"characterContainer\":\"o6dPPa5S\",\"character\":\"wT7hwE_a\",\"character-old\":\"pSP5fUMh\",\"characterOld\":\"pSP5fUMh\",\"character-disappear\":\"duRfv5fl\",\"characterDisappear\":\"duRfv5fl\",\"character-new\":\"FtEeojTc\",\"characterNew\":\"FtEeojTc\",\"character-appear\":\"pwumvTMk\",\"characterAppear\":\"pwumvTMk\"};","// extracted by mini-css-extract-plugin\nexport default {\"containerWrapper\":\"wKxh3a3S\",\"isLoading\":\"iGGNu8pc\",\"center\":\"JhiFICIH\",\"container\":\"DeiKNEF2\",\"backstage\":\"Z0VKHxKs\",\"tokenCard\":\"lPzc1tFZ\",\"containerInner\":\"CJuAKeNp\",\"balanceSlide\":\"_S0PhahZ\",\"balanceTransition\":\"Q_lPdCwD\",\"currencySymbol\":\"l0dhdAHZ\",\"primaryValue\":\"_jSits6S\",\"primaryFractionPart\":\"L4sI_b_K\",\"iconCaret\":\"S_WiTJlv\",\"iconCaretSmall\":\"AyZvbJo1\",\"iconCaretFraction\":\"UPrAgVuY\",\"currencySwitcher\":\"JRDSCLUm\",\"currencySwitcherMenu\":\"ouGIASNp\",\"addressContainer\":\"Hscx8f3y\",\"addressLabel\":\"bU030X2g\",\"icon\":\"Z4odaM4f\",\"address\":\"xtFe1Hpt\",\"menuItem\":\"DYEcCh8V\",\"menuIcon\":\"reCfAfE0\",\"menuItemName\":\"XG4JwTZX\",\"menuFontIcon\":\"SR492iSb\",\"menuExplorerIcon\":\"F5fuBEwJ\",\"addressMenuBubble\":\"eqrUlhby\",\"domainText\":\"FeL3tHeI\",\"addressText\":\"W__Ag4Sn\",\"separator\":\"x_DIVHjK\",\"explorerButton\":\"a6nY4qXV\",\"changeSpoiler\":\"u3xBtJOM\",\"blurred\":\"VWmNqmzU\",\"change\":\"p0ADnah2\",\"changePrefix\":\"cuZcbnpx\",\"chainIcon\":\"m2FMwrjB\",\"multichainIcon\":\"f7vAJ3qA\",\"tokenInfo\":\"bGU6MKkV\",\"tokenLogo\":\"KjXvLECZ\",\"tokenInfoHeader\":\"JX6roGM_\",\"tokenInfoSubheader\":\"RxOFnjoX\",\"tokenAmount\":\"eIbQBxJS\",\"tokenName\":\"BnrECUAN\",\"tokenValue\":\"FJv4OzYN\",\"tokenChange\":\"GGm5XDND\",\"tokenChangeSensitiveData\":\"f4V9saRa\",\"tokenChangeSpoiler\":\"_12taTXqz\",\"tokenTitle\":\"RmC9TfSK\",\"tokenHistoryPrice\":\"_4dlU8cE\",\"tokenCurrentPrice\":\"gV90_PgX\",\"tokenPriceDate\":\"iPGWJEAe\",\"apy\":\"NuM0o0NU\",\"interactive\":\"qQdmiqxi\",\"tokenExplorerButton\":\"OG4bpDUn\",\"chart\":\"lKplVEJ6\",\"chartImg\":\"RidGreTo\",\"backButton\":\"rzhYg9wP\",\"periodChooser\":\"fJhqjFVE\",\"periodChooserHidden\":\"xPL1t22b\",\"periodItem\":\"il0Zz8yE\",\"periodItem_active\":\"fcYKEjig\",\"periodItemActive\":\"fcYKEjig\",\"periodInput\":\"PIahT0n2\",\"loadingDotsContainer\":\"iRUbIPAX\",\"cardCustomBackground\":\"A2ptDHpn\",\"visible\":\"aEg2wczx\",\"black\":\"ah_6og0J\",\"platinum\":\"nnklDXWY\",\"gold\":\"c4y77fMq\",\"silver\":\"M9_HMKD7\",\"borderShine_down\":\"VoOVf4tq\",\"borderShineDown\":\"VoOVf4tq\",\"borderShine_left\":\"dWc8MTsx\",\"borderShineLeft\":\"dWc8MTsx\",\"borderShine_up\":\"k8VOGUyt\",\"borderShineUp\":\"k8VOGUyt\",\"borderShine_right\":\"tqABUy73\",\"borderShineRight\":\"tqABUy73\"};","import React, { memo, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiChain } from '../../../../api/types';\nimport type { Account, AccountType, IAnchorPosition } from '../../../../global/types';\nimport type { Layout } from '../../../../hooks/useMenuPosition';\n\nimport { selectAccount } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { handleUrlClick, openUrl } from '../../../../util/openUrl';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport getChainNetworkIcon from '../../../../util/swap/getChainNetworkIcon';\nimport { getExplorerAddressUrl, getExplorerName } from '../../../../util/url';\nimport { IS_TOUCH_ENV } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Menu from '../../../ui/Menu';\n\nimport menuStyles from '../../../ui/Dropdown.module.scss';\nimport styles from './Card.module.scss';\n\nimport multichainIconSrc from '../../../../assets/multichain_account.svg';\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  domainByChain?: Account['domainByChain'];\n  isTestnet?: boolean;\n  accountType?: AccountType;\n  withTextGradient?: boolean;\n}\n\nconst MOUSE_LEAVE_TIMEOUT = 150;\n\nfunction CardAddress({\n  addressByChain, domainByChain, isTestnet, accountType, withTextGradient,\n}: StateProps) {\n  const { showNotification } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const ref = useRef<HTMLDivElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuAnchor);\n\n  const chains = useMemo(() => Object.keys(addressByChain || {}) as ApiChain[], [addressByChain]);\n  const isHardwareAccount = accountType === 'hardware';\n  const isViewAccount = accountType === 'view';\n  const explorerTitle = lang('View on Explorer');\n  const chainDropdownItems = useMemo(() => {\n    const hasDomain = chains[0] && domainByChain?.[chains[0]];\n\n    if (chains.length < 2 && !hasDomain) return undefined;\n\n    return chains.map((chain) => ({\n      value: addressByChain![chain]!,\n      address: shortenAddress(addressByChain![chain]!, domainByChain?.[chain] ? 4 : undefined)!,\n      ...(domainByChain?.[chain] && { domain: domainByChain[chain] }),\n      icon: getChainNetworkIcon(chain),\n      fontIcon: 'copy',\n      chain,\n      label: (lang('View address on %ton_explorer_name%', {\n        ton_explorer_name: getExplorerName(chain),\n      }) as string[]\n      ).join(''),\n    }));\n  }, [addressByChain, domainByChain, chains, lang]);\n\n  const openMenu = () => {\n    const { left, width, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x: left + width / 2, y });\n  };\n\n  const closeMenu = () => {\n    setMenuAnchor(undefined);\n  };\n\n  const handleCopyAddress = useLastCallback((address: string) => {\n    showNotification({ message: lang('Address was copied!'), icon: 'icon-copy' });\n    void copyTextToClipboard(address);\n  });\n\n  const handleItemClick = useLastCallback((e: React.MouseEvent, address: string) => {\n    handleCopyAddress(address);\n    closeMenu();\n  });\n\n  const handleDomainClick = useLastCallback((e: React.MouseEvent, domain: string) => {\n    showNotification({ message: lang('Domain was copied!'), icon: 'icon-copy' });\n    void copyTextToClipboard(domain);\n    closeMenu();\n  });\n\n  const handleExplorerClick = useLastCallback((e: React.MouseEvent, chain: ApiChain, address: string) => {\n    void openUrl(getExplorerAddressUrl(chain, address, isTestnet)!);\n    closeMenu();\n  });\n\n  const closeTimeoutRef = useRef<number>();\n  const handleMouseEnter = useLastCallback(() => {\n    if (closeTimeoutRef.current) {\n      clearTimeout(closeTimeoutRef.current);\n    }\n    openMenu();\n  });\n  const handleMouseLeave = useLastCallback(() => {\n    closeTimeoutRef.current = window.setTimeout(closeMenu, MOUSE_LEAVE_TIMEOUT);\n  });\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({\n    withPortal: true,\n    centerHorizontally: isPortrait,\n    preferredPositionX: 'left' as const,\n    doNotCoverTrigger: isPortrait,\n  }));\n\n  function renderAddressMenu() {\n    return (\n      <Menu\n        menuRef={menuRef}\n        isOpen={isMenuOpen}\n        type=\"dropdown\"\n        withPortal\n        getTriggerElement={getTriggerElement}\n        getRootElement={getRootElement}\n        getMenuElement={getMenuElement}\n        getLayout={getLayout}\n        anchor={menuAnchor}\n        bubbleClassName={styles.addressMenuBubble}\n        noBackdrop={!IS_TOUCH_ENV}\n        onMouseEnter={!IS_TOUCH_ENV ? handleMouseEnter : undefined}\n        onMouseLeave={!IS_TOUCH_ENV ? handleMouseLeave : undefined}\n        onClose={closeMenu}\n      >\n        {chainDropdownItems!.map((item, index) => {\n          const fullItemClassName = buildClassName(\n            menuStyles.item,\n            index > 0 && menuStyles.separator,\n            styles.menuItem,\n          );\n\n          return (\n            <div key={item.value} className={fullItemClassName}>\n              {chainDropdownItems!.length > 1 && (\n                <img src={item.icon} alt=\"\" className={buildClassName('icon', menuStyles.itemIcon, styles.menuIcon)} />\n              )}\n              <span className={buildClassName(menuStyles.itemName, styles.menuItemName)}>\n                {item.domain && (\n                  <>\n                    <span\n                      tabIndex={0}\n                      role=\"button\"\n                      className={styles.domainText}\n                      onClick={(e) => handleDomainClick(e, item.domain!)}\n                    >\n                      {item.domain}\n                    </span>\n                    <span className={styles.separator}></span>\n                  </>\n                )}\n                <span\n                  tabIndex={0}\n                  role=\"button\"\n                  onClick={(e) => handleItemClick(e, item.value)}\n                  className={item.domain && styles.addressText}\n                >\n                  {item.address}\n                </span>\n                <i\n                  className={buildClassName(`icon icon-${item.fontIcon}`, menuStyles.fontIcon, styles.menuFontIcon)}\n                  aria-hidden\n                  onClick={(e) => handleItemClick(e, item.value)}\n                />\n              </span>\n              <i\n                tabIndex={0}\n                role=\"button\"\n                className={buildClassName(menuStyles.close, 'icon icon-tonexplorer-small', styles.menuExplorerIcon)}\n                aria-label={item.label}\n                onClick={(e) => handleExplorerClick(e, item.chain, item.value)}\n              />\n            </div>\n          );\n        })}\n      </Menu>\n    );\n  }\n\n  if (chainDropdownItems) {\n    const chain = chains[0];\n    const domain = domainByChain?.[chain];\n    const buttonText = chains.length === 1 && domain ? domain : lang('Multichain');\n\n    return (\n      <div ref={ref} className={styles.addressContainer}>\n        {isViewAccount && (\n          <span className={styles.addressLabel}>\n            <i className={buildClassName(styles.icon, 'icon-eye-filled')} aria-hidden />\n            {lang('$view_mode')}\n          </span>\n        )}\n        {isHardwareAccount && <i className={buildClassName(styles.icon, 'icon-ledger')} aria-hidden />}\n        <button\n          type=\"button\"\n          className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n          onMouseEnter={!IS_TOUCH_ENV ? handleMouseEnter : undefined}\n          onMouseLeave={!IS_TOUCH_ENV ? handleMouseLeave : undefined}\n          onClick={openMenu}\n        >\n          {chains.length > 1\n            ? <img src={multichainIconSrc} alt=\"\" className={styles.multichainIcon} />\n            : <img src={getChainNetworkIcon(chain)} alt=\"\" className={styles.chainIcon} />}\n\n          <span className={buildClassName(styles.itemName, 'itemName')}>\n            {buttonText}\n          </span>\n          <i className={buildClassName(styles.iconCaretSmall, 'icon-caret-down')} aria-hidden />\n        </button>\n        {renderAddressMenu()}\n      </div>\n    );\n  }\n\n  const chain = chains[0];\n  if (!chain) return undefined;\n\n  const address = addressByChain![chain]!;\n  const domain = domainByChain?.[chain];\n  const displayText = domain || shortenAddress(address);\n\n  return (\n    <div className={styles.addressContainer}>\n      {isViewAccount && (\n        <span className={styles.addressLabel}>\n          <i className={buildClassName(styles.icon, 'icon-eye-filled')} aria-hidden />\n          {lang('$view_mode')}\n        </span>\n      )}\n      {isHardwareAccount && <i className={buildClassName(styles.icon, 'icon-ledger')} aria-hidden />}\n      <button\n        type=\"button\"\n        className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n        aria-label={lang('Copy wallet address')}\n        onClick={() => handleCopyAddress(address)}\n      >\n        <img src={getChainNetworkIcon(chain)} alt=\"\" className={styles.chainIcon} />\n        {displayText}\n        <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n      </button>\n      <a\n        href={getExplorerAddressUrl(chain, address, isTestnet)}\n        className={styles.explorerButton}\n        title={explorerTitle}\n        aria-label={explorerTitle}\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n        onClick={handleUrlClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { type: accountType, addressByChain, domainByChain } = selectAccount(global, global.currentAccountId!) || {};\n\n  return {\n    addressByChain,\n    domainByChain,\n    isTestnet: global.settings.isTestnet,\n    accountType,\n  };\n})(CardAddress));\n","import type { ElementRef } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency } from '../../../../api/types';\nimport type { Layout } from '../../../../hooks/useMenuPosition';\nimport type { IAnchorPosition } from '../../../../types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\n\nimport { CURRENCIES } from '../../../../config';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\ninterface OwnProps {\n  isOpen: boolean;\n  excludedCurrency?: string;\n  menuPositionX?: 'right' | 'left';\n  triggerRef: ElementRef;\n  anchor: IAnchorPosition | undefined;\n  className?: string;\n  onClose: NoneToVoidFunction;\n  onChange?: (currency: ApiBaseCurrency) => void;\n}\n\ninterface StateProps {\n  currentCurrency?: ApiBaseCurrency;\n}\n\nfunction CurrencySwitcherMenu({\n  isOpen,\n  triggerRef,\n  anchor,\n  currentCurrency,\n  excludedCurrency,\n  menuPositionX,\n  className,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { changeBaseCurrency } = getActions();\n\n  const menuRef = useRef<HTMLDivElement>();\n\n  const currencyList = useMemo<DropdownItem<ApiBaseCurrency>[]>(\n    () => Object.entries(CURRENCIES)\n      .filter(([currency]) => currency !== excludedCurrency)\n      .map(([currency, { name }]) => ({ value: currency as keyof typeof CURRENCIES, name })),\n    [excludedCurrency],\n  );\n\n  const handleBaseCurrencyChange = useLastCallback((currency: string) => {\n    onClose();\n\n    if (currency === currentCurrency) return;\n\n    changeBaseCurrency({ currency: currency as ApiBaseCurrency });\n    onChange?.(currency as ApiBaseCurrency);\n  });\n\n  const getTriggerElement = useLastCallback(() => triggerRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({\n    withPortal: true,\n    centerHorizontally: !menuPositionX,\n    preferredPositionX: menuPositionX || 'left' as const,\n    doNotCoverTrigger: true,\n  }));\n\n  return (\n    <DropdownMenu\n      withPortal\n      ref={menuRef}\n      isOpen={isOpen}\n      items={currencyList}\n      shouldTranslateOptions\n      selectedValue={currentCurrency}\n      menuPositionX={menuPositionX}\n      menuAnchor={anchor}\n      getTriggerElement={getTriggerElement}\n      getRootElement={getRootElement}\n      getMenuElement={getMenuElement}\n      getLayout={getLayout}\n      className={className}\n      onClose={onClose}\n      onSelect={handleBaseCurrencyChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    currentCurrency: global.settings.baseCurrency,\n  };\n})(CurrencySwitcherMenu));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UUXTSSNb\",\"sticky\":\"GydVN6zu\",\"image\":\"GnuUYTcY\",\"borderShine_down\":\"eZtdmQCz\",\"borderShineDown\":\"eZtdmQCz\",\"borderShine_left\":\"u_5j0LEw\",\"borderShineLeft\":\"u_5j0LEw\",\"borderShine_up\":\"DBu8v2wg\",\"borderShineUp\":\"DBu8v2wg\",\"borderShine_right\":\"iOyJF5OB\",\"borderShineRight\":\"iOyJF5OB\",\"borderShine_radioactive\":\"omctwMWw\",\"borderShineRadioactive\":\"omctwMWw\",\"shadow\":\"rm7OVuVh\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCardNftImageUrl } from '../../../../util/url';\n\nimport { useCachedImage } from '../../../../hooks/useCachedImage';\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useFlag from '../../../../hooks/useFlag';\nimport useMediaTransition from '../../../../hooks/useMediaTransition';\n\nimport styles from './CustomCardBackground.module.scss';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft: ApiNft;\n  noShowAnimation?: boolean;\n  shouldHide?: boolean;\n  onLoad?: (hasGradient: boolean, className?: string) => void;\n  onTransitionEnd: NoneToVoidFunction;\n}\n\nfunction CustomCardBackground({\n  isSticky,\n  nft,\n  noShowAnimation,\n  shouldHide,\n  onLoad,\n  onTransitionEnd,\n}: OwnProps) {\n  const { imageUrl } = useCachedImage(nft ? getCardNftImageUrl(nft) : undefined);\n  const [isLoaded, markLoaded] = useFlag();\n  const ref = useMediaTransition(noShowAnimation || (isLoaded && !shouldHide));\n\n  const {\n    borderShineType,\n    withTextGradient,\n    classNames: cardClassName,\n  } = useCardCustomization(nft);\n\n  function handleLoad() {\n    markLoaded();\n\n    onLoad?.(withTextGradient, cardClassName);\n  }\n\n  const rootClassName = buildClassName(\n    styles.root,\n    isSticky && styles.sticky,\n    cardClassName,\n    borderShineType && styles[`borderShine_${borderShineType}`],\n    isLoaded && !shouldHide && styles.loaded,\n    shouldHide && styles.hide,\n  );\n\n  const withShadow = nft.metadata?.mtwCardType === 'standard';\n\n  return (\n    <div ref={ref} className={rootClassName} onTransitionEnd={onTransitionEnd}>\n      {imageUrl && (\n        <img\n          src={imageUrl}\n          alt={nft.name}\n          className={styles.image}\n          onLoad={handleLoad}\n        />\n      )}\n      {withShadow && <div className={styles.shadow} />}\n    </div>\n  );\n}\n\nexport default memo(CustomCardBackground);\n","import React, { memo, useRef } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffectWithPrevDeps from '../../../../hooks/useSyncEffectWithPrevDeps';\n\nimport CustomCardBackground from './CustomCardBackground';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft?: ApiNft;\n  onCardChange: (hasGradient: boolean, className?: string) => void;\n}\n\nfunction CustomCardManager({ isSticky, nft, onCardChange }: OwnProps) {\n  const prevNftRef = useRef<ApiNft | undefined>(undefined);\n  const forceUpdate = useForceUpdate();\n\n  useSyncEffectWithPrevDeps(([prevNft, prevNftAddress]) => {\n    if (nft?.address !== prevNftAddress) {\n      prevNftRef.current = prevNft;\n    }\n\n    if (!nft) {\n      onCardChange(false, undefined);\n    }\n  }, [nft, nft?.address]);\n\n  const prevNft = prevNftRef.current;\n\n  const isMountRef = useRef(true);\n  const noShowAnimation = nft && isMountRef.current;\n  isMountRef.current = false;\n\n  const handleTransitionEnd = useLastCallback(() => {\n    prevNftRef.current = undefined;\n    forceUpdate();\n  });\n\n  return (\n    <div teactFastList>\n      {prevNft && (\n        <CustomCardBackground\n          key={prevNft.address}\n          isSticky={isSticky}\n          nft={prevNft}\n          shouldHide={!nft}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n      {nft && (\n        <CustomCardBackground\n          key={nft.address}\n          isSticky={isSticky}\n          nft={nft}\n          noShowAnimation={noShowAnimation}\n          onLoad={onCardChange}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(CustomCardManager);\n","import type { UserToken } from '../../../global/types';\nimport type { RGBColor } from '../../../util/colors';\n\nimport {\n  STAKED_TON_SLUG, TON_USDT_SLUG, TONCOIN, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG, TRX,\n} from '../../../config';\nimport { deltaE, hex2rgb } from '../../../util/colors';\n\nconst TOKEN_CARD_COLORS: Record<string, RGBColor> = {\n  green: [80, 135, 51],\n  orange: [173, 84, 54],\n  pink: [154, 60, 144],\n  purple: [104, 48, 149],\n  red: [156, 52, 75],\n  sea: [43, 116, 123],\n  tegro: [3, 93, 229],\n  blue: [47, 108, 173],\n};\n\nexport const TOKEN_EXCEPTION_COLORS: Record<string, string> = {\n  [TONCOIN.slug]: 'blue',\n  [TRX.slug]: 'red',\n  [TON_USDT_SLUG]: 'sea',\n  [TRC20_USDT_MAINNET_SLUG]: 'sea',\n  [TRC20_USDT_TESTNET_SLUG]: 'sea',\n  [STAKED_TON_SLUG]: 'green',\n};\n\nconst DISTANCE_THRESHOLD = 35;\n\nexport function calculateTokenCardColor(token?: UserToken): string {\n  let closestColor = 'blue';\n  let smallestDistance = Infinity;\n\n  if (!token) return closestColor;\n\n  if (TOKEN_EXCEPTION_COLORS[token.slug]) {\n    return TOKEN_EXCEPTION_COLORS[token.slug];\n  }\n\n  if (!token.color) return closestColor;\n\n  const tokenRgbColor = hex2rgb(token.color);\n\n  Object.entries(TOKEN_CARD_COLORS).forEach(([colorName, colorValue]) => {\n    const distance = deltaE(tokenRgbColor, colorValue);\n    if (distance < smallestDistance) {\n      smallestDistance = distance;\n      closestColor = colorName;\n    }\n  });\n\n  if (smallestDistance > DISTANCE_THRESHOLD) {\n    return 'blue';\n  }\n\n  return closestColor;\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiHistoryList } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport {\n  disableTelegramMiniAppSwipeToClose,\n  enableTelegramMiniAppSwipeToClose,\n} from '../../util/telegram';\n\nimport useLang from '../../hooks/useLang';\n\nimport Transition from '../ui/Transition';\n\ninterface OwnProps {\n  width: number;\n  height: number;\n  prices: ApiHistoryList;\n  selectedIndex: number;\n  className?: string;\n  imgClassName?: string;\n  onSelectIndex: (index: number) => void;\n  isUpdating?: boolean;\n}\n\nconst IS_SMOOTH = true;\nconst PATH_SMOOTHING = 0.0001;\nconst MIN_CHART_HEIGHT = 0.000000001;\n\nfunction TokenPriceChart({\n  width,\n  height,\n  prices,\n  selectedIndex,\n  className,\n  imgClassName,\n  onSelectIndex,\n  isUpdating,\n}: OwnProps) {\n  const lang = useLang();\n\n  const boundingPoints = useMemo(() => {\n    const priceValues = prices.map(([, price]) => price);\n    const min = Math.min(...priceValues);\n    const max = Math.max(...priceValues);\n\n    return {\n      width: prices.length - 1,\n      height: Math.max(MIN_CHART_HEIGHT, max - min),\n      min,\n    };\n  }, [prices]);\n\n  const points = useMemo(() => {\n    const scaleX = width / boundingPoints.width;\n    const scaleY = height / boundingPoints.height;\n\n    return prices.map(([, y], i) => ({ x: i * scaleX + 3, y: (y - boundingPoints.min) * scaleY + 3 }));\n  }, [boundingPoints.height, boundingPoints.min, boundingPoints.width, height, width, prices]);\n\n  function getBasisPoint(i: number) {\n    const indexesCount = points.length - 1;\n    const index = i < 0 ? 0 : i > indexesCount ? indexesCount : i;\n    const point = points[index];\n    const ratio = 1 - PATH_SMOOTHING;\n    const tangent = index / indexesCount;\n    const firstPoint = points[0];\n    const distance = {\n      x: points[indexesCount].x - firstPoint.x,\n      y: points[indexesCount].y - firstPoint.y,\n    };\n\n    return {\n      x: ratio * point.x + (1 - ratio) * (firstPoint.x + tangent * distance.x),\n      y: ratio * point.y + (1 - ratio) * (firstPoint.y + tangent * distance.y),\n    };\n  }\n\n  function getCurvePath(i: number) {\n    const pCurrent = getBasisPoint(i);\n    const pMinus1 = getBasisPoint(i - 1);\n    const pMinus2 = getBasisPoint(i - 2);\n\n    const x1 = (2 * pMinus2.x + pMinus1.x) / 3;\n    const y1 = (2 * pMinus2.y + pMinus1.y) / 3;\n    const x2 = (pMinus2.x + 2 * pMinus1.x) / 3;\n    const y2 = (pMinus2.y + 2 * pMinus1.y) / 3;\n    const x3 = (pMinus2.x + 4 * pMinus1.x + pCurrent.x) / 6;\n    const y3 = (pMinus2.y + 4 * pMinus1.y + pCurrent.y) / 6;\n\n    return `C ${x1} ${y1} ${x2} ${y2} ${x3} ${y3}`;\n  }\n\n  function getLinePath(point: { x: number; y: number }) {\n    return `L ${point.x} ${point.y}`;\n  }\n\n  function getPath() {\n    let d = points.reduce((acc, point, i) => {\n      const partialPath = IS_SMOOTH\n        ? getCurvePath(i)\n        : getLinePath(point);\n      return i === 0\n        ? `M ${point.x} ${point.y} `\n        : `${acc} ${partialPath} `;\n    }, '');\n\n    if (IS_SMOOTH) {\n      d += getCurvePath(points.length);\n      d += getLinePath(points[points.length - 1]);\n    }\n\n    return d;\n  }\n\n  function renderSvg() {\n    const activePoint = points[selectedIndex] || points[points.length - 1];\n\n    const svg = `<svg viewBox=\"0 0 ${width + 6} ${height + 6}\" height=\"${height + 6}\" width=\"${width + 6}\"\n        xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: scale(1,-1)\">\n        <g fill=\"none\" stroke=\"white\">\n          <path stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"${getPath()}\" style=\"stroke-linecap: round\" />\n          <circle r=\"2.5\" fill=\"white\" cx=\"${activePoint.x}\" cy=\"${activePoint.y}\" />\n        </g>\n      </svg>`;\n\n    return `data:image/svg+xml;utf8,${(svg)}`;\n  }\n\n  function handleMouseMove(e: React.MouseEvent<HTMLDivElement> | React.TouchEvent<HTMLDivElement>) {\n    const { x: containerX, width: containerWidth } = e.currentTarget.getBoundingClientRect();\n    const { clientX } = 'touches' in e ? e.touches[0] : e;\n    const segmentHalfWidth = (containerWidth / points.length) / 2;\n    const x = clientX - containerX - segmentHalfWidth;\n    const nextIndex = Math.max(0, Math.min(Math.round(points.length * (x / containerWidth)), points.length - 1));\n\n    onSelectIndex(nextIndex);\n  }\n\n  function handleTouchStart(e: React.TouchEvent<HTMLDivElement>) {\n    handleMouseMove(e);\n\n    disableTelegramMiniAppSwipeToClose();\n  }\n\n  function handleMouseLeave() {\n    onSelectIndex(-1);\n\n    enableTelegramMiniAppSwipeToClose();\n  }\n\n  return (\n    <div\n      className={className}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      onTouchStart={handleTouchStart}\n      onTouchMove={handleMouseMove}\n      onTouchEnd={handleMouseLeave}\n      onTouchCancel={handleMouseLeave}\n    >\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"semiFade\" shouldCleanup>\n        <img\n          src={renderSvg()}\n          className={buildClassName(imgClassName, isUpdating && 'glare-image')}\n          alt={lang('Currency History')}\n        />\n      </Transition>\n    </div>\n  );\n}\n\nexport default memo(TokenPriceChart);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TokenPeriod } from '../../../../global/types';\n\nimport { HISTORY_PERIODS } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './ChartHistorySwitcher.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  onChange?: (period: TokenPeriod) => void;\n}\n\ninterface StateProps {\n  currentPeriod?: TokenPeriod;\n}\n\nconst ITEMS = HISTORY_PERIODS.map((key) => ({ value: key, name: key === 'ALL' ? 'All' : key }));\n\nfunction ChartHistorySwitcher({\n  isOpen,\n  currentPeriod,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { setCurrentTokenPeriod } = getActions();\n\n  const handlePeriodChange = useLastCallback((period: string) => {\n    onClose();\n\n    if (period === currentPeriod) return;\n\n    void vibrate();\n\n    setCurrentTokenPeriod({ period: period as TokenPeriod });\n    onChange?.(period as TokenPeriod);\n  });\n\n  return (\n    <DropdownMenu\n      isOpen={isOpen}\n      onClose={onClose}\n      items={ITEMS}\n      className={styles.menuWrapper}\n      bubbleClassName={styles.menu}\n      buttonClassName={styles.menuItem}\n      selectedValue={currentPeriod}\n      menuPositionX=\"right\"\n      onSelect={handlePeriodChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    currentPeriod: accountState?.currentTokenPeriod,\n  };\n})(ChartHistorySwitcher));\n","// extracted by mini-css-extract-plugin\nexport default {\"menuWrapper\":\"Lfs6oB99\",\"menu\":\"EJsuJXfx\",\"menuItem\":\"J7O_MmwF\"};","import type { ElementRef } from '../../../../lib/teact/teact';\nimport { useRef } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../../../api/types';\nimport type { IAnchorPosition, PriceHistoryPeriods, TokenPeriod, UserToken } from '../../../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, HISTORY_PERIODS, IS_CORE_WALLET } from '../../../../config';\nimport { selectAccountStakingStates, selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcBigChangeValue } from '../../../../util/calcChangeValue';\nimport { formatShortDay, SECOND } from '../../../../util/dateFormat';\nimport { toBig, toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { vibrate } from '../../../../util/haptics';\nimport { handleUrlClick } from '../../../../util/openUrl';\nimport { round } from '../../../../util/round';\nimport { getExplorerName, getExplorerTokenUrl } from '../../../../util/url';\nimport { IS_IOS } from '../../../../util/windowEnvironment';\nimport { calculateTokenCardColor } from '../../helpers/cardColors';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useInterval from '../../../../hooks/useInterval';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\nimport useTimeout from '../../../../hooks/useTimeout';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport TokenPriceChart from '../../../common/TokenPriceChart';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport ChartHistorySwitcher from './ChartHistorySwitcher';\nimport CurrencySwitcherMenu from './CurrencySwitcherMenu';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLDivElement>;\n  token: UserToken;\n  classNames?: string;\n  isUpdating?: boolean;\n  onYieldClick?: (stakingId?: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  period?: TokenPeriod;\n  baseCurrency?: ApiBaseCurrency;\n  historyPeriods?: PriceHistoryPeriods;\n  tokenAddress?: string;\n  isTestnet?: boolean;\n  stakingStates?: ApiStakingState[];\n  isSensitiveDataHidden?: true;\n}\n\nconst OFFLINE_TIMEOUT = 120000; // 2 minutes\n\nconst CHART_DIMENSIONS = { width: 300, height: 64 };\nconst INTERVAL = 5 * SECOND;\n\nconst DEFAULT_PERIOD = HISTORY_PERIODS[0];\n\nfunction TokenCard({\n  ref,\n  isTestnet,\n  token,\n  classNames,\n  period = DEFAULT_PERIOD,\n  isUpdating,\n  baseCurrency,\n  historyPeriods,\n  tokenAddress,\n  stakingStates,\n  isSensitiveDataHidden,\n  onYieldClick,\n  onClose,\n}: OwnProps & StateProps) {\n  const { loadPriceHistory } = getActions();\n\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const amountRef = useRef<HTMLDivElement>();\n  const [currencyMenuAnchor, setCurrencyMenuAnchor] = useState<IAnchorPosition>();\n  const [isHistoryMenuOpen, openHistoryMenu, closeHistoryMenu] = useFlag(false);\n\n  const shouldUseDefaultCurrency = baseCurrency === undefined || baseCurrency === token.symbol;\n  const chartCurrency = shouldUseDefaultCurrency ? DEFAULT_PRICE_CURRENCY : baseCurrency;\n\n  const currencySymbol = getShortCurrencySymbol(chartCurrency);\n\n  const [selectedHistoryIndex, setSelectedHistoryIndex] = useState(-1);\n\n  useSyncEffect(([prevHistoryIndex]) => {\n    if (!IS_IOS) return;\n\n    if (prevHistoryIndex !== undefined) {\n      void vibrate();\n    }\n  }, [selectedHistoryIndex]);\n\n  const {\n    slug, symbol, amount, name, price: lastPrice, decimals,\n  } = token;\n\n  const { annualYield, yieldType, id: stakingId } = useMemo(() => {\n    if (IS_CORE_WALLET) return undefined;\n\n    return stakingStates?.reduce((bestState, state) => {\n      if (state.tokenSlug === slug && (!bestState || state.balance > bestState.balance)) {\n        return state;\n      }\n      return bestState;\n    }, undefined as ApiStakingState | undefined);\n  }, [stakingStates, slug]) ?? {};\n\n  const refreshHistory = useLastCallback((newPeriod?: TokenPeriod) => {\n    loadPriceHistory({ slug, period: newPeriod ?? period });\n  });\n\n  const handleCurrencyChange = useLastCallback((currency: ApiBaseCurrency) => {\n    loadPriceHistory({ slug, period, currency });\n  });\n\n  const openCurrencyMenu = () => {\n    const { left, width, bottom: y } = amountRef.current!.getBoundingClientRect();\n    setCurrencyMenuAnchor({ x: left + width, y });\n  };\n\n  const closeCurrencyMenu = useLastCallback(() => {\n    setCurrencyMenuAnchor(undefined);\n  });\n\n  useInterval(refreshHistory, INTERVAL);\n\n  const history = historyPeriods?.[period];\n\n  const tokenLastUpdatedAt = history?.length ? history[history.length - 1][0] * 1000 : undefined;\n  const tokenLastHistoryPrice = history?.length ? history[history.length - 1][1] : lastPrice;\n  const selectedHistoryPoint = history?.[selectedHistoryIndex];\n  const price = selectedHistoryPoint?.[1]\n    ?? (shouldUseDefaultCurrency ? tokenLastHistoryPrice : undefined)\n    ?? lastPrice;\n  // To prevent flickering with spoiler\n  const tokenChangePrice = isSensitiveDataHidden ? lastPrice : price;\n  const isLoading = !tokenLastUpdatedAt || (Date.now() - tokenLastUpdatedAt > OFFLINE_TIMEOUT);\n  const dateStr = selectedHistoryPoint\n    ? formatShortDay(lang.code!, selectedHistoryPoint[0] * 1000, true, true)\n    : (isLoading && tokenLastUpdatedAt ? formatShortDay(lang.code!, tokenLastUpdatedAt, true, false) : lang('Now'));\n\n  useTimeout(forceUpdate, isLoading ? undefined : OFFLINE_TIMEOUT, [tokenLastUpdatedAt]);\n\n  const initialPrice = useMemo(() => {\n    return history?.find(([, value]) => Boolean(value))?.[1];\n  }, [history]);\n\n  const valueBig = toBig(amount, decimals).mul(price);\n  const value = valueBig.toString();\n  const change = initialPrice && price ? price - initialPrice : 0;\n  const changeFactor = initialPrice && tokenChangePrice ? tokenChangePrice / initialPrice - 1 : 0;\n  const amountChange = initialPrice && tokenChangePrice ? calcBigChangeValue(valueBig, changeFactor).toNumber() : 0;\n  const changePrefix = change === undefined ? change : change > 0 ? '' : change < 0 ? '' : 0;\n\n  const changeValue = amountChange ? Math.abs(round(amountChange, 4)) : 0;\n  const changePercent = change ? Math.abs(round((change / initialPrice!) * 100, 2)) : 0;\n\n  const withChange = Boolean(change !== undefined);\n  const historyStartDay = history?.length ? new Date(history[0][0] * 1000) : undefined;\n  const withExplorerButton = Boolean(token.cmcSlug || tokenAddress);\n  const shouldHideChartPeriodSwitcher = !history?.length && token.priceUsd === 0;\n\n  const color = useMemo(() => calculateTokenCardColor(token), [token]);\n\n  function renderExplorerLink() {\n    const url = getExplorerTokenUrl(token.chain, token.cmcSlug, tokenAddress, isTestnet);\n    if (!url) return undefined;\n\n    const title = (lang(\n      'Open on %ton_explorer_name%',\n      { ton_explorer_name: getExplorerName(token.chain) },\n    ) as string[]).join('');\n\n    return (\n      <>\n        {'  '}\n        <a\n          href={url}\n          title={title}\n          aria-label={title}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className={styles.tokenExplorerButton}\n          onClick={handleUrlClick}\n        >\n          <i className=\"icon-tonexplorer-small\" aria-hidden />\n        </a>\n      </>\n    );\n  }\n\n  return (\n    <div ref={ref} className={buildClassName(styles.container, styles.tokenCard, classNames, color, 'token-card')}>\n      <div className={styles.tokenInfo}>\n        <Button className={styles.backButton} isSimple onClick={onClose} ariaLabel={lang('Back')}>\n          <i className=\"icon-chevron-left\" aria-hidden />\n        </Button>\n        <TokenIcon\n          token={token}\n          size=\"x-large\"\n          className={styles.tokenLogo}\n        />\n        <div className={styles.tokenInfoHeader} ref={amountRef}>\n          <b className={styles.tokenAmount}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              maskSkin=\"cardLightText\"\n              cols={10}\n              rows={2}\n              cellSize={8}\n            >\n              {formatCurrency(toDecimal(amount, token.decimals), symbol)}\n            </SensitiveData>\n          </b>\n          {withChange && (\n            <div className={styles.tokenValue}>\n              <SensitiveData\n                isActive={isSensitiveDataHidden}\n                maskSkin=\"cardLightText\"\n                align=\"right\"\n                cols={10}\n                rows={2}\n                cellSize={8}\n              >\n                <div className={styles.currencySwitcher} role=\"button\" tabIndex={0} onClick={openCurrencyMenu}>\n                  &thinsp;{formatCurrency(value, currencySymbol, undefined, true)}\n                  <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n                </div>\n                <CurrencySwitcherMenu\n                  isOpen={Boolean(currencyMenuAnchor)}\n                  triggerRef={amountRef}\n                  anchor={currencyMenuAnchor}\n                  menuPositionX=\"right\"\n                  excludedCurrency={token.symbol}\n                  onClose={closeCurrencyMenu}\n                  onChange={handleCurrencyChange}\n                />\n              </SensitiveData>\n            </div>\n          )}\n        </div>\n        <div className={styles.tokenInfoSubheader}>\n          <span className={styles.tokenTitle}>\n            <span className={styles.tokenName}>{name}</span>\n            {yieldType && (\n              <span\n                className={buildClassName(styles.apy, onYieldClick && styles.interactive)}\n                onClick={onYieldClick ? () => onYieldClick(stakingId) : undefined}\n              >\n                {yieldType} {round(annualYield ?? 0, 2)}%\n              </span>\n            )}\n          </span>\n          {withChange && Boolean(changeValue) && (\n            <div className={styles.tokenChange}>\n              {changePrefix}&thinsp;\n              {Math.abs(changePercent)}% \n              <SensitiveData\n                isActive={isSensitiveDataHidden}\n                align=\"right\"\n                maskSkin=\"cardLightText\"\n                cols={6}\n                rows={2}\n                cellSize={8}\n                className={styles.tokenChangeSensitiveData}\n                maskClassName={styles.tokenChangeSpoiler}\n              >\n                {formatCurrency(Math.abs(changeValue), currencySymbol)}\n              </SensitiveData>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <Transition activeKey={!history ? 0 : history.length ? HISTORY_PERIODS.indexOf(period) + 1 : -1} name=\"fade\">\n        {!history ? (\n          <div className={buildClassName(styles.isLoading)}>\n            <Spinner color=\"white\" className={styles.center} />\n          </div>\n        ) : history?.length ? (\n          <>\n            <TokenPriceChart\n              className={styles.chart}\n              imgClassName={styles.chartImg}\n              width={CHART_DIMENSIONS.width}\n              height={CHART_DIMENSIONS.height}\n              prices={history}\n              selectedIndex={selectedHistoryIndex}\n              onSelectIndex={setSelectedHistoryIndex}\n              isUpdating={isUpdating}\n            />\n\n            <div className={styles.tokenHistoryPrice}>\n              {formatCurrency(history[0][1], currencySymbol, 2, true)}\n              <div className={styles.tokenPriceDate}>{formatShortDay(lang.code!, historyStartDay!)}</div>\n            </div>\n          </>\n        ) : undefined}\n      </Transition>\n\n      <span\n        className={buildClassName(styles.periodChooser, shouldHideChartPeriodSwitcher && styles.periodChooserHidden)}\n        role=\"button\"\n        tabIndex={0}\n        onClick={openHistoryMenu}\n      >\n        {period === 'ALL' ? 'All' : period}\n        <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n        <ChartHistorySwitcher\n          isOpen={isHistoryMenuOpen}\n          onChange={refreshHistory}\n          onClose={closeHistoryMenu}\n        />\n      </span>\n\n      <div className={styles.tokenCurrentPrice}>\n        {formatCurrency(price, currencySymbol, selectedHistoryIndex === -1 ? 2 : 4, true)}\n        <div className={styles.tokenPriceDate}>\n          {dateStr}\n          {withExplorerButton && renderExplorerLink()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global, ownProps): StateProps => {\n    const slug = ownProps.token.slug;\n    const accountState = selectCurrentAccountState(global);\n    const tokenAddress = global.tokenInfo.bySlug[slug]?.tokenAddress;\n    const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n\n    return {\n      isTestnet: global.settings.isTestnet,\n      period: accountState?.currentTokenPeriod,\n      baseCurrency: global.settings.baseCurrency,\n      historyPeriods: global.tokenPriceHistory.bySlug[ownProps.token.slug],\n      tokenAddress,\n      stakingStates,\n      isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n    };\n  })(TokenCard),\n);\n","import React, {\n  type ElementRef,\n  memo, useEffect, useLayoutEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { IAnchorPosition, UserToken } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { IS_IOS, IS_SAFARI } from '../../../../util/windowEnvironment';\nimport { calculateFullBalance } from './helpers/calculateFullBalance';\nimport getSensitiveDataMaskSkinFromCardNft from './helpers/getSensitiveDataMaskSkinFromCardNft';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useFontScale from '../../../../hooks/useFontScale';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\nimport useWindowSize from '../../../../hooks/useWindowSize';\n\nimport MintCardButton from '../../../mintCard/MintCardButton';\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport CardAddress from './CardAddress';\nimport CurrencySwitcherMenu from './CurrencySwitcherMenu';\nimport CustomCardManager from './CustomCardManager';\nimport TokenCard from './TokenCard';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLDivElement>;\n  onTokenCardClose: NoneToVoidFunction;\n  onYieldClick: (stakingId?: string) => void;\n}\n\ninterface StateProps {\n  tokens?: UserToken[];\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  cardNft?: ApiNft;\n  isSensitiveDataHidden?: true;\n  isNftBuyingDisabled: boolean;\n  isViewMode: boolean;\n}\n\nfunction Card({\n  ref,\n  tokens,\n  currentTokenSlug,\n  onTokenCardClose,\n  onYieldClick,\n  baseCurrency,\n  stakingStates,\n  isSensitiveDataHidden,\n  isNftBuyingDisabled,\n  cardNft,\n  isViewMode,\n}: OwnProps & StateProps) {\n  const amountRef = useRef<HTMLDivElement>();\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const [customCardClassName, setCustomCardClassName] = useState<string | undefined>(undefined);\n  const [withTextGradient, setWithTextGradient] = useState<boolean>(false);\n\n  const { isPortrait } = useDeviceScreen();\n  const { width: screenWidth } = useWindowSize();\n  const isUpdating = useUpdateIndicator('balanceUpdateStartedAt');\n  const { updateFontScale } = useFontScale(amountRef);\n  // Screen width affects font size only in portrait orientation\n  const screenWidthDep = isPortrait ? screenWidth : 0;\n\n  const [currencyMenuAnchor, setCurrencyMenuAnchor] = useState<IAnchorPosition>();\n  const currentToken = useMemo(() => {\n    return tokens ? tokens.find((token) => token.slug === currentTokenSlug) : undefined;\n  }, [currentTokenSlug, tokens]);\n  const renderedToken = useCurrentOrPrev(currentToken, true);\n  const {\n    shouldRender: shouldRenderTokenCard,\n    ref: tokenCardRef,\n  } = useShowTransition({\n    isOpen: Boolean(currentTokenSlug),\n    noMountTransition: true,\n    withShouldRender: true,\n  });\n  const sensitiveDataMaskSkin = getSensitiveDataMaskSkinFromCardNft(cardNft);\n\n  const openCurrencyMenu = () => {\n    const { left, width, bottom: y } = amountRef.current!.getBoundingClientRect();\n    setCurrencyMenuAnchor({ x: left + width / 2, y });\n  };\n\n  const closeCurrencyMenu = useLastCallback(() => {\n    setCurrencyMenuAnchor(undefined);\n  });\n\n  const handleCardChange = useLastCallback((hasGradient: boolean, className?: string) => {\n    setCustomCardClassName(className);\n    setWithTextGradient(hasGradient);\n  });\n\n  const values = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n\n  useHistoryBack({\n    isActive: Boolean(currentTokenSlug),\n    onBack: onTokenCardClose,\n  });\n\n  useEffect(\n    () => (shouldRenderTokenCard ? captureEscKeyListener(onTokenCardClose) : undefined),\n    [shouldRenderTokenCard, onTokenCardClose],\n  );\n\n  const {\n    primaryValue, primaryWholePart, primaryFractionPart, changePrefix, changePercent, changeValue,\n  } = values || {};\n\n  useLayoutEffect(() => {\n    if (primaryValue !== undefined) {\n      updateFontScale();\n    }\n  }, [primaryFractionPart, primaryValue, primaryWholePart, shortBaseSymbol, updateFontScale, screenWidthDep]);\n\n  function renderLoader() {\n    return (\n      <div className={buildClassName(styles.isLoading)}>\n        <Spinner color=\"white\" className={styles.center} />\n      </div>\n    );\n  }\n\n  function renderBalance() {\n    const iconCaretClassNames = buildClassName(\n      'icon',\n      'icon-caret-down',\n      primaryFractionPart || shortBaseSymbol.length > 1 ? styles.iconCaretFraction : styles.iconCaret,\n    );\n    const noAnimationCounter = !isUpdating || IS_SAFARI || IS_IOS;\n    return (\n      <>\n        <Transition\n          ref={amountRef}\n          activeKey={isUpdating && !isSensitiveDataHidden ? 1 : 0}\n          name=\"fade\"\n          shouldCleanup\n          className={styles.balanceTransition}\n          slideClassName={styles.balanceSlide}\n        >\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            maskSkin={sensitiveDataMaskSkin}\n            rows={4}\n            cols={14}\n            cellSize={13}\n            align=\"center\"\n            maskClassName={styles.blurred}\n          >\n            <div className={buildClassName(styles.primaryValue, 'rounded-font')}>\n              <span\n                className={buildClassName(\n                  styles.currencySwitcher,\n                  isUpdating && 'glare-text',\n                  !isUpdating && withTextGradient && 'gradientText',\n                )}\n                role=\"button\"\n                tabIndex={0}\n                onClick={!isSensitiveDataHidden ? openCurrencyMenu : undefined}\n              >\n                {shortBaseSymbol.length === 1 && <span className={styles.currencySymbol}>{shortBaseSymbol}</span>}\n                <AnimatedCounter isDisabled={noAnimationCounter} text={primaryWholePart ?? ''} />\n                {primaryFractionPart && (\n                  <span className={styles.primaryFractionPart}>\n                    <AnimatedCounter isDisabled={noAnimationCounter} text={`.${primaryFractionPart}`} />\n                  </span>\n                )}\n                {shortBaseSymbol.length > 1 && (\n                  <span className={styles.primaryFractionPart}>&nbsp;{shortBaseSymbol}</span>\n                )}\n                <i className={iconCaretClassNames} aria-hidden />\n              </span>\n            </div>\n          </SensitiveData>\n        </Transition>\n        <CurrencySwitcherMenu\n          isOpen={Boolean(currencyMenuAnchor)}\n          triggerRef={amountRef}\n          anchor={currencyMenuAnchor}\n          className={styles.currencySwitcherMenu}\n          onClose={closeCurrencyMenu}\n        />\n        {primaryValue !== '0' && (\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            maskSkin={sensitiveDataMaskSkin}\n            rows={2}\n            cols={11}\n            align=\"center\"\n            cellSize={14}\n            className={styles.changeSpoiler}\n            maskClassName={styles.blurred}\n          >\n            <div className={buildClassName(styles.change, 'rounded-font')}>\n              {!!changePrefix && (\n                <>\n                  <i\n                    className={buildClassName(\n                      styles.changePrefix,\n                      changePrefix === 'up' ? 'icon-arrow-up' : 'icon-arrow-down',\n                    )}\n                    aria-hidden\n                  />\n                  <AnimatedCounter text={`${Math.abs(changePercent!)}%`} />\n                  {'  '}\n                </>\n              )}\n              <AnimatedCounter text={formatCurrency(Math.abs(changeValue!), shortBaseSymbol)} />\n            </div>\n          </SensitiveData>\n        )}\n      </>\n    );\n  }\n\n  return (\n    <div ref={ref} className={styles.containerWrapper}>\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"fade\" shouldCleanup className={styles.loadingDotsContainer}>\n        {isUpdating ? <LoadingDots isActive isDoubled /> : undefined}\n      </Transition>\n\n      <div className={buildClassName(styles.container, currentTokenSlug && styles.backstage, customCardClassName)}>\n        <CustomCardManager nft={cardNft} onCardChange={handleCardChange} />\n\n        <div className={buildClassName(styles.containerInner, customCardClassName)}>\n          {values ? renderBalance() : renderLoader()}\n          <CardAddress withTextGradient={withTextGradient} />\n          {!IS_CORE_WALLET && !isNftBuyingDisabled && !isViewMode && <MintCardButton />}\n        </div>\n      </div>\n\n      {shouldRenderTokenCard && (\n        <TokenCard\n          token={renderedToken!}\n          ref={tokenCardRef}\n          isUpdating={isUpdating}\n          onYieldClick={isViewMode ? undefined : onYieldClick}\n          onClose={onTokenCardClose}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectCurrentAccountState(global);\n      const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n      const { cardBackgroundNft: cardNft } = selectCurrentAccountSettings(global) || {};\n\n      return {\n        isViewMode: selectIsCurrentAccountViewMode(global),\n        tokens: selectCurrentAccountTokens(global),\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        stakingStates,\n        cardNft,\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        isNftBuyingDisabled: global.restrictions.isNftBuyingDisabled,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Card),\n);\n","import type { ApiNft } from '../../../../../api/types';\nimport type { SensitiveDataMaskSkin } from '../../../../common/SensitiveDataMask';\n\nexport default function getSensitiveDataMaskSkinFromCardNft(cardNft?: ApiNft): SensitiveDataMaskSkin {\n  const { mtwCardType, mtwCardTextType } = cardNft?.metadata || {};\n\n  return mtwCardType === 'gold'\n    ? 'cardGoldText'\n    : mtwCardType === 'silver' || mtwCardTextType === 'dark'\n      ? 'cardDarkText'\n      : 'cardLightText';\n}\n","import { ACTIVE_SLIDE_CLASS_NAME } from '../../ui/Transition';\n\n/** Finds the appropriate scrollable container */\nexport function getScrollableContainer(\n  element: HTMLElement | null | undefined,\n  isPortrait?: boolean,\n) {\n  // eslint-disable-next-line no-null/no-null\n  if (!element) return null;\n  const selector = getScrollableContainerSelector(isPortrait);\n\n  if (isPortrait) {\n    return element.closest(selector);\n  } else {\n    return element.matches(selector)\n      ? element\n      : element.querySelector(selector);\n  }\n}\n\n// In portrait mode, find the parent `.app-slide-content` container, which contains the all app scrollable content\nfunction getScrollableContainerSelector(isPortrait?: boolean) {\n  return isPortrait ? '.app-slide-content' : `.custom-scroll.${ACTIVE_SLIDE_CLASS_NAME}`;\n}\n\nexport function getScrollContainerClosestSelector(isActive?: boolean, isPortrait?: boolean) {\n  return !isActive || !isPortrait ? undefined : '.app-slide-content';\n}\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n}\n\nfunction HideNftModal({\n  isOpen,\n  selectedNftsToHide,\n}: OwnProps) {\n  const {\n    addNftsToBlacklist,\n    closeNftCollection,\n    closeHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleHide = useLastCallback(() => {\n    addNftsToBlacklist({\n      addresses: selectedNftsToHide!.addresses,\n    });\n    if (selectedNftsToHide?.isCollection) closeNftCollection();\n    closeHideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeHideNftModal}\n      title={lang('Hide NFTs')}\n    >\n      <p className={modalStyles.text}>\n        {\n          selectedNftsToHide?.isCollection\n            ? lang(\n              'Are you sure you want to hide this NFT collection containing %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n            : lang(\n              'Are you sure you want to hide these %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n        }\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeHideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleHide} className={modalStyles.button}>\n          {lang('Hide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(HideNftModal);\n","import { useRef } from '../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../global/types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\nimport useForceUpdate from './useForceUpdate';\nimport useLastCallback from './useLastCallback';\nimport usePrevious from './usePrevious';\nimport usePrevious2 from './usePrevious2';\nimport useSyncEffect from './useSyncEffect';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype ResetScroll = () => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n  slug?: string,\n  isActive?: boolean,\n  withResetOnInactive = false,\n): [ListId[]?, GetMore?, ResetScroll?] => {\n  const currentStateRef = useRef<{ viewportIds: ListId[]; isOnTop: boolean } | undefined>();\n  if (!currentStateRef.current && listIds && !isDisabled) {\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n  }\n\n  const forceUpdate = useForceUpdate();\n\n  const prevSlug = usePrevious2(slug);\n\n  const resetScroll: ResetScroll = useLastCallback(() => {\n    if (!listIds?.length) return;\n\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n  });\n\n  useSyncEffect(() => {\n    if (slug !== prevSlug || (withResetOnInactive && !isActive)) {\n      resetScroll();\n    }\n  }, [isActive, prevSlug, slug, withResetOnInactive]);\n\n  const prevListIds = usePrevious(listIds);\n  const prevIsDisabled = usePrevious(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { viewportIds: oldViewportIds, isOnTop: oldIsOnTop } = currentStateRef.current ?? {};\n    const { newViewportIds, newIsOnTop } = getViewportSliceAfterListChange(\n      listIds,\n      oldViewportIds,\n      oldIsOnTop,\n      listSlice,\n    );\n\n    if (!oldViewportIds || !areSortedArraysEqual(oldViewportIds, newViewportIds)) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n    }\n  } else if (!listIds) {\n    currentStateRef.current = undefined;\n  }\n\n  const getMore: GetMore = useLastCallback(({\n    direction,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    if (!isActive) return;\n\n    const { viewportIds } = currentStateRef.current || {};\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal, newIsOnTop,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      loadMoreBackwards({ offsetId });\n    }\n  });\n\n  return isDisabled ? [listIds] : [currentStateRef.current?.viewportIds, getMore, resetScroll];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection >= 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return {\n    newViewportIds,\n    areSomeLocal,\n    areAllLocal,\n    newIsOnTop: newViewportIds[0] === sourceIds[0],\n  };\n}\n\nfunction getViewportSliceAfterListChange<ListId extends string | number>(\n  newListIds: ListId[],\n  oldViewportIds: ListId[] | undefined,\n  oldIsOnTop: boolean | undefined,\n  sliceLength: number,\n) {\n  if (oldIsOnTop) {\n    // When the offsetId is on the top, the viewport slice must include at least as many items as it already has.\n    // Otherwise, the ids, that the user is seeing, can disappear (that causes the list to scroll higher instantly).\n    // Subtracting 1 prevents getViewportSlice from expanding the viewport slice 1 item with each newListIds change.\n    sliceLength = Math.max(sliceLength, (oldViewportIds?.length ?? 0) - 1);\n    return getViewportSlice(newListIds, LoadMoreDirection.Backwards, sliceLength, newListIds[0]);\n  }\n\n  let offsetId = oldViewportIds?.[Math.round(oldViewportIds.length / 2)];\n  if (offsetId && !newListIds.includes(offsetId)) offsetId = newListIds[0];\n  // The direction must be Forwards for getViewportSlice to keep the offsetId at the newViewportIds middle. Otherwise,\n  // the viewport slice will \"walk\" 1 item backward with each newListIds change.\n  return getViewportSlice(newListIds, LoadMoreDirection.Forwards, sliceLength, offsetId);\n}\n\nexport default useInfiniteScroll;\n","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import type { UIEvent } from 'react';\nimport type { ElementRef, FC, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../../global/types';\n\nimport { requestForcedReflow } from '../../lib/fasterdom/fasterdom';\nimport buildStyle from '../../util/buildStyle';\nimport { SECOND } from '../../util/dateFormat';\nimport resetScroll from '../../util/resetScroll';\nimport { debounce } from '../../util/schedulers';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLayoutEffectWithPrevDeps from '../../hooks/useLayoutEffectWithPrevDeps';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  style?: string;\n  className?: string;\n  items?: any[];\n  itemSelector?: string;\n  preloadBackwards?: number;\n  sensitiveArea?: number;\n  withAbsolutePositioning?: boolean;\n  /* A CSS value */\n  maxHeight?: string;\n  noScrollRestore?: boolean;\n  noScrollRestoreOnTop?: boolean;\n  noFastList?: boolean;\n  cacheBuster?: any;\n  beforeChildren?: TeactNode;\n  scrollContainerClosest?: string;\n  children: TeactNode;\n  onLoadMore?: ({ direction }: { direction: LoadMoreDirection }) => void;\n  onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n  onWheel?: (e: React.WheelEvent<HTMLDivElement>) => void;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  onKeyDown?: (e: React.KeyboardEvent<any>) => void;\n  onDragOver?: (e: React.DragEvent<HTMLDivElement>) => void;\n  onDragLeave?: (e: React.DragEvent<HTMLDivElement>) => void;\n};\n\nconst DEFAULT_LIST_SELECTOR = '.ListItem';\nconst DEFAULT_PRELOAD_BACKWARDS = 20;\nconst DEFAULT_SENSITIVE_AREA = 800;\n\nconst InfiniteScroll: FC<OwnProps> = ({\n  ref,\n  style,\n  className,\n  items,\n  itemSelector = DEFAULT_LIST_SELECTOR,\n  preloadBackwards = DEFAULT_PRELOAD_BACKWARDS,\n  sensitiveArea = DEFAULT_SENSITIVE_AREA,\n  withAbsolutePositioning,\n  maxHeight,\n  // Used to turn off restoring scroll position (e.g. for frequently re-ordered chat or user lists)\n  noScrollRestore = false,\n  noScrollRestoreOnTop = false,\n  noFastList,\n  // Used to re-query `listItemElements` if rendering is delayed by transition\n  cacheBuster,\n  beforeChildren,\n  scrollContainerClosest,\n  children,\n  onLoadMore,\n  onScroll,\n  onWheel,\n  onClick,\n  onKeyDown,\n  onDragOver,\n  onDragLeave,\n}: OwnProps) => {\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const stateRef = useRef<{\n    listItemElements?: NodeListOf<HTMLDivElement>;\n    isScrollTopJustUpdated?: boolean;\n    currentAnchor?: HTMLDivElement | undefined;\n    currentAnchorTop?: number;\n  }>({});\n\n  const [loadMoreBackwards, loadMoreForwards] = useMemo(() => {\n    if (!onLoadMore) {\n      return [];\n    }\n\n    return [\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Backwards });\n      }, SECOND, true, false),\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Forwards });\n      }, SECOND, true, false),\n    ];\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [onLoadMore, items]);\n\n  // Initial preload\n  useEffect(() => {\n    if (!loadMoreBackwards) {\n      return;\n    }\n\n    if (preloadBackwards > 0 && (!items || items.length < preloadBackwards)) {\n      loadMoreBackwards();\n      return;\n    }\n\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n\n    const { scrollHeight, clientHeight } = scrollContainer;\n    if (clientHeight && scrollHeight <= clientHeight) {\n      loadMoreBackwards();\n    }\n  }, [items, loadMoreBackwards, preloadBackwards, scrollContainerClosest]);\n\n  // Restore `scrollTop` after adding items\n  useLayoutEffectWithPrevDeps(([prevItems]) => {\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n    const state = stateRef.current;\n\n    const listItemElements = scrollContainer.querySelectorAll<HTMLDivElement>(itemSelector);\n    state.listItemElements = listItemElements;\n\n    if (!prevItems?.length) return;\n\n    requestForcedReflow(() => {\n      let newScrollTop: number;\n\n      if (state.currentAnchor && Array.from(listItemElements).includes(state.currentAnchor)) {\n        const { scrollTop } = scrollContainer;\n        const newAnchorTop = state.currentAnchor.getBoundingClientRect().top;\n        newScrollTop = scrollTop + (newAnchorTop - state.currentAnchorTop!);\n      } else {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          state.currentAnchor = nextAnchor;\n          state.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n        }\n      }\n\n      if (withAbsolutePositioning || noScrollRestore) {\n        return undefined;\n      }\n\n      const { scrollTop } = scrollContainer;\n      if (noScrollRestoreOnTop && scrollTop === 0) {\n        return undefined;\n      }\n\n      return () => {\n        resetScroll(scrollContainer, newScrollTop);\n\n        state.isScrollTopJustUpdated = true;\n      };\n    });\n  }, [\n    items, itemSelector, noScrollRestore, noScrollRestoreOnTop, cacheBuster, withAbsolutePositioning,\n    scrollContainerClosest,\n  ]);\n\n  const handleScroll = useLastCallback((e: UIEvent<HTMLDivElement>) => {\n    if (loadMoreForwards && loadMoreBackwards) {\n      const {\n        isScrollTopJustUpdated, currentAnchor, currentAnchorTop,\n      } = stateRef.current;\n      const listItemElements = stateRef.current.listItemElements!;\n\n      if (isScrollTopJustUpdated) {\n        stateRef.current.isScrollTopJustUpdated = false;\n        return;\n      }\n\n      const listLength = listItemElements.length;\n      const scrollContainer = scrollContainerClosest\n        ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n        : containerRef.current!;\n      const { scrollTop, scrollHeight, offsetHeight } = scrollContainer;\n      const top = listLength ? listItemElements[0].offsetTop : 0;\n      const isNearTop = scrollTop <= top + sensitiveArea;\n      const bottom = listLength\n        ? listItemElements[listLength - 1].offsetTop + listItemElements[listLength - 1].offsetHeight\n        : scrollHeight;\n      const isNearBottom = bottom - (scrollTop + offsetHeight) <= sensitiveArea;\n      let isUpdated = false;\n\n      if (isNearTop) {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingUp = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop > currentAnchorTop\n          );\n\n          if (isMovingUp) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreForwards();\n          }\n        }\n      }\n\n      if (isNearBottom) {\n        const nextAnchor = listItemElements[listLength - 1];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingDown = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop < currentAnchorTop\n          );\n\n          if (isMovingDown) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreBackwards();\n          }\n        }\n      }\n\n      if (!isUpdated) {\n        if (currentAnchor?.offsetParent) {\n          stateRef.current.currentAnchorTop = currentAnchor.getBoundingClientRect().top;\n        } else {\n          const nextAnchor = listItemElements[0];\n\n          if (nextAnchor) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n          }\n        }\n      }\n    }\n\n    if (onScroll) {\n      onScroll(e);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (!scrollContainerClosest) return undefined;\n\n    const closestScrollContainer = containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer) return undefined;\n\n    const handleNativeScroll = (e: Event) => handleScroll(e as unknown as UIEvent<HTMLDivElement>);\n\n    closestScrollContainer.addEventListener('scroll', handleNativeScroll);\n\n    return () => {\n      closestScrollContainer.removeEventListener('scroll', handleNativeScroll);\n    };\n  }, [handleScroll, scrollContainerClosest]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      onScroll={handleScroll}\n      onWheel={onWheel}\n      teactFastList={!noFastList && !withAbsolutePositioning}\n      onKeyDown={onKeyDown}\n      onDragOver={onDragOver}\n      onDragLeave={onDragLeave}\n      onClick={onClick}\n      style={style}\n    >\n      {beforeChildren}\n      {withAbsolutePositioning && items?.length ? (\n        <div\n          teactFastList={!noFastList}\n          style={buildStyle('position: relative', IS_ANDROID && maxHeight !== undefined && `height: ${maxHeight}`)}\n        >\n          {children}\n        </div>\n      ) : children}\n    </div>\n  );\n};\n\nexport default InfiniteScroll;\n","import { IS_IOS } from './windowEnvironment';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\nexport default resetScroll;\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"qI7nEtyA\",\"emptyListTitle\":\"ddnxH_YM\",\"emptyListLoading\":\"BUMeW3vl\",\"greeting\":\"HZCBxAlC\",\"sticker\":\"L93gae4c\",\"loaderThreshold\":\"tFv_lTfa\",\"itemLoading\":\"aJcdkBz7\",\"date\":\"t2U79mme\",\"date_withLoadingDots\":\"vFLWFB14\",\"dateWithLoadingDots\":\"vFLWFB14\",\"loadingDots\":\"Ig34AhI2\",\"dateContainer\":\"ubrkPkql\",\"dateSlide\":\"rHTS83Rc\",\"listItem\":\"ebD9lZA7\",\"listGroup\":\"fUr4n5dv\",\"animateOpacity\":\"a2p7XeQH\",\"animateTransform\":\"xJCALuqk\"};","import { useRef } from '../../../../../lib/teact/teact';\n\nimport { requestMutation } from '../../../../../lib/fasterdom/fasterdom';\n\nimport useLayoutEffectWithPrevDeps from '../../../../../hooks/useLayoutEffectWithPrevDeps';\n\nimport styles from '../Activities.module.scss';\n\nconst ANIMATION_DURATION = 200;\nconst ANIMATION_END_DELAY = 50;\n\nexport default function useActivityListEntry(\n  withAnimation: boolean,\n  topOffset: number, // rem\n) {\n  const ref = useRef<HTMLDivElement>();\n\n  useLayoutEffectWithPrevDeps(([prevTopOffset]) => {\n    const element = ref.current;\n\n    if (!withAnimation || !element) {\n      return;\n    }\n\n    if (prevTopOffset === undefined) {\n      // A new activity\n      animateOpacity(element);\n      cleanupAnimation(element);\n    } else if (topOffset !== prevTopOffset) {\n      // An existing activity that has moved\n      animateMove(element, topOffset - prevTopOffset);\n      cleanupAnimation(element);\n    }\n  }, [topOffset, withAnimation]);\n\n  return { ref };\n}\n\nfunction animateOpacity(element: HTMLElement) {\n  element.style.opacity = '0';\n\n  requestMutation(() => {\n    element.classList.add(styles.animateOpacity);\n    element.style.opacity = '1';\n  });\n}\n\nfunction animateMove(element: HTMLElement, offsetY: number) {\n  element.style.transform = `translate3d(0, ${-offsetY}rem, 0)`;\n\n  requestMutation(() => {\n    element.classList.add(styles.animateTransform);\n    element.style.transform = '';\n  });\n}\n\nfunction cleanupAnimation(element: HTMLElement) {\n  setTimeout(() => {\n    requestMutation(() => {\n      element.classList.remove(styles.animateOpacity, styles.animateTransform);\n      element.style.opacity = '';\n      element.style.transform = '';\n    });\n  }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n}\n","import type { TeactNode } from '../../../../lib/teact/teact';\nimport React from '../../../../lib/teact/teact';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useActivityListEntry from './hooks/useActivityListEntry';\n\nimport styles from './Activities.module.scss';\n\ninterface OwnProps {\n  /** In rem */\n  topOffset: number;\n  withAnimation: boolean;\n  children?: TeactNode;\n}\n\nfunction ActivityListItem({\n  topOffset,\n  withAnimation,\n  children,\n}: OwnProps) {\n  const { ref: animationRef } = useActivityListEntry(withAnimation, topOffset);\n\n  return (\n    <div\n      ref={animationRef}\n      style={`top: ${topOffset}rem`}\n      className={buildClassName('ListItem', styles.listItem)}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport default ActivityListItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"k3PjQTgC\",\"panel\":\"ZX_ET6v1\",\"emptyList\":\"y3OrMGkQ\",\"text\":\"W7PJUQAi\",\"header\":\"vhx2gdHr\",\"description\":\"iQxbUd1C\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, ANIMATED_STICKER_SMALL_SIZE_PX } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\n\nimport styles from './NewWalletGreeting.module.scss';\n\ninterface Props {\n  isActive?: boolean;\n  isMutlichainAccount?: boolean;\n  mode: 'panel' | 'emptyList';\n}\n\nfunction NewWalletGreeting({ isActive, isMutlichainAccount, mode }: Props) {\n  const lang = useLang();\n\n  return (\n    <div className={buildClassName(styles.container, styles[mode])}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n        size={mode === 'emptyList' ? ANIMATED_STICKER_BIG_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n      />\n\n      <div className={styles.text}>\n        <p className={styles.header}>\n          {lang(isMutlichainAccount\n            ? 'You have just created a new multichain wallet'\n            : 'You have just created a new wallet')}\n        </p>\n        <p className={styles.description}>\n          {lang(\n            isMutlichainAccount\n              ? 'Now you can transfer tokens from your TON and TRON wallets.'\n              : 'You can now transfer your tokens from another wallet or exchange.',\n          )}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(NewWalletGreeting);\n","import type { TeactNode } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiActivity,\n  ApiBaseCurrency,\n  ApiNft,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../../../global/types';\nimport { ContentTab } from '../../../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n} from '../../../../config';\nimport { forceMeasure } from '../../../../lib/fasterdom/stricterdom';\nimport { getIsTinyOrScamTransaction } from '../../../../global/helpers';\nimport {\n  selectAccounts,\n  selectAccountStakingStatesBySlug,\n  selectActivityHistoryIds,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsHistoryEndReached,\n  selectIsMultichainAccount,\n} from '../../../../global/selectors';\nimport { getActivityIdReplacements } from '../../../../util/activities';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatHumanDay, getDayStartAt } from '../../../../util/dateFormat';\nimport generateUniqueId from '../../../../util/generateUniqueId';\nimport { compact, swapKeysAndValues } from '../../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../../util/poisoningHash';\nimport { REM } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport {\n  getScrollableContainer,\n  getScrollContainerClosestSelector,\n} from '../../helpers/scrollableContainer';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport { getIsPortrait, useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useLayoutEffectWithPrevDeps from '../../../../hooks/useLayoutEffectWithPrevDeps';\nimport usePrevious from '../../../../hooks/usePrevious';\nimport useSyncEffectWithPrevDeps from '../../../../hooks/useSyncEffectWithPrevDeps';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport Activity, { getActivityHeight } from './Activity';\nimport ActivityListItem from './ActivityListItem';\nimport NewWalletGreeting from './NewWalletGreeting';\n\nimport styles from './Activities.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  totalTokensAmount: number;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n}\n\ntype StateProps = {\n  currentAccountId: string;\n  slug?: string;\n  isMultichainAccount: boolean;\n  areTinyTransfersHidden?: boolean;\n  byId?: Record<string, ApiActivity>;\n  allActivityIds?: string[];\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug?: Record<string, ApiSwapAsset>;\n  currentActivityId?: string;\n  savedAddresses?: SavedAddress[];\n  isHistoryEndReached: boolean;\n  alwaysShownSlugs?: string[];\n  theme: Theme;\n  baseCurrency?: ApiBaseCurrency;\n  isSensitiveDataHidden?: true;\n  stakingStateBySlug: Record<string, ApiStakingState>;\n  nftsByAddress?: Record<string, ApiNft>;\n  accounts?: Record<string, Account>;\n};\n\ninterface ItemPosition {\n  /** In rem */\n  top: number;\n  /** In rem */\n  height: number;\n}\n\nconst FURTHER_SLICE = 30;\n\nconst LIST_TOP_PADDING = 0.5; // rem\nconst DATE_HEADER_HEIGHT = 2.125; // rem\n\n// After this threshold, the animations of adding new activities (controlled by `useActivityOrderDiff`) won't be visible\n// to the user, so the animation is disabled to improve the performance. An important part that makes the additions\n// invisible is the `usePreventScrolledListShift` hook.\nconst SCROLL_THRESHOLD = (LIST_TOP_PADDING + DATE_HEADER_HEIGHT) * REM;\n\nconst DATE_ID_PREFIX = 'date:';\n\nconst EMPTY_ARRAY = Object.freeze([]);\nconst EMPTY_DICTIONARY = Object.freeze({});\n\nfunction Activities({\n  isActive,\n  currentAccountId,\n  isMultichainAccount,\n  slug,\n  byId,\n  allActivityIds,\n  tokensBySlug,\n  swapTokensBySlug,\n  areTinyTransfersHidden,\n  currentActivityId,\n  savedAddresses,\n  isHistoryEndReached,\n  alwaysShownSlugs,\n  theme,\n  baseCurrency,\n  isSensitiveDataHidden,\n  stakingStateBySlug,\n  nftsByAddress,\n  accounts,\n  onScroll,\n}: Omit<OwnProps, 'totalTokensAmount'> & StateProps) {\n  const { fetchPastActivities, showActivityInfo } = getActions();\n\n  const lang = useLang();\n  const { isLandscape, isPortrait } = useDeviceScreen();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const isUpdating = useUpdateIndicator('activitiesUpdateStartedAt');\n\n  const appTheme = useAppTheme(theme);\n  const hasUserScrolledRef = useRef(false);\n\n  // As with `allActivityIds`, `undefined` means \"not loaded yet\" and `[]` means \"no activities\"\n  const listItemIds = useMemo(() => {\n    const activityIds = filterActivityIds(\n      allActivityIds ?? EMPTY_ARRAY,\n      byId ?? EMPTY_DICTIONARY,\n      slug,\n      tokensBySlug,\n      areTinyTransfersHidden,\n      alwaysShownSlugs,\n    );\n\n    if (!activityIds.length && !isHistoryEndReached) {\n      // When all the activities are hidden, the further activities are being loaded, so the spinner should be shown.\n      return undefined;\n    }\n\n    return addDatesToActivityIds(activityIds, byId);\n  }, [areTinyTransfersHidden, byId, alwaysShownSlugs, allActivityIds, slug, tokensBySlug, isHistoryEndReached]);\n\n  const firstListItemId = listItemIds?.[0];\n\n  const loadMore = useLastCallback(() => {\n    fetchPastActivities({ slug, shouldLoadWithBudget: true });\n  });\n\n  const [viewportIds, getMore, resetScroll] = useInfiniteScroll(\n    loadMore, listItemIds, undefined, FURTHER_SLICE, slug, isActive,\n  );\n\n  const getListItemKey = useListItemKeys(viewportIds ?? EMPTY_ARRAY, byId ?? EMPTY_DICTIONARY);\n\n  // The move animation should remain only for the case when new transactions appear in the feed.\n  // At the same time, the smooth feed appearance animation should be kept when the loading is completed.\n  const prevSlug = usePrevious(slug);\n  const prevIsLoading = usePrevious(listItemIds === undefined);\n  const shouldUseAnimations = Boolean(isActive && !hasUserScrolledRef.current && (prevIsLoading || prevSlug === slug));\n\n  const itemPositionById = useMemo(() => {\n    const itemPositionById: Record<string, ItemPosition> = {};\n    let top = 0;\n\n    listItemIds?.forEach((itemId, index) => {\n      const height = itemId.startsWith(DATE_ID_PREFIX)\n        ? DATE_HEADER_HEIGHT + (index === 0 ? LIST_TOP_PADDING : 0)\n        : getActivityHeight(byId![itemId]);\n\n      itemPositionById[itemId] = { top, height };\n      top += height;\n    });\n\n    return itemPositionById;\n  }, [byId, listItemIds]);\n\n  const currentContainerHeight = useMemo(\n    () => {\n      if (!viewportIds?.length) return 0;\n\n      const lastViewportId = viewportIds[viewportIds.length - 1];\n      const activityOffset = itemPositionById[lastViewportId];\n\n      return activityOffset ? activityOffset.top + activityOffset.height : 0;\n    },\n    [itemPositionById, viewportIds],\n  );\n\n  usePreventScrolledListShift(\n    viewportIds ?? EMPTY_ARRAY,\n    itemPositionById,\n    isPortrait,\n    containerRef,\n    hasUserScrolledRef,\n  );\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, { height: isLandscape ? '' : `${currentContainerHeight}rem` });\n  }, [isLandscape, currentContainerHeight]);\n\n  // Requests the history when the UI shows a spinner instead of the list.\n  // Keeps requesting the history when all the currently loaded activities are hidden.\n  useEffect(() => {\n    if (!listItemIds?.length) {\n      loadMore();\n    }\n  }, [slug, allActivityIds, listItemIds, loadMore]);\n\n  // Reset scroll and scroll tracking when the tab becomes inactive\n  useEffect(() => {\n    if (!isActive && !isLandscape) {\n      resetScroll?.();\n      hasUserScrolledRef.current = false;\n    }\n  }, [isActive, isLandscape, resetScroll]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    const scrollTop = (e.target as HTMLDivElement).scrollTop;\n\n    hasUserScrolledRef.current = scrollTop >= SCROLL_THRESHOLD;\n\n    onScroll?.(e);\n  });\n\n  const handleActivityClick = useLastCallback((id: string) => {\n    showActivityInfo({ id });\n  });\n\n  if (!currentAccountId) {\n    return undefined;\n  }\n\n  function renderDate(dateValue: number, isFirst?: boolean) {\n    const formattedDate = formatHumanDay(lang, dateValue);\n    const date = <div className={styles.date}>{formattedDate}</div>;\n\n    if (!isFirst) {\n      return date;\n    }\n\n    const dateWithLoader = (\n      <div className={buildClassName(styles.date, styles.date_withLoadingDots)}>\n        {formattedDate}\n        <LoadingDots isActive isDoubled className={styles.loadingDots} />\n      </div>\n    );\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        activeKey={isUpdating ? 1 : 0}\n        className={styles.dateContainer}\n        slideClassName={styles.dateSlide}\n      >\n        {isUpdating ? dateWithLoader : date}\n      </Transition>\n    );\n  }\n\n  function renderHistory() {\n    if (!viewportIds) return undefined;\n\n    return viewportIds.map((itemId, index) => {\n      const topOffset = itemPositionById[itemId]?.top ?? 0;\n      let itemContent: TeactNode;\n\n      if (itemId.startsWith(DATE_ID_PREFIX)) {\n        itemContent = renderDate(\n          Number(itemId.slice(DATE_ID_PREFIX.length)),\n          itemId === firstListItemId,\n        );\n      } else {\n        const activity = byId?.[itemId];\n        if (!activity) return undefined;\n\n        const isActivityActive = activity.id === currentActivityId;\n        const isLastInDay = index === viewportIds.length - 1 || viewportIds[index + 1].startsWith(DATE_ID_PREFIX);\n\n        itemContent = (\n          <Activity\n            activity={activity}\n            isLast={isLastInDay}\n            isActive={isActivityActive}\n            tokensBySlug={tokensBySlug}\n            swapTokensBySlug={swapTokensBySlug}\n            appTheme={appTheme}\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            nftsByAddress={nftsByAddress}\n            currentAccountId={currentAccountId}\n            stakingStateBySlug={stakingStateBySlug}\n            savedAddresses={savedAddresses}\n            withChainIcon={isMultichainAccount}\n            accounts={accounts}\n            baseCurrency={baseCurrency}\n            onClick={handleActivityClick}\n          />\n        );\n      }\n\n      return (\n        <ActivityListItem key={getListItemKey(itemId)} topOffset={topOffset} withAnimation={shouldUseAnimations}>\n          {itemContent}\n        </ActivityListItem>\n      );\n    });\n  }\n\n  if (listItemIds === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (!listItemIds.length) {\n    if (!slug) {\n      return (\n        <div className={buildClassName(isLandscape && styles.greeting)}>\n          <NewWalletGreeting\n            isActive={isActive}\n            isMutlichainAccount={isMultichainAccount}\n            mode={isLandscape ? 'emptyList' : 'panel'}\n          />\n        </div>\n      );\n    } else {\n      return (\n        <div className={styles.emptyList}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n            previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            className={styles.sticker}\n            noLoop={false}\n            nonInteractive\n          />\n          <p className={styles.emptyListTitle}>{lang('No Activity')}</p>\n        </div>\n      );\n    }\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName('custom-scroll', styles.listGroup)}\n      scrollContainerClosest={getScrollContainerClosestSelector(isActive, isPortrait)}\n      items={viewportIds}\n      preloadBackwards={FURTHER_SLICE}\n      withAbsolutePositioning\n      maxHeight={`${currentContainerHeight}rem`}\n      onLoadMore={getMore}\n      onScroll={handleScroll}\n    >\n      {renderHistory()}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId!;\n      const accountState = selectCurrentAccountState(global);\n      const accountSettings = selectCurrentAccountSettings(global);\n      const slug = accountState?.currentTokenSlug;\n      const stakingStateBySlug = selectAccountStakingStatesBySlug(global, accountId);\n      const { byId } = accountState?.activities ?? {};\n      const { byAddress } = accountState?.nfts || {};\n      const accounts = selectAccounts(global);\n      const isHistoryEndReached = selectIsHistoryEndReached(global, accountId, slug);\n      const allActivityIds = selectActivityHistoryIds(global, accountId, slug);\n\n      return {\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        currentAccountId: accountId,\n        slug,\n        byId,\n        allActivityIds,\n        tokensBySlug: global.tokenInfo.bySlug,\n        swapTokensBySlug: global.swapTokenInfo?.bySlug,\n        areTinyTransfersHidden: global.settings.areTinyTransfersHidden,\n        savedAddresses: accountState?.savedAddresses,\n        isHistoryEndReached,\n        currentActivityId: accountState?.currentActivityId,\n        alwaysShownSlugs: accountSettings?.alwaysShownSlugs,\n        theme: global.settings.theme,\n        baseCurrency: global.settings.baseCurrency,\n        stakingStateBySlug,\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        nftsByAddress: byAddress,\n        accounts,\n      };\n    },\n    (global, { totalTokensAmount }, stickToFirst) => {\n      const accountState = selectCurrentAccountState(global);\n      const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n        getIsPortrait() ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n      );\n\n      return stickToFirst((\n        accountState?.activeContentTab === ContentTab.Activity\n        || (accountState?.activeContentTab === ContentTab.Assets && shouldShowSeparateAssetsPanel)\n      ) && global.currentAccountId);\n    },\n  )(Activities),\n);\n\nfunction filterActivityIds(\n  allActivityIds: readonly string[],\n  byId: Record<string, ApiActivity>,\n  slug: string | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice>,\n  areTinyTransfersHidden?: boolean,\n  alwaysShownSlugs?: string[],\n) {\n  return allActivityIds.filter((id) => {\n    const activity = byId?.[id];\n    if (!activity) return false;\n\n    if (activity?.shouldHide) return false;\n\n    if (activity?.kind === 'swap') {\n      return !slug || activity.from === slug || activity.to === slug;\n    } else {\n      return activity?.slug\n        && (!slug || activity.slug === slug)\n        && (\n          !areTinyTransfersHidden\n          || (slug && tokensBySlug[activity.slug]?.priceUsd === 0)\n          || !getIsTinyOrScamTransaction(activity, tokensBySlug[activity.slug])\n          || alwaysShownSlugs?.includes(activity.slug)\n        )\n        && !getIsTransactionWithPoisoning(activity);\n    }\n  });\n}\n\nfunction addDatesToActivityIds(activityIds: readonly string[], byId: Record<string, ApiActivity> = {}) {\n  let lastActivityDayStart = Infinity;\n  const listItemIds: string[] = [];\n\n  // Mix-in the date headers to the list of activity ids\n  for (const activityId of activityIds) {\n    const activityDayStart = getDayStartAt(byId[activityId].timestamp);\n\n    // The clause is not `activityDayStart !== lastActivityDayStart`, because the days can go backwards, which will\n    // cause duplicated date Teact keys. The days can go backwards because the pending activities are on the top\n    // regardless of their timestamp.\n    const isNewDay = activityDayStart < lastActivityDayStart;\n\n    if (isNewDay) {\n      lastActivityDayStart = activityDayStart;\n      listItemIds.push(`${DATE_ID_PREFIX}${activityDayStart}`);\n    }\n    listItemIds.push(activityId);\n  }\n\n  return listItemIds;\n}\n\n/**\n * Pending activity ids may change. If the ids are used as the list keys, excessive blinking animations occur.\n * This hook creates stable keys for the list items, which prevents the excessive animations.\n */\nfunction useListItemKeys(viewportIds: readonly string[], activityById: Record<string, ApiActivity>) {\n  const keyByIdRef = useRef<Record<string, string>>();\n  keyByIdRef.current ??= {};\n\n  useSyncEffectWithPrevDeps(([oldViewportIds = [], oldActivityById = {}]) => {\n    const keyById = keyByIdRef.current!;\n    const oldActivities = compact(oldViewportIds.map((id) => oldActivityById[id]));\n    const newActivities = compact(viewportIds.map((id) => activityById[id]));\n\n    // Transfer the keys from the old activities to the new activities. Besides the obvious goal, `swapKeysAndValues`\n    // ensures that the `idReplacements` values are unique, which results into unique output keys.\n    const idReplacements = swapKeysAndValues(getActivityIdReplacements(oldActivities, newActivities));\n    for (const { id: newActivityId } of newActivities) {\n      const oldActivityId = idReplacements[newActivityId];\n      keyById[newActivityId] = (oldActivityId && keyById[oldActivityId]) ?? generateUniqueId();\n    }\n\n    // Clean the memory\n    const newActivityIds = new Set(viewportIds);\n    for (const itemId of Object.keys(keyById)) {\n      if (!newActivityIds.has(itemId)) {\n        delete keyById[itemId];\n      }\n    }\n  }, [viewportIds, activityById]);\n\n  return useLastCallback((itemId: string) => keyByIdRef.current?.[itemId] ?? itemId);\n}\n\n/**\n * In order to make the list look stationary after it has been scrolled, this hook compensates the scroll position when\n * new items are added and user scrolled content.\n */\nfunction usePreventScrolledListShift(\n  viewportIds: readonly string[],\n  itemPositionById: Record<string, ItemPosition>,\n  isPortrait: boolean,\n  containerRef: React.RefObject<HTMLDivElement | undefined>,\n  hasUserScrolledRef: React.RefObject<boolean>,\n) {\n  useLayoutEffectWithPrevDeps(([prevItemPositionById]) => {\n    const container = getScrollableContainer(containerRef.current, isPortrait);\n    if (!hasUserScrolledRef.current || !container || !prevItemPositionById || !viewportIds.length) return;\n\n    const anchorId = viewportIds[Math.floor(viewportIds.length / 2)];\n    const prevTop = prevItemPositionById[anchorId]?.top;\n    const nextTop = itemPositionById[anchorId]?.top;\n\n    if (prevTop === undefined || nextTop === undefined || prevTop === nextTop) return;\n\n    forceMeasure(() => {\n      container.scrollBy({\n        top: (nextTop - prevTop) * REM,\n        behavior: 'instant',\n      });\n    });\n  }, [itemPositionById, viewportIds, containerRef, hasUserScrolledRef, isPortrait]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"y_zyRtG4\",\"button\":\"mDOHosrF\",\"vestingIcon\":\"vKLHR9fe\",\"percent\":\"JLnToFoo\",\"readyToClaim\":\"T4MfMcFP\",\"active\":\"gcp9pSal\",\"iconArrow\":\"zzgzZR90\",\"iconChevron\":\"WLJ2jON8\",\"primaryCell\":\"MWjR4yCQ\",\"secondaryCell\":\"zBTGbg76\",\"subtitle\":\"v9EXZKHv\",\"amountChange\":\"fvwKm83g\",\"name\":\"IJaceq0j\",\"name_text\":\"JMnoFXEt\",\"nameText\":\"JMnoFXEt\",\"secondaryValue\":\"yB7hzLme\",\"secondaryValue_staked\":\"Fy56cR9i\",\"secondaryValueStaked\":\"Fy56cR9i\",\"change\":\"ka5acfM4\",\"change_up\":\"VR0vGdiX\",\"changeUp\":\"VR0vGdiX\",\"change_down\":\"osD2vwqW\",\"changeDown\":\"osD2vwqW\",\"dot\":\"zJntRecr\",\"label\":\"jN5w9AWO\",\"apyLabel\":\"xWg00BgF\",\"apyLabel_staked\":\"UeDUf_9U\",\"apyLabelStaked\":\"UeDUf_9U\",\"chainLabel\":\"B9HfGrEc\",\"tokenIcon\":\"BcTpLjhN\",\"secondaryValue_vesting\":\"rE0JGav4\",\"secondaryValueVesting\":\"rE0JGav4\",\"secondaryValue_vestingUnfreeze\":\"LHgVJV2I\",\"secondaryValueVestingUnfreeze\":\"LHgVJV2I\",\"wrapperVisible\":\"n7iUgDe0\",\"menu\":\"ilWFIqJF\"};","import React, { type ElementRef, memo, useMemo, useRef } from '../../../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiStakingState, ApiYieldType } from '../../../../api/types';\nimport type { AppTheme, UserToken } from '../../../../global/types';\nimport type { LangFn } from '../../../../hooks/useLang';\nimport type { Layout } from '../../../../hooks/useMenuPosition';\nimport type { StakingStateStatus } from '../../../../util/staking';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, IS_CORE_WALLET, TOKEN_WITH_LABEL, TON_USDE } from '../../../../config';\nimport { Big } from '../../../../lib/big.js';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcChangeValue } from '../../../../util/calcChangeValue';\nimport { DAY, formatFullDay } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport { round } from '../../../../util/round';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useTokenContextMenu from './hooks/useTokenContextMenu';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport MenuBackdrop from '../../../ui/MenuBackdrop';\nimport SensitiveData from '../../../ui/SensitiveData';\n\nimport styles from './Token.module.scss';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLButtonElement>;\n  token: UserToken;\n  // Undefined means that it's not a staked token\n  stakingStatus?: StakingStateStatus;\n  stakingState?: ApiStakingState;\n  vestingStatus?: 'frozen' | 'readyToUnfreeze';\n  unfreezeEndDate?: number;\n  amount?: string;\n  isInvestorView?: boolean;\n  classNames?: string;\n  style?: string;\n  annualYield?: number;\n  yieldType?: ApiYieldType;\n  isActive?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  appTheme: AppTheme;\n  withChainIcon?: boolean;\n  withContextMenu?: boolean;\n  isSensitiveDataHidden?: true;\n  isSwapDisabled?: boolean;\n  isStakingAvailable?: boolean;\n  isViewMode?: boolean;\n  onClick: (slug: string) => void;\n}\n\nconst UNFREEZE_DANGER_DURATION = 7 * DAY;\nconst CONTEXT_MENU_VERTICAL_SHIFT_PX = 4;\nexport const OPEN_CONTEXT_MENU_CLASS_NAME = 'open-context-menu';\n\nfunction Token({\n  ref,\n  token,\n  amount,\n  stakingStatus,\n  stakingState,\n  vestingStatus,\n  unfreezeEndDate,\n  annualYield,\n  isInvestorView,\n  classNames,\n  style,\n  appTheme,\n  isActive,\n  baseCurrency,\n  withChainIcon,\n  withContextMenu,\n  isSensitiveDataHidden,\n  isStakingAvailable,\n  isSwapDisabled,\n  isViewMode,\n  yieldType,\n  onClick,\n}: OwnProps) {\n  const {\n    symbol,\n    slug,\n    amount: tokenAmount,\n    price,\n    change24h: change,\n    decimals,\n  } = token;\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  let buttonRef = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const isVesting = Boolean(vestingStatus?.length);\n  const renderedAmount = amount ?? toDecimal(tokenAmount, decimals, true);\n  const value = Big(renderedAmount).mul(price).toString();\n  const changeClassName = change > 0 ? styles.change_up : change < 0 ? styles.change_down : undefined;\n  const changeValue = Math.abs(round(calcChangeValue(Number(value), change), 4));\n  const changePercent = Math.abs(round(change * 100, 2));\n  const withYield = !IS_CORE_WALLET && annualYield !== undefined;\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const withLabel = Boolean(!isVesting && TOKEN_WITH_LABEL[slug]);\n  const stakingId = stakingState?.id;\n  const name = getTokenName(lang, token, !!stakingId);\n  const amountCols = useMemo(() => getPseudoRandomNumber(4, 12, name), [name]);\n  const fiatAmountCols = 5 + (amountCols % 6);\n  if (ref) {\n    buttonRef = ref;\n  }\n\n  const {\n    shouldRender: shouldRenderYield,\n    ref: yieldRef,\n  } = useShowTransition<HTMLSpanElement>({\n    isOpen: withYield,\n    withShouldRender: true,\n  });\n\n  const handleClick = useLastCallback(() => {\n    onClick(stakingId ?? slug);\n  });\n\n  const getTriggerElement = useLastCallback(() => buttonRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({\n    withPortal: true,\n    doNotCoverTrigger: isPortrait,\n    // The shift is needed to prevent the mouse cursor from highlighting the first menu item\n    topShiftY: !isPortrait ? CONTEXT_MENU_VERTICAL_SHIFT_PX : undefined,\n    preferredPositionX: 'left',\n  }));\n\n  const {\n    isContextMenuOpen,\n    isContextMenuShown,\n    contextMenuAnchor,\n    items,\n    isBackdropRendered,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n    handleMenuItemSelect,\n  } = useTokenContextMenu(buttonRef, {\n    token,\n    isPortrait,\n    withContextMenu,\n    isStakingAvailable,\n    isSwapDisabled,\n    isViewMode,\n    stakingState,\n  });\n\n  function renderYield() {\n    const labelClassName = buildClassName(\n      styles.label,\n      styles.apyLabel,\n      stakingStatus && styles.apyLabel_staked,\n    );\n\n    return (\n      <span ref={yieldRef} className={labelClassName}>\n        {yieldType} {round(annualYield ?? 0, 2)}%\n      </span>\n    );\n  }\n\n  function renderChangeIcon() {\n    if (change === 0) {\n      return undefined;\n    }\n\n    return (\n      <i\n        className={buildClassName(styles.iconArrow, change > 0 ? 'icon-arrow-up' : 'icon-arrow-down')}\n        aria-hidden\n      />\n    );\n  }\n\n  function renderStakingIcon() {\n    if (stakingStatus === 'active') {\n      return (\n        <i\n          className={buildClassName('icon-percent', styles.percent)}\n          aria-hidden\n        />\n      );\n    }\n\n    if (stakingStatus === 'readyToClaim') {\n      return (\n        <i\n          className={buildClassName('icon-check-alt', styles.readyToClaim)}\n          aria-hidden\n        />\n      );\n    }\n\n    return (\n      <AnimatedIconWithPreview\n        play\n        size={ANIMATED_STICKER_TINY_ICON_PX}\n        className={styles.percent}\n        nonInteractive\n        noLoop={false}\n        tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n        previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n      />\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.button,\n    isActive && styles.active,\n    isContextMenuOpen && OPEN_CONTEXT_MENU_CLASS_NAME,\n  );\n\n  function renderInvestorView() {\n    return (\n      <Button\n        ref={buttonRef}\n        isSimple\n        className={fullClassName}\n        onMouseDown={handleBeforeContextMenu}\n        onContextMenu={handleContextMenu}\n        onClick={handleClick}\n      >\n        <TokenIcon\n          size=\"large\"\n          token={token}\n          withChainIcon={withChainIcon}\n          className={styles.tokenIcon}\n        >\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {shouldRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={fiatAmountCols}\n              rows={2}\n              cellSize={8}\n            >\n              <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n            </SensitiveData>\n            <i className={styles.dot} aria-hidden />\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={amountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\"\n            className={buildClassName(\n              styles.secondaryValue,\n              stakingStatus && styles.secondaryValue_staked,\n              isVesting && styles.secondaryValue_vesting,\n              isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n            )}\n          >\n            <AnimatedCounter text={formatCurrency(value, shortBaseSymbol)} />\n          </SensitiveData>\n          {unfreezeEndDate ? (\n            <div\n              className={buildClassName(\n                styles.change,\n                (unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down,\n              )}\n            >\n              {lang('Unfreeze')}\n              {' '}\n              {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n            </div>\n          ) : (\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={fiatAmountCols}\n              rows={2}\n              cellSize={8}\n              align=\"right\"\n              className={buildClassName(styles.change, changeClassName)}\n            >\n              {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n              <i className={styles.dot} aria-hidden />\n              <AnimatedCounter text={formatCurrency(changeValue, shortBaseSymbol, undefined, true)} />\n            </SensitiveData>\n          )}\n        </div>\n      </Button>\n    );\n  }\n\n  function renderDefaultView() {\n    const totalAmount = Big(renderedAmount).mul(price);\n    const canRenderYield = annualYield !== undefined;\n\n    return (\n      <Button\n        ref={buttonRef}\n        isSimple\n        className={fullClassName}\n        onMouseDown={handleBeforeContextMenu}\n        onContextMenu={handleContextMenu}\n        onClick={handleClick}\n      >\n        <TokenIcon\n          token={token}\n          size=\"large\"\n          withChainIcon={withChainIcon}\n          className={styles.tokenIcon}\n        >\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {canRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n            {!stakingStatus && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                {unfreezeEndDate ? (\n                  <span className={(unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down}>\n                    {lang('Unfreeze')}\n                    {' '}\n                    {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n                  </span>\n                ) : (\n                  <span className={changeClassName}>\n                    {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n                  </span>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={amountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\"\n            className={buildClassName(\n              styles.secondaryValue,\n              stakingStatus && styles.secondaryValue_staked,\n              isVesting && styles.secondaryValue_vesting,\n              isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n            )}\n          >\n            <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n          </SensitiveData>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={fiatAmountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\"\n            className={styles.subtitle}\n          >\n            {totalAmount.gt(0) ? '' : ''}&thinsp;\n            <AnimatedCounter text={formatCurrency(totalAmount, shortBaseSymbol, undefined, true)} />\n          </SensitiveData>\n        </div>\n      </Button>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.container, classNames)} style={style}>\n      <MenuBackdrop\n        isMenuOpen={isBackdropRendered}\n        contentRef={buttonRef}\n        contentClassName={styles.wrapperVisible}\n      />\n      {isInvestorView ? renderInvestorView() : renderDefaultView()}\n      {withContextMenu && isContextMenuShown && (\n        <DropdownMenu\n          ref={menuRef}\n          withPortal\n          shouldTranslateOptions\n          isOpen={isContextMenuOpen}\n          items={items}\n          menuAnchor={contextMenuAnchor}\n          bubbleClassName={styles.menu}\n          fontIconClassName={styles.menuIcon}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={handleMenuItemSelect}\n          onClose={handleContextMenuClose}\n          onCloseAnimationEnd={handleContextMenuHide}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction getTokenName(lang: LangFn, token: UserToken, isStaking: boolean): string {\n  if (!isStaking) {\n    return token.name;\n  }\n\n  switch (token.slug) {\n    case TON_USDE.slug:\n      return lang('%token% Staking', { token: 'Ethena' })[0] as any;\n    default:\n      return lang('%token% Staking', { token: token.name })[0] as any;\n  }\n}\n\nexport default memo(Token);\n","import { type ElementRef, useMemo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport type { ApiStakingState } from '../../../../../api/types';\nimport type { UserToken } from '../../../../../global/types';\nimport type { DropdownItem } from '../../../../ui/Dropdown';\nimport { ActiveTab, SettingsState } from '../../../../../global/types';\n\nimport { DEFAULT_SWAP_FIRST_TOKEN_SLUG, DEFAULT_SWAP_SECOND_TOKEN_SLUG } from '../../../../../config';\nimport { vibrate } from '../../../../../util/haptics';\nimport { compact } from '../../../../../util/iteratees';\nimport { getStakingStateStatus } from '../../../../../util/staking';\nimport { getIsServiceToken } from '../../../../../util/tokens';\n\nimport useContextMenuHandlers from '../../../../../hooks/useContextMenuHandlers';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nexport type MenuHandler = 'add' | 'send' | 'swap' | 'stake' | 'hide' | 'settings'\n  | 'unstake' | 'stakeMore' | 'claimRewards';\n\nfunction useTokenContextMenu(ref: ElementRef<HTMLButtonElement>, options: {\n  isPortrait?: boolean;\n  withContextMenu?: boolean;\n  token: UserToken;\n  isSwapDisabled?: boolean;\n  isStakingAvailable?: boolean;\n  isViewMode?: boolean;\n  stakingState?: ApiStakingState;\n}) {\n  const {\n    openReceiveModal,\n    startTransfer,\n    startSwap,\n    startStaking,\n    openSettingsWithState,\n    toggleTokenVisibility,\n    setLandscapeActionsActiveTabIndex,\n    setReceiveActiveTab,\n    startUnstaking,\n    startStakingClaim,\n  } = getActions();\n\n  const {\n    token,\n    isPortrait,\n    withContextMenu,\n    isStakingAvailable,\n    isSwapDisabled,\n    isViewMode,\n    stakingState,\n  } = options;\n\n  const {\n    isContextMenuOpen, contextMenuAnchor,\n    handleBeforeContextMenu, handleContextMenu,\n    handleContextMenuClose, handleContextMenuHide,\n  } = useContextMenuHandlers({\n    elementRef: ref,\n    isMenuDisabled: !withContextMenu,\n  });\n  const isServiceToken = getIsServiceToken(token);\n  const stakingId = stakingState?.id;\n  const isContextMenuShown = contextMenuAnchor !== undefined;\n  const canBeClaimed = stakingState ? getStakingStateStatus(stakingState) === 'readyToClaim' : undefined;\n  const hasUnclaimedRewards = stakingState?.type === 'jetton'\n    ? !!stakingState.unclaimedRewards\n    : undefined;\n\n  const items: DropdownItem<MenuHandler>[] = useMemo(() => {\n    const mandatoryItems: (false | DropdownItem<MenuHandler>)[] = [\n      !stakingId && {\n        name: 'Hide',\n        fontIcon: 'eye-closed',\n        value: 'hide',\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Manage Tokens',\n        fontIcon: 'menu-params',\n        withDelimiter: !(isViewMode && stakingId),\n        value: 'settings',\n      } satisfies DropdownItem<MenuHandler>,\n    ];\n\n    if (isViewMode) {\n      return compact(mandatoryItems);\n    }\n\n    const result: (false | undefined | DropdownItem<MenuHandler>)[] = stakingId\n      ? [(stakingState?.type !== 'ethena' || !canBeClaimed) && {\n        name: stakingState?.type === 'ethena' ? 'Request Unstaking' : 'Unstake',\n        fontIcon: 'menu-send',\n        value: 'unstake',\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Stake More',\n        fontIcon: 'menu-receive',\n        value: 'stakeMore',\n      } satisfies DropdownItem<MenuHandler>,\n      (canBeClaimed || hasUnclaimedRewards) && {\n        name: 'Claim Rewards',\n        fontIcon: 'menu-gem',\n        value: 'claimRewards',\n      } satisfies DropdownItem<MenuHandler>]\n      : [!isServiceToken && {\n        name: 'Add / Buy',\n        fontIcon: 'menu-plus',\n        value: 'add',\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Send',\n        fontIcon: 'menu-send',\n        value: 'send',\n      } satisfies DropdownItem<MenuHandler>,\n      !isSwapDisabled && {\n        name: 'Swap',\n        fontIcon: 'menu-swap',\n        value: 'swap',\n      } satisfies DropdownItem<MenuHandler>,\n      isStakingAvailable && {\n        name: 'Stake',\n        fontIcon: 'menu-percent',\n        value: 'stake',\n      } satisfies DropdownItem<MenuHandler>];\n\n    return compact(result.concat(mandatoryItems));\n  }, [\n    canBeClaimed, hasUnclaimedRewards, isStakingAvailable, isSwapDisabled, isViewMode,\n    stakingId, stakingState?.type, isServiceToken,\n  ]);\n\n  const handleMenuItemSelect = useLastCallback((value: MenuHandler) => {\n    void vibrate();\n\n    switch (value) {\n      case 'add':\n        if (isPortrait) {\n          openReceiveModal({ chain: token.chain });\n        } else {\n          setReceiveActiveTab({ chain: token.chain });\n          setLandscapeActionsActiveTabIndex({ index: ActiveTab.Receive });\n        }\n        break;\n\n      case 'send':\n        startTransfer({\n          isPortrait,\n          tokenSlug: token.slug,\n        });\n        break;\n\n      case 'swap':\n        startSwap({\n          tokenInSlug: token.slug,\n          tokenOutSlug: token.slug === DEFAULT_SWAP_FIRST_TOKEN_SLUG\n            ? DEFAULT_SWAP_SECOND_TOKEN_SLUG\n            : DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n        });\n        break;\n\n      case 'stake':\n      case 'stakeMore':\n        startStaking({ tokenSlug: token.slug });\n        break;\n\n      case 'settings':\n        openSettingsWithState({ state: SettingsState.Assets });\n        break;\n\n      case 'hide':\n        toggleTokenVisibility({ slug: token.slug, shouldShow: false });\n        break;\n\n      case 'unstake':\n        startUnstaking({ stakingId: stakingId! });\n        break;\n\n      case 'claimRewards':\n        startStakingClaim({ stakingId: stakingId! });\n        break;\n    }\n\n    handleContextMenuClose();\n  });\n\n  return {\n    isContextMenuOpen,\n    isContextMenuShown,\n    contextMenuAnchor,\n    items,\n    isBackdropRendered: isPortrait && isContextMenuOpen,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n    handleMenuItemSelect,\n  };\n}\n\nexport default useTokenContextMenu;\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"EmokOdHM\",\"wrapperLoading\":\"QP7e6eAO\",\"emptyList\":\"XSZ9FBiN\",\"emptyListSeparate\":\"SHa5wmx_\",\"noTokens\":\"KNRqFMNX\",\"noTokens_text\":\"XwRCmsa8\",\"noTokensText\":\"XwRCmsa8\",\"noTokens_header\":\"qDi9Fjks\",\"noTokensHeader\":\"qDi9Fjks\",\"noTokens_description\":\"Lxfq6_5v\",\"noTokensDescription\":\"Lxfq6_5v\",\"openSettingsButton\":\"L2IEb5c3\"};","import React, { memo, useLayoutEffect, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState, ApiTokenWithPrice, ApiVestingInfo } from '../../../../api/types';\nimport type { Theme, UserSwapToken, UserToken } from '../../../../global/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_SMALL_SIZE_PX, IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n  selectIsMultichainAccount,\n  selectIsStakingDisabled,\n  selectIsSwapDisabled,\n  selectMycoin,\n  selectSwapTokens,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { toDecimal } from '../../../../util/decimals';\nimport { buildCollectionByKey } from '../../../../util/iteratees';\nimport { getFullStakingBalance, getIsActiveStakingState, getStakingStateStatus } from '../../../../util/staking';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport { getScrollContainerClosestSelector } from '../../helpers/scrollableContainer';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useVesting from '../../../../hooks/useVesting';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport Spinner from '../../../ui/Spinner';\nimport Token from './Token';\n\nimport styles from './Assets.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isSeparatePanel?: boolean;\n  onTokenClick: (slug: string) => void;\n  onStakedTokenClick: (stakingId?: string) => void;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n};\n\ninterface StateProps {\n  tokens?: UserToken[];\n  swapTokens?: UserSwapToken[];\n  vesting?: ApiVestingInfo[];\n  isInvestorViewEnabled?: boolean;\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n  isMultichainAccount: boolean;\n  isSensitiveDataHidden?: true;\n  states?: ApiStakingState[];\n  isViewMode?: boolean;\n  isSwapDisabled?: boolean;\n  isStakingDisabled?: boolean;\n}\n\nconst LIST_SLICE = 30;\nconst TOKEN_HEIGHT_REM = 4;\n\nfunction Assets({\n  isActive,\n  tokens,\n  swapTokens,\n  vesting,\n  isInvestorViewEnabled,\n  isSeparatePanel,\n  currentTokenSlug,\n  onTokenClick,\n  onStakedTokenClick,\n  baseCurrency,\n  mycoin,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n  theme,\n  states,\n  isViewMode,\n  isSwapDisabled,\n  isStakingDisabled,\n  onScroll,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const { openSettingsWithState } = getActions();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const renderedTokens = useCurrentOrPrev(tokens, true);\n  const renderedMycoin = useCurrentOrPrev(mycoin, true);\n\n  const userMycoin = useMemo(() => {\n    if (!renderedTokens || !renderedMycoin) return undefined;\n\n    return renderedTokens.find(({ slug }) => slug === renderedMycoin.slug);\n  }, [renderedMycoin, renderedTokens]);\n\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const appTheme = useAppTheme(theme);\n\n  const activeStates = useMemo(() => {\n    if (IS_CORE_WALLET) return [];\n\n    return states?.filter(getIsActiveStakingState) ?? [];\n  }, [states]);\n\n  const stakedTokens = useMemo(() => {\n    return activeStates.reduce((prevValue, state) => {\n      const token = tokens?.find(({ slug }) => slug === state.tokenSlug);\n      if (token) {\n        prevValue[state.tokenSlug] = { token, state };\n      }\n      return prevValue;\n    }, {} as Record<string, { token: UserToken; state: ApiStakingState }>);\n  }, [tokens, activeStates]);\n\n  const swapTokensBySlug = useMemo(() => {\n    return buildCollectionByKey<UserSwapToken>(swapTokens ?? [], 'slug');\n  }, [swapTokens]);\n\n  const {\n    shouldRender: shouldRenderStakedTokens,\n  } = useShowTransition({\n    isOpen: Boolean(Object.keys(stakedTokens).length),\n    withShouldRender: true,\n  });\n\n  const {\n    ref: vestingTokenRef,\n    shouldRender: shouldRenderVestingToken,\n    amount: vestingAmount,\n    vestingStatus,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  } = useVesting({ vesting, userMycoin, isDisabled: IS_CORE_WALLET });\n\n  const tokenSlugs = useMemo(() => (\n    renderedTokens\n      ?.filter(({ isDisabled }) => !isDisabled)\n      .map(({ slug }) => slug)\n  ), [renderedTokens]);\n  const [viewportSlugs, getMore] = useInfiniteScroll(\n    undefined, tokenSlugs, undefined, undefined, undefined, isActive, isPortrait,\n  );\n  const viewportIndex = useMemo(() => {\n    if (!viewportSlugs) return -1;\n\n    let index = tokenSlugs!.indexOf(viewportSlugs[0]);\n    if (shouldRenderStakedTokens) {\n      index += Object.keys(stakedTokens).length;\n    }\n    if (shouldRenderVestingToken) {\n      index++;\n    }\n\n    return index;\n  }, [shouldRenderStakedTokens, shouldRenderVestingToken, tokenSlugs, viewportSlugs, stakedTokens]);\n  const tokensBySlug = useMemo(() => (\n    renderedTokens ? buildCollectionByKey(renderedTokens, 'slug') : undefined\n  ), [renderedTokens]);\n  const withAbsolutePositioning = tokenSlugs && tokenSlugs.length > LIST_SLICE;\n\n  const currentContainerHeight = useMemo(() => {\n    if (!withAbsolutePositioning || !viewportSlugs?.length || viewportIndex < 0) return undefined;\n\n    return (viewportIndex + viewportSlugs.length) * TOKEN_HEIGHT_REM;\n  }, [viewportIndex, viewportSlugs?.length, withAbsolutePositioning]);\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, {\n      height: currentContainerHeight && !isLandscape ? `${currentContainerHeight}rem` : '',\n    });\n  }, [isLandscape, currentContainerHeight]);\n\n  const handleOpenTokenSettings = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  const stateByTokenSlug = buildCollectionByKey(states ?? [], 'tokenSlug');\n\n  function renderVestingToken() {\n    return (\n      <Token\n        ref={vestingTokenRef}\n        key=\"vesting\"\n        token={userMycoin!}\n        vestingStatus={vestingStatus}\n        unfreezeEndDate={unfreezeEndDate}\n        amount={vestingAmount}\n        isInvestorView={isInvestorViewEnabled}\n        baseCurrency={baseCurrency}\n        appTheme={appTheme}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onClick={onVestingTokenClick}\n      />\n    );\n  }\n\n  function renderStakedTokens() {\n    return Object.values(stakedTokens).map(({ state, token }) => {\n      const { id, annualYield, yieldType } = state;\n      const stakingStatus = getStakingStateStatus(state);\n      const stakingBalance = getFullStakingBalance(state);\n\n      return (\n        <Token\n          key={`staking-${id}`}\n          token={token}\n          stakingStatus={stakingStatus}\n          annualYield={annualYield}\n          yieldType={yieldType}\n          amount={toDecimal(stakingBalance, token.decimals)}\n          isInvestorView={isInvestorViewEnabled}\n          baseCurrency={baseCurrency}\n          appTheme={appTheme}\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          withContextMenu\n          isViewMode={isViewMode}\n          isSwapDisabled={isSwapDisabled}\n          stakingState={state}\n          onClick={onStakedTokenClick}\n        />\n      );\n    });\n  }\n\n  function renderToken(token: UserToken, indexInViewport: number) {\n    const style = withAbsolutePositioning\n      ? `position: absolute; top: ${(viewportIndex + indexInViewport) * TOKEN_HEIGHT_REM}rem`\n      : undefined;\n\n    const {\n      annualYield,\n      yieldType,\n    } = (!(token.slug in stakedTokens) && stateByTokenSlug[token.slug]) || {};\n    const isStakingAvailable = Boolean(!isStakingDisabled && stateByTokenSlug[token.slug]);\n    const isSwapAvailable = Boolean(swapTokensBySlug[token.slug]);\n\n    return (\n      <Token\n        classNames=\"token-list-item\"\n        style={style}\n        key={token.slug}\n        token={token}\n        annualYield={annualYield}\n        yieldType={yieldType}\n        isInvestorView={isInvestorViewEnabled}\n        isActive={token.slug === currentTokenSlug}\n        baseCurrency={baseCurrency}\n        withChainIcon={isMultichainAccount}\n        appTheme={appTheme}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        withContextMenu\n        isViewMode={isViewMode}\n        isStakingAvailable={isStakingAvailable}\n        isSwapDisabled={isSwapDisabled || !isSwapAvailable}\n        onClick={onTokenClick}\n      />\n    );\n  }\n\n  const isEmpty = !shouldRenderVestingToken && !shouldRenderStakedTokens && !tokenSlugs?.length;\n\n  if (isEmpty) {\n    return (\n      <div className={styles.noTokens}>\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_SMALL_SIZE_PX}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n        <div className={styles.noTokensText}>\n          <span className={styles.noTokensHeader}>{lang('No tokens yet')}</span>\n          <span className={styles.noTokensDescription}>{lang('$no_tokens_description')}</span>\n          <Button\n            onClick={handleOpenTokenSettings}\n            isPrimary\n            isSmall\n            className={styles.openSettingsButton}\n          >\n            {lang('Add Tokens')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName(\n        styles.wrapper,\n        isSeparatePanel && !renderedTokens && styles.wrapperLoading,\n      )}\n      scrollContainerClosest={getScrollContainerClosestSelector(isActive, isPortrait)}\n      items={viewportSlugs}\n      itemSelector=\".token-list-item\"\n      withAbsolutePositioning={withAbsolutePositioning}\n      maxHeight={currentContainerHeight === undefined ? undefined : `${currentContainerHeight}rem`}\n      onLoadMore={getMore}\n      onScroll={onScroll}\n    >\n      {!renderedTokens && (\n        <div key=\"loading\" className={isSeparatePanel ? styles.emptyListSeparate : styles.emptyList}>\n          <Spinner />\n        </div>\n      )}\n      {shouldRenderVestingToken && renderVestingToken()}\n      {shouldRenderStakedTokens && renderStakedTokens()}\n      {viewportSlugs?.map((tokenSlug, i) => renderToken(tokensBySlug![tokenSlug], i))}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId!;\n      const tokens = selectCurrentAccountTokens(global);\n      const swapTokens = selectSwapTokens(global);\n      const accountState = selectCurrentAccountState(global);\n      const { isInvestorViewEnabled } = global.settings;\n\n      const states = selectAccountStakingStates(global, accountId);\n      const isViewMode = selectIsCurrentAccountViewMode(global);\n\n      return {\n        tokens,\n        swapTokens,\n        vesting: accountState?.vesting?.info,\n        isInvestorViewEnabled,\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        mycoin: selectMycoin(global),\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        theme: global.settings.theme,\n        states,\n        isViewMode,\n        isSwapDisabled: selectIsSwapDisabled(global),\n        isStakingDisabled: selectIsStakingDisabled(global),\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Assets),\n);\n","import { useEffect, useMemo } from '../lib/teact/teact';\nimport { getActions } from '../global';\n\nimport type { ApiVestingInfo } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { calcVestingAmountByStatus } from '../components/main/helpers/calcVestingAmountByStatus';\nimport useLastCallback from './useLastCallback';\nimport useShowTransition from './useShowTransition';\n\nexport default function useVesting(\n  { vesting, userMycoin, isDisabled }: {\n    vesting?: ApiVestingInfo[];\n    userMycoin?: UserToken;\n    isDisabled?: boolean;\n  },\n) {\n  const { loadMycoin, openVestingModal } = getActions();\n\n  const hasVesting = !isDisabled && Boolean(vesting?.length);\n  const isMycoinLoaded = Boolean(userMycoin);\n\n  useEffect(() => {\n    if (isMycoinLoaded || !hasVesting) return;\n\n    loadMycoin();\n  }, [hasVesting, isMycoinLoaded]);\n\n  const amount = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    return calcVestingAmountByStatus(vesting, ['frozen', 'ready']);\n  }, [hasVesting, vesting]);\n\n  const unfreezeEndDate = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    for (const { parts } of vesting) {\n      for (const part of parts) {\n        if (part.status === 'ready') {\n          return new Date(part.timeEnd).getTime();\n        }\n      }\n    }\n\n    return undefined;\n  }, [hasVesting, vesting]);\n\n  const {\n    shouldRender,\n    ref,\n  } = useShowTransition<HTMLButtonElement>({\n    isOpen: Boolean(hasVesting && isMycoinLoaded && userMycoin && amount !== '0'),\n    withShouldRender: true,\n  });\n\n  const onVestingTokenClick = useLastCallback(() => {\n    openVestingModal();\n  });\n\n  return {\n    shouldRender,\n    ref,\n    amount,\n    vestingStatus: unfreezeEndDate ? 'readyToUnfreeze' as const : 'frozen' as const,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aKYq5U9K\",\"backButton\":\"_XXYEoWI\",\"backIcon\":\"bCLB_xx7\",\"content\":\"ADFSqjjF\",\"title\":\"L1JCMSY4\",\"amount\":\"hsn7RdaK\",\"menuButton\":\"vvSB5YmR\",\"menu\":\"X205Pp2C\",\"menuItem\":\"S3NdyNSK\",\"menuItemDescription\":\"lRocmYkd\",\"sendAllButton\":\"PREqGxPp\",\"burnAllButton\":\"AsupPLFP\",\"buttonIcon\":\"clmFLMte\"};","import React, { memo, useEffect, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n  NFT_FRAGMENT_COLLECTIONS,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n  TON_DNS_COLLECTION,\n} from '../../../../config';\nimport { selectCurrentAccountState, selectIsCurrentAccountViewMode } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { getDomainsExpirationDate } from '../../../../util/dns';\nimport { compact } from '../../../../util/iteratees';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getExplorerName, getExplorerNftCollectionUrl } from '../../../../util/url';\n\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ntype MenuHandler = 'sendAll' | 'fragment' | 'getgems' | 'tonExplorer' | 'hideAll' | 'burnAll' | 'selectAll'\n  | 'removeTab' | 'addTab' | 'renew';\n\ninterface StateProps {\n  currentCollectionAddress?: string;\n  nfts?: Record<string, ApiNft>;\n  isTestnet?: boolean;\n  isViewMode?: boolean;\n  collectionTabs?: string[];\n  dnsExpiration?: Record<string, number>;\n}\n\nfunction NftCollectionHeader({\n  currentCollectionAddress,\n  nfts,\n  isTestnet,\n  isViewMode,\n  collectionTabs,\n  dnsExpiration,\n}: StateProps) {\n  const {\n    closeNftCollection,\n    selectNfts,\n    startTransfer,\n    burnNfts,\n    openHideNftModal,\n    addCollectionTab,\n    removeCollectionTab,\n    openDomainRenewalModal,\n  } = getActions();\n\n  const lang = useLang();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuAnchor);\n  const ref = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n\n  const isTelegramGifts = currentCollectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION;\n\n  const collectionNfts = useMemo(() => {\n    if (!currentCollectionAddress || !nfts) {\n      return [];\n    }\n\n    return Object.values(nfts).filter((nft) => {\n      return (isTelegramGifts && nft.isTelegramGift) || nft.collectionAddress === currentCollectionAddress;\n    });\n  }, [currentCollectionAddress, isTelegramGifts, nfts]);\n\n  const dnsExpireInDays = useMemo(() => {\n    if (currentCollectionAddress !== TON_DNS_COLLECTION) return undefined;\n    const date = getDomainsExpirationDate(collectionNfts, undefined, dnsExpiration);\n\n    return date ? getCountDaysToDate(date) : undefined;\n  }, [collectionNfts, currentCollectionAddress, dnsExpiration]);\n\n  const collectionName = isTelegramGifts\n    ? lang('Telegram Gifts')\n    : collectionNfts[0].collectionName ?? lang('Unnamed Collection');\n\n  const menuItems: DropdownItem<MenuHandler>[] = useMemo(() => {\n    const isInTabs = collectionTabs?.includes(currentCollectionAddress!);\n\n    return compact([\n      !isViewMode && {\n        name: 'Send All',\n        value: 'sendAll',\n      } satisfies DropdownItem<MenuHandler>,\n      collectionNfts[0].isOnFragment && {\n        name: 'Fragment',\n        value: 'fragment',\n        fontIcon: 'external',\n      } satisfies DropdownItem<MenuHandler>,\n      {\n        name: 'Getgems',\n        value: 'getgems',\n        fontIcon: 'external',\n      },\n      !isTelegramGifts && {\n        name: getExplorerName('ton'),\n        value: 'tonExplorer',\n        fontIcon: 'external',\n      },\n      !isViewMode && currentCollectionAddress === TON_DNS_COLLECTION && {\n        name: collectionNfts.length > 1 ? 'Renew All' : 'Renew',\n        value: 'renew',\n        description: dnsExpireInDays && dnsExpireInDays < 0\n          ? (collectionNfts.length > 1 ? '$expired_many' : 'Expired')\n          : lang('$expires_in %days%', {\n            days: lang('$in_days', dnsExpireInDays),\n          }, undefined, collectionNfts.length) as string,\n      } satisfies DropdownItem<MenuHandler>,\n      !IS_CORE_WALLET && {\n        name: 'Hide All',\n        value: 'hideAll',\n      } satisfies DropdownItem<MenuHandler>,\n      !isViewMode && {\n        name: 'Burn All',\n        value: 'burnAll',\n        isDangerous: true,\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Select All',\n        value: 'selectAll',\n        withDelimiter: true,\n      },\n      {\n        name: isInTabs ? lang('Remove Tab') : lang('Add Tab'),\n        value: isInTabs ? 'removeTab' : 'addTab',\n      },\n    ]);\n  }, [collectionNfts, collectionTabs, currentCollectionAddress, dnsExpireInDays, isTelegramGifts, isViewMode, lang]);\n\n  useHistoryBack({\n    isActive: true,\n    onBack: closeNftCollection,\n  });\n\n  useEffect(() => captureEscKeyListener(closeNftCollection), []);\n\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const handleMenuItemClick = useLastCallback((value: MenuHandler) => {\n    switch (value) {\n      case 'sendAll': {\n        startTransfer({\n          nfts: collectionNfts.filter(({ isOnSale }) => !isOnSale),\n          isPortrait: getIsPortrait(),\n        });\n\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        void openUrl(\n          isTelegramGifts ? `${getgemsBaseUrl}top-gifts` : `${getgemsBaseUrl}collection/${currentCollectionAddress}`,\n        );\n\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftCollectionUrl(currentCollectionAddress, isTestnet);\n        if (url) {\n          void openUrl(url);\n        }\n\n        break;\n      }\n\n      case 'fragment': {\n        if (isTelegramGifts) {\n          void openUrl('https://fragment.com/gifts');\n        } else if (currentCollectionAddress === NFT_FRAGMENT_COLLECTIONS[0]) {\n          void openUrl('https://fragment.com/numbers');\n        } else if (currentCollectionAddress === NFT_FRAGMENT_COLLECTIONS[1]) {\n          void openUrl('https://fragment.com');\n        } else {\n          const collectionSlug = collectionName.toLowerCase().replace(/\\W/g, '').replace(/s$/, '');\n          void openUrl(`https://fragment.com/gifts/${collectionSlug}`);\n        }\n\n        break;\n      }\n\n      case 'selectAll': {\n        selectNfts({\n          addresses: collectionNfts\n            .filter(({ isOnSale }) => !isOnSale)\n            .map(({ address }) => address),\n        });\n\n        break;\n      }\n\n      case 'burnAll': {\n        burnNfts({ nfts: collectionNfts.filter(({ isOnSale }) => !isOnSale) });\n\n        break;\n      }\n\n      case 'hideAll': {\n        openHideNftModal({ addresses: collectionNfts.map((nft) => nft.address), isCollection: true });\n\n        break;\n      }\n\n      case 'addTab': {\n        addCollectionTab({ collectionAddress: currentCollectionAddress! });\n\n        break;\n      }\n\n      case 'removeTab': {\n        closeNftCollection();\n        removeCollectionTab({ collectionAddress: currentCollectionAddress! });\n\n        break;\n      }\n\n      case 'renew': {\n        openDomainRenewalModal({ addresses: collectionNfts.map((nft) => nft.address) });\n        break;\n      }\n    }\n  });\n\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n\n  const handleMenuClose = useLastCallback(() => {\n    setMenuAnchor(undefined);\n  });\n\n  return (\n    <div className={styles.root}>\n      <Button\n        isSimple\n        isText\n        ariaLabel={lang('Back')}\n        className={styles.backButton}\n        onClick={closeNftCollection}\n      >\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n      </Button>\n\n      <div className={styles.content}>\n        <div className={styles.title}>{collectionName}</div>\n        <div className={styles.amount}>\n          {collectionNfts.length > 1 ? lang('%amount% NFTs', { amount: collectionNfts.length }) : lang('1 NFT')}\n        </div>\n      </div>\n\n      <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n        <i className=\"icon-menu-dots\" aria-hidden />\n      </Button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        ref={menuRef}\n        withPortal\n        shouldTranslateOptions\n        menuPositionX=\"right\"\n        menuAnchor={menuAnchor}\n        getTriggerElement={getTriggerElement}\n        getRootElement={getRootElement}\n        getMenuElement={getMenuElement}\n        getLayout={getLayout}\n        buttonClassName={styles.menuItem}\n        bubbleClassName={styles.menu}\n        itemDescriptionClassName={styles.menuItemDescription}\n        items={menuItems}\n        onSelect={handleMenuItemClick}\n        onClose={handleMenuClose}\n      />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    byAddress: nfts,\n    currentCollectionAddress,\n    collectionTabs,\n    dnsExpiration,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return {\n    currentCollectionAddress,\n    nfts,\n    isTestnet: global.settings.isTestnet,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    collectionTabs,\n    dnsExpiration,\n  };\n}, (global, ownProps, stickToFirst) => {\n  const {\n    currentCollectionAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return stickToFirst(currentCollectionAddress);\n})(NftCollectionHeader));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Radio.module.scss';\n\ninterface OwnProps {\n  id?: string;\n  name: string;\n  value: string;\n  className?: string;\n  isChecked?: boolean;\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nfunction Radio({\n  id, name, value, isChecked, className, onChange,\n}: OwnProps) {\n  return (\n    <div className={buildClassName(styles.root, className, isChecked && styles.checked)}>\n      <input\n        id={id}\n        type=\"radio\"\n        name={name}\n        className=\"visually-hidden\"\n        value={value}\n        checked={isChecked}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nexport default memo(Radio);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OyHWXuOj\",\"checked\":\"BCTrjQeD\"};","import type React from '../../../lib/teact/teact';\nimport { useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { ApiNft } from '../../../api/types';\nimport type { DropdownItem } from '../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n  MTW_CARDS_COLLECTION,\n} from '../../../config';\nimport { isTonDnsNft } from '../../../util/dns';\nimport { compact } from '../../../util/iteratees';\nimport { openUrl } from '../../../util/openUrl';\nimport { getExplorerName, getExplorerNftUrl } from '../../../util/url';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nexport type NftMenuHandler = 'send' | 'tondns' | 'fragment' | 'getgems' | 'tonExplorer' | 'collection' | 'hide'\n  | 'unhide' | 'not_scam' | 'burn' | 'select' | 'installCard' | 'resetCard' | 'installAccentColor' | 'resetAccentColor'\n  | 'renew' | 'linkDomain';\n\nconst ON_SALE_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Cannot be sent',\n  value: 'send',\n  description: 'NFT is for sale',\n  isDisabled: true,\n};\nconst TON_DNS_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Configure DNS',\n  value: 'tondns',\n  fontIcon: 'external',\n};\nconst SEND_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Send',\n  value: 'send',\n};\nconst FRAGMENT_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Fragment',\n  value: 'fragment',\n  fontIcon: 'external',\n};\nconst GETGEMS_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Getgems',\n  value: 'getgems',\n  fontIcon: 'external',\n};\nconst TON_EXPLORER_ITEM: DropdownItem<NftMenuHandler> = {\n  name: getExplorerName('ton'),\n  value: 'tonExplorer',\n  fontIcon: 'external',\n};\nconst COLLECTION_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Collection',\n  value: 'collection',\n};\nconst HIDE_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Hide',\n  value: 'hide',\n};\nconst RENEW_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Renew',\n  value: 'renew',\n};\nconst NOT_SCAM: DropdownItem<NftMenuHandler> = {\n  name: 'Not Scam',\n  value: 'not_scam',\n};\nconst UNHIDE: DropdownItem<NftMenuHandler> = {\n  name: 'Unhide',\n  value: 'unhide',\n};\nconst BURN_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Burn',\n  value: 'burn',\n  isDangerous: true,\n};\nconst SELECT_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Select',\n  value: 'select',\n  withDelimiter: true,\n};\nconst INSTALL_CARD: DropdownItem<NftMenuHandler> = {\n  name: 'Install Card',\n  value: 'installCard',\n};\nconst RESET_CARD: DropdownItem<NftMenuHandler> = {\n  name: 'Reset Card',\n  value: 'resetCard',\n};\nconst INSTALL_ACCENT_COLOR: DropdownItem<NftMenuHandler> = {\n  name: 'Apply Palette',\n  value: 'installAccentColor',\n};\nconst RESET_ACCENT_COLOR: DropdownItem<NftMenuHandler> = {\n  name: 'Reset Palette',\n  value: 'resetAccentColor',\n};\nconst LINK_TO_ADDRESS: DropdownItem<NftMenuHandler> = {\n  name: 'Link to Wallet',\n  value: 'linkDomain',\n};\nconst CHANGE_LINKED_ADDRESS: DropdownItem<NftMenuHandler> = {\n  name: 'Change Wallet',\n  value: 'linkDomain',\n};\n\nexport default function useNftMenu({\n  nft,\n  isViewMode,\n  dnsExpireInDays,\n  linkedAddress,\n  isNftBlacklisted,\n  isNftWhitelisted,\n  isNftInstalled,\n  isNftAccentColorInstalled,\n}: {\n  nft?: ApiNft;\n  isViewMode: boolean;\n  dnsExpireInDays?: number;\n  linkedAddress?: string;\n  isNftBlacklisted?: boolean;\n  isNftWhitelisted?: boolean;\n  isNftInstalled?: boolean;\n  isNftAccentColorInstalled?: boolean;\n}) {\n  const {\n    startTransfer,\n    selectNfts,\n    openNftCollection,\n    burnNfts,\n    addNftsToBlacklist,\n    addNftsToWhitelist,\n    closeMediaViewer,\n    closeNftAttributesModal,\n    openUnhideNftModal,\n    setCardBackgroundNft,\n    clearCardBackgroundNft,\n    installAccentColorFromNft,\n    clearAccentColorFromNft,\n    openDomainRenewalModal,\n    openDomainLinkingModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  function closeOverlays() {\n    closeMediaViewer();\n    closeNftAttributesModal();\n  }\n\n  const handleMenuItemSelect = useLastCallback((\n    value: NftMenuHandler,\n    e?: React.MouseEvent,\n  ) => {\n    const { isTestnet } = getGlobal().settings;\n    const isExternal = e?.shiftKey || e?.ctrlKey || e?.metaKey;\n\n    switch (value) {\n      case 'send': {\n        startTransfer({\n          isPortrait: getIsPortrait(),\n          nfts: [nft!],\n        });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftUrl(nft!.address, isTestnet)!;\n\n        void openUrl(url, { isExternal });\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        const getgemsUrl = nft!.collectionAddress\n          ? `${getgemsBaseUrl}collection/${nft!.collectionAddress}/${nft!.address}`\n          : `${getgemsBaseUrl}nft/${nft!.address}`;\n\n        void openUrl(getgemsUrl, { isExternal });\n        break;\n      }\n\n      case 'tondns': {\n        const url = `https://dns.ton.org/#${(nft!.name || '').replace(/\\.ton$/i, '')}`;\n\n        void openUrl(url, { isExternal });\n        break;\n      }\n\n      case 'installCard': {\n        setCardBackgroundNft({ nft: nft! });\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetCard': {\n        clearCardBackgroundNft();\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'installAccentColor': {\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetAccentColor': {\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'fragment': {\n        let url: string;\n        const { collectionName, name, metadata: { fragmentUrl } } = nft!;\n\n        if (fragmentUrl) {\n          url = fragmentUrl;\n        } else if (collectionName?.toLowerCase().includes('numbers')) {\n          url = `https://fragment.com/number/${name?.replace(/[^0-9]/g, '')}`;\n        } else {\n          url = `https://fragment.com/username/${encodeURIComponent(name?.substring(1) || '')}`;\n        }\n\n        void openUrl(url, { isExternal });\n        break;\n      }\n\n      case 'collection': {\n        openNftCollection({ address: nft!.collectionAddress! }, { forceOnHeavyAnimation: true });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'hide': {\n        addNftsToBlacklist({ addresses: [nft!.address] });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'not_scam': {\n        openUnhideNftModal({ address: nft!.address, name: nft!.name });\n\n        break;\n      }\n\n      case 'unhide': {\n        addNftsToWhitelist({ addresses: [nft!.address] });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'burn': {\n        burnNfts({ nfts: [nft!] });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'select': {\n        selectNfts({ addresses: [nft!.address] });\n        break;\n      }\n\n      case 'renew': {\n        openDomainRenewalModal({ addresses: [nft!.address] });\n        break;\n      }\n\n      case 'linkDomain': {\n        openDomainLinkingModal({ address: nft!.address });\n        break;\n      }\n    }\n  });\n\n  const menuItems: DropdownItem<NftMenuHandler>[] = useMemo(() => {\n    if (!nft) return [];\n\n    const {\n      collectionAddress, isOnSale, isOnFragment, isScam,\n    } = nft;\n    const isTonDns = isTonDnsNft(nft);\n    const isCard = !IS_CORE_WALLET && nft.collectionAddress === MTW_CARDS_COLLECTION;\n\n    return compact([\n      !isViewMode && (isOnSale ? ON_SALE_ITEM : SEND_ITEM),\n      !isViewMode && isTonDns && !isOnSale && dnsExpireInDays !== undefined && {\n        ...RENEW_ITEM,\n        description: dnsExpireInDays < 0\n          ? 'Expired'\n          : lang('$expires_in %days%', { days: lang('$in_days', dnsExpireInDays) }, undefined, 1),\n      },\n      !isViewMode && isTonDns && !isOnSale && (linkedAddress ? CHANGE_LINKED_ADDRESS : LINK_TO_ADDRESS),\n      !IS_CORE_WALLET && ((!isScam && !isNftBlacklisted) || isNftWhitelisted) && HIDE_ITEM,\n      !IS_CORE_WALLET && isScam && !isNftWhitelisted && NOT_SCAM,\n      !IS_CORE_WALLET && !isScam && isNftBlacklisted && UNHIDE,\n      ...(!isOnSale && !isViewMode ? [\n        BURN_ITEM,\n        SELECT_ITEM,\n      ] : []),\n      collectionAddress && COLLECTION_ITEM,\n      isTonDns && !isViewMode && TON_DNS_ITEM,\n      ...(isCard ? [!isNftInstalled ? INSTALL_CARD : RESET_CARD] : []),\n      ...(isCard ? [!isNftAccentColorInstalled ? INSTALL_ACCENT_COLOR : RESET_ACCENT_COLOR] : []),\n\n      isOnFragment && FRAGMENT_ITEM,\n      GETGEMS_ITEM,\n      TON_EXPLORER_ITEM,\n    ]);\n  }, [\n    nft, isViewMode, dnsExpireInDays, lang, linkedAddress, isNftBlacklisted,\n    isNftWhitelisted, isNftInstalled, isNftAccentColorInstalled,\n  ]);\n\n  return { menuItems, handleMenuItemSelect };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"Zwrm7aDb\",\"icon\":\"lGtsxpv1\",\"menu\":\"Pc0Y7YGI\",\"contextMenu\":\"kuj1PIIl\",\"menuBubble\":\"UhvMK8mg\",\"item\":\"AZjbQROQ\",\"menuItemDescription\":\"XbyfBxfu\"};","import type { ElementRef } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\nimport type { Layout } from '../../../../hooks/useMenuPosition';\n\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectTonDnsLinkedAddress,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport { usePrevDuringAnimationSimple } from '../../../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from '../../../mediaViewer/hooks/useNftMenu';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../../../ui/Menu';\n\nimport styles from './NftMenu.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  ref?: ElementRef<HTMLButtonElement>;\n  isContextMenuMode?: boolean;\n  dnsExpireInDays?: number;\n  menuAnchor?: IAnchorPosition;\n  className?: string;\n  onOpen: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isViewMode: boolean;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  linkedAddress?: string;\n}\n\nconst CONTEXT_MENU_VERTICAL_SHIFT_PX = 4;\n\nfunction NftMenu({\n  isViewMode,\n  isContextMenuMode,\n  nft,\n  ref,\n  dnsExpireInDays,\n  linkedAddress,\n  menuAnchor,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  cardBackgroundNft,\n  accentColorNft,\n  className,\n  onOpen,\n  onClose,\n  onCloseAnimationEnd,\n}: OwnProps & StateProps) {\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft,\n    isViewMode,\n    dnsExpireInDays,\n    linkedAddress,\n    isNftBlacklisted,\n    isNftWhitelisted,\n    isNftInstalled,\n    isNftAccentColorInstalled,\n  });\n  let buttonRef = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const isOpen = Boolean(menuAnchor);\n  if (ref) {\n    buttonRef = ref;\n  }\n\n  const getTriggerElement = useLastCallback(() => buttonRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({\n    withPortal: true,\n    topShiftY: isContextMenuMode ? CONTEXT_MENU_VERTICAL_SHIFT_PX : 0,\n    preferredPositionX: isContextMenuMode ? 'left' : 'right',\n  }));\n\n  const lang = useLang();\n\n  const handleButtonClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    if (isOpen) {\n      onClose();\n    } else {\n      void vibrate();\n      onOpen();\n    }\n  };\n\n  return (\n    <>\n      <button\n        ref={buttonRef}\n        type=\"button\"\n        className={buildClassName(styles.button, className)}\n        aria-label={lang('NFT Menu')}\n        onClick={handleButtonClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-menu-dots')} aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isOpen}\n        ref={menuRef}\n        withPortal\n        menuAnchor={menuAnchor}\n        menuPositionX=\"right\"\n        getTriggerElement={!isContextMenuMode ? getTriggerElement : undefined}\n        getRootElement={getRootElement}\n        getMenuElement={getMenuElement}\n        getLayout={getLayout}\n        items={menuItems}\n        shouldTranslateOptions\n        className={isContextMenuMode ? styles.contextMenu : styles.menu}\n        bubbleClassName={styles.menuBubble}\n        buttonClassName={styles.item}\n        itemDescriptionClassName={styles.menuItemDescription}\n        shouldCleanup\n        onClose={onClose}\n        onCloseAnimationEnd={onCloseAnimationEnd}\n        onSelect={handleMenuItemSelect}\n      />\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { nft }): StateProps => {\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n  const linkedAddress = selectTonDnsLinkedAddress(global, nft);\n\n  return {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    cardBackgroundNft,\n    accentColorNft,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    linkedAddress,\n  };\n})(NftMenu));\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"ITYna3lB\",\"emptyListContent\":\"VvA3zcqe\",\"emptyListTitle\":\"dfDaqpor\",\"emptyListText\":\"T93VHAYd\",\"emptyListLoading\":\"AmFNUCBn\",\"emptyListButton\":\"MQHqPBS8\",\"sticker\":\"e1KDXttI\",\"list\":\"dpiMguJa\",\"landscapeList\":\"UaTzvOas\",\"item\":\"wdIabR9U\",\"image\":\"P5UTNS9t\",\"item_onSale\":\"TcBQN9hf\",\"itemOnSale\":\"TcBQN9hf\",\"nonInteractive\":\"O3ePb4wF\",\"itemWithMenu\":\"AFzPXqVX\",\"imageWrapper\":\"wvB9itFX\",\"warning\":\"qtSm9QOQ\",\"imageSelected\":\"xeApkBtH\",\"fullImage\":\"tWs_EVqC\",\"warningBlock\":\"VpqrQ0wB\",\"infoWrapper\":\"v0SE1VHL\",\"title\":\"KokxXqZI\",\"collection\":\"_xEjK2pw\",\"radio\":\"VqbpRLGL\",\"notcoinVoucherButton\":\"GIjQ3tN4\",\"notcoinVoucherIcon\":\"mfxV4144\"};","import React, {\n  type ElementRef,\n  memo, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { ObserveFn } from '../../../../hooks/useIntersectionObserver';\nimport { type IAnchorPosition } from '../../../../global/types';\n\nimport { TON_DNS_RENEWAL_NFT_WARNING_DAYS } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { vibrate } from '../../../../util/haptics';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { IS_ANDROID, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport useContextMenuHandlers from '../../../../hooks/useContextMenuHandlers';\nimport useFlag from '../../../../hooks/useFlag';\nimport { useIsIntersecting } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Image from '../../../ui/Image';\nimport Radio from '../../../ui/Radio';\nimport NftMenu from './NftMenu';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  selectedAddresses?: string[];\n  observeIntersection: ObserveFn;\n  tonDnsExpiration?: number;\n  isViewAccount?: boolean;\n}\n\ninterface UseLottieReturnType {\n  isLottie: boolean;\n  shouldPlay?: boolean;\n  noLoop?: boolean;\n  markHover?: NoneToVoidFunction;\n  unmarkHover?: NoneToVoidFunction;\n}\n\nfunction Nft({\n  nft,\n  selectedAddresses,\n  tonDnsExpiration,\n  observeIntersection,\n  isViewAccount,\n}: OwnProps) {\n  const {\n    selectNfts,\n    clearNftSelection,\n    openDomainRenewalModal,\n    openNftAttributesModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const ref = useRef<HTMLDivElement>();\n\n  const {\n    isLottie, shouldPlay, noLoop, markHover, unmarkHover,\n  } = useLottie(nft, ref, observeIntersection);\n\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isSelectionEnabled = !!selectedAddresses && selectedAddresses.length > 0;\n  const isSelected = useMemo(() => selectedAddresses?.includes(nft.address), [selectedAddresses, nft.address]);\n  const isMenuOpen = Boolean(menuAnchor);\n  const dnsExpireInDays = tonDnsExpiration ? getCountDaysToDate(tonDnsExpiration) : undefined;\n  const isDnsExpireSoon = dnsExpireInDays !== undefined ? dnsExpireInDays <= TON_DNS_RENEWAL_NFT_WARNING_DAYS : false;\n  const {\n    shouldRender: shouldRenderWarning,\n    ref: warningRef,\n  } = useShowTransition({\n    isOpen: isSelectionEnabled && nft.isOnSale,\n    withShouldRender: true,\n  });\n\n  const {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuHide,\n    handleContextMenuClose,\n  } = useContextMenuHandlers({\n    elementRef: ref,\n  });\n\n  const fullClassName = buildClassName(\n    styles.item,\n    !isSelectionEnabled && nft.isOnSale && styles.item_onSale,\n    isMenuOpen && styles.itemWithMenu,\n    isSelectionEnabled && nft.isOnSale && styles.nonInteractive,\n  );\n\n  function handleClick() {\n    if (isSelectionEnabled) {\n      if (isSelected) {\n        clearNftSelection({ address: nft.address });\n      } else {\n        selectNfts({ addresses: [nft.address] });\n      }\n      return;\n    }\n\n    void vibrate();\n    openNftAttributesModal({ nft });\n  }\n\n  function handleRenewDomainClick(e: React.MouseEvent) {\n    stopEvent(e);\n\n    openDomainRenewalModal({ addresses: [nft.address] });\n  }\n\n  const handleOpenContextMenu = useLastCallback(() => {\n    setMenuAnchor(contextMenuAnchor);\n  });\n\n  const handleOpenMenu = useLastCallback(() => {\n    const { right: x, y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n\n  const handleCloseMenu = useLastCallback(() => {\n    setMenuAnchor(undefined);\n    handleContextMenuClose();\n  });\n\n  useSyncEffect(() => {\n    if (isContextMenuOpen) {\n      handleOpenContextMenu();\n    } else {\n      handleCloseMenu();\n    }\n  }, [isContextMenuOpen]);\n\n  function renderDnsExpireWarning() {\n    return (\n      <button\n        type=\"button\"\n        className={buildClassName(styles.warningBlock, isViewAccount && styles.nonInteractive)}\n        onClick={!isViewAccount ? handleRenewDomainClick : undefined}\n      >\n        {dnsExpireInDays! < 0\n          ? 'Expired'\n          : lang('$expires_in %days%', { days: lang('$in_days', dnsExpireInDays) }, undefined, 1)}\n      </button>\n    );\n  }\n\n  return (\n    <div\n      key={nft.address}\n      ref={ref}\n      className={fullClassName}\n      onMouseEnter={markHover}\n      onMouseLeave={unmarkHover}\n      onClick={!isSelectionEnabled || !nft.isOnSale ? handleClick : undefined}\n      onMouseDown={handleBeforeContextMenu}\n      onContextMenu={handleContextMenu}\n    >\n      {isSelectionEnabled && !nft.isOnSale && (\n        <Radio\n          isChecked={isSelected}\n          name=\"nft\"\n          value={nft.address}\n          className={styles.radio}\n        />\n      )}\n      {!isSelectionEnabled && (\n        <NftMenu\n          nft={nft}\n          isContextMenuMode={Boolean(contextMenuAnchor)}\n          dnsExpireInDays={dnsExpireInDays}\n          menuAnchor={menuAnchor}\n          onOpen={handleOpenMenu}\n          onClose={handleCloseMenu}\n          onCloseAnimationEnd={handleContextMenuHide}\n        />\n      )}\n      {isLottie ? (\n        <div\n          className={styles.imageWrapper}\n        >\n          <AnimatedIconWithPreview\n            shouldStretch\n            play={shouldPlay}\n            noLoop={noLoop}\n            tgsUrl={nft.metadata.lottie}\n            previewUrl={nft.thumbnail}\n            noPreviewTransition\n            className={buildClassName(styles.image, isSelected && styles.imageSelected)}\n          />\n          {isDnsExpireSoon && renderDnsExpireWarning()}\n        </div>\n      ) : (\n        <Image\n          url={nft.thumbnail}\n          className={styles.imageWrapper}\n          imageClassName={buildClassName(styles.image, isSelected && styles.imageSelected)}\n        >\n          {isDnsExpireSoon && renderDnsExpireWarning()}\n        </Image>\n      )}\n      {shouldRenderWarning && (\n        <div ref={warningRef} className={styles.warning}>\n          {lang('For sale. Cannot be sent and burned')}\n        </div>\n      )}\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>{nft.name || shortenAddress(nft.address, 4)}</b>\n      </div>\n      <div className={styles.collection}>{nft.collectionName}</div>\n    </div>\n  );\n}\n\nexport default memo(Nft);\n\nfunction useLottie(\n  nft: ApiNft,\n  ref: ElementRef<HTMLDivElement>,\n  observeIntersection: ObserveFn,\n): UseLottieReturnType {\n  const isLottie = Boolean(nft.metadata?.lottie);\n\n  const isIntersecting = useIsIntersecting(ref, isLottie ? observeIntersection : undefined);\n  const [isHover, markHover, unmarkHover] = useFlag();\n\n  if (!isLottie) {\n    return { isLottie };\n  }\n\n  const shouldPlay = isIntersecting || isHover;\n  const noLoop = !isHover;\n\n  return {\n    isLottie,\n    shouldPlay,\n    noLoop,\n    ...!(IS_IOS || IS_ANDROID) && {\n      markHover,\n      unmarkHover,\n    },\n  };\n}\n","import React, { memo, useEffect, useLayoutEffect, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  NFT_MARKETPLACE_TITLE,\n  NFT_MARKETPLACE_URL,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n} from '../../../../config';\nimport renderText from '../../../../global/helpers/renderText';\nimport { selectCurrentAccountState, selectIsCurrentAccountViewMode } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getTonDnsExpirationDate } from '../../../../util/dns';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getHostnameFromUrl } from '../../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport { getScrollContainerClosestSelector } from '../../helpers/scrollableContainer';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport { useIntersectionObserver } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Spinner from '../../../ui/Spinner';\nimport Nft from './Nft';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  orderedAddresses?: string[];\n  selectedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  isNftBuyingDisabled?: boolean;\n  dnsExpiration?: Record<string, number>;\n  isViewAccount?: boolean;\n}\n\nconst INTERSECTION_THROTTLE = 200;\nconst INITIAL_SLICE_LENGTH = 50;\nconst SCROLL_THRESHOLD = 800;\n\nfunction Nfts({\n  isActive,\n  orderedAddresses,\n  selectedAddresses,\n  byAddress,\n  currentCollectionAddress,\n  dnsExpiration,\n  isNftBuyingDisabled,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  isViewAccount,\n}: OwnProps & StateProps) {\n  const { fetchNftsFromCollection, clearNftsSelection } = getActions();\n\n  const lang = useLang();\n  const containerRef = useRef<HTMLDivElement>();\n  const { isPortrait, isLandscape } = useDeviceScreen();\n  const hasSelection = Boolean(selectedAddresses?.length);\n  const [isScrolled, setIsScrolled] = useState(false);\n  const scrollContainerClosest = getScrollContainerClosestSelector(true, isPortrait) || '.nfts-container';\n\n  useEffect(() => {\n    if (currentCollectionAddress) {\n      fetchNftsFromCollection({ collectionAddress: currentCollectionAddress });\n    }\n  }, [currentCollectionAddress]);\n\n  useEffect(clearNftsSelection, [clearNftsSelection, isActive, currentCollectionAddress]);\n  useEffect(() => (hasSelection ? captureEscKeyListener(clearNftsSelection) : undefined), [hasSelection]);\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n\n    const result = orderedAddresses.reduce<ApiNft[]>((acc, address) => {\n      const nft = byAddress[address];\n\n      if (nft && (\n        !currentCollectionAddress\n        || nft.collectionAddress === currentCollectionAddress\n        || (currentCollectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION && nft.isTelegramGift)\n      ) && (\n        !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n      ) && (\n        !blacklistedNftAddressesSet.has(nft.address)\n      )) {\n        acc.push(nft);\n      }\n\n      return acc;\n    }, []);\n\n    return isScrolled ? result : result.slice(0, INITIAL_SLICE_LENGTH);\n  }, [\n    byAddress, currentCollectionAddress, orderedAddresses, blacklistedNftAddresses, whitelistedNftAddresses,\n    isScrolled,\n  ]);\n\n  const handleNativeScroll = useLastCallback(() => {\n    const closestScrollContainer = containerRef.current?.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer || isScrolled) {\n      return;\n    }\n\n    const { scrollTop, scrollHeight, clientHeight } = closestScrollContainer;\n    const distanceToBottom = scrollHeight - scrollTop - clientHeight;\n\n    if (distanceToBottom <= SCROLL_THRESHOLD) {\n      setIsScrolled(true);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (!scrollContainerClosest || !nfts?.length) return undefined;\n\n    const closestScrollContainer = containerRef.current?.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer) return undefined;\n\n    closestScrollContainer.addEventListener('scroll', handleNativeScroll);\n\n    return () => {\n      closestScrollContainer.removeEventListener('scroll', handleNativeScroll);\n    };\n  }, [nfts?.length, scrollContainerClosest]);\n\n  const { observe: observeIntersection } = useIntersectionObserver({\n    throttleMs: INTERSECTION_THROTTLE,\n    isDisabled: !nfts?.length,\n  });\n\n  function handleNftMarketplaceClick(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    stopEvent(e);\n\n    void openUrl(NFT_MARKETPLACE_URL, {\n      title: NFT_MARKETPLACE_TITLE,\n      subtitle: getHostnameFromUrl(NFT_MARKETPLACE_URL),\n    });\n  }\n\n  if (nfts === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (nfts.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={isPortrait ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.emptyListContent}>\n          <p className={styles.emptyListTitle}>{lang('No NFTs yet')}</p>\n          {!isNftBuyingDisabled && (\n            <>\n              <p className={styles.emptyListText}>\n                {renderText(lang('$nft_explore_offer'), isPortrait ? ['simple_markdown'] : undefined)}\n              </p>\n              <button type=\"button\" className={styles.emptyListButton} onClick={handleNftMarketplaceClick}>\n                {lang('Open %nft_marketplace%', { nft_marketplace: NFT_MARKETPLACE_TITLE })}\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div ref={containerRef} className={buildClassName(styles.list, isLandscape && styles.landscapeList)}>\n      {nfts.map((nft) => (\n        <Nft\n          key={nft.address}\n          nft={nft}\n          selectedAddresses={selectedAddresses}\n          tonDnsExpiration={getTonDnsExpirationDate(nft, dnsExpiration)}\n          isViewAccount={isViewAccount}\n          observeIntersection={observeIntersection}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        orderedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        selectedAddresses,\n        dnsExpiration,\n      } = selectCurrentAccountState(global)?.nfts || {};\n      const { isNftBuyingDisabled } = global.restrictions;\n\n      const {\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n      } = selectCurrentAccountState(global) || {};\n\n      return {\n        orderedAddresses,\n        selectedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        isNftBuyingDisabled,\n        dnsExpiration,\n        isViewAccount: selectIsCurrentAccountViewMode(global),\n      };\n    },\n    (global, _, stickToFirst) => {\n      const {\n        currentCollectionAddress,\n      } = selectCurrentAccountState(global)?.nfts || {};\n\n      return stickToFirst(`${global.currentAccountId}_${currentCollectionAddress || 'all'}`);\n    },\n  )(Nfts),\n);\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport { type IAnchorPosition } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { getDomainsExpirationDate, isTonDnsNft } from '../../../../util/dns';\nimport { compact } from '../../../../util/iteratees';\n\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport { type DropdownItem } from '../../../ui/Dropdown';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ntype MenuHandler = 'send' | 'hide' | 'renew' | 'burn' | 'select-all';\n\ninterface StateProps {\n  isViewMode: boolean;\n  byAddress?: Record<string, ApiNft>;\n  dnsExpiration?: Record<string, number>;\n  selectedAddresses?: string[];\n  currentCollectionAddress?: string;\n}\n\nfunction NftSelectionHeader({\n  isViewMode, selectedAddresses, byAddress, dnsExpiration, currentCollectionAddress,\n}: StateProps) {\n  const {\n    selectAllNfts, clearNftsSelection, startTransfer, burnNfts, openHideNftModal, openDomainRenewalModal,\n  } = getActions();\n\n  const lang = useLang();\n  const amount = selectedAddresses?.length ?? 1;\n  const isActive = Boolean(selectedAddresses?.length);\n  const allSelectedIsTonDnsNft = useMemo(() => {\n    return selectedAddresses?.length\n      ? selectedAddresses.every((address) => isTonDnsNft(byAddress?.[address]))\n      : false;\n  }, [byAddress, selectedAddresses]);\n  const dnsExpireInDays = useMemo(() => {\n    if (!allSelectedIsTonDnsNft) return undefined;\n    const date = getDomainsExpirationDate(selectedAddresses ?? [], byAddress, dnsExpiration);\n\n    return date ? getCountDaysToDate(date) : undefined;\n  }, [allSelectedIsTonDnsNft, dnsExpiration, selectedAddresses, byAddress]);\n  const tonDnsMultiSelected = (selectedAddresses?.length ?? 0) > 1;\n\n  useHistoryBack({\n    isActive,\n    onBack: clearNftsSelection,\n  });\n\n  useEffect(() => (isActive ? captureEscKeyListener(clearNftsSelection) : undefined), [isActive]);\n\n  const menuItems: DropdownItem<MenuHandler>[] = useMemo(() => {\n    return compact([\n      !isViewMode && {\n        name: 'Send',\n        value: 'send',\n      },\n      !isViewMode && allSelectedIsTonDnsNft && {\n        name: tonDnsMultiSelected ? 'Renew All' : 'Renew',\n        value: 'renew',\n        description: dnsExpireInDays && dnsExpireInDays < 0\n          ? (tonDnsMultiSelected ? '$expired_many' : 'Expired')\n          : lang('$expires_in %days%', {\n            days: lang('$in_days', dnsExpireInDays),\n          }, undefined, selectedAddresses?.length ?? 1) as string,\n      } satisfies DropdownItem<MenuHandler>,\n      !IS_CORE_WALLET && {\n        name: 'Hide',\n        value: 'hide',\n      } satisfies DropdownItem<MenuHandler>,\n      !isViewMode && {\n        name: 'Burn',\n        value: 'burn',\n        isDangerous: true,\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Select All',\n        value: 'select-all',\n        withDelimiter: true,\n      },\n    ]);\n  }, [allSelectedIsTonDnsNft, dnsExpireInDays, isViewMode, lang, selectedAddresses?.length, tonDnsMultiSelected]);\n\n  const handleSendClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    startTransfer({\n      isPortrait: getIsPortrait(),\n      nfts,\n    });\n  });\n\n  const handleBurnClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    burnNfts({ nfts });\n  });\n\n  const handleHideClick = useLastCallback(() => {\n    clearNftsSelection();\n\n    openHideNftModal({ addresses: selectedAddresses!, isCollection: false });\n  });\n\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuAnchor);\n  const ref = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n  const handleMenuClose = useLastCallback(() => {\n    setMenuAnchor(undefined);\n  });\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const handleMenuItemClick = useLastCallback((value: MenuHandler) => {\n    switch (value) {\n      case 'send': {\n        handleSendClick();\n        break;\n      }\n      case 'hide': {\n        handleHideClick();\n        break;\n      }\n      case 'burn': {\n        handleBurnClick();\n        break;\n      }\n      case 'select-all': {\n        selectAllNfts({ collectionAddress: currentCollectionAddress });\n        break;\n      }\n      case 'renew': {\n        openDomainRenewalModal({ addresses: selectedAddresses! });\n        break;\n      }\n    }\n  });\n\n  return (\n    <div className={styles.root}>\n      <Button\n        isSimple\n        isText\n        ariaLabel={lang('Back')}\n        className={styles.backButton}\n        onClick={clearNftsSelection}\n      >\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n      </Button>\n      <div className={styles.content}>\n        <div className={styles.title}>\n          {amount > 1 ? lang('%amount% NFTs Selected', { amount }) : lang('1 NFT Selected')}\n        </div>\n      </div>\n      <div>\n        <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n          <i className=\"icon-menu-dots\" aria-hidden />\n        </Button>\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          ref={menuRef}\n          withPortal\n          shouldTranslateOptions\n          menuPositionX=\"right\"\n          menuAnchor={menuAnchor}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          buttonClassName={styles.menuItem}\n          bubbleClassName={styles.menu}\n          itemDescriptionClassName={styles.menuItemDescription}\n          items={menuItems}\n          onSelect={handleMenuItemClick}\n          onClose={handleMenuClose}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    selectedAddresses, byAddress, currentCollectionAddress, dnsExpiration,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return {\n    selectedAddresses,\n    byAddress,\n    currentCollectionAddress,\n    dnsExpiration,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(NftSelectionHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"contentPanel\":\"i_rtpHaE\",\"landscapeContentPanel\":\"UzEmZry2\",\"container\":\"wmmKI_Q8\",\"landscapeContainer\":\"xwYhKvej\",\"assetsPanel\":\"LsCBKsIM\",\"tabsContainer\":\"qxl4O9Cg\",\"tabsSlide\":\"ES31v1R7\",\"tab\":\"Sd0JpmLp\",\"slides\":\"vxe8iSc4\",\"slide\":\"MU2eE1B1\",\"portraitContainer\":\"joLgqn25\",\"tabsContent\":\"VjN3P9Zv\",\"tabs\":\"q8lTUtx5\",\"tabsOverlay\":\"razu85QH\"};","import React, { memo, useEffect, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\nimport { ContentTab, SettingsState } from '../../../../global/types';\n\nimport {\n  IS_CORE_WALLET,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n} from '../../../../config';\nimport { requestMeasure, requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectDoesAccountSupportNft,\n  selectEnabledTokensCountMemoizedFor,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../../../util/captureEvents';\nimport { compact } from '../../../../util/iteratees';\nimport { getIsActiveStakingState } from '../../../../util/staking';\nimport { IS_TOUCH_ENV, REM, STICKY_CARD_INTERSECTION_THRESHOLD } from '../../../../util/windowEnvironment';\nimport windowSize from '../../../../util/windowSize';\nimport { calcSafeAreaTop } from '../../helpers/calcSafeAreaTop';\nimport { getScrollableContainer } from '../../helpers/scrollableContainer';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport useElementVisibility from '../../../../hooks/useElementVisibility';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useScrolledState from '../../../../hooks/useScrolledState';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport CategoryHeader from '../../../explore/CategoryHeader';\nimport Explore from '../../../explore/Explore';\nimport TabList from '../../../ui/TabList';\nimport Transition from '../../../ui/Transition';\nimport HideNftModal from '../../modals/HideNftModal';\nimport Activity from './Activities';\nimport Assets from './Assets';\nimport NftCollectionHeader from './NftCollectionHeader';\nimport Nfts from './Nfts';\nimport NftSelectionHeader from './NftSelectionHeader';\nimport { OPEN_CONTEXT_MENU_CLASS_NAME } from './Token';\n\nimport styles from './Content.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  onTabsStuck?: (isStuck: boolean) => void;\n  onStakedTokenClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokensCount: number;\n  nfts?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  selectedAddresses?: string[];\n  activeContentTab?: ContentTab;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  states?: ApiStakingState[];\n  hasVesting: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  currentSiteCategoryId?: number;\n  doesSupportNft: boolean;\n  collectionTabs?: string[];\n}\n\nconst MAIN_CONTENT_TABS_LENGTH = Object.values(ContentTab).length / 2;\nconst INTERSECTION_APPROXIMATION_VALUE_PX = 3 * REM;\n\nlet activeNftKey = 0;\n\nfunction Content({\n  isActive,\n  activeContentTab,\n  tokensCount,\n  nfts,\n  currentCollectionAddress,\n  selectedAddresses,\n  onStakedTokenClick,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  selectedNftsToHide,\n  states,\n  hasVesting,\n  currentSiteCategoryId,\n  doesSupportNft,\n  collectionTabs,\n  onTabsStuck,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    showTokenActivity,\n    setActiveContentTab,\n    openNftCollection,\n    closeNftCollection,\n    openSettingsWithState,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait, isLandscape } = useDeviceScreen();\n  const tabsRef = useRef<HTMLDivElement>();\n  const hasNftSelection = Boolean(selectedAddresses?.length);\n\n  const numberOfStaking = useMemo(() => {\n    return states?.filter(getIsActiveStakingState).length ?? 0;\n  }, [states]);\n\n  useSyncEffect(() => {\n    if (currentCollectionAddress) {\n      activeNftKey += 1;\n    } else {\n      activeNftKey = 0;\n    }\n  }, [currentCollectionAddress]);\n\n  const handleNftsMenuButtonClick = useLastCallback((value: string) => {\n    if (value === 'hidden_nfts') {\n      openSettingsWithState({ state: SettingsState.HiddenNfts });\n    } else {\n      openNftCollection({ address: value }, { forceOnHeavyAnimation: true });\n    }\n  });\n\n  const nftCollections = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n\n    let hasTelegramGifts = false;\n\n    const itemsByAddress = Object.values(nfts ?? {})\n      .reduce((acc, nft) => {\n        if (nft.collectionAddress && (\n          !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n        ) && (\n          !blacklistedNftAddressesSet.has(nft.address)\n        )) {\n          if (!acc[nft.collectionAddress]) {\n            acc[nft.collectionAddress] = {\n              value: nft.collectionAddress,\n              name: nft.collectionName || lang('Unnamed collection'),\n            };\n          }\n\n          if (!hasTelegramGifts && nft.isTelegramGift) {\n            hasTelegramGifts = true;\n          }\n        }\n\n        return acc;\n      }, {} as Record<string, DropdownItem>);\n\n    const items = Object.values(itemsByAddress);\n\n    items.sort((a, b) => a.name.localeCompare(b.name));\n\n    if (hasTelegramGifts) {\n      items.unshift({\n        value: TELEGRAM_GIFTS_SUPER_COLLECTION,\n        name: lang('Telegram Gifts'),\n        fontIcon: 'gift',\n        withDelimiterAfter: true,\n      });\n    }\n\n    return items;\n  }, [lang, nfts, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  const shouldRenderHiddenNftsSection = useMemo(() => {\n    if (IS_CORE_WALLET) return false;\n\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    return Object.values(nfts ?? {}).some(\n      (nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden,\n    );\n  }, [blacklistedNftAddresses, nfts]);\n\n  const transitionRef = useRef<HTMLDivElement>();\n\n  const totalTokensAmount = tokensCount + (hasVesting ? 1 : 0) + numberOfStaking;\n  const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n    isPortrait ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n  );\n\n  const [mainContentTabsCount, tabs] = useMemo(() => {\n    const mainContentTabs = compact([\n      !shouldShowSeparateAssetsPanel && { id: ContentTab.Assets, title: lang('Assets'), className: styles.tab },\n      { id: ContentTab.Activity, title: lang('Activity'), className: styles.tab },\n      !isPortrait && !IS_CORE_WALLET && { id: ContentTab.Explore, title: lang('Explore'), className: styles.tab },\n      doesSupportNft && {\n        id: ContentTab.Nft,\n        title: lang('Collectibles'),\n        className: styles.tab,\n        menuItems: shouldRenderHiddenNftsSection\n          ? [\n            ...nftCollections,\n            {\n              name: lang('Hidden NFTs'),\n              value: 'hidden_nfts',\n              withDelimiter: true,\n            } as DropdownItem,\n          ]\n          : nftCollections,\n        onMenuItemClick: handleNftsMenuButtonClick,\n      },\n    ]);\n\n    return [\n      mainContentTabs.length,\n      mainContentTabs.concat(\n        collectionTabs?.map((collectionAddress, index) => {\n          const collection = nftCollections.find((nc) => nc.value === collectionAddress);\n          if (!collection) return undefined;\n\n          return {\n            id: MAIN_CONTENT_TABS_LENGTH + index,\n            title: collection.name,\n            className: styles.tab,\n            collectionAddress,\n            icon: collectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION ? 'icon-gift' : undefined,\n          };\n        }).filter(Boolean) ?? [],\n      ),\n    ];\n  }, [\n    collectionTabs, doesSupportNft, isPortrait, lang, nftCollections,\n    shouldRenderHiddenNftsSection, shouldShowSeparateAssetsPanel,\n  ]);\n\n  const activeTabIndex = useMemo(\n    () => {\n      const tabIndex = tabs.findIndex((tab) => tab.id === activeContentTab);\n\n      if (tabIndex === -1) {\n        return ContentTab.Assets;\n      }\n\n      return tabIndex;\n    },\n    [tabs, activeContentTab],\n  );\n\n  const contentTransitionKey = useMemo(() => {\n    if (!currentCollectionAddress || tabs[activeTabIndex].id === ContentTab.Nft) return activeTabIndex;\n\n    const nftCollectionIndex = collectionTabs?.indexOf(currentCollectionAddress) ?? -1;\n\n    return nftCollectionIndex === -1 ? activeTabIndex : mainContentTabsCount + nftCollectionIndex;\n  }, [activeTabIndex, collectionTabs, currentCollectionAddress, mainContentTabsCount, tabs]);\n\n  useEffectOnce(() => {\n    if (activeContentTab === undefined) {\n      setActiveContentTab({ tab: ContentTab.Assets });\n    }\n  });\n\n  const handleSwitchTab = useLastCallback((tab: ContentTab | number) => {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    const tabIndex = tabs.findIndex(({ id }) => id === tab);\n    if (tabIndex >= mainContentTabsCount) {\n      const collectionAddress = collectionTabs![tabIndex - mainContentTabsCount];\n      openNftCollection({ address: collectionAddress }, { forceOnHeavyAnimation: true });\n      return;\n    }\n\n    selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n    setActiveContentTab({ tab });\n  });\n\n  const handleScrollToTop = useLastCallback(() => {\n    const scrollContainer = getScrollableContainer(transitionRef.current, isPortrait);\n    scrollContainer?.scrollTo(0, 0);\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n    update: updateScrolledState,\n  } = useScrolledState();\n\n  useHistoryBack({\n    isActive: activeTabIndex !== 0,\n    onBack: () => handleSwitchTab(ContentTab.Assets),\n  });\n\n  const safeAreaTop = calcSafeAreaTop();\n  const intersectionRootMarginTop = STICKY_CARD_INTERSECTION_THRESHOLD - safeAreaTop - 1;\n\n  const handleTabIntersection = useLastCallback((e: IntersectionObserverEntry) => {\n    const { intersectionRect: { bottom }, intersectionRatio } = e;\n    const isStuck = intersectionRatio < 1\n      // During fast scrolling with rubber effect, the values in `intersectionRect` are `0`\n      && bottom > 0\n      // Due to the overscroll effect in iOS, it is necessary to check the bottom position of the element.\n      // If the `bottom` value and `height` of the screen are approximately equal, this is overscroll, not sticking.\n      && Math.abs(bottom - windowSize.get().height) > INTERSECTION_APPROXIMATION_VALUE_PX;\n\n    onTabsStuck?.(isStuck);\n    requestMutation(() => {\n      e.target.classList.toggle(styles.tabsContainerStuck, isStuck);\n    });\n  });\n\n  useElementVisibility({\n    isDisabled: !isPortrait,\n    targetRef: tabsRef,\n    rootMargin: `${intersectionRootMarginTop}px 0px 0px 0px`,\n    threshold: [1],\n    cb: handleTabIntersection,\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureEvents(transitionRef.current!, {\n      includedClosestSelector: '.swipe-container',\n      excludedClosestSelector: '.dapps-feed',\n      onSwipe: (e, direction) => {\n        if (\n          direction === SwipeDirection.Up\n          || direction === SwipeDirection.Down\n          // For preventing swipe in one interaction with a long press event handler\n          || (e.target as HTMLElement | null)?.closest(`.${OPEN_CONTEXT_MENU_CLASS_NAME}`)\n        ) {\n          return false;\n        }\n\n        if (direction === SwipeDirection.Left) {\n          const tab = tabs[Math.min(tabs.length - 1, activeTabIndex + 1)];\n          handleSwitchTab(tab.id);\n          return true;\n        } else if (direction === SwipeDirection.Right) {\n          if (currentSiteCategoryId) return false;\n\n          if (currentCollectionAddress) {\n            closeNftCollection();\n          } else {\n            const tab = tabs[Math.max(0, activeTabIndex - 1)];\n            handleSwitchTab(tab.id);\n          }\n          return true;\n        }\n\n        return false;\n      },\n      selectorToPreventScroll: '.custom-scroll',\n    });\n  }, [tabs, handleSwitchTab, activeTabIndex, currentCollectionAddress, currentSiteCategoryId]);\n\n  const handleClickAsset = useLastCallback((slug: string) => {\n    showTokenActivity({ slug });\n  });\n\n  // `isScrolled` state should be updated after tab is switched\n  const handleContentTransitionStop = useLastCallback(() => {\n    if (isPortrait) return;\n\n    requestMeasure(() => {\n      const scrollContainer = getScrollableContainer(transitionRef.current, isPortrait);\n      if (scrollContainer) {\n        updateScrolledState(scrollContainer as HTMLElement);\n      }\n    });\n  });\n\n  const containerClassName = buildClassName(\n    styles.container,\n    IS_TOUCH_ENV && 'swipe-container',\n    isPortrait ? styles.portraitContainer : styles.landscapeContainer,\n  );\n\n  function renderTabsPanel() {\n    if (hasNftSelection) {\n      return <NftSelectionHeader />;\n    }\n\n    if (!isPortrait && currentSiteCategoryId) {\n      return <CategoryHeader id={currentSiteCategoryId} />;\n    }\n\n    return currentCollectionAddress ? <NftCollectionHeader key=\"collection\" /> : (\n      <TabList\n        isActive={isActive}\n        tabs={tabs}\n        activeTab={activeTabIndex}\n        onSwitchTab={handleSwitchTab}\n        onActiveTabClick={handleScrollToTop}\n        className={buildClassName(styles.tabs, 'content-tabslist')}\n        overlayClassName={styles.tabsOverlay}\n      />\n    );\n  }\n\n  function renderCurrentTab(isActive: boolean) {\n    // When assets are shown separately, there is effectively no tab with index 0,\n    // so we fall back to next tab to not break parent's component logic.\n    if (activeTabIndex === 0 && shouldShowSeparateAssetsPanel && !currentCollectionAddress) {\n      return (\n        <Activity\n          isActive={isActive}\n          totalTokensAmount={totalTokensAmount}\n          onScroll={isLandscape ? handleContentScroll : undefined}\n        />\n      );\n    }\n\n    if (currentCollectionAddress && tabs[activeTabIndex].id !== ContentTab.Nft) {\n      return (\n        <div\n          className=\"nfts-container\"\n          onScroll={isLandscape ? handleContentScroll : undefined}\n        >\n          <Nfts\n            key={`custom:${currentCollectionAddress}`}\n            isActive={isActive}\n          />\n        </div>\n      );\n    }\n\n    switch (tabs[activeTabIndex].id) {\n      case ContentTab.Assets:\n        return (\n          <Assets\n            isActive={isActive}\n            onTokenClick={handleClickAsset}\n            onStakedTokenClick={onStakedTokenClick}\n            onScroll={isLandscape ? handleContentScroll : undefined}\n          />\n        );\n      case ContentTab.Activity:\n        return (\n          <Activity\n            isActive={isActive}\n            totalTokensAmount={totalTokensAmount}\n            onScroll={isLandscape ? handleContentScroll : undefined}\n          />\n        );\n      case ContentTab.Explore:\n        return <Explore isActive={isActive} onScroll={isLandscape ? handleContentScroll : undefined} />;\n      case ContentTab.Nft:\n        return (\n          <Transition\n            activeKey={activeNftKey}\n            name={isPortrait ? 'slide' : 'slideFade'}\n            className=\"nfts-container\"\n            onScroll={isLandscape ? handleContentScroll : undefined}\n          >\n            <Nfts key={currentCollectionAddress || 'all'} isActive={isActive} />\n          </Transition>\n        );\n      default:\n        return undefined;\n    }\n  }\n\n  function renderContent() {\n    const headerTransitionKey = hasNftSelection || (!isPortrait && currentSiteCategoryId)\n      ? 2\n      : (currentCollectionAddress ? 1 : 0);\n\n    return (\n      <>\n        <div\n          ref={tabsRef}\n          className={buildClassName(\n            styles.tabsContainer,\n            currentCollectionAddress && styles.tabsContainerForNftCollection,\n            'with-notch-on-scroll',\n            isScrolled && 'is-scrolled',\n          )}\n        >\n          <Transition\n            name=\"slideFade\"\n            className={styles.tabsContent}\n            activeKey={headerTransitionKey}\n            slideClassName={styles.tabsSlide}\n            shouldCleanup\n            cleanupExceptionKey={0}\n          >\n            {renderTabsPanel()}\n          </Transition>\n        </div>\n        <Transition\n          ref={transitionRef}\n          name={isPortrait ? 'slide' : 'slideFade'}\n          activeKey={contentTransitionKey}\n          renderCount={mainContentTabsCount + (collectionTabs?.length ?? 0)}\n          className={buildClassName(styles.slides, 'content-transition')}\n          slideClassName={buildClassName(styles.slide, 'custom-scroll')}\n          onStop={handleContentTransitionStop}\n          onScroll={isLandscape ? handleContentScroll : undefined}\n        >\n          {renderCurrentTab}\n        </Transition>\n      </>\n    );\n  }\n\n  return (\n    <div className={containerClassName}>\n      {shouldShowSeparateAssetsPanel && (\n        <div className={styles.assetsPanel}>\n          <Assets\n            isActive\n            isSeparatePanel\n            onStakedTokenClick={onStakedTokenClick}\n            onTokenClick={handleClickAsset}\n          />\n        </div>\n      )}\n      <div className={buildClassName(isPortrait ? styles.contentPanel : styles.landscapeContentPanel)}>\n        {renderContent()}\n      </div>\n      <HideNftModal\n        isOpen={Boolean(selectedNftsToHide?.addresses.length)}\n        selectedNftsToHide={selectedNftsToHide}\n      />\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const {\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        vesting,\n        nfts: {\n          byAddress: nfts,\n          currentCollectionAddress,\n          selectedAddresses,\n          collectionTabs,\n        } = {},\n        currentSiteCategoryId,\n      } = selectCurrentAccountState(global) ?? {};\n\n      const tokens = selectCurrentAccountTokens(global);\n      const tokensCount = selectEnabledTokensCountMemoizedFor(global.currentAccountId!)(tokens);\n      const hasVesting = Boolean(vesting?.info?.length);\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const doesSupportNft = selectDoesAccountSupportNft(global);\n\n      return {\n        nfts,\n        currentCollectionAddress,\n        selectedAddresses,\n        tokensCount,\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        states,\n        hasVesting,\n        currentSiteCategoryId,\n        doesSupportNft,\n        collectionTabs,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Content),\n);\n","import React, { memo, useEffect, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport { stopEvent } from '../../../../util/domEvents';\n\nimport useFocusAfterAnimation from '../../../../hooks/useFocusAfterAnimation';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Input from '../../../ui/Input';\nimport Modal from '../../../ui/Modal';\n\nimport modalStyles from '../../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  name: string;\n  currentAccountId: string;\n  onClose: NoneToVoidFunction;\n}\n\nconst ACCOUNT_NAME_MAX_LENGTH = 255;\n\nfunction AccountRenameModal({ isOpen, name, currentAccountId, onClose }: OwnProps) {\n  const { renameAccount } = getActions();\n\n  const lang = useLang();\n  const inputRef = useRef<HTMLInputElement>();\n  const [newName, setNewName] = useState<string>(name);\n\n  useEffect(() => {\n    if (isOpen) {\n      setNewName(name);\n    }\n  }, [isOpen, name]);\n\n  useFocusAfterAnimation(inputRef, !isOpen);\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (newName.trim().length === 0) return;\n\n    renameAccount({ accountId: currentAccountId, title: newName.trim() });\n    onClose();\n  });\n\n  return (\n    <Modal\n      isCompact\n      isOpen={isOpen}\n      title={lang('Rename Wallet')}\n      onClose={onClose}\n    >\n      <form action=\"#\" onSubmit={handleSubmit}>\n        <p>{lang('You can rename this wallet for easier identification.')}</p>\n        <Input\n          ref={inputRef}\n          placeholder={lang('Name')}\n          onInput={setNewName}\n          value={newName}\n          maxLength={ACCOUNT_NAME_MAX_LENGTH}\n          enterKeyHint=\"done\"\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n          <Button\n            isPrimary\n            isSubmit\n            isDisabled={newName.trim().length === 0}\n            className={modalStyles.button}\n          >\n            {lang('Save')}\n          </Button>\n        </div>\n      </form>\n    </Modal>\n  );\n}\n\nexport default memo(AccountRenameModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"a3WLGvJB\",\"slide\":\"HwTx4nDa\",\"accountTitle\":\"MoMRv8lX\",\"withBalance\":\"VUELTqry\",\"accountTitleInteractive\":\"KaXidGii\",\"accountTitleInner\":\"CsZvEIzk\",\"arrowIcon\":\"fwj1nsFY\",\"balance\":\"ReXRdYnq\",\"balanceFractionPart\":\"rMdzMb2a\",\"balanceCurrency\":\"LJreYpVF\",\"balanceCurrencyPrefix\":\"iYR_GSsp\",\"container\":\"yg1dh4un\",\"dialog\":\"_GKFEXQQ\",\"backdrop\":\"Yb4jStqu\",\"dialog_compact\":\"VQfOatN5\",\"dialogCompact\":\"VQfOatN5\",\"createAccountButton\":\"_cBvU9yb\",\"createAccountIcon\":\"wWwtr3AE\"};","import React, { memo, useEffect, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiTonWalletVersion } from '../../../../api/chains/ton/types';\nimport type { ApiBaseCurrency } from '../../../../api/types';\nimport type { Account, AccountSettings, AccountType, UserToken } from '../../../../global/types';\nimport { type ApiStakingState } from '../../../../api/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountTokens,\n  selectNetworkAccounts,\n} from '../../../../global/selectors';\nimport { getAccountTitle } from '../../../../util/account';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { vibrate } from '../../../../util/haptics';\nimport trapFocus from '../../../../util/trapFocus';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport Button from '../../../ui/Button';\nimport Portal from '../../../ui/Portal';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport Transition from '../../../ui/Transition';\nimport { calculateFullBalance } from '../Card/helpers/calculateFullBalance';\nimport AccountButton from './AccountButton';\nimport AccountRenameModal from './AccountRenameModal';\n\nimport styles from './AccountSelector.module.scss';\n\ninterface OwnProps {\n  forceClose?: boolean;\n  accountClassName?: string;\n  accountSelectorClassName?: string;\n  withAccountSelector?: boolean;\n  withBalance?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  currentAccount?: Account;\n  accounts?: Record<string, Account>;\n  currentWalletVersion?: ApiTonWalletVersion;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  tokens?: UserToken[];\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  isSensitiveDataHidden?: true;\n}\n\nconst ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG = 2;\n\nfunction AccountSelector({\n  currentAccountId,\n  currentAccount,\n  forceClose,\n  accountClassName,\n  accountSelectorClassName,\n  withAccountSelector,\n  withBalance,\n  tokens,\n  baseCurrency,\n  stakingStates,\n  isSensitiveDataHidden,\n  accounts,\n  currentWalletVersion,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const {\n    switchAccount,\n    openAddAccountModal,\n    openSettingsWithState,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [isOpen, openAccountSelector, closeAccountSelector] = useFlag(false);\n  const [isEdit, openEdit, closeEdit] = useFlag(false);\n  const { shouldRender: shouldRenderDialog, ref: dialogContainerRef } = useShowTransition({\n    isOpen,\n    className: 'slow',\n    withShouldRender: true,\n  });\n\n  // The API doesn't check the TON wallet version for BIP39 and Tron-only accounts,\n  // therefore `currentWalletVersion !== 'W5'` can be incorrectly true in that cases.\n  const isBip39Account = currentAccount?.type === 'mnemonic' && Boolean(currentAccount?.addressByChain.tron);\n  const hasTonWallet = Boolean(currentAccount?.addressByChain.ton);\n  const withAddW5Button = currentWalletVersion !== 'W5' && currentAccount?.type !== 'hardware'\n    && hasTonWallet && !isBip39Account;\n\n  const accountsAmount = useMemo(() => Object.keys(accounts || {}).length, [accounts]);\n\n  const balanceValues = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const { primaryWholePart, primaryFractionPart } = balanceValues || {};\n\n  useEffect(() => {\n    if (isOpen && forceClose) closeAccountSelector();\n  }, [forceClose, isOpen]);\n\n  useEffect(\n    () => (shouldRenderDialog ? captureEscKeyListener(closeAccountSelector) : undefined),\n    [closeAccountSelector, isOpen, shouldRenderDialog],\n  );\n  useEffect(\n    () => (shouldRenderDialog && dialogContainerRef.current ? trapFocus(dialogContainerRef.current) : undefined),\n    [dialogContainerRef, shouldRenderDialog],\n  );\n\n  const handleOpenAccountSelector = () => {\n    openAccountSelector();\n  };\n\n  const handleSwitchAccount = useLastCallback((accountId: string) => {\n    void vibrate();\n    closeAccountSelector();\n    switchAccount({ accountId });\n  });\n\n  const handleAddWalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openAddAccountModal();\n  });\n\n  const handleAddV5WalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  function renderButton(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    accountType: AccountType,\n    title?: string,\n  ) {\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n    const isActive = accountId === currentAccountId;\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        addressByChain={addressByChain}\n        accountType={accountType}\n        isActive={isActive}\n        title={title}\n        cardBackgroundNft={cardBackgroundNft}\n        canEditAccount={!IS_CORE_WALLET}\n        onClick={handleSwitchAccount}\n        onEdit={openEdit}\n      />\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.container,\n    accountSelectorClassName,\n  );\n  const accountTitleClassName = buildClassName(\n    styles.accountTitle,\n    withAccountSelector && !withBalance && styles.accountTitleInteractive,\n    withBalance && styles.withBalance,\n    accountClassName,\n  );\n\n  function renderCurrentAccount() {\n    return (\n      <Transition\n        name=\"slideVerticalFade\"\n        activeKey={withBalance ? 1 : 0}\n        className={styles.root}\n        slideClassName={styles.slide}\n      >\n        {withBalance && (\n          <div className={buildClassName(styles.balance, 'rounded-font')}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              shouldHoldSize\n              align=\"center\"\n              cols={10}\n              rows={2}\n              cellSize={8.5}\n            >\n              <span\n                className={styles.currencySwitcher}\n              >\n                {shortBaseSymbol.length === 1 && (\n                  <span className={buildClassName(styles.balanceCurrency, styles.balanceCurrencyPrefix)}>\n                    {shortBaseSymbol}\n                  </span>\n                )}\n                {primaryWholePart}\n                {primaryFractionPart && <span className={styles.balanceFractionPart}>.{primaryFractionPart}</span>}\n                {shortBaseSymbol.length > 1 && (\n                  <span className={styles.balanceCurrency}>&nbsp;{shortBaseSymbol}</span>\n                )}\n              </span>\n            </SensitiveData>\n          </div>\n        )}\n        <div className={accountTitleClassName} onClick={withAccountSelector ? handleOpenAccountSelector : undefined}>\n          <span className={styles.accountTitleInner}>\n            {(currentAccount && getAccountTitle(currentAccount)) ?? ''}\n          </span>\n          {withAccountSelector && !withBalance && (\n            <i className={buildClassName('icon icon-caret-down', styles.arrowIcon)} aria-hidden />\n          )}\n        </div>\n      </Transition>\n    );\n  }\n\n  function renderAccountsSelector() {\n    const dialogFullClassName = buildClassName(\n      styles.dialog,\n      accountsAmount <= ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG && styles.dialog_compact,\n    );\n\n    return (\n      <div\n        ref={dialogContainerRef}\n        className={fullClassName}\n        tabIndex={-1}\n        role=\"dialog\"\n      >\n        <div className={styles.backdrop} onClick={() => closeAccountSelector()} />\n        <div className={dialogFullClassName}>\n          {accounts && Object.entries(accounts).map(\n            ([accountId, { title, addressByChain, type }]) => {\n              return renderButton(accountId, addressByChain, type, title);\n            },\n          )}\n          {withAddW5Button && (\n            <Button className={styles.createAccountButton} onClick={handleAddV5WalletClick}>\n              {lang('Switch to W5')}\n              <i className={buildClassName(styles.createAccountIcon, 'icon-versions')} aria-hidden />\n            </Button>\n          )}\n          <Button className={styles.createAccountButton} onClick={handleAddWalletClick}>\n            {lang('Add Wallet')}\n            <i className={buildClassName(styles.createAccountIcon, 'icon-plus')} aria-hidden />\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {renderCurrentAccount()}\n\n      {shouldRenderDialog && (isPortrait\n        ? <Portal>{renderAccountsSelector()}</Portal>\n        : renderAccountsSelector()\n      )}\n\n      <AccountRenameModal\n        isOpen={isEdit}\n        currentAccountId={currentAccountId}\n        name={currentAccount?.title ?? ''}\n        onClose={closeEdit}\n      />\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      walletVersions,\n      settings: {\n        byAccountId: settingsByAccountId,\n        baseCurrency,\n        isSensitiveDataHidden,\n      },\n    } = global;\n\n    const accounts = selectNetworkAccounts(global);\n    const currentAccountId = global.currentAccountId!;\n    const currentAccount = accounts?.[currentAccountId];\n\n    const stakingStates = selectAccountStakingStates(global, currentAccountId);\n\n    return {\n      currentAccountId,\n      currentAccount,\n      accounts,\n      currentWalletVersion: walletVersions?.currentVersion,\n      settingsByAccountId,\n      tokens: selectCurrentAccountTokens(global),\n      baseCurrency,\n      stakingStates,\n      isSensitiveDataHidden,\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n)(AccountSelector));\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"heOBVClj\",\"qrScannerButton\":\"qduFjDA3\"};","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport { vibrate } from '../../../../../util/haptics';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\nfunction AppLockButton() {\n  const { setIsManualLockActive } = getActions();\n\n  const lang = useLang();\n\n  const handleManualLock = useLastCallback(() => {\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n\n    void vibrate();\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('App Lock')}\n      onClick={handleManualLock}\n    >\n      <i className=\"icon-manual-lock\" aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(AppLockButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport buildClassName from '../../../../../util/buildClassName';\nimport { getIsMobileTelegramApp, IS_IOS } from '../../../../../util/windowEnvironment';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../../../../hooks/useQrScannerSupport';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\ninterface OwnProps {\n  isViewMode?: boolean;\n}\n\nfunction QrScannerButton({ isViewMode }: OwnProps) {\n  const { requestOpenQrScanner } = getActions();\n\n  const lang = useLang();\n  const isQrScannerSupported = useQrScannerSupport() && !isViewMode;\n\n  const handleQrScanClick = useLastCallback(() => {\n    if (IS_IOS && getIsMobileTelegramApp()) {\n      alert('Scanning is temporarily not available');\n      return;\n    }\n\n    requestOpenQrScanner();\n  });\n\n  if (!isQrScannerSupported) return undefined;\n\n  return (\n    <Button\n      className={buildClassName(styles.button, styles.qrScannerButton)}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('Scan QR Code')}\n      onClick={handleQrScanClick}\n    >\n      <i className=\"icon-qr-scanner\" aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(QrScannerButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport useLang from '../../../../../hooks/useLang';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\nfunction SettingsButton() {\n  const { openSettings } = getActions();\n\n  const lang = useLang();\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('Main menu')}\n      onClick={openSettings}\n    >\n      <i className=\"icon-cog\" aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(SettingsButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\n\nimport { getTelegramApp } from '../../../../../util/telegram';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\ninterface OwnProps {\n  isFullscreen: boolean;\n}\n\nfunction ToggleFullscreenButton({ isFullscreen }: OwnProps) {\n  const lang = useLang();\n\n  const handleFullscreenToggle = useLastCallback(() => {\n    if (isFullscreen) {\n      getTelegramApp()?.exitFullscreen();\n    } else {\n      getTelegramApp()?.requestFullscreen();\n    }\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('Toggle fullscreen')}\n      onClick={handleFullscreenToggle}\n    >\n      <i className={isFullscreen ? 'icon-fullscreen-exit' : 'icon-fullscreen'} aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(ToggleFullscreenButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport { useDeviceScreen } from '../../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\nfunction ToggleLayoutButton() {\n  const { setAppLayout } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const handleAppLayoutToggle = useLastCallback(() => {\n    setAppLayout({ layout: isPortrait ? 'landscape' : 'portrait' });\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang(isPortrait ? 'Toggle to landscape layout' : 'Toggle to portrait layout')}\n      onClick={handleAppLayoutToggle}\n    >\n      <i className={isPortrait ? 'icon-view-landscape' : 'icon-view-portrait'} aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(ToggleLayoutButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\ninterface OwnProps {\n  isSensitiveDataHidden: boolean;\n}\n\nfunction ToggleSensitiveDataButton({ isSensitiveDataHidden }: OwnProps) {\n  const { setIsSensitiveDataHidden } = getActions();\n\n  const lang = useLang();\n\n  const handleSensitiveDataToggle = useLastCallback(() => {\n    setIsSensitiveDataHidden({ isHidden: !isSensitiveDataHidden });\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang(isSensitiveDataHidden ? 'Show Sensitive Data' : 'Hide Sensitive Data')}\n      onClick={handleSensitiveDataToggle}\n    >\n      <i className={isSensitiveDataHidden ? 'icon-eye' : 'icon-eye-closed'} aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(ToggleSensitiveDataButton);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"gwvxwQs9\",\"isScrolled\":\"_sQ5O2j4\",\"areTabsStuck\":\"IHMQLLd2\",\"headerInner\":\"EX9t6A36\",\"landscapeActions\":\"mKaPMjmN\",\"portraitActions\":\"oLoKLzOb\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport { IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../../../config';\nimport { selectIsCurrentAccountViewMode, selectIsPasswordPresent } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { IS_ELECTRON } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\n\nimport AccountSelector from './AccountSelector';\nimport AppLockButton from './actionButtons/AppLockButton';\nimport QrScannerButton from './actionButtons/QrScannerButton';\nimport SettingsButton from './actionButtons/SettingsButton';\nimport ToggleFullscreenButton from './actionButtons/ToggleFullscreenButton';\nimport ToggleLayoutButton from './actionButtons/ToggleLayoutButton';\nimport ToggleSensitiveDataButton from './actionButtons/ToggleSensitiveDataButton';\n\nimport styles from './Header.module.scss';\n\nexport const HEADER_HEIGHT_REM = 3;\n\ninterface OwnProps {\n  isScrolled?: boolean;\n  withBalance?: boolean;\n  areTabsStuck?: boolean;\n}\n\ninterface StateProps {\n  isViewMode?: boolean;\n  isAppLockEnabled?: boolean;\n  isSensitiveDataHidden: boolean;\n  isFullscreen: boolean;\n}\n\nfunction Header({\n  isViewMode,\n  withBalance,\n  areTabsStuck,\n  isScrolled,\n  isAppLockEnabled,\n  isSensitiveDataHidden,\n  isFullscreen,\n}: OwnProps & StateProps) {\n  const { isPortrait } = useDeviceScreen();\n  const canToggleAppLayout = IS_EXTENSION || IS_ELECTRON;\n\n  if (isPortrait) {\n    const fullClassName = buildClassName(\n      styles.header,\n      areTabsStuck && styles.areTabsStuck,\n      isScrolled && styles.isScrolled,\n    );\n    const iconsAmount = 1 + (isAppLockEnabled ? 1 : 0) + (IS_TELEGRAM_APP ? 1 : 0) + (canToggleAppLayout ? 1 : 0);\n\n    return (\n      <div className={fullClassName}>\n        <div className={styles.headerInner} style={`--icons-amount: ${iconsAmount}`}>\n          <QrScannerButton isViewMode={isViewMode} />\n          <AccountSelector withBalance={withBalance} withAccountSelector={!IS_CORE_WALLET} />\n\n          <div className={styles.portraitActions}>\n            {isAppLockEnabled && <AppLockButton />}\n            <ToggleSensitiveDataButton isSensitiveDataHidden={isSensitiveDataHidden} />\n            {IS_TELEGRAM_APP && <ToggleFullscreenButton isFullscreen={isFullscreen} />}\n            {canToggleAppLayout && <ToggleLayoutButton />}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.header}>\n      <div className={styles.headerInner}>\n        <div className={styles.landscapeActions}>\n          <ToggleSensitiveDataButton isSensitiveDataHidden={isSensitiveDataHidden} />\n          <QrScannerButton isViewMode={isViewMode} />\n          {isAppLockEnabled && <AppLockButton />}\n        </div>\n\n        <AccountSelector withBalance={withBalance} withAccountSelector={!IS_CORE_WALLET} />\n\n        <div className={styles.landscapeActions}>\n          {IS_TELEGRAM_APP && <ToggleFullscreenButton isFullscreen={isFullscreen} />}\n          {canToggleAppLayout && <ToggleLayoutButton />}\n          <SettingsButton />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      isFullscreen,\n      settings: {\n        isAppLockEnabled,\n        isSensitiveDataHidden,\n      },\n    } = global;\n\n    const isPasswordPresent = selectIsPasswordPresent(global);\n    const isViewMode = selectIsCurrentAccountViewMode(global);\n\n    return {\n      isViewMode,\n      isAppLockEnabled: isAppLockEnabled && isPasswordPresent,\n      isFullscreen: Boolean(isFullscreen),\n      isSensitiveDataHidden: Boolean(isSensitiveDataHidden),\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n)(Header));\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { Theme } from '../global/types';\n\ninterface Props {\n  isActive: boolean;\n  currentTheme: Theme;\n  lightColor: string;\n  darkColor: string;\n}\n\nexport default function useBrowserUiColor({\n  isActive,\n  currentTheme,\n  lightColor,\n  darkColor,\n}: Props) {\n  useEffect(() => {\n    const metaElementLight = getThemeColorMetaElement(true);\n    const metaElementDark = getThemeColorMetaElement();\n    const lightContent = currentTheme === 'dark' ? darkColor : lightColor;\n    const darkContent = currentTheme === 'light' ? lightColor : darkColor;\n\n    if (isActive) {\n      metaElementLight.setAttribute('content', lightContent);\n      metaElementDark.setAttribute('content', darkContent);\n    }\n\n    return () => {\n      metaElementLight.remove();\n      metaElementDark.remove();\n    };\n  }, [lightColor, isActive, darkColor, currentTheme]);\n}\n\nfunction getThemeColorMetaElement(isLight?: boolean) {\n  let metaThemeColor = document.querySelector(\n    `meta[name=\"theme-color\"][media=\"(prefers-color-scheme: ${isLight ? 'light' : 'dark'})\"]`,\n  );\n\n  if (!metaThemeColor) {\n    metaThemeColor = document.createElement('meta');\n    metaThemeColor.setAttribute('name', 'theme-color');\n    metaThemeColor.setAttribute('media', `(prefers-color-scheme: ${isLight ? 'light' : 'dark'})`);\n    document.getElementsByTagName('head')[0].appendChild(metaThemeColor);\n  }\n\n  return metaThemeColor;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"nDlx2B3w\",\"container\":\"H35Oa6Xc\",\"testnetWarning\":\"FeOh0iRA\",\"wrapper\":\"PUMHiqAW\",\"wrapper_landscape\":\"j9PIExiC\",\"wrapperLandscape\":\"j9PIExiC\",\"wrapperFlex\":\"WUreitT1\",\"icon\":\"l3sBnS54\",\"text\":\"WFekTm0y\",\"light\":\"TR3h5nXi\",\"closeButton\":\"tQS1IhkF\",\"domainPreviewWrapper\":\"qB47T3_D\",\"domainPreview\":\"VOiW6ZiQ\",\"domainPreview_1\":\"qdZywUBz\",\"domainPreview1\":\"qdZywUBz\",\"domainPreview_2\":\"z795yKpX\",\"domainPreview2\":\"z795yKpX\",\"domainPreview_3\":\"QhDZUBwR\",\"domainPreview3\":\"QhDZUBwR\",\"linkContainer\":\"fjbVep3r\",\"link\":\"LEqLbgwy\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { Theme } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useBrowserUiColor from '../../../../hooks/useBrowserUiColor';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  isRequired: boolean;\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  theme: Theme;\n};\n\nconst UI_BG_RED_LIGHT = '#F36A6B';\nconst UI_BG_RED_DARK = '#C44646';\n\nfunction BackupWarning({ isRequired, theme, onOpenBackupWallet }: OwnProps & StateProps) {\n  const { shouldRender, ref } = useShowTransition({\n    isOpen: isRequired,\n    noMountTransition: true,\n    withShouldRender: true,\n  });\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  useBrowserUiColor({\n    isActive: isRequired,\n    currentTheme: theme,\n    lightColor: UI_BG_RED_LIGHT,\n    darkColor: UI_BG_RED_DARK,\n  });\n\n  const handleClick = () => {\n    onOpenBackupWallet();\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape)}\n      onClick={handleClick}\n    >\n      {lang('Wallet is not backed up')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>\n        {lang('Back up wallet to have full access to it')}\n      </p>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      return {\n        theme: global.settings.theme,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(BackupWarning),\n);\n","import React, { memo, useRef, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Collapsible.scss';\n\nconst CLASSES = {\n  collapsible: 'collapsible',\n  shown: 'shown',\n  open: 'open',\n  content: 'content',\n} as const;\n\ninterface OwnProps {\n  children: TeactJsx;\n  isShown: boolean;\n}\n\nconst DELAY = 200;\n\nfunction Collapsible({ children, isShown }: OwnProps) {\n  const containerRef = useRef<HTMLDivElement>();\n  const isOpenRef = useRef(isShown);\n  const [shouldRender, setShouldRender] = useState(isShown);\n  const prevIsShown = usePrevious(isShown);\n  const hideTimeoutRef = useRef<number>();\n\n  function toggleOpen() {\n    if (!containerRef.current) return;\n    containerRef.current.classList.toggle(CLASSES.open);\n    isOpenRef.current = !isOpenRef.current;\n  }\n\n  if (prevIsShown !== undefined && prevIsShown !== isShown) {\n    if (isShown && !isOpenRef.current) {\n      setShouldRender(true);\n      if (hideTimeoutRef.current) window.clearTimeout(hideTimeoutRef.current);\n      setTimeout(() => requestMutation(toggleOpen), DELAY);\n    } else {\n      requestMutation(toggleOpen);\n      hideTimeoutRef.current = window.setTimeout(() => {\n        setShouldRender(false);\n      }, DELAY);\n    }\n  }\n\n  const render = <div className={CLASSES.content}>{children}</div>;\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName(CLASSES.collapsible, isShown && CLASSES.shown, isOpenRef.current && CLASSES.open)}\n    >\n      {shouldRender ? render : undefined}\n    </div>\n  );\n}\n\nexport default memo(Collapsible);\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { filterExpiringDomains, getDomainsExpirationDate, getTonDnsExpirationDate } from '../../../../util/dns';\nimport { stopEvent } from '../../../../util/domEvents';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useLang from '../../../../hooks/useLang';\n\nimport Collapsible from '../../../ui/Collapsible';\n\nimport styles from './Warnings.module.scss';\n\ninterface StateProps {\n  orderedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n  dnsExpiration?: Record<string, number>;\n}\n\n// Store the addresses that the user ignores for the current session\nlet ignoredAddressForRenewal: string[] = [];\n\nfunction RenewDomainWarning({ orderedAddresses, byAddress, dnsExpiration }: StateProps) {\n  const { openDomainRenewalModal } = getActions();\n\n  const lang = useLang();\n  const { isLandscape } = useDeviceScreen();\n  const forceUpdate = useForceUpdate();\n\n  const nftForRenewal = useMemo(() => {\n    return filterExpiringDomains(orderedAddresses ?? [], byAddress, dnsExpiration)\n      .filter(({ address }) => !ignoredAddressForRenewal.includes(address));\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [byAddress, ignoredAddressForRenewal, orderedAddresses]);\n  const isShown = nftForRenewal.length > 0;\n  const renderedNftForRenewal = useCurrentOrPrev(isShown ? nftForRenewal : undefined, true);\n\n  const expireInDays = useMemo(() => {\n    const date = getDomainsExpirationDate(renderedNftForRenewal ?? [], undefined, dnsExpiration);\n\n    return date ? getCountDaysToDate(date) : undefined;\n  }, [renderedNftForRenewal, dnsExpiration]);\n\n  const expiredDomains = useMemo(() => {\n    if (!expireInDays || expireInDays >= 0 || !renderedNftForRenewal) return [];\n\n    const now = Date.now();\n\n    return renderedNftForRenewal.filter((nft) => {\n      const date = getTonDnsExpirationDate(nft, dnsExpiration);\n      return date && date < now;\n    });\n  }, [dnsExpiration, expireInDays, renderedNftForRenewal]);\n\n  function handleClick() {\n    const addresses = (renderedNftForRenewal ?? []).map(({ address }) => address);\n    openDomainRenewalModal({ addresses });\n  }\n\n  function handleClose(e: React.MouseEvent) {\n    stopEvent(e);\n\n    ignoredAddressForRenewal = [\n      ...ignoredAddressForRenewal,\n      ...(nftForRenewal.map(({ address }) => address)),\n    ];\n\n    forceUpdate();\n  }\n\n  function renderPreview() {\n    const previewNfts = (renderedNftForRenewal ?? []).slice(0, 3);\n    return (\n      <div className={styles.domainPreviewWrapper}>\n        {previewNfts.map((nft, index) => {\n          return (\n            <img\n              key={nft.address}\n              src={nft.thumbnail}\n              alt={nft.name}\n              style={`--index: ${index}`}\n              className={buildClassName(styles.domainPreview, styles[`domainPreview_${previewNfts.length}`])}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderWarningMessage() {\n    if (expireInDays === undefined) return undefined;\n\n    if (nftForRenewal.length === 1) {\n      return expireInDays < 0\n        ? lang('$domain_was_expired', { domain: nftForRenewal[0].name })\n        : lang('$domain_expire', {\n          domain: nftForRenewal[0].name,\n          days: lang('$in_days', expireInDays, 'i'),\n        });\n    }\n\n    return expireInDays < 0\n      ? lang('$domains_was_expired', { domain: expiredDomains.length }, undefined, expiredDomains.length)\n      : lang('$domains_expire', {\n        domain: nftForRenewal.length,\n        days: lang('$in_days', expireInDays, 'i'),\n      }, undefined, nftForRenewal.length);\n  }\n\n  return (\n    <Collapsible isShown={isShown}>\n      <div\n        className={buildClassName(\n          styles.wrapper,\n          styles.wrapperFlex,\n          isLandscape && styles.wrapper_landscape,\n        )}\n        onClick={handleClick}\n      >\n        {renderPreview()}\n        <div>\n          {(renderedNftForRenewal ?? []).length === 1 ? lang('Renew Domain') : lang('Renew Domains')}\n          <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n          <p className={buildClassName(styles.text, styles.light)}>\n            {renderWarningMessage()}\n          </p>\n        </div>\n        <button type=\"button\" className={styles.closeButton} aria-label={lang('Close')} onClick={handleClose}>\n          <i className=\"icon-close\" aria-hidden />\n        </button>\n      </div>\n    </Collapsible>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { nfts } = selectCurrentAccountState(global) || {};\n\n  return {\n    orderedAddresses: nfts?.orderedAddresses,\n    byAddress: nfts?.byAddress,\n    dnsExpiration: nfts?.dnsExpiration,\n  };\n})(RenewDomainWarning));\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { MYTONWALLET_PROMO_URL } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { openUrl } from '../../../../util/openUrl';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype StateProps = {\n  isSecurityWarningHidden?: boolean;\n};\n\nfunction SecurityWarning({ isSecurityWarningHidden }: StateProps) {\n  const { closeSecurityWarning } = getActions();\n\n  const { shouldRender, ref } = useShowTransition({\n    isOpen: !isSecurityWarningHidden,\n    noMountTransition: true,\n    withShouldRender: true,\n  });\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  function handleClick() {\n    void openUrl(MYTONWALLET_PROMO_URL);\n  }\n\n  const handleClose = useLastCallback((e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n\n    closeSecurityWarning();\n  });\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape)}\n      onClick={handleClick}\n    >\n      {lang('Consider More Secure Version')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>{lang('Install our native app or browser extension.')}</p>\n\n      <button type=\"button\" className={styles.closeButton} aria-label={lang('Close')} onClick={handleClose}>\n        <i className=\"icon-close\" aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    return {\n      isSecurityWarningHidden: global.settings.isSecurityWarningHidden,\n    };\n  })(SecurityWarning),\n);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport { getHelpCenterUrl } from '../../../../global/helpers/getHelpCenterUrl';\nimport { selectCurrentAccount } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\n\nimport Collapsible from '../../../ui/Collapsible';\n\nimport styles from './Warnings.module.scss';\n\ntype StateProps = {\n  isMultisig?: boolean;\n  isViewMode?: boolean;\n};\n\nfunction TronScamWarning({ isMultisig, isViewMode }: StateProps) {\n  const { isLandscape } = useDeviceScreen();\n  const lang = useLang();\n\n  const isShown = !!isMultisig && !isViewMode;\n\n  const helpCenterLink = getHelpCenterUrl(lang.code, 'seedScam');\n\n  return (\n    <Collapsible isShown={isShown}>\n      <div className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape)}>\n        {lang('Multisig Wallet Detected')}\n        <p className={styles.text}>\n          {lang('$multisig_warning_text', {\n            multisig_warning_link: (\n              <span className={styles.linkContainer}>\n                <i className={buildClassName(styles.link, 'icon-chevron-right')} aria-hidden />\n                <a href={helpCenterLink} className={styles.link} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$multisig_warning_link')}\n                </a>\n              </span>\n            ),\n          })}\n        </p>\n      </div>\n    </Collapsible>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const account = selectCurrentAccount(global);\n\n  return {\n    isMultisig: account?.isMultisigByChain?.tron,\n    isViewMode: account?.type === 'view',\n  };\n})(TronScamWarning));\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport { IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../../../config';\nimport { selectCurrentAccountState, selectIsCurrentAccountViewMode } from '../../../../global/selectors';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\n\nimport BackupWarning from './BackupWarning';\nimport RenewDomainWarning from './RenewDomainWarning';\nimport SecurityWarning from './SecurityWarning';\nimport TronScamWarning from './TronScamWarning';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  isTestnet?: boolean;\n  isBackupRequired: boolean;\n  isViewMode: boolean;\n};\n\nconst IS_UNSAFE_WEB = !IS_CORE_WALLET && !IS_ELECTRON && !IS_EXTENSION && !IS_IOS && !IS_ANDROID && !IS_TELEGRAM_APP;\n\nfunction Warnings({\n  isBackupRequired,\n  isTestnet,\n  isViewMode,\n  onOpenBackupWallet,\n}: OwnProps & StateProps) {\n  const { isPortrait } = useDeviceScreen();\n  const lang = useLang();\n\n  return (\n    <>\n      {isTestnet && (\n        <div className={isPortrait ? styles.portraitContainer : styles.container}>\n          <div className={styles.testnetWarning}>{lang('Testnet Version')}</div>\n        </div>\n      )}\n\n      {!isViewMode && (\n        <>\n          <BackupWarning isRequired={isBackupRequired} onOpenBackupWallet={onOpenBackupWallet} />\n          <RenewDomainWarning />\n          <TronScamWarning />\n        </>\n      )}\n      {IS_UNSAFE_WEB && <SecurityWarning />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      return {\n        isBackupRequired: Boolean(selectCurrentAccountState(global)?.isBackupRequired),\n        isTestnet: global.settings.isTestnet,\n        isViewMode: selectIsCurrentAccountViewMode(global),\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Warnings),\n);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState } from '../../api/types';\nimport { ActiveTab, ContentTab, type Theme } from '../../global/types';\n\nimport { IS_CORE_WALLET } from '../../config';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectIsStakingDisabled,\n  selectIsSwapDisabled,\n} from '../../global/selectors';\nimport { useAccentColor } from '../../util/accentColor';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport { getStakingStateStatus } from '../../util/staking';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_TOUCH_ENV, REM,\n} from '../../util/windowEnvironment';\nimport { calcSafeAreaTop } from './helpers/calcSafeAreaTop';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useElementVisibility from '../../hooks/useElementVisibility';\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePreventPinchZoomGesture from '../../hooks/usePreventPinchZoomGesture';\n\nimport LinkingDomainModal from '../domain/LinkingDomainModal';\nimport RenewDomainModal from '../domain/RenewDomainModal';\nimport InvoiceModal from '../receive/InvoiceModal';\nimport ReceiveModal from '../receive/ReceiveModal';\nimport StakeModal from '../staking/StakeModal';\nimport StakingClaimModal from '../staking/StakingClaimModal';\nimport StakingInfoModal from '../staking/StakingInfoModal';\nimport UnstakeModal from '../staking/UnstakeModal';\nimport UpdateAvailable from '../ui/UpdateAvailable';\nimport VestingModal from '../vesting/VestingModal';\nimport VestingPasswordModal from '../vesting/VestingPasswordModal';\nimport { LandscapeActions, PortraitActions } from './sections/Actions';\nimport Card from './sections/Card';\nimport Content from './sections/Content';\nimport Header, { HEADER_HEIGHT_REM } from './sections/Header/Header';\nimport Warnings from './sections/Warnings';\n\nimport styles from './Main.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  currentTokenSlug?: string;\n  stakingState?: ApiStakingState;\n  isTestnet?: boolean;\n  isLedger?: boolean;\n  isViewMode?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isSwapDisabled?: boolean;\n  isStakingDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n};\n\nconst UPDATE_SWAPS_INTERVAL_NOT_FOCUSED = 15000; // 15 sec\nconst UPDATE_SWAPS_INTERVAL = 3000; // 3 sec\n\nfunction Main({\n  isActive,\n  currentTokenSlug,\n  stakingState,\n  isTestnet,\n  isViewMode,\n  isLedger,\n  isStakingInfoModalOpen,\n  isSwapDisabled,\n  isStakingDisabled,\n  isOnRampDisabled,\n  isMediaViewerOpen,\n  theme,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    openBackupWalletModal,\n    setActiveContentTab,\n    closeStakingInfo,\n    openStakingInfoOrStart,\n    changeCurrentStaking,\n    setLandscapeActionsActiveTabIndex,\n    loadExploreSites,\n    openReceiveModal,\n    updatePendingSwaps,\n  } = getActions();\n\n  const cardRef = useRef<HTMLDivElement>();\n  const portraitContainerRef = useRef<HTMLDivElement>();\n  const landscapeContainerRef = useRef<HTMLDivElement>();\n\n  const safeAreaTop = calcSafeAreaTop();\n  const [isFocused, markIsFocused, unmarkIsFocused] = useFlag(!isBackgroundModeActive());\n  const [areTabsStuck, setAreTabsStuck] = useState(false);\n  const intersectionRootMarginTop = HEADER_HEIGHT_REM * REM + safeAreaTop;\n\n  const stakingStatus = stakingState ? getStakingStateStatus(stakingState) : 'inactive';\n\n  useBackgroundMode(unmarkIsFocused, markIsFocused);\n\n  useOpenFromMainBottomSheet('receive', openReceiveModal);\n  usePreventPinchZoomGesture(isMediaViewerOpen);\n\n  const { isPortrait, isLandscape } = useDeviceScreen();\n\n  useEffectOnce(() => {\n    if (IS_CORE_WALLET) return;\n\n    loadExploreSites({ isLandscape });\n  });\n\n  useInterval(updatePendingSwaps, isFocused ? UPDATE_SWAPS_INTERVAL : UPDATE_SWAPS_INTERVAL_NOT_FOCUSED);\n\n  // Use scroll detection for portrait mode\n  const { isVisible: isPageAtTop } = useElementVisibility({\n    isDisabled: !isPortrait || !isActive,\n    targetRef: cardRef,\n    rootMargin: `-${intersectionRootMarginTop}px 0px 0px 0px`,\n    threshold: [1],\n  });\n\n  const { isVisible: shouldHideBalanceInHeader } = useElementVisibility({\n    isDisabled: !isPortrait || !isActive,\n    targetRef: cardRef,\n    rootMargin: `-${intersectionRootMarginTop}px 0px 0px 0px`,\n  });\n\n  const handleTokenCardClose = useLastCallback(() => {\n    selectToken({ slug: undefined });\n    setActiveContentTab({ tab: ContentTab.Assets });\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isPortrait || !portraitContainerRef.current || !currentTokenSlug) {\n      return undefined;\n    }\n\n    return captureEvents(portraitContainerRef.current, {\n      excludedClosestSelector: '.token-card',\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Right) {\n          handleTokenCardClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [currentTokenSlug, handleTokenCardClose, isPortrait]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor(isPortrait ? portraitContainerRef : landscapeContainerRef, appTheme, accentColorIndex);\n\n  const handleEarnClick = useLastCallback((stakingId?: string) => {\n    if (stakingId) changeCurrentStaking({ stakingId });\n\n    if (isPortrait || isViewMode) {\n      openStakingInfoOrStart();\n    } else {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n  });\n\n  function renderPortraitLayout() {\n    return (\n      <div ref={portraitContainerRef} className={styles.portraitContainer}>\n        <div className={styles.head}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n\n          <Header\n            withBalance={!shouldHideBalanceInHeader}\n            areTabsStuck={areTabsStuck}\n            isScrolled={!isPageAtTop}\n          />\n\n          <Card\n            ref={cardRef}\n            onTokenCardClose={handleTokenCardClose}\n            onYieldClick={handleEarnClick}\n          />\n\n          {!isViewMode && (\n            <PortraitActions\n              containerRef={portraitContainerRef}\n              isTestnet={isTestnet}\n              stakingStatus={stakingStatus}\n              isStakingDisabled={isStakingDisabled}\n              isSwapDisabled={isSwapDisabled}\n              isOnRampDisabled={isOnRampDisabled}\n              onEarnClick={handleEarnClick}\n            />\n          )}\n        </div>\n\n        <Content\n          isActive={isActive}\n          onStakedTokenClick={handleEarnClick}\n          onTabsStuck={setAreTabsStuck}\n        />\n      </div>\n    );\n  }\n\n  function renderLandscapeLayout() {\n    return (\n      <div ref={landscapeContainerRef} className={styles.landscapeContainer}>\n        <div className={buildClassName(styles.sidebar, 'custom-scroll')}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n\n          <Header />\n\n          <Card onTokenCardClose={handleTokenCardClose} onYieldClick={handleEarnClick} />\n          {!isViewMode && (\n            <LandscapeActions\n              containerRef={landscapeContainerRef}\n              stakingStatus={stakingStatus}\n              isLedger={isLedger}\n              theme={theme}\n            />\n          )}\n        </div>\n        <div className={styles.main}>\n          <Content onStakedTokenClick={handleEarnClick} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {!IS_DELEGATED_BOTTOM_SHEET && (isPortrait ? renderPortraitLayout() : renderLandscapeLayout())}\n\n      <StakeModal />\n      <StakingInfoModal isOpen={isStakingInfoModalOpen} onClose={closeStakingInfo} />\n      <ReceiveModal />\n      <InvoiceModal />\n      <UnstakeModal />\n      <StakingClaimModal />\n      <VestingModal />\n      <VestingPasswordModal />\n      <RenewDomainModal />\n      <LinkingDomainModal />\n      {!IS_ELECTRON && !IS_DELEGATED_BOTTOM_SHEET && <UpdateAvailable />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const { ledger } = selectCurrentAccount(global) || {};\n      const accountState = selectCurrentAccountState(global);\n      const { currentTokenSlug } = accountState ?? {};\n\n      const { isOnRampDisabled } = global.restrictions;\n\n      const stakingState = global.currentAccountId\n        ? selectAccountStakingState(global, global.currentAccountId)\n        : undefined;\n\n      return {\n        stakingState,\n        currentTokenSlug,\n        isTestnet: global.settings.isTestnet,\n        isLedger: Boolean(ledger),\n        isViewMode: selectIsCurrentAccountViewMode(global),\n        isStakingInfoModalOpen: global.isStakingInfoModalOpen,\n        isMediaViewerOpen: Boolean(global.mediaViewer?.mediaId),\n        isSwapDisabled: selectIsSwapDisabled(global),\n        isStakingDisabled: selectIsStakingDisabled(global),\n        isOnRampDisabled,\n        theme: global.settings.theme,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Main),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"c4YKj_bz\",\"head\":\"rfAUzAO1\",\"landscapeContainer\":\"nZyFvDbE\",\"sidebar\":\"mpB6taR7\",\"main\":\"Sr6Y7sw5\"};","import React, { memo } from '../../../lib/teact/teact';\n\nimport { IS_CAPACITOR } from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\n\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  onClearError: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AddAccountPasswordModal({\n  isActive,\n  isLoading,\n  error,\n  onClearError,\n  onSubmit,\n  onBack,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        operationType=\"passcode\"\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={onClearError}\n      />\n    </>\n  );\n}\n\nexport default memo(AddAccountPasswordModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"ZNc8nV1w\",\"modalContent\":\"BGrP96yj\",\"actionsSection\":\"cOGOPS4Q\",\"actionsSectionShift\":\"t8FNRQDi\",\"importText\":\"nnhxqZYR\",\"walletVersionBlock\":\"Ai_X8CqD\",\"walletVersionText\":\"d8gw7TAv\"};","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { LedgerWalletInfo } from '../../../util/ledger/types';\nimport { type Account, SettingsState } from '../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../config';\nimport { selectIsPasswordPresent, selectNetworkAccounts } from '../../../global/selectors';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_LEDGER_SUPPORTED } from '../../../util/windowEnvironment';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AuthImportViewAccount from '../../auth/AuthImportViewAccount';\nimport LedgerConnect from '../../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../../ledger/LedgerSelectWallets';\nimport ListItem from '../../ui/ListItem';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\nimport AddAccountPasswordModal from './AddAccountPasswordModal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './AddAccountModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isLoading?: boolean;\n  error?: string;\n  isPasswordPresent: boolean;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  withOtherWalletVersions?: boolean;\n  forceAddingTonOnlyAccount?: boolean;\n}\n\nconst enum RenderingState {\n  Initial,\n  Password,\n\n  ConnectHardware,\n  SelectAccountsHardware,\n\n  ViewMode,\n}\n\nfunction AddAccountModal({\n  isOpen,\n  isLoading,\n  error,\n  hardwareWallets,\n  isPasswordPresent,\n  accounts,\n  withOtherWalletVersions,\n  forceAddingTonOnlyAccount,\n}: StateProps) {\n  const {\n    addAccount,\n    clearAccountError,\n    closeAddAccountModal,\n    afterSelectHardwareWallets,\n    openSettingsWithState,\n    resetHardwareWalletConnect,\n    clearAccountLoading,\n  } = getActions();\n\n  const lang = useLang();\n  const [renderingKey, setRenderingKey] = useState<RenderingState>(RenderingState.Initial);\n\n  const [isNewAccountImporting, setIsNewAccountImporting] = useState<boolean>(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    clearAccountError();\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    setIsNewAccountImporting(false);\n    clearAccountLoading();\n  });\n\n  const handleNewAccountClick = useLastCallback(() => {\n    if (!isPasswordPresent) {\n      addAccount({\n        method: 'createAccount',\n        password: '',\n      });\n      return;\n    }\n\n    if (getHasInMemoryPassword()) {\n      void getInMemoryPassword().then((password) => addAccount({\n        method: 'createAccount',\n        password: password!,\n      }));\n    } else {\n      setRenderingKey(RenderingState.Password);\n      setIsNewAccountImporting(false);\n    }\n  });\n  useEffect(() => {\n    if (forceAddingTonOnlyAccount) {\n      handleNewAccountClick();\n    }\n  }, [forceAddingTonOnlyAccount]);\n\n  const handleImportAccountClick = useLastCallback(() => {\n    if (!isPasswordPresent) {\n      addAccount({\n        method: 'importMnemonic',\n        password: '',\n      });\n      return;\n    }\n\n    setIsNewAccountImporting(true);\n\n    if (getHasInMemoryPassword()) {\n      void getInMemoryPassword().then((password) => addAccount({\n        method: 'importMnemonic',\n        password: password!,\n      }));\n    } else {\n      setRenderingKey(RenderingState.Password);\n    }\n  });\n\n  const handleViewModeWalletClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.ViewMode);\n  });\n\n  const handleImportHardwareWalletClick = useLastCallback(() => {\n    resetHardwareWalletConnect();\n    setRenderingKey(RenderingState.ConnectHardware);\n  });\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    closeAddAccountModal();\n  });\n\n  const handleHardwareWalletConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setRenderingKey(RenderingState.SelectAccountsHardware);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isNewAccountImporting ? 'importMnemonic' : 'createAccount', password });\n  });\n\n  const handleOpenSettingWalletVersion = useLastCallback(() => {\n    closeAddAccountModal();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  function renderSelector() {\n    return (\n      <>\n        <ModalHeader title={lang('Add Wallet')} onClose={closeAddAccountModal} />\n\n        <div className={buildClassName(styles.actionsSection, styles.actionsSectionShift)}>\n          <ListItem\n            icon=\"wallet-add\"\n            label={lang('Create New Wallet')}\n            onClick={handleNewAccountClick}\n            isLoading={!isNewAccountImporting && isLoading}\n          />\n        </div>\n\n        <span className={styles.importText}>{lang('or import from')}</span>\n\n        <div className={styles.actionsSection}>\n          <ListItem\n            icon=\"key\"\n            label={lang(IS_CORE_WALLET ? '24 Secret Words' : '12/24 Secret Words')}\n            onClick={handleImportAccountClick}\n            isLoading={isNewAccountImporting && isLoading}\n          />\n          {IS_LEDGER_SUPPORTED && (\n            <ListItem\n              icon=\"ledger-alt\"\n              label={lang('Ledger')}\n              onClick={handleImportHardwareWalletClick}\n            />\n          )}\n        </div>\n\n        {!IS_CORE_WALLET && (\n          <div className={styles.actionsSection}>\n            <ListItem\n              icon=\"wallet-view\"\n              label={lang('View Any Address')}\n              onClick={handleViewModeWalletClick}\n            />\n          </div>\n        )}\n\n        {withOtherWalletVersions && (\n          <div className={styles.walletVersionBlock}>\n            <span>\n              {lang('$wallet_switch_version_1', {\n                action: (\n                  <div\n                    role=\"button\"\n                    tabIndex={0}\n                    onClick={handleOpenSettingWalletVersion}\n                    className={styles.walletVersionText}\n                  >\n                    {lang('$wallet_switch_version_2')}\n                  </div>\n                ),\n              })}\n            </span>\n          </div>\n        )}\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: RenderingState) {\n    switch (currentKey) {\n      case RenderingState.Initial:\n        return renderSelector();\n      case RenderingState.Password:\n        return (\n          <AddAccountPasswordModal\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onClearError={clearAccountError}\n            onSubmit={handleSubmit}\n            onBack={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareWalletConnected}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.SelectAccountsHardware:\n        return (\n          <LedgerSelectWallets\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.ViewMode:\n        return (\n          <AuthImportViewAccount\n            isActive={isActive}\n            isLoading={isLoading}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"add-account\"\n      forceFullNative={renderingKey === RenderingState.Password}\n      onCloseAnimationEnd={handleModalClose}\n      onClose={closeAddAccountModal}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={\n          renderingKey === RenderingState.Initial && !getHasInMemoryPassword() ? RenderingState.Password : undefined\n        }\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const { byId: versionById } = global.walletVersions ?? {};\n  const versions = versionById?.[global.currentAccountId!];\n  const withOtherWalletVersions = !!versions?.length;\n\n  const { auth: { forceAddingTonOnlyAccount }, hardware: { hardwareWallets } } = global;\n\n  return {\n    isOpen: global.isAddAccountModalOpen,\n    isLoading: global.accounts?.isLoading,\n    error: global.accounts?.error,\n    accounts,\n    isPasswordPresent,\n    hardwareWallets,\n    withOtherWalletVersions,\n    forceAddingTonOnlyAccount,\n  };\n})(AddAccountModal));\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsForm from '../common/backup/CheckWordsForm';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isInModal?: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n  buttonLabel: string;\n  onSubmit: NoneToVoidFunction;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicCheck({\n  isActive, isInModal, mnemonic, checkIndexes, buttonLabel, onCancel, onSubmit, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Let\\'s Check!')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          {lang('Lets make sure your secrets words are recorded correctly.')}\n        </p>\n\n        <CheckWordsForm\n          descriptionClassName={buildClassName(styles.info, styles.small)}\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n          isInModal={isInModal}\n          errorClassName={buildClassName(styles.error, styles.small)}\n          onSubmit={onSubmit}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button}>{lang('Back')}</Button>\n          <Button isPrimary forFormId=\"check_mnemonic_form\" className={modalStyles.button}>{buttonLabel}</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicCheck);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsList from '../common/backup/SecretWordsList';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onClose: NoneToVoidFunction;\n  onNext?: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, mnemonic, onNext, onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const wordsCount = mnemonic?.length || 0;\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('%1$d Secret Words', wordsCount) as string} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <SecretWordsList mnemonic={mnemonic} />\n        {onNext && (\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={onNext}>{lang('Let\\'s Check')}</Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  privateKeyHex?: string;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, privateKeyHex, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Private Key')} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          <Emoji from=\"\" />{' '}{renderText(lang('$mnemonic_warning'))}\n        </p>\n        <p className={styles.privateKey}>\n          {privateKeyHex}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onSubmit: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction SafetyRules({ isActive, onSubmit, onClose }: OwnProps) {\n  const lang = useLang();\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n  const canSubmit = writedownAccepted && openWalletAccepted && canBeStolenAccepted;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Safety Rules')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <SafetyRulesContent\n          customStickerClassName={styles.modalSticker}\n          customButtonWrapperClassName={modalStyles.buttons}\n          isFullSizeButton={false}\n          isActive={isActive}\n          isFirstCheckboxSelected={writedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          onFirstCheckboxClick={setWritedownAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SafetyRules);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { IS_CAPACITOR, MNEMONIC_COUNT } from '../../../config';\nimport { selectMnemonicForCheck } from '../../../global/actions/api/auth';\nimport { selectCurrentAccountState } from '../../../global/selectors';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { callApi } from '../../../api';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport MnemonicCheck from '../../auth/MnemonicCheck';\nimport MnemonicList from '../../auth/MnemonicList';\nimport MnemonicPrivateKey from '../../auth/MnemonicPrivateKey';\nimport SafetyRules from '../../auth/SafetyRules';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './BackupModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  currentAccountId?: string;\n  isBackupRequired?: boolean;\n};\n\nenum SLIDES {\n  confirm,\n  password,\n  mnemonic,\n  check,\n}\n\nfunction BackupModal({\n  isOpen, currentAccountId, onClose, isBackupRequired,\n}: OwnProps & StateProps) {\n  const { setIsBackupRequired, setIsPinAccepted, clearIsPinAccepted } = getActions();\n\n  const lang = useLang();\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.password);\n  const [checkIndexes, setCheckIndexes] = useState<number[]>([]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | undefined>();\n\n  const mnemonicRef = useRef<string[] | undefined>(undefined);\n  const noResetFullNativeOnBlur = currentSlide === SLIDES.confirm || currentSlide === SLIDES.password;\n\n  useEffect(() => {\n    mnemonicRef.current = undefined;\n  }, [isOpen]);\n\n  const handleSafetyConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.mnemonic);\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    setIsLoading(true);\n    mnemonicRef.current = await callApi('fetchMnemonic', currentAccountId!, password);\n\n    if (!mnemonicRef.current) {\n      setError('Wrong password, please try again.');\n      setIsLoading(false);\n      void vibrateOnError();\n      return;\n    }\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n      clearIsPinAccepted();\n    }\n\n    setIsLoading(false);\n    setNextKey(SLIDES.check);\n    setCurrentSlide(SLIDES.mnemonic);\n  });\n\n  const handleBackupErrorUpdate = useLastCallback(() => {\n    setError(undefined);\n  });\n\n  const handleCheckMnemonic = useLastCallback(() => {\n    setCheckIndexes(selectMnemonicForCheck(mnemonicRef.current?.length || MNEMONIC_COUNT));\n    setCurrentSlide(SLIDES.check);\n    setNextKey(undefined);\n  });\n\n  const handleRestartCheckMnemonic = useLastCallback(() => {\n    setCurrentSlide(SLIDES.mnemonic);\n    setNextKey(SLIDES.check);\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setIsLoading(false);\n    setError(undefined);\n    setCurrentSlide(SLIDES.confirm);\n    setNextKey(SLIDES.password);\n  });\n\n  const handleCheckMnemonicSubmit = useLastCallback(() => {\n    setIsBackupRequired({ isMnemonicChecked: true });\n    onClose();\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    const mnemonic = mnemonicRef.current;\n\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return (\n          <SafetyRules\n            isActive={isActive}\n            onSubmit={handleSafetyConfirm}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.password:\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={onClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error}\n              withCloseButton={IS_CAPACITOR}\n              submitLabel={lang('$back_up_auth')}\n              cancelLabel={lang('Cancel')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={onClose}\n              onUpdate={handleBackupErrorUpdate}\n            />\n          </>\n        );\n\n      case SLIDES.mnemonic:\n        return mnemonic && isMnemonicPrivateKey(mnemonic) ? (\n          <MnemonicPrivateKey\n            privateKeyHex={mnemonic[0]}\n            onClose={onClose}\n          />\n        ) : (\n          <MnemonicList\n            isActive={isActive}\n            mnemonic={mnemonic}\n            onNext={isBackupRequired ? handleCheckMnemonic : undefined}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.check:\n        return (\n          <MnemonicCheck\n            isActive={isActive}\n            isInModal\n            mnemonic={mnemonicRef.current as string[]}\n            checkIndexes={checkIndexes}\n            buttonLabel={lang('Done')}\n            onSubmit={handleCheckMnemonicSubmit}\n            onCancel={handleRestartCheckMnemonic}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"backup\"\n      forceFullNative={currentSlide === SLIDES.password}\n      noResetFullNativeOnBlur={noResetFullNativeOnBlur}\n      onClose={onClose}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isBackupRequired } = selectCurrentAccountState(global) || {};\n  return { currentAccountId: global.currentAccountId, isBackupRequired };\n})(BackupModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"S7OzI0EB\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"gDlNRq3N\",\"dialog\":\"meAvQTC9\",\"container\":\"EWcWOV6u\",\"menuButton\":\"hLEOc4Ou\",\"closeButton\":\"mlPdYaCz\",\"icon\":\"xQLJ1EYA\",\"nftInfo\":\"VUUxnoTG\",\"fullImage\":\"Rv0vP_cy\",\"thumbnail\":\"_LL4RfB7\",\"info\":\"j87GjThh\",\"nftName\":\"O9BeJGjg\",\"collectionName\":\"EHtLitju\",\"content\":\"uo4QatBc\",\"noData\":\"Tg1GGhMT\",\"label\":\"SiE9CJ9J\",\"description\":\"NsrMt36R\",\"attributesList\":\"bDlzAhU_\",\"attributeName\":\"Q59iVuTN\",\"attributeValue\":\"d7Ra9vbr\",\"first\":\"o8kAOnv4\",\"last\":\"gw8tS0Ge\",\"expandButton\":\"Wgu0lfq9\",\"collectionNameIcon\":\"BjwLITqA\",\"expandButtonIcon\":\"PcBlbvHP\"};","import React, { memo, useEffect, useRef, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiNft, ApiNftAttribute } from '../../../api/types';\nimport { type IAnchorPosition, MediaType } from '../../../global/types';\n\nimport { selectCurrentAccountState } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { getCountDaysToDate } from '../../../util/dateFormat';\nimport { getTonDnsExpirationDate } from '../../../util/dns';\nimport { stopEvent } from '../../../util/domEvents';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../../util/modalSwipeManager';\nimport { IS_ELECTRON, IS_MAC_OS } from '../../../util/windowEnvironment';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Modal from '../../ui/Modal';\nimport NftMenu from '../sections/Content/NftMenu';\n\nimport styles from './NftAttributesModal.module.scss';\n\ninterface StateProps {\n  nft?: ApiNft;\n  dnsExpiration?: Record<string, number>;\n}\n\nconst FOLD_LIMIT = 5;\nconst ANIMATED_ICON_SIZE = 250; // Preview size (500px) / 2\n\nfunction NftAttributesModal({ nft, dnsExpiration }: StateProps) {\n  const { closeNftAttributesModal, openMediaViewer, openNftCollection } = getActions();\n\n  const lang = useLang();\n  const menuButtonRef = useRef<HTMLButtonElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const { isPortrait } = useDeviceScreen();\n\n  const isOpen = !!nft;\n  const renderedNft = useCurrentOrPrev(nft, true);\n  const { metadata: { lottie, attributes } } = renderedNft || { metadata: {} };\n  const attributesCount = attributes?.length || 0;\n  const [isFolded, setIsFolded] = useState(attributesCount > FOLD_LIMIT);\n  const tonDnsExpiration = getTonDnsExpirationDate(renderedNft, dnsExpiration);\n  const dnsExpireInDays = tonDnsExpiration ? getCountDaysToDate(tonDnsExpiration) : undefined;\n  const list = attributes?.slice(0, isFolded ? FOLD_LIMIT : undefined) || [];\n  const isNoData = !renderedNft?.description && list.length === 0;\n\n  useSyncEffect(() => {\n    setIsFolded(attributesCount > FOLD_LIMIT + 1);\n  }, [attributesCount, nft]);\n\n  useEffect(() => {\n    if (!isOpen) return undefined;\n\n    disableSwipeToClose();\n\n    return enableSwipeToClose;\n  }, [isOpen]);\n\n  const handleOpenMenu = useLastCallback(() => {\n    const { right: x, y } = menuButtonRef.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n\n  const handleCloseMenu = useLastCallback(() => {\n    setMenuAnchor(undefined);\n  });\n\n  const handleExpand = useLastCallback((e: React.MouseEvent<HTMLAnchorElement>) => {\n    stopEvent(e);\n\n    setIsFolded(false);\n  });\n\n  const handleNftClick = useLastCallback(() => {\n    openMediaViewer({ mediaId: renderedNft!.address, mediaType: MediaType.Nft });\n  });\n\n  const handleCollectionClick = useLastCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    stopEvent(e);\n\n    closeNftAttributesModal(undefined, { forceOnHeavyAnimation: true });\n    openNftCollection({ address: renderedNft!.collectionAddress! }, { forceOnHeavyAnimation: true });\n  });\n\n  const renderAttributeRow = (attribute: ApiNftAttribute, index: number) => {\n    const isFirst = index === 0;\n    const isLast = index === list.length - 1;\n\n    return (\n      <tr key={index}>\n        <th className={buildClassName(styles.attributeName, isFirst && styles.first, isLast && styles.last)}>\n          {attribute.trait_type}\n        </th>\n        <td className={buildClassName(styles.attributeValue, isFirst && styles.first, isLast && styles.last)}>\n          {attribute.value}\n        </td>\n      </tr>\n    );\n  };\n\n  if (!renderedNft) return undefined;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      className={styles.modal}\n      dialogClassName={styles.dialog}\n      contentClassName={styles.container}\n      onClose={closeNftAttributesModal}\n    >\n      <button\n        type=\"button\"\n        aria-label={lang('Close')}\n        className={styles.closeButton}\n        onClick={() => closeNftAttributesModal()}\n      >\n        <i\n          className={buildClassName(\n            styles.icon,\n            styles.actionIcon,\n            isPortrait && !(IS_ELECTRON && IS_MAC_OS) ? 'icon-chevron-left' : 'icon-close',\n          )}\n          aria-hidden\n        />\n      </button>\n      <NftMenu\n        nft={renderedNft}\n        ref={menuButtonRef}\n        dnsExpireInDays={dnsExpireInDays}\n        menuAnchor={menuAnchor}\n        className={styles.menuButton}\n        onOpen={handleOpenMenu}\n        onClose={handleCloseMenu}\n      />\n      <div className={buildClassName(styles.nftInfo, 'nft-container')} data-nft-address={renderedNft.address}>\n        {lottie ? (\n          <AnimatedIconWithPreview\n            size={ANIMATED_ICON_SIZE}\n            shouldStretch\n            play={isOpen}\n            noLoop={false}\n            tgsUrl={lottie}\n            previewUrl={renderedNft.thumbnail}\n            className={styles.thumbnail}\n            noPreviewTransition\n            onClick={handleNftClick}\n          />\n        ) : (\n          <>\n            <img\n              src={renderedNft.thumbnail}\n              alt={lang('Preview')}\n              role=\"button\"\n              tabIndex={0}\n              className={styles.thumbnail}\n              onClick={handleNftClick}\n            />\n            {Boolean(renderedNft.image) && (\n              <img\n                src={renderedNft.image}\n                alt={renderedNft.name}\n                role=\"button\"\n                tabIndex={0}\n                className={styles.fullImage}\n                onClick={handleNftClick}\n              />\n            )}\n          </>\n        )}\n        <div className={styles.info}>\n          <div className={styles.nftName}>{renderedNft.name}</div>\n          {renderedNft.collectionName && (\n            <div className={styles.collectionName} onClick={handleCollectionClick} tabIndex={0} role=\"button\">\n              {renderedNft.collectionName}\n              <i className={buildClassName(styles.collectionNameIcon, 'icon-chevron-right')} aria-hidden />\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className={buildClassName(styles.content, isNoData && styles.noData)}>\n        {isNoData && lang('No additional data.')}\n\n        {renderedNft.description && (\n          <>\n            <h3 className={styles.label}>{lang('Description')}</h3>\n            <div className={styles.description}>\n              {renderedNft.description}\n            </div>\n          </>\n        )}\n\n        {list.length > 0 && (\n          <>\n            <h3 className={styles.label}>{lang('Attributes')}</h3>\n            <table className={styles.attributesList}>\n              <tbody>\n                {list.map(renderAttributeRow)}\n              </tbody>\n            </table>\n\n            {isFolded && (\n              <a href=\"#\" className={styles.expandButton} onClick={handleExpand}>\n                {lang('Show All')}\n                <i className={buildClassName(styles.expandButtonIcon, 'icon-chevron-down')} aria-hidden />\n              </a>\n            )}\n          </>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentNftForAttributes, nfts } = selectCurrentAccountState(global) || {};\n  const { dnsExpiration } = nfts || {};\n\n  return {\n    nft: currentNftForAttributes,\n    dnsExpiration,\n  };\n})(NftAttributesModal));\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChain, ApiCountryCode } from '../../../api/types';\nimport type { Theme } from '../../../global/types';\n\nimport { selectAccount } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport useLang from '../../../hooks/useLang';\n\nimport Modal from '../../ui/Modal';\nimport Spinner from '../../ui/Spinner';\n\nimport styles from './OnRampWidgetModal.module.scss';\n\ninterface StateProps {\n  chain?: ApiChain;\n  address?: string;\n  countryCode?: ApiCountryCode;\n  theme: Theme;\n}\n\nconst ANIMATION_TIMEOUT = 200;\n\nfunction OnRampWidgetModal({\n  chain, address, countryCode, theme,\n}: StateProps) {\n  const {\n    closeOnRampWidgetModal,\n    showError,\n  } = getActions();\n\n  const isOpen = Boolean(chain) && Boolean(address);\n  const lang = useLang();\n  const animationTimeoutRef = useRef<number>();\n  const [isAnimationInProgress, setIsAnimationInProgress] = useState(true);\n  const [isLoading, setIsLoading] = useState(true);\n  const [iframeSrc, setIframeSrc] = useState('');\n  const appTheme = useAppTheme(theme);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setIsAnimationInProgress(true);\n      setIsLoading(true);\n      setIframeSrc('');\n    }\n\n    return () => window.clearTimeout(animationTimeoutRef.current);\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n\n    if (countryCode === 'RU') {\n      setIframeSrc(`https://dreamwalkers.io/ru/mytonwallet/?wallet=${address}&give=CARDRUB&take=TON&type=buy`);\n      return;\n    }\n\n    void (async () => {\n      const response = await callApi('getMoonpayOnrampUrl', chain, address, appTheme);\n\n      if (response && 'error' in response) {\n        showError({ error: response.error });\n      } else {\n        setIframeSrc(response?.url || '');\n      }\n    })();\n  }, [address, appTheme, chain, countryCode, isOpen]);\n\n  const onIframeLoaded = () => {\n    setIsLoading(false);\n\n    animationTimeoutRef.current = window.setTimeout(() => {\n      setIsAnimationInProgress(false);\n    }, ANIMATION_TIMEOUT);\n  };\n\n  function renderContent() {\n    if (!iframeSrc) return undefined;\n\n    return (\n      <iframe\n        title=\"On Ramp Widget\"\n        onLoad={onIframeLoaded}\n        className={buildClassName(styles.iframe, !isLoading && styles.fadeIn)}\n        width=\"100%\"\n        height=\"100%\"\n        frameBorder=\"none\"\n        allow=\"autoplay; camera; microphone; payment\"\n        src={iframeSrc}\n      >\n        {lang('Cannot load widget')}\n      </iframe>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      title={lang('Buy with Card')}\n      dialogClassName={styles.modalDialog}\n      forceFullNative\n      nativeBottomSheetKey=\"onramp-widget\"\n      onClose={closeOnRampWidgetModal}\n    >\n      <div className={styles.content}>\n        <div className={buildClassName(\n          styles.loaderContainer,\n          !isLoading && styles.fadeOut,\n          !isAnimationInProgress && styles.inactive,\n        )}\n        >\n          <Spinner />\n        </div>\n        {renderContent()}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const { countryCode } = global.restrictions;\n  const { chainForOnRampWidgetModal: chain } = global;\n\n  return {\n    chain,\n    address: chain && addressByChain?.[chain],\n    countryCode,\n    theme: global.settings.theme,\n  };\n})(OnRampWidgetModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"LcOFGyVq\",\"content\":\"ccR1JZvK\",\"iframe\":\"l_Jb77z9\",\"loaderContainer\":\"RfEkSEyB\",\"fadeOut\":\"X5xveqOQ\",\"fade-out-opacity\":\"MtIO76aE\",\"fadeOutOpacity\":\"MtIO76aE\",\"fadeIn\":\"ZRxV9CWH\",\"fade-in-opacity\":\"clpdzldq\",\"fadeInOpacity\":\"clpdzldq\",\"inactive\":\"m3F53tk6\"};","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"D1xdmb1p\",\"square\":\"cQ9fX2T7\",\"squareInner\":\"Y5_NorwC\",\"closeButton\":\"CxvvAWsI\",\"flashLightButton\":\"GRYD1l1J\",\"flashLightButtonEnabled\":\"om10jZuu\",\"documentRoot\":\"Fq9FxTrz\",\"scanner\":\"D8GViz8d\",\"scannerStarted\":\"MmIKemUX\"};","import type { StartScanOptions } from '@capacitor-mlkit/barcode-scanning';\nimport { BarcodeFormat, BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\nimport React, { memo, useRef, useState } from '../../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../../../lib/teact/teact-dom';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { pause } from '../../../util/schedulers';\nimport { DPR, IS_DELEGATING_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './QrScannerModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ntype Point = [number, number];\ntype Square = [Point, Point, Point, Point];\n\nconst START_SCAN_DELAY_MS = IS_IOS ? 160 : 360;\nconst MODAL_ANIMATION_DURATION_MS = IS_IOS ? 650 : 500;\nconst DESTROY_SCANNER_DELAY_MS = IS_IOS ? 250 : 500;\n\nfunction QrScannerModal({ isOpen, onClose }: OwnProps) {\n  const {\n    handleQrCode,\n  } = getActions();\n\n  const [isFlashlightAvailable, setIsFlashlightAvailable] = useState(false);\n  const [isFlashlightEnabled, setIsFlashlightEnabled] = useState(false);\n  const [isScannerStarted, setIsScannerStarted] = useState(false);\n  const { ref: flashlightRef, shouldRender: flashlightShouldRender } = useShowTransition({\n    isOpen: isFlashlightAvailable,\n    withShouldRender: true,\n  });\n\n  const lang = useLang();\n\n  const scanSquareRef = useRef<HTMLDivElement>();\n\n  const onCloseAnimationEnd = useLastCallback(async () => {\n    removeExtraClass(document.documentElement, styles.documentRoot);\n    await BarcodeScanner.stopScan();\n  });\n\n  const handleClose = useLastCallback(() => {\n    setIsScannerStarted(false);\n    setIsFlashlightEnabled(false);\n    onClose();\n  });\n\n  const startScan = useLastCallback(async () => {\n    const options: StartScanOptions = {\n      formats: [BarcodeFormat.QrCode],\n    };\n\n    const scanAreaCoordinates = getDomNodeDimensions(scanSquareRef.current);\n\n    await BarcodeScanner.removeAllListeners();\n    const listener = await BarcodeScanner.addListener(\n      'barcodesScanned',\n      async ({ barcodes: [barcode] }) => {\n        let qrCodeCoordinates = barcode.cornerPoints;\n        qrCodeCoordinates = qrCodeCoordinates ? sortCoordinatesClockwise(qrCodeCoordinates) : undefined;\n\n        if (\n          !scanAreaCoordinates\n          || !qrCodeCoordinates\n          || isQrCodeOutsideScanArea(scanAreaCoordinates, qrCodeCoordinates)\n        ) {\n          return;\n        }\n\n        await listener.remove();\n        await vibrateOnSuccess();\n        handleQrCode({ data: barcode.rawValue });\n        handleClose();\n        await pause(DESTROY_SCANNER_DELAY_MS);\n        if (IS_IOS) {\n          removeExtraClass(document.documentElement, styles.documentRoot);\n        }\n      },\n    );\n\n    setIsScannerStarted(true);\n    await BarcodeScanner.startScan(options);\n\n    // Wait until the scanner is started, after that we can determine if flashlight is available\n    if (!isFlashlightAvailable) {\n      void BarcodeScanner\n        .isTorchAvailable()\n        .then((result) => {\n          setIsFlashlightAvailable(result.available);\n        });\n    }\n    void BarcodeScanner\n      .isTorchEnabled()\n      .then((result) => {\n        setIsFlashlightEnabled(result.enabled);\n      });\n  });\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    let startScanTimeoutId: number;\n    let documentClassModifyTimeoutId: number;\n    if (isOpen) {\n      startScanTimeoutId = window.setTimeout(startScan, START_SCAN_DELAY_MS);\n      documentClassModifyTimeoutId = window.setTimeout(() => {\n        addExtraClass(document.documentElement, styles.documentRoot);\n      }, MODAL_ANIMATION_DURATION_MS);\n    } else if (prevIsOpen) {\n      handleClose();\n    }\n\n    return () => {\n      if (startScanTimeoutId) window.clearTimeout(startScanTimeoutId);\n      if (documentClassModifyTimeoutId) window.clearTimeout(documentClassModifyTimeoutId);\n    };\n  }, [isOpen, handleClose, startScan]);\n\n  const handleFlashlightClick = useLastCallback(async () => {\n    if (isFlashlightEnabled) {\n      await BarcodeScanner.disableTorch();\n    } else {\n      await BarcodeScanner.enableTorch();\n    }\n    setIsFlashlightEnabled(!isFlashlightEnabled);\n  });\n\n  const flashlightButtonClassName = buildClassName(\n    styles.flashLightButton,\n    isFlashlightEnabled && styles.flashLightButtonEnabled,\n  );\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      nativeBottomSheetKey=\"qr-scanner\"\n      forceFullNative\n      onCloseAnimationEnd={onCloseAnimationEnd}\n    >\n      <div className={buildClassName(styles.scanner, isScannerStarted && styles.scannerStarted)}>\n        <div\n          className={styles.closeButton}\n          aria-label={lang('Close')}\n          role=\"button\"\n          tabIndex={0}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </div>\n\n        {flashlightShouldRender && (\n          <div\n            ref={flashlightRef}\n            className={flashlightButtonClassName}\n            onClick={handleFlashlightClick}\n            aria-label={lang('Toggle Flashlight')}\n            role=\"button\"\n            tabIndex={0}\n          >\n            <i className=\"icon-flashlight\" aria-hidden />\n          </div>\n        )}\n\n        <div className={styles.title}>{lang('Scan QR Code')}</div>\n\n        <div className={styles.square} ref={scanSquareRef}>\n          <div className={styles.squareInner} />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(QrScannerModal);\n\nfunction sortCoordinatesClockwise(coordinates: Square): Square {\n  coordinates.sort((a, b) => a[1] - b[1]);\n\n  const topHalf = coordinates.slice(0, 2) as [Point, Point];\n  const bottomHalf = coordinates.slice(2) as [Point, Point];\n\n  topHalf.sort((a, b) => b[0] - a[0]);\n  bottomHalf.sort((a, b) => a[0] - b[0]);\n\n  return [...topHalf, ...bottomHalf];\n}\n\nfunction getDomNodeDimensions(node: HTMLDivElement | undefined): Square | undefined {\n  if (!node) {\n    return undefined;\n  }\n\n  const scanSquareRect = node.getBoundingClientRect();\n  const scaledRect = {\n    left: scanSquareRect.left * DPR,\n    right: scanSquareRect.right * DPR,\n    top: scanSquareRect.top * DPR,\n    bottom: scanSquareRect.bottom * DPR,\n    width: scanSquareRect.width * DPR,\n    height: scanSquareRect.height * DPR,\n  };\n\n  return [\n    [scaledRect.left, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top + scaledRect.height],\n    [scaledRect.left, scaledRect.top + scaledRect.height],\n  ];\n}\n\nfunction isQrCodeOutsideScanArea(scanArea: Square, qrCodeCoordinates: Square): boolean {\n  return (\n    scanArea[0][0] > qrCodeCoordinates[0][0]\n    || scanArea[0][1] > qrCodeCoordinates[0][1]\n    || scanArea[1][0] < qrCodeCoordinates[1][0]\n    || scanArea[1][1] > qrCodeCoordinates[1][1]\n    || scanArea[2][0] < qrCodeCoordinates[2][0]\n    || scanArea[2][1] < qrCodeCoordinates[2][1]\n    || scanArea[3][0] > qrCodeCoordinates[3][0]\n    || scanArea[3][1] < qrCodeCoordinates[3][1]\n  );\n}\n","import React, {\n  memo, useEffect, useLayoutEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport captureKeyboardListeners from '../../../util/captureKeyboardListeners';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './SignatureModal.module.scss';\n\ntype StateProps = {\n  dataHex?: string;\n  error?: string;\n  isSigned?: boolean;\n};\n\nconst enum SLIDES {\n  confirm,\n  password,\n  complete,\n}\n\nfunction SignatureModal({\n  dataHex, error, isSigned,\n}: StateProps) {\n  const { submitSignature, clearSignatureError, cancelSignature } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.password);\n\n  useLayoutEffect(() => {\n    if (dataHex) {\n      setCurrentSlide(SLIDES.confirm);\n      setNextKey(SLIDES.password);\n      openModal();\n    }\n  }, [dataHex, openModal]);\n\n  useLayoutEffect(() => {\n    if (isSigned) {\n      setCurrentSlide(SLIDES.complete);\n      setNextKey(undefined);\n    }\n  }, [isSigned]);\n\n  useEffect(() => (\n    currentSlide === SLIDES.complete\n      ? captureKeyboardListeners({ onEnter: closeModal })\n      : undefined\n  ), [closeModal, currentSlide]);\n\n  const handleConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.complete);\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitSignature({ password });\n  });\n\n  function renderConfirm() {\n    return (\n      <>\n        <ModalHeader title={lang('Confirmation')} onClose={closeModal} />\n        <div className={modalStyles.transitionContent}>\n          <div className={transferStyles.label}>{lang('Signing Data')}</div>\n          <div className={transferStyles.inputReadOnly}>\n            {dataHex}\n          </div>\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n          <div className={modalStyles.buttons}>\n            <Button className={modalStyles.button} onClick={closeModal}>{lang('Cancel')}</Button>\n            <Button isPrimary className={modalStyles.button} onClick={handleConfirm}>{lang('Sign')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Enter Password')} onClose={closeModal} />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          submitLabel={lang('Sign')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={closeModal}\n          onUpdate={clearSignatureError}\n        />\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Done!')} onClose={closeModal} />\n\n        <div className={buildClassName(modalStyles.transitionContent, modalStyles.transitionContent_simple)}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <div className={styles.description}>\n            {lang('Signing was confirmed!')}\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={closeModal}>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return renderConfirm();\n\n      case SLIDES.password:\n        return renderPasswordForm(isActive);\n\n      case SLIDES.complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isModalOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={closeModal}\n      onCloseAnimationEnd={cancelSignature}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const {\n      dataHex, error, isSigned,\n    } = global.currentSignature || {};\n\n    return {\n      dataHex, error, isSigned,\n    };\n  },\n)(SignatureModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"nrINNy28\",\"error\":\"IHEwWBxd\",\"sticker\":\"wlPR2AOa\",\"description\":\"bgrj6VK3\"};","import { useRef } from '../lib/teact/teact';\n\nimport useForceUpdate from './useForceUpdate';\nimport usePrevious from './usePrevious';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function usePrevDuringAnimation<T>(current: T, duration?: number) {\n  const prev = usePrevious(current, true);\n  const timeoutRef = useRef<number>();\n  const forceUpdate = useForceUpdate();\n  // eslint-disable-next-line no-null/no-null\n  const isCurrentPresent = current !== undefined && current !== null;\n  // eslint-disable-next-line no-null/no-null\n  const isPrevPresent = prev !== undefined && prev !== null;\n\n  if (isCurrentPresent && timeoutRef.current) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = undefined;\n  }\n\n  useSyncEffect(() => {\n    // When `current` becomes empty\n    if (duration && !isCurrentPresent && isPrevPresent && !timeoutRef.current) {\n      timeoutRef.current = window.setTimeout(() => {\n        timeoutRef.current = undefined;\n        forceUpdate();\n      }, duration);\n    }\n  }, [duration, forceUpdate, isCurrentPresent, isPrevPresent]);\n\n  return !timeoutRef.current || !duration || isCurrentPresent ? current : prev;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"time\":\"AsvSkk14\",\"timeWarning\":\"CZBR69BT\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport type { LangFn } from '../../hooks/useLang';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { setCancellableTimeout } from '../../util/schedulers';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Countdown.module.scss';\n\ninterface OwnProps {\n  timestamp: number;\n  deadline: number;\n  onCompleted?: NoneToVoidFunction;\n}\n\nconst WARNING_TIME = 5 * 60; // 5 minutes in seconds;\n\nfunction Countdown({\n  timestamp,\n  deadline,\n  onCompleted,\n}: OwnProps) {\n  const lang = useLang();\n  const initialSeconds = Math.floor((timestamp + deadline - Date.now()) / SECOND);\n  const [secondsLeft, setSecondsLeft] = useState(Math.max(initialSeconds, 0));\n  const shouldShowWarning = secondsLeft <= WARNING_TIME;\n\n  useEffect(() => {\n    const clearTimer = setCancellableTimeout(SECOND, () => {\n      if (secondsLeft <= 0) return;\n\n      setSecondsLeft(Math.floor((timestamp + deadline - Date.now()) / SECOND));\n    });\n\n    if (secondsLeft <= 0) {\n      onCompleted?.();\n    }\n\n    return clearTimer;\n  }, [secondsLeft, onCompleted, timestamp, deadline]);\n\n  return (\n    <span className={buildClassName(\n      styles.time,\n      shouldShowWarning && styles.timeWarning,\n    )}\n    >\n      {formatTime(lang, secondsLeft)}\n    </span>\n  );\n}\n\nfunction formatTime(lang: LangFn, seconds: number): string {\n  const pad = (num: number) => num.toString().padStart(2, '0');\n\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const remainingSeconds = seconds % 60;\n\n  let formattedTime = hours > 0 ? `${hours}:` : '';\n  formattedTime += `${hours > 0 ? pad(minutes) : minutes}:`;\n  formattedTime += pad(remainingSeconds);\n\n  return formattedTime;\n}\n\nexport default memo(Countdown);\n","// extracted by mini-css-extract-plugin\nexport default {\"infoBlock\":\"DqUj918m\",\"infoRow\":\"suN_Ci9f\",\"noIcon\":\"SUjgosvS\",\"noCurrency\":\"RjCLBwiu\",\"infoRowIcon\":\"kaMx21E_\",\"infoRowToken\":\"iNWWwjqK\",\"label\":\"uLUQH_M3\",\"infoRowChain\":\"NcAsWeQk\",\"infoRowAmount\":\"TzvDf_Jl\",\"infoRowAmountGreen\":\"I6xrY9jc\",\"infoRowAmountError\":\"iiFYcyID\",\"infoRowCurrency\":\"zab5hSsH\",\"infoRowCurrencyValue\":\"Q3pxLMbG\",\"infoSeparator\":\"ZO00ZPul\",\"infoSeparatorIcon\":\"fPy_1zLl\",\"infoSeparatorIconError\":\"GP0AJq0W\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { UserSwapToken } from '../../global/types';\n\nimport { TOKEN_WITH_LABEL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport SensitiveData from '../ui/SensitiveData';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './SwapTokensInfo.module.scss';\n\ninterface OwnProps {\n  isSensitiveDataHidden?: true;\n  tokenIn?: UserSwapToken | ApiSwapAsset;\n  amountIn?: string;\n  tokenOut?: UserSwapToken | ApiSwapAsset;\n  amountOut?: string;\n  isError?: boolean;\n}\n\nfunction SwapTokensInfo({\n  isSensitiveDataHidden, tokenIn, amountIn, tokenOut, amountOut, isError = false,\n}: OwnProps) {\n  const amountInCols = useMemo(() => getPseudoRandomNumber(5, 13, amountIn ?? ''), [amountIn]);\n  const amountOutCols = useMemo(() => getPseudoRandomNumber(5, 13, amountOut ?? ''), [amountOut]);\n\n  function renderTokenInfo(\n    amountCols: number,\n    token?: UserSwapToken | ApiSwapAsset,\n    amount = '0',\n    isReceived = false,\n  ) {\n    const amountWithSign = isReceived ? amount : `-${amount}`;\n    const withLabel = Boolean(token && TOKEN_WITH_LABEL[token.slug]);\n\n    return (\n      <div className={buildClassName(styles.infoRow, !token && styles.noIcon, isReceived && styles.noCurrency)}>\n        {Boolean(token) && (\n          <TokenIcon\n            token={token}\n            withChainIcon\n            className={styles.infoRowIcon}\n          />\n        )}\n\n        <span className={styles.infoRowToken}>\n          {token?.name}\n          {withLabel && (\n            <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[token!.slug]}</span>\n          )}\n        </span>\n        <SensitiveData\n          isActive={isSensitiveDataHidden}\n          cols={amountCols}\n          rows={2}\n          cellSize={8}\n          align=\"right\"\n          className={buildClassName(\n            styles.infoRowAmount,\n            isReceived && styles.infoRowAmountGreen,\n            isError && styles.infoRowAmountError,\n          )}\n        >\n          {formatCurrencyExtended(amountWithSign, token?.symbol ?? '')}\n        </SensitiveData>\n        <span className={styles.infoRowChain}>{getChainNetworkName(token?.chain)}</span>\n        {!isReceived && renderCurrency(amountIn, amountOut, tokenIn, tokenOut)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.infoBlock}>\n      {renderTokenInfo(amountInCols, tokenIn, amountIn)}\n      <div className={styles.infoSeparator}>\n        <i\n          className={buildClassName(\n            styles.infoSeparatorIcon,\n            isError && styles.infoSeparatorIconError,\n            isError ? 'icon-close' : 'icon-arrow-down',\n          )}\n          aria-hidden\n        />\n      </div>\n      {renderTokenInfo(amountOutCols, tokenOut, amountOut, true)}\n    </div>\n  );\n}\n\nexport default memo(SwapTokensInfo);\n\nfunction renderCurrency(amountIn?: string, amountOut?: string, fromToken?: ApiSwapAsset, toToken?: ApiSwapAsset) {\n  const rate = getSwapRate(amountIn, amountOut, fromToken, toToken);\n  if (!rate) return undefined;\n\n  return (\n    <span className={styles.infoRowCurrency}>\n      {rate.firstCurrencySymbol} \n      <span className={styles.infoRowCurrencyValue}>\n        {rate.price}{' '}{rate.secondCurrencySymbol}\n      </span>\n    </span>\n  );\n}\n","import React from '../../lib/teact/teact';\n\nimport type { OwnProps as FeeProps } from '../ui/Fee';\n\nimport useLang from '../../hooks/useLang';\n\nimport Fee from '../ui/Fee';\nimport LoadingDots from '../ui/LoadingDots';\nimport Transition from '../ui/Transition';\n\nimport styles from './TransactionFee.module.scss';\n\ninterface OwnProps extends Pick<FeeProps, 'terms' | 'token' | 'precision'> {\n  isLoading?: boolean;\n  className?: string;\n}\n\nexport default function TransactionFee({ terms, token, precision, isLoading, className }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div className={className}>\n      <div className={styles.label}>\n        {lang('Fee')}\n      </div>\n      <div className={styles.field}>\n        <Transition activeKey={isLoading ? 1 : 0} name=\"fade\" className={styles.field_transition}>\n          {isLoading\n            ? <LoadingDots isActive className={styles.field_loading} />\n            : <Fee terms={terms} token={token} precision={precision} />}\n        </Transition>\n      </div>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"label\":\"FHA1HU_P\",\"field\":\"OgExpTBf\",\"field_transition\":\"JaS_WGfX\",\"fieldTransition\":\"JaS_WGfX\",\"field_loading\":\"SFz4gihZ\",\"fieldLoading\":\"SFz4gihZ\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"E6N6MD3z\",\"unstakeModal\":\"gnNvHGfL\",\"passwordFormContent\":\"KL1uqo4o\",\"passwordFormContentInModal\":\"CZ9Kse33\",\"sticker\":\"AeVBXxbG\",\"footer\":\"rQ0tvCAk\",\"copyButtonWrapper\":\"VtMfi0Xs\",\"feeField\":\"fSQYvfg1\",\"comment\":\"jxc6euua\",\"button\":\"eww3tEAs\",\"buttonWide\":\"ND5LbWGY\",\"unstakeTime\":\"hDTeTwua\",\"unstakeTimeIcon\":\"tZ2WbGH0\",\"scamImage\":\"BASL0DzO\",\"scamAddress\":\"km7wfY2m\",\"modalTitle\":\"yadTct7r\",\"transactionHeader\":\"uAQ2u0Hd\",\"headerTitle\":\"J16GqrT7\",\"headerTitle__badge\":\"arXCGBG7\",\"headerTitleBadge\":\"arXCGBG7\",\"warning\":\"w8eOJTS4\",\"headerDate\":\"fiJguUso\",\"infoBlock\":\"NGumnj62\",\"textFieldWrapper\":\"UGOei_Ih\",\"swapSupportBlock\":\"mVgCbbey\",\"textFieldLabel\":\"lXDi3LO1\",\"advancedTooltip\":\"hr8oR5Ry\",\"advancedTooltipContainer\":\"t6X1h79H\",\"errorCexBlock\":\"Qr0LqmBg\",\"errorCexMessage\":\"uSKXuCCa\",\"errorCexEmail\":\"cQ1RlviM\",\"changellyInfoBlock\":\"IZsujzDG\",\"changellyDescription\":\"IgVxAVQB\",\"changellyDescriptionBold\":\"EOk33hg6\",\"qrCode\":\"DfLLakci\",\"qrCodeHidden\":\"L9e2rlZo\",\"scamWarning\":\"OAz9rga6\"};","import React, { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../api/types';\nimport type { Account, Theme } from '../../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  CHANGELLY_LIVE_CHAT_URL,\n  CHANGELLY_SECURITY_EMAIL,\n  CHANGELLY_SUPPORT_EMAIL,\n  CHANGELLY_WAITING_DEADLINE,\n  TONCOIN,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { getIsInternalSwap, getIsSupportedChain, resolveSwapAsset } from '../../../global/helpers';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n} from '../../../global/selectors';\nimport { parseTxId } from '../../../util/activities';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../util/formatNumber';\nimport getChainNetworkName from '../../../util/swap/getChainNetworkName';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport Countdown from '../../common/Countdown';\nimport SwapTokensInfo from '../../common/SwapTokensInfo';\nimport TransactionFee from '../../common/TransactionFee';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\ntype StateProps = {\n  addressByChain?: Account['addressByChain'];\n  activity?: ApiSwapActivity;\n  tokensBySlug?: Record<string, ApiSwapAsset>;\n  theme: Theme;\n  isSwapDisabled?: boolean;\n  isSensitiveDataHidden?: true;\n};\n\nconst CHANGELLY_EXPIRE_CHECK_STATUSES = new Set(['new', 'waiting']);\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending']);\nconst CHANGELLY_ERROR_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['failed', 'expired']);\n\nfunction SwapActivityModal({\n  activity, tokensBySlug, theme, addressByChain, isSwapDisabled, isSensitiveDataHidden,\n}: StateProps) {\n  const {\n    fetchActivityDetails,\n    startSwap,\n    closeActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = Boolean(activity);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedActivity = usePrevDuringAnimation(activity, animationDuration);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    id,\n    hashes,\n    timestamp,\n    networkFee = '0',\n    ourFee = '0',\n    shouldLoadDetails,\n  } = renderedActivity ?? {};\n  const { payinAddress, payoutAddress, payinExtraId } = renderedActivity?.cex || {};\n\n  let fromAmount = '0';\n  let toAmount = '0';\n  let isPending = true;\n  let isError = false;\n  let shouldRenderCexInfo = false;\n  let isCex = false;\n  let isCexError = false;\n  let isCexHold = false;\n  let isCexWaiting = false;\n  let isCexPending = false;\n  let isExpired = false;\n  let cexTransactionId = '';\n  let title = '';\n  let titleBadge: string | undefined;\n  let isTitleBadgeWarning = false;\n  let cexErrorMessage = '';\n  let isFromToncoin = true;\n  let isCountdownFinished = false;\n\n  const fromToken = useMemo(() => {\n    if (!renderedActivity?.from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.from);\n  }, [renderedActivity?.from, tokensBySlug]);\n\n  const toToken = useMemo(() => {\n    if (!renderedActivity?.to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.to);\n  }, [renderedActivity?.to, tokensBySlug]);\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken, to: toToken, toAddress: payoutAddress, addressByChain,\n  });\n\n  if (renderedActivity) {\n    const {\n      status, from, cex,\n    } = renderedActivity;\n    fromAmount = renderedActivity.fromAmount;\n    toAmount = renderedActivity.toAmount;\n    isFromToncoin = from === TONCOIN.slug;\n    isCex = Boolean(cex);\n\n    if (cex) {\n      isCountdownFinished = timestamp\n        ? (timestamp + CHANGELLY_WAITING_DEADLINE - Date.now() < 0)\n        : false;\n      isExpired = CHANGELLY_EXPIRE_CHECK_STATUSES.has(cex.status) && isCountdownFinished;\n      shouldRenderCexInfo = cex.status !== 'finished';\n      isPending = !isExpired && CHANGELLY_PENDING_STATUSES.has(cex.status);\n      isCexPending = isPending;\n      isCexError = isExpired || CHANGELLY_ERROR_STATUSES.has(cex.status);\n      isCexHold = cex.status === 'hold';\n      // Skip the 'waiting' status for transactions from Toncoin to other chains\n      // or from TRON to TON inside a multichain wallet for delayed status updates from hangelly\n      isCexWaiting = cex.status === 'waiting' && !isExpired && !isInternalSwap && !isFromToncoin;\n      cexTransactionId = cex.transactionId;\n    } else {\n      isPending = status === 'pending';\n      isError = ONCHAIN_ERROR_STATUSES.has(status);\n    }\n\n    if (isPending) {\n      title = lang('Swapping');\n    } else if (isCexHold) {\n      title = lang('$swap_action');\n      titleBadge = lang('On Hold');\n      isTitleBadgeWarning = true;\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'overdue') {\n        title = lang('$swap_action');\n        titleBadge = lang('Expired');\n        cexErrorMessage = lang('You have not sent the coins to the specified address.');\n      } else if (cexStatus === 'refunded') {\n        title = lang('$swap_action');\n        titleBadge = lang('Refunded');\n        cexErrorMessage = lang('Exchange failed and coins were refunded to your wallet.');\n      } else {\n        title = lang('$swap_action');\n        titleBadge = lang('Failed');\n      }\n    } else if (isError) {\n      title = lang('$swap_action');\n      titleBadge = lang('Failed');\n    } else {\n      title = lang('Swapped');\n    }\n  }\n\n  const transactionHash = id ? isCex ? hashes?.[0] : parseTxId(id).hash : undefined;\n  const transactionUrl = getExplorerTransactionUrl('ton', transactionHash);\n\n  const shouldShowQrCode = !payinExtraId && toToken?.chain === 'ton' && !isInternalSwap;\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive: Boolean(payinAddress),\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    startSwap({\n      tokenInSlug: fromToken!.slug,\n      tokenOutSlug: toToken!.slug,\n      amountIn: fromAmount,\n    });\n  });\n\n  useEffect(() => {\n    if (id && shouldLoadDetails) fetchActivityDetails({ id });\n  }, [id, shouldLoadDetails]);\n\n  function renderHeader() {\n    return (\n      <div className={styles.transactionHeader}>\n        <div className={styles.headerTitle}>\n          {title}\n          {isPending && (\n            <AnimatedIconWithPreview\n              play={isOpen}\n              size={ANIMATED_STICKER_TINY_ICON_PX}\n              nonInteractive\n              noLoop={false}\n              tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClock}\n              previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClock}\n            />\n          )}\n          {!!titleBadge && (\n            <span className={buildClassName(styles.headerTitle__badge, isTitleBadgeWarning && styles.warning)}>\n              {titleBadge}\n            </span>\n          )}\n        </div>\n        {!!timestamp && (\n          <div className={styles.headerDate}>\n            {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooterButton() {\n    let isButtonVisible = true;\n    let buttonText = 'Swap Again';\n\n    if (isCexWaiting) {\n      return (\n        <Button onClick={handleClose} className={styles.button}>\n          {lang('Close')}\n        </Button>\n      );\n    }\n\n    if (isCexHold) {\n      isButtonVisible = false;\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity?.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'refunded' || cexStatus === 'overdue') {\n        buttonText = 'Try Again';\n      }\n    }\n\n    if (!isButtonVisible) {\n      return undefined;\n    }\n\n    return (\n      <Button onClick={handleSwapClick} className={styles.button}>\n        {lang(buttonText)}\n      </Button>\n    );\n  }\n\n  function renderCexInformation() {\n    if (isCexHold) {\n      return (\n        <div className={styles.textFieldWrapper}>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_kyc_security', {\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SECURITY_EMAIL}\n                </span>\n              ),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n            />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.textFieldWrapper, styles.swapSupportBlock)}>\n        {cexErrorMessage && <span className={styles.errorCexMessage}>{cexErrorMessage}</span>}\n\n        {isCexPending && (\n          <span className={buildClassName(styles.changellyDescription)}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        )}\n        {isCountdownFinished && (\n          <>\n            <span className={styles.changellyDescription}>\n              {lang('$swap_changelly_support', {\n                livechat: (\n                  <a\n                    href={CHANGELLY_LIVE_CHAT_URL}\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                    className={styles.changellyDescriptionBold}\n                  >\n                    {lang('Changelly Live Chat')}\n                  </a>\n                ),\n                email: (\n                  <span className={styles.changellyDescriptionBold}>\n                    {CHANGELLY_SUPPORT_EMAIL}\n                  </span>\n                ),\n              })}\n            </span>\n            {cexTransactionId && (\n              <InteractiveTextField\n                text={cexTransactionId}\n                copyNotification={lang('Transaction ID was copied!')}\n                noSavedAddress\n                noExplorer\n              />\n            )}\n          </>\n        )}\n      </div>\n    );\n  }\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n        />\n      </div>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain=\"ton\"\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n        />\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (!(Number(networkFee) || shouldLoadDetails) || !fromToken) {\n      return undefined;\n    }\n\n    const terms = isFromToncoin ? {\n      native: Big(networkFee).add(ourFee).toString(),\n    } : {\n      native: networkFee,\n      token: ourFee,\n    };\n\n    return (\n      <TransactionFee\n        terms={terms}\n        token={fromToken}\n        precision={activity?.status === 'pending' ? 'approximate' : 'exact'}\n        isLoading={shouldLoadDetails}\n      />\n    );\n  }\n\n  function renderAddress() {\n    if (!payinAddress) return undefined;\n    const token = isFromToncoin ? toToken : fromToken;\n    const chain = getIsSupportedChain(token?.chain) ? token.chain : undefined;\n\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {isFromToncoin\n            ? lang('Your %blockchain% Address', { blockchain: toToken?.name })\n            : lang('Address for %blockchain% transfer', { blockchain: fromToken?.name })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={isFromToncoin ? payoutAddress : payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          noDimming\n        />\n      </div>\n    );\n  }\n\n  function renderSwapInfo() {\n    if (isCexWaiting) {\n      if (isInternalSwap) return undefined;\n      const chain = getIsSupportedChain(fromToken?.chain) ? fromToken.chain : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          {renderFee()}\n          <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n            value: (\n              <span className={styles.changellyDescriptionBold}>\n                {formatCurrencyExtended(Number(fromAmount), fromToken?.symbol ?? '', true)}\n              </span>\n            ),\n            blockchain: (\n              <span className={styles.changellyDescriptionBold}>\n                {getChainNetworkName(fromToken?.chain)}\n              </span>\n            ),\n            time: <Countdown timestamp={timestamp ?? 0} deadline={CHANGELLY_WAITING_DEADLINE} />,\n          })}\n          </span>\n          <InteractiveTextField\n            chain={chain}\n            address={payinAddress}\n            copyNotification={lang('Address was copied!')}\n            noSavedAddress\n            noExplorer\n            noDimming\n          />\n          {renderMemo()}\n          {shouldShowQrCode && (\n            <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderFee()}\n        {!isInternalSwap && renderAddress()}\n        {!isInternalSwap && renderMemo()}\n      </>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <div className={modalStyles.transitionContent}>\n        <SwapTokensInfo\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          tokenIn={fromToken}\n          amountIn={fromAmount}\n          tokenOut={toToken}\n          amountOut={toAmount}\n          isError={isError || isCexError}\n        />\n        <div className={styles.infoBlock}>\n          {renderSwapInfo()}\n          {shouldRenderCexInfo && renderCexInformation()}\n          {transactionUrl && renderTransactionId()}\n        </div>\n        {!isSwapDisabled && (\n          <div className={styles.footer}>\n            {renderFooterButton()}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      title={renderHeader()}\n      titleClassName={styles.modalTitle}\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"swap-activity\"\n      onClose={handleClose}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n    const account = selectCurrentAccount(global);\n    const { isSwapDisabled } = global.restrictions;\n    const { theme, isSensitiveDataHidden } = global.settings;\n\n    const id = accountState?.currentActivityId;\n    const activity = id ? accountState?.activities?.byId[id] : undefined;\n\n    return {\n      activity: activity?.kind === 'swap' ? activity : undefined,\n      tokensBySlug: global.swapTokenInfo?.bySlug,\n      theme,\n      addressByChain: account?.addressByChain,\n      isSwapDisabled: isSwapDisabled || global.settings.isTestnet || selectIsCurrentAccountViewMode(global),\n      isSensitiveDataHidden,\n    };\n  })(SwapActivityModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"amountSensitiveData\":\"__I8XE5D\",\"baseCurrencyAmountSensitiveData\":\"tPLUuFQO\",\"withStatus\":\"MeZ5UFq3\",\"amount\":\"Qy2zkhK5\",\"baseCurrencyAmount\":\"BUzkYW_L\",\"status\":\"COF5DpZg\",\"amountSymbol\":\"AgH98knQ\",\"amountFraction\":\"F1teTrIV\",\"operationPositive\":\"cuIyqZ4t\",\"operationNegative\":\"X1mdYuXG\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../api/types';\n\nimport { UNKNOWN_TOKEN } from '../../config';\nimport { bigintAbs } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatBaseCurrencyAmount, formatCurrencyExtended } from '../../util/formatNumber';\n\nimport SensitiveData from '../ui/SensitiveData';\n\nimport styles from './TransactionAmount.module.scss';\n\ninterface OwnProps {\n  amount: bigint;\n  token?: Pick<ApiTokenWithPrice, 'decimals' | 'symbol' | 'price'>;\n  isIncoming?: boolean;\n  isScam?: boolean;\n  isFailed?: boolean;\n  status?: string;\n  noSign?: boolean;\n  isSensitiveDataHidden?: true;\n  baseCurrency?: ApiBaseCurrency;\n}\n\nfunction TransactionAmount({\n  isIncoming,\n  isScam,\n  isFailed,\n  amount,\n  token,\n  status,\n  noSign = false,\n  isSensitiveDataHidden,\n  baseCurrency,\n}: OwnProps) {\n  const typeClass = isFailed || isScam\n    ? styles.operationNegative\n    : isIncoming ? styles.operationPositive : undefined;\n\n  function renderAmount() {\n    const { decimals, symbol } = token ?? UNKNOWN_TOKEN;\n    const amountString = toDecimal(noSign ? bigintAbs(amount) : amount, decimals);\n    const [wholePart, fractionPart]\n      = formatCurrencyExtended(amountString, '', noSign, decimals, !isIncoming).split('.');\n    const withStatus = Boolean(status);\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={12}\n        rows={withStatus ? 7 : 4}\n        align=\"center\"\n        cellSize={withStatus ? 17 : 18}\n        className={buildClassName(styles.amountSensitiveData, status && styles.withStatus)}\n      >\n        <div\n          className={buildClassName(\n            styles.amount,\n            status && styles.withStatus,\n            typeClass,\n            'rounded-font',\n          )}\n        >\n          {wholePart.trim().replace('\\u202F', '')}\n          {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n          <span className={styles.amountSymbol}>{symbol}</span>\n        </div>\n        {withStatus && (\n          <div className={buildClassName(styles.status, typeClass)}>\n            {status}\n          </div>\n        )}\n      </SensitiveData>\n    );\n  }\n\n  function renderBaseCurrencyAmount() {\n    if (!token) {\n      return undefined;\n    }\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={10}\n        rows={3}\n        align=\"center\"\n        cellSize={12}\n        className={styles.baseCurrencyAmountSensitiveData}\n        contentClassName={buildClassName(styles.baseCurrencyAmount, 'rounded-font', typeClass)}\n      >\n        {formatBaseCurrencyAmount(amount, baseCurrency, token)}\n      </SensitiveData>\n    );\n  }\n\n  return (\n    <>\n      {renderAmount()}\n      {renderBaseCurrencyAmount()}\n    </>\n  );\n}\n\nexport default memo(TransactionAmount);\n","import type { TeactNode } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiBaseCurrency,\n  ApiNft,\n  ApiStakingState,\n  ApiTokenWithPrice,\n  ApiToncoinStakingState,\n  ApiTransactionActivity,\n} from '../../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../../global/types';\nimport { ActiveTab } from '../../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  TONCOIN,\n  VALIDATION_PERIOD_MS,\n} from '../../../config';\nimport { errorCodeToMessage } from '../../../global/helpers/errors';\nimport { isErrorTransferResult } from '../../../global/helpers/transfer';\nimport {\n  selectAccounts,\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectIsHardwareAccount,\n} from '../../../global/selectors';\nimport {\n  getIsActivityWithHash,\n  getTransactionAmountDisplayMode,\n  getTransactionTitle,\n  isOurStakingTransaction,\n  isScamTransaction,\n  parseTxId,\n  shouldShowTransactionAddress,\n} from '../../../util/activities';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport { bigintAbs } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatRelativeHumanDateTime, formatTime } from '../../../util/dateFormat';\nimport { getLocalAddressName } from '../../../util/getLocalAddressName';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { getStakingStateStatus } from '../../../util/staking';\nimport { getNativeToken } from '../../../util/tokens';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { callApi } from '../../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport TransactionAmount from '../../common/TransactionAmount';\nimport TransactionFee from '../../common/TransactionFee';\nimport NftInfo from '../../transfer/NftInfo';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\nimport scamImg from '../../../assets/scam.svg';\n\ntype StateProps = {\n  transaction?: ApiTransactionActivity;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  savedAddresses?: SavedAddress[];\n  isHardwareAccount: boolean;\n  isTestnet?: boolean;\n  isViewMode: boolean;\n  stakingStates?: ApiStakingState[];\n  isLongUnstakeRequested?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n  isSensitiveDataHidden?: true;\n  nftsByAddress?: Record<string, ApiNft>;\n  accounts?: Record<string, Account>;\n  currentAccountId: string;\n  baseCurrency?: ApiBaseCurrency;\n};\n\nconst enum SLIDES {\n  initial,\n  password,\n}\n\nfunction TransactionModal({\n  transaction,\n  tokensBySlug,\n  savedAddresses,\n  isTestnet,\n  isHardwareAccount,\n  isViewMode,\n  stakingStates,\n  isLongUnstakeRequested,\n  isMediaViewerOpen,\n  theme,\n  isSensitiveDataHidden,\n  nftsByAddress,\n  accounts,\n  currentAccountId,\n  baseCurrency,\n}: StateProps) {\n  const {\n    fetchActivityDetails,\n    startTransfer,\n    startStaking,\n    startUnstaking,\n    closeActivityInfo,\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    setLandscapeActionsActiveTabIndex,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.initial);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.password);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedTransaction = usePrevDuringAnimation(transaction, animationDuration);\n  const [unstakeDate, setUnstakeDate] = useState<number>(Date.now() + VALIDATION_PERIOD_MS);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    fromAddress,\n    toAddress,\n    amount,\n    comment,\n    encryptedComment,\n    fee,\n    id,\n    isIncoming,\n    slug,\n    timestamp,\n    nft,\n    shouldLoadDetails,\n    status,\n  } = renderedTransaction || {};\n  const isActivityWithHash = Boolean(renderedTransaction && getIsActivityWithHash(renderedTransaction));\n  const isOurStaking = renderedTransaction && isOurStakingTransaction(renderedTransaction);\n  const isOurUnstaking = isOurStaking && renderedTransaction?.type === 'unstake';\n  const isNftTransfer = Boolean(renderedTransaction?.nft);\n\n  const token = slug ? tokensBySlug?.[slug] : undefined;\n  const chain = token?.chain;\n\n  const nativeToken = token ? getNativeToken(token.chain) : undefined;\n  const address = isIncoming ? fromAddress : toAddress;\n  const isAnyPending = status === 'pending' || status === 'pendingTrusted';\n  const iconClock = status === 'pendingTrusted' ? 'iconClockGreen' : 'iconClock';\n  const localAddressName = useMemo(() => {\n    if (!chain) return undefined;\n\n    return getLocalAddressName({\n      address,\n      chain,\n      currentAccountId,\n      accounts: accounts!,\n      savedAddresses,\n    });\n  }, [accounts, address, chain, currentAccountId, savedAddresses]);\n  const addressName = localAddressName || transaction?.metadata?.name;\n  const isTransactionWithPoisoning = isIncoming && getIsTransactionWithPoisoning(renderedTransaction!);\n  const isScam = Boolean(transaction) && isScamTransaction(transaction);\n  const isModalOpen = Boolean(transaction) && !isMediaViewerOpen;\n  const transactionHash = chain && id ? parseTxId(id).hash : undefined;\n  const doesNftExist = Boolean(nft && nftsByAddress?.[nft.address]);\n  const canDecryptComment = !isViewMode && !isHardwareAccount;\n\n  const [decryptedComment, setDecryptedComment] = useState<string>();\n  const [passwordError, setPasswordError] = useState<string>();\n\n  const transactionUrl = chain ? getExplorerTransactionUrl(chain, transactionHash, isTestnet) : undefined;\n\n  const {\n    shouldRender: shouldRenderTransactionId,\n    ref: transactionIdRef,\n  } = useShowTransition({\n    isOpen: Boolean(isActivityWithHash && transactionUrl),\n    withShouldRender: true,\n  });\n\n  const stakingState = useMemo(() => {\n    return stakingStates?.find((staking): staking is ApiToncoinStakingState => {\n      return staking.tokenSlug === TONCOIN.slug && staking.balance > 0n;\n    });\n  }, [stakingStates]);\n\n  const stakingStatus = stakingState && getStakingStateStatus(stakingState);\n  const startOfStakingCycle = stakingState?.start;\n  const endOfStakingCycle = stakingState?.end;\n\n  const {\n    shouldRender: shouldRenderUnstakeTimer,\n    ref: unstakeTimerRef,\n  } = useShowTransition({\n    isOpen: transaction?.type === 'unstakeRequest'\n      && startOfStakingCycle !== undefined\n      && (stakingStatus === 'unstakeRequested' || isLongUnstakeRequested)\n      && transaction.timestamp >= startOfStakingCycle,\n    withShouldRender: true,\n  });\n\n  useSyncEffect(() => {\n    if (renderedTransaction) {\n      setDecryptedComment(undefined);\n    }\n  }, [renderedTransaction]);\n\n  useSyncEffect(() => {\n    if (endOfStakingCycle) {\n      setUnstakeDate(endOfStakingCycle);\n    }\n  }, [endOfStakingCycle]);\n\n  useEffect(() => {\n    if (id && shouldLoadDetails) fetchActivityDetails({ id });\n  }, [id, shouldLoadDetails]);\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const openPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(undefined);\n  });\n\n  const closePasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.initial);\n    setNextKey(SLIDES.password);\n    clearPasswordError();\n  });\n\n  const handleSendClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    startTransfer({\n      isPortrait,\n      tokenSlug: slug || TONCOIN.slug,\n      toAddress: address,\n      amount: bigintAbs(amount!),\n      comment: !isIncoming ? comment : undefined,\n    });\n  });\n\n  const handleStartStakingClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n      return;\n    }\n\n    startStaking();\n  });\n\n  const handleUnstakeMoreClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n\n    startUnstaking();\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    const result = await callApi(\n      'decryptComment',\n      getGlobal().currentAccountId!,\n      encryptedComment!,\n      fromAddress!,\n      password,\n    );\n\n    if (isErrorTransferResult(result)) {\n      setPasswordError(errorCodeToMessage(result?.error));\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    closePasswordSlide();\n    setDecryptedComment(result);\n  });\n\n  const openHiddenComment = useLastCallback(async () => {\n    if (!encryptedComment) {\n      return;\n    }\n\n    if (getHasInMemoryPassword()) {\n      const password = await getInMemoryPassword();\n\n      if (password) {\n        void handlePasswordSubmit(password);\n        return;\n      }\n    }\n\n    openPasswordSlide();\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    if (getDoesUsePinPad()) {\n      clearIsPinAccepted();\n    }\n  });\n\n  function renderHeader() {\n    const titleTense = isAnyPending ? 'present' : status === 'failed' ? 'future' : 'past';\n\n    return (\n      <div\n        className={buildClassName(\n          modalStyles.header,\n          modalStyles.header_wideContent,\n        )}\n      >\n        <div className={buildClassName(modalStyles.title, styles.modalTitle)}>\n          <div className={styles.headerTitle}>\n            {transaction && getTransactionTitle(transaction, titleTense, lang)}\n            {isAnyPending && (\n              <AnimatedIconWithPreview\n                play={isModalOpen}\n                size={ANIMATED_STICKER_TINY_ICON_PX}\n                nonInteractive\n                noLoop={false}\n                tgsUrl={ANIMATED_STICKERS_PATHS[appTheme][iconClock]}\n                previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview[iconClock]}\n              />\n            )}\n            {status === 'failed' && (\n              <span className={styles.headerTitle__badge}>\n                {lang('Failed')}\n              </span>\n            )}\n            {isScam && isIncoming && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n          </div>\n          {!!timestamp && (\n            <div className={styles.headerDate}>\n              {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n            </div>\n          )}\n        </div>\n        <Button\n          isRound\n          className={modalStyles.closeButton}\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      </div>\n    );\n  }\n\n  function renderTransactionWithPoisoningWarning() {\n    return (\n      <div className={styles.scamWarning}>\n        {lang('This address mimics another address that you previously interacted with.')}\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (!(fee || shouldLoadDetails) || !nativeToken) {\n      return undefined;\n    }\n\n    return (\n      <TransactionFee\n        terms={{ native: fee }}\n        token={nativeToken}\n        precision={isAnyPending ? 'approximate' : 'exact'}\n        isLoading={shouldLoadDetails}\n        className={styles.feeField}\n      />\n    );\n  }\n\n  function renderComment() {\n    if (!comment && !encryptedComment) {\n      return undefined;\n    }\n\n    const spoiler = encryptedComment\n      ? lang('Message is encrypted.')\n      : isScam\n        ? lang('Scam comment is hidden.')\n        : undefined;\n\n    return (\n      <>\n        <div className={transferStyles.label}>{lang('Comment')}</div>\n        <InteractiveTextField\n          text={encryptedComment ? decryptedComment : comment}\n          spoiler={spoiler}\n          spoilerRevealText={encryptedComment ? (canDecryptComment ? lang('Decrypt') : undefined) : lang('Display')}\n          spoilerCallback={canDecryptComment ? openHiddenComment : undefined}\n          copyNotification={lang('Comment was copied!')}\n          className={styles.copyButtonWrapper}\n          textClassName={styles.comment}\n        />\n      </>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div ref={transactionIdRef} className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain={chain}\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderUnstakeTimer() {\n    return (\n      <div ref={unstakeTimerRef} className={styles.unstakeTime}>\n        <AnimatedIconWithPreview\n          play={isModalOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n        />\n        <div>\n          {lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, unstakeDate)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const canUnstake = isOurStaking && (isOurUnstaking || transaction?.type === 'unstakeRequest')\n      && stakingStatus === 'active';\n    const buttons: TeactNode[] = [];\n\n    if (!isOurStaking && !isIncoming && !isNftTransfer) {\n      buttons.push(\n        <Button onClick={handleSendClick} className={styles.button}>\n          {lang('Repeat')}\n        </Button>,\n      );\n    }\n    if (!IS_CORE_WALLET && isOurStaking) {\n      buttons.push(\n        <Button\n          onClick={handleStartStakingClick}\n          className={buildClassName(styles.button, canUnstake && styles.buttonWide)}\n        >\n          {lang('Stake Again')}\n        </Button>,\n      );\n    }\n    if (canUnstake) {\n      buttons.push(\n        <Button onClick={handleUnstakeMoreClick} className={buildClassName(styles.button, styles.buttonWide)}>\n          {lang('Unstake More')}\n        </Button>,\n      );\n    }\n\n    return buttons.length ? <div className={styles.footer}>{buttons}</div> : undefined;\n  }\n\n  function renderTransactionContent() {\n    const amountDisplayMode = transaction && getTransactionAmountDisplayMode(transaction);\n\n    return (\n      <div className={modalStyles.transitionContent}>\n        {amountDisplayMode !== 'hide' && (\n          <TransactionAmount\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            isIncoming={isIncoming}\n            isScam={isScam}\n            isFailed={status === 'failed'}\n            amount={amount ?? 0n}\n            token={token}\n            status={isOurUnstaking && !shouldRenderUnstakeTimer ? lang('Successfully') : undefined}\n            noSign={amountDisplayMode === 'noSign'}\n            baseCurrency={baseCurrency}\n          />\n        )}\n        {nft && <NftInfo nft={nft} withMediaViewer={doesNftExist} withTonExplorer />}\n\n        {isTransactionWithPoisoning && renderTransactionWithPoisoningWarning()}\n\n        {transaction && shouldShowTransactionAddress(transaction).includes('modal') && (\n          <>\n            <div className={transferStyles.label}>{lang(isIncoming ? 'Sender' : 'Recipient')}</div>\n            <InteractiveTextField\n              chain={chain}\n              addressName={addressName}\n              address={address}\n              isScam={isScam && !isIncoming}\n              copyNotification={lang('Address was copied!')}\n              className={styles.copyButtonWrapper}\n              textClassName={isScam && isIncoming ? styles.scamAddress : undefined}\n            />\n          </>\n        )}\n\n        {renderFee()}\n        {renderComment()}\n        {shouldRenderTransactionId && renderTransactionId()}\n        {shouldRenderUnstakeTimer && renderUnstakeTimer()}\n\n        {!isViewMode && renderFooter()}\n      </div>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.initial:\n        return (\n          <>\n            {renderHeader()}\n            {renderTransactionContent()}\n          </>\n        );\n      case SLIDES.password:\n        if (!encryptedComment) return undefined;\n\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={handleClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              error={passwordError}\n              withCloseButton={IS_CAPACITOR}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              submitLabel={lang('Send')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={closePasswordSlide}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      hasCloseButton\n      nativeBottomSheetKey=\"transaction-info\"\n      forceFullNative={currentSlide === SLIDES.password}\n      dialogClassName={buildClassName(styles.modalDialog, isOurUnstaking && styles.unstakeModal)}\n      onClose={handleClose}\n      onCloseAnimationEnd={closePasswordSlide}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountId = global.currentAccountId!;\n    const accountState = selectCurrentAccountState(global);\n\n    const txId = accountState?.currentActivityId;\n    const activity = txId ? accountState?.activities?.byId[txId] : undefined;\n    const savedAddresses = accountState?.savedAddresses;\n    const { byAddress } = accountState?.nfts || {};\n\n    const stakingStates = selectAccountStakingStates(global, accountId);\n    const { isTestnet, theme, isSensitiveDataHidden } = global.settings;\n    const accounts = selectAccounts(global);\n    const isHardwareAccount = selectIsHardwareAccount(global);\n\n    return {\n      transaction: activity?.kind === 'transaction' ? activity : undefined,\n      tokensBySlug: global.tokenInfo?.bySlug,\n      savedAddresses,\n      isHardwareAccount,\n      isTestnet,\n      isViewMode: selectIsCurrentAccountViewMode(global),\n      isLongUnstakeRequested: accountState?.isLongUnstakeRequested,\n      isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n      theme,\n      stakingStates,\n      isSensitiveDataHidden,\n      nftsByAddress: byAddress,\n      accounts,\n      currentAccountId: accountId,\n      baseCurrency: global.settings.baseCurrency,\n    };\n  })(TransactionModal),\n);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { selectCurrentAccountState } from '../../../global/selectors';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  nftAddress?: string;\n  nftName?: string;\n}\n\nfunction UnhideNftModal({\n  isOpen,\n  nftAddress,\n  nftName,\n}: StateProps) {\n  const { addNftsToWhitelist, closeUnhideNftModal } = getActions();\n\n  const lang = useLang();\n\n  const handleUnhide = useLastCallback(() => {\n    addNftsToWhitelist({ addresses: [nftAddress!] });\n    closeUnhideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeUnhideNftModal}\n      title={lang('Unhide NFT')}\n    >\n      <p className={modalStyles.text}>\n        {lang('$unhide_nft_warning', { name: <b>{nftName}</b> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeUnhideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleUnhide} className={modalStyles.button}>\n          {lang('Unhide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    isUnhideNftModalOpen,\n    selectedNftToUnhide,\n  } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    isOpen: isUnhideNftModalOpen,\n    nftAddress: selectedNftToUnhide?.address,\n    nftName: selectedNftToUnhide?.name,\n  };\n})(UnhideNftModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\n\nimport styles from './Notification.module.scss';\n\ntype OwnProps = {\n  containerId?: string;\n  message: string;\n  icon?: string;\n  onDismiss: () => void;\n};\n\nconst DURATION_MS = 5000;\nconst ANIMATION_DURATION = 250;\n\nconst Notification: FC<OwnProps> = ({\n  icon, message, containerId, onDismiss,\n}) => {\n  const [isOpen, setIsOpen] = useState(true);\n  const timerRef = useRef<number | undefined>();\n\n  const { ref } = useShowTransition({ isOpen });\n\n  const closeAndDismiss = useLastCallback(() => {\n    setIsOpen(false);\n    setTimeout(onDismiss, ANIMATION_DURATION);\n  });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(closeAndDismiss) : undefined), [isOpen, closeAndDismiss]);\n\n  useEffect(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n        timerRef.current = undefined;\n      }\n    };\n  }, [closeAndDismiss]);\n\n  const handleMouseEnter = useLastCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = undefined;\n    }\n  });\n\n  const handleMouseLeave = useLastCallback(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n  });\n\n  return (\n    <Portal\n      className={buildClassName(styles.container, IS_ELECTRON && styles.container_electron)}\n      containerId={containerId}\n    >\n      <div\n        ref={ref}\n        className={styles.notification}\n        onClick={closeAndDismiss}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <div className={styles.content}>\n          {icon && <i className={buildClassName(styles.icon, icon)} aria-hidden />}\n          {message}\n        </div>\n      </div>\n    </Portal>\n  );\n};\n\nexport default Notification;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"h7PLFJQu\",\"container_electron\":\"I0vM5N9Z\",\"containerElectron\":\"I0vM5N9Z\",\"notification\":\"cBuXIi04\",\"content\":\"FOpmIM3s\",\"icon\":\"yRP0zVnL\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { NotificationType } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\n\nimport Notification from '../ui/Notification';\n\ntype StateProps = {\n  notifications: NotificationType[];\n};\n\nfunction Notifications({ notifications }: StateProps) {\n  const { dismissNotification } = getActions();\n\n  if (!notifications.length) {\n    return undefined;\n  }\n\n  return (\n    <div id=\"Notifications\">\n      {notifications.map(({ message, icon }) => (\n        <Notification\n          key={message}\n          icon={icon}\n          message={message}\n\n          onDismiss={dismissNotification}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['notifications']),\n)(Notifications));\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\n\nlet bottomBarHideCounter = 0;\nconst bottomBarListeners = createCallbackManager();\n\nexport function getIsBottomBarHidden() {\n  return bottomBarHideCounter > 0;\n}\n\nexport function subscribeToBottomBarVisibility(callback: () => void) {\n  return bottomBarListeners.addCallback(callback);\n}\n\nfunction notifyBottomBarListeners() {\n  bottomBarListeners.runCallbacks();\n}\n\nfunction hideBottomBar() {\n  const wasHidden = getIsBottomBarHidden();\n  bottomBarHideCounter += 1;\n\n  if (!wasHidden && getIsBottomBarHidden()) {\n    notifyBottomBarListeners();\n  }\n}\n\nfunction showBottomBar() {\n  const wasHidden = getIsBottomBarHidden();\n  bottomBarHideCounter = Math.max(0, bottomBarHideCounter - 1);\n\n  if (wasHidden && !getIsBottomBarHidden()) {\n    notifyBottomBarListeners();\n  }\n}\n\n// Use this hook when you need to temporarily hide the bottom bar on a screen, for example,\n// when assumes the use of the entire screen height - `PasswordForm` with biometrics\nexport default function useHideBottomBar(isHidden: boolean) {\n  useEffect(() => {\n    if (!isHidden) return undefined;\n\n    hideBottomBar();\n\n    return showBottomBar;\n  }, [isHidden]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"QlVPgZym\",\"hidden\":\"YMl6tuqD\",\"button\":\"A4iuMrwm\",\"active\":\"lTI19L4Y\",\"icon\":\"Q6nK70OA\",\"label\":\"Hzc2OPCD\"};","import React, { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { ContentTab } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport { getIsBottomBarHidden, subscribeToBottomBarVisibility } from '../../../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\n\nimport Button from '../../../ui/Button';\n\nimport styles from './BottomBar.module.scss';\n\ninterface StateProps {\n  areSettingsOpen?: boolean;\n  areAssetsActive?: boolean;\n  isExploreOpen?: boolean;\n}\n\nfunction BottomBar({ areSettingsOpen, areAssetsActive, isExploreOpen }: StateProps) {\n  const { switchToWallet, switchToExplore, switchToSettings } = getActions();\n\n  const lang = useLang();\n  const [isHidden, setIsHidden] = useState(getIsBottomBarHidden());\n  const isWalletTabActive = !isExploreOpen && !areSettingsOpen;\n\n  useEffectOnce(() => {\n    return subscribeToBottomBarVisibility(() => {\n      setIsHidden(getIsBottomBarHidden());\n    });\n  });\n\n  useHistoryBack({\n    isActive: isExploreOpen,\n    onBack: switchToWallet,\n  });\n\n  return (\n    <div className={buildClassName(styles.root, isHidden && styles.hidden)}>\n      <Button\n        isSimple\n        className={buildClassName(styles.button, isWalletTabActive && styles.active)}\n        onClick={switchToWallet}\n      >\n        <i className={buildClassName(styles.icon, 'icon-wallet')} />\n        <span className={styles.label}>{lang('Wallet')}</span>\n      </Button>\n      {!IS_CORE_WALLET && (\n        <Button\n          isSimple\n          className={buildClassName(styles.button, isExploreOpen && styles.active)}\n          onClick={switchToExplore}\n        >\n          <i className={buildClassName(styles.icon, 'icon-explore')} />\n          <span className={styles.label}>{lang('Explore')}</span>\n        </Button>\n      )}\n      <Button\n        isSimple\n        className={buildClassName(styles.button, areSettingsOpen && styles.active)}\n        onClick={switchToSettings}\n      >\n        <i className={buildClassName(styles.icon, 'icon-settings')} />\n        <span className={styles.label}>{lang('Settings')}</span>\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { areSettingsOpen, isExploreOpen } = global;\n  const { activeContentTab } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    areSettingsOpen,\n    areAssetsActive: activeContentTab === ContentTab.Assets,\n    isExploreOpen,\n  };\n})(BottomBar));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"A0PipQQQ\",\"header\":\"Gbi50r5P\",\"headerTransition\":\"lDJDJyJx\",\"actions\":\"U5k3MGwt\",\"actionButton\":\"iX71Jk4y\",\"actionIcon\":\"TYO_mnqL\",\"menuButton\":\"g5Mpmfqz\",\"menuButton_active\":\"Jb3ZSQ8D\",\"menuButtonActive\":\"Jb3ZSQ8D\",\"menuItem\":\"nZ_OU1oY\",\"slides\":\"X2XelzZ1\",\"slide\":\"piyY_yBE\",\"slide_active\":\"sCCso48U\",\"slideActive\":\"sCCso48U\",\"slide_moving\":\"NMBicc6s\",\"slideMoving\":\"NMBicc6s\",\"content\":\"BjD2X1I7\",\"image\":\"BA7uSk12\",\"contentDescription\":\"XeanWEkZ\",\"contentTextWrapper\":\"fJxRvPrW\",\"contentText\":\"gAnXMdfd\",\"navigation\":\"mO73YmbZ\",\"portraitContainer\":\"PDCSQygm\",\"navigation_prev\":\"Mx1XT28C\",\"navigationPrev\":\"Mx1XT28C\",\"navigation_next\":\"FmNwnO3_\",\"navigationNext\":\"FmNwnO3_\",\"mediaInfo\":\"lzTnItyh\",\"mediaInfoTitle\":\"Iork7lBy\",\"mediaInfoDescription\":\"gVhA_SZL\",\"descriptionText\":\"VjBacQN8\",\"tooltip\":\"j_sdE8In\",\"ghost\":\"FjT6eSrl\",\"ghost_roundedOpening\":\"GUrvismB\",\"ghostRoundedOpening\":\"GUrvismB\",\"ghost_roundedClosing\":\"oGeErVyy\",\"ghostRoundedClosing\":\"oGeErVyy\",\"ghostImage\":\"oaQkWH7i\",\"scamImage\":\"HAC1deVa\"};","import { MediaType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY, MOBILE_SCREEN_MAX_WIDTH } from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { applyStyles } from '../../../util/animation';\nimport { stopEvent } from '../../../util/domEvents';\nimport { isElementInViewport } from '../../../util/isElementInViewport';\nimport { REM } from '../../../util/windowEnvironment';\nimport windowSize from '../../../util/windowSize';\n\nimport styles from '../MediaViewer.module.scss';\n\nexport const ANIMATION_DURATION = 200;\n\n// Header height + bottom padding, keep in sync with styles.image max-height\nconst OCCUPIED_HEIGHT = 14 * REM;\n\nexport function animateOpening(\n  type: MediaType, mediaId: string, mediaUrl?: string, txId?: string, hiddenNfts?: 'user' | 'scam',\n) {\n  const { image: fromImage } = getNode(type, mediaId, txId, hiddenNfts);\n  if (!fromImage || !mediaUrl) {\n    return;\n  }\n\n  requestMutation(async () => {\n    document.body.classList.add('ghost-animating');\n\n    const { width: windowWidth, height: windowHeight } = windowSize.get();\n    const { width: mediaWidth, height: mediaHeight } = await getImageDimension(mediaUrl);\n\n    const availableHeight = windowHeight - OCCUPIED_HEIGHT;\n    const offsetTop = (windowWidth <= MOBILE_SCREEN_MAX_WIDTH ? 8 : 7) * REM;\n\n    const { width: toWidth, height: toHeight } = calculateDimensions(\n      windowWidth,\n      availableHeight,\n      mediaWidth,\n      mediaHeight,\n    );\n\n    const toLeft = (windowWidth - toWidth) / 2;\n    const toTop = offsetTop + (availableHeight - toHeight) / 2;\n\n    const {\n      top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n    } = fromImage.getBoundingClientRect();\n\n    const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n    const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n    const fromScaleX = fromWidth / toWidth;\n    const fromScaleY = fromHeight / toHeight;\n\n    requestMutation(() => {\n      const ghost = createGhost(fromImage);\n      applyShape(ghost, type, true);\n      applyStyles(ghost, {\n        top: `${toTop}px`,\n        left: `${toLeft}px`,\n        width: `${toWidth}px`,\n        height: `${toHeight}px`,\n        transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n      });\n\n      document.body.appendChild(ghost);\n\n      requestMutation(() => {\n        ghost.style.transform = '';\n        clearShape(ghost, type, true);\n\n        setTimeout(() => {\n          requestMutation(() => {\n            if (document.body.contains(ghost)) {\n              document.body.removeChild(ghost);\n            }\n            document.body.classList.remove('ghost-animating');\n          });\n        }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n      });\n    });\n  });\n}\n\nexport function animateClosing(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  const { container, image: toImage } = getNode(type, mediaId, txId, hiddenNfts);\n  const fromImage = document.querySelector<HTMLImageElement>(\n    `.${styles.slide_active} img, .${styles.slide_active} canvas`,\n  );\n  if (!fromImage || !toImage) {\n    return;\n  }\n\n  const {\n    top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n  } = fromImage.getBoundingClientRect();\n  const {\n    top: targetTop, left: toLeft, width: toWidth, height: toHeight,\n  } = toImage.getBoundingClientRect();\n\n  let toTop = targetTop;\n  if (!isElementInViewport(toImage)) {\n    const { height: windowHeight } = windowSize.get();\n    toTop = targetTop < fromTop ? -toHeight : windowHeight;\n  }\n\n  const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n  const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n  const fromScaleX = fromWidth / toWidth;\n  const fromScaleY = fromHeight / toHeight;\n\n  const existingGhost = document.querySelector<HTMLDivElement>(`.${styles.ghost}`);\n  const ghost = existingGhost || createGhost(fromImage);\n\n  let ghostStyles: Record<string, string>;\n  if (existingGhost) {\n    const {\n      top, left, width, height,\n    } = existingGhost.getBoundingClientRect();\n    const scaleX = width / toWidth;\n    const scaleY = height / toHeight;\n\n    ghostStyles = {\n      transition: 'none',\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      transformOrigin: 'top left',\n      transform: `translate3d(${left - toLeft}px, ${top - toTop}px, 0) scale(${scaleX}, ${scaleY})`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n    };\n  } else {\n    ghostStyles = {\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n      transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n    };\n  }\n\n  requestMutation(() => {\n    applyShape(ghost, type);\n    applyStyles(ghost, ghostStyles);\n    if (!existingGhost) document.body.appendChild(ghost);\n    document.body.classList.add('ghost-animating');\n    if (container) {\n      container.classList.add('ghost-target');\n    }\n\n    requestMutation(() => {\n      if (existingGhost) {\n        existingGhost.style.transition = '';\n      }\n\n      ghost.style.transform = '';\n\n      setTimeout(() => {\n        requestMutation(() => {\n          if (document.body.contains(ghost)) {\n            document.body.removeChild(ghost);\n          }\n          document.body.classList.remove('ghost-animating');\n          if (container) {\n            container.classList.remove('ghost-target');\n          }\n        });\n      }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n    });\n  });\n}\n\nfunction getNode(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  let image: HTMLImageElement | HTMLCanvasElement | undefined;\n  let container: HTMLElement | undefined;\n  if (type === MediaType.Nft) {\n    container = document.querySelector(\n      txId\n        ? `.transaction-nft[data-tx-id=\"${txId}\"][data-nft-address=\"${mediaId}\"]`\n        : hiddenNfts\n          ? `.hidden-nfts-${hiddenNfts} [data-nft-address=\"${mediaId}\"]`\n          : `.nft-container[data-nft-address=\"${mediaId}\"]`,\n    ) as HTMLElement;\n    image = container?.querySelector('img, canvas') as HTMLImageElement | HTMLCanvasElement;\n  }\n  return { container, image };\n}\n\nfunction createGhost(source: HTMLImageElement | HTMLCanvasElement) {\n  const ghost = document.createElement('div');\n  ghost.classList.add(styles.ghost);\n\n  const img = new Image();\n  img.classList.add(styles.ghostImage);\n  img.draggable = false;\n  img.oncontextmenu = stopEvent;\n  img.src = source instanceof HTMLImageElement\n    ? source.src\n    : source.parentElement?.parentElement?.dataset.previewUrl || '';\n\n  ghost.appendChild(img);\n\n  return ghost;\n}\n\nfunction calculateDimensions(\n  availableWidth: number,\n  availableHeight: number,\n  mediaWidth: number,\n  mediaHeight: number,\n) {\n  const aspectRatio = mediaHeight / mediaWidth;\n  const calculatedWidth = Math.min(mediaWidth, availableWidth);\n  const calculatedHeight = Math.round(calculatedWidth * aspectRatio);\n\n  if (calculatedHeight > availableHeight) {\n    return {\n      width: Math.round(availableHeight / aspectRatio),\n      height: availableHeight,\n    };\n  }\n\n  return {\n    width: calculatedWidth,\n    height: Math.round(calculatedWidth * aspectRatio),\n  };\n}\n\nfunction applyShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.add(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nfunction clearShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.remove(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nasync function getImageDimension(url: string) {\n  const img = new Image();\n  img.src = url;\n  await new Promise((resolve) => {\n    img.onload = resolve;\n  });\n  return { width: img.width, height: img.height };\n}\n","import type { RefObject } from 'react';\nimport type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, { useRef } from '../../lib/teact/teact';\n\nimport usePrevious from '../../hooks/usePrevious';\nimport useShowTransition from '../../hooks/useShowTransition';\n\ntype OwnProps = {\n  isOpen: boolean;\n  isCustom?: boolean;\n  isHidden?: boolean;\n  id?: string;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n  noCloseTransition?: boolean;\n  shouldAnimateFirstRender?: boolean;\n  style?: string;\n  children: TeactNode;\n  ref?: RefObject<HTMLDivElement>;\n};\n\nconst ShowTransition: FC<OwnProps> = ({\n  isOpen,\n  isHidden,\n  isCustom,\n  id,\n  className,\n  onClick,\n  children,\n  noCloseTransition,\n  shouldAnimateFirstRender,\n  style,\n  ref: externalRef,\n}) => {\n  const prevIsOpen = usePrevious(isOpen);\n  const prevChildren = usePrevious(children);\n  const fromChildrenRef = useRef<TeactNode>();\n  const isFirstRender = prevIsOpen === undefined;\n\n  const { ref, shouldRender } = useShowTransition({\n    isOpen: isOpen && !isHidden,\n    ref: externalRef,\n    noMountTransition: isFirstRender && !shouldAnimateFirstRender,\n    className: isCustom ? false : undefined,\n    noCloseTransition,\n    withShouldRender: true,\n  });\n\n  if (prevIsOpen && !isOpen) {\n    fromChildrenRef.current = prevChildren;\n  }\n\n  return (\n    (shouldRender || isHidden) && (\n      <div\n        id={id}\n        ref={ref}\n        className={className}\n        onClick={onClick}\n        style={style}\n      >\n        {isOpen ? children : fromChildrenRef.current!}\n      </div>\n    )\n  );\n};\n\nexport default ShowTransition;\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { NftMenuHandler } from './hooks/useNftMenu';\nimport { MediaType } from '../../global/types';\n\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectTonDnsLinkedAddress,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { getCountDaysToDate } from '../../util/dateFormat';\nimport { getTonDnsExpirationDate } from '../../util/dns';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePrevDuringAnimationSimple } from '../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from './hooks/useNftMenu';\n\nimport DropdownMenu from '../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../ui/Menu';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n  mediaId?: string;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  nft?: ApiNft;\n  tonDnsExpiration?: number;\n  linkedAddress?: string;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  isViewMode: boolean;\n};\n\nconst SHOULD_CLOSE_VIEWER_HANDLERS: NftMenuHandler[] = [\n  'send',\n  'renew',\n  'burn',\n  'collection',\n  'select',\n  'linkDomain',\n];\n\nfunction Actions({\n  nft,\n  tonDnsExpiration,\n  linkedAddress,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  cardBackgroundNft,\n  accentColorNft,\n  isViewMode,\n  onClose,\n}: StateProps & OwnProps) {\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n\n  const dnsExpireInDays = tonDnsExpiration ? getCountDaysToDate(tonDnsExpiration) : undefined;\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft!.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft!.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft,\n    isViewMode,\n    dnsExpireInDays,\n    linkedAddress,\n    isNftBlacklisted,\n    isNftWhitelisted,\n    isNftInstalled,\n    isNftAccentColorInstalled,\n  });\n\n  const handleSelect = useLastCallback((value: NftMenuHandler) => {\n    if (SHOULD_CLOSE_VIEWER_HANDLERS.includes(value)) {\n      onClose();\n    }\n\n    handleMenuItemSelect(value);\n  });\n\n  return (\n    <div className={styles.actions}>\n      <button\n        type=\"button\"\n        aria-label={lang('More actions')}\n        className={buildClassName(styles.actionButton, styles.menuButton, isMenuOpen && styles.menuButton_active)}\n        onClick={openMenu}\n      >\n        <i className=\"icon icon-more\" aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        items={menuItems}\n        menuPositionY=\"top\"\n        menuPositionX=\"right\"\n        shouldTranslateOptions\n        onClose={closeMenu}\n        className=\"component-theme-dark\"\n        buttonClassName={styles.menuItem}\n        onSelect={handleSelect}\n      />\n\n      <button\n        type=\"button\"\n        aria-label={lang('Close')}\n        className={styles.actionButton}\n        onClick={onClose}\n      >\n        <i className={buildClassName('icon-windows-close', styles.actionIcon)} aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n  const isViewMode = selectIsCurrentAccountViewMode(global);\n\n  if (!mediaId || mediaType !== MediaType.Nft) return { isViewMode };\n\n  const { byAddress, dnsExpiration } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return { isViewMode };\n\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n  const tonDnsExpiration = getTonDnsExpirationDate(nft, dnsExpiration);\n  const linkedAddress = selectTonDnsLinkedAddress(global, nft);\n\n  return {\n    nft,\n    tonDnsExpiration,\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    cardBackgroundNft,\n    accentColorNft,\n    isViewMode,\n    linkedAddress,\n  };\n})(Actions));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { GETGEMS_BASE_MAINNET_URL, GETGEMS_BASE_TESTNET_URL } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { handleUrlClick } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n\n  mediaId?: string;\n};\n\ntype StateProps = {\n  title?: string;\n  description?: string;\n  descriptionUrl?: string;\n};\n\nfunction MediaInfo({ title, description, descriptionUrl }: OwnProps & StateProps) {\n  const lang = useLang();\n\n  return (\n    <div className={styles.mediaInfo}>\n      <span className={styles.mediaInfoTitle}>{title}</span>\n      <a\n        href={descriptionUrl}\n        target=\"_blank\"\n        aria-label={lang('Open NFT Collection')}\n        className={styles.mediaInfoDescription}\n        rel=\"noreferrer\"\n        onClick={handleUrlClick}\n      >\n        <span className={styles.descriptionText}>{description}</span>\n        <i className={buildClassName('icon-tooltip', styles.tooltip)} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (!mediaId || mediaType !== MediaType.Nft) return {};\n\n  const isTestnet = global.settings.isTestnet;\n\n  const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  return {\n    title: nft.name || shortenAddress(nft.address, 4),\n    description: nft.collectionName,\n    descriptionUrl: `${getgemsBaseUrl}collection/${nft.collectionAddress}`,\n  };\n})(MediaInfo));\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useEffectOnce from './useEffectOnce';\n\n// Allows to use signal value as \"silent\" dependency in hooks (not causing updates)\nexport function useSignalRef<T>(getValue: Signal<T>) {\n  const ref = useRef<T>(getValue());\n\n  useEffectOnce(() => {\n    return getValue.subscribe(() => {\n      ref.current = getValue();\n    });\n  });\n\n  return ref;\n}\n","import { useEffect } from '../../../lib/teact/teact';\n\nimport { createSignal } from '../../../util/signals';\n\nconst [getZoomChange, setZoomChange] = createSignal(1);\n\nexport default function useZoomChange() {\n  useEffect(() => {\n    return () => {\n      setZoomChange(1);\n    };\n  }, []);\n\n  return [getZoomChange, setZoomChange] as const;\n}\n","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './MediaViewer.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n\n  mediaId: string;\n}\n\ninterface StateProps {\n  alt?: string;\n  thumbnail?: string;\n  image?: string;\n  lottie?: string;\n  description?: string;\n  isScam?: boolean;\n  whitelistedMediaIds?: string[];\n}\n\nconst ANIMATED_ICON_SIZE = 250; // Preview size (500px) / 2\n\nfunction Media({\n  mediaId, alt, thumbnail, image, lottie, description, isScam, whitelistedMediaIds,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const src = image || thumbnail;\n  const ref = useRef<HTMLDivElement>();\n  const { isPortrait } = useDeviceScreen();\n\n  useEffect(() => {\n    const element = ref.current!;\n    const { height } = element.getBoundingClientRect();\n    requestMutation(() => {\n      // Inner scroll requires max-height to be set\n      element.style.setProperty('--max-height', `${height}px`);\n    });\n  }, [isPortrait]);\n\n  const isNftWhiteListed = useMemo(() => {\n    return whitelistedMediaIds?.includes(mediaId);\n  }, [mediaId, whitelistedMediaIds]);\n\n  return (\n    <div className={styles.content}>\n      {lottie ? (\n        <AnimatedIconWithPreview\n          size={ANIMATED_ICON_SIZE}\n          shouldStretch\n          play\n          noLoop={false}\n          tgsUrl={lottie}\n          previewUrl={src}\n          className={styles.image}\n          noPreviewTransition\n        />\n      ) : (\n        <img src={src} alt={alt} className={styles.image} />\n      )}\n      <div className={buildClassName(styles.contentDescription, 'custom-scroll')} ref={ref}>\n        {description && (\n          <div className={styles.contentTextWrapper}>\n            <div className={buildClassName(styles.contentText, 'custom-scroll')} dir=\"auto\">\n              {isScam && !isNftWhiteListed && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n              {description}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (mediaType !== MediaType.Nft) return {};\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  const { whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n\n  return {\n    alt: nft.name,\n    thumbnail: nft.thumbnail,\n    image: nft.image,\n    lottie: nft.metadata?.lottie,\n    description: nft.description,\n    isScam: nft.isScam,\n    whitelistedMediaIds: whitelistedNftAddresses,\n  };\n})(Media));\n","import React, {\n  memo, useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { RealTouchEvent } from '../../util/captureEvents';\n\nimport { animateNumber, timingFunctions } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport {\n  captureEvents,\n  IOS_SCREEN_EDGE_THRESHOLD,\n  SWIPE_DIRECTION_THRESHOLD,\n  SWIPE_DIRECTION_TOLERANCE,\n} from '../../util/captureEvents';\nimport { clamp, isBetween, round } from '../../util/math';\nimport { debounce } from '../../util/schedulers';\nimport { IS_IOS, IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useDerivedState from '../../hooks/useDerivedState';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSignal from '../../hooks/useSignal';\nimport { useSignalRef } from '../../hooks/useSignalRef';\nimport useWindowSize from '../../hooks/useWindowSize';\nimport useZoomChange from './hooks/useZoomChangeSignal';\n\nimport Media from './Media';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  mediaId?: string;\n  getMediaId: (fromId?: string, direction?: number) => string | undefined;\n  selectMedia: (id: string) => void;\n  withAnimation: boolean;\n  onClose: () => void;\n}\n\ntype Transform = {\n  x: number;\n  y: number;\n  scale: number;\n};\n\nenum SwipeDirection {\n  Horizontal,\n  Vertical,\n}\n\nconst SWIPE_X_THRESHOLD = 50; // px\nconst SWIPE_Y_THRESHOLD = 50; // px\nconst SLIDES_GAP = IS_TOUCH_ENV ? 40 : 0; // px\nconst ANIMATION_DURATION = 350; // ms\nconst DEBOUNCE_SELECT_MEDIA = 350; // ms\nconst DEBOUNCE_SWIPE = 500; // ms\nconst DOUBLE_TAP_ZOOM = 3;\nconst CLICK_Y_THRESHOLD = 80; // px\nconst MAX_ZOOM = 4;\nconst MIN_ZOOM = 1;\n\nconst { easeOutCubic, easeOutQuart } = timingFunctions;\n\nlet cancelAnimation: ReturnType<typeof animateNumber> | undefined;\nlet cancelZoomAnimation: ReturnType<typeof animateNumber> | undefined;\n\nfunction Slides({\n  isOpen, mediaId, selectMedia, getMediaId, withAnimation, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const activeSlideRef = useRef<HTMLDivElement>();\n  const leftSlideRef = useRef<HTMLDivElement>();\n  const rightSlideRef = useRef<HTMLDivElement>();\n  const lastTransformRef = useRef<Transform>({ x: 0, y: 0, scale: 1 });\n  const swipeDirectionRef = useRef<SwipeDirection | undefined>(undefined);\n  const initialContentRectRef = useRef<DOMRect | undefined>(undefined);\n  const isReleasedRef = useRef(false);\n  const [getZoomChange] = useZoomChange();\n  const prevZoomChangeRef = useRef(getZoomChange());\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [getTransform, setTransform] = useSignal<Transform>({ x: 0, y: 0, scale: 1 });\n  const transformRef = useSignalRef(getTransform);\n  const [getActiveMediaId, setActiveMediaId] = useSignal<string | undefined>(mediaId);\n  const activeMediaIdRef = useSignalRef(getActiveMediaId);\n  const isScaled = useDerivedState(() => getTransform().scale !== 1, [getTransform]);\n  const activeMediaId = useDerivedState(getActiveMediaId);\n  const { height: windowHeight, width: windowWidth, isResizing } = useWindowSize();\n\n  useHistoryBack({\n    isActive: isOpen,\n    onBack: onClose,\n    shouldBeReplaced: true,\n  });\n\n  const selectMediaDebounced = useDebouncedCallback(selectMedia, [selectMedia], DEBOUNCE_SELECT_MEDIA, true);\n  const clearSwipeDirectionDebounced = useDebouncedCallback(() => {\n    swipeDirectionRef.current = undefined;\n  }, [], DEBOUNCE_SWIPE, true);\n\n  const clickXThreshold = IS_TOUCH_ENV ? 40 : windowWidth / 10;\n\n  useEffect(() => {\n    const { scale, x, y } = transformRef.current;\n    // Only update active media if slide is in default position\n    if (x === 0 && y === 0 && scale === 1) {\n      setActiveMediaId(mediaId);\n    }\n  }, [mediaId, setActiveMediaId, transformRef]);\n\n  useLayoutEffect(() => {\n    const { x, y, scale } = getTransform();\n    if (leftSlideRef.current) {\n      leftSlideRef.current.style.transform = getTransformStyle(-windowWidth + x - SLIDES_GAP);\n    }\n    if (activeSlideRef.current) {\n      activeSlideRef.current.style.transform = getTransformStyle(x, y, scale);\n    }\n    if (rightSlideRef.current) {\n      rightSlideRef.current.style.transform = getTransformStyle(windowWidth + x + SLIDES_GAP);\n    }\n  }, [getTransform, windowWidth]);\n\n  const changeSlide = useLastCallback((direction: number, dryRun = false) => {\n    let lastTransform = lastTransformRef.current;\n    const mId = getMediaId(activeMediaIdRef.current, direction);\n    if (dryRun) return mId !== undefined;\n    if (mId === undefined) return false;\n    const offset = (windowWidth + SLIDES_GAP) * direction;\n    const transform = transformRef.current;\n    const x = transform.x + offset;\n    setActiveMediaId(mId);\n    selectMediaDebounced(mId);\n    lastTransform = { x: 0, y: 0, scale: 1 };\n    if (!withAnimation) {\n      setTransform(lastTransform);\n      return true;\n    }\n    cancelAnimation = animateNumber({\n      from: x,\n      to: 0,\n      duration: ANIMATION_DURATION,\n      timing: easeOutCubic,\n      onUpdate: (value) => setTransform({\n        y: 0,\n        x: value,\n        scale: 1,\n      }),\n    });\n    return true;\n  });\n\n  const handleNextSlide = useLastCallback(() => changeSlide(1));\n  const handlePrevSlide = useLastCallback(() => changeSlide(-1));\n\n  useEffect(() => {\n    if (!containerRef.current || activeMediaIdRef.current === undefined) {\n      return undefined;\n    }\n    let lastTransform = lastTransformRef.current;\n    const lastDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    const lastZoomCenter = {\n      x: 0,\n      y: 0,\n    };\n    const panDelta = {\n      x: 0,\n      y: 0,\n    };\n    let lastGestureTime = Date.now();\n    let content: HTMLElement | null;\n    const setLastGestureTime = debounce(() => {\n      lastGestureTime = Date.now();\n    }, 500, false, true);\n\n    const changeSlideOnClick = (e: MouseEvent): [boolean, boolean] => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return [false, false];\n      let direction = 0;\n      if (windowHeight - e.pageY < CLICK_Y_THRESHOLD) {\n        return [false, false];\n      }\n      if (e.pageX < clickXThreshold) {\n        direction = -1;\n      } else if (e.pageX > windowWidth - clickXThreshold) {\n        direction = 1;\n      }\n      const hasNextSlide = changeSlide(direction, !IS_TOUCH_ENV);\n      const isInThreshold = direction !== 0;\n      return [isInThreshold, hasNextSlide];\n    };\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return;\n      switch (e.key) {\n        case 'Left': // IE/Edge specific value\n        case 'ArrowLeft':\n          changeSlide(-1);\n          break;\n\n        case 'Right': // IE/Edge specific value\n        case 'ArrowRight':\n          changeSlide(1);\n          break;\n      }\n    };\n\n    const calculateOffsetBoundaries = (\n      { x, y, scale }: Transform,\n      offsetTop = 0,\n    ): [Transform, boolean, boolean] => {\n      const initialContentRect = initialContentRectRef.current;\n      if (!initialContentRect) return [{ x, y, scale }, true, true];\n      // Get current content boundaries\n      let inBoundsX = true;\n      let inBoundsY = true;\n\n      const centerX = (windowWidth - windowWidth * scale) / 2;\n      const centerY = (windowHeight - windowHeight * scale) / 2;\n\n      // If content is outside window we calculate offset boundaries\n      // based on initial content rect and current scale\n      const minOffsetX = Math.max(-initialContentRect.left * scale, centerX);\n      const maxOffsetX = windowWidth - initialContentRect.right * scale;\n      inBoundsX = isBetween(x, maxOffsetX, minOffsetX);\n      x = clamp(x, maxOffsetX, minOffsetX);\n\n      const minOffsetY = Math.max(-initialContentRect.top * scale + offsetTop, centerY);\n      const maxOffsetY = windowHeight - initialContentRect.bottom * scale;\n      inBoundsY = isBetween(y, maxOffsetY, minOffsetY);\n      y = clamp(y, maxOffsetY, minOffsetY);\n\n      return [{ x, y, scale }, inBoundsX, inBoundsY];\n    };\n\n    const onRelease = (e: MouseEvent | RealTouchEvent | WheelEvent) => {\n      // This allows to prevent onRelease triggered by debounced wheel event\n      // after onRelease was triggered manually in onDrag\n      if (isReleasedRef.current) {\n        isReleasedRef.current = false;\n        return;\n      }\n      if (e.type === 'mouseup') {\n        setIsMouseDown(false);\n      }\n      const transform = transformRef.current;\n      const { y, scale } = transform;\n      let x = transform.x;\n      const absX = Math.abs(x);\n      const absY = Math.abs(y);\n\n      clearSwipeDirectionDebounced();\n\n      // If scale is less than 1 we need to bounce back\n      if (scale < 1) {\n        lastTransform = { x: 0, y: 0, scale: 1 };\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [0, 0, 1],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      if (scale > 1) {\n        // Get current content boundaries\n        const s1 = Math.min(scale, MAX_ZOOM);\n        const scaleFactor = s1 / scale;\n\n        // Calculate new position based on the last zoom center to keep the zoom center\n        // at the same position when bouncing back from max zoom\n        let x1 = x * scaleFactor + (lastZoomCenter.x - scaleFactor * lastZoomCenter.x);\n        let y1 = y * scaleFactor + (lastZoomCenter.y - scaleFactor * lastZoomCenter.y);\n\n        // Arbitrary pan velocity coefficient\n        const k = 0.15;\n\n        // If scale didn't change, we need to add inertia to pan gesture\n        if (e.type !== 'wheel' && lastTransform.scale === scale) {\n          // Calculate user gesture velocity\n          const Vx = Math.abs(lastDragOffset.x) / (Date.now() - lastGestureTime);\n          const Vy = Math.abs(lastDragOffset.y) / (Date.now() - lastGestureTime);\n\n          // Add extra distance based on gesture velocity and last pan delta\n          x1 -= Math.abs(lastDragOffset.x) * Vx * k * panDelta.x;\n          y1 -= Math.abs(lastDragOffset.y) * Vy * k * panDelta.y;\n        }\n\n        [lastTransform] = calculateOffsetBoundaries({ x: x1, y: y1, scale: s1 });\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      lastTransform = {\n        x,\n        y,\n        scale,\n      };\n      if (absY >= SWIPE_Y_THRESHOLD) {\n        onClose();\n        return;\n      }\n      // Bounce back if vertical swipe is below threshold\n      if (absY > 0) {\n        cancelAnimation = animateNumber({\n          from: y,\n          to: 0,\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: 0,\n            y: value,\n            scale,\n          }),\n        });\n        return;\n      }\n      // Get horizontal swipe direction\n      const direction = x < 0 ? 1 : -1;\n      const mId = getMediaId(activeMediaIdRef.current, x < 0 ? 1 : -1);\n      // Get the direction of the last pan gesture.\n      // Could be different from the total horizontal swipe direction\n      // if user starts a swipe in one direction and then changes the direction\n      // we need to cancel slide transition\n      const dirX = panDelta.x < 0 ? -1 : 1;\n      if (mId !== undefined && absX >= SWIPE_X_THRESHOLD && direction === dirX) {\n        const offset = (windowWidth + SLIDES_GAP) * direction;\n        // If image is shifted by more than SWIPE_X_THRESHOLD,\n        // We shift everything by one screen width and then set new active message id\n        x += offset;\n        setActiveMediaId(mId);\n        selectMediaDebounced(mId);\n      }\n      // Then we always return to the original position\n      cancelAnimation = animateNumber({\n        from: x,\n        to: 0,\n        duration: ANIMATION_DURATION,\n        timing: easeOutCubic,\n        onUpdate: (value) => setTransform({\n          y: 0,\n          x: value,\n          scale: scale ?? 1,\n        }),\n      });\n    };\n\n    const cleanup = captureEvents(containerRef.current, {\n      isNotPassive: true,\n      withNativeDrag: true,\n      excludedClosestSelector: `${styles.header}, .${styles.contentDescription}`,\n      minZoom: MIN_ZOOM,\n      maxZoom: MAX_ZOOM,\n      doubleTapZoom: DOUBLE_TAP_ZOOM,\n      withWheelDrag: true,\n      onCapture: (e) => {\n        const { x, y, scale } = transformRef.current;\n        if (e.type === 'mousedown') {\n          setIsMouseDown(true);\n          if (scale !== 1) {\n            e.preventDefault();\n            return;\n          }\n        }\n        lastGestureTime = Date.now();\n        if (x === 0 && y === 0 && scale === 1) {\n          if (!activeSlideRef.current) return;\n          content = activeSlideRef.current.querySelector('img, video');\n          if (!content) return;\n          // Store initial content rect, without transformations\n          initialContentRectRef.current = content.getBoundingClientRect();\n        }\n      },\n      onDrag: (event, captureEvent, {\n        dragOffsetX,\n        dragOffsetY,\n      }, cancelDrag) => {\n        if (isReleasedRef.current) return;\n        // Avoid conflicts with swipe-to-back gestures\n        if (IS_IOS && captureEvent.type === 'touchstart') {\n          const { pageX } = (captureEvent as RealTouchEvent).touches[0];\n          if (pageX <= IOS_SCREEN_EDGE_THRESHOLD || pageX >= windowWidth - IOS_SCREEN_EDGE_THRESHOLD) {\n            return;\n          }\n        }\n        if (cancelAnimation) {\n          cancelAnimation();\n          cancelAnimation = undefined;\n        }\n        panDelta.x = lastDragOffset.x - dragOffsetX;\n        panDelta.y = lastDragOffset.y - dragOffsetY;\n        lastDragOffset.x = dragOffsetX;\n        lastDragOffset.y = dragOffsetY;\n        const absOffsetX = Math.abs(dragOffsetX);\n        const absOffsetY = Math.abs(dragOffsetY);\n        const { x, y, scale } = transformRef.current;\n\n        // If user is inactive but is still touching the screen\n        // we reset last gesture time\n        setLastGestureTime();\n\n        // If image is scaled we just need to pan it\n        if (scale !== 1) {\n          const x1 = lastTransform.x + dragOffsetX;\n          const y1 = lastTransform.y + dragOffsetY;\n          if (['wheel', 'mousemove'].includes(event.type)) {\n            const [transform, inBoundsX, inBoundsY] = calculateOffsetBoundaries({ x: x1, y: y1, scale });\n            if (cancelDrag) cancelDrag(!inBoundsX, !inBoundsY);\n            setTransform(transform);\n            return;\n          }\n          if ('touches' in event && event.touches.length === 1) {\n            setTransform({\n              x: x1,\n              y: y1,\n              scale,\n            });\n          }\n          return;\n        }\n        if (event.type === 'mousemove') return;\n        if (swipeDirectionRef.current !== SwipeDirection.Vertical) {\n          // If user is swiping horizontally or horizontal shift is dominant\n          // we change only horizontal position\n          if (swipeDirectionRef.current === SwipeDirection.Horizontal\n            || Math.abs(x) > SWIPE_DIRECTION_THRESHOLD || absOffsetX / absOffsetY > SWIPE_DIRECTION_TOLERANCE) {\n            swipeDirectionRef.current = SwipeDirection.Horizontal;\n            const limit = windowWidth + SLIDES_GAP;\n            const x1 = clamp(dragOffsetX, -limit, limit);\n            setTransform({\n              x: x1,\n              y: 0,\n              scale,\n            });\n            // We know that at this point onRelease will trigger slide change,\n            // We can trigger onRelease directly instead of waiting for the debounced callback\n            // to avoid a delay\n            if (event.type === 'wheel' && Math.abs(x1) > SWIPE_X_THRESHOLD * 2) {\n              onRelease(event);\n              isReleasedRef.current = true;\n            }\n            return;\n          }\n        }\n        // If vertical shift is dominant we change only vertical position\n        if (swipeDirectionRef.current === SwipeDirection.Vertical\n          || Math.abs(y) > SWIPE_DIRECTION_THRESHOLD || absOffsetY / absOffsetX > SWIPE_DIRECTION_TOLERANCE) {\n          swipeDirectionRef.current = SwipeDirection.Vertical;\n          const limit = windowHeight;\n          const y1 = clamp(dragOffsetY, -limit, limit);\n          setTransform({\n            x: 0,\n            y: y1,\n            scale,\n          });\n          if (event.type === 'wheel' && Math.abs(y1) > SWIPE_Y_THRESHOLD * 2) {\n            onRelease(event);\n            isReleasedRef.current = true;\n          }\n        }\n      },\n      onZoom: (e, {\n        zoom,\n        zoomFactor,\n        initialCenterX,\n        initialCenterY,\n        dragOffsetX,\n        dragOffsetY,\n        currentCenterX,\n        currentCenterY,\n      }) => {\n        if (cancelAnimation) cancelAnimation();\n        initialCenterX = initialCenterX || windowWidth / 2;\n        initialCenterY = initialCenterY || windowHeight / 2;\n        currentCenterX = currentCenterX || windowWidth / 2;\n        currentCenterY = currentCenterY || windowHeight / 2;\n\n        // Calculate current scale based on zoom factor and limits, add zoom margin for bounce back effect\n        const scale = zoom ?? clamp(lastTransform.scale * zoomFactor!, MIN_ZOOM * 0.5, MAX_ZOOM * 3);\n        const scaleFactor = scale / lastTransform.scale;\n        const offsetX = Math.abs(Math.min(lastTransform.x, 0));\n        const offsetY = Math.abs(Math.min(lastTransform.y, 0));\n\n        // Save last zoom center for bounce back effect\n        lastZoomCenter.x = currentCenterX;\n        lastZoomCenter.y = currentCenterY;\n\n        // Calculate new center relative to the shifted image\n        const scaledCenterX = offsetX + initialCenterX;\n        const scaledCenterY = offsetY + initialCenterY;\n\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (scaledCenterX - scaleFactor * scaledCenterX);\n        const scaleOffsetY = (scaledCenterY - scaleFactor * scaledCenterY);\n\n        const [transform] = calculateOffsetBoundaries({\n          x: lastTransform.x + scaleOffsetX + dragOffsetX,\n          y: lastTransform.y + scaleOffsetY + dragOffsetY,\n          scale,\n        });\n\n        setTransform(transform);\n      },\n      onClick(e) {\n        setIsMouseDown(false);\n        const [isInThreshold, hasNextSlide] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          if (IS_TOUCH_ENV) return;\n          if (!hasNextSlide) onClose();\n          return;\n        }\n        if (lastTransform.scale !== 1 || IS_TOUCH_ENV) return;\n        onClose();\n      },\n      onDoubleClick(e, {\n        centerX,\n        centerY,\n      }) {\n        const [isInThreshold] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          return;\n        }\n        if (!IS_TOUCH_ENV && e.type !== 'wheel') return;\n        const { x, y, scale } = transformRef.current;\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (centerX - DOUBLE_TAP_ZOOM * centerX);\n        const scaleOffsetY = (centerY - DOUBLE_TAP_ZOOM * centerY);\n        if (scale === 1) {\n          if (x !== 0 || y !== 0) return;\n          lastTransform = calculateOffsetBoundaries({\n            x: scaleOffsetX,\n            y: scaleOffsetY,\n            scale: DOUBLE_TAP_ZOOM,\n          })[0];\n        } else {\n          lastTransform = {\n            x: 0,\n            y: 0,\n            scale: 1,\n          };\n        }\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => {\n            const transform = {\n              x: value[0],\n              y: value[1],\n              scale: value[2],\n            };\n            setTransform(transform);\n          },\n        });\n      },\n      onRelease,\n    });\n    document.addEventListener('keydown', handleKeyDown, false);\n    return () => {\n      cleanup();\n      document.removeEventListener('keydown', handleKeyDown, false);\n    };\n  },\n  [\n    onClose,\n    setTransform,\n    getMediaId,\n    windowWidth,\n    windowHeight,\n    clickXThreshold,\n    selectMediaDebounced,\n    clearSwipeDirectionDebounced,\n    withAnimation,\n    setIsMouseDown,\n    transformRef,\n    setActiveMediaId,\n    activeMediaIdRef,\n    changeSlide,\n  ]);\n\n  useEffect(() => {\n    const zoomChange = getZoomChange();\n    const hasZoomChanged = prevZoomChangeRef.current !== undefined\n      && prevZoomChangeRef.current !== zoomChange;\n    if (!containerRef.current || !hasZoomChanged) return;\n    prevZoomChangeRef.current = zoomChange;\n    const { scale } = transformRef.current;\n    const dir = zoomChange > 0 ? -1 : +1;\n    const minZoom = MIN_ZOOM * 0.6;\n    const maxZoom = MAX_ZOOM * 3;\n    let steps = 100;\n    let prevValue = 0;\n    if (scale <= minZoom && dir > 0) return;\n    if (scale >= maxZoom && dir < 0) return;\n    if (scale === 1 && dir > 0) steps = 20;\n    if (cancelZoomAnimation) cancelZoomAnimation();\n    cancelZoomAnimation = animateNumber({\n      from: dir,\n      to: dir * steps,\n      duration: ANIMATION_DURATION,\n      timing: easeOutQuart,\n      onUpdate: (value) => {\n        if (!containerRef.current) return;\n        const delta = round(value - prevValue, 2);\n        prevValue = value;\n        // To reuse existing logic we trigger wheel event for zoom buttons\n        const wheelEvent = new WheelEvent('wheel', {\n          deltaY: delta,\n          ctrlKey: true,\n        });\n        containerRef.current.dispatchEvent(wheelEvent);\n      },\n    });\n  }, [getZoomChange, transformRef]);\n\n  // eslint-disable-next-line no-null/no-null\n  if (activeMediaId === undefined) return null;\n\n  const nextMediaId = getMediaId(activeMediaId, 1);\n  const prevMediaId = getMediaId(activeMediaId, -1);\n  const hasPrev = prevMediaId !== undefined;\n  const hasNext = nextMediaId !== undefined;\n  const isMoving = isMouseDown && isScaled;\n\n  return (\n    <div className={styles.slides} ref={containerRef}>\n      <div className={styles.slide} ref={leftSlideRef}>\n        {hasPrev && !isScaled && !isResizing && (\n          <Media mediaId={prevMediaId} />\n        )}\n      </div>\n      <div\n        className={buildClassName(styles.slide, styles.slide_active, isMoving && styles.slide_moving)}\n        ref={activeSlideRef}\n      >\n        <Media mediaId={activeMediaId} />\n      </div>\n      <div className={styles.slide} ref={rightSlideRef}>\n        {hasNext && !isScaled && !isResizing && (\n          <Media mediaId={nextMediaId} />\n        )}\n      </div>\n      {hasPrev && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handlePrevSlide}\n          className={buildClassName(styles.navigation, styles.navigation_prev)}\n          aria-label={lang('Previous')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n      {hasNext && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handleNextSlide}\n          className={buildClassName(styles.navigation, styles.navigation_next)}\n          aria-label={lang('Next')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Slides);\n\nfunction getTransformStyle(x = 0, y = 0, scale = 1) {\n  return `translate3d(${x.toFixed(3)}px, ${y.toFixed(3)}px, 0px) scale(${scale.toFixed(3)})`;\n}\n","import React, {\n  beginHeavyAnimation,\n  memo,\n  useEffect,\n  useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport { MediaType } from '../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { animateClosing, animateOpening, ANIMATION_DURATION } from './helpers/ghostAnimation';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useToggleClass from '../../hooks/useToggleClass';\n\nimport ShowTransition from '../ui/ShowTransition';\nimport Transition from '../ui/Transition';\nimport Actions from './Actions';\nimport MediaInfo from './MediaInfo';\nimport Slides from './Slides';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface StateProps {\n  mediaId?: string;\n  txId?: string;\n  hiddenNfts?: 'user' | 'scam';\n  noGhostAnimation?: boolean;\n  mediaIds: string[];\n  mediaUrl?: string;\n  mediaType: MediaType;\n  mediaByIds?: Record<string, ApiNft>;\n  blacklistedIds: string[];\n  withAnimation: boolean;\n}\n\nfunction MediaViewer({\n  mediaId, mediaIds, mediaType, mediaUrl, withAnimation, mediaByIds, blacklistedIds, txId, hiddenNfts, noGhostAnimation,\n}: StateProps) {\n  const { closeMediaViewer, openMediaViewer } = getActions();\n\n  const isOpen = Boolean(mediaId);\n  const lang = useLang();\n  const prevMediaId = usePrevious(mediaId);\n  const prevTxId = usePrevious(txId);\n  const prevHiddenNfts = usePrevious(hiddenNfts);\n  const prevNoGhostAnimation = usePrevious(noGhostAnimation);\n  const headerAnimation = withAnimation ? 'slideFade' : 'none';\n  const shouldAnimateOpening = withAnimation && isOpen && !prevMediaId && !noGhostAnimation;\n  const shouldAnimateClosing = withAnimation && !isOpen && !!prevMediaId && !prevNoGhostAnimation;\n\n  const handleClose = useLastCallback(() => closeMediaViewer());\n\n  const renderedMediaIds = useMemo(() => {\n    return mediaIds.filter((id) => {\n      const media = mediaByIds?.[id];\n      return media && !media.isHidden && !blacklistedIds.includes(id);\n    });\n  }, [blacklistedIds, mediaByIds, mediaIds]);\n  const selectedMediaIndex = renderedMediaIds.indexOf(mediaId!);\n\n  const getMediaId = useLastCallback((fromId?: string, direction?: number): string | undefined => {\n    if (fromId === undefined) return undefined;\n    const index = renderedMediaIds.indexOf(fromId);\n    if ((direction === -1 && index > 0) || (direction === 1 && index < renderedMediaIds.length - 1)) {\n      return renderedMediaIds[index + direction];\n    }\n    return undefined;\n  });\n\n  const selectMedia = useLastCallback((id: string) => {\n    openMediaViewer({ mediaType, mediaId: id });\n  });\n\n  useToggleClass({ className: 'is-media-viewer-open', isActive: isOpen, element: document.body });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(handleClose) : undefined), [handleClose, isOpen]);\n\n  useEffect(() => {\n    if (shouldAnimateOpening) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateOpening(mediaType, mediaId, mediaUrl, txId, hiddenNfts);\n    }\n    if (shouldAnimateClosing) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateClosing(mediaType, prevMediaId, prevTxId, prevHiddenNfts);\n    }\n  }, [\n    shouldAnimateOpening,\n    shouldAnimateClosing,\n    mediaId,\n    mediaType,\n    mediaUrl,\n    prevMediaId,\n    txId,\n    prevTxId,\n    hiddenNfts,\n    prevHiddenNfts,\n  ]);\n\n  return (\n    <ShowTransition\n      className={buildClassName(styles.root, 'opacity-transition', 'slow')}\n      isOpen={isOpen}\n      shouldAnimateFirstRender\n      isCustom\n    >\n      <div className={styles.header} dir={lang.isRtl ? 'rtl' : undefined}>\n        <Transition activeKey={selectedMediaIndex} name={headerAnimation} className={styles.headerTransition}>\n          <MediaInfo mediaId={mediaId} />\n        </Transition>\n        <Actions mediaId={mediaId} onClose={handleClose} />\n      </div>\n      <Slides\n        isOpen={isOpen}\n        mediaId={mediaId}\n        getMediaId={getMediaId}\n        selectMedia={selectMedia}\n        withAnimation={withAnimation}\n        onClose={handleClose}\n      />\n    </ShowTransition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    mediaId, mediaType = MediaType.Nft, txId, hiddenNfts, noGhostAnimation,\n  } = global.mediaViewer || {};\n  const animationLevel = global.settings?.animationLevel;\n  const accountState = selectCurrentAccountState(global);\n\n  let mediaIds: string[] = MEMO_EMPTY_ARRAY;\n  let mediaUrl: string | undefined;\n  let mediaByIds: Record<string, ApiNft> | undefined;\n  let blacklistedIds: string[] = MEMO_EMPTY_ARRAY;\n\n  if (mediaType === MediaType.Nft) {\n    const { orderedAddresses, byAddress } = accountState?.nfts || {};\n    const { blacklistedNftAddresses } = accountState || {};\n    const nft = byAddress?.[mediaId!];\n    mediaUrl = (!nft?.metadata?.lottie && nft?.image) || nft?.thumbnail;\n    mediaIds = orderedAddresses || MEMO_EMPTY_ARRAY;\n    mediaByIds = byAddress;\n    if (blacklistedNftAddresses?.length) {\n      blacklistedIds = blacklistedNftAddresses;\n    }\n  }\n\n  return {\n    mediaId,\n    txId,\n    hiddenNfts,\n    noGhostAnimation,\n    mediaIds,\n    mediaType,\n    mediaUrl,\n    mediaByIds,\n    blacklistedIds,\n    withAnimation: animationLevel > 0,\n  };\n})(MediaViewer));\n","import windowSize from './windowSize';\n\nexport function isElementInViewport(el: HTMLElement) {\n  if (el.style.display === 'none') {\n    return false;\n  }\n\n  const rect = el.getBoundingClientRect();\n  const { height: windowHeight } = windowSize.get();\n\n  return (rect.top <= windowHeight) && ((rect.top + rect.height) >= 0);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TyYDeoPI\",\"standard\":\"ZzhmGZX8\",\"silver\":\"VOCPN2H2\",\"gold\":\"eIy_VriQ\",\"platinum\":\"ThB2aK4u\",\"black\":\"pSEqHC9v\",\"list\":\"VuKYnODy\",\"term\":\"De4BJ4HR\",\"icon\":\"WsbPBan7\",\"data\":\"SmGuh0xn\",\"button\":\"hn6cNzho\",\"currencyIcon\":\"uJl349yd\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiMtwCardType } from '../../api/types';\n\nimport { DEFAULT_FEE, TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal } from '../../util/decimals';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\n\nimport styles from './CardPros.module.scss';\n\ninterface OwnProps {\n  type: ApiMtwCardType;\n  price?: number;\n  balance?: bigint;\n  isAvailable?: boolean;\n}\n\nfunction CardPros({ type, price, balance, isAvailable }: OwnProps) {\n  const { startCardMinting, showDialog } = getActions();\n\n  const lang = useLang();\n  const isEnoughBalance = price && balance ? fromDecimal(price, TONCOIN.decimals) + DEFAULT_FEE < balance : false;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!isEnoughBalance) {\n      showDialog({\n        title: lang('Insufficient Balance'),\n        message: lang('Please top up your TON balance.'),\n      });\n\n      return;\n    }\n\n    startCardMinting({ type });\n  });\n\n  return (\n    <div className={buildClassName(styles.root, styles[type])}>\n      <dl className={styles.list}>\n        <dt className={styles.term}>\n          {lang('Unique')}\n          <i className={buildClassName(styles.icon, 'icon-diamond')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>\n          {lang('Get a card with unique background and personalized palette for wallet interface.')}\n        </dd>\n\n        <dt className={styles.term}>\n          {lang('Transferable')}\n          <i className={buildClassName(styles.icon, 'icon-swap')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>{lang('Easily send your upgraded card to any of your friends.')}</dd>\n\n        <dt className={styles.term}>\n          {lang('Tradable')}\n          <i className={buildClassName(styles.icon, 'icon-auction')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>{lang('Sell or auction your card on third-party NFT marketplaces.')}</dd>\n      </dl>\n\n      {!!price && (\n        <Button\n          isPrimary\n          isDisabled={!isAvailable}\n          className={styles.button}\n          onClick={handleSubmit}\n        >\n          {lang('Upgrade for %currency% %amount%', {\n            amount: price,\n            currency: <i className={buildClassName(styles.currencyIcon, 'icon-ton')} aria-label=\"TON\" />,\n          })}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(CardPros);\n","// extracted by mini-css-extract-plugin\nexport default {\"dialog\":\"CjwvIYmY\",\"transition\":\"Tv22S5Gs\",\"transitionSlide\":\"zUSYH0x7\",\"content\":\"LpuTVkiG\",\"slide\":\"ZfVQ8KGW\",\"standard\":\"k0gL3sAb\",\"black\":\"MUamKAQw\",\"slideInner\":\"k2_YXVBE\",\"video\":\"wpccVVfq\",\"cardType\":\"CzdRPvVS\",\"close\":\"IBwesrC_\",\"navigation\":\"cIoUkENQ\",\"navigationLeft\":\"GF_wLd9i\",\"navigationRight\":\"y5oAUrMg\",\"navigationIcon\":\"aSeq5lrl\",\"avaliability\":\"OGLS5EQO\",\"progress\":\"Q3dzQZod\",\"soldOut\":\"VyfNbKU1\",\"amount\":\"wozoyd4S\",\"amountInner\":\"ZgsWpsHL\",\"amountLeft\":\"XMt08mOm\",\"amountSold\":\"F8mchLc4\",\"dots\":\"HY5hRBmJ\",\"dot\":\"tOktKTIK\",\"dotActive\":\"ZMU4FK04\",\"sticker\":\"eto_LEBm\",\"resultWithTime\":\"hlrWLhQ2\",\"resultTimeIcon\":\"W1LXu50q\",\"mintCardBanner\":\"ccNpjwpK\"};","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiCardInfo, ApiCardsInfo, ApiMtwCardType } from '../../api/types';\nimport type { LangFn } from '../../hooks/useLang';\n\nimport { MTW_CARDS_MINT_BASE_URL } from '../../config';\nimport { selectCurrentToncoinBalance } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport { formatNumber } from '../../util/formatNumber';\nimport { round } from '../../util/round';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Transition from '../ui/Transition';\nimport CardPros from './CardPros';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './MintCardModal.module.scss';\n\nexport const MAP_CARD_TYPE_TO_NAME = {\n  standard: 'Standard Card',\n  silver: 'Silver Card',\n  gold: 'Gold Card',\n  platinum: 'Platinum Card',\n  black: 'Black Card',\n} as const;\n\ninterface OwnProps {\n  cardsInfo: ApiCardsInfo;\n}\n\ninterface StateProps {\n  tonBalance: bigint;\n}\n\nenum CardSlides {\n  Standard = 0,\n  Silver,\n  Gold,\n  Platinum,\n  Black,\n}\n\nconst TOTAL_SLIDES = Object.values(CardSlides).length / 2;\n\nfunction CardRoster({ cardsInfo, tonBalance }: OwnProps & StateProps) {\n  const { closeMintCardModal } = getActions();\n\n  const lang = useLang();\n\n  const transitionRef = useRef<HTMLDivElement>();\n  const [currentSlide, setCurrentSlide] = useState<CardSlides>(CardSlides.Standard);\n  const [nextKey, setNextKey] = useState<CardSlides>(CardSlides.Silver);\n\n  const showNextSlide = useLastCallback(() => {\n    setCurrentSlide((current) => (current === CardSlides.Black ? CardSlides.Standard : current + 1));\n    setNextKey((current) => (current === CardSlides.Black ? CardSlides.Standard : current + 1));\n  });\n\n  const showPrevSlide = useLastCallback(() => {\n    setCurrentSlide((current) => (current === CardSlides.Standard ? CardSlides.Black : current - 1));\n    setNextKey((current) => (current === CardSlides.Standard ? CardSlides.Black : current - 1));\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureEvents(transitionRef.current!, {\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Left) {\n          showNextSlide();\n          return true;\n        } else if (direction === SwipeDirection.Right) {\n          showPrevSlide();\n          return true;\n        }\n\n        return false;\n      },\n      selectorToPreventScroll: '.custom-scroll',\n    });\n  }, []);\n\n  function renderControls() {\n    return (\n      <>\n        <Button\n          isRound\n          className={buildClassName(styles.close, modalStyles.closeButton)}\n          ariaLabel={lang('Close')}\n          onClick={closeMintCardModal}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n        <button\n          className={buildClassName(styles.navigation, styles.navigationLeft)}\n          type=\"button\"\n          aria-label={lang('Prev')}\n          onClick={() => showPrevSlide()}\n        >\n          <i className={buildClassName(styles.navigationIcon, 'icon-chevron-left')} aria-hidden />\n        </button>\n        <button\n          className={buildClassName(styles.navigation, styles.navigationRight)}\n          type=\"button\"\n          onClick={() => showNextSlide()}\n          aria-label={lang('Next')}\n        >\n          <i className={buildClassName(styles.navigationIcon, 'icon-chevron-right')} aria-hidden />\n        </button>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: CardSlides) {\n    const defaultProps = {\n      lang,\n      tonBalance,\n      currentKey,\n    };\n\n    switch (currentKey) {\n      case CardSlides.Standard:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.standard,\n          type: 'standard',\n          cardInfo: cardsInfo?.standard,\n        });\n\n      case CardSlides.Silver:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.silver,\n          type: 'silver',\n          cardInfo: cardsInfo?.silver,\n        });\n\n      case CardSlides.Gold:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.gold,\n          type: 'gold',\n          cardInfo: cardsInfo?.gold,\n        });\n\n      case CardSlides.Platinum:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.platinum,\n          type: 'platinum',\n          cardInfo: cardsInfo?.platinum,\n        });\n\n      case CardSlides.Black:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.black,\n          type: 'black',\n          cardInfo: cardsInfo?.black,\n        });\n    }\n  }\n\n  return (\n    <>\n      {renderControls()}\n      <Transition\n        ref={transitionRef}\n        name=\"semiFade\"\n        className={buildClassName(styles.transition, 'custom-scroll')}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    tonBalance: selectCurrentToncoinBalance(global),\n  };\n})(CardRoster));\n\nfunction renderMediaCard({\n  lang,\n  title,\n  type,\n  cardInfo,\n  tonBalance,\n  currentKey,\n}: {\n  lang: LangFn;\n  title: string;\n  type: ApiMtwCardType;\n  cardInfo?: ApiCardInfo;\n  tonBalance?: bigint;\n  currentKey: number;\n}) {\n  return (\n    (\n      <div className={styles.content}>\n        <div className={buildClassName(styles.slide, styles[type])}>\n          <video\n            autoPlay\n            muted\n            loop\n            playsInline\n            poster={`${MTW_CARDS_MINT_BASE_URL}mtw_card_${type}.avif`}\n            className={styles.video}\n          >\n            <source\n              src={`${MTW_CARDS_MINT_BASE_URL}mtw_card_${type}.h264.mp4`}\n              type=\"video/mp4; codecs=avc1.4D401E,mp4a.40.2\"\n            />\n          </video>\n          <div className={styles.slideInner}>\n            {renderDots(currentKey)}\n            <div className={styles.cardType}>{title}</div>\n            {renderAvailability(lang, cardInfo)}\n          </div>\n        </div>\n        <CardPros type={type} price={cardInfo?.price} balance={tonBalance} isAvailable={Boolean(cardInfo?.notMinted)} />\n      </div>\n    )\n  );\n}\n\nfunction renderDots(currentKey: number) {\n  return (\n    <div className={styles.dots}>\n      {Array.from({ length: TOTAL_SLIDES }).map((_, index) => {\n        return (\n          <div key={index} className={buildClassName(styles.dot, index === currentKey && styles.dotActive)} />\n        );\n      })}\n    </div>\n  );\n}\n\nfunction renderAvailability(lang: LangFn, cardInfo?: ApiCardInfo) {\n  const { all, notMinted } = cardInfo || {};\n  if (!all || !notMinted) {\n    return (\n      <div className={styles.avaliability}>\n        <div className={styles.soldOut}>{lang('This card has been sold out')}</div>\n      </div>\n    );\n  }\n\n  const sold = all - notMinted;\n  const leftAmount = lang('%amount% left', { amount: formatNumber(notMinted) });\n  const soldAmount = lang('%amount% sold', { amount: formatNumber(sold) });\n\n  return (\n    <div className={styles.avaliability}>\n      <div\n        className={styles.progress}\n        style={`--progress: ${round(notMinted / all, 2)};}`}\n      >\n        <div className={buildClassName(styles.amount, styles.amountInner, styles.amountLeft)}>{leftAmount}</div>\n        <div className={buildClassName(styles.amount, styles.amountInner, styles.amountSold)}>{soldAmount}</div>\n      </div>\n      <div className={buildClassName(styles.amount, styles.amountLeft)}>{leftAmount}</div>\n      <div className={buildClassName(styles.amount, styles.amountSold)}>{soldAmount}</div>\n    </div>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiCardsInfo, ApiMtwCardType } from '../../api/types';\nimport type { Theme } from '../../global/types';\nimport { MintCardState } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport CardRoster, { MAP_CARD_TYPE_TO_NAME } from './CardRoster';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './MintCardModal.module.scss';\n\ninterface StateProps {\n  isOpen: boolean;\n  cardsInfo?: ApiCardsInfo;\n  isLoading?: boolean;\n  state?: MintCardState;\n  error?: string;\n  theme: Theme;\n  selectedCardType?: ApiMtwCardType;\n}\n\nfunction MintCardModal({\n  isOpen,\n  cardsInfo,\n  isLoading,\n  state,\n  error,\n  theme,\n  selectedCardType,\n}: StateProps) {\n  const { closeMintCardModal, clearMintCardError, submitMintCard } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n\n  const selectedCardName = selectedCardType ? MAP_CARD_TYPE_TO_NAME[selectedCardType] : '';\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitMintCard({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    submitMintCard();\n  });\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={!getDoesUsePinPad() ? lang('Confirm Upgrading') : undefined}\n          onClose={getDoesUsePinPad() ? closeMintCardModal : undefined}\n          onBackButtonClick={!getDoesUsePinPad() ? closeMintCardModal : undefined}\n        />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          isLoading={isLoading}\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={closeMintCardModal}\n          onUpdate={clearMintCardError}\n          operationType=\"mintCard\"\n          skipAuthScreen\n        >\n          <TransactionBanner\n            className={styles.mintCardBanner}\n            secondText={selectedCardName}\n          />\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Card has been upgraded!')} onClose={closeMintCardModal} />\n\n        <div className={buildClassName(modalStyles.transitionContent, modalStyles.transitionContent_simple)}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n\n          <div className={buildClassName(styles.resultWithTime)}>\n            <AnimatedIconWithPreview\n              play={isActive}\n              size={ANIMATED_STICKER_TINY_ICON_PX}\n              className={styles.resultTimeIcon}\n              nonInteractive\n              noLoop={false}\n              tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n              previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n            />\n            <div>\n              {renderText(lang('$mint_card_result'))}\n            </div>\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button\n              isPrimary\n              className={modalStyles.buttonFullWidth}\n              onClick={closeMintCardModal}\n            >\n              {lang('Done')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: MintCardState) {\n    switch (currentKey) {\n      case MintCardState.Initial:\n        return (<CardRoster cardsInfo={cardsInfo!} />);\n\n      case MintCardState.Password:\n        return renderPasswordForm(isActive);\n\n      case MintCardState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={closeMintCardModal}\n          />\n        );\n\n      case MintCardState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={closeMintCardModal}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case MintCardState.Done:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      forceFullNative\n      nativeBottomSheetKey=\"mint-card\"\n      dialogClassName={styles.dialog}\n      onClose={closeMintCardModal}\n    >\n      <Transition\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        name={resolveSlideTransitionName()}\n        className={buildClassName(styles.transition, 'custom-scroll')}\n        slideClassName={styles.transitionSlide}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentMintCard } = global;\n  const { config } = selectCurrentAccountState(global) || {};\n  const { cardsInfo } = config || {};\n\n  return {\n    isOpen: currentMintCard?.state !== undefined,\n    cardsInfo,\n    isLoading: currentMintCard?.isLoading,\n    state: currentMintCard?.state,\n    error: currentMintCard?.error,\n    theme: global.settings.theme,\n    selectedCardType: currentMintCard?.type,\n  };\n})(MintCardModal));\n","import type { ChangeEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Switcher.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  name?: string;\n  value?: string;\n  label?: string;\n  checked?: boolean;\n  className?: string;\n  onChange?: (e: ChangeEvent<HTMLInputElement>) => void;\n  onCheck?: (isChecked: boolean) => void;\n  shouldStopPropagation?: boolean;\n};\n\nfunction Switcher({\n  id,\n  name,\n  value,\n  label,\n  checked = false,\n  className,\n  onChange,\n  onCheck,\n  shouldStopPropagation,\n}: OwnProps) {\n  function handleChange(e: ChangeEvent<HTMLInputElement>) {\n    onChange?.(e);\n    onCheck?.(e.currentTarget.checked);\n  }\n\n  return (\n    <label\n      className={buildClassName(styles.container, className)}\n      title={label}\n      aria-label={label}\n      onClick={shouldStopPropagation ? (e) => e.stopPropagation() : undefined}\n      tabIndex={0}\n      role=\"button\"\n    >\n      <input\n        type=\"checkbox\"\n        id={id}\n        name={name}\n        value={value}\n        checked={checked}\n        className={styles.input}\n        onChange={handleChange}\n      />\n      <span className={styles.widget} />\n    </label>\n  );\n}\n\nexport default memo(Switcher);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"pDx55knh\",\"input\":\"cLbaNjJ_\",\"widget\":\"tiLjiStY\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"v8rRtn7B\",\"sticker\":\"CC8Q5sJb\",\"stickerHuge\":\"bQ7CA6_X\",\"error\":\"iEiAdwiC\",\"step\":\"TI5caump\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CreatePasswordForm from '../../ui/CreatePasswordForm';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOff({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { disableBiometrics } = getActions();\n\n  const lang = useLang();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric?: boolean) => {\n    disableBiometrics({ password, isPasswordNumeric });\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: BiometricsState) {\n    switch (currentKey) {\n      case BiometricsState.TurnOffBiometricConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Confirmation')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              {error ? (\n                <div className={styles.error}>{lang(error)}</div>\n              ) : (\n                <div className={styles.step}>{lang('Please verify the operation.')}</div>\n              )}\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffCreatePassword:\n        return (\n          <>\n            <ModalHeader title={lang('Create Password')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isActive}\n                isLoading={isLoading}\n                formId=\"biometrics-create-password\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n              />\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Disabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOff);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TurnOffWaning({ isOpen, onClose }: OwnProps) {\n  const { openBiometricsTurnOff } = getActions();\n\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={lang('Turn Off Biometrics')}\n      onClose={onClose}\n    >\n      <p className={modalStyles.text}>\n        {lang('If you turn off biometric protection, you will need to create a password.')}\n      </p>\n\n      <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n        <Button className={modalStyles.button} onClick={onClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isPrimary className={modalStyles.button} onClick={openBiometricsTurnOff}>\n          {lang('Continue')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOffWaning);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_ELECTRON } from '../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOn({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { enableBiometrics } = getActions();\n\n  const lang = useLang();\n  const [localError, setLocalError] = useState<string | undefined>();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const shouldDisablePasswordForm = Boolean(state !== BiometricsState.TurnOnPasswordConfirmation);\n\n  useEffect(() => {\n    if (isOpen) {\n      setLocalError('');\n    }\n  }, [isOpen]);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError(undefined);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (shouldDisablePasswordForm) {\n      return;\n    }\n\n    try {\n      enableBiometrics({ password });\n    } catch (err: any) {\n      setLocalError(err.message || 'Unknown error.');\n    }\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: BiometricsState) {\n    switch (currentKey) {\n      case BiometricsState.TurnOnPasswordConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Turn On Biometrics')} onClose={onClose} />\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error || localError}\n              operationType=\"turnOnBiometrics\"\n              help={lang('Enabling biometric confirmation will reset the password.')}\n              submitLabel={lang('Continue')}\n              onSubmit={handleSubmit}\n              onCancel={onClose}\n              onUpdate={handleClearError}\n            />\n          </>\n        );\n\n      case BiometricsState.TurnOnRegistration:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>{lang('Step 1 of 2. Registration')}</div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnVerification:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>\n                {lang(IS_ELECTRON ? 'Verification' : 'Step 2 of 2. Verification')}\n              </div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Enabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOn);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport BiometricsTurnOff from './TurnOff';\nimport BiometricsTurnOffWarning from './TurnOffWarning';\nimport BiometricsTurnOn from './TurnOn';\n\ninterface StateProps {\n  state: BiometricsState;\n  error?: string;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nfunction Biometrics({\n  state, error, isLoading, isInsideModal,\n}: StateProps) {\n  const { closeBiometricSettings } = getActions();\n\n  const isTurnOnBiometricsOpened = state === BiometricsState.TurnOnPasswordConfirmation\n    || state === BiometricsState.TurnOnRegistration\n    || state === BiometricsState.TurnOnVerification\n    || state === BiometricsState.TurnOnComplete;\n  const isTurnOffBiometricsOpened = state === BiometricsState.TurnOffBiometricConfirmation\n    || state === BiometricsState.TurnOffCreatePassword\n    || state === BiometricsState.TurnOffComplete;\n  const isTurnOffBiometricsWarningOpened = state === BiometricsState.TurnOffWarning;\n\n  return (\n    <>\n      <BiometricsTurnOn\n        isOpen={isTurnOnBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOff\n        isOpen={isTurnOffBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOffWarning isOpen={isTurnOffBiometricsWarningOpened} onClose={closeBiometricSettings} />\n    </>\n  );\n}\n\nexport default memo(withGlobal((global) => {\n  const { biometrics: { state, error } } = global;\n\n  return {\n    state,\n    error,\n    isLoading: global.auth.isLoading,\n  };\n})(Biometrics));\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { PIN_LENGTH } from '../../../config';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport PinPad from '../../ui/PinPad';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isPinAccepted?: boolean;\n  error?: string;\n  isNativeBiometricsEnabled?: boolean;\n}\n\nfunction NativeBiometricsTurnOn({\n  isActive,\n  isInsideModal,\n  isPinAccepted,\n  error,\n  isNativeBiometricsEnabled,\n  handleBackClick,\n}: OwnProps & StateProps) {\n  const { enableNativeBiometrics, clearNativeBiometricsError } = getActions();\n\n  const lang = useLang();\n  const { isSmallHeight } = useDeviceScreen();\n  const [pin, setPin] = useState<string>('');\n  const pinPadType = pin.length !== PIN_LENGTH\n    ? undefined\n    : (isPinAccepted ? 'success' : (error ? 'error' : undefined));\n  const pinTitle = isPinAccepted\n    ? 'Correct'\n    : (error && pin.length === PIN_LENGTH ? error : 'Enter your code');\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    setPin('');\n  }, [isActive]);\n\n  useEffectWithPrevDeps(([prevIsEnabled]) => {\n    if (isNativeBiometricsEnabled && !prevIsEnabled) {\n      handleBackClick();\n    }\n  }, [isNativeBiometricsEnabled, handleBackClick]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    enableNativeBiometrics({ password });\n  });\n\n  return (\n    <div className={styles.slide}>\n      <div className={buildClassName(styles.content, styles.contentFullSize)}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n\n        <div className={styles.pinPadHeader}>\n          {!isInsideModal && (\n            <AnimatedIconWithPreview\n              play={isActive}\n              tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n              previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n              noLoop={false}\n              nonInteractive\n              className={styles.stickerNativeBiometric}\n            />\n          )}\n\n          {!isSmallHeight && <div className={styles.pinPadTitle}>{lang('Confirm Passcode')}</div>}\n        </div>\n\n        <PinPad\n          isActive={isActive}\n          onClearError={clearNativeBiometricsError}\n          title={lang(pinTitle)}\n          type={pinPadType}\n\n          length={PIN_LENGTH}\n          value={pin}\n          onChange={setPin}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { nativeBiometricsError, isPinAccepted } = global;\n\n  return {\n    isPinAccepted,\n    error: nativeBiometricsError,\n    isNativeBiometricsEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsTurnOn));\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { AnimationLevel, Theme } from '../../global/types';\n\nimport {\n  ANIMATION_LEVEL_MAX,\n  ANIMATION_LEVEL_MIN,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  MTW_CARDS_WEBSITE,\n} from '../../config';\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n} from '../../global/selectors';\nimport { ACCENT_COLORS } from '../../util/accentColor/constants';\nimport buildClassName from '../../util/buildClassName';\nimport { switchToAir } from '../../util/capacitor';\nimport getAccentColorsFromNfts from '../../util/getAccentColorsFromNfts';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { openUrl } from '../../util/openUrl';\nimport { pause } from '../../util/schedulers';\nimport switchAnimationLevel from '../../util/switchAnimationLevel';\nimport switchTheme from '../../util/switchTheme';\nimport { IS_ELECTRON, IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Spinner from '../ui/Spinner';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\nimport airImg from '../../assets/settings/settings_air.svg';\nimport darkThemeImg from '../../assets/theme/theme_dark.png';\nimport lightThemeImg from '../../assets/theme/theme_light.png';\nimport systemThemeImg from '../../assets/theme/theme_system.png';\n\ninterface OwnProps {\n  isActive?: boolean;\n  theme: Theme;\n  handleBackClick: () => void;\n  animationLevel: AnimationLevel;\n  isInsideModal?: boolean;\n  isTrayIconEnabled: boolean;\n  onTrayIconEnabledToggle: VoidFunction;\n}\n\ninterface StateProps {\n  isViewMode: boolean;\n  accentColorIndex?: number;\n  nftsByAddress?: Record<string, ApiNft>;\n  nftAddresses?: string[];\n  isMintingCardsAvailable?: boolean;\n  isNftBuyingDisabled: boolean;\n}\n\nconst SWITCH_THEME_DURATION_MS = 300;\nconst SWITCH_APPLICATION_DURATION_MS = 300;\nconst THEME_OPTIONS = [{\n  value: 'light',\n  name: 'Light',\n  icon: lightThemeImg,\n}, {\n  value: 'system',\n  name: 'System',\n  icon: systemThemeImg,\n}, {\n  value: 'dark',\n  name: 'Dark',\n  icon: darkThemeImg,\n}];\n\nfunction SettingsAppearance({\n  isActive,\n  theme,\n  animationLevel,\n  accentColorIndex,\n  nftAddresses,\n  nftsByAddress,\n  isInsideModal,\n  isViewMode,\n  isTrayIconEnabled,\n  isMintingCardsAvailable,\n  isNftBuyingDisabled,\n  onTrayIconEnabledToggle,\n  handleBackClick,\n}: OwnProps & StateProps) {\n  const {\n    setTheme,\n    setAnimationLevel,\n    openMintCardModal,\n    installAccentColorFromNft,\n    clearAccentColorFromNft,\n    showNotification,\n  } = getActions();\n\n  const lang = useLang();\n  const [isAvailableAccentLoading, setIsAvailableAccentLoading] = useState(false);\n  const [availableAccentColorIds, setAvailableAccentColorIds] = useState<number[]>(MEMO_EMPTY_ARRAY);\n  const [nftByColorIndexes, setNftsByColorIndex] = useState<Record<number, ApiNft>>({});\n  const [isAirVersionEnabled, setIsAirVersionEnabled] = useState(false);\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const appTheme = useAppTheme(theme);\n\n  useEffect(() => {\n    if (IS_CORE_WALLET) return;\n\n    void (async () => {\n      setIsAvailableAccentLoading(true);\n      const result = await getAccentColorsFromNfts(nftAddresses, nftsByAddress);\n      if (result) {\n        setAvailableAccentColorIds(result.availableAccentColorIds);\n        setNftsByColorIndex(result.nftsByColorIndex);\n      } else {\n        setAvailableAccentColorIds(MEMO_EMPTY_ARRAY);\n        setNftsByColorIndex({});\n      }\n      setIsAvailableAccentLoading(false);\n    })();\n  }, [nftsByAddress, nftAddresses]);\n\n  const sortedColors = useMemo(() => {\n    return ACCENT_COLORS[appTheme]\n      .map((color, index) => ({ color, index }))\n      .sort((a, b) => {\n        return Number(!availableAccentColorIds.includes(a.index)) - Number(!availableAccentColorIds.includes(b.index));\n      });\n  }, [appTheme, availableAccentColorIds]);\n\n  const handleAirVersionSwitch = useLastCallback(async () => {\n    setIsAirVersionEnabled(true);\n\n    await pause(SWITCH_APPLICATION_DURATION_MS);\n\n    switchToAir();\n  });\n\n  const handleThemeChange = useLastCallback((newTheme: string) => {\n    document.documentElement.classList.add('no-transitions');\n    setTheme({ theme: newTheme as Theme });\n    switchTheme(newTheme as Theme, isInsideModal);\n    setTimeout(() => {\n      document.documentElement.classList.remove('no-transitions');\n    }, SWITCH_THEME_DURATION_MS);\n  });\n\n  const handleAnimationLevelToggle = useLastCallback(() => {\n    const level = animationLevel === ANIMATION_LEVEL_MIN ? ANIMATION_LEVEL_MAX : ANIMATION_LEVEL_MIN;\n    setAnimationLevel({ level });\n    switchAnimationLevel(level);\n  });\n\n  function handleAccentColorClick(colorIndex?: number) {\n    const isLocked = colorIndex !== undefined ? !availableAccentColorIds.includes(colorIndex) : false;\n\n    if (isLocked) {\n      showNotification({ message: lang('Get a unique MyTonWallet Card to unlock new palettes.') });\n    } else if (colorIndex === undefined) {\n      clearAccentColorFromNft();\n    } else {\n      installAccentColorFromNft({ nft: nftByColorIndexes[colorIndex] });\n    }\n  }\n\n  const handleUnlockNewPalettesClick = useLastCallback(() => {\n    if (!isViewMode && isMintingCardsAvailable) {\n      openMintCardModal();\n    } else {\n      void openUrl(MTW_CARDS_WEBSITE);\n    }\n  });\n\n  function renderAirSwitcher() {\n    return (\n      <>\n        <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n          <div className={styles.item} onClick={handleAirVersionSwitch}>\n            <img className={styles.menuIcon} src={airImg} alt=\"\" aria-hidden />\n            MyTonWallet Air\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label=\"MyTonWallet Air\"\n              checked={isAirVersionEnabled}\n            />\n          </div>\n        </div>\n        <p className={styles.blockDescription}>\n          {lang('$try_new_air_version')}\n        </p>\n      </>\n    );\n  }\n\n  function renderThemes() {\n    return THEME_OPTIONS.map(({ name, value, icon }) => {\n      return (\n        <div\n          key={value}\n          className={buildClassName(styles.theme, value === theme && styles.theme_active)}\n          onClick={() => handleThemeChange(value)}\n        >\n          <div className={buildClassName(styles.themeIcon, value === theme && styles.themeIcon_active)}>\n            <img src={icon} alt=\"\" className={styles.themeImg} aria-hidden />\n          </div>\n          <span>{lang(name)}</span>\n        </div>\n      );\n    });\n  }\n\n  function renderColorButton(color?: string, index?: number) {\n    const isSelected = accentColorIndex === index;\n    const isLocked = index !== undefined ? !availableAccentColorIds.includes(index) : false;\n\n    return (\n      <button\n        key={color || 'default'}\n        type=\"button\"\n        disabled={isSelected}\n        style={color ? `--current-accent-color: ${color}` : undefined}\n        className={buildClassName(styles.colorButton, isSelected && styles.colorButtonCurrent)}\n        aria-label={lang('Change Palette')}\n        onClick={() => handleAccentColorClick(index)}\n      >\n        {isAvailableAccentLoading && isLocked && <Spinner color=\"white\" />}\n        {!isAvailableAccentLoading && isLocked && (\n          <i\n            className={buildClassName(styles.iconLock, 'icon-lock', color === '#FFFFFF' && styles.iconLockInverted)}\n            aria-hidden\n          />\n        )}\n      </button>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Appearance')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Appearance')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {IS_CAPACITOR && renderAirSwitcher()}\n\n        <p className={styles.blockTitle}>{lang('Theme')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={styles.themeWrapper}>\n            {renderThemes()}\n          </div>\n        </div>\n\n        {!IS_CORE_WALLET && !isNftBuyingDisabled && (\n          <>\n            <p className={styles.blockTitle}>{lang('Palette')}</p>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={styles.colorList}>\n                {renderColorButton()}\n                {sortedColors.map(({ color, index }) => renderColorButton(color, index))}\n              </div>\n              <div\n                className={styles.subBlockAsButton}\n                role=\"button\"\n                tabIndex={0}\n                onClick={() => handleUnlockNewPalettesClick()}\n              >\n                {lang('Unlock New Palettes')}\n              </div>\n            </div>\n            <p className={styles.blockDescription}>{lang('Get a unique MyTonWallet Card to unlock new palettes.')}</p>\n          </>\n        )}\n\n        <p className={styles.blockTitle}>{lang('Other')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleAnimationLevelToggle}>\n            {lang('Enable Animations')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Enable Animations')}\n              checked={animationLevel !== ANIMATION_LEVEL_MIN}\n            />\n          </div>\n          {IS_ELECTRON && IS_WINDOWS && (\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={onTrayIconEnabledToggle}>\n              {lang('Display Tray Icon')}\n\n              <Switcher\n                className={styles.menuSwitcher}\n                label={lang('Display Tray Icon')}\n                checked={isTrayIconEnabled}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    orderedAddresses: nftAddresses,\n    byAddress: nftsByAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  const { config: { cardsInfo } = {} } = selectCurrentAccountState(global) || {};\n\n  return {\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n    nftAddresses,\n    nftsByAddress,\n    isMintingCardsAvailable: Boolean(cardsInfo),\n    isNftBuyingDisabled: global.restrictions.isNftBuyingDisabled,\n  };\n})(SettingsAppearance));\n","import type { ApiNft } from '../api/types';\n\nimport { MTW_CARDS_COLLECTION } from '../config';\nimport { getAccentColorIndexFromNft } from './accentColor';\nimport { compact, unique } from './iteratees';\nimport { logDebugError } from './logs';\n\nexport default async function getAccentColorsFromNfts(\n  nftAddresses?: string[],\n  nftsByAddress?: Record<string, ApiNft>,\n) {\n  try {\n    const nftCards = (nftAddresses || []).reduce((result, nftAddress) => {\n      const nft = nftsByAddress?.[nftAddress];\n      if (nft?.collectionAddress === MTW_CARDS_COLLECTION) {\n        result.push(nft);\n      }\n      return result;\n    }, [] as ApiNft[]);\n\n    if (!nftCards.length) {\n      return undefined;\n    }\n\n    const colors = await Promise.all(nftCards.map((nft) => getAccentColorIndexFromNft(nft)));\n    const nftsByColorIndex = colors.reduce((result, colorIndex, i) => {\n      if (colorIndex !== undefined) {\n        result[colorIndex] = nftCards[i];\n      }\n      return result;\n    }, {} as Record<number, ApiNft>);\n\n    const availableAccentColorIds = unique(compact(colors));\n\n    return {\n      availableAccentColorIds,\n      nftsByColorIndex,\n    };\n  } catch (err: any) {\n    logDebugError('[getAccentColorsFromNfts]: Error fetching accent colors', err);\n    return undefined;\n  }\n}\n","import React, {\n  memo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { UserToken } from '../../../global/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteTokenModal.module.scss';\n\ninterface OwnProps {\n  token?: UserToken;\n}\n\nfunction DeleteTokenModal({ token }: OwnProps) {\n  const {\n    deleteToken,\n  } = getActions();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const lang = useLang();\n\n  useSyncEffect(() => {\n    if (token) {\n      setIsOpen(true);\n    }\n  }, [token]);\n\n  const handleClose = useLastCallback(() => {\n    setIsOpen(false);\n  });\n\n  const handleDeleteToken = useLastCallback(() => {\n    handleClose();\n    deleteToken({ slug: token!.slug });\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={handleClose}\n      title={lang('Delete Token')}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>\n        {lang('Are you sure you want to delete?', { token: <strong>{token?.name}</strong> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={handleClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteToken} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteTokenModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"yflPd0zm\",\"description\":\"KH236kiH\"};","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  type ElementRef,\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { clamp } from '../../util/math';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Draggable.module.scss';\n\ntype TPoint = {\n  x: number;\n  y: number;\n};\n\ntype Offset = {\n  top?: number;\n  bottom?: number;\n  left?: number;\n  right?: number;\n};\n\ntype DraggableState = {\n  isDragging: boolean;\n  scrollTop: number;\n  origin: TPoint;\n  translation: TPoint;\n  width?: number;\n  height?: number;\n};\n\ntype OwnProps = {\n  children: TeactNode;\n  onDrag: (translation: TPoint, id: number | string) => void;\n  onDragEnd: NoneToVoidFunction;\n  id: number | string;\n  style?: string;\n  knobStyle?: string;\n  isDisabled?: boolean;\n  offset?: Offset;\n  parentRef?: ElementRef<HTMLDivElement>;\n  scrollRef?: ElementRef<HTMLDivElement>;\n  className?: string;\n  onClick: (e: React.MouseEvent | React.TouchEvent) => void;\n};\n\nconst ZERO_POINT: TPoint = { x: 0, y: 0 };\n\nconst DEFAULT_OFFSET: Offset = {\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0,\n};\n\nconst EDGE_THRESHOLD = 150;\n\nfunction Draggable({\n  children,\n  id,\n  onDrag,\n  onDragEnd,\n  style: externalStyle,\n  knobStyle,\n  isDisabled,\n  offset = DEFAULT_OFFSET,\n  parentRef,\n  scrollRef,\n  className,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n  const ref = useRef<HTMLDivElement>();\n  const buttonRef = useRef<HTMLDivElement>();\n  const scrollIntervalId = useRef<number>();\n\n  const [state, setState] = useState<DraggableState>({\n    isDragging: false,\n    scrollTop: 0,\n    origin: ZERO_POINT,\n    translation: ZERO_POINT,\n  });\n\n  const lastMousePosition = useRef<TPoint>({ x: 0, y: 0 });\n\n  const updateDraggablePosition = () => {\n    if (!state.isDragging || !ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  };\n\n  const stopContinuousScroll = () => {\n    if (scrollIntervalId.current !== undefined) {\n      cancelAnimationFrame(scrollIntervalId.current);\n      scrollIntervalId.current = undefined;\n    }\n  };\n\n  const startContinuousScroll = (scrollContainer: HTMLElement, speed: number) => {\n    const animateScroll = () => {\n      scrollContainer.scrollBy(0, speed);\n      updateDraggablePosition();\n      scrollIntervalId.current = requestAnimationFrame(animateScroll);\n    };\n\n    stopContinuousScroll();\n    animateScroll();\n  };\n\n  const setInitialState = (e: React.MouseEvent | TouchEvent) => {\n    const origin = getClientCoordinate(e);\n    const scrollTop = scrollRef?.current?.scrollTop ?? 0;\n\n    setState({\n      ...state,\n      isDragging: true,\n      origin,\n      scrollTop,\n      width: ref.current?.offsetWidth,\n      height: ref.current?.offsetHeight,\n    });\n  };\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setInitialState(e);\n  };\n\n  const handleTouchStart = useLastCallback((e: TouchEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    setInitialState(e);\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.clearScrollPatch();\n    }\n  });\n\n  const handleMouseMove = useLastCallback((e: MouseEvent | TouchEvent) => {\n    if (!ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const { x, y } = getClientCoordinate(e);\n    lastMousePosition.current = { x, y };\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    const scrollRect = scrollRef.current.getBoundingClientRect();\n    const distanceFromTop = y - scrollRect.top;\n    const distanceFromBottom = scrollRect.bottom - y;\n\n    if (distanceFromTop < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        -scaledEase((EDGE_THRESHOLD - distanceFromTop) / EDGE_THRESHOLD),\n      );\n    } else if (distanceFromBottom < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        scaledEase((EDGE_THRESHOLD - distanceFromBottom) / EDGE_THRESHOLD),\n      );\n    } else {\n      stopContinuousScroll();\n    }\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  });\n\n  const handleMouseUp = useLastCallback(() => {\n    setState((current) => ({\n      ...current,\n      isDragging: false,\n      width: undefined,\n      height: undefined,\n    }));\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.applyScrollPatch();\n    }\n\n    onDragEnd();\n  });\n\n  const handleClick = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (state.isDragging) {\n      return;\n    }\n\n    onClick(e);\n  });\n\n  useEffect(() => {\n    const dragButtonRef = buttonRef.current;\n\n    if (dragButtonRef) {\n      dragButtonRef.addEventListener('touchstart', handleTouchStart, { passive: false });\n    }\n\n    if (state.isDragging) {\n      window.addEventListener('touchmove', handleMouseMove);\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('touchend', handleMouseUp);\n      window.addEventListener('touchcancel', handleMouseUp);\n      window.addEventListener('mouseup', handleMouseUp);\n    } else {\n      stopContinuousScroll();\n      window.removeEventListener('touchmove', handleMouseMove);\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('touchend', handleMouseUp);\n      window.removeEventListener('touchcancel', handleMouseUp);\n      window.removeEventListener('mouseup', handleMouseUp);\n\n      setState((current) => ({\n        ...current,\n        translation: ZERO_POINT,\n      }));\n    }\n\n    return () => {\n      if (state.isDragging) {\n        stopContinuousScroll();\n        window.removeEventListener('touchmove', handleMouseMove);\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('touchend', handleMouseUp);\n        window.removeEventListener('touchcancel', handleMouseUp);\n        window.removeEventListener('mouseup', handleMouseUp);\n\n        if (dragButtonRef) {\n          dragButtonRef.removeEventListener('touchstart', handleTouchStart);\n        }\n      }\n    };\n  }, [handleMouseMove, handleMouseUp, handleTouchStart, state.isDragging, buttonRef, isDisabled]);\n\n  const fullClassName = buildClassName(styles.container, className, state.isDragging && styles.isDragging);\n\n  const cssStyles = useMemo(() => {\n    return buildStyle(\n      state.isDragging && `transform: translate(${state.translation.x}px, ${state.translation.y}px)`,\n      state.width ? `width: ${state.width}px` : undefined,\n      state.height ? `height: ${state.height}px` : undefined,\n      externalStyle,\n    );\n  }, [externalStyle, state.height, state.isDragging, state.translation.x, state.translation.y, state.width]);\n\n  return (\n    <div style={cssStyles} className={fullClassName} ref={ref} onClick={handleClick}>\n      {!isDisabled && (\n        <div\n          ref={buttonRef}\n          aria-label={lang('i18n_dragToSort')}\n          tabIndex={0}\n          role=\"button\"\n          className={buildClassName(styles.knob, 'div-button', 'draggable-knob')}\n          onMouseDown={handleMouseDown}\n          style={knobStyle}\n        >\n          <i className=\"icon icon-sort\" aria-hidden />\n        </div>\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(Draggable);\n\nfunction getClientCoordinate(e: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent) {\n  let x;\n  let y;\n\n  if ('touches' in e) {\n    x = e.touches[0].clientX;\n    y = e.touches[0].clientY;\n  } else {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  return { x, y };\n}\n\nfunction scaledEase(n: number) {\n  return 5 * (n ** 3) + 1;\n}\n\nfunction calculateConstrainedTranslation(\n  state: DraggableState,\n  lastMousePosition: TPoint,\n  lastScrollTop: number,\n  draggableElement: HTMLDivElement,\n  parentElement: HTMLDivElement,\n  offset: Offset,\n) {\n  const translation = {\n    x: lastMousePosition.x - state.origin.x,\n    y: lastMousePosition.y - state.origin.y + lastScrollTop - state.scrollTop,\n  };\n\n  const {\n    top = 0, right = 0, bottom = 0, left = 0,\n  } = offset;\n\n  const parentRect = parentElement.getBoundingClientRect();\n  const draggableRect = draggableElement.getBoundingClientRect();\n\n  const minX = -draggableElement.offsetLeft + left;\n  const maxX = parentRect.width - draggableRect.width - draggableElement.offsetLeft + right;\n  const minY = -draggableElement.offsetTop + top;\n  const maxY = parentRect.height - draggableRect.height - draggableElement.offsetTop + bottom;\n\n  return {\n    x: clamp(translation.x, minX, maxX),\n    y: clamp(translation.y, minY, maxY),\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"kWQHzIMD\",\"isDragging\":\"k0c5WDAy\",\"knob\":\"UpzQzcvs\"};","import React, {\n  type ElementRef,\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiBaseCurrency } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { DEFAULT_ENABLED_TOKEN_SLUGS } from '../../config';\nimport { bigintMultiplyToNumber } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { isBetween } from '../../util/math';\n\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TokenIcon from '../common/TokenIcon';\nimport DeleteTokenModal from '../main/modals/DeleteTokenModal';\nimport AnimatedCounter from '../ui/AnimatedCounter';\nimport Draggable from '../ui/Draggable';\nimport SensitiveData from '../ui/SensitiveData';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface SortState {\n  orderedTokenSlugs?: string[];\n  dragOrderTokenSlugs?: string[];\n  draggedIndex?: number;\n}\n\ninterface OwnProps {\n  parentContainer: ElementRef<HTMLDivElement>;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  isSortByValueEnabled?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  withChainIcon?: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst TOKEN_HEIGHT_PX = 64;\nconst TOP_OFFSET = 48;\n\nfunction SettingsTokens({\n  parentContainer,\n  tokens,\n  orderedSlugs,\n  isSortByValueEnabled,\n  baseCurrency,\n  withChainIcon,\n  isSensitiveDataHidden,\n}: OwnProps) {\n  const {\n    openSettingsWithState,\n    updateOrderedSlugs,\n    rebuildOrderedSlugs,\n    toggleTokenVisibility,\n  } = getActions();\n  const lang = useLang();\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const tokensRef = useRef<HTMLDivElement>();\n  const sortableContainerRef = useRef<HTMLDivElement>();\n\n  const [tokenToDelete, setTokenToDelete] = useState<UserToken | undefined>();\n  const [state, setState] = useState<SortState>({\n    orderedTokenSlugs: orderedSlugs,\n    dragOrderTokenSlugs: orderedSlugs,\n    draggedIndex: undefined,\n  });\n\n  useEffectOnce(() => {\n    rebuildOrderedSlugs();\n  });\n\n  useEffect(() => {\n    if (!arraysAreEqual(orderedSlugs, state.orderedTokenSlugs)) {\n      setState({\n        orderedTokenSlugs: orderedSlugs,\n        dragOrderTokenSlugs: orderedSlugs,\n        draggedIndex: undefined,\n      });\n    }\n  }, [orderedSlugs, state.orderedTokenSlugs]);\n\n  const handleOpenAddTokenPage = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.SelectTokenList });\n  });\n\n  const handleDrag = useLastCallback((translation: { x: number; y: number }, id: string | number) => {\n    const delta = Math.round(translation.y / TOKEN_HEIGHT_PX);\n    const index = state.orderedTokenSlugs?.indexOf(id as string) ?? 0;\n    const dragOrderTokenSlugs = state.orderedTokenSlugs?.filter((tokenSlug) => tokenSlug !== id);\n\n    if (!dragOrderTokenSlugs || !isBetween(index + delta, 0, orderedSlugs?.length ?? 0)) {\n      return;\n    }\n\n    dragOrderTokenSlugs.splice(index + delta, 0, id as string);\n    setState((current) => ({\n      ...current,\n      draggedIndex: index,\n      dragOrderTokenSlugs,\n    }));\n  });\n\n  const handleDragEnd = useLastCallback(() => {\n    setState((current) => {\n      updateOrderedSlugs({\n        orderedSlugs: current.dragOrderTokenSlugs!,\n      });\n\n      return {\n        ...current,\n        orderedTokenSlugs: current.dragOrderTokenSlugs,\n        draggedIndex: undefined,\n      };\n    });\n  });\n\n  const handleTokenVisibility = useLastCallback((token: UserToken, e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    toggleTokenVisibility({ slug: token.slug, shouldShow: Boolean(token.isDisabled) });\n  });\n\n  const handleDeleteToken = useLastCallback((token: UserToken, e: React.MouseEvent<HTMLSpanElement>) => {\n    e.stopPropagation();\n    setTokenToDelete(token);\n  });\n\n  function renderToken(token: UserToken, index: number) {\n    const {\n      symbol, name, amount, price, slug, isDisabled,\n    } = token;\n\n    const totalAmount = bigintMultiplyToNumber(amount, price);\n    const isDragged = state.draggedIndex === index;\n\n    const draggedTop = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.orderedTokenSlugs);\n    const top = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.dragOrderTokenSlugs);\n\n    const style = `top: ${isDragged ? draggedTop : top}px;`;\n    const knobStyle = 'left: 1rem;';\n\n    const isDeleteButtonVisible = amount === 0n && !DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug);\n\n    const isDragDisabled = isSortByValueEnabled || tokens!.length <= 1;\n\n    return (\n      <Draggable\n        key={slug}\n        id={slug}\n        onDrag={handleDrag}\n        onDragEnd={handleDragEnd}\n        style={style}\n        knobStyle={knobStyle}\n        isDisabled={isDragDisabled}\n        className={buildClassName(styles.item, styles.item_token, !isSortByValueEnabled && styles.draggable)}\n        offset={{ top: TOP_OFFSET }}\n        parentRef={tokensRef}\n        scrollRef={parentContainer}\n\n        onClick={(e) => handleTokenVisibility(token, e)}\n      >\n        <TokenIcon token={token} withChainIcon={withChainIcon} />\n        <div className={styles.tokenInfo}>\n          <div className={styles.tokenTitle}>\n            {name}\n          </div>\n          <div className={styles.tokenDescription}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={4 + (top % 6)}\n              rows={2}\n              cellSize={8}\n              contentClassName={styles.tokenAmount}\n            >\n              <AnimatedCounter text={formatCurrency(toDecimal(totalAmount, token.decimals, true), shortBaseSymbol)} />\n              <i className={styles.dot} aria-hidden />\n              <AnimatedCounter text={formatCurrency(toDecimal(amount, token.decimals), symbol)} />\n            </SensitiveData>\n            {isDeleteButtonVisible && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                <span className={styles.deleteText} onClick={(e) => handleDeleteToken(token, e)}>\n                  {lang('Delete')}\n                </span>\n              </>\n            )}\n          </div>\n        </div>\n        <Switcher\n          className={styles.menuSwitcher}\n          checked={!isDisabled}\n        />\n      </Draggable>\n    );\n  }\n\n  return (\n    <>\n      <p className={styles.blockTitle}>{lang('My Tokens')}</p>\n      <div className={styles.contentRelative} ref={sortableContainerRef}>\n        <div\n          className={buildClassName(styles.settingsBlock, styles.sortableContainer)}\n          style={`height: ${(tokens?.length ?? 0) * TOKEN_HEIGHT_PX + TOP_OFFSET}px`}\n          ref={tokensRef}\n        >\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenAddTokenPage}>\n            {lang('Add Token')}\n            <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n          </div>\n\n          {tokens?.map(renderToken)}\n        </div>\n      </div>\n\n      <DeleteTokenModal token={tokenToDelete} />\n    </>\n  );\n}\n\nfunction arraysAreEqual<T>(arr1: T[] = [], arr2: T[] = []) {\n  return arr1.length === arr2.length && arr1.every((value, index) => value === arr2[index]);\n}\n\nfunction getOffsetBySlug(slug: string, list: string[] = []) {\n  const realIndex = list.indexOf(slug);\n  const index = realIndex === -1 ? list.length : realIndex;\n  return getOffsetByIndex(index);\n}\n\nfunction getOffsetByIndex(index: number) {\n  return index * TOKEN_HEIGHT_PX + TOP_OFFSET;\n}\n\nexport default memo(SettingsTokens);\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiNft } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { CURRENCIES, DEFAULT_PRICE_CURRENCY, TINY_TRANSFER_MAX_COST } from '../../config';\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Dropdown, { type DropdownItem } from '../ui/Dropdown';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport SettingsTokens from './SettingsTokens';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  onBack: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isInvestorViewEnabled?: boolean;\n  isSortByValueEnabled?: boolean;\n  areTinyTransfersHidden?: boolean;\n  areTokensWithNoCostHidden?: boolean;\n  isSensitiveDataHidden?: true;\n  baseCurrency?: ApiBaseCurrency;\n  isMultichainAccount: boolean;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  nftsByAddress?: Record<string, ApiNft>;\n  blacklistedNftAddresses: string[];\n  whitelistedNftAddresses: string[];\n}\n\nfunction SettingsAssets({\n  isActive,\n  isInsideModal,\n  isInvestorViewEnabled,\n  isSortByValueEnabled,\n  isSensitiveDataHidden,\n  areTinyTransfersHidden,\n  areTokensWithNoCostHidden,\n  baseCurrency,\n  isMultichainAccount,\n  tokens,\n  orderedSlugs,\n  nftsByAddress,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  onBack,\n}: OwnProps & StateProps) {\n  const {\n    toggleTinyTransfersHidden,\n    toggleInvestorView,\n    toggleTokensWithNoCost,\n    toggleSortByValue,\n    changeBaseCurrency,\n    setSettingsState,\n  } = getActions();\n\n  const lang = useLang();\n\n  const scrollContainerRef = useRef<HTMLDivElement>();\n\n  useHistoryBack({ isActive, onBack });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const currencyItems = useMemo<DropdownItem<ApiBaseCurrency>[]>(() => (\n    Object.entries(CURRENCIES)\n      .map(([currency, { name }]) => ({ value: currency as keyof typeof CURRENCIES, name }))\n  ), []);\n\n  const handleTinyTransfersHiddenToggle = useLastCallback(() => {\n    toggleTinyTransfersHidden({ isEnabled: !areTinyTransfersHidden });\n  });\n\n  const handleInvestorViewToggle = useLastCallback(() => {\n    toggleInvestorView({ isEnabled: !isInvestorViewEnabled });\n  });\n\n  const handleOpenHiddenNfts = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.HiddenNfts });\n  });\n\n  const handleTokensWithNoPriceToggle = useLastCallback(() => {\n    toggleTokensWithNoCost({ isEnabled: !areTokensWithNoCostHidden });\n  });\n\n  const handleSortByValueToggle = useLastCallback(() => {\n    toggleSortByValue({ isEnabled: !isSortByValueEnabled });\n  });\n\n  const [localBaseCurrency, setLocalBaseCurrency] = useState(baseCurrency);\n\n  const handleBaseCurrencyChange = useLastCallback((currency: ApiBaseCurrency) => {\n    setLocalBaseCurrency(currency);\n    changeBaseCurrency({ currency });\n  });\n\n  const {\n    shouldRenderHiddenNftsSection,\n    hiddenNftsCount,\n  } = useMemo(() => {\n    const nfts = Object.values(nftsByAddress || {});\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedAddressesSet = new Set(whitelistedNftAddresses);\n    const shouldRender = nfts.some((nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden);\n    const hiddenNfts = nfts.filter(\n      (nft) => !whitelistedAddressesSet.has(nft.address) && (blacklistedAddressesSet.has(nft.address) || nft.isHidden),\n    );\n\n    return {\n      shouldRenderHiddenNftsSection: shouldRender,\n      hiddenNftsCount: hiddenNfts.length,\n    };\n  }, [nftsByAddress, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Assets & Activity')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBack}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBack} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Assets & Activity')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n        ref={scrollContainerRef}\n      >\n        <div className={styles.settingsBlock}>\n          <Dropdown\n            label={lang('Base Currency')}\n            items={currencyItems}\n            selectedValue={baseCurrency ?? DEFAULT_PRICE_CURRENCY}\n            theme=\"light\"\n            shouldTranslateOptions\n            className={buildClassName(styles.item, styles.item_small)}\n            onChange={handleBaseCurrencyChange}\n            isLoading={localBaseCurrency !== baseCurrency}\n          />\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleInvestorViewToggle}>\n            <div>\n              {lang('Investor View')}\n              {' '}\n              <IconWithTooltip\n                message={lang('Focus on asset value rather than current balance')}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Investor View')}\n              checked={isInvestorViewEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTinyTransfersHiddenToggle}>\n            <div>\n              {lang('Hide Tiny Transfers')}\n              {' '}\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$tiny_transfers_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.wideTooltip)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tiny Transfers')}\n              checked={areTinyTransfersHidden}\n            />\n          </div>\n        </div>\n        {\n          shouldRenderHiddenNftsSection && (\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenHiddenNfts}>\n                {lang('Hidden NFTs')}\n                <div className={styles.itemInfo}>\n                  {hiddenNftsCount}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            </div>\n          )\n        }\n        <p className={styles.blockTitle}>{lang('Token Settings')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleSortByValueToggle}>\n            {lang('Sort By Cost')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Sort By Cost')}\n              checked={isSortByValueEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTokensWithNoPriceToggle}>\n            <div>\n              {lang('Hide Tokens With No Cost')}\n              {' '}\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$hide_tokens_no_cost_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.wideTooltip)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tokens With No Cost')}\n              checked={areTokensWithNoCostHidden}\n            />\n          </div>\n        </div>\n\n        <SettingsTokens\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          parentContainer={scrollContainerRef}\n          tokens={tokens}\n          orderedSlugs={orderedSlugs}\n          isSortByValueEnabled={isSortByValueEnabled}\n          baseCurrency={baseCurrency}\n          withChainIcon={isMultichainAccount}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n    isSensitiveDataHidden,\n  } = global.settings;\n\n  const {\n    orderedSlugs,\n  } = selectCurrentAccountSettings(global) ?? {};\n\n  const {\n    blacklistedNftAddresses = MEMO_EMPTY_ARRAY,\n    whitelistedNftAddresses = MEMO_EMPTY_ARRAY,\n    nfts: {\n      byAddress: nftsByAddress,\n    } = {},\n  } = selectCurrentAccountState(global) || {};\n\n  return {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n    tokens: selectCurrentAccountTokens(global),\n    orderedSlugs,\n    nftsByAddress,\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    isSensitiveDataHidden,\n  };\n})(SettingsAssets));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ofWxr4DU\",\"description\":\"XlFYElV7\",\"buttons\":\"gixyiSx7\",\"button\":\"Uez1mztb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiDapp } from '../../../api/types';\n\nimport { getDappConnectionUniqueId } from '../../../util/getDappConnectionUniqueId';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './DisconnectDappModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  dapp?: ApiDapp;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DisconnectDappModal({ isOpen, dapp, onClose }: OwnProps) {\n  const {\n    deleteAllDapps,\n    deleteDapp,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteAllDapps = useLastCallback(() => {\n    void deleteAllDapps();\n    onClose();\n  });\n\n  const handleDeleteDapp = useLastCallback(() => {\n    void deleteDapp({ url: dapp!.url, uniqueId: getDappConnectionUniqueId(dapp!) });\n    onClose();\n  });\n\n  const title = dapp ? lang('Disconnect Dapp') : lang('Disconnect Dapps');\n  const description = dapp\n    ? lang('Are you sure you want to disconnect?', { dappname: <strong>{dapp.name}</strong> })\n    : lang('Are you sure you want to disconnect all websites?');\n  const onDisconnect = dapp ? handleDeleteDapp : handleDeleteAllDapps;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={onClose}\n      title={title}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>{description}</p>\n      <div className={styles.buttons}>\n        <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={onDisconnect} className={styles.button}>\n          {lang('Disconnect')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DisconnectDappModal);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport type { ApiDapp } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, APP_NAME } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { getDappConnectionUniqueId } from '../../util/getDappConnectionUniqueId';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport DappInfo from '../dapps/DappInfo';\nimport DisconnectDappModal from '../main/modals/DisconnectDappModal';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  dapps: ApiDapp[];\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDapps({\n  isActive,\n  dapps,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isDisconnectModalOpen, openDisconnectModal, closeDisconnectModal] = useFlag();\n  const [dappToDelete, setDappToDelete] = useState<ApiDapp | undefined>();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleDisconnectDapp = useLastCallback((url: string) => {\n    const dapp = dapps.find((d) => d.url === url);\n    setDappToDelete(dapp);\n    openDisconnectModal();\n  });\n\n  const handleDisconnectAll = useLastCallback(() => {\n    setDappToDelete(undefined);\n    openDisconnectModal();\n  });\n\n  function renderDapps() {\n    return (\n      <div className={styles.dapps}>\n        <div className={styles.disconnectAllBlock}>\n          <Button\n            className={styles.disconnectButton}\n            isSimple\n            onClick={handleDisconnectAll}\n          >\n            {lang('Disconnect All Dapps')}\n          </Button>\n          <p className={styles.blockDescription}>{lang('$dapps-description', { app_name: APP_NAME })}</p>\n        </div>\n\n        <p className={styles.blockTitle}>{lang('Logged in with %app_name%', { app_name: APP_NAME })}</p>\n\n        <div className={styles.block}>\n          {dapps.map((dapp) => (\n            <DappInfo\n              key={`dapp-${dapp.url}-${getDappConnectionUniqueId(dapp)}`}\n              dapp={dapp}\n              className={styles.dapp}\n              onDisconnect={handleDisconnectDapp}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  function renderEmptyDappsMessage(isPlaying: boolean) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isPlaying}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No active connections')}</p>\n      </div>\n    );\n  }\n\n  const content = dapps.length === 0\n    ? renderEmptyDappsMessage(isActive)\n    : renderDapps();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Dapps')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Dapps')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition activeKey={dapps.length === 0 ? 0 : 1} name=\"fade\">\n          {content}\n        </Transition>\n      </div>\n      <DisconnectDappModal isOpen={isDisconnectModalOpen} onClose={closeDisconnectModal} dapp={dappToDelete} />\n    </div>\n  );\n}\n\nexport default memo(SettingsDapps);\n","import type { Platforms } from '@twa-dev/types';\n\nimport {\n  IS_AIR_APP,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_FIREFOX_EXTENSION,\n  IS_OPERA_EXTENSION,\n  IS_PACKAGED_ELECTRON,\n  IS_TELEGRAM_APP,\n} from '../config';\nimport { getTelegramApp } from './telegram';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from './windowEnvironment';\n\nexport type BuildPlatform = Platforms\n  | 'web'\n  | 'extension'\n  | 'firefox-extension'\n  | 'opera-extension'\n  | 'electron'\n  | 'android'\n  | 'android-air'\n  | 'android-air-direct'\n  | 'android-direct'\n  | 'ios'\n  | 'ios-air'\n  | 'telegram-unknown';\n\nexport function getBuildPlatform(): BuildPlatform {\n  if (IS_FIREFOX_EXTENSION) return 'firefox-extension';\n  if (IS_OPERA_EXTENSION) return 'opera-extension';\n  if (IS_EXTENSION) return 'extension';\n\n  if (IS_CAPACITOR) {\n    if (IS_AIR_APP) {\n      if (IS_IOS) return 'ios-air';\n      if (IS_ANDROID_DIRECT) return 'android-air-direct';\n      if (IS_ANDROID) return 'android-air';\n    }\n    if (IS_ANDROID_DIRECT) return 'android-direct';\n    if (IS_ANDROID) return 'android';\n    if (IS_IOS) return 'ios';\n  }\n\n  if (IS_TELEGRAM_APP) {\n    return getTelegramApp()?.platform || 'telegram-unknown';\n  }\n\n  if (IS_ELECTRON) return 'electron';\n\n  return 'web';\n}\n\nexport function getFlagsValue() {\n  return {\n    IS_ANDROID_DIRECT,\n    IS_CAPACITOR,\n    IS_TELEGRAM_APP,\n    IS_EXTENSION,\n    IS_FIREFOX_EXTENSION,\n    IS_PACKAGED_ELECTRON,\n    IS_AIR_APP,\n    IS_ELECTRON,\n    IS_OPERA_EXTENSION,\n  };\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNetwork } from '../../api/types';\nimport type { Account } from '../../global/types';\nimport type { DropdownItem } from '../ui/Dropdown';\n\nimport { APP_COMMIT_HASH, APP_ENV, APP_VERSION, IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../config';\nimport { selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { getBuildPlatform, getFlagsValue } from '../../util/getBuildPlatform';\nimport { getPlatform } from '../../util/getPlatform';\nimport { getLogs } from '../../util/logs';\nimport { getLogsFromNative } from '../../util/multitab';\nimport { shareFile } from '../../util/share';\nimport { IS_IOS } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  isTestnet?: boolean;\n  isCopyStorageEnabled?: boolean;\n  onShowAllWalletVersions: () => void;\n  onClose: () => void;\n}\n\ninterface StateProps {\n  currentAccountId?: string;\n  accountsById?: Record<string, Account>;\n  canViewAllWalletVersions: boolean;\n}\n\nconst NETWORK_OPTIONS: DropdownItem<ApiNetwork>[] = [{\n  value: 'mainnet',\n  name: 'Mainnet',\n}, {\n  value: 'testnet',\n  name: 'Testnet',\n}];\n\n// iOS allows downloading files even in TMA, however, in other platforms,\n// downloading files from `blob:https://` schemes is limited by Telegram itself.\n// Also, file downloading is limited in extensions.\nconst CAN_DOWNLOAD_LOGS = IS_IOS || !(IS_EXTENSION || IS_TELEGRAM_APP);\n\nfunction SettingsDeveloperOptions({\n  isOpen,\n  isTestnet,\n  isCopyStorageEnabled,\n  onShowAllWalletVersions,\n  onClose,\n  currentAccountId,\n  accountsById,\n  canViewAllWalletVersions,\n}: OwnProps & StateProps) {\n  const {\n    startChangingNetwork,\n    closeSettings,\n    openAddAccountModal,\n    copyStorageData,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n  const currentNetwork = NETWORK_OPTIONS[isTestnet ? 1 : 0].value;\n\n  const handleNetworkChange = useLastCallback((newNetwork: ApiNetwork) => {\n    startChangingNetwork({ network: newNetwork });\n    onClose();\n  });\n\n  const handleAddTonOnlyWallet = useLastCallback(() => {\n    onClose();\n    closeSettings();\n    openAddAccountModal({ forceAddingTonOnlyAccount: true });\n  });\n\n  const handleDownloadLogs = useLastCallback(async () => {\n    const logsString = await getLogsString({ currentAccountId, accountsById });\n\n    if (!CAN_DOWNLOAD_LOGS) {\n      await copyTextToClipboard(logsString);\n      showNotification({ message: lang('Logs were copied!'), icon: 'icon-copy' });\n      onClose();\n    } else {\n      const filename = `${IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet'}_logs_${new Date().toISOString()}.json`;\n      await shareFile(filename, logsString, 'application/json');\n    }\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      noBackdropClose\n      isCompact\n      title={lang('Developer Options')}\n    >\n      <div className={styles.settingsBlock}>\n        <Dropdown\n          label={lang('Network')}\n          items={NETWORK_OPTIONS}\n          selectedValue={currentNetwork}\n          theme=\"light\"\n          arrow=\"chevron\"\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={handleNetworkChange}\n        />\n\n        <div className={buildClassName(styles.item, styles.item_small)} onClick={handleAddTonOnlyWallet}>\n          {lang('Create TON-Only Wallet')}\n\n          <i className={buildClassName(styles.iconChevronRight, 'icon-plus')} aria-hidden />\n        </div>\n\n        <div\n          className={buildClassName(styles.item, styles.item_small, !canViewAllWalletVersions && styles.item_disabled)}\n          onClick={onShowAllWalletVersions}\n        >\n          {lang('All Wallet Versions')}\n\n          <div className={styles.itemInfo}>\n            {canViewAllWalletVersions ? (\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n\n            ) : (\n              <>\n                <span className={styles.small}>{lang('Multichain')}</span>\n                <i className={buildClassName(styles.iconChevronRight, 'icon-lock')} aria-hidden />\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {isCopyStorageEnabled && (\n        <>\n          <p className={styles.blockTitle}>{lang('Dangerous')}</p>\n          <div className={styles.settingsBlock}>\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={() => copyStorageData()}>\n              {lang('Copy Storage Data')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n            </div>\n          </div>\n        </>\n      )}\n\n      <div className={buildClassName(styles.settingsBlock)}>\n        <div className={buildClassName(styles.item, styles.item_small)} onClick={handleDownloadLogs}>\n          {\n            !CAN_DOWNLOAD_LOGS\n              ? (\n                <>\n                  {lang('Copy Logs')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n                </>\n              ) : lang('Download Logs')\n          }\n        </div>\n      </div>\n\n      <Button\n        className={styles.developerCloseButton}\n        onClick={onClose}\n      >\n        {lang('Close')}\n      </Button>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const currentAccountId = global.currentAccountId;\n  const accountsById = global.accounts?.byId;\n  const canViewAllWalletVersions = !selectIsMultichainAccount(global, currentAccountId!);\n\n  return {\n    currentAccountId,\n    accountsById,\n    canViewAllWalletVersions,\n  };\n})(SettingsDeveloperOptions));\n\nasync function getLogsString({\n  currentAccountId,\n  accountsById,\n}: Partial<StateProps>) {\n  const accountsInfo = accountsById && Object.keys(accountsById).reduce((acc, accountId) => {\n    const { addressByChain, type } = accountsById[accountId];\n    acc[accountId] = {\n      type,\n      addressByChain,\n    };\n    return acc;\n  }, {} as any);\n\n  const [mainLogs, bottomSheetLogs, apiLogs = []] = await Promise.all([\n    getLogs(),\n    getLogsFromNative(),\n    callApi('getLogs'),\n  ]);\n\n  const time = new Date();\n  const timezoneOffset = -time.getTimezoneOffset();\n\n  return JSON.stringify(\n    {\n      time,\n      timezone: `UTC${timezoneOffset < 0 ? '-' : '+'}${Math.abs(timezoneOffset) / 60}`,\n      environment: APP_ENV,\n      version: APP_VERSION,\n      commit: APP_COMMIT_HASH,\n      platform: getPlatform(),\n      navigatorPlatform: navigator.platform,\n      userAgent: navigator.userAgent,\n      build: getBuildPlatform(),\n      flags: getFlagsValue(),\n      currentAccountId,\n      accountsInfo,\n      logs: [\n        ...mainLogs.map((log) => ({ ...log, context: 'main' })),\n        ...bottomSheetLogs.map((log) => ({ ...log, context: 'bottomSheet' })),\n        ...apiLogs.map((log) => ({ ...log, context: 'api' })),\n      ]\n        .sort((a, b) => a.time - b.time)\n        .map((log) => ({ ...log, time: new Date(log.time).toISOString() })),\n    },\n    undefined,\n    2,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDisclaimer({ isActive, handleBackClick, isInsideModal }: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title=\"\"\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          />\n          <div className={styles.sideTitle}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsDisclaimer);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport Button from '../../ui/Button';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n}\n\nfunction HiddenByUserNft({ nft }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus } = getActions();\n  const lang = useLang();\n\n  const [isNftHidden, , unmarkNftHidden] = useFlag(true);\n\n  const handleUnhide = useLastCallback(() => {\n    removeNftSpecialStatus({ address: nft.address });\n  });\n\n  const { ref } = useShowTransition({\n    isOpen: isNftHidden,\n    onCloseAnimationEnd: handleUnhide,\n  });\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function handleNftClick() {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'user',\n    });\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={styles.item}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name || lang('Untitled')}</span>\n        {\n          nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>\n        }\n      </div>\n\n      <Button\n        isSmall\n        isPrimary\n        isText\n        className={styles.nftButtonUnhide}\n        onClick={unmarkNftHidden}\n        shouldStopPropagation\n      >\n        {lang('Unhide')}\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(HiddenByUserNft);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Switcher from '../../ui/Switcher';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  isWhitelisted?: boolean;\n}\n\nfunction ProbablyScamNft({ nft, isWhitelisted }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus, openUnhideNftModal } = getActions();\n  const lang = useLang();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  const handleNftClick = useLastCallback(() => {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'scam',\n    });\n  });\n\n  const handleSwitcherClick = useLastCallback((e: React.ChangeEvent) => {\n    e.stopPropagation();\n    if (isWhitelisted) {\n      removeNftSpecialStatus({ address: nft.address });\n    } else {\n      openUnhideNftModal({ address: nft.address, name: nft.name! });\n    }\n  });\n\n  return (\n    <div\n      className={styles.item}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name}</span>\n        {nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>}\n      </div>\n\n      <Switcher\n        className={styles.menuSwitcher}\n        label={lang('Show')}\n        checked={isWhitelisted}\n        onChange={handleSwitcherClick}\n        shouldStopPropagation\n      />\n    </div>\n  );\n}\n\nexport default memo(ProbablyScamNft);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport HiddenByUserNft from './nfts/HiddenByUserNft';\nimport ProbablyScamNft from './nfts/ProbablyScamNft';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  orderedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n}\n\nfunction SettingsHiddenNfts({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  orderedAddresses,\n  byAddress,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    return orderedAddresses\n      .map((address) => byAddress[address])\n      .filter(Boolean);\n  }, [\n    byAddress, orderedAddresses,\n  ]);\n\n  const hiddenByUserNfts = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    return nfts?.filter((nft) => blacklistedNftAddressesSet.has(nft.address));\n  }, [nfts, blacklistedNftAddresses]);\n\n  const probablyScamNfts = useMemo(() => {\n    return nfts?.filter((nft) => nft.isHidden);\n  }, [nfts]);\n\n  const whitelistedNftAddressesSet = useMemo(() => {\n    return new Set(whitelistedNftAddresses);\n  }, [whitelistedNftAddresses]);\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function renderHiddenByUserNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Hidden By Me')}</p>\n        <div className={buildClassName(styles.block, !areSettingsInModal && 'hidden-nfts-user')}>\n          {hiddenByUserNfts!.map((nft) => <HiddenByUserNft key={nft.address} nft={nft} />)}\n        </div>\n      </>\n    );\n  }\n\n  function renderProbablyScamNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Probably Scam')}</p>\n        <div className={\n          buildClassName(styles.block, styles.settingsBlockWithDescription, !areSettingsInModal && 'hidden-nfts-scam')\n        }\n        >\n          {\n            probablyScamNfts!.map(\n              (nft) => (\n                <ProbablyScamNft\n                  key={nft.address}\n                  nft={nft}\n                  isWhitelisted={whitelistedNftAddressesSet.has(nft.address)}\n                />\n              ),\n            )\n          }\n        </div>\n        <p className={styles.blockDescription}>\n          {lang('$settings_nft_probably_scam_description')}\n        </p>\n      </>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Hidden NFTs')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Hidden NFTs')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {Boolean(hiddenByUserNfts?.length) && renderHiddenByUserNfts()}\n        {Boolean(probablyScamNfts?.length) && renderProbablyScamNfts()}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectCurrentAccountState(global) ?? {};\n  const {\n    orderedAddresses,\n    byAddress,\n  } = selectCurrentAccountState(global)?.nfts ?? {};\n  return {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    orderedAddresses,\n    byAddress,\n  };\n})(SettingsHiddenNfts));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { LangCode } from '../../global/types';\n\nimport { LANG_LIST } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { setLanguage } from '../../util/langProvider';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport checkmarkImg from '../../assets/settings/settings_checkmark.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  langCode: LangCode;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsLanguage({\n  isActive,\n  langCode,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const {\n    changeLanguage,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const handleLanguageChange = useLastCallback((newLangCode: LangCode) => {\n    void setLanguage(newLangCode, () => {\n      changeLanguage({ langCode: newLangCode });\n    });\n  });\n\n  function renderLanguages() {\n    return LANG_LIST.map(({ name, nativeName, langCode: lc }) => (\n      <div\n        key={lc}\n        className={buildClassName(styles.item, styles.item_lang)}\n        onClick={() => handleLanguageChange(lc)}\n      >\n        <div className={styles.languageInfo}>\n          <span className={styles.languageMain}>{name}</span>\n          <span className={styles.languageNative}>{nativeName}</span>\n        </div>\n\n        {langCode === lc && <img src={checkmarkImg} alt={name} />}\n      </div>\n    ));\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Language')}\n          onBackButtonClick={handleBackClick}\n          className={buildClassName(styles.modalHeader, styles.languageHeader)}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Language')}</span>\n        </div>\n      )}\n      <div className={buildClassName(styles.content, 'custom-scroll')}>\n        <div className={styles.block}>\n          {renderLanguages()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsLanguage);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account, AccountSettings, AccountType, GlobalState } from '../../global/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../config';\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport { getMainAccountAddress } from '../../util/account';\nimport buildClassName from '../../util/buildClassName';\nimport { isKeyCountGreater } from '../../util/isEmptyObject';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  accounts?: Record<string, Account>;\n  canPlaySounds?: boolean;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  pushNotifications: GlobalState['pushNotifications'];\n}\n\nfunction SettingsPushNotifications({\n  isActive,\n  handleBackClick,\n  accounts,\n  canPlaySounds,\n  pushNotifications: {\n    enabledAccounts,\n    isAvailable: arePushNotificationsAvailable,\n  },\n  isInsideModal,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const { toggleNotifications, toggleNotificationAccount, toggleCanPlaySounds } = getActions();\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const arePushNotificationsEnabled = Boolean(Object.keys(enabledAccounts).length);\n  const headerTitle = arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds');\n\n  const handlePushNotificationsToggle = useLastCallback(() => {\n    toggleNotifications({ isEnabled: !arePushNotificationsEnabled });\n  });\n\n  const handleCanPlaySoundToggle = useLastCallback(() => {\n    toggleCanPlaySounds({ isEnabled: !canPlaySounds });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  function renderAccount(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    accountType: AccountType,\n    title?: string,\n  ) {\n    const onClick = !addressByChain.ton ? undefined : () => {\n      toggleNotificationAccount({ accountId });\n    };\n\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n    const address = getMainAccountAddress(addressByChain) ?? '';\n\n    const isDisabled = enabledAccounts\n      && !enabledAccounts[accountId]\n      && isKeyCountGreater(enabledAccounts, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT - 1);\n\n    return (\n      <AccountButton\n        className={buildClassName(\n          styles.account,\n          isDisabled ? styles.accountDisabled : undefined,\n        )}\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        accountType={accountType}\n        withCheckbox\n        isLoading={isDisabled}\n        isActive={Boolean(enabledAccounts && enabledAccounts[accountId])}\n\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        className={styles.settingsBlock}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, type }]) => {\n            return renderAccount(accountId, addressByChain, type, title);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={headerTitle}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{headerTitle}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {arePushNotificationsAvailable && (\n          <>\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handlePushNotificationsToggle}>\n                {lang('Push Notifications')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Push Notifications')}\n                  checked={arePushNotificationsEnabled}\n                />\n              </div>\n            </div>\n            <p className={styles.blockTitle}>{\n              lang(\n                'Select up to %count% wallets for notifications',\n                { count: MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT },\n              )\n            }\n            </p>\n            {renderAccounts()}\n          </>\n        )}\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleCanPlaySoundToggle}>\n            {lang('Play Sounds')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Play Sounds')}\n              checked={canPlaySounds}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  return {\n    accounts,\n    canPlaySounds: global.settings.canPlaySounds,\n    pushNotifications: global.pushNotifications,\n    settingsByAccountId: global.settings.byAccountId,\n  };\n})(SettingsPushNotifications));\n","export var AndroidSettings;\r\n(function (AndroidSettings) {\r\n    /**\r\n     * Show settings for accessibility modules\r\n     */\r\n    AndroidSettings[\"Accessibility\"] = \"accessibility\";\r\n    /**\r\n     * Show add account screen for creating a new account\r\n     */\r\n    AndroidSettings[\"Account\"] = \"account\";\r\n    /**\r\n     * Show settings to allow entering/exiting airplane mode\r\n     */\r\n    AndroidSettings[\"AirplaneMode\"] = \"airplane_mode\";\r\n    /**\r\n     * Show settings to allow configuration of APNs\r\n     */\r\n    AndroidSettings[\"Apn\"] = \"apn\";\r\n    /**\r\n     * Show screen of details about a particular application\r\n     */\r\n    AndroidSettings[\"ApplicationDetails\"] = \"application_details\";\r\n    /**\r\n     * Show settings to allow configuration of application development-related settings\r\n     */\r\n    AndroidSettings[\"ApplicationDevelopment\"] = \"application_development\";\r\n    /**\r\n     * Show settings to allow configuration of application-related settings\r\n     */\r\n    AndroidSettings[\"Application\"] = \"application\";\r\n    /**\r\n     * Show settings to allow configuration of application-specific notifications\r\n     */\r\n    AndroidSettings[\"AppNotification\"] = \"app_notification\";\r\n    /**\r\n     * Show screen for controlling which apps can ignore battery optimizations\r\n     */\r\n    AndroidSettings[\"BatteryOptimization\"] = \"battery_optimization\";\r\n    /**\r\n     * Show settings to allow configuration of Bluetooth\r\n     */\r\n    AndroidSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Show settings for video captioning\r\n     */\r\n    AndroidSettings[\"Captioning\"] = \"captioning\";\r\n    /**\r\n     * Show settings to allow configuration of cast endpoints\r\n     */\r\n    AndroidSettings[\"Cast\"] = \"cast\";\r\n    /**\r\n     * Show settings for selection of 2G/3G/4G\r\n     */\r\n    AndroidSettings[\"DataRoaming\"] = \"data_roaming\";\r\n    /**\r\n     * Show settings to allow configuration of date and time\r\n     */\r\n    AndroidSettings[\"Date\"] = \"date\";\r\n    /**\r\n     * Show settings to allow configuration of display\r\n     */\r\n    AndroidSettings[\"Display\"] = \"display\";\r\n    /**\r\n     * Show Daydream settings\r\n     */\r\n    AndroidSettings[\"Dream\"] = \"dream\";\r\n    /**\r\n     * Show Home selection settings\r\n     */\r\n    AndroidSettings[\"Home\"] = \"home\";\r\n    /**\r\n     *    Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * Show settings to enable/disable input method subtypes\r\n     */\r\n    AndroidSettings[\"KeyboardSubType\"] = \"keyboard_subtype\";\r\n    /**\r\n     * Show settings to allow configuration of locale\r\n     */\r\n    AndroidSettings[\"Locale\"] = \"locale\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    AndroidSettings[\"Location\"] = \"location\";\r\n    /**\r\n     *    Show settings to manage installed applications\r\n     */\r\n    AndroidSettings[\"ManageApplications\"] = \"manage_applications\";\r\n    /**\r\n     * Show settings to manage all applications\r\n     */\r\n    AndroidSettings[\"ManageAllApplications\"] = \"manage_all_applications\";\r\n    /**\r\n     * Show settings for memory card storage\r\n     */\r\n    AndroidSettings[\"MemoryCard\"] = \"memory_card\";\r\n    /**\r\n     * Show settings for selecting the network operator\r\n     */\r\n    AndroidSettings[\"Network\"] = \"network\";\r\n    /**\r\n     * Show NFC Sharing settings\r\n     */\r\n    AndroidSettings[\"NfcSharing\"] = \"nfcsharing\";\r\n    /**\r\n     * Show NFC Tap & Pay settings\r\n     */\r\n    AndroidSettings[\"NfcPayment\"] = \"nfc_payment\";\r\n    /**\r\n     * Show NFC settings\r\n     */\r\n    AndroidSettings[\"NfcSettings\"] = \"nfc_settings\";\r\n    /**\r\n     * Show the top level print settings\r\n     */\r\n    AndroidSettings[\"Print\"] = \"print\";\r\n    /**\r\n     * Show settings to allow configuration of privacy options\r\n     */\r\n    AndroidSettings[\"Privacy\"] = \"privacy\";\r\n    /**\r\n     * Show settings to allow configuration of quick launch shortcuts\r\n     */\r\n    AndroidSettings[\"QuickLaunch\"] = \"quick_launch\";\r\n    /**\r\n     * Show settings for global search\r\n     */\r\n    AndroidSettings[\"Search\"] = \"search\";\r\n    /**\r\n     * Show settings to allow configuration of security and location privacy\r\n     */\r\n    AndroidSettings[\"Security\"] = \"security\";\r\n    /**\r\n     * Show system settings\r\n     */\r\n    AndroidSettings[\"Settings\"] = \"settings\";\r\n    /**\r\n     * Show the regulatory information screen for the device\r\n     */\r\n    AndroidSettings[\"ShowRegulatoryInfo\"] = \"show_regulatory_info\";\r\n    /**\r\n     * Show settings to a llow configuration of sound and volume\r\n     */\r\n    AndroidSettings[\"Sound\"] = \"sound\";\r\n    /**\r\n     * Show settings for internal storage\r\n     */\r\n    AndroidSettings[\"Storage\"] = \"storage\";\r\n    /**\r\n     * Show settings to allow configuration of sync settings\r\n     */\r\n    AndroidSettings[\"Sync\"] = \"sync\";\r\n    /**\r\n     * Show settings to control access to usage information\r\n     */\r\n    AndroidSettings[\"Usage\"] = \"usage\";\r\n    /**\r\n     * Show settings to manage the user input dictionary\r\n     */\r\n    AndroidSettings[\"UserDictionary\"] = \"user_dictionary\";\r\n    /**\r\n     * Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"VoiceInput\"] = \"voice_input\";\r\n    /**\r\n     * Show settings to allow configuration of Wi-Fi\r\n     */\r\n    AndroidSettings[\"Wifi\"] = \"wifi\";\r\n    /**\r\n     * Show settings to allow configuration of a static IP address for Wi-Fi\r\n     */\r\n    AndroidSettings[\"WifiIp\"] = \"wifi_ip\";\r\n    /**\r\n     * Show settings to allow configuration of wireless controls such as Wi-Fi, Bluetooth and Mobile networks\r\n     */\r\n    AndroidSettings[\"Wireless\"] = \"wireless\";\r\n    /**\r\n     * Zen mode settings.\r\n     */\r\n    AndroidSettings[\"ZenMode\"] = \"zen_mode\";\r\n    /**\r\n     * Zen mode priority settings.\r\n     * Note that this may not work on every single device.\r\n     * See: https://github.com/RaphaelWoude/capacitor-native-settings/pull/63\r\n     */\r\n    AndroidSettings[\"ZenModePriority\"] = \"zen_mode_priority\";\r\n    /**\r\n     * Zen mode blocked effects settings.\r\n     * Note that this may not work on every single device.\r\n     * See: https://github.com/RaphaelWoude/capacitor-native-settings/pull/63\r\n     */\r\n    AndroidSettings[\"ZenModeBlockedEffects\"] = \"zen_mode_blocked_effects\";\r\n})(AndroidSettings || (AndroidSettings = {}));\r\nexport var IOSSettings;\r\n(function (IOSSettings) {\r\n    /**\r\n     * Settings > About page\r\n     */\r\n    IOSSettings[\"About\"] = \"about\";\r\n    /**\r\n     * Opens your app-specific settings screen. Note that this is the only officially supported settings screen by Apple.\r\n     */\r\n    IOSSettings[\"App\"] = \"app\";\r\n    /**\r\n     * Opens app-specific notification settings screen for iOS 15.4+; opens general app-specific settings for earlier versions.\"\r\n     */\r\n    IOSSettings[\"AppNotification\"] = \"appNotification\";\r\n    /**\r\n     * Used to set if and when the screen should be automatically locked.\r\n     */\r\n    IOSSettings[\"AutoLock\"] = \"autoLock\";\r\n    /**\r\n     * Bluetooth settings. Allows the users to enable/disable bluetooth and to search for devices.\r\n     */\r\n    IOSSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Date and time settings.\r\n     */\r\n    IOSSettings[\"DateTime\"] = \"dateTime\";\r\n    /**\r\n     * FaceTime settings.\r\n     */\r\n    IOSSettings[\"FaceTime\"] = \"facetime\";\r\n    /**\r\n     * Opens iOS general settings screen.\r\n     */\r\n    IOSSettings[\"General\"] = \"general\";\r\n    /**\r\n     * Keyboard settings.\r\n     */\r\n    IOSSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * iCloud settings.\r\n     */\r\n    IOSSettings[\"ICloud\"] = \"iCloud\";\r\n    /**\r\n     * iCloud Storage and Backup settings.\r\n     */\r\n    IOSSettings[\"ICloudStorageBackup\"] = \"iCloudStorageBackup\";\r\n    /**\r\n     * Language and region settings.\r\n     */\r\n    IOSSettings[\"International\"] = \"international\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    IOSSettings[\"LocationServices\"] = \"locationServices\";\r\n    /**\r\n     * Music settings.\r\n     */\r\n    IOSSettings[\"Music\"] = \"music\";\r\n    /**\r\n     * Notes settings.\r\n     */\r\n    IOSSettings[\"Notes\"] = \"notes\";\r\n    /**\r\n     * Notifications settings.\r\n     */\r\n    IOSSettings[\"Notifications\"] = \"notifications\";\r\n    /**\r\n     * Phone settings.\r\n     */\r\n    IOSSettings[\"Phone\"] = \"phone\";\r\n    /**\r\n     * Photos settings.\r\n     */\r\n    IOSSettings[\"Photos\"] = \"photos\";\r\n    /**\r\n     * Allows the user to manage configuration profiles that are installed on the phone.\r\n     */\r\n    IOSSettings[\"ManagedConfigurationList\"] = \"managedConfigurationList\";\r\n    /**\r\n     * Screen where the user can reset the phone to factory settings.\r\n     */\r\n    IOSSettings[\"Reset\"] = \"reset\";\r\n    /**\r\n     * Ringtone settings.\r\n     */\r\n    IOSSettings[\"Ringtone\"] = \"ringtone\";\r\n    /**\r\n     * Used to set phone volume, vibration settings, etc.\r\n     */\r\n    IOSSettings[\"Sounds\"] = \"sounds\";\r\n    /**\r\n     * Software update screen.\r\n     */\r\n    IOSSettings[\"SoftwareUpdate\"] = \"softwareUpdate\";\r\n    /**\r\n     * Store settings.\r\n     */\r\n    IOSSettings[\"Store\"] = \"store\";\r\n    /**\r\n     * Tracking settings.\r\n     */\r\n    IOSSettings[\"Tracking\"] = \"tracking\";\r\n    /**\r\n     * Wallpaper settings.\r\n     */\r\n    IOSSettings[\"Wallpaper\"] = \"wallpaper\";\r\n    /**\r\n     * WiFi settings.\r\n     */\r\n    IOSSettings[\"WiFi\"] = \"wifi\";\r\n    /**\r\n     * Tethering settings (used to create a hotspot with mobile data).\r\n     */\r\n    IOSSettings[\"Tethering\"] = \"tethering\";\r\n    /**\r\n     * Do Not Disturb settings.\r\n     */\r\n    IOSSettings[\"DoNotDisturb\"] = \"doNotDisturb\";\r\n    /**\r\n     * Touch id passcode settings.\r\n     */\r\n    IOSSettings[\"TouchIdPasscode\"] = \"touchIdPasscode\";\r\n    /**\r\n     * Screen Time settings.\r\n     */\r\n    IOSSettings[\"ScreenTime\"] = \"screenTime\";\r\n    /**\r\n     * Accessibility settings.\r\n     */\r\n    IOSSettings[\"Accessibility\"] = \"accessibility\";\r\n})(IOSSettings || (IOSSettings = {}));\r\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\r\nconst NativeSettings = registerPlugin('NativeSettings', {\r\n    web: () => import('./web').then((m) => new m.NativeSettingsWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { NativeSettings };\r\n//# sourceMappingURL=index.js.map","import React, { memo } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport styles from '../Settings.module.scss';\n\nimport privateKeyImg from '../../../assets/settings/settings_private-key.svg';\nimport secretWordsImg from '../../../assets/settings/settings_secret-words.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  isMultichainAccount: boolean;\n  hasMnemonicWallet?: boolean;\n  onBackClick: () => void;\n  onOpenSecretWordsSafetyRules: () => void;\n  onOpenPrivateKeySafetyRules: () => void;\n  openSettingsSlide: () => void;\n}\n\nfunction Backup({\n  isActive,\n  isInsideModal,\n  isMultichainAccount,\n  hasMnemonicWallet,\n  onBackClick,\n  onOpenSecretWordsSafetyRules,\n  onOpenPrivateKeySafetyRules,\n  openSettingsSlide,\n}: OwnProps) {\n  const lang = useLang();\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          onBackButtonClick={openSettingsSlide}\n          className={styles.modalHeader}\n          withNotch={isScrolled}\n          title={lang('$back_up_security')}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('$back_up_security')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {hasMnemonicWallet && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenSecretWordsSafetyRules}>\n                <img className={styles.menuIcon} src={secretWordsImg} alt={lang('View Secret Words')} />\n                {lang('View Secret Words')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            {isMultichainAccount && (\n              <p className={styles.blockDescription}>\n                {lang('Can be imported to any multichain wallet supporting TON.')}\n              </p>\n            )}\n          </>\n        )}\n\n        {(isMultichainAccount || !hasMnemonicWallet) && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenPrivateKeySafetyRules}>\n                <img className={styles.menuIcon} src={privateKeyImg} alt={lang('View TON Private Key')} />\n                {lang('View TON Private Key')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            <p className={styles.blockDescription}>\n              {lang('Can be imported to non-multichain wallets for TON.')}\n            </p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Backup);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  privateKey?: string;\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  privateKey,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$private_key_description'))}\n      </p>\n      <p className={styles.warning}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <InteractiveTextField\n        noExplorer\n        text={privateKey}\n        copyNotification={lang('Your private key was copied!')}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          className={styles.footerButton}\n          onClick={onSubmit}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"gDO3tqgH\",\"buttonWrapper\":\"SCRKWYe1\",\"footerButton\":\"_xKVE3tH\",\"modalSticker\":\"vnMzCftS\"};","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport PrivateKeyContent from '../../common/backup/PrivateKeyContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isBackupSlideActive?: boolean;\n  isInsideModal?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupPrivateKey({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [privateKey, setPrivateKey] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    async function loadPrivateKey() {\n      if (isBackupSlideActive && enteredPassword) {\n        const privateKeyResult = await callApi('fetchPrivateKey', currentAccountId, enteredPassword);\n\n        setPrivateKey(privateKeyResult);\n      } else {\n        setPrivateKey(undefined);\n      }\n    }\n    void loadPrivateKey();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Private Key')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Private Key')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <PrivateKeyContent\n          isActive={isActive}\n          privateKey={privateKey}\n          buttonText={lang('Close')}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupPrivateKey);\n","import React, { memo, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SafetyRulesContent from '../../common/backup/SafetyRulesContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n  isInsideModal?: boolean;\n  backupType: 'key' | 'words';\n}\n\nfunction BackupSafetyRules({\n  isActive,\n  onBackClick,\n  isInsideModal,\n  onSubmit,\n  backupType,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setWritedownAccepted(false);\n    setOpenWalletAccepted(false);\n    setCanBeStolenAccepted(false);\n    onBackClick();\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Safety Rules')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_one'\n              : '$safety_rules_one',\n          )}\n          textSecond={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_two'\n              : '$safety_rules_two',\n          )}\n          textThird={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_three'\n              : '$safety_rules_three',\n          )}\n          isFirstCheckboxSelected={writedownAccepted}\n          onFirstCheckboxClick={setWritedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSafetyRules);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SecretWordsContent from '../../common/backup/SecretWordsContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isInsideModal?: boolean;\n  isBackupSlideActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupSecretWords({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [mnemonic, setMnemonic] = useState<string[] | undefined>(undefined);\n  const wordsCount = mnemonic?.length || 0;\n\n  useEffect(() => {\n    async function loadMnemonic() {\n      if (isBackupSlideActive && enteredPassword) {\n        const mnemonicResult = await callApi('fetchMnemonic', currentAccountId, enteredPassword);\n\n        setMnemonic(mnemonicResult);\n      } else {\n        setMnemonic(undefined);\n      }\n    }\n    void loadMnemonic();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('%1$d Secret Words', wordsCount) as string}\n          withNotch={isScrolled}\n          className={settingsStyles.modalHeader}\n          onBackButtonClick={onBackClick}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText className={settingsStyles.headerBack} onClick={onBackClick}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={onSubmit}\n          buttonText={lang('Close')}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSecretWords);\n","import { Dialog } from '@capacitor/dialog';\nimport React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport {\n  getIsFaceIdAvailable,\n  getIsNativeBiometricAuthSupported,\n  getIsTouchIdAvailable,\n} from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { getIsTelegramBiometricsRestricted, getTelegramApp } from '../../../util/telegram';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Switcher from '../../ui/Switcher';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from '../Settings.module.scss';\n\nimport biometricsImg from '../../../assets/settings/settings_biometrics.svg';\nimport faceIdImg from '../../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  onEnable: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n}\n\nfunction NativeBiometricsToggle({ isBiometricAuthEnabled, onEnable }: OwnProps & StateProps) {\n  const { disableNativeBiometrics } = getActions();\n  const isFaceId = getIsFaceIdAvailable() || (!getIsNativeBiometricAuthSupported() && IS_IOS);\n  const isTouchId = getIsTouchIdAvailable();\n\n  const lang = useLang();\n  const [isWarningModalOpen, openWarningModal, closeWarningModal] = useFlag();\n  const switcherTitle = isFaceId ? 'Face ID' : (isTouchId ? 'Touch ID' : lang('Biometric Authentication'));\n  const warningTitle = isFaceId\n    ? 'Turn Off Face ID'\n    : (isTouchId ? 'Turn Off Touch ID' : 'Turn Off Biometrics');\n  const warningDescription = isFaceId\n    ? 'Are you sure you want to disable Face ID?'\n    : (isTouchId ? 'Are you sure you want to disable Touch ID?' : 'Are you sure you want to disable biometrics?');\n\n  const icon = isFaceId ? faceIdImg : biometricsImg;\n\n  const handleConfirmDisableBiometrics = useLastCallback(() => {\n    closeWarningModal();\n    disableNativeBiometrics();\n  });\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isWarningModalOpen) {\n      void Dialog.confirm({\n        title: lang(warningTitle),\n        message: lang(warningDescription),\n        okButtonTitle: lang('Yes'),\n        cancelButtonTitle: lang('Cancel'),\n      })\n        .then(({ value }) => {\n          if (value) {\n            handleConfirmDisableBiometrics();\n          }\n        })\n        .finally(closeWarningModal);\n    }\n  }, [handleConfirmDisableBiometrics, isWarningModalOpen, lang, warningDescription, warningTitle]);\n\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (getIsTelegramBiometricsRestricted()) {\n      getTelegramApp()?.BiometricManager.openSettings();\n      return;\n    }\n\n    if (isBiometricAuthEnabled) {\n      openWarningModal();\n    } else {\n      onEnable();\n    }\n  });\n\n  function renderDisableNativeBiometricsWarning() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isWarningModalOpen}\n        title={lang(warningTitle)}\n        onClose={closeWarningModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        <p className={modalStyles.text}>\n          {renderText(lang(warningDescription))}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeWarningModal}>{lang('Cancel')}</Button>\n          <Button onClick={handleConfirmDisableBiometrics}>{lang('Yes')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n        <div className={styles.item} onClick={handleBiometricAuthToggle}>\n          <img className={styles.menuIcon} src={icon} alt=\"\" />\n          {switcherTitle}\n\n          <Switcher\n            className={styles.menuSwitcher}\n            label={switcherTitle}\n            checked={isBiometricAuthEnabled}\n          />\n        </div>\n        {renderDisableNativeBiometricsWarning()}\n      </div>\n      <p className={styles.blockDescription}>{\n        lang('To avoid entering the passcode every time, you can use biometrics.')\n      }\n      </p>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    isBiometricAuthEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsToggle));\n","import { Dialog } from '@capacitor/dialog';\nimport { AndroidSettings, IOSSettings, NativeSettings } from 'capacitor-native-settings';\nimport React, {\n  memo, useEffect, useLayoutEffect, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AutolockValueType } from '../../global/types';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_HUGE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  APP_NAME,\n  AUTO_CONFIRM_DURATION_MINUTES,\n  AUTOLOCK_OPTIONS_LIST,\n  DEFAULT_AUTOLOCK_OPTION,\n  IS_CAPACITOR,\n  PIN_LENGTH,\n} from '../../config';\nimport {\n  selectIsAllowSuspiciousActions,\n  selectIsBiometricAuthEnabled,\n  selectIsMnemonicAccount,\n  selectIsMultichainAccount,\n  selectIsNativeBiometricAuthEnabled,\n  selectIsPasswordPresent,\n} from '../../global/selectors';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../util/authApi/inMemoryPasswordStore';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../util/haptics';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { pause } from '../../util/schedulers';\nimport { getIsTelegramBiometricsRestricted } from '../../util/telegram';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED, IS_ELECTRON, IS_IOS, IS_IOS_APP,\n} from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Collapsible from '../ui/Collapsible';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\nimport Dropdown, { type DropdownItem } from '../ui/Dropdown';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport PinPad from '../ui/PinPad';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Backup from './backup/Backup';\nimport BackupPrivateKey from './backup/BackupPrivateKey';\nimport BackupSafetyRules from './backup/BackupSafetyRules';\nimport BackupSecretWords from './backup/BackupSecretWords';\nimport NativeBiometricsToggle from './biometrics/NativeBiometricsToggle';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport biometricsImg from '../../assets/settings/settings_biometrics.svg';\nimport backupImg from '../../assets/settings/settings_install-app.svg';\n\nexport const enum SLIDES {\n  password,\n  settings,\n  newPassword,\n  createNewPin,\n  confirmNewPin,\n  passwordChanged,\n  backup,\n  safetyRules,\n  privateKey,\n  secretWords,\n}\n\nconst SWITCH_CONFIRM_PASSCODE_PAUSE_MS = 500;\nconst CHANGE_PASSWORD_PAUSE_MS = 1500;\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n  isAutoUpdateEnabled: boolean;\n  onAutoUpdateEnabledToggle: VoidFunction;\n  onSettingsClose: VoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  isPasswordNumeric?: boolean;\n  isPasswordPresent: boolean;\n  isMultichainAccount: boolean;\n  isAppLockEnabled?: boolean;\n  autolockValue?: AutolockValueType;\n  isAutoConfirmEnabled?: boolean;\n  isAllowSuspiciousActions?: boolean;\n  shouldShowBackup: boolean;\n  isLoading?: boolean;\n  currentAccountId: string;\n}\n\nconst INITIAL_CHANGE_PASSWORD_SLIDE = getDoesUsePinPad() ? SLIDES.createNewPin : SLIDES.newPassword;\n\nfunction SettingsSecurity({\n  isActive,\n  handleBackClick: navigateBackToSettings,\n  isInsideModal,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  isPasswordNumeric,\n  isPasswordPresent,\n  isMultichainAccount,\n  isAppLockEnabled,\n  autolockValue = DEFAULT_AUTOLOCK_OPTION,\n  isAutoConfirmEnabled,\n  isAllowSuspiciousActions,\n  isAutoUpdateEnabled,\n  currentAccountId,\n  onSettingsClose,\n  onAutoUpdateEnabledToggle,\n  isLoading,\n  shouldShowBackup,\n}: OwnProps & StateProps) {\n  const {\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    disableNativeBiometrics,\n    enableNativeBiometrics,\n    openBiometricsTurnOffWarning,\n    openBiometricsTurnOn,\n    setSettingsState,\n    setAppLockValue,\n    setIsAutoConfirmEnabled,\n    setIsAllowSuspiciousActions,\n    setIsAuthLoading,\n    setInMemoryPassword,\n  } = getActions();\n\n  const lang = useLang();\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.password);\n  const previousSlide = usePrevious(currentSlide);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.settings);\n  const [passwordError, setPasswordError] = useState<string>();\n  const [password, setPassword] = useState<string>();\n  const [backupType, setBackupType] = useState<'key' | 'words' | undefined>(undefined);\n  const [hasMnemonicWallet, setHasMnemonicWallet] = useState<boolean>(false);\n\n  // For Capacitor only\n  const [pinValue, setPinValue] = useState<string>('');\n  const [confirmPinValue, setConfirmPinValue] = useState<string>('');\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const cleanup = useLastCallback((shouldKeepCurrentPassword?: boolean) => {\n    if (!shouldKeepCurrentPassword) setPassword(undefined);\n    setPinValue('');\n    setConfirmPinValue('');\n    clearPasswordError();\n    clearIsPinAccepted();\n  });\n\n  const handleBackToSettingsClick = useLastCallback(() => {\n    navigateBackToSettings();\n    cleanup();\n  });\n\n  const openConfirmNewPinSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.confirmNewPin);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openSettingsSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.settings);\n    setNextKey(undefined);\n    cleanup(true);\n  });\n\n  const openBackupPage = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      openSettingsSlide();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    setNextKey(SLIDES.safetyRules);\n  });\n\n  const openNewPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(INITIAL_CHANGE_PASSWORD_SLIDE);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openPasswordChangedSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.passwordChanged);\n    setNextKey(SLIDES.settings);\n  });\n\n  useLayoutEffect(() => {\n    if (password === undefined && isActive) setCurrentSlide(SLIDES.password);\n    else if (!isActive) cleanup();\n  }, [password, isActive]);\n\n  useHistoryBack({ isActive, onBack: handleBackToSettingsClick });\n\n  const handlePasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    const result = await callApi('verifyPassword', enteredPassword);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    openSettingsSlide();\n    setPassword(enteredPassword);\n  });\n\n  const handleNewPasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    await callApi('changePassword', password!, enteredPassword);\n    setIsAuthLoading({ isLoading: true });\n    setPassword(enteredPassword);\n    setInMemoryPassword({ password: enteredPassword });\n    if (isNativeBiometricAuthEnabled) {\n      disableNativeBiometrics();\n      enableNativeBiometrics({ password: enteredPassword });\n    }\n    if (getDoesUsePinPad()) {\n      openSettingsSlide();\n    } else {\n      openPasswordChangedSlide();\n    }\n    setIsAuthLoading({ isLoading: undefined });\n  });\n\n  const handlePinSubmit = useLastCallback(async (enteredPassword: string) => {\n    setPinValue(enteredPassword);\n    await vibrateOnSuccess(true);\n    await pause(SWITCH_CONFIRM_PASSCODE_PAUSE_MS);\n    openConfirmNewPinSlide();\n  });\n\n  const handleConfirmPinSubmit = useLastCallback(async (enteredPassword: string) => {\n    if (enteredPassword === pinValue) {\n      setPasswordError(lang('New code set successfully'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      await handleNewPasswordSubmit(enteredPassword);\n    } else {\n      setPasswordError(lang('Codes dont match'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      cleanup(true);\n      setCurrentSlide(SLIDES.createNewPin);\n    }\n  });\n\n  const handleChangePasswordClick = useLastCallback(() => {\n    setNextKey(INITIAL_CHANGE_PASSWORD_SLIDE);\n    openNewPasswordSlide();\n  });\n\n  const handleOpenPrivateKeySafetyRules = useLastCallback(() => {\n    setBackupType('key');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.privateKey);\n  });\n\n  const handleOpenSecretWordsSafetyRules = useLastCallback(() => {\n    setBackupType('words');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.secretWords);\n  });\n\n  const handleOpenBackupWallet = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      if (hasMnemonicWallet) handleOpenSecretWordsSafetyRules();\n      else handleOpenPrivateKeySafetyRules();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    // Resetting next key to undefined unmounts and destroys components with mnemonic and private key\n    setNextKey(undefined);\n  });\n\n  const handleOpenPrivateKey = useLastCallback(() => {\n    setCurrentSlide(SLIDES.privateKey);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleOpenSecretWords = useLastCallback(() => {\n    setCurrentSlide(SLIDES.secretWords);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleAppLockToggle = useLastCallback(() => {\n    setAppLockValue({ value: autolockValue, isEnabled: !isAppLockEnabled });\n  });\n\n  const handleAutolockChange = useLastCallback((value: AutolockValueType) => {\n    setAppLockValue({ value, isEnabled: true });\n  });\n\n  const handleAutoConfirmToggle = useLastCallback(() => {\n    setIsAutoConfirmEnabled({ isEnabled: !isAutoConfirmEnabled });\n  });\n\n  const handleAllowSuspiciousActionsToggle = useLastCallback(() => {\n    setIsAllowSuspiciousActions({ isEnabled: !isAllowSuspiciousActions });\n  });\n\n  // Biometrics\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (isBiometricAuthEnabled) {\n      openBiometricsTurnOffWarning();\n    } else {\n      openBiometricsTurnOn();\n    }\n  });\n  const handleNativeBiometricsTurnOnOpen = useLastCallback(async () => {\n    if (getIsNativeBiometricAuthSupported()) {\n      setSettingsState({ state: SettingsState.NativeBiometricsTurnOn });\n      return;\n    }\n\n    const warningDescription = IS_IOS\n      ? 'To use this feature, first enable Face ID in your phone settings.'\n      : 'To use this feature, first enable biometrics in your phone settings.';\n\n    const { value } = await Dialog.confirm({\n      title: lang('Warning!'),\n      message: lang(warningDescription),\n      okButtonTitle: lang('Open Settings'),\n      cancelButtonTitle: lang('Cancel'),\n    });\n    if (value) {\n      await NativeSettings.open({\n        optionAndroid: AndroidSettings.ApplicationDetails,\n        optionIOS: IOSSettings.App,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (!password) return;\n\n    void callApi('fetchMnemonic', currentAccountId, password).then((mnemonic) => {\n      setHasMnemonicWallet(Boolean(mnemonic && !isMnemonicPrivateKey(mnemonic)));\n    });\n  }, [hasMnemonicWallet, currentAccountId, password]);\n\n  // The `getIsTelegramBiometricsRestricted` case is required to display a toggle switch.\n  // When activated, it will show a warning to the user indicating that they need to grant\n  // the appropriate permissions for biometric authentication to function properly.\n  const shouldRenderNativeBiometrics = isPasswordPresent\n    && (getIsNativeBiometricAuthSupported() || IS_IOS_APP || getIsTelegramBiometricsRestricted());\n  const shouldRenderMinifiedPinPad = isInsideModal && getDoesUsePinPad();\n\n  const isAutoConfirmAvailable = !isBiometricAuthEnabled;\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Security')}\n            withNotch={isScrolled}\n            onBackButtonClick={handleBackToSettingsClick}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Security')}</span>\n          </div>\n        )}\n        <div\n          className={buildClassName(styles.content, 'custom-scroll')}\n          onScroll={handleContentScroll}\n        >\n          {shouldShowBackup && (\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item)} onClick={handleOpenBackupWallet}>\n                <img className={styles.menuIcon} src={backupImg} alt={lang('$back_up_security')} />\n                {lang('$back_up_security')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {shouldRenderNativeBiometrics && (\n            <NativeBiometricsToggle\n              onEnable={handleNativeBiometricsTurnOnOpen}\n            />\n          )}\n          {isPasswordPresent && IS_BIOMETRIC_AUTH_SUPPORTED && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={styles.item} onClick={handleBiometricAuthToggle}>\n                  <img className={styles.menuIcon} src={biometricsImg} alt={lang('Biometric Authentication')} />\n                  {lang('Biometric Authentication')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Biometric Authentication')}\n                    checked={isBiometricAuthEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>{\n                lang('To avoid entering the passcode every time, you can use biometrics.')\n              }\n              </p>\n            </>\n          )}\n\n          {!(isBiometricAuthEnabled && !isNativeBiometricAuthEnabled) && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <Button\n                  className={styles.changePasswordButton}\n                  isSimple\n                  onClick={handleChangePasswordClick}\n                >\n                  {isPasswordNumeric ? lang('Change Passcode') : lang('Change Password')}\n                </Button>\n              </div>\n              <p className={styles.blockDescription}>{lang('The passcode will be changed for all your wallets.')}</p>\n            </>\n          )}\n\n          {isPasswordPresent && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.itemSmall)} onClick={handleAppLockToggle}>\n                  {lang('App Lock')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Allow App Lock')}\n                    checked={isAppLockEnabled}\n                  />\n                </div>\n                <Collapsible isShown={!!isAppLockEnabled}>\n                  <Dropdown\n                    label={lang('Auto-Lock')}\n                    items={AUTOLOCK_OPTIONS_LIST as unknown as DropdownItem<AutolockValueType>[]}\n                    selectedValue={autolockValue}\n                    theme=\"light\"\n                    shouldTranslateOptions\n                    className={buildClassName(styles.item, styles.item_small, styles.itemAutoLock)}\n                    onChange={handleAutolockChange}\n                  />\n                </Collapsible>\n              </div>\n              <p className={styles.blockDescription}>{lang('$app_lock_description', { app_name: APP_NAME })}</p>\n            </>\n          )}\n\n          {isPasswordPresent && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div\n                  className={buildClassName(\n                    styles.item,\n                    styles.itemSmall,\n                    !isAutoConfirmAvailable && styles.itemDisabled,\n                  )}\n                  onClick={isAutoConfirmAvailable ? handleAutoConfirmToggle : undefined}\n                >\n                  {isPasswordNumeric ? lang('Remember Passcode') : lang('Remember Password')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={isPasswordNumeric ? lang('Remember Passcode') : lang('Remember Password')}\n                    checked={isAutoConfirmAvailable && isAutoConfirmEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>\n                {\n                  lang(\n                    'App will not ask for signature for %1$d minutes after last entry.',\n                    AUTO_CONFIRM_DURATION_MINUTES,\n                  )\n                }\n                {!isAutoConfirmAvailable && ` ${lang('Not available with biometrics.')}`}\n              </p>\n            </>\n          )}\n\n          {IS_ELECTRON && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.item_small)} onClick={onAutoUpdateEnabledToggle}>\n                  {lang('Auto-Updates')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Auto-Updates')}\n                    checked={isAutoUpdateEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>\n                {lang('Turn this off so you can manually download updates and verify signatures.')}\n              </p>\n            </>\n          )}\n\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div\n                className={buildClassName(styles.item, styles.itemSmall)}\n                onClick={handleAllowSuspiciousActionsToggle}\n              >\n                {lang('Allow Suspicious Actions')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Allow Suspicious Actions')}\n                  checked={isAllowSuspiciousActions}\n                />\n              </div>\n            </div>\n            <p className={styles.blockDescription}>\n              {lang('$allow_suspicious_actions_description')}\n            </p>\n          </>\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.settings:\n        return renderSettings();\n      case SLIDES.password:\n        if (getHasInMemoryPassword()) {\n          setCurrentSlide(SLIDES.settings);\n          void getInMemoryPassword().then((memoizedPassword) => setPassword(memoizedPassword));\n\n          return undefined;\n        }\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={isPasswordNumeric ? lang('Confirm Passcode') : lang('Confirm Password')}\n                onBackButtonClick={handleBackToSettingsClick}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Enter Password')}</span>\n              </div>\n            )}\n            <PasswordForm\n              isActive={isSlideActive && isActive}\n              error={passwordError}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              forceBiometricsInMain={!isInsideModal}\n              placeholder={lang('Enter your current password')}\n              submitLabel={lang('Continue')}\n              onCancel={handleBackToSettingsClick}\n              onSubmit={handlePasswordSubmit}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n      case SLIDES.newPassword:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Change Password')}\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Change Password')}</span>\n              </div>\n            )}\n            <div className={buildClassName(\n              modalStyles.transitionContent,\n              styles.content,\n              isInsideModal && styles.contentInModal,\n            )}\n            >\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isSlideActive}\n                size={ANIMATED_STICKER_BIG_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isSlideActive}\n                isLoading={isLoading}\n                onSubmit={handleNewPasswordSubmit}\n                onCancel={openSettingsSlide}\n                formId=\"auth-create-password\"\n              />\n            </div>\n          </>\n        );\n      case SLIDES.createNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && lang('Change Passcode')}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {!shouldRenderMinifiedPinPad && <div className={styles.pinPadTitle}>{lang('Change Passcode')}</div>}\n            </div>\n            <PinPad\n              isActive={isActive}\n              title={lang('Enter your new code')}\n              length={PIN_LENGTH}\n              value={pinValue}\n              onChange={setPinValue}\n              onSubmit={handlePinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.confirmNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && (\n                  passwordError && pinValue === confirmPinValue\n                    ? lang('Passcode Changed!')\n                    : lang('Change Passcode')\n                )}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {\n                !shouldRenderMinifiedPinPad && (\n                  <div className={styles.pinPadTitle}>\n                    {\n                      passwordError && pinValue === confirmPinValue\n                        ? lang('Passcode Changed!')\n                        : lang('Change Passcode')\n                    }\n                  </div>\n                )\n              }\n            </div>\n\n            <PinPad\n              isActive={isActive}\n              title={!passwordError ? lang('Re-enter your new code') : passwordError}\n              type={passwordError ? (pinValue === confirmPinValue ? 'success' : 'error') : undefined}\n              length={PIN_LENGTH}\n              value={confirmPinValue}\n              onChange={setConfirmPinValue}\n              onSubmit={handleConfirmPinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.passwordChanged:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Password Changed!')}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={buildClassName(styles.header, styles.onlyTextHeader)}>\n                <span className={styles.headerTitle}>{lang('Password Changed!')}</span>\n              </div>\n            )}\n            <div className={styles.content}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={openSettingsSlide} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n      case SLIDES.backup:\n        return (\n          <Backup\n            isActive={isActive && isSlideActive}\n            isMultichainAccount={isMultichainAccount}\n            openSettingsSlide={openSettingsSlide}\n            isInsideModal={isInsideModal}\n            onOpenPrivateKeySafetyRules={handleOpenPrivateKeySafetyRules}\n            onOpenSecretWordsSafetyRules={handleOpenSecretWordsSafetyRules}\n            onBackClick={handleBackToSettingsClick}\n            hasMnemonicWallet={hasMnemonicWallet}\n          />\n        );\n      case SLIDES.safetyRules:\n        return (\n          <BackupSafetyRules\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            backupType={backupType!}\n            onBackClick={openBackupPage}\n            onSubmit={\n              backupType === 'key'\n                ? handleOpenPrivateKey\n                : handleOpenSecretWords\n            }\n          />\n        );\n      case SLIDES.secretWords:\n        return (\n          <BackupSecretWords\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.secretWords || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n      case SLIDES.privateKey:\n        return (\n          <BackupPrivateKey\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.privateKey || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Transition\n      direction={previousSlide === SLIDES.password && currentSlide === SLIDES.settings ? 1 : 'auto'}\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(styles.slide, isInsideModal && modalStyles.transitionSlide)}\n      activeKey={currentSlide}\n      nextKey={nextKey}\n      shouldCleanup\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isPasswordNumeric, autolockValue, isAppLockEnabled, isAutoConfirmEnabled,\n  } = global.settings;\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const isAllowSuspiciousActions = selectIsAllowSuspiciousActions(global, global.currentAccountId!);\n  const isMultichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n  const isMnemonicAccount = selectIsMnemonicAccount(global);\n\n  return {\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    isMultichainAccount,\n    isPasswordNumeric,\n    isPasswordPresent,\n    isAppLockEnabled,\n    autolockValue,\n    isAutoConfirmEnabled,\n    isAllowSuspiciousActions,\n    shouldShowBackup: isMnemonicAccount,\n    isLoading: global.auth.isLoading,\n    currentAccountId: global.currentAccountId!,\n  };\n})(SettingsSecurity));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TokenSelector from '../common/TokenSelector';\nimport Button from '../ui/Button';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\nfunction SettingsTokenList({\n  isActive,\n  isInsideModal,\n  handleBackClick,\n}: OwnProps) {\n  const { addToken } = getActions();\n\n  const lang = useLang();\n\n  const handleTokenSelect = useLastCallback((token: UserToken | UserSwapToken) => {\n    addToken({ token: token as UserToken });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  function renderHeader() {\n    return (\n      <div className={buildClassName(styles.header, isInsideModal && styles.headerInsideModal)}>\n        <Button\n          isSimple\n          isText\n          className={buildClassName(styles.headerBack, isInsideModal && styles.isInsideModal)}\n          onClick={handleBackClick}\n        >\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n        <span className={styles.headerTitle}>{lang('Select Token')}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.slide, styles.withTopSpace)}>\n      <TokenSelector\n        isActive={isActive}\n        shouldHideMyTokens\n        shouldHideNotSupportedTokens\n        header={renderHeader()}\n        onTokenSelect={handleTokenSelect}\n        onBack={handleBackClick}\n        onClose={handleBackClick}\n      />\n    </div>\n  );\n}\n\nexport default memo(SettingsTokenList);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nexport interface Wallet {\n  address: string;\n  version: ApiTonWalletVersion;\n  totalBalance: string;\n  tokens: string[];\n}\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n  wallets?: Wallet[];\n  currentVersion?: ApiTonWalletVersion;\n}\n\nfunction SettingsWalletVersion({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  currentVersion,\n  wallets,\n}: OwnProps) {\n  const {\n    closeSettings,\n    importAccountByVersion,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleAddWallet = useLastCallback((version: ApiTonWalletVersion) => {\n    closeSettings();\n    importAccountByVersion({ version });\n  });\n\n  function renderWallets() {\n    return wallets?.map((v) => {\n      return (\n        <div\n          key={v.address}\n          className={buildClassName(styles.item, styles.item_wallet_version)}\n          onClick={() => handleAddWallet(v.version)}\n        >\n          <div className={styles.walletVersionInfo}>\n            <span className={styles.walletVersionTitle}>{v.version}</span>\n            <span className={styles.walletVersionAddress}>{shortenAddress(v.address)}</span>\n          </div>\n          <div className={styles.walletVersionInfoRight}>\n            <span className={styles.walletVersionTokens}>\n              {v.tokens.join(', ')}\n            </span>\n            <span className={styles.walletVersionAmount}>\n              &thinsp;{v.totalBalance}\n            </span>\n          </div>\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      );\n    });\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Wallet Versions')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Wallet Versions')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <div className={styles.blockWalletVersionText}>\n          <span>{lang('$current_wallet_version', { version: <strong>{currentVersion}</strong> })}</span>\n          <span>{lang('You have tokens on other versions of your wallet. You can import them from here.')}</span>\n        </div>\n        <div className={styles.block}>\n          {renderWallets()}\n        </div>\n        <div className={styles.blockWalletVersionReadMore}>\n          {lang('$read_more_about_wallet_version', {\n            ton_link: (\n              <a href=\"https://docs.ton.org/participate/wallets/contracts\" target=\"_blank\" rel=\"noreferrer\">\n                ton.org\n              </a>\n            ),\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsWalletVersion);\n","import React, { memo, useEffect, useMemo, useRef, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\nimport type { ApiDapp, ApiWalletWithVersionInfo } from '../../api/types';\nimport type { Account, GlobalState, UserToken } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\nimport type { Wallet } from './SettingsWalletVersion';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER,\n  APP_NAME,\n  APP_VERSION,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  IS_EXTENSION,\n  LANG_LIST,\n  MTW_CARDS_WEBSITE,\n  MTW_TIPS_CHANNEL_NAME,\n  PROXY_HOSTS,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  SUPPORT_USERNAME,\n  TELEGRAM_WEB_URL,\n  TONCOIN,\n} from '../../config';\nimport { getHelpCenterUrl } from '../../global/helpers/getHelpCenterUrl';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n  selectIsPasswordPresent,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { openUrl } from '../../util/openUrl';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport useTelegramMiniAppSwipeToClose from '../../util/telegram/hooks/useTelegramMiniAppSwipeToClose';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DAPP_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_LEDGER_SUPPORTED,\n  IS_TOUCH_ENV,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../ledger/LedgerSelectWallets';\nimport LogOutModal from '../main/modals/LogOutModal';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Biometrics from './biometrics/Biometrics';\nimport SettingsNativeBiometricsTurnOn from './biometrics/NativeBiometricsTurnOn';\nimport SettingsAbout from './SettingsAbout';\nimport SettingsAppearance from './SettingsAppearance';\nimport SettingsAssets from './SettingsAssets';\nimport SettingsDapps from './SettingsDapps';\nimport SettingsDeveloperOptions from './SettingsDeveloperOptions';\nimport SettingsDisclaimer from './SettingsDisclaimer';\nimport SettingsHiddenNfts from './SettingsHiddenNfts';\nimport SettingsLanguage from './SettingsLanguage';\nimport SettingsPushNotifications from './SettingsPushNotifications';\nimport SettingsSecurity from './SettingsSecurity';\nimport SettingsTokenList from './SettingsTokenList';\nimport SettingsWalletVersion from './SettingsWalletVersion';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport aboutImg from '../../assets/settings/settings_about.svg';\nimport appearanceImg from '../../assets/settings/settings_appearance.svg';\nimport assetsActivityImg from '../../assets/settings/settings_assets-activity.svg';\nimport connectedDappsImg from '../../assets/settings/settings_connected-dapps.svg';\nimport disclaimerImg from '../../assets/settings/settings_disclaimer.svg';\nimport exitImg from '../../assets/settings/settings_exit.svg';\nimport helpcenterImg from '../../assets/settings/settings_helpcenter.svg';\nimport installAppImg from '../../assets/settings/settings_install-app.svg';\nimport installDesktopImg from '../../assets/settings/settings_install-desktop.svg';\nimport installMobileImg from '../../assets/settings/settings_install-mobile.svg';\nimport languageImg from '../../assets/settings/settings_language.svg';\nimport ledgerImg from '../../assets/settings/settings_ledger.svg';\nimport mtwCardsImg from '../../assets/settings/settings_mtw-cards.svg';\nimport upgradeImg from '../../assets/settings/settings_mytonwallet.svg';\nimport notifications from '../../assets/settings/settings_notifications.svg';\nimport securityImg from '../../assets/settings/settings_security.svg';\nimport supportImg from '../../assets/settings/settings_support.svg';\nimport telegramImg from '../../assets/settings/settings_telegram-menu.svg';\nimport tipsImg from '../../assets/settings/settings_tips.svg';\nimport tonLinksImg from '../../assets/settings/settings_ton-links.svg';\nimport tonMagicImg from '../../assets/settings/settings_ton-magic.svg';\nimport tonProxyImg from '../../assets/settings/settings_ton-proxy.svg';\nimport walletVersionImg from '../../assets/settings/settings_wallet-version.svg';\n\ntype OwnProps = {\n  isActive: boolean;\n  isInsideModal?: boolean;\n};\n\ntype StateProps = {\n  settings: GlobalState['settings'];\n  dapps: ApiDapp[];\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isPasswordPresent?: boolean;\n  currentVersion?: ApiTonWalletVersion;\n  versions?: ApiWalletWithVersionInfo[];\n  isCopyStorageEnabled?: boolean;\n  supportAccountsCount?: number;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  arePushNotificationsAvailable?: boolean;\n  isNftBuyingDisabled?: boolean;\n  isViewMode: boolean;\n};\n\nconst AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE = 5;\nconst SUPPORT_ACCOUNTS_COUNT_DEFAULT = 1;\n\nfunction Settings({\n  settings: {\n    state,\n    theme,\n    animationLevel,\n    isTestnet,\n    langCode,\n    isTonProxyEnabled,\n    isTonMagicEnabled,\n    isDeeplinkHookEnabled,\n    baseCurrency,\n  },\n  dapps,\n  isActive,\n  isOpen = false,\n  tokens,\n  isInsideModal,\n  isPasswordPresent,\n  currentVersion,\n  versions,\n  isCopyStorageEnabled,\n  supportAccountsCount = SUPPORT_ACCOUNTS_COUNT_DEFAULT,\n  accounts,\n  hardwareWallets,\n  arePushNotificationsAvailable,\n  isNftBuyingDisabled,\n  isViewMode,\n}: OwnProps & StateProps) {\n  const {\n    setSettingsState,\n    openSettingsHardwareWallet,\n    closeSettings,\n    toggleDeeplinkHook,\n    toggleTonProxy,\n    toggleTonMagic,\n    getDapps,\n    clearIsPinAccepted,\n    afterSelectHardwareWallets,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const transitionRef = useRef<HTMLDivElement>();\n  const { renderingKey } = useModalTransitionKeys(state, isOpen);\n  const { disableSwipeToClose, enableSwipeToClose } = useTelegramMiniAppSwipeToClose(isOpen);\n  const [clicksAmount, setClicksAmount] = useState<number>(isTestnet ? AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE : 0);\n  const prevRenderingKeyRef = useStateRef(usePrevious2(renderingKey));\n\n  const [isDeveloperModalOpen, openDeveloperModal, closeDeveloperModal] = useFlag();\n  const [withAllWalletVersions, markWithAllWalletVersions] = useFlag();\n\n  const [isLogOutModalOpened, openLogOutModal, closeLogOutModal] = useFlag();\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n  const isInitialScreen = renderingKey === SettingsState.Initial;\n\n  const activeLang = useMemo(() => LANG_LIST.find((l) => l.langCode === langCode), [langCode]);\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n\n  const wallets = useMemo(() => {\n    return versions\n      ?.filter((v) => v.lastTxId || v.version === 'W5' || withAllWalletVersions)\n      ?.map((v) => {\n        const tonBalance = formatCurrency(toDecimal(v.balance), tonToken?.symbol ?? '');\n        const balanceInCurrency = formatCurrency(\n          toBig(v.balance).mul(tonToken?.price ?? 0).round(tonToken?.decimals),\n          shortBaseSymbol,\n        );\n\n        const accountTokens = [tonBalance];\n\n        return {\n          address: v.address,\n          version: v.version,\n          totalBalance: balanceInCurrency,\n          tokens: accountTokens,\n        } satisfies Wallet;\n      }) ?? [];\n  }, [shortBaseSymbol, tonToken, versions, withAllWalletVersions]);\n\n  const {\n    shouldRender: isTelegramLinkRendered,\n    ref: telegramLinkRef,\n  } = useShowTransition({\n    isOpen: isTonMagicEnabled,\n    withShouldRender: true,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleSlideAnimationStop = useLastCallback(() => {\n    if (prevRenderingKeyRef.current === SettingsState.NativeBiometricsTurnOn) {\n      clearIsPinAccepted();\n    }\n  });\n\n  const handleCloseSettings = useLastCallback(() => {\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n    setSettingsState({ state: SettingsState.Initial });\n  });\n\n  useHistoryBack({\n    isActive: isActive && isInitialScreen,\n    onBack: handleCloseSettings,\n    shouldIgnoreForTelegram: isInsideModal,\n  });\n\n  useHideBottomBar(isOpen && !isInitialScreen);\n\n  const handlCloseDeveloperModal = useLastCallback(() => {\n    closeDeveloperModal();\n\n    if (IS_CORE_WALLET) {\n      handleCloseSettings();\n    }\n  });\n\n  const handleConnectedDappsOpen = useLastCallback(() => {\n    getDapps();\n    setSettingsState({ state: SettingsState.Dapps });\n  });\n\n  function handleAppearanceOpen() {\n    setSettingsState({ state: SettingsState.Appearance });\n  }\n\n  function handlePushNotificationsOpen() {\n    setSettingsState({ state: SettingsState.PushNotifications });\n  }\n\n  function handleSecurityOpen() {\n    setSettingsState({ state: SettingsState.Security });\n  }\n\n  function handleAssetsOpen() {\n    setSettingsState({ state: SettingsState.Assets });\n  }\n\n  function handleLanguageOpen() {\n    setSettingsState({ state: SettingsState.Language });\n  }\n\n  function handleAboutOpen() {\n    setSettingsState({ state: SettingsState.About });\n  }\n\n  function handleDisclaimerOpen() {\n    setSettingsState({ state: SettingsState.Disclaimer });\n  }\n\n  const handleBackClick = useLastCallback(() => {\n    switch (renderingKey as SettingsState) {\n      case SettingsState.HiddenNfts:\n      case SettingsState.SelectTokenList:\n        setSettingsState({ state: SettingsState.Assets });\n        break;\n\n      default:\n        setSettingsState({ state: SettingsState.Initial });\n    }\n  });\n\n  const handleBackClickToAssets = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.Assets });\n  });\n\n  const handleOpenWalletVersion = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.WalletVersion });\n  });\n\n  const handleDeeplinkHookToggle = useLastCallback(() => {\n    toggleDeeplinkHook({ isEnabled: !isDeeplinkHookEnabled });\n  });\n\n  const handleTonProxyToggle = useLastCallback(() => {\n    toggleTonProxy({ isEnabled: !isTonProxyEnabled });\n  });\n\n  const handleTonMagicToggle = useLastCallback(() => {\n    toggleTonMagic({ isEnabled: !isTonMagicEnabled });\n  });\n\n  function handleClickInstallApp() {\n    void openUrl('https://mytonwallet.io/get', { isExternal: true });\n  }\n\n  function handleClickInstallOnDesktop() {\n    void openUrl('https://mytonwallet.io/get/desktop', { isExternal: true });\n  }\n\n  function handleClickInstallOnMobile() {\n    void openUrl('https://mytonwallet.io/get/mobile', { isExternal: true });\n  }\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    handleCloseSettings();\n  });\n\n  const handleLedgerConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setSettingsState({ state: SettingsState.LedgerSelectWallets });\n  });\n\n  const [isTrayIconEnabled, setIsTrayIconEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsTrayIconEnabled().then(setIsTrayIconEnabled);\n  }, []);\n\n  const handleTrayIconEnabledToggle = useLastCallback(() => {\n    setIsTrayIconEnabled(!isTrayIconEnabled);\n    void window.electron?.setIsTrayIconEnabled(!isTrayIconEnabled);\n  });\n\n  const [isAutoUpdateEnabled, setIsAutoUpdateEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsAutoUpdateEnabled);\n  }, []);\n\n  const handleAutoUpdateEnabledToggle = useLastCallback(() => {\n    setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n    void window.electron?.setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n  });\n\n  const handleBackOrCloseAction = useLastCallback(() => {\n    if (isInitialScreen) {\n      if (isInsideModal) handleCloseSettings();\n    } else {\n      handleBackClick();\n    }\n  });\n\n  const handleCloseLogOutModal = useLastCallback((shouldCloseSettings: boolean) => {\n    closeLogOutModal();\n    if (shouldCloseSettings) {\n      handleCloseSettings();\n    }\n  });\n\n  function handleOpenHardwareModal() {\n    openSettingsHardwareWallet();\n  }\n\n  const handleMultipleClick = () => {\n    if (clicksAmount + 1 >= AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE) {\n      openDeveloperModal();\n    } else {\n      setClicksAmount(clicksAmount + 1);\n    }\n  };\n\n  const handleShowAllWalletVersions = useLastCallback(() => {\n    markWithAllWalletVersions();\n    handlCloseDeveloperModal();\n    handleOpenWalletVersion();\n  });\n\n  useEffect(\n    () => captureEscKeyListener(isInsideModal ? handleBackOrCloseAction : handleBackClick),\n    [isInsideModal],\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: () => {\n        if (IS_DELEGATED_BOTTOM_SHEET) {\n          handleBackClick();\n        } else {\n          handleBackOrCloseAction();\n        }\n\n        disableSwipeToClose();\n      },\n      onCancel: () => {\n        setSettingsState({ state: prevRenderingKeyRef.current! });\n\n        enableSwipeToClose();\n      },\n    });\n  }, [disableSwipeToClose, enableSwipeToClose, prevRenderingKeyRef]);\n\n  function renderHandleDeeplinkButton() {\n    return (\n      <div className={styles.item} onClick={handleDeeplinkHookToggle}>\n        <img className={styles.menuIcon} src={tonLinksImg} alt={lang('Handle ton:// links')} />\n        {lang('Handle ton:// links')}\n\n        <Switcher\n          className={styles.menuSwitcher}\n          label={lang('Handle ton:// links')}\n          checked={isDeeplinkHookEnabled}\n        />\n      </div>\n    );\n  }\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Settings')}\n            withNotch={isScrolled}\n            onClose={!isPortrait ? handleCloseSettings : undefined}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button\n              isSimple\n              isText\n              onClick={handleCloseSettings}\n              className={buildClassName(styles.headerBack, isPortrait && styles.hidden)}\n            >\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Settings')}</span>\n          </div>\n        )}\n\n        <div\n          className={buildClassName(styles.content, 'custom-scroll', styles.withBottomSpace)}\n          onScroll={handleContentScroll}\n        >\n          {IS_CORE_WALLET && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={upgradeImg} alt={lang('Upgrade to MyTonWallet')} />\n                {lang('Upgrade to MyTonWallet')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {!IS_CORE_WALLET && IS_WEB && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                {lang('Install App')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {IS_EXTENSION && (\n            <div className={styles.block}>\n              {PROXY_HOSTS && (\n                <div className={styles.item} onClick={handleTonProxyToggle}>\n                  <img className={styles.menuIcon} src={tonProxyImg} alt={lang('TON Proxy')} />\n                  {lang('TON Proxy')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Toggle TON Proxy')}\n                    checked={isTonProxyEnabled}\n                  />\n                </div>\n              )}\n              <div className={styles.item} onClick={handleTonMagicToggle}>\n                <img className={styles.menuIcon} src={tonMagicImg} alt={lang('TON Magic')} />\n                {lang('TON Magic')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Toggle TON Magic')}\n                  checked={isTonMagicEnabled}\n                />\n              </div>\n              {isTelegramLinkRendered && (\n                <div ref={telegramLinkRef} className={styles.item} onClick={handleOpenTelegramWeb}>\n                  <img className={styles.menuIcon} src={telegramImg} alt={lang('Open Telegram Web')} />\n                  {lang('Open Telegram Web')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n          {IS_ELECTRON && (\n            <div className={styles.block}>\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handlePushNotificationsOpen}>\n              <img\n                className={styles.menuIcon}\n                src={notifications}\n                alt={arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n              />\n              {arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            <div className={styles.item} onClick={handleAppearanceOpen}>\n              <img className={styles.menuIcon} src={appearanceImg} alt={lang('Appearance')} />\n              {lang('Appearance')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            {!SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY && (\n              <div className={styles.item} onClick={handleAssetsOpen}>\n                <img className={styles.menuIcon} src={assetsActivityImg} alt={lang('Assets & Activity')} />\n                {lang('Assets & Activity')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {isPasswordPresent && (\n              <div className={styles.item} onClick={handleSecurityOpen}>\n                <img className={styles.menuIcon} src={securityImg} alt={lang('Security')} />\n                {lang('Security')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {IS_DAPP_SUPPORTED && !isViewMode && (\n              <div className={styles.item} onClick={handleConnectedDappsOpen}>\n                <img className={styles.menuIcon} src={connectedDappsImg} alt={lang('Connected Dapps')} />\n                {lang('Connected Dapps')}\n\n                <div className={styles.itemInfo}>\n                  {dapps.length ? dapps.length : ''}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n            {!IS_CORE_WALLET && (\n              <div className={styles.item} onClick={handleLanguageOpen}>\n                <img className={styles.menuIcon} src={languageImg} alt={lang('Language')} />\n                {lang('Language')}\n                <div className={styles.itemInfo}>\n                  {activeLang?.name}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {(!!versions?.length || IS_LEDGER_SUPPORTED) && (\n            <div className={styles.block}>\n              {!!versions?.length && (\n                <div className={styles.item} onClick={handleOpenWalletVersion}>\n                  <img className={styles.menuIcon} src={walletVersionImg} alt={lang('Wallet Versions')} />\n                  {lang('Wallet Versions')}\n\n                  <div className={styles.itemInfo}>\n                    {currentVersion}\n                    <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                  </div>\n                </div>\n              )}\n              {IS_LEDGER_SUPPORTED && (\n                <div className={styles.item} onClick={handleOpenHardwareModal}>\n                  <img className={styles.menuIcon} src={ledgerImg} alt={lang('Connect Ledger')} />\n                  {lang('Connect Ledger')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <>\n              {!isNftBuyingDisabled && (\n                <div className={styles.block}>\n                  <a\n                    href={MTW_CARDS_WEBSITE}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={styles.item}\n                  >\n                    <img className={styles.menuIcon} src={mtwCardsImg} alt={lang('MyTonWallet Cards NFT')} />\n                    {lang('MyTonWallet Cards NFT')}\n\n                    <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                  </a>\n                </div>\n              )}\n              <div className={styles.block}>\n                <a\n                  href={`https://t.me/${MTW_TIPS_CHANNEL_NAME[langCode] ?? MTW_TIPS_CHANNEL_NAME.en}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={tipsImg} alt={lang('MyTonWallet Tips')} />\n                  {lang('MyTonWallet Tips')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                <a\n                  href={getHelpCenterUrl(langCode, 'home')}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={helpcenterImg} alt={lang('Help Center')} />\n                  {lang('Help Center')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                {supportAccountsCount > 0 && (\n                  <a\n                    href={`https://t.me/${SUPPORT_USERNAME}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={styles.item}\n                  >\n                    <img className={styles.menuIcon} src={supportImg} alt={lang('Get Support')} />\n                    {lang('Get Support')}\n\n                    <div className={styles.itemInfo}>\n                      <span className={styles.small}>@{SUPPORT_USERNAME}</span>\n                      <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                    </div>\n                  </a>\n                )}\n              </div>\n            </>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handleDisclaimerOpen}>\n              <img className={styles.menuIcon} src={disclaimerImg} alt={lang('Use Responsibly')} />\n              {lang('Use Responsibly')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          {!IS_CORE_WALLET && IS_CAPACITOR && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnDesktop}>\n                <img className={styles.menuIcon} src={installDesktopImg} alt={lang('Install on Desktop')} />\n                {lang('Install on Desktop')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && IS_ELECTRON && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnMobile}>\n                <img className={styles.menuIcon} src={installMobileImg} alt={lang('Install on Mobile')} />\n                {lang('Install on Mobile')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <div className={styles.block}>\n              {!IS_CORE_WALLET && IS_EXTENSION && (\n                <div className={styles.item} onClick={handleClickInstallApp}>\n                  <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                  {lang('Install App')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {!IS_CORE_WALLET && (\n                <div className={styles.item} onClick={handleAboutOpen}>\n                  <img className={styles.menuIcon} src={aboutImg} alt=\"\" />\n                  {lang('About %app_name%', { app_name: APP_NAME })}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={buildClassName(styles.item, styles.item_red)} onClick={openLogOutModal}>\n              <img className={styles.menuIcon} src={exitImg} alt={lang('Exit')} />\n              {lang('Exit')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          <div className={styles.version} onClick={handleMultipleClick}>\n            {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: SettingsState) {\n    switch (currentKey) {\n      case SettingsState.Initial:\n        return renderSettings();\n      case SettingsState.PushNotifications:\n        return (\n          <SettingsPushNotifications\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Appearance:\n        return (\n          <SettingsAppearance\n            isActive={isActive && isSlideActive}\n            theme={theme}\n            animationLevel={animationLevel}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isTrayIconEnabled={isTrayIconEnabled}\n            onTrayIconEnabledToggle={handleTrayIconEnabledToggle}\n          />\n        );\n      case SettingsState.Assets:\n        return (\n          <SettingsAssets\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            onBack={handleBackClick}\n          />\n        );\n      case SettingsState.Security:\n        return (\n          <SettingsSecurity\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isAutoUpdateEnabled={isAutoUpdateEnabled}\n            onAutoUpdateEnabledToggle={handleAutoUpdateEnabledToggle}\n            onSettingsClose={handleCloseSettings}\n          />\n        );\n      case SettingsState.Dapps:\n        return (\n          <SettingsDapps\n            isActive={isActive && isSlideActive}\n            dapps={dapps}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Language:\n        return (\n          <SettingsLanguage\n            isActive={isActive && isSlideActive}\n            langCode={langCode}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.About:\n        return (\n          <SettingsAbout\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            theme={theme}\n          />\n        );\n      case SettingsState.Disclaimer:\n        return (\n          <SettingsDisclaimer\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.NativeBiometricsTurnOn:\n        return (\n          <SettingsNativeBiometricsTurnOn\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            handleBackClick={handleBackClick}\n          />\n        );\n      case SettingsState.SelectTokenList:\n        return (\n          <SettingsTokenList\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            handleBackClick={handleBackClickToAssets}\n          />\n        );\n      case SettingsState.WalletVersion:\n        return (\n          <SettingsWalletVersion\n            isActive={isActive && isSlideActive}\n            currentVersion={currentVersion}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            wallets={wallets}\n          />\n        );\n      case SettingsState.LedgerConnectHardware:\n        return (\n          <div className={styles.slide}>\n            <LedgerConnect\n              isActive={isActive && isSlideActive}\n              isStatic={!isInsideModal}\n              className={styles.nestedTransition}\n              onBackButtonClick={handleBackClick}\n              onConnected={handleLedgerConnected}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.LedgerSelectWallets:\n        return (\n          <div className={styles.slide}>\n            <LedgerSelectWallets\n              isActive={isActive && isSlideActive}\n              isStatic={!isInsideModal}\n              accounts={accounts}\n              hardwareWallets={hardwareWallets}\n              onBackButtonClick={handleBackClick}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.HiddenNfts:\n        return (\n          <SettingsHiddenNfts\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClickToAssets}\n            isInsideModal={isInsideModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <Transition\n        ref={transitionRef}\n        name={resolveSlideTransitionName()}\n        className={buildClassName(isInsideModal ? modalStyles.transition : styles.transitionContainer, 'custom-scroll')}\n        activeKey={renderingKey}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        withSwipeControl\n        onStop={getDoesUsePinPad() ? handleSlideAnimationStop : undefined}\n      >\n        {renderContent}\n      </Transition>\n      <SettingsDeveloperOptions\n        isOpen={isDeveloperModalOpen}\n        isTestnet={isTestnet}\n        isCopyStorageEnabled={isCopyStorageEnabled}\n        onShowAllWalletVersions={handleShowAllWalletVersions}\n        onClose={handlCloseDeveloperModal}\n      />\n      <LogOutModal isOpen={isLogOutModalOpened} onClose={handleCloseLogOutModal} />\n      {IS_BIOMETRIC_AUTH_SUPPORTED && <Biometrics isInsideModal={isInsideModal} />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const accounts = selectNetworkAccounts(global);\n  const { isCopyStorageEnabled, supportAccountsCount = 1, isNftBuyingDisabled } = global.restrictions;\n\n  const { currentVersion, byId: versionsById } = global.walletVersions ?? {};\n  const versions = versionsById?.[global.currentAccountId!];\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const { hardwareWallets } = global.hardware;\n\n  return {\n    settings: global.settings,\n    dapps,\n    isOpen: global.areSettingsOpen,\n    tokens: selectCurrentAccountTokens(global),\n    isPasswordPresent,\n    currentVersion,\n    versions,\n    isCopyStorageEnabled,\n    supportAccountsCount,\n    hardwareWallets,\n    accounts,\n    isNftBuyingDisabled,\n    arePushNotificationsAvailable: global.pushNotifications.isAvailable,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(Settings));\n\nfunction handleOpenTelegramWeb() {\n  window.open(TELEGRAM_WEB_URL, '_blank', 'noopener');\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { IS_EXTENSION } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  children: TeactNode;\n  isOpen?: boolean;\n  onClose: () => void;\n}\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n}\n\nfunction SettingsModal({\n  children, isOpen, onClose, isMediaViewerOpen,\n}: OwnProps & StateProps) {\n  const fullDialogClassName = buildClassName(\n    styles.modalDialog,\n    !(IS_ELECTRON || IS_EXTENSION) && styles.modalDialogWeb,\n  );\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      dialogClassName={fullDialogClassName}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"settings\"\n      forceFullNative\n      onClose={onClose}\n    >\n      {children}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n  };\n})(SettingsModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { SwapState, SwapType, type UserSwapToken } from '../../global/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { vibrate } from '../../util/haptics';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { getIsMobileTelegramApp, IS_CLIPBOARDS_SUPPORTED, IS_IOS } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Input from '../ui/Input';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  swapType?: SwapType;\n  toAddress?: string;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n}\n\nconst SHORT_ADDRESS_SHIFT = 14;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_ADDRESS_SHIFT * 2;\n\nfunction SwapBlockchain({\n  isActive,\n  swapType,\n  toAddress = '',\n  tokenIn,\n  tokenOut,\n}: OwnProps) {\n  const {\n    cancelSwap,\n    setSwapCexAddress,\n    showNotification,\n    setSwapScreen,\n    requestOpenQrScanner,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const toAddressRef = useRef<HTMLInputElement>();\n\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const [isAddressFocused, markAddressFocused, unmarkAddressFocused] = useFlag();\n  const [hasToAddressError, setHasToAddressError] = useState(false);\n  const [canContinue, setCanContinue] = useState(swapType !== SwapType.CrosschainFromWallet);\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const withPasteButton = shouldRenderPasteButton && toAddress === '';\n\n  const toAddressShort = toAddress.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n    ? shortenAddress(toAddress, SHORT_ADDRESS_SHIFT) || ''\n    : toAddress;\n\n  const handleCancelClick = useLastCallback(() => {\n    setHasToAddressError(false);\n    setCanContinue(false);\n    setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancelClick,\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    const el = toAddressRef.current!;\n\n    // `selectionStart` is only updated in the next frame after `focus` event\n    requestAnimationFrame(() => {\n      const caretPosition = el.selectionStart!;\n      markAddressFocused();\n\n      // Restore caret position after input field value has been focused and expanded\n      requestAnimationFrame(() => {\n        const newCaretPosition = caretPosition <= SHORT_ADDRESS_SHIFT + 3\n          ? caretPosition\n          : Math.max(0, el.value.length - (toAddressShort.length - caretPosition));\n\n        el.setSelectionRange(newCaretPosition, newCaretPosition);\n        if (newCaretPosition > SHORT_ADDRESS_SHIFT * 2) {\n          el.scrollLeft = el.scrollWidth - el.clientWidth;\n        }\n      });\n    });\n  });\n\n  const validateToAddress = useLastCallback(async (address: string) => {\n    if (!address.length) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    const response = await callApi('swapCexValidateAddress', {\n      slug: tokenOut!.slug,\n      address,\n    });\n\n    if (!response) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    setHasToAddressError(!response.result);\n    setCanContinue(response.result);\n  });\n\n  const handleAddressBlur = useLastCallback(() => {\n    unmarkAddressFocused();\n  });\n\n  const handleAddressInput = useLastCallback((newToAddress: string) => {\n    setSwapCexAddress({ toAddress: newToAddress.trim() });\n  });\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        setSwapCexAddress({ toAddress: text.trim() });\n        await validateToAddress(text.trim());\n      }\n    } catch (error) {\n      showNotification({\n        message: lang('Error reading clipboard'),\n      });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  useEffect(() => {\n    void validateToAddress(toAddress);\n  }, [toAddress, validateToAddress]);\n\n  const submitPassword = useLastCallback(() => {\n    void vibrate();\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    if (IS_IOS && getIsMobileTelegramApp()) {\n      alert('Scanning is temporarily not available');\n      return;\n    }\n\n    requestOpenQrScanner();\n    cancelSwap();\n  });\n\n  function renderInfo() {\n    const text = hasToAddressError\n      ? lang('Incorrect address.')\n      : lang('Please provide an address of your wallet in %blockchain% blockchain to receive bought tokens.', {\n        blockchain: getChainNetworkName(tokenOut?.chain),\n      });\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={hasToAddressError ? 0 : 1}\n        slideClassName={styles.blockchainHintWrapper}\n      >\n        <span className={buildClassName(\n          styles.blockchainHintText,\n          hasToAddressError && styles.blockchainHintTextError,\n        )}\n        >\n          {text}\n        </span>\n      </Transition>\n    );\n  }\n\n  function renderInputAddress() {\n    if (swapType !== SwapType.CrosschainFromWallet) return undefined;\n\n    return (\n      <>\n        <div className={styles.inputAddress}>\n          <Input\n            ref={toAddressRef}\n            isRequired\n            placeholder={lang('Your address on another blockchain')}\n            value={isAddressFocused ? toAddress : toAddressShort}\n            onInput={handleAddressInput}\n            onFocus={handleAddressFocus}\n            onBlur={handleAddressBlur}\n            wrapperClassName={styles.inputAddressWrapper}\n          >\n            {isQrScannerSupported && (\n              <Button\n                isSimple\n                className={buildClassName(styles.inputButton, withPasteButton && styles.inputButtonShifted)}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </Input>\n        </div>\n        {renderInfo()}\n      </>\n    );\n  }\n\n  const title = lang('$swap_from_to', {\n    from: tokenIn?.symbol,\n    icon: <i className={buildClassName('icon-chevron-right', styles.swapArrowIcon)} aria-hidden />,\n    to: tokenOut?.symbol,\n  }) as TeactNode[];\n\n  return (\n    <>\n      <ModalHeader title={title} onClose={cancelSwap} />\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n          previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n        />\n\n        {renderInputAddress()}\n\n        <div className={buildClassName(styles.blockchainButtons, modalStyles.footerButtons)}>\n          <Button onClick={handleCancelClick} className={modalStyles.buttonHalfWidth}>{lang('Close')}</Button>\n          <Button\n            isPrimary\n            isDisabled={!canContinue}\n            className={modalStyles.buttonHalfWidth}\n            onClick={submitPassword}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapBlockchain);\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"TY_nyPoa\",\"buttons\":\"JuY14PzG\",\"button\":\"e8xjMuq6\",\"changellyInfoBlock\":\"n91WXWIY\",\"changellyDescription\":\"nOPyXt4f\",\"changellyDescriptionBold\":\"bTumpDcM\",\"changellyTextField\":\"qcMvwyr2\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { Account, UserSwapToken } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport { selectCurrentAccount } from '../../global/selectors';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport SwapTokensInfo from './SwapTokensInfo';\n\nimport styles from './SwapResult.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  playAnimation?: boolean;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n  isFirstButtonDisabled?: boolean;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  isSensitiveDataHidden?: true;\n}\n\nfunction SwapResult({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  playAnimation,\n  firstButtonText,\n  secondButtonText,\n  swapType,\n  toAddress = '',\n  addressByChain,\n  isSensitiveDataHidden,\n  onFirstButtonClick,\n  onSecondButtonClick,\n  isFirstButtonDisabled,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress, addressByChain,\n  });\n  const isToAddressInCurrentWallet = useMemo(() => {\n    return Boolean(toAddress && Object.values(addressByChain ?? {}).some((address) => address === toAddress));\n  }, [addressByChain, toAddress]);\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button\n            className={styles.button}\n            onClick={onFirstButtonClick}\n            isDisabled={isFirstButtonDisabled}\n          >\n            {firstButtonText}\n          </Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  function renderSticker() {\n    if (swapType === SwapType.CrosschainFromWallet && !isInternalSwap) return undefined;\n\n    return (\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n    );\n  }\n\n  function renderTimeWarning() {\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (swapType !== SwapType.CrosschainFromWallet || isToAddressInCurrentWallet) {\n      return undefined;\n    }\n    const chain = getIsSupportedChain(tokenOut?.chain) ? tokenOut.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {\n            lang('$swap_changelly_from_ton_description', {\n              blockchain: (\n                <span className={styles.changellyDescriptionBold}>\n                  {getChainNetworkName(tokenOut?.chain)}\n                </span>\n              ),\n            })\n          }\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={toAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {renderSticker()}\n\n      <SwapTokensInfo\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        tokenIn={tokenIn}\n        amountIn={amountIn}\n        tokenOut={tokenOut}\n        amountOut={amountOut}\n      />\n\n      {swapType !== SwapType.OnChain && renderTimeWarning()}\n      {renderChangellyInfo()}\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    addressByChain: selectCurrentAccount(global)?.addressByChain,\n    isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n  };\n})(SwapResult));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { SwapType, UserSwapToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SwapResult from '../common/SwapResult';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onInfoClick: NoneToVoidFunction;\n  onStartSwap: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n  isDetailsDisabled?: boolean;\n}\n\nfunction SwapComplete({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  toAddress,\n  onInfoClick,\n  onStartSwap,\n  onClose,\n  isDetailsDisabled,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang('Swap Placed')} onClose={onClose} />\n\n      <div className={buildClassName(styles.scrollContent, 'custom-scroll')}>\n        <SwapResult\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n          swapType={swapType}\n          toAddress={toAddress}\n          playAnimation={isActive}\n          firstButtonText={lang('Details')}\n          secondButtonText={lang('Repeat')}\n          onFirstButtonClick={onInfoClick}\n          onSecondButtonClick={onStartSwap}\n          isFirstButtonDisabled={isDetailsDisabled}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapComplete);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n}\n\nfunction SwapPassword({\n  isActive,\n  isLoading,\n  error,\n  children,\n  onSubmit,\n  onBack,\n}: OwnProps) {\n  const { cancelSwap, clearSwapError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Swap')} onClose={cancelSwap} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={IS_CAPACITOR}\n        error={error}\n        operationType=\"swap\"\n        submitLabel={lang('Swap')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={clearSwapError}\n        skipAuthScreen\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(SwapPassword);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, UserSwapToken } from '../../global/types';\n\nimport {\n  CHANGELLY_LIVE_CHAT_URL, CHANGELLY_SUPPORT_EMAIL, CHANGELLY_WAITING_DEADLINE,\n} from '../../config';\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrCode from '../../hooks/useQrCode';\n\nimport Countdown from '../common/Countdown';\nimport SwapTokensInfo from '../common/SwapTokensInfo';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  payinAddress?: string;\n  payoutAddress?: string;\n  payinExtraId?: string;\n  activity?: ApiActivity;\n  addressByChain?: Account['addressByChain'];\n  onClose: NoneToVoidFunction;\n}\n\nfunction SwapWaitTokens({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  payinAddress,\n  payoutAddress,\n  payinExtraId,\n  activity,\n  addressByChain,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isExpired, setIsExpired] = useState(false);\n\n  const timestamp = useMemo(() => Date.now(), []);\n\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const shouldShowQrCode = !payinExtraId;\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress: payoutAddress, addressByChain,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const handleTimeout = useLastCallback(() => {\n    setIsExpired(true);\n  });\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          chain=\"ton\"\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderInfo() {\n    if (isExpired) {\n      const cexTransactionId = activity && 'cex' in activity ? activity.cex?.transactionId : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyImportantRed}>\n            {lang('The time for sending coins is over.')}\n          </span>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_support', {\n              livechat: (\n                <a\n                  href={CHANGELLY_LIVE_CHAT_URL}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  className={styles.changellyDescriptionBold}\n                >\n                  {lang('Changelly Live Chat')}\n                </a>\n              ),\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SUPPORT_EMAIL}\n                </span>\n              ),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n              className={styles.changellyTextField}\n            />\n          )}\n        </div>\n      );\n    }\n\n    if (isInternalSwap) {\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyDescription}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        </div>\n      );\n    }\n\n    const chain = getIsSupportedChain(tokenIn?.chain) ? tokenIn.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n          value: (\n            <span className={styles.changellyDescriptionBold}>\n              {formatCurrencyExtended(Number(amountIn), tokenIn?.symbol ?? '', true)}\n            </span>\n          ),\n          blockchain: (\n            <span className={styles.changellyDescriptionBold}>\n              {getChainNetworkName(tokenIn?.chain)}\n            </span>\n          ),\n          time: (\n            <Countdown\n              timestamp={timestamp}\n              deadline={CHANGELLY_WAITING_DEADLINE}\n              onCompleted={handleTimeout}\n            />\n          ),\n        })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          noDimming\n          className={styles.changellyTextField}\n        />\n        {renderMemo()}\n        {shouldShowQrCode && (\n          <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n        )}\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <ModalHeader\n        title={lang(isExpired ? 'Swap Expired' : (isInternalSwap ? 'Swapping' : 'Waiting for Payment'))}\n        onClose={onClose}\n      />\n\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <SwapTokensInfo\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n        />\n\n        <Transition\n          name=\"fade\"\n          activeKey={isExpired ? 1 : 0}\n        >\n          {renderInfo()}\n        </Transition>\n\n        <div className={modalStyles.buttons}>\n          <Button isPrimary onClick={onClose}>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapWaitTokens);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, GlobalState, UserSwapToken, UserToken } from '../../global/types';\nimport { SwapState, SwapType } from '../../global/types';\n\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TokenSelector from '../common/TokenSelector';\nimport TransactionBanner from '../common/TransactionBanner';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport SwapBlockchain from './SwapBlockchain';\nimport SwapComplete from './SwapComplete';\nimport SwapInitial from './SwapInitial';\nimport SwapPassword from './SwapPassword';\nimport SwapWaitTokens from './SwapWaitTokens';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n  swapType: SwapType;\n  swapTokens?: UserSwapToken[];\n  activityById?: Record<string, ApiActivity>;\n  addressByChain?: Account['addressByChain'];\n}\n\nconst FULL_SIZE_NBS_STATES = [SwapState.Password, SwapState.SelectTokenFrom, SwapState.SelectTokenTo];\n\nfunction SwapModal({\n  currentSwap: {\n    state,\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn = '0',\n    amountOut = '0',\n    isLoading,\n    error,\n    activityId,\n    toAddress,\n    payinAddress,\n    payoutAddress,\n    payinExtraId,\n    shouldResetOnClose,\n  },\n  swapType,\n  swapTokens,\n  activityById,\n  addressByChain,\n}: StateProps) {\n  const {\n    startSwap,\n    cancelSwap,\n    setSwapScreen,\n    submitSwap,\n    showActivityInfo,\n    submitSwapCex,\n    addSwapToken,\n    setSwapTokenIn,\n    setSwapTokenOut,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const isOpen = state !== SwapState.None;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const tokenIn = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenInSlug),\n    [tokenInSlug, swapTokens],\n  );\n\n  const tokenOut = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenOutSlug),\n    [swapTokens, tokenOutSlug],\n  );\n\n  const [renderedSwapType, setRenderedSwapType] = useState(swapType);\n  const [renderedTransactionAmountIn, setRenderedTransactionAmountIn] = useState(amountIn);\n  const [renderedTransactionAmountOut, setRenderedTransactionAmountOut] = useState(amountOut);\n  const [renderedTransactionTokenIn, setRenderedTransactionTokenIn] = useState(tokenIn);\n  const [renderedTransactionTokenOut, setRenderedTransactionTokenOut] = useState(tokenOut);\n  const [renderedActivity, setRenderedActivity] = useState<ApiActivity | undefined>();\n\n  useEffect(() => {\n    if (!isOpen || !activityId || !activityById?.[activityId]) {\n      setRenderedActivity(undefined);\n      return;\n    }\n\n    const activity = activityById[activityId];\n    setRenderedActivity(activity);\n\n    if (activity.kind === 'swap' && swapType === SwapType.CrosschainToWallet) {\n      const status = activity.cex?.status;\n      if (status === 'exchanging' || status === 'confirming') {\n        setSwapScreen({ state: SwapState.Complete });\n      }\n    }\n  }, [activityById, activityId, isOpen, swapType]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedTransactionAmountIn(amountIn);\n    setRenderedTransactionAmountOut(amountOut);\n    setRenderedTransactionTokenIn(tokenIn);\n    setRenderedTransactionTokenOut(tokenOut);\n    setRenderedSwapType(swapType);\n\n    if (swapType === SwapType.OnChain) {\n      submitSwap({ password });\n      return;\n    }\n\n    submitSwapCex({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === SwapState.Password) {\n      if (swapType === SwapType.CrosschainFromWallet) {\n        setSwapScreen({ state: SwapState.Blockchain });\n      } else {\n        setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n      }\n      return;\n    }\n\n    if (state === SwapState.SelectTokenTo || state === SwapState.SelectTokenFrom) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n\n    if (state === SwapState.Blockchain) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    if (!activityId) return;\n\n    cancelSwap({ shouldReset: true });\n    showActivityInfo({ id: activityId });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelSwap({ shouldReset: isPortrait || shouldResetOnClose });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelSwap({ shouldReset: true });\n  });\n\n  const handleTokenSelect = useLastCallback((token: UserSwapToken | UserToken) => {\n    addSwapToken({ token: token as UserSwapToken });\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    const setToken = renderingKey === SwapState.SelectTokenTo ? setSwapTokenOut : setSwapTokenIn;\n    setToken({ tokenSlug: token.slug });\n  });\n\n  const handleStartSwap = useLastCallback(() => {\n    startSwap({\n      amountIn: renderedTransactionAmountIn,\n      tokenInSlug: renderedTransactionTokenIn?.slug,\n      tokenOutSlug: renderedTransactionTokenOut?.slug,\n    });\n  });\n\n  function renderSwapShortInfo() {\n    if (!tokenIn || !tokenOut || !amountIn || !amountOut) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={tokenIn}\n        withChainIcon\n        tokenOut={tokenOut}\n        text={formatCurrencyExtended(amountIn, tokenIn.symbol ?? '', true)}\n        secondText={formatCurrencyExtended(amountOut, tokenOut.symbol ?? '', true)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SwapState) {\n    switch (currentKey) {\n      case SwapState.Initial:\n        return (\n          <>\n            <ModalHeader\n              title={lang('$swap_action')}\n              onClose={cancelSwap}\n            />\n            <SwapInitial isActive={isActive} />\n          </>\n        );\n      case SwapState.Blockchain:\n        return (\n          <SwapBlockchain\n            isActive={isActive}\n            toAddress={toAddress}\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            swapType={swapType}\n          />\n        );\n      case SwapState.WaitTokens:\n        return (\n          <SwapWaitTokens\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            payinAddress={payinAddress}\n            payoutAddress={payoutAddress}\n            payinExtraId={payinExtraId}\n            addressByChain={addressByChain}\n            activity={renderedActivity}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case SwapState.Password:\n        return (\n          <SwapPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onBack={handleBackClick}\n          >\n            {renderSwapShortInfo()}\n          </SwapPassword>\n        );\n      case SwapState.Complete: {\n        return (\n          <SwapComplete\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            swapType={renderedSwapType}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n            onInfoClick={handleTransactionInfoClick}\n            onStartSwap={handleStartSwap}\n            isDetailsDisabled={!activityId}\n          />\n        );\n      }\n      case SwapState.SelectTokenFrom:\n      case SwapState.SelectTokenTo:\n        return (\n          <TokenSelector\n            isActive={isActive}\n            shouldUseSwapTokens\n            shouldFilter={currentKey === SwapState.SelectTokenTo}\n            onTokenSelect={handleTokenSelect}\n            onBack={handleBackClick}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  const forceFullNative = FULL_SIZE_NBS_STATES.includes(renderingKey)\n    // Crosschain exchanges have additional information that may cause the height of the modal to be insufficient\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    || (renderingKey === SwapState.Complete && renderedSwapType !== SwapType.OnChain);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={cancelSwap}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"swap\"\n      forceFullNative={forceFullNative}\n      hasCloseButton\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const account = selectCurrentAccount(global);\n  const activityById = accountState?.activities?.byId;\n\n  return {\n    currentSwap: global.currentSwap,\n    swapType: selectSwapType(global),\n    swapTokens: selectSwapTokens(global),\n    activityById,\n    addressByChain: account?.addressByChain,\n  };\n})(SwapModal));\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TransferResult from '../common/TransferResult';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport styles from '../common/TransferResult.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  amount?: bigint;\n  symbol: string;\n  txId?: string;\n  tokenSlug: string;\n  toAddress?: string;\n  comment?: string;\n  decimals?: number;\n  nfts?: ApiNft[];\n  onInfoClick: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferComplete({\n  isActive,\n  amount,\n  symbol,\n  txId,\n  tokenSlug,\n  toAddress,\n  comment,\n  decimals,\n  nfts,\n  onInfoClick,\n  onClose,\n}: OwnProps) {\n  const { startTransfer } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isNftTransfer = Boolean(nfts?.length);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    return isActive\n      ? captureKeyboardListeners({ onEnter: onClose })\n      : undefined;\n  }, [isActive, onClose]);\n\n  const handleTransactionRepeatClick = useLastCallback(() => {\n    startTransfer({\n      isPortrait,\n      tokenSlug,\n      toAddress,\n      amount,\n      comment,\n    });\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang(isNftTransfer ? 'NFT has been sent!' : 'Coins have been sent!')} onClose={onClose} />\n\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? (\n          <>\n            <AnimatedIconWithPreview\n              play={isActive}\n              noLoop={false}\n              nonInteractive\n              className={styles.sticker}\n              tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n              previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n            />\n            {nfts.length === 1 ? <NftInfo nft={nfts[0]} /> : <NftChips nfts={nfts} />}\n            {Boolean(txId) && (\n              <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n                <Button className={styles.button} onClick={onInfoClick}>{lang('Details')}</Button>\n              </div>\n            )}\n          </>\n        ) : (\n          <TransferResult\n            playAnimation={isActive}\n            amount={amount ? -amount : undefined}\n            tokenSymbol={symbol}\n            firstButtonText={txId ? lang('Details') : undefined}\n            secondButtonText={lang('Repeat')}\n            onFirstButtonClick={onInfoClick}\n            onSecondButtonClick={handleTransactionRepeatClick}\n            decimals={decimals}\n          />\n        )}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferComplete);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './AmountWithFeeTextField.module.scss';\n\ninterface OwnProps {\n  amount: string;\n  label: string;\n  currency?: string;\n  symbol?: string;\n  fractionDigits?: number;\n  feeText?: TeactNode;\n  className?: string;\n  labelClassName?: string;\n}\n\nfunction AmountWithFeeTextField({\n  amount,\n  label,\n  currency = '',\n  symbol,\n  fractionDigits,\n  feeText,\n  className,\n  labelClassName,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <div className={buildClassName(styles.label, labelClassName)}>{label}</div>\n      <div className={buildClassName(styles.root, className)}>\n        {formatCurrencyExtended(amount, currency, true, fractionDigits)}\n        {symbol && <span className={styles.suffix}>{symbol}</span>}\n        {Boolean(feeText) && (\n          <>\n            <div className={styles.feeLabel}>{lang('Fee')}</div>\n            <span className={styles.feeConfirm}>\n              {feeText}\n            </span>\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AmountWithFeeTextField);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ghrNkOZk\",\"suffix\":\"LPchTYAT\",\"label\":\"vEby849g\",\"feeLabel\":\"XPUDvAqg\",\"feeConfirm\":\"SkacqSTU\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiToken } from '../../api/types';\nimport type {\n  Account, GlobalState, SavedAddress, UserToken,\n} from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  BURN_ADDRESS,\n  BURN_CHUNK_DURATION_APPROX_SEC,\n  NFT_BATCH_SIZE,\n  NOTCOIN_EXCHANGERS,\n  STARS_SYMBOL,\n  TONCOIN,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { explainApiTransferFee } from '../../util/fee/transferFee';\nimport { getLocalAddressName } from '../../util/getLocalAddressName';\nimport { vibrate } from '../../util/haptics';\nimport { getChainBySlug } from '../../util/tokens';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AmountWithFeeTextField from '../ui/AmountWithFeeTextField';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  savedAddresses?: SavedAddress[];\n  token?: UserToken | ApiToken;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  currentTransfer: GlobalState['currentTransfer'];\n  accounts?: Record<string, Account>;\n}\n\nfunction TransferConfirm({\n  currentTransfer: {\n    tokenSlug,\n    amount,\n    toAddress,\n    resolvedAddress,\n    fee,\n    realFee,\n    comment,\n    shouldEncrypt,\n    promiseId,\n    isLoading,\n    toAddressName,\n    isToNewAddress,\n    isScam,\n    binPayload,\n    nfts,\n    isGaslessWithStars,\n    diesel,\n    stateInit,\n  },\n  token,\n  currentAccountId,\n  accounts,\n  isActive,\n  savedAddresses,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const { submitTransferConfirm } = getActions();\n\n  const lang = useLang();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    tokenSlug = TONCOIN.slug;\n  }\n\n  const chain = getChainBySlug(tokenSlug);\n  const localAddressName = useMemo(() => getLocalAddressName({\n    address: toAddress!,\n    chain,\n    currentAccountId,\n    accounts: accounts!,\n    savedAddresses,\n  }), [accounts, chain, currentAccountId, savedAddresses, toAddress]);\n  const addressName = localAddressName || toAddressName;\n  const isBurning = resolvedAddress === BURN_ADDRESS;\n  const isNotcoinBurning = resolvedAddress === NOTCOIN_EXCHANGERS[0];\n  const explainedFee = explainApiTransferFee({\n    fee,\n    realFee,\n    diesel,\n    tokenSlug,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  const handleConfirm = useLastCallback(() => {\n    void vibrate();\n    submitTransferConfirm();\n  });\n\n  function renderNfts() {\n    if (nfts!.length === 1) {\n      return <NftInfo nft={nfts![0]} withMediaViewer />;\n    }\n\n    return <NftChips nfts={nfts!} />;\n  }\n\n  function renderAmountWithFee() {\n    if (!explainedFee.realFee || !token) {\n      return undefined;\n    }\n\n    const feeText = (\n      <Fee\n        terms={explainedFee.realFee.terms}\n        precision={explainedFee.realFee.precision}\n        token={token}\n        symbolClassName={styles.currencySymbol}\n      />\n    );\n\n    return isNftTransfer ? (\n      <>\n        <div className={styles.label}>{lang('Fee')}</div>\n        <div className={styles.inputReadOnly}>{feeText}</div>\n      </>\n    ) : (\n      <AmountWithFeeTextField\n        label={lang('Amount')}\n        amount={toDecimal(amount ?? 0n, token?.decimals)}\n        symbol={token?.symbol ?? ''}\n        feeText={feeText}\n        fractionDigits={token?.decimals}\n      />\n    );\n  }\n\n  function renderComment() {\n    if (binPayload || stateInit) {\n      return (\n        <>\n          {binPayload && (\n            <>\n              <div className={styles.label}>{lang('Signing Data')}</div>\n              <InteractiveTextField\n                text={binPayload}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          {stateInit && (\n            <>\n              <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n              <InteractiveTextField\n                text={stateInit}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n        </>\n      );\n    }\n\n    if (!comment) {\n      return undefined;\n    }\n\n    return (\n      <>\n        <div className={styles.label}>{shouldEncrypt ? lang('Encrypted Message') : lang('Comment or Memo')}</div>\n        <div className={buildClassName(styles.inputReadOnly, styles.inputReadOnly_words, styles.commentInputWrapper)}>\n          {comment}\n        </div>\n      </>\n    );\n  }\n\n  const burningDurationMin = nfts?.length\n    ? (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60\n    : undefined;\n\n  const submitBtnText = lang(\n    (isBurning || isNotcoinBurning)\n      ? (isNftTransfer ? 'Burn NFT' : 'Burn')\n      : isGaslessWithStars\n        ? 'Pay fee with %stars_symbol%'\n        : 'Confirm',\n    isGaslessWithStars ? { stars_symbol: STARS_SYMBOL } : undefined,\n  );\n\n  return (\n    <>\n      <ModalHeader title={lang('Is it all ok?')} onClose={onClose} />\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? renderNfts() : (\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_SMALL_SIZE_PX}\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={buildClassName(styles.sticker, styles.sticker_sizeSmall)}\n            tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n            previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          />\n        )}\n        <div className={styles.label}>\n          {lang('Receiving Address')}\n          {' '}\n          {isToNewAddress && (\n            <IconWithTooltip\n              emoji=\"\"\n              size=\"small\"\n              message={lang('This address is new and never received transfers before.')}\n              tooltipClassName={styles.warningTooltipContainer}\n            />\n          )}\n        </div>\n        <InteractiveTextField\n          chain={chain}\n          address={resolvedAddress}\n          addressName={addressName}\n          isScam={isScam}\n          copyNotification={lang('Address was copied!')}\n          className={styles.addressWidget}\n        />\n\n        {renderAmountWithFee()}\n        {renderComment()}\n\n        {nfts && (isBurning || (isNotcoinBurning && nfts?.length > 1)) && (\n          <div className={styles.burnWarning}>\n            {(\n              nfts?.length === 1 ? (\n                renderText(lang('Are you sure you want to burn this NFT? It will be lost forever.'))\n              ) : ([\n                renderText(lang('$multi_burn_nft_warning', { amount: nfts.length })),\n                ' ',\n                renderText(lang('$multi_send_nft_warning', { duration: burningDurationMin })),\n              ])\n            )}\n          </div>\n        )}\n\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsInsideContentWithScroll)}>\n          <Button className={modalStyles.button} onClick={promiseId ? onClose : onBack}>\n            {promiseId ? lang('Cancel') : lang('Edit')}\n          </Button>\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDestructive={isBurning || isScam}\n            className={modalStyles.button}\n            onClick={handleConfirm}\n          >\n            {submitBtnText}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    currentAccountId: global.currentAccountId!,\n    currentTransfer: global.currentTransfer,\n    accounts: selectNetworkAccounts(global),\n  };\n})(TransferConfirm));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\n\nimport {\n  BURN_ADDRESS, BURN_CHUNK_DURATION_APPROX_SEC, NFT_BATCH_SIZE, NOTCOIN_EXCHANGERS,\n} from '../../config';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Spinner from '../ui/Spinner';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  nfts: ApiNft[];\n  sentNftsCount?: number;\n  toAddress?: string;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferMultiNftProcess({\n  nfts,\n  sentNftsCount = 0,\n  toAddress,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isInProgress = sentNftsCount < nfts.length;\n  const isBurning = toAddress === BURN_ADDRESS;\n  const isNotcoinBurning = toAddress === NOTCOIN_EXCHANGERS[0];\n\n  const title = isInProgress ? lang(\n    `${(isBurning || isNotcoinBurning) ? 'Burning' : 'Sending'}: %n% of %m% NFTs...`,\n    { n: sentNftsCount, m: nfts.length },\n  ) : lang('Sent');\n  const duration = (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60;\n\n  return (\n    <>\n      <ModalHeader title={title} />\n\n      <div className={modalStyles.transitionContent}>\n        {isInProgress && (\n          <>\n            <Spinner className={styles.spinner} />\n            <div className={styles.infoBox}>{lang('$multi_send_nft_warning', { duration })}</div>\n          </>\n        )}\n        {nfts.length === 1 ? <NftInfo nft={nfts[0]} /> : <NftChips nfts={nfts} />}\n        {!isInProgress && (\n          <div className={modalStyles.buttons}>\n            <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferMultiNftProcess);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { STARS_SYMBOL } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  isBurning?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  isGaslessWithStars?: boolean;\n}\n\nfunction TransferPassword({\n  isActive, isLoading, isBurning, error, children, onSubmit, onCancel, isGaslessWithStars,\n}: OwnProps) {\n  const {\n    cancelTransfer,\n    clearTransferError,\n  } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  const title = isBurning ? 'Confirm Burning' : 'Confirm Sending';\n  const submitLabel = isGaslessWithStars\n    ? lang('Pay fee with %stars_symbol%', { stars_symbol: STARS_SYMBOL })\n    : lang('Send');\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang(title)} onClose={cancelTransfer} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={Boolean(children)}\n        operationType=\"transfer\"\n        error={error}\n        submitLabel={submitLabel}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearTransferError}\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(TransferPassword);\n","import React, {\n  memo, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState, SavedAddress, UserToken } from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { BURN_ADDRESS, NFT_BATCH_SIZE } from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious from '../../hooks/usePrevious';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport TransferComplete from './TransferComplete';\nimport TransferConfirm from './TransferConfirm';\nimport TransferInitial from './TransferInitial';\nimport TransferMultiNftProcess from './TransferMultiNftProcess';\nimport TransferPassword from './TransferPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface StateProps {\n  currentTransfer: GlobalState['currentTransfer'];\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  isMediaViewerOpen?: boolean;\n  isMultichainAccount: boolean;\n}\n\nconst SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS = 762; // Computed empirically\n\nfunction TransferModal({\n  currentTransfer: {\n    state,\n    amount,\n    toAddress,\n    comment,\n    error,\n    isLoading,\n    txId,\n    tokenSlug,\n    nfts,\n    sentNftsCount,\n    diesel,\n  },\n  tokens,\n  savedAddresses,\n  isMediaViewerOpen,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    submitTransferConfirm,\n    submitTransfer,\n    setTransferScreen,\n    cancelTransfer,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = state !== TransferState.None;\n\n  const { screenHeight } = useWindowSize();\n  const selectedToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const decimals = selectedToken?.decimals;\n  const renderedTransactionAmount = usePrevious(amount, true);\n  const symbol = selectedToken?.symbol || '';\n  const isNftTransfer = Boolean(nfts?.length);\n  const isBurning = toAddress === BURN_ADDRESS;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  useEffect(() => (\n    state === TransferState.Confirm\n      ? captureKeyboardListeners({ onEnter: () => submitTransferConfirm() })\n      : undefined\n  ), [state, submitTransferConfirm]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    submitTransfer({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm) {\n      setTransferScreen({ state: TransferState.Initial });\n    }\n    if (state === TransferState.Password) {\n      setTransferScreen({ state: TransferState.Confirm });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n    showActivityInfo({ id: txId! });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelTransfer({ shouldReset: isPortrait });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitTransfer();\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: TransferState) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return (\n          <>\n            <ModalHeader title={lang(isNftTransfer ? 'Send NFT' : 'Send')} onClose={handleModalCloseWithReset} />\n            <TransferInitial />\n          </>\n        );\n      case TransferState.Confirm:\n        return (\n          <TransferConfirm\n            isActive={isActive}\n            token={selectedToken}\n            savedAddresses={savedAddresses}\n            onBack={isPortrait ? handleBackClick : handleModalClose}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.Password:\n        return (\n          <TransferPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            isBurning={isBurning}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onCancel={handleModalCloseWithReset}\n            isGaslessWithStars={diesel?.status === 'stars-fee'}\n          >\n            <TransactionBanner\n              tokenIn={selectedToken}\n              imageUrl={nfts?.[0]?.thumbnail}\n              withChainIcon={isMultichainAccount}\n              text={isNftTransfer\n                ? (nfts.length > 1 ? lang('%amount% NFTs', { amount: nfts.length }) : nfts[0]?.name || 'NFT')\n                : formatCurrency(toDecimal(amount!, decimals), symbol)}\n              className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n              secondText={shortenAddress(toAddress!)}\n            />\n          </TransferPassword>\n        );\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={handleModalCloseWithReset}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n      case TransferState.Complete:\n        return (nfts?.length || 0) <= NFT_BATCH_SIZE ? (\n          <TransferComplete\n            isActive={isActive}\n            nfts={nfts}\n            amount={renderedTransactionAmount}\n            symbol={symbol}\n            txId={txId}\n            tokenSlug={tokenSlug}\n            toAddress={toAddress}\n            comment={comment}\n            onInfoClick={handleTransactionInfoClick}\n            onClose={handleModalCloseWithReset}\n            decimals={decimals}\n          />\n        ) : (\n          <TransferMultiNftProcess\n            nfts={nfts!}\n            sentNftsCount={sentNftsCount}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"transfer\"\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      forceFullNative={screenHeight <= SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS || renderingKey === TransferState.Password}\n      onClose={handleModalCloseWithReset}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    currentTransfer: global.currentTransfer,\n    tokens: selectCurrentAccountTokens(global),\n    savedAddresses: accountState?.savedAddresses,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(TransferModal));\n","import React, { memo, useRef } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport styles from './ConfettiContainer.module.scss';\n\ntype StateProps = {\n  lastRequestedAt?: number;\n};\n\ninterface Confetti {\n  pos: {\n    x: number;\n    y: number;\n  };\n  velocity: {\n    x: number;\n    y: number;\n  };\n  size: number;\n  color: string;\n  flicker: number;\n  flickerFrequency: number;\n  rotation: number;\n  lastDrawnAt: number;\n  frameCount: number;\n}\n\nconst CONFETTI_FADEOUT_TIMEOUT = 10000;\nconst DEFAULT_CONFETTI_SIZE = 10;\nconst CONFETTI_COLORS = ['#E8BC2C', '#D0049E', '#02CBFE', '#5723FD', '#FE8C27', '#6CB859'];\n\nfunction ConfettiContainer({ lastRequestedAt }: StateProps) {\n  const canvasRef = useRef<HTMLCanvasElement>();\n  const confettiRef = useRef<Confetti[]>([]);\n  const isRafStartedRef = useRef(false);\n  const windowSize = useWindowSize();\n  const forceUpdate = useForceUpdate();\n  const { isPortrait } = useDeviceScreen();\n\n  const defaultConfettiAmount = isPortrait ? 50 : 100;\n\n  const invokeGenerateConfetti = useLastCallback((w: number, h: number) => {\n    generateConfetti(confettiRef, w, h, defaultConfettiAmount);\n  });\n\n  const updateCanvas = useLastCallback(() => {\n    if (!canvasRef.current || !isRafStartedRef.current) {\n      return;\n    }\n    const canvas = canvasRef.current;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      return;\n    }\n\n    const { width: canvasWidth, height: canvasHeight } = canvas;\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    const confettiToRemove = new Set<Confetti>([]);\n    confettiRef.current.forEach((c, i) => {\n      const {\n        pos,\n        velocity,\n        size,\n        color,\n        flicker,\n        flickerFrequency,\n        rotation,\n        lastDrawnAt,\n        frameCount,\n      } = c;\n      const diff = (Date.now() - lastDrawnAt) / 1000;\n\n      const newPos = {\n        x: pos.x + velocity.x * diff,\n        y: pos.y + velocity.y * diff,\n      };\n\n      const newVelocity = {\n        x: velocity.x * 0.98, // Air Resistance\n        y: velocity.y += diff * 1000, // Gravity\n      };\n\n      const newFlicker = size * Math.abs(Math.sin(frameCount * flickerFrequency));\n      const newRotation = 5 * frameCount * flickerFrequency * (Math.PI / 180);\n\n      const newFrameCount = frameCount + 1;\n      const newLastDrawnAt = Date.now();\n\n      const shouldRemove = newPos.y > canvasHeight + c.size;\n      if (shouldRemove) {\n        confettiToRemove.add(c);\n        return;\n      }\n\n      confettiRef.current[i] = {\n        ...c,\n        pos: newPos,\n        velocity: newVelocity,\n        flicker: newFlicker,\n        rotation: newRotation,\n        lastDrawnAt: newLastDrawnAt,\n        frameCount: newFrameCount,\n      };\n      ctx.fillStyle = color;\n      ctx.beginPath();\n      ctx.ellipse(\n        pos.x,\n        pos.y,\n        size,\n        flicker,\n        rotation,\n        0,\n        2 * Math.PI,\n      );\n      ctx.fill();\n    });\n\n    confettiRef.current = confettiRef.current.filter((c) => !confettiToRemove.has(c));\n    if (confettiRef.current.length) {\n      requestMeasure(updateCanvas);\n    } else {\n      isRafStartedRef.current = false;\n    }\n  });\n\n  useSyncEffect(([prevConfettiTime]) => {\n    let hideTimeout: number;\n    if (lastRequestedAt && prevConfettiTime !== lastRequestedAt) {\n      invokeGenerateConfetti(windowSize.width, windowSize.height);\n      hideTimeout = window.setTimeout(forceUpdate, CONFETTI_FADEOUT_TIMEOUT);\n\n      if (!isRafStartedRef.current) {\n        isRafStartedRef.current = true;\n        requestMeasure(updateCanvas);\n      }\n    }\n\n    return () => {\n      window.clearTimeout(hideTimeout);\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- Old timeout should be cleared only if new confetti is generated\n  }, [lastRequestedAt, forceUpdate, updateCanvas]);\n\n  if (!lastRequestedAt || Date.now() - lastRequestedAt > CONFETTI_FADEOUT_TIMEOUT) {\n    return undefined;\n  }\n  return (\n    <div id=\"Confetti\" className={styles.root}>\n      <canvas ref={canvasRef} width={windowSize.width} height={windowSize.height} />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    lastRequestedAt: global.confettiRequestedAt,\n  };\n})(ConfettiContainer));\n\nfunction generateConfetti(confettiRef: { current: Confetti[] }, width: number, height: number, amount: number) {\n  for (let i = 0; i < amount; i++) {\n    const leftSide = i % 2;\n    const pos = {\n      x: width * (leftSide ? -0.1 : 1.1),\n      y: height * 0.75,\n    };\n    const randomX = Math.random() * width * 1.5;\n    const randomY = -height / 2 - Math.random() * height;\n    const velocity = {\n      x: leftSide ? randomX : randomX * -1,\n      y: randomY,\n    };\n\n    const randomColor = CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)];\n    const size = DEFAULT_CONFETTI_SIZE;\n    confettiRef.current.push({\n      pos,\n      size,\n      color: randomColor,\n      velocity,\n      flicker: size,\n      flickerFrequency: Math.random() * 0.2,\n      rotation: 0,\n      lastDrawnAt: Date.now(),\n      frameCount: 0,\n    });\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"NEu40vNs\"};","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TransferState } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport Button from './Button';\nimport Portal from './Portal';\nimport Spinner from './Spinner';\n\nimport styles from './LoadingOverlay.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n};\n\nconst CLOSE_BUTTON_DELAY_MS = 7000;\n\nfunction LoadingOverlay({ isOpen }: StateProps) {\n  const { closeLoadingOverlay } = getActions();\n\n  const lang = useLang();\n  const [shouldShowCloseButton, showCloseButton, hideCloseButton] = useFlag(false);\n\n  const { shouldRender, ref } = useShowTransition({\n    isOpen,\n    withShouldRender: true,\n  });\n\n  useEffect(() => {\n    if (!shouldRender) hideCloseButton();\n  }, [shouldRender]);\n\n  useTimeout(showCloseButton, shouldRender ? CLOSE_BUTTON_DELAY_MS : undefined, [shouldRender]);\n\n  if (!shouldRender) return undefined;\n\n  return (\n    <Portal>\n      <div ref={ref} className={styles.root} onClick={() => closeLoadingOverlay()}>\n        <Spinner color=\"white\" className={styles.spinner} />\n        <Button\n          shouldStopPropagation\n          className={buildClassName(styles.button, shouldShowCloseButton && styles.shown)}\n          onClick={closeLoadingOverlay}\n        >\n          {lang('Close')}\n        </Button>\n      </div>\n    </Portal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global) => {\n    const isDpppModalOpen = (\n      global.dappConnectRequest?.state !== undefined || global.currentDappTransfer.state !== TransferState.None\n    );\n\n    return {\n      isOpen: global.isLoadingOverlayOpen && !isDpppModalOpen,\n    };\n  },\n)(LoadingOverlay));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"JqqCZr7K\",\"button\":\"WFfpuJBO\",\"spinner\":\"Ey6IGxkf\",\"shown\":\"UDIRXOO8\"};","// extracted by mini-css-extract-plugin\nexport default {\"containerInner\":\"_8bq050R\",\"appSlide\":\"xYgMXl3B\",\"appSlide_fastTransition\":\"cumlVCAy\",\"appSlideFastTransition\":\"cumlVCAy\",\"appSlideTransparent\":\"ZZvRsvlT\",\"appSlideContent\":\"BY5oYr5T\",\"transitionContainer\":\"XDsN0suQ\",\"loading\":\"VPmyx3Yj\"};","import React, { memo, useEffect, useLayoutEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\nimport { AppState } from '../global/types';\n\nimport {\n  APP_NAME,\n  INACTIVE_MARKER,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n} from '../config';\nimport { selectCurrentAccountSettings } from '../global/selectors';\nimport { useAccentColor } from '../util/accentColor';\nimport { setActiveTabChangeListener } from '../util/activeTabMonitor';\nimport buildClassName from '../util/buildClassName';\nimport { MINUTE } from '../util/dateFormat';\nimport { closeThisTab } from '../util/ledger/tab';\nimport { resolveRender } from '../util/renderPromise';\nimport {\n  IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS, IS_LEDGER_EXTENSION_TAB, IS_LINUX,\n} from '../util/windowEnvironment';\nimport { updateSizes } from '../util/windowSize';\nimport { callApi } from '../api';\nimport IFrameBrowser from './ui/IFrameBrowser';\n\nimport { useAppIntersectionObserver } from '../hooks/useAppIntersectionObserver';\nimport useAppTheme from '../hooks/useAppTheme';\nimport useBackgroundMode from '../hooks/useBackgroundMode';\nimport { useDeviceScreen } from '../hooks/useDeviceScreen';\nimport useFlag from '../hooks/useFlag';\nimport useInterval from '../hooks/useInterval';\nimport useSyncEffect from '../hooks/useSyncEffect';\nimport useTimeout from '../hooks/useTimeout';\n\nimport AppInactive from './AppInactive';\nimport AppLocked from './appLocked/AppLocked';\nimport Auth from './auth/Auth';\nimport AuthImportWalletModal from './auth/AuthImportWalletModal';\nimport DappConnectModal from './dapps/DappConnectModal';\nimport DappSignDataModal from './dapps/DappSignDataModal';\nimport DappTransferModal from './dapps/DappTransferModal';\nimport Dialogs from './Dialogs';\nimport ElectronHeader from './electron/ElectronHeader';\nimport Explore from './explore/Explore';\nimport LedgerModal from './ledger/LedgerModal';\nimport Main from './main/Main';\nimport AddAccountModal from './main/modals/AddAccountModal';\nimport BackupModal from './main/modals/BackupModal';\nimport NftAttributesModal from './main/modals/NftAttributesModal';\nimport OnRampWidgetModal from './main/modals/OnRampWidgetModal';\nimport QrScannerModal from './main/modals/QrScannerModal';\nimport SignatureModal from './main/modals/SignatureModal';\nimport SwapActivityModal from './main/modals/SwapActivityModal';\nimport TransactionModal from './main/modals/TransactionModal';\nimport UnhideNftModal from './main/modals/UnhideNftModal';\nimport Notifications from './main/Notifications';\nimport BottomBar from './main/sections/Actions/BottomBar';\nimport MediaViewer from './mediaViewer/MediaViewer';\nimport MintCardModal from './mintCard/MintCardModal';\nimport Settings from './settings/Settings';\nimport SettingsModal from './settings/SettingsModal';\nimport SwapModal from './swap/SwapModal';\nimport TransferModal from './transfer/TransferModal';\nimport ConfettiContainer from './ui/ConfettiContainer';\nimport InAppBrowser from './ui/InAppBrowser';\nimport LoadingOverlay from './ui/LoadingOverlay';\nimport Transition from './ui/Transition';\n\n// import Test from './components/test/TestNoRedundancy';\nimport styles from './App.module.scss';\n\ninterface StateProps {\n  appState: AppState;\n  accountId?: string;\n  isBackupWalletModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isExploreOpen?: boolean;\n  isFullscreen: boolean;\n  areSettingsOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n}\n\nconst APP_STATES_WITH_BOTTOM_BAR = new Set([AppState.Main, AppState.Settings, AppState.Explore]);\nconst APP_UPDATE_INTERVAL = (IS_ELECTRON && !IS_LINUX) || IS_ANDROID_DIRECT\n  ? 5 * MINUTE\n  : undefined;\nconst PRERENDER_MAIN_DELAY = 1200;\nlet mainKey = 0;\n\nconst APP_STATE_RENDER_COUNT = Object.keys(AppState).length / 2;\n\nfunction App({\n  appState,\n  accountId,\n  isBackupWalletModalOpen,\n  isHardwareModalOpen,\n  isQrScannerOpen,\n  isExploreOpen,\n  isFullscreen,\n  areSettingsOpen,\n  theme,\n  accentColorIndex,\n}: StateProps) {\n  const {\n    closeBackupWalletModal,\n    closeHardwareWalletModal,\n    closeSettings,\n    cancelCaching,\n    closeQrScanner,\n    checkAppVersion,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait;\n\n  const [isInactive, markInactive] = useFlag(false);\n  const [canPrerenderMain, prerenderMain] = useFlag();\n\n  const renderingKey = isInactive\n    ? AppState.Inactive\n    : areSettingsOpen && !areSettingsInModal\n      ? AppState.Settings\n      : isExploreOpen && isPortrait\n        ? AppState.Explore : appState;\n  const withBottomBar = isPortrait && APP_STATES_WITH_BOTTOM_BAR.has(renderingKey);\n  const transitionName = withBottomBar\n    ? 'semiFade'\n    : isPortrait\n      ? (IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade')\n      : 'semiFade';\n\n  useTimeout(\n    prerenderMain,\n    renderingKey === AppState.Auth && !canPrerenderMain ? PRERENDER_MAIN_DELAY : undefined,\n  );\n\n  useInterval(checkAppVersion, IS_CORE_WALLET ? undefined : APP_UPDATE_INTERVAL);\n\n  useEffect(() => {\n    document.documentElement.classList.toggle('with-bottombar', withBottomBar);\n  }, [withBottomBar]);\n\n  useEffect(() => {\n    updateSizes();\n    setActiveTabChangeListener(() => {\n      document.title = `${APP_NAME} ${INACTIVE_MARKER}`;\n\n      markInactive();\n      closeSettings();\n      cancelCaching();\n    });\n  }, [markInactive]);\n\n  useBackgroundMode(() => {\n    void callApi('setIsAppFocused', false);\n  }, () => {\n    void callApi('setIsAppFocused', true);\n  }, IS_LEDGER_EXTENSION_TAB);\n\n  useLayoutEffect(() => {\n    document.documentElement.classList.add('is-rendered');\n    resolveRender();\n  }, []);\n  useLayoutEffect(() => {\n    document.documentElement.classList.toggle('is-fullscreen', isFullscreen);\n    requestAnimationFrame(updateSizes);\n  }, [isFullscreen]);\n\n  useSyncEffect(() => {\n    if (accountId) {\n      mainKey += 1;\n    }\n  }, [accountId]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor('body', appTheme, accentColorIndex);\n\n  useAppIntersectionObserver();\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: AppState) {\n    switch (currentKey) {\n      case AppState.Auth:\n        return <Auth />;\n      case AppState.Main: {\n        const slideFullClassName = buildClassName(\n          styles.appSlide,\n          styles.appSlideContent,\n          'custom-scroll',\n          'app-slide-content',\n        );\n        return (\n          <Transition\n            name=\"semiFade\"\n            activeKey={mainKey}\n            shouldCleanup\n            nextKey={renderingKey === AppState.Auth && canPrerenderMain ? mainKey + 1 : undefined}\n            slideClassName={slideFullClassName}\n          >\n            <Main\n              key={mainKey}\n              isActive={isActive}\n            />\n          </Transition>\n        );\n      }\n      case AppState.Explore:\n        return <Explore isActive={isActive} />;\n      case AppState.Settings:\n        return <Settings isActive={isActive} />;\n      case AppState.Ledger:\n        return <LedgerModal isOpen noBackdropClose onClose={closeThisTab} />;\n      case AppState.Inactive:\n        return <AppInactive />;\n    }\n  }\n\n  return (\n    <>\n      {IS_ELECTRON && !IS_LINUX && <ElectronHeader withTitle />}\n\n      <Transition\n        name={transitionName}\n        activeKey={renderingKey}\n        renderCount={APP_STATE_RENDER_COUNT}\n        shouldCleanup={!withBottomBar}\n        className={styles.transitionContainer}\n        slideClassName={\n          buildClassName(styles.appSlide, withBottomBar && styles.appSlide_fastTransition, 'custom-scroll')\n        }\n      >\n        {renderContent}\n      </Transition>\n\n      {areSettingsInModal && (\n        <SettingsModal\n          isOpen={areSettingsOpen}\n          onClose={closeSettings}\n        >\n          <Settings isActive={!!areSettingsOpen} isInsideModal />\n        </SettingsModal>\n      )}\n      <AppLocked />\n      <MediaViewer />\n      {!isInactive && (\n        <>\n          <AuthImportWalletModal />\n          <LedgerModal isOpen={isHardwareModalOpen} onClose={closeHardwareWalletModal} />\n          <BackupModal\n            isOpen={isBackupWalletModalOpen}\n            onClose={closeBackupWalletModal}\n          />\n          <TransferModal />\n          {!IS_CORE_WALLET && (\n            <>\n              <SwapModal />\n              <MintCardModal />\n            </>\n          )}\n          <SignatureModal />\n          <TransactionModal />\n          <SwapActivityModal />\n          <DappConnectModal />\n          <DappSignDataModal />\n          <DappTransferModal />\n          <AddAccountModal />\n          <OnRampWidgetModal />\n          <UnhideNftModal />\n          <NftAttributesModal />\n          {IS_CAPACITOR && (\n            <QrScannerModal\n              isOpen={isQrScannerOpen}\n              onClose={closeQrScanner}\n            />\n          )}\n          {!IS_DELEGATED_BOTTOM_SHEET && (\n            <>\n              <Notifications />\n              <Dialogs />\n              <ConfettiContainer />\n              {IS_CAPACITOR ? <InAppBrowser /> : <IFrameBrowser />}\n              <LoadingOverlay />\n            </>\n          )}\n        </>\n      )}\n      {withBottomBar && <BottomBar />}\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    appState: global.appState,\n    accountId: global.currentAccountId,\n    isBackupWalletModalOpen: global.isBackupWalletModalOpen,\n    isHardwareModalOpen: global.isHardwareModalOpen,\n    isExploreOpen: global.isExploreOpen,\n    areSettingsOpen: global.areSettingsOpen,\n    isQrScannerOpen: global.isQrScannerOpen,\n    isFullscreen: Boolean(global.isFullscreen),\n    theme: global.settings.theme,\n    accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n  };\n})(App));\n","import { ElectronEvent } from '../electron/types';\n\nimport { processDeeplink } from './deeplink';\n\nexport function initElectron() {\n  window.electron?.on(ElectronEvent.DEEPLINK, ({ url }: { url: string }) => {\n    void processDeeplink(url);\n  });\n}\n","import './global/actions';\nimport './global/init';\nimport './util/handleError';\nimport './util/bigintPatch';\n\nimport React from './lib/teact/teact';\nimport TeactDOM from './lib/teact/teact-dom';\nimport { getActions, getGlobal } from './global';\n\nimport {\n  DEBUG, IS_CAPACITOR, IS_TELEGRAM_APP, STRICTERDOM_ENABLED,\n} from './config';\nimport { requestMutation } from './lib/fasterdom/fasterdom';\nimport { enableStrict } from './lib/fasterdom/stricterdom';\nimport { betterView } from './util/betterView';\nimport { fixIosAppStorage, initCapacitor, processCapacitorLaunchDeeplink } from './util/capacitor';\nimport { initElectron } from './util/electron';\nimport { initFocusScrollController } from './util/focusScroll';\nimport { forceLoadFonts } from './util/fonts';\nimport { logDebug, logSelfXssWarnings } from './util/logs';\nimport { initMultitab } from './util/multitab';\nimport { initTelegramApp } from './util/telegram';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP, IS_LEDGER_EXTENSION_TAB,\n} from './util/windowEnvironment';\n\nimport App from './components/App';\n\nimport './styles/index.scss';\n\nif (DEBUG) {\n  // eslint-disable-next-line no-console\n  console.log('>>> INIT');\n}\n\nif (STRICTERDOM_ENABLED) {\n  enableStrict();\n}\n\nif (IS_CAPACITOR) {\n  void initCapacitor();\n}\n\nif (IS_ELECTRON) {\n  void initElectron();\n}\n\nif (IS_TELEGRAM_APP) {\n  void initTelegramApp();\n}\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  initMultitab({ noPubGlobal: true });\n} else if (IS_DELEGATED_BOTTOM_SHEET) {\n  initMultitab();\n}\n\ninitFocusScrollController();\n\nvoid (async () => {\n  if (IS_IOS_APP) {\n    await fixIosAppStorage();\n  }\n\n  await window.electron?.restoreStorage();\n\n  getActions().init();\n\n  // Connecting to the API from remote tabs creates excessive polling in the API.\n  // The remote tab doesn't need the API anyway.\n  if (!IS_LEDGER_EXTENSION_TAB) {\n    getActions().initApi();\n  } else {\n    logDebug('API was not initialized because it was connected from a detached tab');\n  }\n\n  if (IS_CAPACITOR) {\n    await processCapacitorLaunchDeeplink();\n  }\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> START INITIAL RENDER');\n  }\n\n  requestMutation(() => {\n    TeactDOM.render(\n      <App />,\n      document.getElementById('root')!,\n    );\n\n    forceLoadFonts();\n    betterView();\n  });\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> FINISH INITIAL RENDER');\n  }\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn('GLOBAL STATE', getGlobal());\n  });\n\n  if (window.top === window) {\n    logSelfXssWarnings();\n  }\n})();\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\n\nexport function forceLoadFonts() {\n  const el = document.createElement('div');\n  el.textContent = '';\n  el.classList.add('visually-hidden');\n  document.body.appendChild(el);\n\n  requestMutation(() => {\n    document.body.removeChild(el);\n  });\n}\n"],"names":["leafPrototypes","getProto","inProgress","dataWebpackPrefix","BarcodeFormat","BarcodeValueType","Resolution","LensFacing","GoogleBarcodeScannerModuleInstallState","AddressType","EmailFormatType","PhoneFormatType","WifiEncryptionType","exports","read","buffer","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","i","d","s","NaN","Infinity","Math","pow","write","value","c","rt","abs","isNaN","floor","log","LN2","Big","RM","NE","PE","ten","fromDecimal","decimals","BigInt","mul","TONCOIN","round","toString","toDecimal","noFloor","arguments","length","undefined","toBig","div","roundHalfUp","roundDecimal","BIGINT_PREFIX","bigintReviver","key","startsWith","slice","bigintAbs","bigintDivideToNumber","num","ONE_TON","bigintMultiplyToNumber","bigintMax","value0","value1","bigintMin","TON_GAS","stakeNominators","unstakeNominators","stakeLiquid","unstakeLiquid","stakeJettonsForward","JettonStakingGas","STAKE_JETTONS","stakeJettons","unstakeJettons","UNSTAKE_JETTONS","claimJettons","JETTON_TRANSFER","SIMPLE_UPDATE_REQUEST","changeDns","stakeEthena","TOKEN_TRANSFER_AMOUNT","stakeEthenaForward","unstakeEthena","unstakeEthenaForward","unstakeEthenaLocked","unstakeEthenaLockedForward","TON_GAS_REAL","DEFAULT_DECIMALS","WALLET_IS_BOUNCEABLE","Workchain","WORKCHAIN","BaseChain","DEFAULT_MAX_MESSAGES","LEDGER_MAX_MESSAGES","W5_MAX_MESSAGES","JettonOpCode","TeleitemOpCode","ContractType","Excesses","Ok","Wallet","Staking","ConnectorClass","requestStates","Map","requestStatesByCallback","constructor","target","onUpdate","channel","shouldUseJson","targetOrigin","destroy","init","_len","args","Array","_key","this","postMessage","type","request","messageData","messageId","generateUniqueId","payload","requestState","promise","Promise","resolve","reject","Object","assign","withCallback","callback","pop","set","catch","finally","delete","cancelCallback","progressCallback","isCanceled","get","onMessage","data","decodeExtensionMessage","err","logDebugError","update","error","response","_requestState$callbac","call","callbackArgs","_data$error","_data$error2","Error","message","stack","rawData","encodeExtensionMessage","createConnector","worker","connector","handleMessage","_ref","addEventListener","removeEventListener","Deferred","resolved","deferred","SECOND","MINUTE","DAY","YEAR","formatDayToStringWithCache","withCache","langCode","dayStartAt","noYear","monthFormat","noDay","withTime","Date","toLocaleString","year","month","day","hour","minute","hourCycle","formatRelativeHumanDateTime","total","now","minutes","hours","days","rtf","Intl","RelativeTimeFormat","localeMatcher","numeric","style","result","daysPlural","daysValue","formatToParts","reverse","push","replace","hoursPlural","hoursValue","minutesPlural","minutesValue","join","formatHumanDay","lang","datetime","getDayStartAt","isToday","yesterday","setDate","getDate","isYesterday","formatFullDay","code","date","today","getDayStart","getFullYear","formatShortDay","todayStartAt","noDate","targetAt","setSeconds","getMinuteStart","getTime","formatTime","String","getHours","padStart","getMinutes","getCountDaysToDate","ceil","setHours","random","ExceptionCode","CapacitorException","super","Capacitor","win","capCustomPlatform","CapacitorCustomPlatform","cap","Plugins","getPlatform","name","_a","_b","androidBridge","webkit","messageHandlers","bridge","getPlatformId","getPluginHeader","pluginName","PluginHeaders","find","h","registeredPlugins","convertFileSrc","filePath","handleError","console","isNativePlatform","isPluginAvailable","plugin","platforms","has","registerPlugin","jsImplementations","registeredPlugin","warn","proxy","platform","pluginHeader","jsImplementation","createPluginMethodWrapper","prop","remove","wrapper","p","async","loadPluginImplementation","then","impl","fn","bind","Unimplemented","methodHeader","methods","rtype","options","nativePromise","nativeCallback","createPluginMethod","defineProperty","writable","configurable","addListener","removeListener","addListenerNative","eventName","callbackId","Proxy","_","Set","keys","Exception","DEBUG","isLoggingEnabled","createCapacitor","initCapacitorGlobal","globalThis","self","window","g","WebPlugin","listeners","retainedEventArguments","windowListeners","listenerFunc","firstListener","windowListener","registered","addWindowListener","sendRetainedArgumentsForEvent","removeAllListeners","listener","removeWindowListener","notifyListeners","retainUntilConsumed","forEach","hasListeners","registerWindowListener","windowEventName","pluginEventName","handler","event","unimplemented","msg","unavailable","Unavailable","index","indexOf","splice","handle","arg","encode","str","encodeURIComponent","decodeURIComponent","escape","decode","CapacitorCookiesPluginWeb","getCookies","cookies","document","cookie","cookieMap","split","trim","setCookie","encodedKey","encodedValue","expires","path","domain","url","deleteCookie","clearCookies","toUTCString","clearAllCookies","web","buildRequestInit","extra","output","method","headers","originalKeys","map","k","toLocaleLowerCase","reduce","acc","normalizeHttpHeaders","body","includes","params","URLSearchParams","entries","FormData","form","append","Headers","JSON","stringify","CapacitorHttpPluginWeb","requestInit","webFetchExtra","urlParams","shouldEncode","accumulator","entry","item","isArray","substr","buildUrlParams","shouldEncodeUrlParams","fetch","contentType","blob","responseType","ok","reader","FileReader","onload","base64String","onerror","readAsDataURL","readBlobAsBase64","json","text","status","post","put","patch","cache","WeakMap","fnCache","cacheKey","cached","newValue","animate","tick","schedulerFn","animateInstantly","timingFunctions","linear","t","easeIn","easeOut","easeInOut","sin","PI","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","animateNumber","timing","duration","onEnd","from","to","t0","t1","min","progress","f","requestMeasure","applyStyles","element","css","ImpactStyle","NotificationType","UNDEFINED_PREFIX","extensionMessageReplacer","extensionMessageReviver","parse","APP_ENV","process","IS_CORE_WALLET","APP_NAME","APP_VERSION","APP_COMMIT_HASH","APP_ENV_MARKER","DEBUG_MORE","DEBUG_API","DEBUG_VIEW_ACCOUNTS","IS_PRODUCTION","IS_TEST","IS_EXTENSION","IS_FIREFOX_EXTENSION","IS_OPERA_EXTENSION","env","IS_PACKAGED_ELECTRON","IS_CAPACITOR","IS_ANDROID_DIRECT","IS_AIR_APP","IS_TELEGRAM_APP","ELECTRON_HOST_URL","INACTIVE_MARKER","PRODUCTION_URL","BETA_URL","APP_INSTALL_URL","APP_REPO_URL","BOT_USERNAME","STRICTERDOM_ENABLED","DEBUG_ALERT_MSG","PIN_LENGTH","NATIVE_BIOMETRICS_USERNAME","NATIVE_BIOMETRICS_SERVER","IS_BIP39_MNEMONIC_ENABLED","MNEMONIC_COUNT","MNEMONIC_COUNTS","PRIVATE_KEY_HEX_LENGTH","MNEMONIC_CHECK_COUNT","MOBILE_SCREEN_MAX_WIDTH","ANIMATION_END_DELAY","ANIMATED_STICKER_TINY_ICON_PX","ANIMATED_STICKER_ICON_PX","ANIMATED_STICKER_TINY_SIZE_PX","ANIMATED_STICKER_SMALL_SIZE_PX","ANIMATED_STICKER_MIDDLE_SIZE_PX","ANIMATED_STICKER_BIG_SIZE_PX","ANIMATED_STICKER_HUGE_SIZE_PX","DEFAULT_LANDSCAPE_ACTION_TAB_ID","TRANSACTION_ADDRESS_SHIFT","WHOLE_PART_DELIMITER","DEFAULT_SLIPPAGE_VALUE","GLOBAL_STATE_CACHE_DISABLED","GLOBAL_STATE_CACHE_KEY","ANIMATION_LEVEL_MIN","ANIMATION_LEVEL_MED","ANIMATION_LEVEL_MAX","ANIMATION_LEVEL_DEFAULT","THEME_DEFAULT","MAIN_ACCOUNT_ID","FRACTION_DIGITS","SHORT_FRACTION_DIGITS","MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT","SUPPORT_USERNAME","MTW_TIPS_CHANNEL_NAME","en","ru","NFT_MARKETPLACE_TITLES","getgems","fragment","MTW_STATIC_BASE_URL","MTW_CARDS_BASE_URL","MTW_CARDS_MINT_BASE_URL","MYTONWALLET_PROMO_URL","MYTONWALLET_MULTISEND_DAPP_URL","TELEGRAM_WEB_URL","NFT_MARKETPLACE_URL","NFT_MARKETPLACE_TITLE","GETGEMS_BASE_MAINNET_URL","GETGEMS_BASE_TESTNET_URL","EMPTY_HASH_VALUE","IFRAME_WHITELIST","SUBPROJECT_URL_MASK","CHANGELLY_SUPPORT_EMAIL","CHANGELLY_LIVE_CHAT_URL","CHANGELLY_SECURITY_EMAIL","CHANGELLY_TERMS_OF_USE","CHANGELLY_PRIVACY_POLICY","CHANGELLY_AML_KYC","CHANGELLY_WAITING_DEADLINE","PROXY_HOSTS","TINY_TRANSFER_MAX_COST","IMAGE_CACHE_NAME","LANG_CACHE_NAME","LANG_LIST","nativeName","rtl","IS_STAKING_DISABLED","VALIDATION_PERIOD_MS","DEFAULT_FEE","LIQUID_POOL","STAKING_MIN_AMOUNT","NOMINATORS_STAKING_MIN_AMOUNT","MIN_ACTIVE_STAKING_REWARDS","TONCONNECT_PROTOCOL_VERSION","TONCONNECT_WALLET_JSBRIDGE_KEY","EMBEDDED_DAPP_BRIDGE_CHANNEL","NFT_FRAGMENT_COLLECTIONS","TELEGRAM_GIFTS_SUPER_COLLECTION","MTW_CARDS_WEBSITE","MTW_CARDS_COLLECTION","TON_DNS_COLLECTION","TON_DNS_RENEWAL_WARNING_DAYS","TON_DNS_RENEWAL_NFT_WARNING_DAYS","symbol","slug","chain","cmcSlug","TRX","MYCOIN","minterAddress","MYCOIN_TESTNET","CHAIN_CONFIG","ton","isMemoSupported","isDnsSupported","addressRegex","addressPrefixRegex","nativeToken","tron","mainnet","apiUrl","usdtAddress","testnet","TRC20_USDT_MAINNET_SLUG","TRC20_USDT_TESTNET_SLUG","TON_USDT_SLUG","STAKED_TON_SLUG","TRX_SWAP_COUNT_FEE_ADDRESS","ETHENA_STAKING_MIN_AMOUNT","ETHENA_ELIGIBILITY_CHECK_URL","STON_PTON_SLUG","TRC20_USDT","TON_USDT","tokenAddress","TON_USDE","image","TON_TSUSDE","ALL_STAKING_POOLS","DEFAULT_ENABLED_TOKEN_SLUGS","DEFAULT_ENABLED_TOKEN_COUNT","PRIORITY_TOKEN_SLUGS","COMMON_TOKEN","isFromBackend","price","priceUsd","percentChange24h","TOKEN_INFO","toncoin","trx","TOKEN_WITH_LABEL","INIT_SWAP_ASSETS","isPopular","DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG","DEFAULT_SWAP_FIRST_TOKEN_SLUG","DEFAULT_SWAP_SECOND_TOKEN_SLUG","DEFAULT_TRANSFER_TOKEN_SLUG","DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG","SWAP_DEX_LABELS","dedust","ston","MULTITAB_DATA_CHANNEL_NAME","ACTIVE_TAB_STORAGE_KEY","WINDOW_PROVIDER_CHANNEL","SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY","PORTRAIT_MIN_ASSETS_TAB_VIEW","LANDSCAPE_MIN_ASSETS_TAB_VIEW","DEFAULT_PRICE_CURRENCY","CURRENCIES","USD","shortSymbol","EUR","RUB","CNY","BTC","BURN_ADDRESS","POPULAR_WALLET_VERSIONS","HISTORY_PERIODS","BROWSER_HISTORY_LIMIT","NFT_BATCH_SIZE","NOTCOIN_VOUCHERS_ADDRESS","BURN_CHUNK_DURATION_APPROX_SEC","NOTCOIN_EXCHANGERS","CLAIM_ADDRESS","CLAIM_AMOUNT","CLAIM_COMMENT","MINT_CARD_ADDRESS","MINT_CARD_COMMENT","MINT_CARD_REFUND_COMMENT","STARS_SYMBOL","GIVEAWAY_CHECKIN_URL","AUTOLOCK_OPTIONS_LIST","selectedName","period","AUTO_CONFIRM_DURATION_MINUTES","PRICELESS_TOKEN_HASHES","STAKED_TOKEN_SLUGS","DEFAULT_OUR_SWAP_FEE","DEFAULT_STAKING_STATE","id","tokenSlug","annualYield","yieldType","balance","pool","tokenBalance","unstakeRequestAmount","instantAvailable","start","end","DEFAULT_NOMINATORS_STAKING_STATE","pendingDepositAmount","SWAP_API_VERSION","JVAULT_URL","HELP_CENTER_URL","home","domainScam","seedScam","ethenaStaking","ALL_TON_DNS_ZONES","suffixes","baseFormat","resolver","collectionName","isTelemint","isUnofficial","TON_DNS_ZONES","filter","DEFAULT_AUTOLOCK_OPTION","WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION","UNKNOWN_TOKEN","userAgent","navigator","test","maxTouchPoints","Directory","Encoding","pause","ms","setTimeout","debounce","waitingTimeout","shouldRunFirst","shouldRunLast","clearTimeout","throttle","isRunning","scheduleFn","runFn","localArgs","_len2","_args","_key2","throttleWithTickEnd","throttleWith","onTickEnd","waiting","_len3","_key3","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","onTickEndCallbacks","fastRaf","withTimeoutFallback","add","requestAnimationFrame","currentCallbacks","cb","currentTimeoutCallbacks","IDLE_TIMEOUT","onIdleCallbacks","beforeUnloadCallbacks","onIdle","requestIdleCallback","deadline","shift","timeRemaining","concat","timeout","onBeforeUnload","isLast","unshift","waitFor","interval","attempts","setCancellableTimeout","timeoutId","MAX_WORKERS","hardwareConcurrency","instances","launchMediaWorkers","fill","Worker","URL","requestMediaWorker","IS_EXTENSION_PAGE_SCRIPT","location","protocol","shouldShowAlert","throttledAlert","alert","handleErrorEvent","ErrorEvent","preventDefault","reason","endsWith","base64","ieee754","customInspectSymbol","Symbol","Buffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","Uint8Array","setPrototypeOf","prototype","encodingOrOffset","TypeError","allocUnsafe","string","encoding","isEncoding","byteLength","actual","fromString","ArrayBuffer","isView","arrayView","isInstance","copy","fromArrayBuffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","b","obj","isBuffer","len","checked","numberIsNaN","fromObject","toPrimitive","assertSize","size","array","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","bidirectionalIndexOf","val","dir","arrayIndexOf","lastIndexOf","arr","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","j","hexWrite","Number","remaining","strLen","parsed","parseInt","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","TYPED_ARRAY_SUPPORT","proto","foo","typedArraySupport","enumerable","poolSize","alloc","allocUnsafeSlow","_isBuffer","compare","a","x","y","list","pos","swap16","swap32","swap64","equals","inspect","max","thisStart","thisEnd","thisCopy","targetCopy","isFinite","toJSON","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","ERR_BUFFER_OUT_OF_BOUNDS","input","received","isInteger","INVALID_BASE64_RE","leadSurrogate","toByteArray","base64clean","src","dst","alphabet","table","i16","BufferBigIntNotDefined","MAX_DP","NAME","INVALID","INVALID_DP","INVALID_RM","DIV_BY_ZERO","P","UNDEFINED","NUMERIC","sd","rm","more","xc","doExponential","isNonzero","charAt","cmp","isneg","yc","l","dp","DP","bl","bt","ri","bz","ai","al","r","rl","q","qc","qi","eq","gt","gte","lt","lte","minus","xlty","plus","xe","ye","mod","ygtx","times","neg","one","prec","sqrt","half","toExponential","toFixed","for","toNumber","strict","toPrecision","_Big_","nl","search","substring","roundDown","roundHalfEven","roundUp","SAFE_EXEC_ENABLED","safeExec","rescue","always","shouldIgnoreError","DETACHED_TAB_URL","ledgerTabId","openLedgerTab","tab","chrome","tabs","create","active","windows","windowId","focused","createLedgerTab","closeLedgerTab","query","closeThisTab","getCurrent","onLedgerTabClose","onClose","closedTabId","onRemoved","callbackState","createPostMessageInterface","api","sendToOrigin","transferables","_e$data","_e$error","_e$error2","_e$reason","_e$reason2","handleErrors","createReverseIFrameInterface","_e$data2","origin","_api$init","lastArg","ImageBitmap","arrayBuffer","MAX_LOG_LENGTH","logs","errorReplacer","metadata","AssertionError","addLog","time","getLogs","level","logDebug","logDebugApi","obj1","obj2","debug","logSelfXssWarnings","selfXssWarnings","es","zh","language","ApiCommonError","ApiAuthError","ApiTransactionDraftError","ApiTransactionError","ApiHardwareError","randomBytes","crypto","getRandomValues","BROKEN_CONNECTION_ERRORS","getLedgerAccountPathByWallet","network","wallet","workchain","getLedgerAccountPathByIndex","isTestnet","MasterChain","isLedgerConnectionBroken","MIN_RESERVE","DEPLOY_POOL","NOTIFICATION","BURN_JETTONS","CANCEL_UNSTAKE","SEND_COMMISSIONS","ADD_REWARDS","APPROVE_TRANSFER","SAVE_UPDATED_REWARDS","MIN_EXCESS","SEND_STAKED_JETTONS","cachedSetTimeout","cachedClearTimeout","module","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","argv","version","versions","on","once","off","emit","prependListener","prependOnceListener","binding","cwd","chdir","umask","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","runUpdatePassOnRaf","currentMeasureTasks","task","setPhase","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","throttledFn","requestMutation","requestForcedReflow","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","maxChunkLength","len2","encodeChunk","lookup","Element","props","HTMLElement","VisualViewport","Document","HTMLInputElement","MouseEvent","Range","onError","nativeMethods","observer","phase","isStrict","newPhase","enableStrict","LAYOUT_CAUSES","causes","entity","_Object$getOwnPropert","nativeGetter","getOwnPropertyDescriptor","onMeasure","nativeMethod","MutationObserver","mutations","_ref3","attributeName","contains","forcedMutationAllowedFor","contentEditable","clear","observe","childList","attributes","subtree","characterData","forceMeasure","forceMutation","nodes","node","suppressStrict","_observer","disconnect","_ref2","propName","HEALTH_CHECK_TIMEOUT","HEALTH_CHECK_MIN_DELAY","updateCallback","isInitialized","initApi","initArgs","windowMethods","createWindowProvider","IS_IOS","ensureWorkerPing","callApi","fnName","callApiWithThrow","startedAt","isResolved","race","_worker","terminate","TELEGRAM_MOBILE_PLATFORM","IS_PWA","matchMedia","matches","standalone","referrer","PLATFORM_ENV","IS_MAC_OS","IS_WINDOWS","IS_LINUX","IS_ANDROID","IS_SAFARI","IS_OPERA","IS_EDGE","IS_FIREFOX","IS_TOUCH_ENV","IS_CHROME_EXTENSION","Boolean","_window$chrome","system","IS_ELECTRON","electron","IS_WEB","DEFAULT_LANG_CODE","USER_AGENT_LANG_CODE","some","getBrowserLanguage","DPR","devicePixelRatio","IS_LEDGER_SUPPORTED","IS_LEDGER_EXTENSION_TAB","global","hash","IS_BIOMETRIC_AUTH_SUPPORTED","credentials","IS_DELEGATED_BOTTOM_SHEET","IS_DELEGATING_BOTTOM_SHEET","isIPad","IS_MULTITAB_SUPPORTED","IS_DAPP_SUPPORTED","IS_IOS_APP","IS_ANDROID_APP","IS_CLIPBOARDS_SUPPORTED","REM","getComputedStyle","documentElement","fontSize","STICKY_CARD_INTERSECTION_THRESHOLD","setScrollbarWidthProperty","el","createElement","cssText","classList","appendChild","width","offsetWidth","clientWidth","setProperty","getIsMobileTelegramApp","_window$Telegram","Telegram","WebApp","parseAccountId","accountId","buildAccountId","account","getMainAccountAddress","addressByChain","values","getAccountTitle","shortenAddress","buildCollectionByKey","collection","byKey","member","groupBy","groupKey","mapValues","newByKey","pick","object","pickTruthy","omit","stringKeys","omitUndefined","stringKey","orderBy","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","sort","unique","compact","areSortedArraysEqual","array1","array2","every","chunkSize","cloneDeep","isObject","isLiteralObject","findLast","predicate","cursor","extractKey","findDifference","set2","diff","filterValues","swapKeysAndValues","mergeSortedArrays","arr1","arr2","compareFn","deduplicateEqual","index1","index2","compareResult","MEANINGFUL_CHAR_LENGTH","address","fromRight","FILLER","SecureStoragePlugin","resolvePromise","capacitorStorageGetItem","_await$get$catch","capacitorStorageSetItem","capacitorStorageRemoveItem","capacitorStorageClear","capacitorStorageKeys","exchangeWithLedger","apduBase64","getTransport","transport","apduBuffer","exchange","localStorageGetItem","localStorage","getItem","localStorageSetItem","setItem","localStorageRemoveItem","removeItem","localStorageClear","localStorageGetAll","localStorageGetMany","localStorageSetMany","items","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","getPrototypeOf","ns","def","current","getOwnPropertyNames","definition","o","chunkId","all","promises","u","miniCssF","Function","hasOwnProperty","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","prev","doneFns","parentNode","removeChild","head","toStringTag","scriptUrl","importScripts","currentScript","tagName","toUpperCase","baseURI","href","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","arePropsShallowEqual","currentProps","newProps","currentKeys","currentKeysLength","logUnequalProps","debugKey","KEYS_TO_IGNORE","counters","renderCountersThrottled","loggerEl","clearEl","innerText","setupOverlay","halfSecondAgo","maxRenders","maxDuration","innerHTML","lastUpdateAt","content","background","textContent","parent","factor","incrementOverlayCounter","createCallbackManager","callbacks","removeCallback","runCallbacks","addCallback","hasCallbacks","SIGNAL_MARK","isSignal","unsubscribesByEffect","createSignal","defaultValue","state","effects","subscribe","effect","unsubscribe","unsubscribes","unsub","counter","counterBlocking","getIsAnimating","setIsAnimating","getIsBlockingAnimating","setIsBlockingAnimating","getIsHeavyAnimating","beginHeavyAnimation","isBlocking","hasEnded","onFullyIdle","VirtualType","MountState","Fragment","DEBUG_SILENT_RENDERS_FOR","renderingInstance","lastComponentId","isParentElement","$element","Tag","Component","source","children","buildChildren","buildFragmentElement","componentInstance","mountState","Unmounted","buildComponentElement","createComponentInstance","tag","buildTagElement","noEmpty","cleanChildren","isEmptyPlaceholder","dropEmptyTail","newChildren","child","buildChildElement","Empty","Text","DEBUG_components","TOTAL","renders","DEBUG_memos","avgRenderTime","calls","hitRate","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsCaptured","runImmediateEffects","captureImmediateEffects","instancesToUpdate","currentCleanups","currentEffects","prepareComponentForFrame","instance","currentElement","renderComponent","forceUpdateComponent","runCapturedImmediateEffects","currentLayoutCleanups","currentLayoutEffects","newRenderedValue","DEBUG_startAt","hooks","memos","refs","componentName","DEBUG_resolveComponentName","performance","renderedValue","Mounted","hasElementChanged","$old","$new","unmountComponent","_componentInstance$ho","byCursor","_effect$releaseSignal","cleanup","releaseSignals","hook","schedule","dependencies","nextValue","setter","onChange","helpGc","_componentInstance$ho2","useState","initial","useEffectBase","isLayout","effectConfig","_byCursor$cursor","cleanupsContainer","effectsContainer","effectId","runEffectCleanup","runEffect","scheduleEffect","dependency","causedBy","prevValue","cleanups","signal","setupSignals","useEffect","useLayoutEffect","useMemo","debugHitRateKey","DEBUG_state","instanceKey","misses","useCallback","newCallback","useRef","useSignal","signalRef","memo","TeactMemoWrapper","DEBUG_contentComponentName","useForceUpdate","setTrigger","trigger","next","shouldSkipUndefined","ref","useSyncEffect","prevDeps","usePrevious","cleanupRef","_cleanupRef$current","useEffectOnce","_cleanupRef$current2","useUniqueId","prefix","idRef","DEBUG_currentRandomId","currentGlobal","isInited","DEBUG_invalidateGlobalOnTickEnd","actionHandlers","container","containers","mapStateToProps","ownProps","mappedProps","forceUpdate","activateContainer","newMappedProps","DEBUG_componentName","DEBUG_updates","updateTime","actions","runCallbacksThrottled","forceOnHeavyAnimation","setUntypedGlobal","newGlobal","forceOutdated","DEBUG_randomId","forceSyncOnIOs","getUntypedGlobal","getUntypedActions","forceOnHeavyAnimationOnce","actionQueue","activationFn","stuckTo","stickTo","getGlobal","setGlobal","getActions","typed","TeactNContainer","useUnmountCleanup","React","_extends","addActionHandler","_actionHandlers$name","handleAction","withGlobal","isEmptyObject","isKeyCountGreater","countToOutnumber","keyCount","isViewAccount","accountType","memoize","ttlSeconds","isCacheDisabled","isDisabledUntil","isStale","lastTime","lastArgs","lastResult","disableCache","seconds","selectAccounts","_global$accounts","accounts","byId","selectNetworkAccountsMemoized","accountsById","fromEntries","selectNetworkAccounts","_global$accounts2","selectCurrentNetwork","settings","selectCurrentAccount","selectAccount","currentAccountId","_selectAccounts","selectAccountOrAuthAccount","auth","firstNetworkAccount","secondNetworkAccount","selectCurrentAccountState","selectAccountState","byAccountId","selectAccountSettings","selectCurrentAccountSettings","isHardwareAccount","selectIsHardwareAccount","selectAllHardwareAccounts","selectIsOneAccount","selectEnabledTokensCountMemoizedFor","tokens","isDisabled","isMnemonicAccount","selectIsMnemonicAccount","selectIsPasswordPresentMemoized","selectIsPasswordPresent","selectVestingPartsReadyToUnfreeze","_selectAccountState","vesting","info","currentVesting","part","partId","selectAccountNftByAddress","nftAddress","_selectAccountState2","nfts","byAddress","selectIsMultichainAccount","_selectAccount","selectIsMultisigAccount","_account$isMultisigBy","isMultisigByChain","selectIsBiometricAuthEnabled","authConfig","kind","selectIsNativeBiometricAuthEnabled","selectIsAllowSuspiciousActions","accountSettings","isAllowSuspiciousActions","selectIsCurrentAccountViewMode","isNftTransferPayload","isTokenTransferPayload","selectCurrentDappTransferTotalsMemoized","transactions","amountsBySlug","addSlugAmount","amount","isScam","isDangerous","nftCount","transaction","networkFee","selectDappTransferInsufficientTokensMemoized","balances","tokensBySlug","insufficientTokens","requiredAmount","token","selectCurrentDappTransferTotals","currentDappTransfer","selectDappTransferInsufficientTokens","_accountState$balance","accountState","bySlug","tokenInfo","precision","roundingMode","selectAccountTokensMemoizedFor","balancesBySlug","isSortByValueEnabled","areTokensWithNoCostHidden","isNewAccount","getIsNewAccount","_accountSettings$dele","deletedSlugs","_accountSettings$alwa","_accountSettings$alwa2","color","codeHash","balanceBig","totalValue","hasCost","isPricelessTokenWithBalance","alwaysShownSlugs","alwaysHiddenSlugs","change24h","tokenA","tokenB","orderedSlugs","priorityA","priorityB","selectCurrentAccountTokens","selectAccountTokens","selectCurrentAccountTokenBalance","_selectCurrentAccount","selectCurrentToncoinBalance","selectToken","selectMycoin","selectChainTokenWithMaxBalanceSlow","maxToken","currentToken","getKey","getFromCache","updatePoisoningCache","tx","fromAddress","timestamp","addToCache","getIsTransactionWithPoisoning","clearPoisoningCache","TRANSACTION_TYPE_TITLES","stake","unstake","unstakeRequest","callContract","excess","contractDeploy","bounced","mint","burn","auctionBid","dnsChangeAddress","dnsChangeSite","dnsChangeSubdomains","dnsChangeStorage","dnsDelete","dnsRenew","liquidityDeposit","liquidityWithdraw","STAKING_TRANSACTION_TYPES","DNS_TRANSACTION_TYPES","parseTxId","txId","subId","getIsTxIdLocal","getIsBackendSwapId","getActivityTokenSlugs","activity","nft","getIsActivitySuitableForFetchingTimestamp","getIsActivityPending","getTransactionTitle","tense","translate","titles","isIncoming","isScamTransaction","_transaction$metadata","shouldShowTransactionComment","comment","encryptedComment","getTransactionAmountDisplayMode","shouldShowTransactionAddress","toAddress","marketplace","isOurStakingTransaction","shouldShowTransactionAnnualYield","getActivityIdReplacements","prevActivities","nextActivities","prevLocalActivities","prevChainActivities","getLocalActivityIdReplacements","getChainActivityIdReplacements","idReplacements","nextActivityIds","nextChainActivities","localActivity","prevId","chainActivity","doesLocalActivityMatch","nextActivitiesByMessageHash","externalMsgHashNorm","nextSubActivities","_localActivity$extra","withW5Gasless","normalizedAddress","fromAmount","shouldHide","selectNewestActivityTimestamps","activities","newestActivitiesBySlug","selectLocalActivitiesSlow","_global$byAccountId$a","localActivityIds","selectPendingActivitiesSlow","_global$byAccountId$a2","pendingActivityIds","ids","selectIsHistoryEndReached","isMainHistoryEndReached","isHistoryEndReachedBySlug","AppState","AuthState","BiometricsState","TransferState","ScamWarningType","SignDataState","DomainRenewalState","DomainLinkingState","SwapState","SwapInputSource","SwapErrorType","SwapType","DappConnectState","HardwareConnectState","StakingState","VestingUnfreezeState","SettingsState","MintCardState","ActiveTab","ContentTab","MediaType","LoadMoreDirection","getChainConfig","findChainConfig","chainByNativeSlug","getIsNativeToken","getIsTonToken","withNative","getNativeToken","getChainBySlug","getIsServiceToken","buildUserToken","createTokenList","swapTokenInfo","sortFn","filterFn","keywords","canSwap","selectPopularTokensMemoizedFor","popularTokenOrder","orderMap","selectSwapTokensMemoizedFor","localeCompare","selectAccountTokensForSwapMemoizedFor","selectSwapTokens","_selectCurrentAccount3","selectCurrentSwapTokenIn","tokenInSlug","currentSwap","selectCurrentSwapTokenOut","tokenOutSlug","selectSwapType","tokenInChain","tokenOutChain","OnChain","CrosschainFromWallet","CrosschainToWallet","selectIsSwapDisabled","restrictions","isSwapDisabled","explainApiTransferFee","diesel","shouldUseDiesel","dieselKey","realFeeInDiesel","exampleFromAmount","exampleToAmount","exchangeRate","convertFee","realFee","nativeAmount","dieselRealFee","nativeRealFee","isGasless","canTransferFullBalance","fullFee","terms","native","remainingFee","nativeSum","excessFee","explainGaslessTransferFee","fee","explainGasfullTransferFee","getMaxTransferAmount","getDieselTokenAmount","isDnsDomain","getDnsDomainZone","zone","suffix","base","isTonDnsNft","collectionAddress","getTonDnsExpirationDate","dnsExpiration","getDomainsExpirationDate","nftByAddress","minDate","nftOrAddress","expirationDate","isValidAddressOrDomain","allowPrefix","config","selectCurrentTransferMaxAmount","currentTransfer","selectTokenMatchingCurrentTransferAddressSlow","currentTokenSlug","currentChain","isCheckingPrefix","availableChains","selectAccountStakingStatesMemoizedFor","stateDefault","stateById","states","selectAccountStakingStates","staking","stakingDefault","selectAccountStakingStatesBySlugMemoizedFor","stakingStates","selectAccountStakingStatesBySlug","selectAccountStakingState","stakingId","shouldUseNominators","selectAccountStakingHistory","stakingHistory","selectIsStakingDisabled","selectTonDnsLinkedAddress","linkedAddressByAddress","accountIds","apiUpdate","isElectron","isNativeBottomSheet","isIosApp","isAndroidApp","newestActivityTimestamps","isDefaultEnabled","areAllDisabled","toggleTonMagic","isEnabled","toggleTonProxy","toggleDeeplinkHook","changeBaseCurrency","currency","BiometryType","BiometricAuthError","NativeBiometric","NativeBiometricWeb","WINDOW_RESIZE_THROTTLE_MS","WINDOW_ORIENTATION_CHANGE_THROTTLE_MS","SAFE_AREA_INITIALIZATION_DELAY","initialHeight","innerHeight","virtualKeyboardOpenListeners","currentWindowSize","updateSizes","patchVh","toggleSafeAreaClasses","safeAreaTop","safeAreaBottom","getWindowSize","updateSafeAreaValues","innerWidth","height","screenHeight","screen","getSafeAreaTop","getSafeAreaBottom","Keyboard","adjustBodyPaddingForKeyboard","keyboardHeight","visualViewport","pageTop","vh","paddingBottom","getPropertyValue","toggle","webApp","isBiometricInited","isNativeBiometricAuthSupported","isFaceIdAvailable","isTouchIdAvailable","disableSwipeRequests","getIsTelegramBiometricsRestricted","_webApp2","biometricManager","BiometricManager","isBiometricAvailable","isAccessGranted","isAccessRequested","getTelegramApp","getTelegramAppAsync","updateSafeAreaProperties","top","left","right","bottom","safeAreaInset","contentTop","contentLeft","contentRight","contentBottom","contentSafeAreaInset","updateFullscreenState","isFullscreen","openFullscreen","disableTelegramMiniAppSwipeToClose","closeFullscreen","enableTelegramMiniAppSwipeToClose","onFullscreenFailed","_webApp3","disableVerticalSwipes","_webApp4","enableVerticalSwipes","requestBiometricAccess","requestAccess","accessGranted","setBiometricCredentials","password","updateBiometricToken","updated","verifyIdentity","authenticate","success","PubkeyAlg","RP_NAME","USER_NAME","createCredential","rpId","hostname","userHandle","credBlob","publicKey","challenge","rp","user","displayName","pubKeyCredParams","alg","ES256","RS256","Ed25519","authenticatorSelection","requireResidentKey","userVerification","extensions","hmacCreateSecret","excludeCredentials","credential","getClientExtensionResults","verify","transports","getTransports","credentialId","rawId","allowCredentials","getCredBlob","assertion","getPassword","AbortController","aborted","webAuthn","_window$electron","encryptedPassword","encryptPassword","setTelegramBiometricCredentials","setCredentials","username","server","deleteCredentials","_window$electron2","decryptPassword","isVerified","verifyTelegramBiometricsIdentity","subtitle","isWeakAuthenticatorAllowed","maxAttempts","getCredentials","App","AppWeb","SplashScreen","SplashScreenWeb","AirAppLauncher","SafeArea","SafeAreaWeb","AppLauncher","AppLauncherWeb","BottomSheet","stopEvent","stopPropagation","listenOnce","handleEvent","_navigator","userAgentData","devicePlatform","initConnectorString","bridgeKey","tonConnectProperties","TON_CONNECT_BRIDGE_METHODS","updateHandlers","sanitizeUrl","open","close","closest","tonconnect","listen","initTonConnect","CONNECT_EVENT_ERROR_CODES","SEND_TRANSACTION_ERROR_CODES","requestId","buildConnectError","UNKNOWN_ERROR","buildDappRequest","isUrlEnsured","buildBridgeApi","pageUrl","closeBrowser","tonConnectApi","openLoadingOverlay","closeLoadingOverlay","connect","protocolVersion","BAD_REQUEST_ERROR","_request$items","manifestUrl","verifyConnectRequest","restoreConnection","send","_global$byAccountId$d","dapps","dapp","UNKNOWN_APP_ERROR","dappRequest","applyScrollPatch","anyRequest","buildTonConnectBridgeApi","prefixedTonConnectApi","newEntries","v","prefixApi","openDeeplinkOrUrl","isExternal","isFromInAppBrowser","useStateRef","useLastCallback","_ref$current","InAppBrowserPostMessageAdapter","inAppBrowser","executeScript","URL_REGEX","VALID_PROTOCOLS","EXPLORER_CONFIGURATIONS","explorer","getHostnameFromUrl","getExplorerName","getExplorerBaseUrl","getExplorerTransactionUrl","transactionHash","getExplorerAddressUrl","getExplorerNftUrl","isTelegramUrl","getCardNftImageUrl","mtwCardId","SIMPLE_MARKDOWN_REGEX","renderText","filters","entities","match","entityResult","splittenParts","line","trimmedLine","trimStart","indentLength","repeat","cacheApi","caches","cacheName","SHORT_SYMBOLS","formatNumber","fractionDigits","noTruncate","bigValue","isNegative","formatted","wholePart","fractionPart","applyThousandsGrouping","formatCurrency","addCurrency","formatCurrencyExtended","noSign","isZeroNegative","numericValue","formatCurrencySimple","getShortCurrencySymbol","formatBaseCurrencyAmount","baseCurrency","defaultLangPack","defaultLangPackJson","SUBSTITUTION_REGEX","PLURAL_OPTIONS","PLURAL_RULES","de","pl","th","tr","uk","langPack","currentLangCode","createLangFn","format","pluralValue","_langPack","cacheValue","langString","preferredPluralOption","optionIndex","getPluralOption","template","otherValue","formattedValue","translationSlices","initialValue","processTemplate","processedTemplate","RegExp","tokenValue","processTemplateJsx","processTranslation","getTranslation","setLanguage","newLangPack","Request","remote","cacheData","Blob","Response","fetchRemote","langInfo","isRtl","langName","useLang","langProvider","buildClassName","clamp","isBetween","SwipeDirection","getDistance","hypot","pageX","pageY","getTouchCenter","lastClickTime","lethargy","stability","sensitivity","tolerance","delay","lastUpDeltas","lastDownDeltas","deltasTimestamp","check","lastDelta","originalEvent","wheelDelta","deltaY","detail","isInertia","direction","lastDeltas","lastDeltasOld","lastDeltasNew","oldSum","newSum","oldAverage","newAverage","captureEvents","captureEvent","hasMoved","hasSwiped","isZooming","initialDistance","wheelZoom","initialZoom","initialDragOffset","isDragCanceled","windowSize","initialSwipeAxis","initialTouchCenter","minZoom","maxZoom","onCapture","_options$onCapture","excludedClosestSelector","includedClosestSelector","withNativeDrag","withCursor","onDrag","onMove","onRelease","passive","touches","selectorToPreventScroll","querySelectorAll","scrollable","overflow","onDoubleClick","centerX","centerY","onClick","button","newWindowSize","onZoom","endDistance","touchCenter","dragOffsetX","dragOffsetY","zoomFactor","initialCenterX","initialCenterY","currentCenterX","currentCenterY","shouldPreventScroll","onSwipe","xAbs","yAbs","threshold","swipeThreshold","axis","currentSwipeAxis","offsets","Left","Right","Up","Down","processSwipe","releaseWheelDrag","releaseWheelZoom","onWheelCapture","onWheel","doubleTapZoom","is","deltaX","ctrlKey","metaKeyPressed","metaKey","shiftKey","delta","zoom","onWheelZoom","isUserEvent","sign","dx","dy","onWheelDrag","withWheelDrag","isNotPassive","keyToHandlerName","Enter","Backspace","Delete","Esc","Escape","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","handlers","onEnter","onDelete","onBackspace","onEsc","onUp","onDown","onLeft","onRight","onTab","captureKeyboardListeners","hasActiveHandlers","handleKeyDown","handlerName","option","currentEventHandlers","findIndex","releaseKeyboardListener","keyHandlers","handlerOrOptions","noStopPropagation","shouldPreventDefault","disableSwipeToClose","enableSwipeToClose","trapFocus","focusableElements","currentFocusedIndex","em","isSameNode","activeElement","newFocusedIndex","focus","cssColorToHex","cssColor","parseFloat","Style","Animation","StatusBar","NavigationBarPluginEvents","NavigationBar","NavigationBarWeb","prefersDark","currentTheme","forcedDarkStatusBarBackground","switchTheme","theme","isInModal","setThemeValue","setStatusBarStyle","_document$querySelect","querySelector","_getTelegramApp","isDarkTheme","colorScheme","handlePrefersColorSchemeChange","_getTelegramApp2","_getTelegramApp3","_getTelegramApp4","hexColor","setHeaderColor","setBackgroundColor","setBottomBarColor","forceDarkBackground","currentAppTheme","isSystemDark","isModalOpen","Dark","Light","setStyle","setColor","darkButtons","switchStatusBar","onThemeChanged","telegramApp","onEvent","queriesMap","createQueryEntry","mql","dispatchers","useMediaQuery","setState","initializeWithValue","getInitialState","querySubscribe","queryUnsubscribe","isPortrait","useDeviceScreen","isSmallHeight","isLandscape","getIsPortrait","useEffectWithPrevDeps","prevDepsRef","controlledByMain","textInputTypes","safeAreaCache","safeAreaPromise","getSafeAreaInsets","insets","currentKey","isForcedFullSize","useOpenFromMainBottomSheet","isInput","isContentEditable","_controlledByMain$get","globalJson","dispatchEvent","Event","controlledByNative","prepare","_controlledByNative$g","closeCurrent","lastOpenCall","runDebounce","isGlobalHandlerAttached","uniqueId","updateBackButtonState","backButton","BackButton","show","handleBackButtonClick","hide","offClick","PATH_BASE","pathname","historyUniqueSessionId","historyState","historyCursor","isAlteringHistory","deferredHistoryOperations","deferredPopstateOperations","applyDeferredHistoryOperations","goOperations","op","stateOperations","goCount","history","go","processStateOperations","deferHistoryOperation","historyOperation","resetHistory","onBack","back","replaceState","cleanupClosed","countClosed","isClosed","cleanupTrashedState","_historyState$i$onBac","_historyState$i","useHistoryBack","isActive","shouldBeReplaced","shouldIgnoreForTelegram","lastOnBack","indexRef","telegramIdRef","wasReplaced","isFirstRender","pushState","shouldReplace","previousRecord","_previousRecord$markR","markReplaced","processBack","prevIsActive","registerTelegramCallback","unregisterTelegramCallback","TEST_getHistoryState","TEST_getHistoryCursor","previousUniqueSessionId","alreadyClosedCount","_historyState$i$onBac2","_historyState$i2","NON_BUBBLEABLE_EVENTS","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","resolveEventType","eventType","canUseEventDelegation","realEventType","asCapture","removeDelegatedListener","realEvent","events","furtherCallsPrevented","Reflect","documentListenersCount","delegatedHandlersCount1","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","delegationElementsCount","delegatedEventTypesCount","eventTypes","SVG_NAMESPACE","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoCapitalize","autoComplete","autoCorrect","autoPlay","spellCheck","INDEX_KEY_PREFIX","SELECTION_STATE_ATTRIBUTE","headsByElement","extraClasses","extraStyles","renderWithVirtual","parentEl","$current","$parent","currentContext","_$new","_$new2","_$new3","skipComponentUpdate","nextSibling","namespace","isCurrentComponent","isNewComponent","$newAsReal","isCurrentFragment","isNewFragment","xmlns","updateComponent","setupComponentUpdateListener","newTarget","initComponent","context","mountChildren","firstChild","createNode","insertBefore","setElementRef","remount","getNextSibling","renderChildren","forceMoveToEnd","$currentAsReal","currentTarget","$newAsTag","processControlled","currentEntries","currentValue","removeAttribute","updateAttributes","Mounting","mountComponent","fragmentEl","placeholderTarget","createComment","$child","$renderedChild","createTextNode","createElementNS","defaultChecked","processUncontrolledOnMount","componentNextSibling","isComponent","isFragment","unmountChildren","replaceChild","unmountRealTree","_fragment$placeholder","removeAllDelegatedListeners","currentEl","DEBUG_checkKeyUniqueness","teactFastList","currentChildren","newKeys","$newChild","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","teactOrderKey","fragmentIndex","fragmentSize","currentPreservedIndex","currentChildInfo","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","childNodes","renderFastListChildren","currentFragment","newFragment","_currentFragment$plac","siblingAfterFragment","currentChildrenLength","newChildrenLength","maxLength","createDocumentFragment","lastCurrentChild","fragmentNextSibling","_ref$onChange","isValueControlled","isCheckedControlled","onInput","onBlur","selectionStart","selectionEnd","isCaretAtEnd","setSelectionRange","selectionState","dataset","updateClassName","inputEl","selectionStateJson","updateStyle","__html","resolveDelegationRegistry","existing","newSet","resolveDelegatedEventTypes","addDelegatedListener","htmlElement","className","extraArray","applyExtraStyles","addExtraClass","removeExtraClass","toggleExtraClass","force","_extraClasses$get","setExtraStyles","styles","standardStyles","$head","useSignalEffect","isFirstRun","_unsubscribesByEffect","cleanupEffect","resolverOrDependency","isAsync","getValue","setValue","resolverRef","runCurrentResolver","currentResolver","resolverOrSignal","valueRef","isSync","useLayoutEffectWithPrevDeps","CLOSE_DURATION","useShowTransition","isOpen","noMountTransition","noOpenTransition","noCloseTransition","closeDuration","shouldForceOpen","onCloseAnimationEnd","localRef","closingTimeoutRef","getState","optionsRef","onCloseEndLast","useSyncEffectWithPrevDeps","prevIsOpen","applyClassNames","shouldRender","hasOpenClass","isClosing","withShouldRender","useDerivedState","getIsClosing","useDerivedSignal","useToggleClass","isDoubled","ariaLabel","forFormId","isSubmit","isPrimary","isSecondary","isSmall","isSimple","isText","isLoading","isRound","isDestructive","shouldStopPropagation","onMouseDown","onContextMenu","isClicked","setIsClicked","handleClick","loadingClassName","loadingInit","loadingStart","primary","secondary","sizeSmall","disabled","destructive","clicked","LoadingDots","loadingDots","containerId","elementRef","TeactDOM","CLOSE_DURATION_PORTRAIT","getModalCloseSignal","setModalCloseSignal","openNativeBottomSheetModals","FreezeWhenClosedModal","dialogRef","dialogClassName","titleClassName","contentClassName","doesWantToBeOpened","isTemporarilyClosed","isCompact","nativeBottomSheetKey","forceFullNative","forceBottomSheet","isInAppLock","noResetFullNativeOnBlur","noBackdrop","noBackdropClose","header","hasCloseButton","onCloseProp","modalRef","localDialogRef","swipeDownDateRef","getInAppBrowser","enable","useHideBrowser","animationDuration","isSlideUp","toggleSelfFullSize","isFullSize","isBrowserHidden","setIsBrowserHidden","isDelegatingToNative","isDelegating","shouldOpen","prevShouldOpen","_closeCurrent","closeNext","delegate","release","useDelegatingBottomSheet","noResetHeightOnBlur","dialogEl","openSelf","offsetHeight","backgroundColor","closeSelf","isDelegatedAndOpen","safeArea","setSafeArea","maxHeight","_ref4","prevForceFullNative","blurTimeout","onFocus","opacity","scrollTop","useDelegatedBottomSheet","lastScrollRef","scrollEl","getCanCloseModal","fullClassName","modal","slideUpAnimation","inAppLock","backdropFullClass","backdrop","contentFullClassName","contentCompact","Portal","tabIndex","role","dialog","header_wideContent","header_noClose","singleTitle","Button","closeButton","closeIcon","isAppLockActive","currentBrowserOptions","animationLevel","setupDappBridge","cleanupDappBridge","useInAppBrowserBridgeProvider","bridgeInjectionCode","features","maxMessages","types","appName","appVersion","maxProtocolVersion","tonConnectGetDeviceInfo","handleBrowserClose","openBrowser","isShown","disable","browserTitle","browserSubtitle","ADDITIONAL_INAPP_BROWSER_OPTIONS","cordova","InAppBrowser","INAPP_BROWSER_OPTIONS","originalHide","originalShow","originalClose","closedPromise","_inAppBrowser","closeAllOverlays","_getInAppBrowser","closeAnyModal","closeMediaViewer","replaceActivityId","oldId","replaceMap","SUBPROJECT_HOST_ENDING","openUrl","isSubproject","allowedOrigin","isInIframeWhitelist","couldOpenApp","completed","openAppSafe","host","handleUrlClick","resolveRenderPromise","renderPromise","TON_PROTOCOL","TONCONNECT_PROTOCOL","TONCONNECT_PROTOCOL_SELF","SELF_PROTOCOL","SELF_UNIVERSAL_URLS","TONCONNECT_UNIVERSAL_URL","CHECKIN_URL","DeeplinkCommand","urlAfterSignIn","urlOptions","isTonDeeplink","isTonConnectDeeplink","isSelfDeeplink","processDeeplink","returnUrl","processTonConnectDeeplink","deeplink","convertSelfDeeplinkToSelfUrl","searchParams","command","isLedger","ledger","Air","switchToAir","CheckinWithR","_pathname$match","Giveaway","_pathname$match2","giveawayId","Swap","showError","startSwap","amountIn","toNumberOrEmptyString","BuyWithCrypto","BuyWithCard","openOnRampWidgetModal","Stake","startStaking","Transfer","processTonDeeplink","convertSelfUrlToTonDeeplink","Explore","closeSettings","openExplore","setActiveContentTab","_getGlobal$exploreDat","matchingSite","exploreData","sites","processSelfDeeplink","startTransferParams","parseTonDeeplink","startTransfer","setLandscapeActionsActiveTabIndex","adaptedDeeplink","getDeeplinkSearchParam","binPayload","jettonAddress","stateInit","exp","supportedParams","hasUnsupportedParams","param","replaceAllSpacesWithPlus","rawParseTonDeeplink","transferParams","globalToken","minter","selectTokenByMinterAddress","accountToken","accountTokens","selectAccountTokenBySlug","accountNft","selectCurrentAccountNftByAddress","omitProtocol","forceHttpsProtocol","parseDeeplinkTransferParams","tonDeeplink","selfUniversalUrl","PushNotifications","selectNotificationTonAddressesSlow","maxCount","resultCount","getCapacitorPlatform","nextUpdatePushNotifications","handlePushNotificationActionPerformed","notification","showAnyAccountTx","showAnyAccountTokenActivity","openAnyAccountStakingInfo","switchAccountAndOpenUrl","openDomainRenewalModal","notificationData","action","requiredAccount","selectAccountIdByAddress","domainAddress","addresses","handlePushNotificationRegistration","userToken","registerNotifications","notificationAccounts","pushNotifications","enabledAccounts","capture","statusBarHeight","capacitorAppLaunchDeeplinkProcessedAt","safeAreaInsets","getIsNativeBiometricAuthSupported","getIsFaceIdAvailable","getIsTouchIdAvailable","getDoesUsePinPad","ClipboardWeb","clipboard","writeText","ClipboardItem","clipboardItemInput","readText","clipboardItems","clipboardBlob","getType","_getBlobData","readAsText","onloadend","Clipboard","Haptics","HapticsWeb","vibrate","HapticFeedback","impactOccurred","impact","vibrateOnError","notificationOccurred","Medium","vibrateOnSuccess","withPauseOnEnd","textCopyEl","copyTextToClipboard","readClipboardContent","readTextFromClipboard","isMnemonicPrivateKey","mnemonic","EQUAL","DELETE","__delete","DELETE_ALL_CHILDREN","__deleteAllChildren","deepDiff","value2","object1","object2","keys1","keys2","subValue1","subValue2","subDiff","deepMerge","oldValue","reduceDiff","getIsInBackgroundLocal","setIsInBackground","hasFocus","getIsInBackground","handleBlur","handleFocus","useBackgroundMode","lastOnBlur","lastOnFocus","isBackgroundModeActive","BroadcastChannel","messageIndex","initMultitab","noPubGlobal","onGlobalChange","handleGlobalChange","handleMultitabMessage","omitLocalOnlyKeys","recipient","doesMessageRecipientMatch","allSettled","callActionInMain","callActionInNative","callApiInMain","INITIAL_STATE","appState","Auth","none","biometrics","None","hardware","hardwareState","Connect","currentDomainRenewal","currentDomainLinking","slippage","currentDappSignData","currentStaking","swapVersion","tokenPriceHistory","Initial","areTinyTransfersHidden","canPlaySounds","isAppLockEnabled","autolockValue","dialogs","notifications","stateVersion","isLimitedRegion","isOnRampDisabled","isNftBuyingDisabled","mediaViewer","areDeepEqual","type1","isArray1","member1","key1","key2","isPartialDeepEqual","newPartial","updateAuth","authUpdate","updateAccounts","setIsPinAccepted","isPinAccepted","clearIsPinAccepted","createAccount","partial","titlePostfix","isMnemonicImported","shouldForceAccountEdit","_account$title","accountAmount","isMainnet","viewWalletsCount","titlePrefix","postfix","count","updateAccount","createAccountsFromGlobal","updateCurrentAccountState","updateAccountState","withDeepCompare","doesAccountExist","updateSettings","settingsUpdate","updateAccountSettings","updateCurrentAccountSettings","updateBiometrics","biometricsUpdate","updateCurrentAccountId","shouldAvoidSwapEstimation","isEstimating","Blockchain","Password","isSwapEstimateInputEqual","swap1","swap2","amountKey","inputSource","In","isMaxAmount","isSwapFormFilled","getSwapEstimateResetParams","amountOut","amountOutMin","priceImpact","limits","dieselStatus","estimates","bestRateDexLabel","realNetworkFee","swapFee","swapFeePercent","ourFee","ourFeePercent","dieselFee","rawUpdateCurrentSwap","updateCurrentSwap","doAvoidEstimation","globalBefore","globalAfter","doesSwapChangeRequireEstimation","_ref5","doesSwapChangeRequireDexUnselect","isDexLabelChanged","clearCurrentSwap","updateCurrentTransferByCheckResult","preserveMaxTransferAmount","updateCurrentTransfer","toAddressName","addressName","clearCurrentTransfer","prevGlobal","nextGlobal","previousMaxAmount","updateCurrentTransferLoading","setCurrentTransferAddress","updateCurrentSignature","currentSignature","updateCurrentStaking","updateAccountStaking","updateDappConnectRequest","dappConnectRequest","clearDappConnectRequest","updateCurrentDappTransfer","clearCurrentDappTransfer","updateCurrentDappSignData","clearCurrentDappSignData","compareActivities","sortActivityIds","activityById","id1","id2","mergeSortedActivityIds","ids1","ids2","lists","areActivityIdsSorted","addNewActivities","newActivities","idsBySlug","idsMain","newIdsBySlug","buildActivityIdsBySlug","_pendingActivityIds","mergeIdsBySlug","getNewestActivitiesBySlug","addPastActivities","pastActivities","isEndReached","removeActivities","_ids","_idsMain","_localActivityIds","affectedTokenSlugs","activityIds","tokenSlugs","getActivityListTokenSlugs","pendingIds","newestActivityId","oldIdsBySlug","newIds","addNft","shouldAppendToEnd","orderedAddresses","updateNft","_nfts$byAddress","updateAccountSettingsBackgroundNft","_settings$cardBackgro","cardBackgroundNft","updateVesting","updateMintCards","currentMintCard","updateCurrentDomainRenewal","updateCurrentDomainLinking","updateHardware","hardwareUpdate","resetHardware","switchAccount","newNetwork","switchAccountAndClearGlobal","changeNetwork","selectMnemonicForCheck","worldsCount","rnd","reduceGlobalForDebug","reduced","_ref15","getIsTinyOrScamTransaction","resolveSwapAssetId","asset","resolveSwapAsset","anyId","getIsSupportedChain","getIsInternalSwap","isMultichain","updateTokenInfo","Main","isFirstAccount","isPasswordPresent","nextAuthState","createBackup","createWallet","createPin","createBiometrics","createPassword","checkPassword","promiseCalls","forceAddingTonOnlyAccount","mnemonicCheckIndexes","afterCreatePassword","requestConfetti","importWalletConfirmBiometrics","confirmBiometrics","biometricsStep","pin","isImporting","importWalletConfirmPin","confirmPin","importWalletCreateNativeBiometrics","createNativeBiometrics","skipCreateNativeBiometrics","importWalletCreatePin","isPasswordNumeric","createHardwareAccounts","withCredential","authApi","isAddAccountModalOpen","afterConfirmDisclaimer","disclaimer","disclaimerAndBackup","hardwareSelectedIndices","ledgerApi","wallets","importLedgerWallet","addHardwareAccounts","_ref6","_wallets$","nextActiveAccountId","updatedGlobal","walletInfo","driver","areSettingsOpen","hardwareWallet","tryAddNotificationAccount","afterSignIn","resetApiSettings","_ref7","isBackupRequired","importWalletCheckPassword","importWallet","about","_ref8","InvalidMnemonic","hasAccounts","importWalletCreateBiometrics","importWalletCreatePassword","confirmDisclaimer","ready","_ref9","_ref0","_ref1","TurnOnRegistration","TurnOnVerification","TurnOnPasswordConfirmation","TurnOnComplete","setInMemoryPassword","_ref10","oldPassword","TurnOffComplete","TurnOffWarning","TurnOffBiometricConfirmation","TurnOffCreatePassword","_ref11","nativeBiometricsError","verifyTelegramBiometricIdentity","safetyRules","mnemonicPage","checkWords","isBackupCreated","afterCheckMnemonic","accountConfigJson","storageData","showNotification","Unexpected","_ref12","isNew","currentWalletTitle","ledgerInfo","_ref13","_ref14","resolvedAddresses","closeAddAccountModal","importViewAccount","isImportModalOpen","pastActivityThrottle","initialActivityWaitingByAccountId","fetchPastActivities","waitInitialActivityLoading","fetchedActivities","toTimestamp","selectLastActivityTimestamp","shouldFetchMore","filteredResult","getTonOperationFees","operation","gas","real","getTonStakingFees","claim","getUnstakeTime","unlockTime","getStakingTitle","stakingType","getStakingStateStatus","getIsActiveStakingState","unclaimedRewards","getIsLongUnstake","getFullStakingBalance","errorCodeToMessage","InvalidAmount","InvalidAddress","InvalidToAddress","InvalidStateInit","InsufficientBalance","DomainNotResolved","WalletNotInitialized","InvalidAddressFormat","PartialTransactionFailure","IncorrectDeviceTime","UnsuccesfulTransfer","ConcurrentTransaction","InactiveContract","HardwareOutdated","BlindSigningNotEnabled","RejectedByUser","ProofTooLarge","ServerError","onLine","DebugError","InvalidPassword","prepareTransfer","hardwareConfirmState","updateForm","isHardware","isPasswordCorrect","handleTransferResult","isErrorTransferResult","reportErrorTransferResult","_error","isInlineError","prepareDappOperation","doesNeedSigning","handleDappSignatureResult","getDappConnectionUniqueId","_sseOptions","_sse","sseOptions","appClientId","sse","cancelDappOperation","clearState","promiseId","apiUpdateDappOperation","isStateActive","updateState","currentPromiseId","isAnyDappModalActive","connectionType","explainSwapFee","shouldSwapBeGasless","nativeTokenBalance","getBigNativeTokenInBalance","getExcessFee","shouldShowOurFee","isExact","networkTerms","addOurFeeToTerms","networkFeeCoveredByDiesel","bigMax","realNetworkTerms","explainGaslessSwapFee","isNativeIn","explainGasfullSwapFee","getMaxSwapAmount","swapType","tokenInBalance","tokenIn","fullNetworkFee","maxAmount","isInsufficientNative","_findChainConfig3","nativeTokenInBalance","isOurFeeNative","shouldLoadWithBudget","throttleKey","isMnemonicChecked","isSigned","_global$tokenInfo","importedSlugs","_global$tokenInfo$byS","importToken","apiToken","shouldUpdateBalance","changeBalance","reconnectLedger","showDialog","verifyAddress","activeContentTab","apiSwapAsset","_global$walletVersion","currentVersion","walletVersions","stakingState","StakeInitial","UnstakeInitial","isUnstaking","UnstakeConnectHardware","UnstakePassword","tokenAmount","StakeConnectHardware","StakePassword","UnstakeConfirmHardware","StakeConfirmHardware","unstakeAmount","isLongUnstakeRequested","UnstakeComplete","StakeComplete","clearCurrentStaking","changeCurrentStaking","openStakingInfo","isStakingInfoModalOpen","shouldReopenModal","openStakingInfoOrStart","ClaimConnectHardware","ClaimPassword","_getTonStakingFees$cl","ClaimConfirmHardware","isEthenaStaking","ClaimComplete","permissions","proof","ConfirmHardware","isPasswordRequired","signingResult","signature","proofSignature","getDapps","validUntil","vestingAddress","signedTransactions","payloadToSign","signedData","brokenDapp","deleteDapp","updateConnectedDapps","dappLastOpenedDatesByUrl","clearConnectedDapps","connectedDapps","removeConnectedDapp","Info","isAddressRequired","addSiteToBrowserHistory","emulation","closeDappTransfer","WarningHardware","closeDappSignData","isSse","_global$dappConnectRe","pairsCache","CACHE_DURATION","SERVER_ERRORS_MAP","NotEnoughLiquidity","InvalidPair","TooSmallAmount","buildSwapBuildRequest","_findChainConfig","_estimates$","currentDexLabel","tokenOut","toAmount","nativeTokenIn","toMinAmount","shouldTryDiesel","dexLabel","routes","requiredState","swapId","requiredTokenInSlug","requiredTokenOutSlug","withResetAmount","shouldReset","shouldResetOnClose","swapBuildRequest","buildResult","swapHistoryItem","hashes","Complete","transfers","activityId","isMutlichainAccount","supportedChains","getSupportedChains","shouldSendTonTransaction","shouldSendTronTransaction","shouldSendTransaction","shouldSendTokenToExternalWallet","tonAddress","swapTransactionRequest","swapItem","WaitTokens","payinAddress","cex","payoutAddress","payinExtraId","transferOptions","transferResult","newTokenInSlug","newTokenIn","adjustedAmountIn","newTokenOutSlug","newTokenOut","adjustedAmountOut","Out","initialGlobal","isEstimatingSwap","isEstimateInputIntact","swapUpdate","shouldStop","isTonOnlySwap","shouldShowAllPairs","_global$swapPairs2","isLoaded","assetId","pairs","isTonTokenIn","pair","isTonTokenOut","countTonTokens","isReverseProhibited","swapPairs","loadSwapPairs","_global$swapPairs","isFromAmountMax","processNativeMaxSwap","estimateAmount","toncoinBalance","estimate","UnexpectedError","NotEnoughForFee","other","buildSwapEstimates","currentEstimate","newEstimates","proposedBestDexLabel","_findChainConfig2","selectedEstimate","availableEstimates","variant","networkFeeBigint","dieselFeeBigint","canAffordSwapEstimateVariant","chooseSwapEstimate","estimateDexSwap","txDraft","convertTransferFeesToSwapFees","amountInBigint","fromMin","fromMax","ChangellyMinSwap","ChangellyMaxSwap","estimateCexSwap","finalGlobal","estimateSwapConcurrently","swaps","nonExistentIds","nonExistentSwaps","newEstimate","updateTokenPriceHistory","SCAM_DOMAIN_ADDRESS_REGEX","shouldShowDomainScamWarning","shouldEncrypt","withDiesel","isGaslessWithStars","isNftTransfer","isBase64Data","allowGasless","_result","_result2","Confirm","resolvedAddress","isToNewAddress","isToAddressNew","_global$currentTransf","currentAccount","transferTokenChain","shouldShowSeedPhraseScamWarning","scamWarningType","SeedPhrase","DomainLike","_global$currentTransf2","_explainedFee$fullFee","_explainedFee$realFee","explainedFee","fullNativeFee","realNativeFee","chunks","chunk","batchResult","sentNftsCount","dieselAmount","noFeeCheck","fetchTransferDieselState","selectTokenAddress","isDieselAuthorizationStarted","NBS_INIT_TIMEOUT","isNotcoinVouchers","submitTransferInitial","nftAddresses","blacklistedNftAddresses","whitelistedNftAddresses","isUnhideNftModalOpen","selectedNftToUnhide","isCollection","selectedNftsToHide","currentNftForAttributes","updateVestingState","unfreezeRequestedIds","isConfirmRequested","openVestingModal","globalState","cardsInfo","cardInfo","createTransferOptions","Done","isCardMinting","_settings$accentColor","cardBackgroundNftAddress","accentColorNftAddress","accentColorNft","isCardBackgroundNftOwned","isAccentColorNftOwned","accentColorIndex","createAbortableFunction","toReturnOnAbort","abort","deleteNotificationAccount","currentEnabledAccounts","deleted","newEnabledAccounts","deleteAllNotificationAccounts","createNotificationAccount","abortableSubscribeNotifications","abortableUnsubscribeNotifications","handleDomainOperationResult","results","errorResultIndex","handleTransferResults","createResult","notificationAddresses","addressKeys","withAbort","pushNotificationsAccount","updateNotificationAccount","isAvailable","newAccountId","shouldLoadDetails","newActivity","updateActivity","nftsByAddress","subResult","currentAddress","_selectCurrentAccount2","walletAddress","checkAddressResult","walletAddressName","resolvedWalletAddress","chainBalances","_selectAccountSetting","_selectAccountOrAuthA","newBalances","currentBalances","currentBalance","forcedSlugs","updateBalances","totalProfit","updateStakingDefault","stateWithBiggestBalance","state0","state1","nominators","existingTokens","existingToken","updateTokens","_global$swapTokenInfo","currentTokens","updateSwapTokens","shouldAppend","currentNfts","newOrderedAddresses","isTelegramGift","addCollectionTab","isAuto","checkCardNftOwnership","newOwnerAddress","sentNft","selectedAddresses","removedNft","removeNft","ownerAddress","setCardBackgroundNft","installAccentColorFromNft","isOnSale","isMultisig","accountUpdate","domainByChain","isLimited","isCopyStorageEnabled","supportAccountsCount","countryCode","isAppUpdateRequired","shouldRestrictSwapsAndOnRamp","updateRestrictions","apiUpdateWalletVersions","isIncorrectTimeNotificationReceived","showIncorrectTimeError","vestingInfo","updateVestingInfo","isUpdating","secondAddress","secondAccountId","isTonProxyEnabled","isTonMagicEnabled","accountConfig","_selectAccountState3","expirationByAddress","updatedNfts","existingNft","addUnorderedNfts","NativeAudio","NativeAudioWeb","DEBOUNCE_MS","audioContext","AudioContext","webkitAudioContext","audioBuffer","isSoundInitialized","initializeSounds","resume","audioSettings","assetPath","audioChannelNum","isUrl","isPreloaded","preload","incomingTransactionSound","decodeAudioData","decodedAudioBuffer","loadSound","playIncomingTransactionSound","play","createBufferSource","destination","mainActivities","areInitialActivitiesLoaded","fromTimestamp","filterPredicate","mergeSortedActivityIdsToMaxTime","newAreInitialActivitiesLoaded","areAllInitialActivitiesLoaded","addInitialActivities","preloadTopTokenHistory","replacedIds","localActivities","chainActivities","_global$byAccountId$a3","selectRecentNonLocalActivitiesSlow","findLocalToChainActivityMatches","replacements","hideOutdatedLocalActivities","activitiesState","newById","chainActivityId","updatePendingActivitiesToTrustedByReplacements","noForward","newConfirmedActivities","pendingActivities","prevActivitiesForReplacement","currentActivityId","replaceCurrentActivityId","replaceCurrentSwapId","replaceCurrentDomainRenewalId","replaceCurrentDomainLinkingId","replaceCurrentTransferId","reversedReplacedIds","prevById","replacePendingActivities","oldActivity","updatePendingActivitiesWithTrustedStatus","notifyAboutNewActivities","mintCardActivity","_activity$nft","refundActivity","processCardMintingActivity","rawPayload","checkResult","dataHex","clearCurrentSignature","apiUpdateDappConnect","_global$currentDappTr","apiUpdateDappLoading","apiUpdateDappCloseLoading","apiUpdateDappSendTransaction","apiUpdateDappSignData","ANIMATION_LEVEL_OPTIONS","switchAnimationLevel","levelClassName","currentLevel","afterInit","langCachePrefix","langCacheVersion","clearPreviousLangpacks","isNativeBiometricAuthEnabled","biometricsAvailableResult","useFallback","biometryType","FACE_ID","TOUCH_ID","isPushNotificationsAvailable","notificationStatus","checkPermissions","receive","requestPermissions","register","initNotificationsWithGlobal","initCapacitorWithGlobal","requestFullscreen","initTelegramWithGlobal","resetAuth","_global$settings$auth","newDialogs","existingMessageIndex","isToncoin","setDefaultSwapParams","changeTransferToken","currentActivityToken","isDefaultFirstTokenOutSwap","icon","newNotifications","existingNotificationIndex","toggleDeeplinkHandler","isDeeplinkHookEnabled","isFromAllAccounts","otherNetwork","otherNetworkAccountIds","nextAccountId","settingsById","afterSignOut","prevAccountId","nextNewestActivityTimestamps","settingsByAccountId","BarcodeScanner","BarcodeScannerWeb","APP_VERSION_REGEX","IGNORE_TAGS","useHotkeys","hotkeys","shouldFireEvent","hotkey","alt","ctrl","meta","altKey","pressedKey","isExactHotkey","modifiers","reservedKeys","parseHotkey","getHotkeyMatcher","useThrottledCallback","deps","msOrSchedulerFn","noFirst","fnMemo","useDebouncedCallback","noLast","useWindowSize","initialWidth","initialScreenHeight","setWidth","setHeight","setScreenHeight","isResizing","setIsResizing","setIsResizingDebounced","throttledSetIsResizing","throttledSetSize","newWidth","newHeight","newScreenHeight","handleResize","getEncryptedPasswordSignal","setEncryptedPasswordSignal","encryptionKey","isMainStore","initEncryptionKey","subtle","generateKey","getHasInMemoryPassword","getInMemoryPassword","encryptedData","decryptedData","decrypt","iv","ciphertext","TextDecoder","setInMemoryPasswordSignal","_clearTimeout","startTime","intervalId","isCleared","clearInterval","setInterval","setReliableTimeout","passwordData","TextEncoder","encrypt","encrypted","ANIMATED_STICKERS_PATHS","hello","snitch","bill","thumbUp","holdTon","happy","noData","forge","wait","yeee","guard","helloPreview","snitchPreview","billPreview","thumbUpPreview","holdTonPreview","happyPreview","noDataPreview","forgePreview","waitPreview","runPreview","yeeePreview","guardPreview","coreWalletLogo","coreWalletLogoPreview","light","iconAdd","iconAddLight","iconClock","iconClockLight","iconClockBlue","iconClockLightBlue","iconClockGray","iconClockLightGray","iconClockGreen","iconClockLightGreen","iconClockOrange","iconClockLightOrange","iconClockPurple","iconClockLightPurple","iconClockPurpleWhite","iconClockLightPurpleWhite","iconClockRed","iconClockLightRed","iconEarn","iconEarnLight","iconEarnPurple","iconEarnLightPurple","iconSend","iconSendLight","iconSwap","iconSwapLight","preview","iconClockPreviewLight","iconClockPreviewLightBlue","iconClockPreviewLightGray","iconClockPreviewLightGreen","iconClockPreviewLightOrange","iconClockPreviewLightPurple","iconClockPreviewLightPurpleWhite","iconClockPreviewLightRed","dark","iconAddDark","iconClockDark","iconClockDarkBlue","iconClockDarkGray","iconClockDarkGreen","iconClockDarkOrange","iconClockDarkPurple","iconClockDarkPurpleWhite","iconClockDarkRed","iconEarnDark","iconEarnDarkPurple","iconSendDark","iconSwapDark","iconClockPreviewDark","iconClockPreviewDarkBlue","iconClockPreviewDarkGray","iconClockPreviewDarkGreen","iconClockPreviewDarkOrange","iconClockPreviewDarkPurple","iconClockPreviewDarkPurpleWhite","iconClockPreviewDarkRed","useFocusAfterAnimation","useMatchCount","countRef","prevPredicateRef","handleChange","currentAccountState","hasManyAccounts","accountStates","signOut","isLogOutFromAllAccounts","setIsLogOutFromAllAccounts","accountsWithoutBackups","_accountStates$id","handleLogOut","handleClose","shouldRenderWarningForAnotherAccounts","shouldRenderWarningForCurrentAccount","cancelButtonClassNames","modalStyles","shortButton","Modal","text_noExtraMargin","Checkbox","links","idx","buttons","buildStyle","useMediaTransition","mediaData","isMediaReady","RLottie","ensureRLottie","default","getRLottie","hex2rgb","hex","rgbToLab","rgb","z","startCallbacks","endCallbacks","useHeavyAnimation","onStart","lastOnStart","lastOnEnd","elementObserverMap","renderId","tgsUrl","playSegment","speed","noLoop","shouldStretch","quality","isLowPriority","forceInBackground","sharedCanvas","sharedCanvasCoords","onLoad","onEnded","onLoop","containerRef","viewId","animation","setAnimation","animationRef","playKey","playRef","playSegmentRef","rgbColor","isUnmountedRef","newAnimation","coords","setSpeed","throttledInit","refOrElement","onIntersectionChange","onIntersectionChangeRef","callbackManager","IntersectionObserver","unobserve","useSharedIntersectionObserver","_animationRef$current","removeView","playAnimation","shouldRestart","isFrozen","playAnimationOnRaf","pauseAnimation","isPlaying","prevNoLoop","setNoLoop","prevSharedCanvasCoords","setSharedCanvasCoords","changeData","usePriorityPlaybackCheck","noTransition","nonInteractive","otherProps","isAnimationLoaded","markAnimationLoaded","useFlag","handleLoad","setPlayKey","AnimatedSticker","loadedPreviewUrls","DEFAULT_SIZE","noAnimation","previewUrl","iconPreviewClass","thumbDataUri","noPreviewTransition","isPreviewLoaded","markPreviewLoaded","isAnimationReady","markAnimationReady","markAnimationNotReady","handlePreviewLoad","AnimatedIcon","label","placeholder","valueOverlay","inputMode","isRequired","isMultiline","hasError","inputArg","wrapperClassName","isStatic","enterKeyHint","onKeyDown","isPasswordVisible","setIsPasswordVisible","markHasFocus","unmarkHasFocus","showValueOverlay","handleInput","finalType","inputFullClass","input_password","input_withvalueOverlay","labelFullClass","label_forPassword","label_error","htmlFor","inputContainer","scrollHeight","required","static","visibilityToggle","visibilityToggle_push","handleTogglePasswordVisibility","label_errorBottom","waitForAnimationEnd","animationName","fallbackMs","waitForEndEvent","detailedName","isHandled","handleAnimationEnd","TransitionEvent","propertyName","AnimationEvent","INERTIA_EASING","SWIPE_DISABLED_CLASS_NAME","swipeOffsets","cancelCurrentReleaseAnimation","isSwipeActive","captureControlledSwipe","_options$onSwipeLeftS","onSwipeLeftStart","_options$onSwipeRight","onSwipeRightStart","_onDrag","_onRelease","onCancel","updateAnimationProgress","elements","getAnimations","flat","currentTime","getTiming","extractPositionFromTransform","transformRule","usePrevDuringAnimationSimple","durationMs","setPrev","FALLBACK_ANIMATION_END","CLASSES","ACTIVE_SLIDE_CLASS_NAME","TO_SLIDE_CLASS_NAME","activeKey","nextKey","prevKey","renderCount","shouldRestoreHeight","shouldCleanup","cleanupExceptionKey","shouldWrap","wrapExceptionKey","slideClassName","withSwipeControl","onStop","onContainerClick","onScroll","currentKeyRef","shouldDisableAnimation","rendersRef","prevActiveKey","isAnimatingRef","isSwipeJustCancelledRef","hasActiveKeyChanged","isBackwards","preservedRender","isSlideOptimized","prevActiveIndex","activeIndex","childElements","childElement","transition","transform","toSlide","fromSlide","endHeavyAnimation","clientHeight","performSlideOptimized","onAnimationEnd","watchedNode","giveUpAnimationEnd","currentSlide","nextSlide","onCancelForTransition","_cancelCurrentRelease","targetPosition","KeyframeEffect","keyframe","getKeyframes","position","extractAnimationEndPosition","currentDirection","animationTimingFunction","initialPositionPx","distance","dragOffset","newProgress","onCancelForClient","isRevertSwipe","cancel","releaseProgress","allowSwipeControlForTransition","flexBasis","asFastList","contents","render","rendered","DEFAULT_PIN_LENGTH","RESET_STATE_DELAY_MS","STATE_ANIMATION_DURATION_MS","resetStateDelayMs","isMinified","topContent","onBiometricsClick","onClearError","onSubmit","onLogOutClick","isFaceId","canRenderBackspace","isSuccess","isSuccessDuringAnimation","prevIsPinAccepted","arePinButtonsDisabled","shouldSuggestLogout","clearScrollPatch","char","handleBackspaceClick","dotsClassName","renderDots","PinPadButton","Transition","STICKER_SIZE","getHandleBiometricsSignal","setHandleBiometricsSignal","triggerPasswordFormHandleBiometrics","isAutoConfirmEnabled","isBiometricAuthEnabled","operationType","cancelLabel","submitLabel","stickerSize","help","containerClassName","pinPadClassName","withCloseButton","noAnimatedIcon","inputWrapperClassName","forceBiometricsInMain","skipAuthScreen","openSettings","setIsAutoConfirmEnabled","memoizedPasswordRef","hasInMemoryPassword","inMemoryPasswordRef","useInMemoryPassword","showOnlyConfirmScreen","passwordRef","setPassword","localError","setLocalError","wrongAttempts","setWrongAttempts","isResetBiometricsWarningOpen","openResetBiometricsWarning","closeResetBiometricsWarning","isSubmitDisabled","canUsePinPad","isLogOutModalOpened","openLogOutModal","closeLogOutModal","showStorageClearedDialog","support_link","rel","confirm","useStorageClearedDialog","submitCallback","passwordToReturn","enteredPassword","passwordVerified","handleSubmit","handleBiometrics","biometricPassword","handleClearError","handleOpenSettings","handleAutoConfirmChange","handleOpenLogOutModal","shouldRenderFullWidthButton","footerButtonsClassName","footerButtons","footerButtonFullWidth","renderFooterButtons","buttonHalfWidth","buttonFullWidth","renderAutoConfirmCheckbox","autoConfirmCheckbox","shouldRenderAutoConfirmCheckbox","getPinPadTitle","actionName","pinPadHeader","AnimatedIconWithPreview","PinPad","LogOutModal","transitionContent","sticker","renderingError","renderBiometricPrompt","Input","errorMessage","logOutWrapper","logOutButton","detailsIcon","setTheme","preloadedImageUrls","loading","isSlow","imageClassName","fallback","markIsLoaded","markHasError","shouldShowFallback","divRef","draggable","referrerPolicy","appTheme","useAppTheme","logoPath","coreWalletLogoPath","logoLightPath","logoDarkPath","Image","innerContentTopPosition","shouldHideBiometrics","passwordError","setPasswordError","handleSubmitPassword","handlePasswordChange","PasswordForm","Logo","handleChangeSlideForBiometricAuth","ACTIVATION_EVENT_NAMES","ACTIVATION_EVENT_OPTIONS","SLIDES","getActivitySignal","setActivitySignal","isNonNativeBiometricAuthEnabled","canRender","isManualLockActive","appLockHideBiometrics","submitAppLockActivityEvent","setIsManualLockActive","setIsAppLockActive","isLocked","lock","unlock","lockReason","isFirstRunRef","isLockedRef","lockReasonRef","useAppLockState","shouldRenderUi","showUi","hideUi","lastActivityTime","unfixSlide","slideForBiometricAuth","setSlideForBiometricAuth","getDefaultSlideForBiometricAuth","passwordForm","setInnerContentTopPosition","isFixedState","isFixingSlideEnv","fixSlide","innerContent","getBoundingClientRect","useContentSlide","handleActivity","handleActivityThrottled","afterUnlockCallback","autolockPeriod","transitionRef","forceLockApp","_getInAppBrowser2","blur","handleLock","handleLockScreenHotkey","transitionKey","handleUnlockIntent","Space","UnlockButtonSlide","PasswordFormSlide","APP_VERSION_URL","showActivityInfo","showTokenActivity","savedAddresses","currentTokenPeriod","isAuthFlow","isMnemonicImport","addAccount2","authState","startImportingWallet","startCreatingWallet","renameAccount","renameNotificationAccount","isBackupWalletModalOpen","isInvestorViewEnabled","landscapeActionsActiveTabIndex","isSecurityWarningHidden","_ref16","_ref17","shouldShow","alwaysShownSlugsSet","alwaysHiddenSlugsSet","_ref18","_accountSettings$orde","_accountSettings$impo","remoteVersion","sanitizedRemoteVersion","getIsAppUpdateNeeded","isAppUpdateAvailable","latestAppVersion","confettiRequestedAt","showScanQrPopup","closeScanQrPopup","handleQrCode","currentQrScan","camera","isQrScannerOpen","_ref19","linkParams","plainAddressData","qrData","newChain","getChainFromAddress","parsePlainAddressQr","_ref20","_ref21","chainForOnRampWidgetModal","_ref22","mediaId","mediaType","hiddenNfts","noGhostAnimation","_ref23","receiveModalChain","isReceiveModalOpen","invoiceTokenSlug","isInvoiceModalOpen","isLoadingOverlayOpen","_ref24","isExploreOpen","_ref25","isHidden","isSensitiveDataHidden","_ref26","areAssetsActive","Assets","isWalletTabActive","closeExplore","closeSiteCategory","_ref27","layout","changeAppLayout","clearDappConnectRequestError","transactionIdx","viewTransactionOnIdx","inMemoryPassword","ConnectHardware","submitDappTransfer","browserHistory","_accountState$browser","newHistory","currentUrl","currentSiteCategoryId","submitDappSignData","connectLedger","noRetry","noRemoteTab","Connecting","hardwareWallets","isLedgerConnected","isTonAppConnected","_global$hardware$avai","Failed","availableTransports","lastUsedTransport","WaitingForRemoteTab","popup","connectLedgerViaRemoteTab","waitLedgerTonApp","lastIndex","hardwareAccounts","hardwareAccountIndexes","selectLedgerAccountIndexToImport","currentHardwareAddresses","getNextLedgerWallets","getLedgerWallets","nextHardwareState","ConnectedWithSingleWallet","ConnectedWithSeveralWallets","isLedgerDisconnected","Ledger","isHardwareModalOpen","isBluetoothAvailable","isUsbAvailable","detectAvailableTransports","hasUsbDevice","initializeHardwareWalletConnection","oldHardwareWallets","prevSettings","isFinalCall","LedgerConnectHardware","currentCollectionAddress","addToSelectedAddresses","whitelistedNftAddressesSet","blacklistedNftAddressesSet","accountNfts","removeFromSelectedAddresses","wasTelegramGiftsAutoAdded","existingCollectionTabs","collectionTabs","isVestingModalOpen","unfreezeState","allSlugs","newOrderedSlugs","Activity","_payload$nfts","rest","nftTokenSlug","previousFeeTokenSlug","nextFeeTokenSlug","shouldClearFee","newToken","submitTransfer","isExists","ACCENT_COLORS","excludedIndices","useAccentColor","elementRefOrBody","accentColor","getAccentColorIndexFromNft","mtwCardType","mtwCardBorderShineType","UPDATE_THROTTLE","updateCacheThrottled","updateCache","updateCacheForced","unsubscribeFromBeforeUnload","preloadedData","isCaching","clearCaching","_unsubscribeFromBefor","getUsedTokenSlugs","reducedGlobal","usedTokenSlugs","_reducedGlobal$byAcco","transactionId","reduceByAccountId","_state$nfts","_state$stakingHistory","accountTokenSlugs","getAccountTokenSlugs","reducedIdsMain","pickVisibleActivities","reducedIdsBySlug","reducedNewestActivitiesBySlug","reducedIds","reduceAccountActivities","_Object$values$","reduceAccountStaking","visibleIdCount","shouldCacheActivity","initialState","timeEnd","_cached$tokenInfo","backupWallet","newId","testnetAccountId","clearActivities","areTokensWithNoBalanceHidden","areTokensWithNoPriceHidden","exceptionSlugs","_cached$accounts","quote","dappLastOpenedDatesByOrigin","migrateCache","loadMemoryCache","loadCache","initLedgerPage","selectHasSession","isImproved","testAndImprove","frames","lastFrameAt","mean","containerEl","boosterEl","improveView","ElectronEvent","focusScroller","originalFocus","isProgrammaticFocus","patchedFocus","_originalFocus","preventScroll","scrollToActiveElement","install","uninstall","createFocusScroller","enforceInstantScroll","scrollTarget","scrollPosition","focusScrollPosition","scrollIntoView","block","behavior","IS_DISABLED","tabKey","Filesystem","FilesystemWeb","Share","ShareWeb","shareUrl","shareData","tryCapacitorShare","tryNavigatorShare","share","useCurrentOrPrev","shouldForceCurrent","shouldUseSelectedName","shouldTranslate","iconClassName","iconOverlayClassName","fontIconClassName","itemClassName","itemDescriptionClassName","displayedName","dangerous","itemIcon","itemMainIcon","overlayIcon","itemOverlayIcon","fontIcon","itemName","description","itemDescription","captureEscKeyListener","captureKeyboardListener","POSITIONING","EMPTY_RECT","applyStaticOptions","bubbleRef","anchor","positionX","positionY","transformOriginX","transformOriginY","bubbleStyle","bubbleEl","finalStyle","transformOrigin","ANIMATION_DURATION","menuRef","bubbleClassName","autoClose","shouldSkipTransition","withPortal","noCloseOnBackdrop","onMouseEnter","onMouseLeave","positionOptions","options2","isDynamicPositionOptions","staticOptions","getRootElement","getMenuElement","getTriggerElement","getLayout","withMaxHeight","triggerRect","rootRect","menuDimensions","triggerEl","rootEl","menuEl","extraMarginTop","menuElMinWidth","marginTop","gatherBounds","menuWidth","preferredPositionX","determineHorizontalPosition","menuHeight","topShiftY","extraTopPadding","isDense","doNotCoverTrigger","preferredPositionY","hasSpaceBelow","hasSpaceAbove","yWithTopShift","determineVerticalPosition","finalCoordinates","coordinates","shouldAvoidNegativePosition","centerHorizontally","leftWithPossibleNegative","addedXForMenuPositioning","applyBoundaryConstraints","positionResult","portalOffset","offsetX","offsetY","calculateTransformOrigin","processDynamically","useMenuPosition","menu","useVirtualBackdrop","fullBubbleClassName","bubble","inPortal","selectedValue","menuAnchor","menuPositionX","menuPositionY","shouldTranslateOptions","buttonClassName","onSelect","menuPositionOptions","handleItemClick","Menu","fullButtonClassName","item_with_icon","withDelimiter","delimiter","withDelimiterAfter","delimiterAfter","item_selected","DropdownItemContent","withNotch","closeClassName","menuItems","onBackButtonClick","onMenuItemClick","menuButtonRef","setMenuAnchor","hasMenu","isMenuOpen","closeMenu","handleMenuButtonClick","header_back","header_backIcon","menuButton","menuIcon","DropdownMenu","TITLES","MENU_ITEMS","iframeRef","iframe","contentWindow","useIFrameBridgeProvider","renderingTitle","handleMenuItemClick","frame","ModalHeader","allow","useIntersectionObserver","rootCallback","rootRef","throttleMs","throttleScheduler","debounceMs","shouldSkipFirst","margin","controllerRef","rootCallbackRef","freezeFlagsRef","onUnfreezeRef","freeze","unfreeze","targetCallback","entriesAccumulator","observerCallback","observerCallbackSync","root","rootMargin","initController","controller","useGetIsIntersecting","targetRef","getIsIntersecting","setIsIntersecting","lastCallback","useOnIntersect","isIntersecting","observeIntersection","savedCallback","handleReload","reload","appInactivePathWebP","appInactivePathPng","app_name","useScrolledState","isAtBeginning","setIsAtBeginning","isAtEnd","setIsAtEnd","isScrolled","handleScroll","PATH_BY_EMOJI","loadedImages","markLoaded","isInsideModal","headerClassName","handleBackClick","handleContentScroll","aboutExtensionTitle","slide","modalHeader","headerBack","iconChevron","headerTitle","content_noScroll","logo","titleLink","blockAbout","heading","Emoji","ninja","unicorn","extension_link","github","github_link","telegram","community_link","aboutFooterWrapper","aboutFooterContent","dotLarge","cleanAuthError","addAccount","container_scrollable","suggestions","suggest","embedded","suggestion","nextId","labelText","suggestionsPosition","markFocus","unmarkFocus","setHasError","filteredSuggestions","setFilteredSuggestions","activeSuggestionIndex","setActiveSuggestionIndex","areSuggestionsShown","setAreSuggestionsShown","wordlist","setWordlist","shouldRenderSuggestions","words","noError","isCorrectMnemonic","processSuggestions","userInput","unLinked","handleEnter","suggestedValue","nextInput","getElementById","select","wrapper_focus","wrapper_error","SuggestionList","touched","onPaste","pastedValue","clipboardData","getData","_checkIndexes$map","checkIndexes","descriptionClassName","formClassName","errorClassName","setWords","hasMnemonicError","setHasMnemonicError","handleMnemonicCheckSubmit","answer","handleSetWord","InputMnemonic","closeCheckWordsPage","CheckWordsForm","openMnemonicPage","headerBackBlock","CheckWordsContent","START_BIOMETRICS_CONFIRMATION_DELAY_MS","afterCreateBiometrics","cancelCreateBiometrics","useTimeout","shouldRenderSteps","shouldRenderError","biometricsError","buttons__inner","btn","btnHalfWidth","cancelConfirmPin","pinConfirm","setPinConfirm","setError","isConfirmed","setIsConfirmed","containerFullSize","skipCheckMnemonic","openAuthBackupWalletModal","canSkipMnemonicCheck","info__space","btn_wide","btn_single","btn_push","startCreatingBiometrics","skipCreateBiometrics","btn_text","afterCreateNativeBiometrics","isTouchId","faceIdSvg","touchIdSvg","biometricsIcon","biometricsTitle","biometricsSubtitle","SPECIAL_CHARS_REGEX","formId","isMobile","firstInputRef","isJustSubmitted","setIsJustSubmitted","firstPassword","setFirstPassword","secondPassword","setSecondPassword","isPasswordFocused","markPasswordFocused","unmarkPasswordFocused","isWeakPasswordModalOpen","openWeakPasswordModal","closeWeakPasswordModal","isPasswordsNotEqual","setIsPasswordsNotEqual","isSecondPasswordFocused","markSecondPasswordFocused","unmarkSecondPasswordFocused","canSubmit","validation","requiredMinLength","requiredLength","isOnlyNumbers","invalidLength","setInvalidLength","noNumber","setNoNumber","noUpperCase","setNoUpperCase","noLowerCase","setNoLowerCase","noSpecialChar","setNoSpecialChar","noEqual","setNoEqual","isInvalidLength","usePasswordValidation","handleFirstPasswordChange","handleSecondPasswordChange","isWeakPassword","rule","formWidgets","passwordRules","getValidationRuleClass","renderErrors","buttonsNoExtraSpace","ruleHasError","passwordRule","invalid","valid","getFormId","withDescription","titleSmallMargin","CreatePasswordForm","setPin","INTERVAL","markOne","two","markTwo","three","markThree","oneRef","twoRef","threeRef","counterTitle","counterDigit","onSkip","handleBackupClick","disclaimerBackupDialog","backupNotice","backupNoticeButtons","btn_mini","isImport","cancelDisclaimer","isInformationConfirmed","markInformationConfirmed","unmarkInformationConfirmed","setIsInformationConfirmed","handleCloseBackupWarningModal","handleSkipMnemonic","stickerAndTitle","infoBlock","informationCheckbox","informationCheckboxContent","AuthBackupWarning","MNEMONIC_INPUTS","MAX_LENGTH","afterImportMnemonic","setMnemonic","handleMnemonicSet","pastedMnemonic","_document$activeEleme","handlePasteMnemonic","pastedText","_document$activeEleme2","parsePastedText","useClipboardPaste","handlePaste","mnemonicValues","handleCancel","title_afterSmallSticker","infoSmallFont","infoPull","importingContent","getSuggestPosition","footerError","footerButton","w","inputRef","isInvalidAddress","setIsInvalidAddress","transitionContentWrapper","_inputRef$current","isValid","viewModeSticker","customStickerClassName","customButtonWrapperClassName","isFullSizeButton","isFirstCheckboxSelected","isSecondCheckboxSelected","isThirdCheckboxSelected","textFirst","textSecond","textThird","onFirstCheckboxClick","onSecondCheckboxClick","onThirdCheckboxClick","openCreateBackUpPage","firstChecked","setFirstChecked","secondChecked","setSecondChecked","thirdChecked","setThirdChecked","SafetyRulesContent","word","buttonText","SecretWordsList","openCheckWordsPage","wordsCount","containerAlignTop","SecretWordsContent","openAbout","openHardwareWalletModal","openAuthImportWalletModal","isLogoReady","markLogoReady","logoRef","btn_about","importButtonsBlock","importButtonsBlockSimple","importText","importButtons","RENDER_COUNT","closeAbout","closeImportViewAccount","renderingAuthState","setPrevKey","setNextKey","updateRenderingKeys","renderAuthScreen","isFrom","AuthStart","AuthCreatingWallet","AuthCheckPassword","AuthCreatePin","AuthConfirmPin","AuthCreateBiometrics","AuthConfirmBiometrics","AuthCreateNativeBiometrics","AuthCreatePassword","AuthCreateBackup","AuthDisclaimer","AuthImportMnemonic","SettingsAbout","aboutHeader","AuthSafetyRules","AuthSecretWords","AuthCheckWords","AuthImportViewAccount","transitionContainer","transitionSlide","spinner","inner","Spinner","rightItem","startImportViewAccount","closeAuthImportWalletModal","handleSecretWordsClick","handleImportHardwareWalletClick","handleImportViewAccountClick","importModalContent","actionsSection","ListItem","resolveSlideTransitionName","useModalTransitionKeys","renderingKey","updateNextKey","useCachedImage","imageUrl","useAsync","setIsLoading","setResult","wasCancelled","cachedResponse","createObjectURL","statusText","clone","getCachedImageUrl","revokeObjectURL","useCardCustomization","cardNft","mtwCardTextType","withTextGradient","mtwCardTextTypeClass","backgroundImageUrl","classNames","borderShineType","canEditAccount","onEdit","isViewMode","addressOrMultichain","mtwCardClassNames","withCheckbox","customCard","account_current","account_disabled","account_inactive","accountName","accountFooter","accountAddress","accountCheckMark","accountCheckMark_active","accountLength","accounts_single","accounts_two","ConfirmTransactionState","onTryAgain","activeState","setActiveState","Waiting","renderContent","isActiveSlide","textBlock","textBlock_small","actionBlock","actionBlock_single","button_single","renderWaitingConfirm","isErrorDetailed","declinedLabel","declinedLabelDetailed","renderTryAgain","DEFAULT_ARROW","DEFAULT_MENU_POSITION_X","menuClassName","arrow","buttonPrefix","openMenu","withMenu","isFullyInteractive","selectedItem","handleSelect","interactive","wide","buttonFullClassName","buttonSuffix","buttonIcon","TRANSPORT_NAMES","usb","bluetooth","onConnected","initializeHardwareWalletModal","selectedTransport","setSelectedTransport","isLedgerFailed","isTonAppFailed","isConnected","isConnecting","isWaitingForRemoteTab","shouldCloseOnCancel","renderingAvailableTransports","shouldRenderAvailableTransports","availableTransportsRef","prevLastUsedTransport","handleConnected","isSingleWallet","handleCloseWithRemoteTab","closeAction","getLedgerIconSrc","iconData","desktop","ledgerDesktopDarkSrc","ledgerDesktopSrc","mobileUsb","ledgerMobileUsbDarkSrc","ledgerMobileUsbSrc","ios","ledgerIosDarkSrc","ledgerIosSrc","mobileBluetooth","ledgerMobileBluetoothDarkSrc","ledgerMobileBluetoothSrc","renderScreen","settingsStyles","containerStatic","iconBlock","mobile","iconBlockSlideStatic","iconBlockSlide","ledgerIcon","textBlock_gap","textIcon","textBlock_success","text_failed","text_connected","text_success","dropdownBlock","Dropdown","item_small","isFailed","renderButtons","ARROW_WIDTH","GAP","emoji","tooltipClassName","tooltipContainerRef","colorClassName","iconRef","tooltipRef","tooltipStyle","arrowStyle","randomTooltipKey","handleClickOutside","tooltipWidth","tooltipHeight","tooltipCenter","arrowPosition","horizontalOffset","tooltipVerticalStyle","tooltipHorizontalStyle","arrowHorizontalStyle","arrowVerticalStyle","tooltip","commonClassName","renderIcon","onDisconnect","iconUrl","shouldShowDisconnect","handleDisconnect","IconWithTooltip","browserButton","hasConnectRequest","requiredPermissions","requiredProof","submitDappConnectRequestConfirm","cancelDappConnectRequestConfirm","setDappConnectRequestState","resetHardwareWalletConnect","selectedAccount","setSelectedAccount","isConfirmOpen","openConfirm","closeConfirm","iterableAccounts","shouldRenderAccounts","handlePasswordCancel","submitDappConnectRequestHardware","handlePasswordSubmit","renderAccounts","AccountButtonWrapper","AccountButton","renderAccount","Skeleton","DappInfo","renderDappInfo","DappPassword","LedgerConnect","LedgerConfirmOperation","dappname","_accounts$currentAcco","customTokenBalance","customTokenSymbol","customTokenDecimals","displayBalance","displaySymbol","displayDecimals","rows","renderRow","isLarge","hasFee","skeletonRows","submitDappSignDataConfirm","renderingPayloadToSign","isDappLoading","DappSkeletonWithContent","DappInfoWithAccount","cell","schema","renderSignDataByType","setDappSignDataScreen","clearDappSignDataError","cancelDappSignData","handleResetSignData","DappSignDataInitial","renderPassword","DappTransferComplete","getPseudoRandomNumber","seed","numberSeed","stringToNumberSeed","randomFraction","FIAT","getCurrencyPriority","getSwapRate","fromToken","toToken","shouldTrimLargeNumber","firstCurrencySymbol","secondCurrencySymbol","fromAmountBig","toAmountBig","fromPriority","ratio","isLargeNumber","CHAIN_ICON_MAP","avalanche","avalancheBlockchainIcon","bitcoin","bitcoinBlockchainIcon","bitcoin_cash","bitcoincashBlockchainIcon","binance_smart_chain","bnbBlockchainIcon","binance_dex","cardano","cosmos","dash","doge","eos","ethereum","ethereum_classic","internet_computer","iota","litecoin","monero","polkadot","ripple","solana","stellar","zcash","getChainNetworkIcon","networkName","ASSET_LOGO_PATHS","btc","usdt","my","withChainIcon","isLoadingError","markLoadingError","fallbackIcon","blockchainIcon","STEPS","FROM","SKIN_COLORS","lightTheme","darkTheme","cardLightText","cardDarkText","cardGoldText","purple","green","sample","cols","cellSize","skin","canvasRef","cellSizeDpr","animationStateRef","opacityValues","steps","lastSpeedChangeAt","isRendered","getIsInBackground2","getShouldAnimate","canvas","ctx","getContext","renderOptions","frameDuration","shouldChangeSpeed","clearRect","row","col","nextOpacity","fillStyle","fillRect","renderFrame","align","maskSkin","shouldHoldSize","maskClassName","setIsShown","isMaskActive","contentRef","shouldRenderSpoiler","spoilerRef","spoilerClassName","spoiler","wrapperStyle","fixedWidth","SensitiveDataMask","isPending","isError","shouldRenderClock","clockRef","clockIconName","CHANGELLY_PENDING_STATUSES","CHANGELLY_EXPIRED_STATUSES","ONCHAIN_ERROR_STATUSES","isFuture","isHold","amountCols","isFromToncoin","isInternalSwap","statusClass","pendingIndicatorColor","ActivityStatusIcon","SensitiveData","TokenIcon","renderAmount","cexStatus","renderStatusAndDate","rate","priceWhole","priceFraction","renderCurrency","getLocalAddressName","_savedAddresses$find","otherAccount","_accounts$accountId$a","OUT_TRANSACTION_TYPES","doesNftExist","openNftAttributesModal","isStaking","isDnsOperation","dnsIconText","getDnsIconText","attachmentsTakeSubheader","shouldAttachmentTakeSubheader","isNoSubheaderLeft","getIsNoSubheaderLeft","titleTense","operationColorClass","handleNftClick","iconName","scamImg","amountDisplayMode","dexName","dex","marketplaceName","annual_yield","renderAddressAndDate","renderBaseCurrencyAmount","thumbnail","renderComment","getIsNoSubheaderRight","swapTokensBySlug","stakingStateBySlug","Transaction","getActivityHeight","getTransactionHeight","cancelDappTransfer","setDappTransferScreen","handleAgree","withTonExplorer","withMediaViewer","openMediaViewer","tonExplorerTitle","ton_explorer_name","handleClickInfo","Nft","DEFAULT_THRESHOLD","removeFromSavedAddress","handleDeleteSavedAddress","menuBackdropShouldRender","menuBackdropRef","MENU_ITEM_HEIGHT_PX","COMFORT_MARGIN_PX","isMultichainAccount","addressUrl","isTransaction","spoilerRevealText","spoilerCallback","copyNotification","noSavedAddress","noExplorer","textClassName","noDimming","withShareInMenu","addSavedAddress","addressNameRef","isSaveAddressModalOpen","openSaveAddressModal","closeSaveAddressModal","isDeleteSavedAddressModalOpen","openDeletedSavedAddressModal","closeDeleteSavedAddressModal","savedAddressName","setSavedAddressName","isConcealedWithSpoiler","revealSpoiler","isAddressAlreadySaved","savedAddress","saveAddressTitle","explorerTitle","withSavedAddresses","withExplorer","handleSaveAddressSubmit","handleCopy","handleShare","handleTonExplorerOpen","isActionsMenuOpen","handleMenuShow","handleMenuItemSelect","closeActionsMenu","menuHandlers","setMenuPositionY","isWalletAddress","withShare","_menuHandlers$value","changedTouches","clientX","useDropdownMenu","addressBook","shouldUseMenu","longPressHandlers","isLongPressActive","isPressed","timerId","canProcessEvent","onMouseUp","onTouchStart","onTouchEnd","onTouchCancel","useLongPress","handleRevealSpoiler","renderedContent","suffixStart","middle","meaningfulPart","dimmedPart","scam","scamImage","chainIcon","shortAddress","MenuBackdrop","isConcealed","commentContainer","button_spoiler","renderContentOrSpoiler","iconCaretDown","menuItem","iconStar","iconShare","renderActions","nameInput","DeleteSavedAddressModal","amountTerms","totalCost","sum","getTotalCost","payloadRef","isPayloadExpanded","expandPayload","payloadElement","scrollWidth","record","category","votingAddress","vote","renderPayload","_transaction$payload","renderPayloadLabel","DappTransactionContent","amountBySlug","tonAmount","feeBySlug","NftInfo","InteractiveTextField","displayedToAddress","DappAmountField","DappTransactionPayload","PRECISION_PREFIX","exact","approximate","lessThan","STARS_TOKEN","TOKEN_ICONS","shouldPreferIcons","termClassName","symbolClassName","termList","firstDefinedTerm","tokenType","term","convertTermsObjectToList","symbolNode","keepDetailsButtonWithoutFee","onDetailsClick","Fee","FeeLineContainer","_accountState$nfts","totalAmountsBySlug","_renderingTransaction","showDappTransferTransaction","submitDappTransferConfirm","renderingTransactions","sortedTransactions","sortingCost","getTransactionCostForSorting","transaction0","transaction1","sortTransactions","hasSufficientBalance","tokenToDisplay","sufficientTokens","availableBalance","insufficientAmount","insufficientUsdValue","transactionUsdValue","maxInsufficientToken","maxTransactionToken","calculateTokenToDisplay","renderTransactionRow","amountText","hasAmount","renderTransactions","_emulation$activities","FeeLine","renderEmulation","cost","isMediaViewerOpen","clearDappTransferError","needsExtraHeight","shouldForceFullScreen","handleTransferPasswordSubmit","handleLedgerConnect","handleResetTransfer","DappTransferInitial","DappLedgerWarning","DappTransaction","Dialog","DialogWeb","_dialog$buttons","_buttons$cancel","dismissDialog","openModal","closeModal","hasCancel","confirmTitle","cancelTitle","isNativeDialog","openSystemBluetoothSettings","executeDialogAction","okButtonTitle","cancelButtonTitle","buttonTitle","isElectronUpdateDownloaded","setIsElectronUpdateDownloaded","isElectronAutoUpdateEnabled","setIsElectronAutoUpdateEnabled","_window$electron3","removeUpdateErrorListener","UPDATE_ERROR","removeUpdateDownloadedListener","UPDATE_DOWNLOADED","getIsAutoUpdateEnabled","_window$electron4","installUpdate","withTitle","isDragging","screenX","screenY","handleMousedown","handleDrag","handleDoubleClick","useElectronDrag","handleMinimize","minimize","handleMaximize","getIsMaximized","unmaximize","maximize","_window$electron5","_window$electron6","UpdateApp","useTelegramMiniAppSwipeToClose","isSwipeDisabledRef","openSite","originalUrl","validProtocols","urlObject","isValidUrl","contentSelector","scrollLeft","usePrevious2","prevRef","lastRef","openSiteCategory","bigSites","smallSites","handleCategoryClick","site","MEMO_EMPTY_ARRAY","RERENDER_DAPPS_FEED_DELAY_MS","REPLACEMENTS_BY_URL","replacementUrl","updateDappLastOpenedAt","openDapp","dappStyles","HIDDEN_FROM_FEED_DAPP_URLS","dappsFromState","openSettingsWithState","sortedDapps","lastOpenedAt","compareDapps","seen","isPillMode","iconWrapperClassName","useHorizontalScroll","exploreStyles","sectionHeader","DappFeedItem","renderDapp","Dapps","aLastOpened","bLastOpened","connectedAt","clickArg","extendedIcon","withBorder","badgeText","isTrending","isInList","extended","trending","imageWrapper","imageWrapperScalable","trendingImage","infoWrapper","badgeLabel","badge","_searchSuggestions$hi","_searchSuggestions$si","isSuggestionsVisible","searchSuggestions","searchValue","onSiteClick","onSiteClear","isEmpty","suggestionsMenu","MenuItem","suggestionIcon","suggestionAddress","clearSuggestion","Site","_global$exploreData","categories","categoryId","CategoryHeader","shouldRestrict","originalSites","loadExploreSites","removeSiteFromBrowserHistory","suggestionsTimeoutRef","trendingContainerRef","setSearchValue","isSearchFocused","markSearchFocused","unmarkSearchFocused","showSuggestions","hideSuggestions","prevSiteCategoryIdRef","filteredSites","canBeRestricted","filterSites","historyResult","sitesResult","generateSearchSuggestions","trendingSites","allSites","isFeatured","trendingList","filteredCategories","_allSites$category$id","safeShowSuggestions","safeHideSuggestions","prevIsSearchFocused","handleSiteClick","targetUrl","handleSiteClear","handleSearchValueChange","handleMenuClose","handleSearchSubmit","isContentActive","main","searchWrapper","searchContainer","searchIcon","searchInput","ExploreSearchSuggestions","DappFeed","trendingSection","landscapeList","Category","currentSiteCategory","SiteList","emptyList","emptyListLoading","emptyListTitle","rootSlide","afterSelectHardwareWallets","loadMoreHardwareWallets","selectedAccountIndices","setSelectedAccountIndices","handleAccountToggle","handleAddLedgerWallets","alreadyConnectedList","handleAddWalletClick","_list","areAccountsSelected","isActiveAccount","accountCurrencyIcon","addAccountContainer","addAccountIcon","LedgerModalState","setCurrentSlide","SelectWallets","handleAddLedgerWallet","handleLedgerModalClose","LedgerSelectWallets","modalDialog","modalDialogInsideSettings","calcSafeAreaTop","useElementVisibility","isVisible","setIsVisible","metaViewport","defaultViewportContent","allowedZoomViewportContent","secondText","twoIcons","isNftTransaction","imageUrls","tokenIcon","nftIcon","stacked","bold","nftTitle","isQrScannerSupported","useQrScannerSupport","isSupported","supported","isSavedAddress","deleteLabel","onDeleteClick","handleDeleteClick","otherAccountIds","onAddressSelect","onSavedAddressDelete","renderedSavedAddresses","doesSavedAddressFitSearch","AddressBookItem","renderedOtherAccounts","addressesToBeIgnored","uniqueAddresses","addressChain","searchQuery","INPUT_CLEAR_BUTTON_ID","withQrScan","addressBookChain","validateAddress","requestOpenQrScanner","addressBookTimeoutRef","addressForDeletion","setAddressForDeletion","chainForDeletion","setChainForDeletion","isAddressBookOpen","openAddressBook","closeAddressBook","isFocused","markFocused","unmarkFocused","shouldRenderPasteButton","setShouldRenderPasteButton","inputId","isAddressValid","addressBookAccountIds","shouldUseAddressBook","localAddressName","withPasteButton","withQrButton","withButton","addressOverlay","renderedAddressName","addressShort","SHORT_SINGLE_ADDRESS_SHIFT","handlePasteClick","handleAddressCheck","handleQrScanClick","handleAddressFocus","handleAddressBlur","_e$relatedTarget","relatedTarget","handleAddressBookClose","addressToCheck","handleAddressClear","handleDeleteSavedAddressClick","handleDeleteSavedAddressModalClose","handleAddressBookItemSelect","renderInputActions","AddressBook","FULL_NATIVE_STATES","domainNft","currentLinkedWalletAddress","tonBalance","currentTonAddress","startDomainLinking","cancelDomainLinking","clearDomainLinkingError","submitDomainLinking","checkDomainLinkingDraft","checkLinkingAddress","setDomainLinkingWalletAddress","isInsufficientBalance","feeTerms","modalTitle","handleWalletAddressInput","newToAddress","handleHardwareSubmit","handleInfoClick","AddressInput","TransactionBanner","renderPasswordForm","renderComplete","isCollapsed","expand","shouldRenderExpander","LIMIT","renderedNfts","startDomainsRenewal","cancelDomainsRenewal","clearDomainsRenewalError","submitDomainsRenewal","checkDomainsRenewalDraft","domainNfts","newExpireTimestamp","domainNftThumbnails","useInterval","NftChips","_domainNfts$","_domainNfts$2","formatTransferUrl","noChainIcon","minWidth","CHARACTER_WIDTH","BUTTON_WIDTH","useSelectorWidth","buttonTransitionKeyRef","tokenToRender","NETWORK_NAMES_EXCEPTIONS","getChainNetworkName","SearchState","EMPTY_ARRAY","EMPTY_OBJECT","pairsBySlug","userTokens","selectAvailableUserForSwapTokens","popularTokens","selectPopularTokens","swapTokens","userTokensProp","popularTokensProp","shouldFilter","shouldUseSwapTokens","shouldHideMyTokens","shouldHideNotSupportedTokens","selectedChain","onTokenSelect","resetImportToken","shortBaseSymbol","scrollContainerRef","searchInputRef","isResetButtonVisible","setIsResetButtonVisible","setRenderingKey","searchTokenList","setSearchTokenList","filterTokens","_pairsBySlug$tokenInS","filterAndSortTokens","filterSupportedTokens","allTokens","userTokensWithFilter","popularTokensWithFilter","swapTokensWithFilter","filteredTokenList","tokensToFilter","untrimmedSearchValue","lowerCaseSearchValue","filteredTokens","isName","isSymbol","isKeyword","sortFactors","searchResultToken","factors","tickerExactMatch","tickerMatchLength","nameMatchLength","specialOrder","tokenSymbol","tokenName","comparisonResult","compareTokens","resetSearch","isValidAddress","newRenderingKey","Loading","TokenByAddress","Search","isSwap","handleTokenClick","selectedToken","_searchInputRef$curre","renderToken","descriptionText","tokenPrice","Token","renderTokenGroup","shouldShowSettings","tokenGroupContainer","tokenGroupHeader","tokenGroupTitle","tokenGroupAdditionalTitle","renderTokenSkeleton","tokenContainer","tokenContainerDisabled","tokenLogoContainer","logoContainer","tokenLogoSkeleton","tokenNetworkLogoSkeleton","nameContainer","tokenNameSkeleton","tokenValueSkeleton","tokenPriceContainer","rotateSkeleton","renderSearchResults","tokenToImport","tokenNotFound","tokenNotFoundTitle","tokenNotFoundDesc","tokenSelectInputWrapper","tokenSelectSearchIcon","tokenSelectInput","tokenSelectSearchResetWrapper","tokenSelectSearchReset","tokenSelectSearchResetIcon","tokenSelectContent","tokenLogo","tokenLogoDisabled","tokenTextDisabled","tokenNetwork","isFilterActive","buildContentHtml","withRadix","sanitizeHtml","hasDot","formattedWholePart","fractionStr","suffixStr","fractional","tempEl","shouldGetParentWidth","isFontChangedRef","measureEl","updateFontScale","offsetParent","parentElement","paddingLeft","paddingRight","cloneNode","scale","clearText","inputClassName","labelClassName","valueClassName","cornerClassName","onPressEnter","onInputClick","placeholderRef","useFontScale","textRef","updateHtml","newText","html","restoreCaretPosition","prefixLength","_clearedValue$","selection","getSelection","rangeCount","getRangeAt","setStart","clearedValue","NODE_TYPE","NodeFilter","SHOW_TEXT","treeWalker","createTreeWalker","elem","FILTER_REJECT","FILTER_ACCEPT","nextNode","currentNode","getTextNodeAtPosition","removeAllRanges","newRange","setEnd","addRange","saveCaretPosition","inputWrapperFullClass","input__wrapper","inputWrapperStatic","input__wrapper_hasFocus","large","labelTextClassName","cornerFullClass","swapCorner","swapCorner_error","rich","rich__value","rich__placeholder","focusAtTheEnd","createRange","selectNodeContents","collapse","changeInvoiceToken","closeInvoiceModal","isTokenSelectorOpen","openTokenSelector","closeTokenSelector","amountValue","setAmountValue","setComment","invoiceUrl","handleTokenSelect","contentTitle","RichNumberInput","SelectTokenButton","tokenButton","invoiceComment","labelForInvoice","invoiceLinkField","Selector","TokenSelector","stopById","onActiveClick","SCROLL_DURATION","CLIP_PATH_CONTAINER_CLASS_NAME","activeTab","overlayClassName","onSwitchTab","onActiveTabClick","appWidth","activeTabElement","offsetLeft","activeTabOffsetLeft","activeTabOffsetWidth","newLeft","containerWidth","scrollId","remainingPath","isStopped","scrollSnapType","startAt","currentPath","animateHorizontalScroll","useActiveTabCentering","_containerRef$current","clipPath","paddingTop","clipLeft","rightPosition","leftPosition","calculateClipPath","openInvoiceModal","closeReceiveModal","isSwapAllowed","isOnRampAllowed","handleBuyFiat","handleSwapClick","handleReceiveClick","qrCode","useQrCode","hiddenClassName","hideLogo","withFormatTransferUrl","setIsInitialized","logoUrl","qrCodeRef","QrCodeStyling","dotsOptions","cornersSquareOptions","imageOptions","imageSize","crossOrigin","qrOptions","errorCorrectionLevel","_qrCode","_options","verifyHardwareAddress","qrCodeHidden","qrClassNames","qrCodeStatic","contentTitleQr","copyButtonStatic","addressWrapper","contentTitleLedger","contentTitleLedgerStatic","dottedLink","TonActions","canBuyWithCard","TronActions","stickToFirst","setReceiveActiveTab","tabTon","tabTron","handleSwitchTab","tabId","TonContent","TronContent","currentTab","TabList","tabsInModal","tabsOverlay","tronActive","contentWrapper","contentStatic","iosModalDialog","receiveHeader","receiveHeaderNoTabs","Content","firstButtonText","secondButtonText","onFirstButtonClick","onSecondButtonClick","amountString","amountFraction","amountSymbol","getHelpCenterUrl","_HELP_CENTER_URL$type","useAmountInputState","onAmountChange","isBaseCurrency","switchCurrency","tokenAmountBI","isAmountReadonly","onTokenChange","setToken","setIsBaseCurrency","tokenAmountRef","currencyAmountRef","currencyDecimals","setAmountsFromToken","tokenAmountToCurrencyAmount","setAndReportAmountFromPrice","newTokenAmount","currencyAmountToTokenAmount","formalizeStringAmount","tokenAmountToBigInt","onInputChange","currencyAmount","inputValue","alternativeValue","useCurrencySwitch","onMaxAmountClick","onAlternativeAmountClick","tokenDecimals","useTokenDropdown","tokenBySlug","selectedStakingId","selectableTokens","hasNominatorsStake","hasLiquidStake","getStakingTokens","useTransitionActiveKey","isAllMode","onAmountClick","EMPTY_TOKEN_LIST","isInMode","buttonPrefixText","getTokenId","tokenToDropdownItem","tokenById","selectedTokenId","dropdown","isMaxAmountLoading","isMaxAmountAllMode","renderBottomRight","onInputFocus","onInputBlur","keepInputFocus","cancelFocusTimer","_cancelFocusTimer$cur","_cancelFocusTimer$cur2","useKeepInputFocus","handleMaxAmountClick","AmountInputMaxButton","TokenDropdown","renderInput","renderAlternativeAmount","getNumberRegex","zeroValue","isSensitiveData","sensitiveDataMaskSkin","prevValueRef","renderValue","noFallbackToPrev","contentEl","valueRegex","mask","BottomRightSlide","ACTIVE_STATES","runThrottled","_accountState$staking","apiError","submitStakingInitial","fetchStakingFee","cancelStaking","isSafeInfoModalOpen","openSafeInfoModal","closeSafeInfoModal","setAmount","isIncorrectAmount","isInsufficientFee","isBelowMinimumAmount","annualYieldText","tvl","dailyReward","apr","calcJettonStakingApr","annualYieldStandard","annualYieldVerified","isNativeToken","nativeSlug","nativeBalance","minAmount","getStakingMinAmount","doubleNetworkFee","shouldLeaveForUnstake","handleHelpCenterClick","handleCheckEligibility","errorTransitionKey","InsufficientFee","BelowMinimumAmount","ApiError","balanceError","amountBottomRight","amountBottomRight_error","amountBottomRight_slide","handleChangeStaking","amountInputProps","welcome","welcome_static","sticker_static","welcomeInformation","welcomeInformation_static","stakingApy","textButton","AmountInput","amountBig","currentAmount","balanceResult","balanceResultWrapper","balanceResultWrapper__slide","RichNumberField","balanceResultInput","balanceResultLabel","renderStakingResult","stakingSafeDialog","jvault_link","renderSafeDescription","renderSafeInfoModal","IS_OPEN_STATES","setStakingScreen","clearStakingError","submitStaking","renderedStakingAmount","setRenderedStakingAmount","handleTransferSubmit","handleViewStakingInfoClick","StakingInitial","transactionBanner","renderTransactionBanner","TransferResult","submitStakingClaim","cancelStakingClaim","rewardAmount","isNativeEnough","withModalHeader","feeClassName","renderInfo","tonToken","profit","selectAccountStakingTotalProfit","startUnstaking","startStakingClaim","fetchStakingHistory","unstakeTime","canBeClaimed","hasHistory","shouldRenderSpinner","spinnerRef","shouldRenderTotalAmount","totalAmountRef","handleStakeClick","handleUnstakeClick","handleClaimClick","stakingResult","renderUnstakeDescription","textKey","unstakeTime_purple","unstakeTimeIcon","stakingInfo","stakingInfo_modal","stakingInfoNoHistory","stakingTransition","stakingInfoClose","stakingBalance","balanceStakedLabel","balanceStakedResult","stakingInfoLoading","stakingInfoLoadingAnimation","stakingInfoButtons","stakingInfoButtonsAdaptiveWidth","stakingInfoButtonsWithMargin","stakingInfoButton","checkEligibilityButton","rewardString","renderRewards","history_static","historyTotal","historyTotalValue","historyTitle","historyList","historyList_static","StakingProfitItem","withBackground","stakingInfoModalContent","StakingInfoContent","FULL_SIZE_NBS_STATES","isNominators","hasAmountError","isOnlyFullAmount","setUnstakeAmount","successUnstakeAmount","setSuccessUnstakeAmount","isLongUnstake","unstakeDate","setUnstakeDate","isUnstakeDisabled","refreshUnstakeDate","handleStartUnstakeClick","renderUnstakeTimer","unstakeDateText","shouldShowInfo","unstakeInfoTransition","unstakeInfo","renderUnstakeInfo","newAppVersion","calcVestingAmountByStatus","statuses","currentAcc","isUnfreezeRequested","mycoin","closeVestingModal","startClaimingVesting","currentlyFrozenAmount","currentlyReadyToUnfreezeAmount","isDisabledUnfreeze","handleStartClaimingVesting","volume","initialAmount","isInteractive","endsAt","submitClaimingVesting","cancelClaimingVesting","clearVestingError","claimAmount","SEND_CONTEXT_MENU_ITEMS","handleSendMenuItemClick","restProps","FeeDetailsContent","realFeePrecision","excessFeePrecision","extraContent","full_fee","excess_symbol","chain_name","BUTTON_ANIMATION_DURATION","isSending","isNotEnoughNative","isPriceImpactError","isErrorExist","shouldSendingBeVisible","errorMsgByType","isTouched","textStr","transitionKeyRef","renderThrottled","throttledResolver","useThrottledResolver","useThrottledSignal","renderedText","swapArrowIcon","footerButtonWrapper","footerButtonInner","IS_WHOLE_PART_BIG_REGEX","setSwapDex","selectedDexLabel","setSelectedDexLabel","renderedDexItems","renderedCurrentDexLabel","renderedBestRateDexLabel","isBestRateSelected","confirmLabel","dex_name","shouldRenderForSwapV2","handleDexConfirm","shouldRenderBenefit","benefitAmount","bestRateEstimate","otherEstimate","isDirectSwap","ourFeeValue","benefit","calculateBenefitAmount","renderedAmounts","formattedAmount","regex","getNumberParts","wholePartRaw","dotPart","formatDexItemAmount","buttonContent","DedustPath","StonfiPath","renderedDexItem","SLIPPAGE_VALUES","SwapSettings","showFullNetworkFee","onNetworkFeeClick","setSlippage","canEditSlippage","currentSlippage","setCurrentSlippage","priceImpactError","slippageError","handleSave","handleInputChange","stringValue","advancedInput","slippageList","advancedSlippageButton","balanceLink","dot","advancedSlippageContainer","advancedSlippage","renderSlippageValues","Tooltip","slippageLabel","advancedSlippageError","advancedBlock","advancedRow","advancedDescription","advancedValue","ValuePlaceholder","renderRate","actualFee","feeElement","advancedLink","advancedLinkIcon","renderNetworkFee","percent","advancedError","SwapSettingsModal","advancedPlaceholder","advancedTooltip","advancedTooltipContainer","_explainedFee$fullFee2","_explainedFee$fullFee3","_explainedFee$realFee2","setSwapAmountIn","setSwapAmountOut","switchSwapTokens","estimateSwap","setSwapScreen","setSwapCexAddress","authorizeDiesel","inputInRef","inputOutRef","currentTokenInSlug","currentTokenOutSlug","nativeTokenInSlug","nativeUserTokenIn","amountOutBigint","balanceIn","isEnoughBalance","swapAmountInBigint","networkNativeFeeBigint","isBalanceSufficientForSwap","isEnoughNative","isDieselNotAuthorized","hasAmountInError","amountOutValue","hasInsufficientFeeError","isCrosschain","isBuyAmountInputDisabled","handleBuyAmountInputClick","_pairsBySlug$currentT","useReverseProhibited","handleEstimateSwap","debounceSetAmountIn","debounceSetAmountOut","currentSubModal","openSettingsModal","openFeeModal","closeSubModal","_explainedFee$realFee3","isFeeModalAvailable","currentModal","setCurrentModal","useSubModals","handleAmountInChange","handleSelectTokenInModalOpen","SelectTokenFrom","handleSelectTokenOutModalOpen","SelectTokenTo","handleAmountOutChange","handleSwitchTokens","amountInput","inputLabel","amountInputInner","swapCornerTop","swapCornerStaticTop","swapButtonWrapper","swapButtonWrapperStatic","AnimatedArrows","amountInputBuy","swapCornerBottom","swapCornerStaticBottom","SwapDexChooser","footerBlock","footerBlockStatic","feeLine","renderFee","priceImpactStatic","priceImpactSticker","priceImpactContent","priceImpactTitle","priceImpactArrow","priceImpactDescription","renderPriceImpactWarning","changellyInfo","changellyInfoStatic","changellyInfoTitle","changellyIcon","changellyInfoDescription","policy","kyc","renderChangellyInfo","SwapSubmitButton","FeeDetailsModal","shouldAnimate","hasAnimation","startAnimation","stopAnimation","renderArrow","isInverted","arrowContainer","arrowContainerInverted","arrowOld","animateDisappear","arrowNew","animateAppear","swapButton","trimStringByMaxBytes","maxBytes","decoder","sliced","COMMENT_DROPDOWN_ITEMS","isCommentRequired","isEncryptedCommentSupported","onCommentChange","setTransferShouldEncrypt","handleCommentOptionsChange","dropdownItems","AUTHORIZE_DIESEL_INTERVAL_MS","isMemoRequired","fetchTransferFee","fetchNftFee","setTransferAmount","setTransferToAddress","setTransferComment","cancelTransfer","checkTransferAddress","dismissTransferScamWarning","transferToken","renderedScamWarningType","isDisabledDebounce","doesSupportComment","handleAddressInput","isValueReplaced","shouldDisableClearButton","transferAmount","isFullTokenTransfer","tokenRequiredAmount","nativeTokenRequiredAmount","isBalanceSufficientForTransfer","isAmountMissing","authorizeDieselInterval","updateDieselState","runFunction","handleTokenChange","clearForm","handleClear","handleScamWarningModalClose","handleCommentChange","isAmountGreaterThanBalance","isFeeModalOpen","closeFeeModal","useFeeModal","tokensToSelect","selectedTokenSlug","isSelectableToken","handleAmountChange","AmountInputSection","CommentSection","scamWarning","help_center_link","getScamWarning","isMenuDisabled","shouldDisableOnLink","shouldDisableOnLongTap","shouldDisablePropagation","isContextMenuOpen","setIsContextMenuOpen","contextMenuAnchor","setContextMenuAnchor","contextMenuTarget","setContextMenuTarget","handleBeforeContextMenu","handleContextMenu","clientY","handleContextMenuClose","handleContextMenuHide","handleTouchMove","timer","clearLongPressTimer","clearLongPressTimerAndStopEvent","origialEvent","startLongPressTimer","emulateContextMenuEvent","WithContextMenu","onItemClick","buttonRef","useContextMenuHandlers","TABS","Receive","STAKING_TAB_TEXT_VARIANTS","inactive","unstakeRequested","readyToClaim","activeTabIndex","isStakingDisabled","stakingStatus","setActiveTabIndex","transferSlideClassName","renderedBgHelpers","contentBackgroundClassName","contentBgRef","contentFooterRef","lastHeightRef","adjustBg","_transitionRef$curren","_transitionRef$curren2","activeSlideSelector","transferQuery","rect","shouldRenderWithoutTransition","contentBgStyle","contentFooterStyle","componentObserver","ResizeObserver","contentBg","contentFooter","useTabHeightAnimation","slideContent","contentSlideStaked","areNotAllTabs","isLastTab","isAddBuyAnimating","playAddBuyAnimation","stopAddBuyAnimation","isSendAnimating","playSendAnimation","stopSendAnimation","isSwapAnimating","playSwapAnimation","stopSwapAnimation","isStakeAnimating","playStakeAnimation","stopStakeAnimation","stickerPaths","renderCurrentTab","slideContentAddBuy","slideContentTransfer","TransferInitial","SwapInitial","handleSelectTab","notAllTabs","tabIcon","tabText","tabDecoration","restButtonProps","withContextMenu","tabDelimiter","tab_purple","tab_purpleText","contentHeader","firstActive","lastActive","contentHeaderInner","onEarnClick","openReceiveModal","addBuyButtonName","handleStartSwap","handleStartTransfer","handleAddBuyClick","handleEarnClick","buttonProps","calcBigChangeValue","currentPrice","changeFactor","calculateFullBalance","primaryValue","stakingAmount","primaryWholePart","primaryFractionPart","changeValue","changePercent","changePrefix","useUpdateIndicator","updateStartedAtKey","setIsUpdating","updateStartedAt","timeElapsedSinceLastUpdateStarted","svgMaskId","viewBox","cx","cy","dur","repeatCount","hasCardsInfo","openMintCardModal","shouldRenderMintCardsButton","mintCardsButtonRef","ClockIcon","scheduledAnimationsCounter","resetCounterOnTickEnd","prevText","characters","textLength","prevTextLength","charIndex","prevTextCharIndex","renderAnimatedCharacters","chains","chainDropdownItems","hasDomain","handleCopyAddress","handleDomainClick","handleExplorerClick","closeTimeoutRef","handleMouseEnter","handleMouseLeave","addressContainer","addressLabel","multichainIconSrc","multichainIcon","iconCaretSmall","addressMenuBubble","fullItemClassName","menuStyles","separator","menuItemName","domainText","addressText","menuFontIcon","menuExplorerIcon","displayText","explorerButton","currentCurrency","triggerRef","excludedCurrency","currencyList","handleBaseCurrencyChange","_nft$metadata","isSticky","noShowAnimation","onTransitionEnd","cardClassName","rootClassName","sticky","loaded","withShadow","shadow","onCardChange","prevNftRef","prevNft","prevNftAddress","isMountRef","handleTransitionEnd","CustomCardBackground","TOKEN_CARD_COLORS","orange","pink","red","sea","tegro","blue","TOKEN_EXCEPTION_COLORS","prices","selectedIndex","imgClassName","onSelectIndex","boundingPoints","priceValues","points","scaleX","scaleY","getBasisPoint","indexesCount","point","tangent","firstPoint","getCurvePath","pCurrent","pMinus1","pMinus2","handleMouseMove","containerX","nextIndex","onMouseMove","onTouchMove","activePoint","partialPath","getPath","renderSvg","ITEMS","currentPeriod","setCurrentTokenPeriod","handlePeriodChange","OFFLINE_TIMEOUT","DEFAULT_PERIOD","historyPeriods","onYieldClick","loadPriceHistory","amountRef","currencyMenuAnchor","setCurrencyMenuAnchor","isHistoryMenuOpen","openHistoryMenu","closeHistoryMenu","shouldUseDefaultCurrency","currencySymbol","selectedHistoryIndex","setSelectedHistoryIndex","prevHistoryIndex","lastPrice","bestState","refreshHistory","newPeriod","handleCurrencyChange","closeCurrencyMenu","tokenLastUpdatedAt","tokenLastHistoryPrice","selectedHistoryPoint","tokenChangePrice","dateStr","initialPrice","_history$find","valueBig","change","amountChange","withChange","historyStartDay","withExplorerButton","shouldHideChartPeriodSwitcher","closestColor","smallestDistance","tokenRgbColor","colorName","colorValue","rgbA","rgbB","l1","a1","b1","l2","a2","b2","c1","deltaC","deltaA","deltaB","deltaLKlsl","deltaCkcsc","deltaHkhsh","deltaE","calculateTokenCardColor","tokenCard","tokenInfoHeader","currencySwitcher","openCurrencyMenu","CurrencySwitcherMenu","tokenInfoSubheader","tokenTitle","apy","tokenChange","tokenChangeSensitiveData","tokenChangeSpoiler","TokenPriceChart","chart","chartImg","tokenHistoryPrice","tokenPriceDate","center","periodChooser","periodChooserHidden","ChartHistorySwitcher","tokenCurrentPrice","getTokenExplorerBaseUrl","getExplorerTokenUrl","tokenExplorerButton","renderExplorerLink","onTokenCardClose","customCardClassName","setCustomCardClassName","setWithTextGradient","screenWidth","screenWidthDep","renderedToken","shouldRenderTokenCard","tokenCardRef","getSensitiveDataMaskSkinFromCardNft","handleCardChange","hasGradient","containerWrapper","loadingDotsContainer","backstage","CustomCardManager","containerInner","iconCaretClassNames","iconCaretFraction","iconCaret","noAnimationCounter","balanceTransition","balanceSlide","blurred","AnimatedCounter","currencySwitcherMenu","changeSpoiler","renderBalance","CardAddress","MintCardButton","TokenCard","getScrollableContainer","selector","getScrollableContainerSelector","getScrollContainerClosestSelector","addNftsToBlacklist","closeNftCollection","closeHideNftModal","handleHide","number","getViewportSlice","sourceIds","listSlice","offsetId","indexForDirection","Forwards","newViewportIds","areSomeLocal","areAllLocal","Backwards","newIsOnTop","loadMoreBackwards","listIds","_currentStateRef$curr","withResetOnInactive","currentStateRef","viewportIds","isOnTop","prevSlug","resetScroll","prevListIds","prevIsDisabled","oldViewportIds","oldIsOnTop","newListIds","sliceLength","getViewportSliceAfterListChange","getMore","DEFAULT_LIST_SELECTOR","DEFAULT_PRELOAD_BACKWARDS","DEFAULT_SENSITIVE_AREA","itemSelector","preloadBackwards","sensitiveArea","withAbsolutePositioning","noScrollRestore","noScrollRestoreOnTop","noFastList","cacheBuster","beforeChildren","scrollContainerClosest","onLoadMore","onDragOver","onDragLeave","stateRef","loadMoreForwards","scrollContainer","prevItems","listItemElements","newScrollTop","currentAnchor","newAnchorTop","currentAnchorTop","nextAnchor","isScrollTopJustUpdated","listLength","isNearTop","offsetTop","isNearBottom","isUpdated","nextAnchorTop","closestScrollContainer","handleNativeScroll","cleanupAnimation","topOffset","withAnimation","prevTopOffset","animateOpacity","animateMove","useActivityListEntry","SCROLL_THRESHOLD","DATE_ID_PREFIX","EMPTY_DICTIONARY","isHistoryEndReached","allActivityIds","selectActivityHistoryIds","totalTokensAmount","shouldShowSeparateAssetsPanel","hasUserScrolledRef","listItemIds","_tokensBySlug$activit","filterActivityIds","lastActivityDayStart","activityDayStart","addDatesToActivityIds","firstListItemId","loadMore","useInfiniteScroll","getListItemKey","keyByIdRef","oldActivityById","keyById","oldActivities","newActivityId","oldActivityId","newActivityIds","itemId","_keyByIdRef$current","useListItemKeys","prevIsLoading","shouldUseAnimations","itemPositionById","currentContainerHeight","lastViewportId","activityOffset","_prevItemPositionById","_itemPositionById$anc","prevItemPositionById","anchorId","prevTop","nextTop","scrollBy","usePreventScrolledListShift","handleActivityClick","InfiniteScroll","_itemPositionById$ite","itemContent","dateValue","isFirst","formattedDate","dateWithLoader","renderDate","isActivityActive","isLastInDay","ActivityListItem","renderHistory","NewWalletGreeting","UNFREEZE_DANGER_DURATION","OPEN_CONTEXT_MENU_CLASS_NAME","vestingStatus","unfreezeEndDate","isInvestorView","isStakingAvailable","isVesting","renderedAmount","changeClassName","change_up","change_down","withYield","withLabel","getTokenName","fiatAmountCols","shouldRenderYield","yieldRef","isContextMenuShown","isBackdropRendered","toggleTokenVisibility","isServiceToken","hasUnclaimedRewards","mandatoryItems","useTokenContextMenu","renderYield","apyLabel","apyLabel_staked","renderChangeIcon","iconArrow","renderStakingIcon","wrapperVisible","vestingIcon","primaryCell","nameText","chainLabel","secondaryCell","secondaryValue","secondaryValue_staked","secondaryValue_vesting","secondaryValue_vestingUnfreeze","totalAmount","canRenderYield","renderDefaultView","_accountState$vesting","isSeparatePanel","onTokenClick","onStakedTokenClick","renderedTokens","renderedMycoin","userMycoin","activeStates","stakedTokens","shouldRenderStakedTokens","vestingTokenRef","shouldRenderVestingToken","vestingAmount","onVestingTokenClick","loadMycoin","hasVesting","isMycoinLoaded","useVesting","viewportSlugs","viewportIndex","handleOpenTokenSettings","stateByTokenSlug","wrapperLoading","emptyListSeparate","indexInViewport","isSwapAvailable","noTokens","noTokensText","noTokensHeader","noTokensDescription","openSettingsButton","selectNfts","burnNfts","openHideNftModal","removeCollectionTab","isTelegramGifts","collectionNfts","dnsExpireInDays","isInTabs","isOnFragment","getgemsBaseUrl","nftCollectionAddress","getExplorerNftCollectionUrl","handleMenuOpen","isChecked","ON_SALE_ITEM","TON_DNS_ITEM","SEND_ITEM","FRAGMENT_ITEM","GETGEMS_ITEM","TON_EXPLORER_ITEM","COLLECTION_ITEM","HIDE_ITEM","RENEW_ITEM","NOT_SCAM","UNHIDE","BURN_ITEM","SELECT_ITEM","INSTALL_CARD","RESET_CARD","INSTALL_ACCENT_COLOR","RESET_ACCENT_COLOR","LINK_TO_ADDRESS","CHANGE_LINKED_ADDRESS","useNftMenu","linkedAddress","isNftBlacklisted","isNftWhitelisted","isNftInstalled","isNftAccentColorInstalled","openNftCollection","addNftsToWhitelist","closeNftAttributesModal","openUnhideNftModal","clearCardBackgroundNft","clearAccentColorFromNft","openDomainLinkingModal","closeOverlays","fragmentUrl","isTonDns","isCard","isContextMenuMode","onOpen","tonDnsExpiration","clearNftSelection","isLottie","shouldPlay","markHover","unmarkHover","lottie","useIsIntersecting","isHover","useLottie","isSelectionEnabled","isSelected","isDnsExpireSoon","shouldRenderWarning","warningRef","handleRenewDomainClick","handleOpenContextMenu","handleOpenMenu","handleCloseMenu","renderDnsExpireWarning","Radio","NftMenu","fetchNftsFromCollection","clearNftsSelection","hasSelection","setIsScrolled","_containerRef$current2","nft_marketplace","selectAllNfts","allSelectedIsTonDnsNft","tonDnsMultiSelected","handleSendClick","handleBurnClick","handleHideClick","MAIN_CONTENT_TABS_LENGTH","INTERSECTION_APPROXIMATION_VALUE_PX","activeNftKey","_vesting$info","tokensCount","doesSupportNft","selectDoesAccountSupportNft","onTabsStuck","tabsRef","hasNftSelection","numberOfStaking","handleNftsMenuButtonClick","HiddenNfts","nftCollections","hasTelegramGifts","itemsByAddress","shouldRenderHiddenNftsSection","blacklistedAddressesSet","mainContentTabsCount","mainContentTabs","contentTransitionKey","nftCollectionIndex","handleScrollToTop","scrollTo","updateScrolledState","intersectionRootMarginTop","handleTabIntersection","intersectionRect","intersectionRatio","isStuck","tabsContainerStuck","_e$target","handleClickAsset","handleContentTransitionStop","portraitContainer","landscapeContainer","Nfts","assetsPanel","contentPanel","landscapeContentPanel","headerTransitionKey","tabsContainer","tabsContainerForNftCollection","tabsContent","tabsSlide","NftSelectionHeader","NftCollectionHeader","slides","HideNftModal","newName","setNewName","currentWalletVersion","forceClose","accountClassName","accountSelectorClassName","withAccountSelector","withBalance","openAddAccountModal","openAccountSelector","closeAccountSelector","isEdit","openEdit","closeEdit","shouldRenderDialog","dialogContainerRef","isBip39Account","hasTonWallet","withAddW5Button","accountsAmount","balanceValues","handleSwitchAccount","handleAddV5WalletClick","WalletVersion","accountTitleClassName","accountTitle","accountTitleInteractive","renderAccountsSelector","dialogFullClassName","dialog_compact","renderButton","createAccountButton","createAccountIcon","balanceCurrency","balanceCurrencyPrefix","balanceFractionPart","handleOpenAccountSelector","accountTitleInner","arrowIcon","AccountRenameModal","handleManualLock","handleFullscreenToggle","exitFullscreen","setAppLayout","handleAppLayoutToggle","setIsSensitiveDataHidden","handleSensitiveDataToggle","areTabsStuck","canToggleAppLayout","iconsAmount","QrScannerButton","AccountSelector","AppLockButton","ToggleSensitiveDataButton","ToggleFullscreenButton","ToggleLayoutButton","SettingsButton","getThemeColorMetaElement","isLight","metaThemeColor","onOpenBackupWallet","lightColor","darkColor","metaElementLight","metaElementDark","lightContent","darkContent","useBrowserUiColor","wrapper_landscape","isOpenRef","setShouldRender","prevIsShown","hideTimeoutRef","toggleOpen","ignoredAddressForRenewal","nftForRenewal","expiringDomains","filterExpiringDomains","renderedNftForRenewal","expireInDays","expiredDomains","Collapsible","wrapperFlex","previewNfts","domainPreviewWrapper","domainPreview","renderPreview","renderWarningMessage","closeSecurityWarning","helpCenterLink","multisig_warning_link","linkContainer","link","IS_UNSAFE_WEB","testnetWarning","BackupWarning","RenewDomainWarning","TronScamWarning","SecurityWarning","_global$mediaViewer","openBackupWalletModal","closeStakingInfo","updatePendingSwaps","cardRef","portraitContainerRef","landscapeContainerRef","markIsFocused","unmarkIsFocused","setAreTabsStuck","usePreventPinchZoomGesture","isPageAtTop","shouldHideBalanceInHeader","handleTokenCardClose","Warnings","Header","Card","PortraitActions","LandscapeActions","StakeModal","StakingInfoModal","ReceiveModal","InvoiceModal","UnstakeModal","StakingClaimModal","VestingModal","VestingPasswordModal","RenewDomainModal","LinkingDomainModal","UpdateAvailable","RenderingState","versionById","withOtherWalletVersions","clearAccountError","clearAccountLoading","isNewAccountImporting","setIsNewAccountImporting","handleModalClose","handleNewAccountClick","handleImportAccountClick","handleViewModeWalletClick","ViewMode","handleHardwareWalletConnected","SelectAccountsHardware","handleOpenSettingWalletVersion","AddAccountPasswordModal","buttonLabel","small","onNext","mnemonicContainer","privateKeyHex","privateKey","writedownAccepted","setWritedownAccepted","openWalletAccepted","setOpenWalletAccepted","canBeStolenAccepted","setCanBeStolenAccepted","modalSticker","setIsBackupRequired","setCheckIndexes","mnemonicRef","handleSafetyConfirm","handleBackupErrorUpdate","handleCheckMnemonic","_mnemonicRef$current","handleRestartCheckMnemonic","handleCheckMnemonicSubmit","SafetyRules","MnemonicPrivateKey","MnemonicList","MnemonicCheck","renderedNft","attributesCount","isFolded","setIsFolded","isNoData","FOLD_LIMIT","handleExpand","handleCollectionClick","actionIcon","nftInfo","fullImage","nftName","collectionNameIcon","attributesList","renderAttributeRow","attribute","trait_type","attributeValue","expandButton","expandButtonIcon","closeOnRampWidgetModal","animationTimeoutRef","isAnimationInProgress","setIsAnimationInProgress","iframeSrc","setIframeSrc","onIframeLoaded","frameBorder","START_SCAN_DELAY_MS","MODAL_ANIMATION_DURATION_MS","DESTROY_SCANNER_DELAY_MS","isFlashlightAvailable","setIsFlashlightAvailable","isFlashlightEnabled","setIsFlashlightEnabled","isScannerStarted","setIsScannerStarted","flashlightRef","flashlightShouldRender","scanSquareRef","stopScan","startScan","formats","QrCode","scanAreaCoordinates","scanSquareRect","scaledRect","getDomNodeDimensions","barcodes","barcode","qrCodeCoordinates","cornerPoints","topHalf","bottomHalf","sortCoordinatesClockwise","scanArea","isQrCodeOutsideScanArea","rawValue","isTorchAvailable","available","isTorchEnabled","enabled","startScanTimeoutId","documentClassModifyTimeoutId","handleFlashlightClick","disableTorch","enableTorch","flashlightButtonClassName","submitSignature","clearSignatureError","cancelSignature","complete","handleConfirm","transferStyles","transitionContent_simple","usePrevDuringAnimation","timeoutRef","isCurrentPresent","isPrevPresent","onCompleted","initialSeconds","secondsLeft","setSecondsLeft","shouldShowWarning","clearTimer","pad","remainingSeconds","formattedTime","amountInCols","amountOutCols","renderTokenInfo","isReceived","amountWithSign","infoRow","noIcon","noCurrency","infoRowIcon","infoRowToken","infoRowAmount","infoRowAmountGreen","infoRowAmountError","infoRowChain","infoRowCurrency","infoRowCurrencyValue","infoSeparator","infoSeparatorIcon","infoSeparatorIconError","TransactionFee","CHANGELLY_EXPIRE_CHECK_STATUSES","CHANGELLY_ERROR_STATUSES","_accountState$activit","fetchActivityDetails","closeActivityInfo","renderedActivity","titleBadge","shouldRenderCexInfo","isCex","isCexError","isCexHold","isCexWaiting","isCexPending","isExpired","cexTransactionId","isTitleBadgeWarning","cexErrorMessage","isCountdownFinished","transactionUrl","shouldShowQrCode","renderMemo","textFieldWrapper","textFieldLabel","transactionHeader","headerTitle__badge","warning","headerDate","SwapTokensInfo","changellyInfoBlock","changellyDescription","changellyDescriptionBold","blockchain","Countdown","renderAddress","renderSwapInfo","email","swapSupportBlock","errorCexMessage","livechat","footer","isButtonVisible","renderFooterButton","typeClass","withStatus","renderedTransaction","isActivityWithHash","_activity$extra","isOurStaking","isOurUnstaking","isAnyPending","isTransactionWithPoisoning","canDecryptComment","decryptedComment","setDecryptedComment","shouldRenderTransactionId","transactionIdRef","startOfStakingCycle","endOfStakingCycle","shouldRenderUnstakeTimer","unstakeTimerRef","clearPasswordError","openPasswordSlide","closePasswordSlide","handleStartStakingClick","handleUnstakeMoreClick","openHiddenComment","renderHeader","TransactionAmount","copyButtonWrapper","scamAddress","feeField","changellyTextField","canUnstake","buttonWide","renderFooter","renderTransactionContent","passwordFormContent","passwordFormContentInModal","unstakeModal","closeUnhideNftModal","handleUnhide","onDismiss","setIsOpen","timerRef","closeAndDismiss","dismissNotification","Notification","bottomBarHideCounter","bottomBarListeners","getIsBottomBarHidden","notifyBottomBarListeners","showBottomBar","wasHidden","switchToWallet","switchToExplore","switchToSettings","setIsHidden","OCCUPIED_HEIGHT","getNode","_container","createGhost","_source$parentElement","ghost","img","oncontextmenu","HTMLImageElement","applyShape","isOpening","isCustom","shouldAnimateFirstRender","externalRef","prevChildren","fromChildrenRef","SHOULD_CLOSE_VIEWER_HANDLERS","descriptionUrl","useSignalRef","getZoomChange","setZoomChange","useZoomChange","whitelistedMediaIds","isNftWhiteListed","SLIDES_GAP","cancelAnimation","cancelZoomAnimation","selectMedia","getMediaId","activeSlideRef","leftSlideRef","rightSlideRef","lastTransformRef","swipeDirectionRef","initialContentRectRef","isReleasedRef","prevZoomChangeRef","isMouseDown","setIsMouseDown","getTransform","setTransform","transformRef","getActiveMediaId","setActiveMediaId","activeMediaIdRef","isScaled","activeMediaId","windowHeight","windowWidth","selectMediaDebounced","clearSwipeDirectionDebounced","clickXThreshold","getTransformStyle","changeSlide","dryRun","lastTransform","mId","handleNextSlide","handlePrevSlide","lastDragOffset","lastZoomCenter","panDelta","lastGestureTime","setLastGestureTime","changeSlideOnClick","calculateOffsetBoundaries","initialContentRect","inBoundsX","inBoundsY","minOffsetX","maxOffsetX","minOffsetY","maxOffsetY","absX","absY","s1","scaleFactor","x1","y1","Vx","Vy","dirX","cancelDrag","absOffsetX","absOffsetY","Vertical","Horizontal","SWIPE_X_THRESHOLD","SWIPE_Y_THRESHOLD","MIN_ZOOM","MAX_ZOOM","scaledCenterX","scaledCenterY","scaleOffsetX","scaleOffsetY","isInThreshold","hasNextSlide","zoomChange","hasZoomChanged","wheelEvent","WheelEvent","nextMediaId","prevMediaId","hasPrev","hasNext","isMoving","Media","_global$settings","mediaUrl","mediaByIds","mediaIds","blacklistedIds","prevTxId","prevHiddenNfts","prevNoGhostAnimation","headerAnimation","shouldAnimateOpening","shouldAnimateClosing","renderedMediaIds","media","selectedMediaIndex","fromId","fromImage","mediaWidth","mediaHeight","getImageDimension","availableHeight","toWidth","toHeight","availableWidth","aspectRatio","calculatedWidth","calculateDimensions","toLeft","toTop","fromTop","fromLeft","fromWidth","fromHeight","fromTranslateX","fromTranslateY","fromScaleX","fromScaleY","clearShape","animateOpening","toImage","targetTop","display","isElementInViewport","existingGhost","ghostStyles","animateClosing","ShowTransition","MediaInfo","Actions","Slides","startCardMinting","currencyIcon","MAP_CARD_TYPE_TO_NAME","standard","silver","gold","platinum","black","CardSlides","TOTAL_SLIDES","closeMintCardModal","Standard","Silver","showNextSlide","Black","showPrevSlide","defaultProps","renderMediaCard","Gold","Platinum","navigation","navigationLeft","navigationIcon","navigationRight","muted","loop","playsInline","poster","video","slideInner","dots","dotActive","cardType","notMinted","avaliability","soldOut","sold","leftAmount","soldAmount","amountInner","amountLeft","amountSold","renderAvailability","CardPros","selectedCardType","clearMintCardError","submitMintCard","selectedCardName","CardRoster","mintCardBanner","resultWithTime","resultTimeIcon","onCheck","disableBiometrics","customSubmitButton","openBiometricsTurnOff","enableBiometrics","shouldDisablePasswordForm","customCancelButton","closeBiometricSettings","isTurnOnBiometricsOpened","isTurnOffBiometricsOpened","isTurnOffBiometricsWarningOpened","BiometricsTurnOn","BiometricsTurnOff","BiometricsTurnOffWarning","isNativeBiometricsEnabled","enableNativeBiometrics","clearNativeBiometricsError","pinPadType","pinTitle","prevIsEnabled","contentFullSize","stickerNativeBiometric","pinPadTitle","THEME_OPTIONS","darkThemeImg","isMintingCardsAvailable","isTrayIconEnabled","onTrayIconEnabledToggle","setAnimationLevel","isAvailableAccentLoading","setIsAvailableAccentLoading","availableAccentColorIds","setAvailableAccentColorIds","nftByColorIndexes","setNftsByColorIndex","isAirVersionEnabled","setIsAirVersionEnabled","nftCards","colors","nftsByColorIndex","colorIndex","getAccentColorsFromNfts","sortedColors","handleAirVersionSwitch","handleThemeChange","newTheme","handleAnimationLevelToggle","handleUnlockNewPalettesClick","renderColorButton","colorButton","colorButtonCurrent","iconLock","iconLockInverted","settingsBlockWithDescription","airImg","Switcher","menuSwitcher","blockDescription","blockTitle","settingsBlock","themeWrapper","theme_active","themeIcon","themeIcon_active","themeImg","colorList","subBlockAsButton","deleteToken","handleDeleteToken","ZERO_POINT","DEFAULT_OFFSET","EDGE_THRESHOLD","onDragEnd","externalStyle","knobStyle","parentRef","scrollRef","scrollIntervalId","translation","lastMousePosition","stopContinuousScroll","cancelAnimationFrame","startContinuousScroll","animateScroll","updateDraggablePosition","calculateConstrainedTranslation","setInitialState","_scrollRef$current","_ref$current2","getClientCoordinate","handleTouchStart","scrollRect","distanceFromTop","distanceFromBottom","scaledEase","handleMouseUp","dragButtonRef","cssStyles","lastScrollTop","draggableElement","parentRect","draggableRect","minX","maxX","minY","maxY","getOffsetBySlug","realIndex","getOffsetByIndex","parentContainer","updateOrderedSlugs","rebuildOrderedSlugs","tokensRef","sortableContainerRef","tokenToDelete","setTokenToDelete","orderedTokenSlugs","dragOrderTokenSlugs","draggedIndex","arraysAreEqual","handleOpenAddTokenPage","SelectTokenList","_state$orderedTokenSl","_state$orderedTokenSl2","handleDragEnd","handleTokenVisibility","contentRelative","sortableContainer","iconChevronRight","isDragged","draggedTop","isDeleteButtonVisible","isDragDisabled","Draggable","item_token","tokenDescription","deleteText","DeleteTokenModal","toggleTinyTransfersHidden","toggleInvestorView","toggleTokensWithNoCost","toggleSortByValue","setSettingsState","currencyItems","handleTinyTransfersHiddenToggle","handleInvestorViewToggle","handleOpenHiddenNfts","handleTokensWithNoPriceToggle","handleSortByValueToggle","localBaseCurrency","setLocalBaseCurrency","hiddenNftsCount","whitelistedAddressesSet","iconQuestion","wideTooltip","itemInfo","SettingsTokens","deleteAllDapps","handleDeleteAllDapps","handleDeleteDapp","isDisconnectModalOpen","openDisconnectModal","closeDisconnectModal","dappToDelete","setDappToDelete","handleDisconnectDapp","handleDisconnectAll","disconnectAllBlock","disconnectButton","DisconnectDappModal","getBuildPlatform","NETWORK_OPTIONS","CAN_DOWNLOAD_LOGS","canViewAllWalletVersions","onShowAllWalletVersions","startChangingNetwork","copyStorageData","currentNetwork","handleNetworkChange","handleAddTonOnlyWallet","handleDownloadLogs","logsString","accountsInfo","mainLogs","bottomSheetLogs","apiLogs","timezoneOffset","getTimezoneOffset","timezone","environment","commit","navigatorPlatform","build","flags","toISOString","getLogsString","filename","fileLocation","directory","Cache","file","writeFile","UTF8","uri","deleteFile","File","files","download","click","shareFile","item_disabled","developerCloseButton","sideTitle","removeNftSpecialStatus","isNftHidden","unmarkNftHidden","areSettingsInModal","nftImage","nftPrimaryCell","nftCollection","nftButtonUnhide","isWhitelisted","handleSwitcherClick","hiddenByUserNfts","probablyScamNfts","HiddenByUserNft","ProbablyScamNft","changeLanguage","handleLanguageChange","newLangCode","languageHeader","lc","item_lang","languageInfo","languageMain","languageNative","checkmarkImg","arePushNotificationsAvailable","toggleNotifications","toggleNotificationAccount","toggleCanPlaySounds","arePushNotificationsEnabled","handlePushNotificationsToggle","handleCanPlaySoundToggle","accountDisabled","AndroidSettings","IOSSettings","NativeSettings","NativeSettingsWeb","hasMnemonicWallet","onBackClick","onOpenSecretWordsSafetyRules","onOpenPrivateKeySafetyRules","openSettingsSlide","secretWordsImg","privateKeyImg","isBackupSlideActive","setPrivateKey","privateKeyResult","loadPrivateKey","PrivateKeyContent","backupType","mnemonicResult","loadMnemonic","onEnable","disableNativeBiometrics","isWarningModalOpen","openWarningModal","closeWarningModal","switcherTitle","warningTitle","warningDescription","faceIdImg","biometricsImg","handleConfirmDisableBiometrics","handleBiometricAuthToggle","renderDisableNativeBiometricsWarning","INITIAL_CHANGE_PASSWORD_SLIDE","createNewPin","newPassword","shouldShowBackup","navigateBackToSettings","isAutoUpdateEnabled","onSettingsClose","onAutoUpdateEnabledToggle","openBiometricsTurnOffWarning","openBiometricsTurnOn","setAppLockValue","setIsAllowSuspiciousActions","setIsAuthLoading","previousSlide","setBackupType","setHasMnemonicWallet","pinValue","setPinValue","confirmPinValue","setConfirmPinValue","shouldKeepCurrentPassword","handleBackToSettingsClick","openConfirmNewPinSlide","confirmNewPin","openBackupPage","backup","openNewPasswordSlide","openPasswordChangedSlide","passwordChanged","handleNewPasswordSubmit","handlePinSubmit","handleConfirmPinSubmit","handleChangePasswordClick","handleOpenPrivateKeySafetyRules","handleOpenSecretWordsSafetyRules","secretWords","handleOpenBackupWallet","handleOpenPrivateKey","handleOpenSecretWords","handleAppLockToggle","handleAutolockChange","handleAutoConfirmToggle","handleAllowSuspiciousActionsToggle","handleNativeBiometricsTurnOnOpen","NativeBiometricsTurnOn","optionAndroid","ApplicationDetails","optionIOS","shouldRenderNativeBiometrics","shouldRenderMinifiedPinPad","isAutoConfirmAvailable","isSlideActive","backupImg","NativeBiometricsToggle","changePasswordButton","itemSmall","itemAutoLock","itemDisabled","memoizedPassword","contentInModal","pinPadHeaderMinified","onlyTextHeader","stickerHuge","Backup","BackupSafetyRules","BackupSecretWords","BackupPrivateKey","addToken","withTopSpace","headerInsideModal","importAccountByVersion","handleAddWallet","blockWalletVersionText","item_wallet_version","walletVersionInfo","walletVersionTitle","walletVersionAddress","walletVersionInfoRight","walletVersionTokens","walletVersionAmount","totalBalance","blockWalletVersionReadMore","ton_link","SUPPORT_ACCOUNTS_COUNT_DEFAULT","versionsById","openSettingsHardwareWallet","clicksAmount","setClicksAmount","prevRenderingKeyRef","isDeveloperModalOpen","openDeveloperModal","closeDeveloperModal","withAllWalletVersions","markWithAllWalletVersions","isInitialScreen","activeLang","_versions$filter","lastTxId","balanceInCurrency","isTelegramLinkRendered","telegramLinkRef","handleSlideAnimationStop","handleCloseSettings","hideBottomBar","handlCloseDeveloperModal","handleConnectedDappsOpen","handleAppearanceOpen","Appearance","handlePushNotificationsOpen","handleSecurityOpen","Security","handleAssetsOpen","handleLanguageOpen","Language","handleAboutOpen","About","handleDisclaimerOpen","Disclaimer","handleBackClickToAssets","handleOpenWalletVersion","handleDeeplinkHookToggle","handleTonProxyToggle","handleTonMagicToggle","handleClickInstallApp","handleClickInstallOnDesktop","handleClickInstallOnMobile","handleLedgerConnected","setIsTrayIconEnabled","getIsTrayIconEnabled","handleTrayIconEnabledToggle","setIsAutoUpdateEnabled","handleAutoUpdateEnabledToggle","handleBackOrCloseAction","handleCloseLogOutModal","shouldCloseSettings","handleOpenHardwareModal","handleMultipleClick","handleShowAllWalletVersions","renderHandleDeeplinkButton","tonLinksImg","hidden","withBottomSpace","upgradeImg","installAppImg","tonProxyImg","tonMagicImg","handleOpenTelegramWeb","telegramImg","appearanceImg","assetsActivityImg","securityImg","connectedDappsImg","languageImg","walletVersionImg","ledgerImg","mtwCardsImg","tipsImg","helpcenterImg","supportImg","disclaimerImg","installDesktopImg","installMobileImg","aboutImg","item_red","exitImg","SettingsPushNotifications","SettingsAppearance","SettingsAssets","SettingsSecurity","SettingsDapps","SettingsLanguage","SettingsDisclaimer","SettingsNativeBiometricsTurnOn","SettingsTokenList","SettingsWalletVersion","nestedTransition","SettingsHiddenNfts","SettingsDeveloperOptions","Biometrics","fullDialogClassName","modalDialogWeb","modalContent","cancelSwap","toAddressRef","isAddressFocused","markAddressFocused","unmarkAddressFocused","hasToAddressError","setHasToAddressError","canContinue","setCanContinue","toAddressShort","SHORT_ADDRESS_SHIFT","handleCancelClick","caretPosition","newCaretPosition","validateToAddress","submitPassword","scrollContent","selectBlockchainBlock","inputAddress","inputAddressWrapper","inputButton","inputButtonShifted","blockchainHintWrapper","blockchainHintText","blockchainHintTextError","renderInputAddress","blockchainButtons","isFirstButtonDisabled","isToAddressInCurrentWallet","renderSticker","onInfoClick","onStartSwap","isDetailsDisabled","SwapResult","clearSwapError","setIsExpired","handleTimeout","_activity$cex","changellyImportantRed","textFieldWrapperFullWidth","submitSwap","submitSwapCex","addSwapToken","setSwapTokenIn","setSwapTokenOut","renderedSwapType","setRenderedSwapType","renderedTransactionAmountIn","setRenderedTransactionAmountIn","renderedTransactionAmountOut","setRenderedTransactionAmountOut","renderedTransactionTokenIn","setRenderedTransactionTokenIn","renderedTransactionTokenOut","setRenderedTransactionTokenOut","setRenderedActivity","handleTransactionInfoClick","handleModalCloseWithReset","SwapBlockchain","SwapWaitTokens","SwapPassword","renderSwapShortInfo","SwapComplete","handleTransactionRepeatClick","buttonsAfterNft","feeText","submitTransferConfirm","isBurning","isNotcoinBurning","burningDurationMin","submitBtnText","stars_symbol","AmountWithFeeTextField","renderAmountWithFee","buttonsInsideContentWithScroll","isInProgress","clearTransferError","setTransferScreen","renderedTransactionAmount","_nfts$","_nfts$2","TransferConfirm","TransferPassword","TransferComplete","TransferMultiNftProcess","CONFETTI_COLORS","lastRequestedAt","confettiRef","isRafStartedRef","defaultConfettiAmount","invokeGenerateConfetti","leftSide","randomX","velocity","randomColor","flicker","flickerFrequency","rotation","lastDrawnAt","frameCount","generateConfetti","updateCanvas","canvasWidth","canvasHeight","confettiToRemove","newPos","newVelocity","newFlicker","newRotation","newFrameCount","newLastDrawnAt","beginPath","ellipse","hideTimeout","prevConfettiTime","isDpppModalOpen","shouldShowCloseButton","showCloseButton","hideCloseButton","APP_STATES_WITH_BOTTOM_BAR","Settings","APP_UPDATE_INTERVAL","mainKey","APP_STATE_RENDER_COUNT","closeBackupWalletModal","closeHardwareWalletModal","cancelCaching","closeQrScanner","checkAppVersion","isInactive","markInactive","canPrerenderMain","prerenderMain","Inactive","withBottomBar","transitionName","slideFullClassName","LedgerModal","AppInactive","useAppIntersectionObserver","ElectronHeader","SettingsModal","AppLocked","MediaViewer","AuthImportWalletModal","BackupModal","TransferModal","SwapModal","MintCardModal","SignatureModal","TransactionModal","SwapActivityModal","DappConnectModal","DappSignDataModal","DappTransferModal","AddAccountModal","OnRampWidgetModal","UnhideNftModal","NftAttributesModal","QrScannerModal","Notifications","Dialogs","ConfettiContainer","IFrameBrowser","LoadingOverlay","BottomBar","newPlatform","getStatusBarHeight","fadeOutDuration","canGoBack","exitApp","initCapacitor","DEEPLINK","lockOrientation","SecondaryButton","setParams","isStateStable","_webApp","biometricType","initTelegramAppBiometric","viewportHeight","handleViewportResize","hasAttribute","isFocusable","initForVisualViewport","storageMethods","isLocalStorageDataExists","isApiStorageDataExists","fixIosAppStorage","restoreStorage","_await$App$getLaunchU","launchUrl","getLaunchUrl","processCapacitorLaunchDeeplink","forceLoadFonts","lastFocusAt","setupInterval","betterView"],"sourceRoot":""}