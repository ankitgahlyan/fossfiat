/*! For license information please see 941.9b59e9f6286e558142d5.js.LICENSE.txt */
(()=>{var t,e,n={398:(t,e,n)=>{"use strict";n.d(e,{CF:()=>c,UH:()=>a,nI:()=>i});var s=n(31481),r=n(48805);r.z.RM=0,r.z.NE=-1e5,r.z.PE=1e5;const o=(0,r.z)(10);function a(t,e){return BigInt((0,r.z)(t).mul(o.pow(e??s.Tu9.decimals)).round().toString())}function i(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return c(t,e??s.Tu9.decimals,n).toString()}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.Tu9.decimals,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.z)(t.toString()).div(o.pow(e)).round(e,n?r.z.roundHalfUp:void 0)}},809:(t,e,n)=>{"use strict";n.d(e,{bk:()=>i,fC:()=>d,m1:()=>l,nd:()=>u,tH:()=>a,wg:()=>c});var s=n(31481),r=n(398),o=n(59121);const a="bigint:";function i(t,e){return"string"==typeof e&&e.startsWith(a)?BigInt(e.slice(7)):e}function c(t){return-0n===t||t<0n?-t:t}function d(t,e){return t*s.X1K/(0,r.UH)(e)}function l(t,e){return t*(0,r.UH)(e)/s.X1K}function u(t){let e=BigInt(0);for(const n of(0,o.po)(t)){const t=BigInt(n);e=(e<<BigInt(8))+t}return e}},3476:(t,e,n)=>{"use strict";n.d(e,{$G:()=>P,Ad:()=>F,Bm:()=>R,CH:()=>f,CU:()=>O,EV:()=>_,F0:()=>l,FT:()=>E,Fx:()=>N,GV:()=>i,H3:()=>x,IP:()=>W,LV:()=>a,LY:()=>U,PY:()=>A,SQ:()=>D,UA:()=>M,W2:()=>r,Wb:()=>p,Zm:()=>I,b2:()=>H,br:()=>J,e2:()=>k,fI:()=>b,h$:()=>K,kF:()=>T,kJ:()=>j,kc:()=>L,li:()=>C,mv:()=>v,nm:()=>z,nx:()=>h,ov:()=>S,qP:()=>B,qd:()=>c,s1:()=>q,sl:()=>g,tF:()=>u,uS:()=>m,v4:()=>V,v8:()=>y,xA:()=>w,xB:()=>d});var s=n(61995);const r="m/44'/607'/0'",o=1000000000n,a=2000000000n,i=18000000n,c=32100000n,d=8000000n,l=3000000n,u=1n,f=20000000n,m=100000000n,h=5000000n,p=1n,w=112,g={stakeNominators:o,unstakeNominators:o,stakeLiquid:o,unstakeLiquid:o,stakeJettonsForward:s.xT.STAKE_JETTONS,stakeJettons:s.xT.STAKE_JETTONS+a,unstakeJettons:s.xT.UNSTAKE_JETTONS,claimJettons:s.xT.JETTON_TRANSFER+s.xT.SIMPLE_UPDATE_REQUEST,changeDns:15000000n,stakeEthena:a+100000000n,stakeEthenaForward:100000000n,unstakeEthena:a+100000000n,unstakeEthenaForward:100000000n,unstakeEthenaLocked:150000000n,unstakeEthenaLockedForward:70000000n},y="d",v="w",A=5,b=9,k=!0,E=1.05,S=["simpleR1","simpleR2","simpleR3","v2R1","v2R2","v3R1","v3R2","v4R2","W5"],D="te6cckEBAQEABgAACE0jhUPUcYAL";let C=function(t){return t[t.MasterChain=-1]="MasterChain",t[t.BaseChain=0]="BaseChain",t}({});const I=C.BaseChain,T=600,_=4,B=1,R=255,N=268;let P=function(t){return t[t.Comment=0]="Comment",t[t.Encrypted=560454219]="Encrypted",t[t.OurFee=1294173507]="OurFee",t[t.Bounced=4294967295]="Bounced",t}({}),U=function(t){return t[t.Transfer=260734629]="Transfer",t[t.TransferNotification=1935855772]="TransferNotification",t[t.InternalTransfer=395134233]="InternalTransfer",t[t.Excesses=3576854235]="Excesses",t[t.Burn=1499400124]="Burn",t[t.BurnNotification=2078119902]="BurnNotification",t}({}),x=function(t){return t[t.TransferOwnership=1607220500]="TransferOwnership",t[t.OwnershipAssigned=85167505]="OwnershipAssigned",t[t.Excesses=3576854235]="Excesses",t}({}),F=function(t){return t[t.RequestLoan=3863136613]="RequestLoan",t[t.LoanRepayment=3755778683]="LoanRepayment",t[t.Deposit=1205158801]="Deposit",t[t.Withdraw=832244956]="Withdraw",t[t.Withdrawal=175592284]="Withdrawal",t[t.DeployController=2994658477]="DeployController",t[t.Touch=1271382751]="Touch",t[t.Donate=1940913697]="Donate",t[t.DistributedAsset=3678112445]="DistributedAsset",t[t.Vote=1778069612]="Vote",t}({}),O=function(t){return t[t.UnstakeRequest=1234866786]="UnstakeRequest",t[t.ClaimRewards=2027548937]="ClaimRewards",t}({}),M=function(t){return t[t.AddWhitelist=1918412443]="AddWhitelist",t}({}),W=function(t){return t[t.Withdraw=4096]="Withdraw",t[t.ChangeValidator=4097]="ChangeValidator",t}({}),L=function(t){return t[t.ChangeRecord=1320284409]="ChangeRecord",t}({}),q=function(t){return t[t.Ok=2742684035]="Ok",t}({}),H=function(t){return t[t.TokenBridgePaySwap=8]="TokenBridgePaySwap",t}({}),K=function(t){return t.Wallet="wallet",t.Staking="staking",t}({}),j=function(t){return t.DnsNextResolver="dns_next_resolver",t.Wallet="wallet",t.Site="site",t.BagId="storage",t.Unknown="unknown",t}({});const J=[U.Excesses,q.Ok],z={dns_next_resolver:"19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff",wallet:"e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b",site:"fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe",storage:"49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7"},V={simpleR1:{name:"simpleR1",hash:"3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd",type:K.Wallet},simpleR2:{name:"simpleR2",hash:"672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df",type:K.Wallet},simpleR3:{name:"simpleR3",hash:"d95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52",type:K.Wallet},v2R1:{name:"v2R1",hash:"fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029",type:K.Wallet},v2R2:{name:"v2R2",hash:"b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983",type:K.Wallet},v3R1:{name:"v3R1",hash:"11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6",type:K.Wallet},v3R2:{name:"v3R2",hash:"df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14",type:K.Wallet},v4R1:{name:"v4R1",hash:"1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf",type:K.Wallet},v4R2:{name:"v4R2",hash:"5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1",type:K.Wallet},W5:{name:"W5",hash:"7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5",type:K.Wallet},highloadV2:{name:"highloadV2",hash:"fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e",type:K.Wallet},nominatorPool:{name:"nominatorPool",hash:"26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff",type:K.Staking},multisig:{name:"multisig",hash:"45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2",type:K.Wallet},multisigV2:{name:"multisigV2",hash:"eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97",type:K.Wallet},vesting:{name:"vesting",hash:"69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83",type:K.Wallet},multisigNew:{name:"multisigNew",hash:"7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f",type:K.Wallet},dedustPool:{name:"dedustPool",hash:"f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62",isSwapAllowed:!0},dedustVaultNative:{name:"dedustVaultNative",hash:"64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb",isSwapAllowed:!0},dedustVaultJetton:{name:"dedustVaultJetton",hash:"5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307",isSwapAllowed:!0},stonPtonWallet:{name:"stonPtonWallet",hash:"6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880",isSwapAllowed:!0},stonRouter:{name:"stonRouter",hash:"14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da",isSwapAllowed:!0},stonRouterV2_1:{name:"stonRouterV2_1",hash:"d61cb7fb7bee0cc414286a482fccdec53c3f8717e4aae4fc362d98ab6254e6cd",isSwapAllowed:!0},stonPoolV2_1:{name:"stonPoolV2_1",hash:"16cc513c380e329f45d54f294787e2030e289799eca138961c1cd7e26e882c7c",isSwapAllowed:!0},stonRouterV2_2:{name:"stonRouterV2_2",hash:"094b5084111addda1b6fac7007c8a8f85ff4ccc63475815ab3dfa3b5b4c6b102",isSwapAllowed:!0},stonRouterV2_2_alt:{name:"stonRouterV2_2_alt",hash:"d41e7563afa05ee008655e190920d3f53de9cab4c2d4e10ee1d0f158e95e52e5",isSwapAllowed:!0},stonPoolV2_2:{name:"stonPoolV2_2",hash:"11eaf6db706e63adf9327897aaa845c77a631856abfc14375837f19b617cacb4",isSwapAllowed:!0},stonPtonWalletV2:{name:"stonPtonWalletV2",hash:"2761042202032258de9eb1b672e1ec2e4f13b2af00700195801ada33f7ced1b6",isSwapAllowed:!0},toncoRouter:{name:"toncoRouter",hash:"9b9891eaa7db7becc6ccdda1bd9a8d25dc3df2817d57e4b27ec003daf81a4439",isSwapAllowed:!0}}},5370:(t,e,n)=>{"use strict";n.d(e,{p:()=>m,q:()=>f});var s=n(31481),r=n(23174);let o=0;const a=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];const a=window,i=a.airBridge;return new Promise(((e,s)=>{o++;const c=o;var d;i.nativeCallCallbacks[c]=t=>{delete i.nativeCallCallbacks[c],t.ok?e(t.result):s(new Error(r.QD.Unexpected))},a.webkit?null===(d=a.webkit)||void 0===d||d.messageHandlers.nativeCall.postMessage({requestNumber:c,methodName:t,arg0:n[0],arg1:n[1]}):a.androidApp.nativeCall(c,t,n[0],n[1])}))};var i=n(24082),c=n(14235),d=n(55029);class l{requestStates=new Map;requestStatesByCallback=new Map;constructor(t,e,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"*";this.target=t,this.onUpdate=e,this.channel=n,this.shouldUseJson=s,this.targetOrigin=r}destroy(){}init(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.postMessage({type:"init",args:e})}request(t){const{requestStates:e,requestStatesByCallback:n}=this,s=(0,c.A)(),r={type:"callMethod",messageId:s,...t},o={messageId:s},a=new Promise(((t,e)=>{Object.assign(o,{resolve:t,reject:e})}));if("function"==typeof r.args[r.args.length-1]){r.withCallback=!0;const t=r.args.pop();o.callback=t,n.set(t,o)}return e.set(s,o),a.catch((()=>{})).finally((()=>{e.delete(s),o.callback&&n.delete(o.callback)})),this.postMessage(r),a}cancelCallback(t){t.isCanceled=!0;const{messageId:e}=this.requestStatesByCallback.get(t)||{};e&&this.postMessage({type:"cancelProgress",messageId:e})}onMessage(t){try{t=(0,i.d$)(t)}catch(t){return void(0,d.SJ)("PostMessageConnector: Failed to parse message",t)}const{requestStates:e,channel:n}=this;if(t.channel===n)if("update"===t.type&&this.onUpdate&&this.onUpdate(t.update),"methodResponse"===t.type){const n=e.get(t.messageId);n&&(t.error?n.reject(t.error):n.resolve(t.response))}else if("methodCallback"===t.type){var s;const n=e.get(t.messageId);null==n||null===(s=n.callback)||void 0===s||s.call(n,...t.callbackArgs)}else if("unhandledError"===t.type){var r,o;const e=new Error(null===(r=t.error)||void 0===r?void 0:r.message);throw null!==(o=t.error)&&void 0!==o&&o.stack&&(e.stack=t.error.stack),e}}postMessage(t){t.channel=this.channel;let e=t;this.shouldUseJson&&(e=(0,i.HE)(t)),"open"in this.target?this.target.postMessage(e,this.targetOrigin):this.target.postMessage(e)}}let u;function f(){u||(u=function(t,e,n){const s=new l(t,void 0,n,void 0,void 0);function r(t){let{data:e}=t;s.onMessage(e)}return t.addEventListener("message",r),s.destroy=()=>{t.removeEventListener("message",r)},s}(self,0,s.Pcx),u.init())}function m(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(s.gmk)return a(t,...n);if(!u)throw new Error("API is not initialized");return u.request({name:t,args:n})}},9705:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});class s{constructor(){this.promise=new Promise(((t,e)=>{this.reject=e,this.resolve=t}))}static resolved(t){const e=new s;return e.resolve(t),e}}},10309:(t,e,n)=>{"use strict";n.d(e,{UX:()=>o,Z2:()=>r});var s=n(19314);const r=1e3,o=365*(60*r*60*24);(0,s.A)((function(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"short",r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return new Date(e).toLocaleString(t,{year:n?void 0:"numeric",month:s||void 0,day:r?void 0:"numeric",hour:o?"numeric":void 0,minute:o?"numeric":void 0,hourCycle:"h23"})}))},10428:(t,e,n)=>{"use strict";n.d(e,{D:()=>s});let s=function(t){return t[t.Default=0]="Default",t[t.Instant=1]="Instant",t[t.BestRate=2]="BestRate",t}({})},14235:(t,e,n)=>{"use strict";function s(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}n.d(e,{A:()=>s})},15340:()=>{},19314:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const s=new WeakMap;function r(t){return function(){let e=s.get(t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const a=r.map(String).join("_");if(e){const t=e.get(a);if(t)return t}else e=new Map,s.set(t,e);const i=t(...r);return e.set(a,i),i}}},21519:(t,e,n)=>{"use strict";var s={};n.r(s),n.d(s,{Workchain:()=>Jt.li,buildWallet:()=>Ds,checkApiAvailability:()=>Aa,checkDnsChangeWalletDraft:()=>Oo,checkDnsRenewalDraft:()=>xo,checkMultiTransactionDraft:()=>uo,checkNftOwnership:()=>Co,checkNftTransferDraft:()=>To,checkStakeDraft:()=>ia,checkTransactionDraft:()=>ro,checkUnstakeDraft:()=>ca,decryptComment:()=>vo,fetchActivityDetails:()=>Mr,fetchActivitySlice:()=>Or,fetchEstimateDiesel:()=>Ao,fetchPrivateKey:()=>Ls,fetchToken:()=>$r,generateMnemonic:()=>Os,getAccountBalance:()=>Ts,getAccountNfts:()=>Do,getBackendStakingState:()=>pa,getContractInfo:()=>Is,getNftUpdates:()=>Io,getOtherVersionWallet:()=>$s,getStakingStates:()=>fa,getTonWallet:()=>Fs,getToncoinAmountForTransfer:()=>Qr,getWalletBalance:()=>_s,getWalletFromAddress:()=>Gs,getWalletFromBip39Mnemonic:()=>Ks,getWalletFromMnemonic:()=>js,getWalletFromPrivateKey:()=>Js,getWalletInfo:()=>Cs,getWalletSeqno:()=>Bs,getWalletStateInit:()=>Us,getWalletVersionInfos:()=>Ns,getWalletVersions:()=>Ps,insertMintlessPayload:()=>Kr,isActiveSmartContract:()=>Es,isAddressInitialized:()=>ks,normalizeAddress:()=>vs,oneCellFromBoc:()=>D.RS,packPayloadToBoc:()=>va,parsePayloadBase64:()=>He,pickBestWallet:()=>Rs,pickWalletByAddress:()=>xs,publicKeyToAddress:()=>Ss,rawSign:()=>Hs,resolveTokenAddress:()=>D.uA,resolveTokenWalletAddress:()=>D.jq,sendSignedTransactions:()=>yo,setupActivePolling:()=>Qa,setupInactivePolling:()=>Xa,signTransfers:()=>mo,submitDnsChangeWallet:()=>Mo,submitDnsRenewal:()=>Fo,submitMultiTransfer:()=>fo,submitNftTransfers:()=>_o,submitStake:()=>da,submitTokenStakingClaim:()=>wa,submitTransfer:()=>ao,submitTransferWithDiesel:()=>io,submitUnstake:()=>la,submitUnstakeEthenaLocked:()=>ga,validateDexSwapTransfers:()=>Ea,validateMnemonic:()=>Ms});var r={};n.r(r),n.d(r,{checkApiAvailability:()=>Si,checkTransactionDraft:()=>bi,getAllTransactionSlice:()=>ci,getTokenTransactionSlice:()=>ii,getWalletBalance:()=>li,getWalletFromBip39Mnemonic:()=>Ei,isTronAccountMultisig:()=>fi,setupActivePolling:()=>hi,setupInactivePolling:()=>wi,submitTransfer:()=>ki});var o={};n.r(o),n.d(o,{connect:()=>Pc,disconnect:()=>xc,fetchDappMetadata:()=>qc,initTonConnect:()=>Nc,reconnect:()=>Uc,sendTransaction:()=>Fc,signData:()=>Mc});var a={};n.r(a),n.d(a,{activateAccount:()=>il,addressFromPublicKey:()=>yl,buildTokenSlug:()=>ke,cancelDappRequest:()=>Wl,changePassword:()=>Dl,checkApiAvailability:()=>vd,checkDnsChangeWalletDraft:()=>ru,checkDnsRenewalDraft:()=>nu,checkNftOwnership:()=>tu,checkNftTransferDraft:()=>Zl,checkStakeDraft:()=>ld,checkTransactionDraft:()=>dc,checkUnstakeDraft:()=>ud,checkWorkerStorageIntegrity:()=>Pl,confirmDappRequest:()=>xl,confirmDappRequestConnect:()=>Fl,confirmDappRequestSendTransaction:()=>Ol,confirmDappRequestSignData:()=>Ml,createAccountWithSecondNetwork:()=>gl,createLocalActivitiesFromEmulation:()=>pc,createLocalTransactions:()=>fc,createWallet:()=>hl,deactivateAllAccounts:()=>cl,decryptComment:()=>uc,deleteAllDapps:()=>Ji,deleteDapp:()=>ji,destroy:()=>rl,fetchAccountConfigForDebugPurposesOnly:()=>bd,fetchAddress:()=>ql,fetchEstimateDiesel:()=>mc,fetchLedgerAccount:()=>ll,fetchMnemonic:()=>Rl,fetchNftsFromCollection:()=>Yl,fetchPastActivities:()=>cc,fetchPriceHistory:()=>du,fetchPrivateKey:()=>Bl,fetchSwaps:()=>Rd,fetchToken:()=>tc,fetchTonActivityDetails:()=>hc,fetchTonWallet:()=>dl,generateMnemonic:()=>ml,getAddressInfo:()=>zl,getAmountForTokenTransfer:()=>sc,getBackendAuthToken:()=>Ad,getBaseCurrency:()=>sd,getContractInfo:()=>jl,getDapps:()=>zi,getDappsByUrl:()=>Vi,getLogs:()=>i.ao,getMnemonicWordList:()=>Nl,getMoonpayOnrampUrl:()=>Sd,getStakingHistory:()=>hd,getTokenBySlug:()=>ve,getWalletBalance:()=>Kl,getWalletInfo:()=>Jl,getWalletSeqno:()=>Ll,getWalletStateInit:()=>Vl,importLedgerWallet:()=>vl,importMnemonic:()=>wl,importNewWalletVersion:()=>Il,importViewAccount:()=>Cl,initAccounts:()=>al,initDapps:()=>qi,initNfts:()=>Ql,initPolling:()=>Qd,initStaking:()=>dd,initSwap:()=>Id,initTransactions:()=>ic,isWalletInitialized:()=>Hl,loadExploreSites:()=>Zi,ping:()=>kd,removeAccount:()=>Sl,removeNetworkAccounts:()=>kl,resetAccounts:()=>El,resolveDataPreloadPromise:()=>ad,resolveTokenAddress:()=>nc,resolveTokenWalletAddress:()=>ec,setBaseCurrency:()=>rd,setIsAppFocused:()=>jn,signData:()=>cu,signTonProof:()=>au,signTransfers:()=>iu,startSseConnection:()=>td,submitDnsChangeWallet:()=>ou,submitDnsRenewal:()=>su,submitNftTransfers:()=>Xl,submitStake:()=>fd,submitStakingClaimOrUnlock:()=>wd,submitTransfer:()=>lc,submitUnstake:()=>md,subscribeNotifications:()=>lu,swapBuild:()=>Pd,swapBuildTransfer:()=>Td,swapCexCreateTransaction:()=>Md,swapCexEstimate:()=>Fd,swapCexSubmit:()=>Wd,swapCexValidateAddress:()=>Od,swapEstimate:()=>Nd,swapGetAssets:()=>Ud,swapGetPairs:()=>xd,swapSubmit:()=>_d,tryUpdateStakingCommonData:()=>pd,tryUpdateSwapTokens:()=>Zd,tryUpdateTokens:()=>Yd,unsubscribeNotifications:()=>uu,updateAccountMemoryCache:()=>Ed,validateMnemonic:()=>pl,verifyPassword:()=>Ul,waitDataPreload:()=>id}),n(24082);var i=n(55029);const c=new Map;var d=n(809);BigInt.prototype.toJSON=function(){return`${d.tH}${this.toString()}`};var l=n(5370),u=n(98629),f=n(90749),m=n(88947),h=n.n(m),p=n(23174),w=n(31481),g=n(83507),y=n.n(g),v=n(48287).Buffer;const A=/^m(\/[0-9]+')+$/;function b(t){return t.replace("'","")}const k=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2147483648;if(!(t=>!!A.test(t)&&!t.split("/").slice(1).map(b).some(isNaN))(t))throw new Error("Invalid derivation path");const{key:s,chainCode:r}=(t=>{const e=y()("sha512","ed25519 seed").update(v.from(t,"hex")).digest();return{key:e.slice(0,32),chainCode:e.slice(32)}})(e);return t.split("/").slice(1).map(b).map((t=>parseInt(t,10))).reduce(((t,e)=>((t,e)=>{let{key:n,chainCode:s}=t;const r=v.allocUnsafe(4);r.writeUInt32BE(e,0);const o=v.concat([v.alloc(1,0),n,r]),a=y()("sha512",s).update(o).digest();return{key:a.slice(0,32),chainCode:a.slice(32)}})(t,e+n)),{key:s,chainCode:r})};function E(t){return 1===t.length&&t[0].length===w.PcM}var S=n(87894),D=n(88823),C=n(19314);function I(t){const e=t.split("-"),[n,s="mainnet"]=3===e.length?[e[0],e[2]]:e;return{id:Number(n),network:s}}(0,C.A)((function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(t)return t.length<=e+n+3?t:`${t.slice(0,e)}···${t.slice(-n)}`}));let T=function(t){return t[t.IndexedDb=0]="IndexedDb",t[t.LocalStorage=1]="LocalStorage",t[t.ExtensionLocal=2]="ExtensionLocal",t[t.CapacitorStorage=3]="CapacitorStorage",t}({});var _=n(68249);let B={};const R={async getItem(t,e){if((0,_.u)().isAndroidApp&&t in B&&!e)return B[t];const n=await(0,l.p)("capacitorStorageGetItem",t),s=n?JSON.parse(n,d.bk):void 0;return(0,_.u)().isAndroidApp&&(void 0===s?delete B[t]:B[t]=s),s},async setItem(t,e){await(0,l.p)("capacitorStorageSetItem",t,JSON.stringify(e)),(0,_.u)().isAndroidApp&&(B[t]=e)},async removeItem(t){await(0,l.p)("capacitorStorageRemoveItem",t),(0,_.u)().isAndroidApp&&delete B[t]},async clear(){await(0,l.p)("capacitorStorageClear"),(0,_.u)().isAndroidApp&&(B={})},async getKeys(){const t=await(0,l.p)("capacitorStorageKeys");return null==t?void 0:t.value}},N=w.hL1?self.chrome.storage.local:void 0,P=N&&{getItem:async t=>{var e;return null===(e=await N.get(t))||void 0===e?void 0:e[t]},setItem:(t,e)=>N.set({[t]:e}),removeItem:N.remove.bind(N),clear:N.clear.bind(N),getAll:N.get.bind(N),setMany:N.set.bind(N),getMany:N.get.bind(N)}||{};var U=n(77783);const x=U.y$(w.vPi,w.rQT),F={getItem:t=>U.Jt(t,x),setItem:(t,e)=>U.hZ(t,e,x),removeItem:t=>U.yH(t,x),clear:()=>U.IU(x),getAll:async()=>{const t=await U.HP(x),e=await U.qy(t,x);return(0,S.rs)(t,e)},getMany:async t=>{const e=await U.qy(t,x);return(0,S.rs)(t,e)},setMany:t=>U._y(Object.entries(t),x)};function O(t){return function(){return Promise.resolve(t(...arguments))}}const M="object"==typeof localStorage?{getItem:O(localStorage.getItem),setItem:O(localStorage.setItem),removeItem:O(localStorage.removeItem),clear:O(localStorage.clear),getAll:O((()=>({...localStorage}))),getMany:O((t=>(0,S.Up)(localStorage,t))),setMany:O((t=>{Object.assign(localStorage,t)}))}:{getItem:t=>(0,l.p)("localStorageGetItem",t),setItem:(t,e)=>(0,l.p)("localStorageSetItem",t,e),removeItem:t=>(0,l.p)("localStorageRemoveItem",t),clear:()=>(0,l.p)("localStorageClear"),getAll:()=>(0,l.p)("localStorageGetAll"),getMany:t=>(0,l.p)("localStorageGetMany",t),setMany:t=>(0,l.p)("localStorageSetMany",t)},W=w.hL1?P:w.UMQ?R:F,L=(T.IndexedDb,T.LocalStorage,T.ExtensionLocal,T.CapacitorStorage,0);let q;const H=new Promise((t=>{q=t}));async function K(t,e){return(await V(t))[e].address}async function j(t){return(await $(t)).ton}async function J(t){return(await async function(t){const e=await V(t);if(e.tron)return e;throw new Error("TRON wallet missing")}(t)).tron}function z(t){return Y(t,"accounts")}async function V(t){const e=await z(t);if(e)return e;throw new Error(`Account ${t} doesn't exist`)}async function $(t){const e=await V(t);if(e.ton)return e;throw new Error("TON wallet missing")}function G(){return W.getItem("accounts")}async function Q(t,e){return X(t,"accounts",{...await V(t),...e})}async function Y(t,e){var n;return null===(n=await W.getItem(e))||void 0===n?void 0:n[t]}async function Z(t,e){const n=await W.getItem(e);if(!n)return;const{[t]:s,...r}=n;await W.setItem(e,r)}async function X(t,e,n){const s=await W.getItem(e);await W.setItem(e,{...s,[t]:n})}async function tt(t,e){const n=await W.getItem(e);if(n){for(const e of Object.keys(n))I(e).network===t&&delete n[e];await W.setItem(e,n)}}async function et(){const t=await nt();if(t)return I(t).network}function nt(){return W.getItem("currentAccountId")}function st(t){const e={};return"ton"in t&&t.ton&&(e.ton=t.ton.address),"tron"in t&&t.tron&&(e.tron=t.tron.address),e}const rt=[{name:"PBKDF2"},!1,["deriveBits","deriveKey"]],ot={name:"PBKDF2",iterations:1e5,hash:"SHA-256"},at={name:"AES-GCM",length:256};function it(t){return f.JB(t.join(" "))}async function ct(t,e){const n=t.join(","),s=crypto.getRandomValues(new Uint8Array(16)),r=await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),...rt),o=await crypto.subtle.deriveKey({salt:s,...ot},r,at,!1,["encrypt"]),a=crypto.getRandomValues(new Uint8Array(12)),i=(new TextEncoder).encode(n),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,i),d=Array.from(new Uint8Array(c)),l=btoa(String.fromCharCode(...d)),u=Array.from(a).map((t=>`00${t.toString(16)}`.slice(-2))).join("");return`${Array.from(s).map((t=>`00${t.toString(16)}`.slice(-2))).join("")}:${u}:${l}`}async function dt(t,e){if(!t.includes(":"))return async function(t,e){const n=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",n),r=t.slice(0,24).match(/.{2}/g).map((t=>parseInt(t,16))),o={name:"AES-GCM",iv:new Uint8Array(r)},a=await crypto.subtle.importKey("raw",s,o,!1,["decrypt"]),i=atob(t.slice(24)),c=new Uint8Array(i.match(/[\s\S]/g).map((t=>t.charCodeAt(0)))),d=await crypto.subtle.decrypt(o,a,c);return(new TextDecoder).decode(d).split(",")}(t,e);const[n,s,r]=t.split(":"),o=new Uint8Array(n.match(/.{2}/g).map((t=>parseInt(t,16)))),a=new Uint8Array(s.match(/.{2}/g).map((t=>parseInt(t,16)))),i=await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),...rt),c=await crypto.subtle.deriveKey({salt:o,...ot},i,at,!1,["decrypt"]),d=atob(r),l=new Uint8Array(d.match(/[\s\S]/g).map((t=>t.charCodeAt(0)))),u=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},c,l);return(new TextDecoder).decode(u).split(",")}async function lt(t,e,n){const s=[e];try{const{mnemonicEncrypted:r}=n;s.push(r);const o=await dt(r,e);return s.push(...o),r.includes(":")||await async function(t,e,n){const s=[n,...e];try{const r=await ct(e,n);s.push(r);const o=await dt(r,n).catch((()=>{}));if(!n||!o)return{error:p.QD.DebugError};await Q(t,{mnemonicEncrypted:r})}catch(t){(0,i.SJ)("tryMigratingMnemonicEncryption",ut(t,s))}}(t,o,e),o}catch(t){return void(0,i.SJ)("getMnemonic",ut(t,s))}}function ut(t,e){const n=t=>{for(const n of e)n&&(t=t.replaceAll(n,"(hidden)"));return t};if("string"==typeof t)return n(t);if(t instanceof Error){var s;const e=n(t.message);return{name:t.name,message:e,stack:null===(s=t.stack)||void 0===s?void 0:s.replaceAll(t.message,e)}}return t}var ft=n(60341),mt=n(1307),ht=n(67491),pt=n(24887);const wt=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,gt=/[\0-\x08\x0E-\x1F\x7F-\x84\x86-\x9F\u0300-\u034E\u0350-\u035B\u0363-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u200C\u200E\u200F\u202A-\u202E\u2066-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3035\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFFF9-\uFFFB]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDCA-\uDDCC\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E\uDCA0-\uDCA3]|\uD834[\uDD65-\uDD69\uDD6D-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDC01\uDC20-\uDC7F\uDD00-\uDDEF]/g,yt=/[\n\r]/g,vt=/[\u0702\u0701\u2024\u00B7\u02D9\u0971\u1427\u18DF\u22C5\u2027]/g,At=/[\u200B-\u200D\uFEFF\u2063]/g,bt=/^(?:[~`!@#%^&*(){}[\];:"'<,.>?/\\|_+=-]|[a-zA-Z0-9\s])+$/,kt=new Map([[" "," "],["0","⓿"],["1","11⓵➊⑴¹𝟏𝟙１𝟷𝟣⒈𝟭1➀₁①❶⥠"],["2","⓶⒉⑵➋ƻ²ᒿ𝟚２𝟮𝟤ᒾ𝟸Ƨ𝟐②ᴤ₂➁❷ᘝƨ"],["3","³ȝჳⳌꞫ𝟑ℨ𝟛𝟯𝟥Ꝫ➌ЗȜ⓷ӠƷ３𝟹⑶⒊ʒʓǯǮƺ𝕴ᶾзᦡ➂③₃ᶚᴣᴟ❸ҘҙӬӡӭӟӞ"],["4","𝟰𝟺𝟦𝟒➍ҶᏎ𝟜ҷ⓸ҸҹӴӵᶣ４чㄩ⁴➃₄④❹Ӌ⑷⒋"],["5","𝟱⓹➎Ƽ𝟓𝟻𝟝𝟧５➄₅⑤⁵❺ƽ⑸⒌"],["6","Ⳓ🄇𝟼Ꮾ𝟲𝟞𝟨𝟔➏⓺Ϭϭ⁶б６ᧈ⑥➅₆❻⑹⒍"],["7","𝟕𝟟𝟩𝟳𝟽🄈⓻𐓒➐７⁷⑦₇❼➆⑺⒎"],["8","𐌚🄉➑⓼８𝟠𝟪৪⁸₈𝟴➇⑧❽𝟾𝟖⑻⒏"],["9","൭Ꝯ𝝑𝞋𝟅🄊𝟡𝟵Ⳋ⓽➒੧৭୨９𝟫𝟿𝟗⁹₉Գ➈⑨❾⑼⒐"],["10","⓾❿➉➓🔟⑩⑽⒑"],["11","⑪⑾⒒⓫"],["12","⑫⑿⒓⓬"],["13","⑬⒀⒔⓭"],["14","⑭⒁⒕⓮"],["15","⑮⒂⒖⓯"],["16","⑯⒃⒗⓰"],["17","⑰⒄⒘⓱"],["18","⑱⒅⒙⓲"],["19","⑲⒆⒚⓳"],["20","⑳⒇⒛⓴"],["ae","æ"],["OE","Œ"],["oe","œ"],["pi","ᒆ"],["Nj","ǋ"],["AE","ᴁ"],["A","𝑨𝔄ᗄ𝖠𝗔ꓯ𝞐🄐🄰Ꭿ𐊠𝕬𝜜𝐴ꓮᎪ𝚨ꭺ𝝖🅐Å∀🇦₳🅰𝒜𝘈𝐀𝔸дǺᗅⒶＡΑᾋᗩĂÃÅǍȀȂĀȺĄʌΛλƛᴀᴬДАልÄₐᕱªǞӒΆẠẢẦẨẬẮẰẲẴẶᾸᾹᾺΆᾼᾈᾉᾊᾌᾍᾎᾏἈἉἊἋἌἍἎἏḀȦǠӐÀÁÂẤẪ𝛢𝓐𝙰𝘼ᗩ"],["a","∂⍺ⓐձǟᵃᶏ⒜аɒａαȃȁคǎმäɑāɐąᾄẚạảǡầẵḁȧӑӓãåάὰάăẩằẳặᾀᾁᾂᾃᾅᾆᾰᾱᾲᾳᾴᶐᾶᾷἀἁἂἃἄἅἆἇᾇậắàáâấẫǻⱥ𝐚𝑎𝒂𝒶𝓪𝔞𝕒𝖆𝖺𝗮𝘢𝙖𝚊𝛂𝛼𝜶𝝰𝞪⍶"],["B","🄑𝔙𝖁ꞵ𝛃𝛽𝜷𝝱𝞫Ᏸ𐌁𝑩𝕭🄱𐊡𝖡𝘽ꓐ𝗕𝘉𝜝𐊂𝚩𝐁𝛣𝝗𝐵𝙱𝔹Ᏼᏼ𝞑Ꞵ𝔅🅑฿𝓑ᗿᗾᗽ🅱ⒷＢвϐᗷƁ乃ßცჩ๖βɮБՅ๒ᙖʙᴮᵇጌḄℬΒВẞḂḆɃദᗹᗸᵝᙞᙟᙝᛒᙗᙘᴃ🇧"],["b","ꮟᏏ𝐛𝘣𝒷𝔟𝓫𝖇𝖻𝑏𝙗𝕓𝒃𝗯𝚋♭ᑳᒈｂᖚᕹᕺⓑḃḅҍъḇƃɓƅᖯƄЬᑲþƂ⒝ЪᶀᑿᒀᒂᒁᑾьƀҌѢѣᔎ"],["C","ꞆႠ℃🄒ᏟⲤ🄲ꓚ𐊢𐌂🅲𐐕🅒☾ČÇⒸＣↃƇᑕㄈ¢८↻ĈϾՇȻᙅᶜ⒞ĆҀĊ©टƆℂℭϹС匚ḈҪʗᑖᑡᑢᑣᑤᑥⅭ𝐂𝐶𝑪𝒞𝓒𝕮𝖢𝗖𝘊𝘾ᔍ"],["c","🝌ｃⅽ𝐜𝑐𝒄𝒸𝓬𝔠𝕔𝖈𝖼𝗰𝘤𝙘𝚌ᴄϲⲥсꮯ𐐽ⲥ𐐽ꮯĉｃⓒćčċçҁƈḉȼↄсርᴄϲҫ꒝ςɽϛ𝙲ᑦ᧚𝐜𝑐𝒄𝒸𝓬𝔠𝕔𝖈𝖼𝗰𝘤𝙘𝚌₵🇨ᥴᒼⅽ"],["D","🄓Ꭰ🄳𝔡𝖉𝔻𝗗𝘋𝙳𝐷𝓓𝐃𝑫𝕯𝖣𝔇𝘿ꭰⅅ𝒟ꓓ🅳🅓ⒹＤƉᗪƊÐԺᴅᴰↁḊĐÞⅮᗞᑯĎḌḐḒḎᗫᗬᗟᗠᶛᴆ🇩"],["d","Ꮷ𝔡𝖉ᑯꓒ𝓭ᵭ₫ԃⓓｄḋďḍḑḓḏđƌɖɗᵈ⒟ԁⅾᶁԀᑺᑻᑼᑽᒄᑰᑱᶑ𝕕𝖽𝑑𝘥𝒅𝙙𝐝𝗱𝚍ⅆ𝒹ʠժ"],["E","£ᙓ⋿∃ⴺꓱ𝐄𝐸𝔈𝕰𝖤𝘌𝙴𝛦𝜠ꭼ🄔🄴𝙀𝔼𐊆𝚬ꓰ𝝚𝞔𝓔𝑬𝗘🅴🅔ⒺΈＥƎἝᕮƐモЄᴇᴱᵉÉ乇ЁɆꂅ€ÈℰΕЕⴹᎬĒĔĖĘĚÊËԐỀẾỄỂẼḔḖẺȄȆẸỆȨḜḘḚἘἙἚἛἜῈΈӖὲέЀϵ🇪"],["e","əәⅇꬲꞓ⋴𝛆𝛜𝜀𝜖𝜺𝝐𝝴𝞊𝞮𝟄ⲉꮛ𐐩ꞒⲈ⍷𝑒𝓮𝕖𝖊𝘦𝗲𝚎𝙚𝒆𝔢𝖾𝐞Ҿҿⓔｅ⒠èᧉéᶒêɘἔềếễ૯ǝєεēҽɛểẽḕḗĕėëẻěȅȇẹệȩɇₑęḝḙḛ℮еԑѐӗᥱёἐἑἒἓἕℯ"],["F","ᖵꘘꓞꟻᖷ𝐅𝐹𝑭𝔽𝕱𝖥𝗙𝙁𝙵𝟊℉🄕🄵𐊇𝔉𝘍𐊥ꓝꞘ🅵🅕𝓕ⒻＦғҒᖴƑԲϝቻḞℱϜ₣🇫Ⅎ"],["f","𝐟ᵮ𝑓𝒇𝒻𝓯𝔣𝕗𝖿𝗳𝙛𝚏ꬵꞙẝ𝖋ⓕｆƒḟʃբᶠ⒡ſꊰʄ∱ᶂ𝘧"],["G","𝗚𝘎🄖ꓖᏳ🄶Ꮐᏻ𝔾𝓖𝑮𝕲ꮐ𝒢𝙂𝖦𝙶𝔊𝐺𝐆🅶🅖ⒼＧɢƓʛĢᘜᴳǴĠԌĜḠĞǦǤԍ₲🇬⅁"],["g","ᶃᶢⓖｇǵĝḡğġǧģց૭ǥɠﻭﻮᵍ⒢ℊɡᧁ𝐠𝑔𝒈𝓰𝔤𝕘𝖌𝗀𝗴𝘨𝙜𝚐"],["H","Ἤ🄗𝆦🄷𝜢ꓧ𝘏𝐻𝝜𝖧𐋏𝗛ꮋℍᎻℌⲎ𝑯𝞖🅷🅗ዞǶԋⒽＨĤᚺḢḦȞḤḨḪĦⱧҢңҤῊΉῌἨἩἪἫἭἮἯᾘᾙᾚᾛᾜᾝᾞᾟӉӈҥΉн卄♓𝓗ℋН𝐇𝙃𝙷ʜ𝛨Η𝚮ᕼӇᴴᵸ🇭"],["h","ꞕ৸𝕳ꚕᏲℏӊԊꜧᏂҺ⒣ђⓗｈĥḣḧȟḥḩḫẖħⱨհһከኩኪካɦℎ𝐡𝒉𝒽𝓱𝔥𝕙𝖍𝗁𝗵𝘩𝙝𝚑իʰᑋᗁɧんɥ"],["I","ⲒἿ🄘🄸ЇꀤᏆ🅸🅘إﺇٳأﺃٲٵⒾＩ៸ÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗェエῘῙῚΊἸἹἺἻἼἽἾⅠΪΊɪᶦᑊᥣ𝛪𝐈𝙄𝙸𝓵𝙡𝐼ᴵ𝚰𝑰🇮"],["i","⍳ℹⅈ𝑖𝒊𝒾ı𝚤ɩιιͺ𝛊𝜄𝜾𝞲ꙇӏꭵᎥⓘｉìíîĩīĭïḯỉǐȉȋịḭῐῑῒΐῖῗἰἱἲⅰⅼ∣ⵏ￨׀ا١۱ߊᛁἳἴἵɨіὶίᶖ𝔦𝚒𝝸𝗂𝐢𝕚𝖎𝗶𝘪𝙞ίⁱᵢ𝓲⒤"],["J","𝐉𝐽𝑱𝒥𝓙𝔍𝕁𝕵𝖩𝗝𝘑𝙅𝙹ꞲͿꓙ🄙🄹🅹🅙ⒿＪЈʝᒍנﾌĴʆวلյʖᴊᴶﻝጋɈⱼՂๅႱįᎫȷ丿ℐℑᒘᒙᒚᒛᒴᒵᒎᒏ🇯"],["j","𝚥ꭻⅉⓙｊϳʲ⒥ɉĵǰјڶᶨ𝒿𝘫𝗷𝑗𝙟𝔧𝒋𝗃𝓳𝕛𝚓𝖏𝐣"],["K","𝐊ꝄꝀ𝐾𝑲𝓚𝕶𝖪𝙺𝚱𝝟🄚𝗞🄺𝜥𝘒ꓗ𝙆𝕂Ⲕ𝔎𝛫Ꮶ𝞙𝒦🅺🅚₭ⓀＫĸḰќƘкҠκқҟӄʞҚКҡᴋᴷᵏ⒦ᛕЌጕḲΚKҜҝҞĶḴǨⱩϗӃ🇰"],["k","ⓚꝁｋḱǩḳķḵƙⱪᶄ𝐤𝘬𝗄𝕜𝜅𝜘𝜿𝝒𝝹𝞌𝞳𝙠𝚔𝑘𝒌ϰ𝛋𝛞𝟆𝗸𝓴𝓀"],["L","𝐋𝐿𝔏𝕃𝕷𝖫𝗟𝘓𝙇ﴼ🄛🄻𐐛Ⳑ𝑳𝙻𐑃𝓛ⳑꮮᏞꓡ🅻🅛ﺈ└ⓁւＬĿᒪ乚ՆʟꓶιԼᴸˡĹረḶₗΓլĻᄂⅬℒⱢᥧᥨᒻᒶᒷᶫﺎᒺᒹᒸᒫ⎳ㄥŁⱠﺄȽ🇱"],["l","ⓛｌŀĺľḷḹļӀℓḽḻłﾚɭƚɫⱡ|Ɩ⒧ʅǀוןΙІ｜ᶩӏ𝓘𝕀𝖨𝗜𝘐𝐥𝑙𝒍𝓁𝔩𝕝𝖑𝗅𝗹𝘭𝚕𝜤𝝞ı𝚤ɩι𝛊𝜄𝜾𝞲"],["M","ꮇ🄜🄼𐌑𐊰ꓟⲘᎷ🅼🅜ⓂＭмṂ൱ᗰ州ᘻო๓♏ʍᙏᴍᴹᵐ⒨ḾМṀ௱ⅯℳΜϺᛖӍӎ𝐌𝑀𝑴𝓜𝔐𝕄𝕸𝖬𝗠𝘔𝙈𝙼𝚳𝛭𝜧𝝡𝞛🇲"],["m","₥ᵯ𝖒𝐦𝗆𝔪𝕞𝓂ⓜｍനᙢ൩ḿṁⅿϻṃጠɱ៳ᶆ𝙢𝓶𝚖𝑚𝗺᧕᧗"],["N","𝇙𝇚𝇜🄝𝆧𝙉🄽ℕꓠ𝛮𝝢𝙽𝚴𝑵𝑁Ⲛ𝐍𝒩𝞜𝗡𝘕𝜨𝓝𝖭🅽₦🅝ЙЍⓃҋ៷ＮᴎɴƝᑎ几иՈռИהЛπᴺᶰŃ刀ክṄⁿÑПΝᴨոϖǸŇṆŅṊṈทŊӢӣӤӥћѝйᥢҊᴻ🇳"],["n","ոռח𝒏𝓷𝙣𝑛𝖓𝔫𝗇𝚗𝗻ᥒⓝήｎǹᴒńñᾗηṅňṇɲņṋṉղຖՌƞŋ⒩ภกɳпŉлԉȠἠἡῃդᾐᾑᾒᾓᾔᾕᾖῄῆῇῂἢἣἤἥἦἧὴήበቡቢባቤብቦȵ𝛈𝜂𝜼𝝶𝞰𝕟𝘯𝐧𝓃ᶇᵰᥥ∩"],["O","𝜽⭘🔿ꭴ⭕⏺🄁🄀Ꭴ𝚯𝚹𝛩𝛳𝜣𝜭𝝝𝝧𝞗𝞡ⴱᎾᏫ⍬𝞱𝝷𝛉𝟎𝜃θ𝟘𝑂𝑶𝓞𝔒𝕆𝕺𝗢𝘖𝙊𝛰㈇ꄲ🄞🔾🄾𐊒𝟬ꓳⲞ𐐄𐊫𐓂𝞞🅞⍥◯ⵁ⊖０⊝𝝤Ѳϴ𝚶𝜪ѺӦӨӪΌʘ𝐎ǑÒŎÓÔÕȌȎㇿ❍ⓄＯὋロ❤૦⊕ØФԾΘƠᴼᵒ⒪ŐÖₒ¤◊Φ〇ΟОՕଠഠ௦סỒỐỖỔṌȬṎŌṐṒȮȰȪỎỜỚỠỞỢỌỘǪǬǾƟⵔ߀៰⍜⎔⎕⦰⦱⦲⦳⦴⦵⦶⦷⦸⦹⦺⦻⦼⦽⦾⦿⧀⧁⧂⧃ὈὉὊὌὍ"],["o","ంಂംං૦௦۵ℴ𝑜𝒐𝖔ꬽ𝝄𝛔𝜎𝝈𝞂ჿ𝚘০୦ዐ𝛐𝗈𝞼ဝⲟ𝙤၀𐐬𝔬𐓪𝓸🇴⍤○ϙ🅾𝒪𝖮𝟢𝟶𝙾𝘰𝗼𝕠𝜊𝐨𝝾𝞸ᐤⓞѳ᧐ᥲðｏఠᦞՓòөӧóºōôǒȏŏồốȍỗổõσṍȭṏὄṑṓȯȫ๏ᴏőöѻоዐǭȱ০୦٥౦೦൦๐໐οօᴑ०੦ỏơờớỡởợọộǫøǿɵծὀὁόὸόὂὃὅ"],["P","🄟🄿ꓑ𝚸𝙿𝞠𝙋ꮲⲢ𝒫𝝦𝑃𝑷𝗣𝐏𐊕𝜬𝘗𝓟𝖯𝛲Ꮲ🅟Ҏ🅿ⓅＰƤᑭ尸Ṗրφքᴘᴾᵖ⒫ṔｱקРየᴩⱣℙΡῬᑸᑶᑷᑹᑬᑮ🇵₱"],["p","ⲣҏ℗ⓟｐṕṗƥᵽῥρрƿǷῤ⍴𝓹𝓅𝐩𝑝𝒑𝔭𝕡𝖕𝗉𝗽𝘱𝙥𝚙𝛒𝝆𝞺𝜌𝞀"],["Q","🅀🄠Ꝗ🆀🅠ⓆＱℚⵕԚ𝐐𝑄𝑸𝒬𝓠𝚀𝘘𝙌𝖰𝕼𝔔𝗤🇶"],["q","𝓆ꝗ𝗾ⓠｑգ⒬۹զᑫɋɊԛ𝗊𝑞𝘲𝕢𝚚𝒒𝖖𝐪𝔮𝓺𝙦"],["R","℞🄡℟ꭱᏒ𐒴ꮢᎡꓣ🆁🅡ⓇＲᴙȒʀᖇя尺ŔЯરƦᴿዪṚɌʁℛℜℝṘŘȐṜŖṞⱤ𝐑𝑅𝑹𝓡𝕽𝖱𝗥𝘙𝙍𝚁ᚱ🇷ᴚ"],["r","𝚛ꭇᣴℾ𝚪𝛤𝜞𝝘𝞒ⲄГᎱᒥꭈⲅꮁⓡｒŕṙřȑȓṛṝŗгՐɾᥬṟɍʳ⒭ɼѓᴦᶉ𝐫𝑟𝒓𝓇𝓻𝔯𝕣𝖗𝗋𝗿𝘳𝙧ᵲґᵣ"],["S","🅂🄪🄢ꇙ𝓢𝗦Ꮪ𝒮Ꮥ𝚂𝐒ꓢ𝖲𝔖𝙎𐊖𝕾𐐠𝘚𝕊𝑆𝑺🆂🅢ⓈＳṨŞֆՏȘˢ⒮ЅṠŠŚṤŜṦṢടᔕᔖᔢᔡᔣᔤ"],["s","ᣵⓢꜱ𐑈ꮪｓśṥŝṡšṧʂṣṩѕşșȿᶊక𝐬𝑠𝒔𝓈𝓼𝔰𝕤𝖘𝗌𝘀𝘴𝙨𝚜ގ🇸"],["T","🅃🄣七ፒ𝜯🆃𐌕𝚻𝛵𝕋𝕿𝑻𐊱𐊗𝖳𝙏🝨𝝩𝞣𝚃𝘛𝑇ꓔ⟙𝐓Ⲧ𝗧⊤𝔗Ꭲꭲ𝒯🅣⏇⏉ⓉＴтҬҭƬイŦԵτᴛᵀｲፕϮŤ⊥ƮΤТ下ṪṬȚŢṰṮ丅丁ᐪ𝛕𝜏𝝉𝞃𝞽𝓣ㄒ🇹ጥ"],["t","ⓣｔṫẗťṭțȶ੮էʇ†ţṱṯƭŧᵗ⒯ʈեƫ𝐭𝑡𝒕𝓉𝓽𝔱𝕥𝖙𝗍𝘁𝘵𝙩𝚝ナ"],["U","🅄Џ🄤ሀꓴ𐓎꒤🆄🅤ŨŬŮᑗᑘǓǕǗǙⓊＵȖᑌ凵ƱմԱꓵЦŪՄƲᙀᵁᵘ⒰ŰપÜՍÙÚÛṸṺǛỦȔƯỪỨỮỬỰỤṲŲṶṴɄᥩᑧ∪ᘮ⋃𝐔𝑈𝑼𝒰𝓤𝔘𝕌𝖀𝖴𝗨𝘜𝙐𝚄🇺"],["u","𝘂𝘶𝙪𝚞ꞟꭎꭒ𝛖𝜐𝝊𝞄𝞾𐓶ὺύⓤｕùũūừṷṹŭǖữᥙǚǜὗυΰนսʊǘǔúůᴜűųยûṻцሁüᵾᵤµʋủȕȗưứửựụṳṵʉῠῡῢΰῦῧὐὑϋύὒὓὔὕὖᥔ𝐮𝑢𝒖𝓊𝓾𝔲𝕦𝖚𝗎ᶙ"],["V","𝑉𝒱𝕍𝗩🄥🅅ꓦ𝑽𝖵𝘝Ꮩ𝚅𝙑𝐕🆅🅥ⓋＶᐯѴᵛ⒱۷ṾⅴⅤṼ٧ⴸѶᐺᐻ🇻𝓥"],["v","∨⌄⋁ⅴ𝐯𝑣𝒗𝓋𝔳𝕧𝖛𝗏ꮩሀⓥｖ𝜐𝝊ṽṿ౮งѵעᴠνטᵥѷ៴ᘁ𝙫𝚟𝛎𝜈𝝂𝝼𝞶𝘷𝘃𝓿"],["W","𝐖𝑊𝓦𝔚𝕎𝖂𝖶𝗪𝙒𝚆🄦🅆ᏔᎳ𝑾ꓪ𝒲𝘞🆆Ⓦ🅦ｗＷẂᾧᗯᥕ山ѠຟచաЩШώщฬшᙎᵂʷ⒲ฝሠẄԜẀŴẆẈധᘺѿᙡƜ₩🇼"],["w","𝐰ꝡ𝑤𝒘𝓌𝔀𝔴𝕨𝖜𝗐𝘄𝘸𝙬𝚠աẁꮃẃⓦ⍵ŵẇẅẘẉⱳὼὠὡὢὣωὤὥὦὧῲῳῴῶῷⱲѡԝᴡώᾠᾡᾢᾣᾤᾥᾦɯ𝝕𝟉𝞏"],["X","ꭓꭕ𝛘𝜒𝝌𝞆𝟀ⲭ🞨𝑿𝛸🄧🞩🞪🅇🞫🞬𐌗Ⲭꓫ𝖃𝞦𝘟𐊐𝚾𝝬𝜲Ꭓ𐌢𝖷𝑋𝕏𝔛𐊴𝗫🆇🅧❌Ⓧ𝓧ＸẊ᙭χㄨ𝒳ӾჯӼҳЖΧҲᵡˣ⒳אሸẌꊼⅩХ╳᙮ᕁᕽⅹᚷⵝ𝙓𝚇乂𝐗🇽"],["x","᙮ⅹ𝑥𝒙𝓍𝔵𝕩𝖝𝗑𝘅ᕁᕽⓧｘхẋ×ₓ⤫⤬⨯ẍᶍ𝙭ӽ𝘹𝐱𝚡⨰ﾒ𝔁"],["Y","𝒴🄨𝓨𝔜𝖄𝖸𝘠𝙔𝚼𝛶𝝪𝞤УᎩᎽⲨ𝚈𝑌𝗬𝐘ꓬ𝒀𝜰𐊲🆈🅨ⓎＹὛƳㄚʏ⅄ϔ￥¥ՎϓγץӲЧЎሃŸɎϤΥϒҮỲÝŶỸȲẎỶỴῨῩῪΎὙὝὟΫΎӮӰҰұ𝕐🇾"],["y","𝐲𝑦𝒚𝓎𝔂𝔶𝕪𝖞𝗒𝘆𝘺𝙮𝚢ʏỿꭚγℽ𝛄𝛾𝜸𝝲𝞬🅈ᎽᎩⓨｙỳýŷỹȳẏÿỷуყẙỵƴɏᵞɣʸᶌү⒴ӳӱӯўУʎ"],["Z","🄩🅉ꓜ𝗭𝐙☡Ꮓ𝘡🆉🅩ⓏＺẔƵ乙ẐȤᶻ⒵ŹℤΖŻŽẒⱫ🇿"],["z","𝑍𝒁𝒵𝓩𝖹𝙕𝚉𝚭𝛧𝜡𝝛𝞕ᵶꮓ𝐳𝑧𝒛𝓏𝔃𝔷𝕫𝖟𝗓𝘇𝘻𝙯𝚣ⓩｚźẑżžẓẕƶȥɀᴢጊʐⱬᶎʑᙆ"]]),Et=new Map,St=new Map;for(const[t,e]of kt.entries()){Et.set(t,[...e]);for(const n of e)St.set(n,t)}function Dt(t){if(function(t){return bt.test(t)}(t))return t;let e="";for(const n of function(t){return t.replace(gt,"").replace(wt,"$1").replace(yt," ").replace(vt,".").replace(At,"")}(t))e+=St.get(n)||n;return e}var Ct=n(9705),It=n(45232);const Tt=400;async function _t(t,e,n){const{authToken:s,isAllowBadRequest:r,method:o,shouldRetry:a,retries:i,timeouts:c}=n??{},d=new URL(`${w.HUv}${t}`),l={method:o??"POST",headers:{"Content-Type":"application/json",...Rt(),...s&&{"X-Auth-Token":s}},body:JSON.stringify(e)},u=a?await(0,It.J5)(d,l,{retries:i,timeouts:c,shouldSkipRetryFn:t=>!(null!=t&&t.includes("signal is aborted"))}):await fetch(d.toString(),l);return await(0,It.EQ)(u,r?[Tt]:void 0),u.json()}function Bt(t,e,n){const s=new URL(`${w.HUv}${t}`);return(0,It.x6)(s,e,{headers:{...n,...Rt()}})}function Rt(){return{...(0,_.u)().apiHeaders,"X-App-Version":w.hl5,"X-App-Env":w.Guj}}function Nt(t){for(const[e,n]of Object.entries(Rt())){const s=/^X-App-(.+)$/i.exec(e);s&&t.searchParams.append(s[1].toLowerCase(),n)}}let Pt={},Ut=[],xt=new Set,Ft=new Set,Ot={};const Mt=new Ct.A;async function Wt(){try{const t=await Bt("/known-addresses");Pt=t.knownAddresses,Ut=t.scamMarkers.map((t=>new RegExp(t,"i"))),xt=new Set(t.trustedSites),Ft=new Set(t.trustedCollections),Ot=t.tonNftSuperCollections.reduce(((t,e)=>{const{collections:n,...s}=e;return n.forEach((e=>{t[e]=s})),t}),{}),Mt.resolve()}catch(t){(0,i.SJ)("tryUpdateKnownAddresses",t)}}function Lt(){return Pt}async function qt(){return await Mt.promise,Ot}function Ht(t){return Pt[t]}function Kt(t){return Ft.has(t)}function jt(t){const e=Dt(t).matchAll(w.kNZ);for(const t of e){var n;const e=null===(n=t.groups)||void 0===n?void 0:n.host;if(e&&(s=e,!xt.has(s.toLowerCase())))return!0}var s;return!1}var Jt=n(3476);function zt(t){const[e,n,s]=t.split(":");return{hash:e,type:s,subId:n}}function Vt(t,e){return $t(t,e,"local")}function $t(t,e,n){return n||void 0!==e?void 0===n?`${t}:${e}`:`${t}:${e??""}:${n}`:t}function Gt(t){switch(t.kind){case"transaction":return t.nft?[]:[t.slug];case"swap":return[t.from,t.to]}}function Qt(t){return("pending"===t.status||"pendingTrusted"===t.status)&&!t.id.endsWith(":backend-swap")}function Yt(t){return 1e3*t}function Zt(t){return Math.floor(t/1e3)}new Map,new Set(["stake","unstake","unstakeRequest"]),new Set(["dnsChangeAddress","dnsChangeSite","dnsChangeStorage","dnsChangeSubdomains","dnsDelete","dnsRenew"]);var Xt=n(398),te=n(50110),ee=n(53528),ne=n(62386),se=n(65871),re=n(66902),oe=n(56906),ae=n(97590);function ie(t){return!function(t){let e=0;for(const n in t)if(t.hasOwnProperty(n)&&(e++,e>0))return!0;return!1}(t)}var ce=n(64143);const de=new Set(["AbortError","BulkError","UnknownError"]);async function le(t){try{return w.gmk?void t():await t()}catch(t){if(de.has(null==t?void 0:t.name))return;throw t}}class ue extends ce.Ay{constructor(){super("tables"),this.version(1).stores({nfts:"[accountId+address], accountId, address, collectionAddress"}),this.version(2).stores({sseConnections:"&clientId"}),this.version(3).stores({tokens:"tokenAddress, chain, &slug"}),this.version(4).upgrade((t=>t.table("tokens").clear())),this.version(5).stores({nfts:null,sseConnections:null})}}const fe=new ue,me=new class{constructor(t){this.table=t}all(){return this.table.toArray()}find(t){return le((()=>this.table.where(t).toArray()))}put(t){return le((()=>this.table.put(t)))}bulkPut(t){return le((()=>this.table.bulkPut(t)))}update(t,e){return le((()=>this.table.update(t,e)))}delete(t){return le((()=>this.table.delete(t)))}deleteWhere(t){return le((()=>this.table.where(t).delete()))}clear(){return le((()=>this.table.clear()))}}(fe.tokens),he=new Ct.A,pe={baseCurrency:w.wOb,bySlug:{...w.lfO}};async function we(t,e,n,s,r){const o=[],a=(0,S.dU)(n??[],"slug");for(const{slug:t,...e}of n??[]){const n=pe.bySlug[t];if(n){const s={...n,...e};pe.bySlug[t]=s,o.push(s)}}for(const e of t){const{slug:t}=e,n=ge(e,a,pe.bySlug[t]);e.slug in pe||(r=!0),pe.bySlug[e.slug]=n,e.tokenAddress&&o.push(n)}s&&(pe.baseCurrency=s),await me.bulkPut(o),r&&e&&be(e)}function ge(t,e,n){return n?{...(0,S.Oy)(t.isFromBackend?n:t),...(0,S.Oy)(t.isFromBackend?t:n),price:t.price||n.price,priceUsd:t.priceUsd||n.priceUsd,percentChange24h:t.percentChange24h||n.percentChange24h}:t.slug in e?{...t,...e[t.slug]}:t}function ye(){return pe}function ve(t){return pe.bySlug[t]}function Ae(t){return ve(ke("ton",t))}function be(t){t({type:"updateTokens",tokens:pe.bySlug,baseCurrency:pe.baseCurrency})}function ke(t,e){return`${t}-${e.replace(/[^a-z\d]/gi,"").slice(0,10)}`.toLowerCase()}const Ee=128,Se={"wallet v1 r1":"simpleR1","wallet v1 r2":"simpleR2","wallet v1 r3":"simpleR3","wallet v2 r1":"v2R1","wallet v2 r2":"v2R2","wallet v3 r1":"v3R1","wallet v3 r2":"v3R2","wallet v4 r2":"v4R2","wallet v5 r1":"W5"};async function De(t,e){return(await Te(t,"/addressBook",{address:e})).address_book[e]}async function Ce(t,e){const{wallets:n,address_book:s}=await Te(t,"/walletStates",{address:e.join(",")}),r=Object.fromEntries(n.map((t=>[t.address.toLowerCase(),Ie(t,s)])));return Object.fromEntries(e.map((t=>{const e=(0,D.m$)(t).toLowerCase();return[t,r[e]??{address:t,balance:0n,isInitialized:!1,seqno:0}]})))}function Ie(t,e){return{address:e[t.address].user_friendly,version:"wallet_type"in t?Se[t.wallet_type]:void 0,balance:BigInt(t.balance),isInitialized:"active"===t.status,seqno:"seqno"in t?t.seqno:0,lastTxId:t.last_transaction_hash?$t(t.last_transaction_hash):void 0,domain:e[t.address].domain??void 0}}function Te(t,e,n){const s=`${"testnet"===t?w.pyR:w._J8}/api/v3${e}`;return(0,It.x6)(s,n,{headers:_e(t)})}function _e(t){const{apiHeaders:e,toncenterMainnetKey:n,toncenterTestnetKey:s}=(0,_.u)(),r="testnet"===t?s:n;return{...e,...r&&{"X-Api-Key":r},"X-Actions-Version":w.eaP}}var Be=n(68354);const Re=500,Ne=100;let Pe;function Ue(t){if(!Pe){const t={...(0,_.u)().apiHeaders,"Content-Type":"application/json"};Pe={mainnet:new Be.jI(new Be.Qq({baseUrl:w.lHX,baseApiParams:{headers:t},customFetch:It.J5})),testnet:new Be.jI(new Be.Qq({baseUrl:w.SKs,baseApiParams:{headers:t},customFetch:It.J5}))}}return Pe[t]}async function xe(t,e){return(await Ue(t).accounts.getAccountJettonsBalances(e,{supported_extensions:["custom_payload"]})).balances}async function Fe(t,e){return(await Ue(t).nft.getNftItemsByAddresses({account_ids:e})).nft_items}var Oe=n(48287).Buffer;const Me=1,We={parse:t=>{const e=Oe.from(""),n=(t,e,s)=>{if(s&&0!==t.loadUint(8))throw new Error("Only snake format is supported");return e=Oe.concat([e,t.loadBuffer(t.remainingBits/8)]),1===t.remainingRefs&&(e=n(t.loadRef().beginParse(),e,!1)),e};return n(t.loadRef().beginParse(),e,!0)},serialize:()=>{}},Le={uri:"ascii",name:"utf8",description:"utf8",image:"ascii",symbol:"utf8",decimals:"utf8",custom_payload_api_uri:"ascii"};async function qe(t){const e=await(0,It.x3)(t);return(0,S.Up)(e,["name","description","symbol","decimals","image","image_data","custom_payload_api_uri"])}async function He(t,e,n){const s=function(t){let e;e="string"==typeof t?Oe.from(t,"base64"):t instanceof Oe?t:Oe.from(t);try{return re.Cell.fromBoc(e)[0].beginParse()}catch(t){if("Invalid magic"!==(null==t?void 0:t.message))throw t}return new oe.Slice(new ee.BitReader(new ne.BitString(e,0,8*e.length)),[])}(n),r={type:"unknown",base64:n};return s?await async function(t,e,n,s,r){let o;try{if(o=n.loadUint(32),o===Jt.$G.Comment){return{type:"comment",comment:Je(n).toString("utf-8")}}if(o===Jt.$G.Encrypted){return{type:"encrypted-comment",encryptedComment:Je(n).toString("base64")}}if(n.remainingBits<64)return;const s=n.loadUintBig(64);switch(o){case Jt.LY.Transfer:{var a;const r=await(0,D.uA)(t,e).catch((()=>"")),o=ke("ton",r),i=n.loadCoins(),c=n.loadAddress(),d=n.loadMaybeAddress();if(!d)return{type:"tokens:transfer-non-standard",queryId:s,destination:(0,D.vn)(c,void 0,t),amount:i,slug:o};const l=n.loadMaybeRef(),u=n.loadCoins();let f,m=n.loadMaybeRef();if(!m&&n.remainingBits){const t=(new se.Builder).storeBits(n.loadBits(n.remainingBits));(0,S.y1)(0,n.remainingRefs).forEach((()=>{t.storeRef(n.loadRef())})),m=t.endCell()}if(m){const t=m.beginParse();t.remainingBits>32&&(f=t.loadUint(32))}return{type:"tokens:transfer",queryId:s,amount:i,destination:(0,D.vn)(c,void 0,t),responseDestination:(0,D.vn)(d,void 0,t),customPayload:null==l?void 0:l.toBoc().toString("base64"),forwardAmount:u,forwardPayload:null===(a=m)||void 0===a?void 0:a.toBoc().toString("base64"),forwardPayloadOpCode:f,slug:o,tokenAddress:r}}case Jt.H3.TransferOwnership:{var c;const r=n.loadAddress(),o=n.loadAddress(),a=n.loadMaybeRef(),i=n.loadCoins(),d=je(n),l=d?Ke(d.asSlice()):void 0;let u;{const n=await qt(),[s]=await Fe(t,[e]);s&&(u=Ve(t,s,n))}return{type:"nft:transfer",queryId:s,newOwner:(0,D.vn)(r,void 0,t),responseDestination:(0,D.vn)(o,void 0,t),customPayload:null==a?void 0:a.toBoc().toString("base64"),forwardAmount:i,forwardPayload:null==d?void 0:d.toBoc().toString("base64"),nftAddress:e,nftName:null===(c=u)||void 0===c?void 0:c.name,nft:u,comment:l}}case Jt.H3.OwnershipAssigned:{const r=n.loadAddress(),o=je(n),a=o?Ke(o.asSlice()):void 0;let i;{const n=await qt(),[s]=await Fe(t,[e]);s&&(i=Ve(t,s,n))}return{type:"nft:ownership-assigned",queryId:s,prevOwner:(0,D.vn)(r,void 0,t),comment:a,nftAddress:e,nft:i}}case Jt.LY.Burn:{const r=await(0,D.uA)(t,e),o=ke("ton",r),a=n.loadCoins(),i=n.loadAddress(),c=n.loadMaybeRef(),d=r===w.Kzb;return{type:"tokens:burn",queryId:s,amount:a,address:(0,D.vn)(i,void 0,t),customPayload:null==c?void 0:c.toBoc().toString("base64"),slug:o,isLiquidUnstakeRequest:d}}case Jt.Ad.DistributedAsset:return{type:"liquid-staking:withdrawal-nft",queryId:s};case Jt.Ad.Withdrawal:return{type:"liquid-staking:withdrawal",queryId:s};case Jt.Ad.Deposit:{let t;return n.remainingBits>0&&(t=n.loadUintBig(64)),{type:"liquid-staking:deposit",queryId:s,appId:t}}case Jt.UA.AddWhitelist:{const e=n.loadAddress();return{type:"vesting:add-whitelist",queryId:s,address:await De(t,e.toRawString())}}case Jt.IP.Withdraw:return{type:"single-nominator:withdraw",queryId:s,amount:n.loadCoins()};case Jt.IP.ChangeValidator:{const e=n.loadAddress();return{type:"single-nominator:change-validator",queryId:s,address:await De(t,e.toRawString())}}case Jt.Ad.Vote:{const t=n.loadAddress(),e=n.loadUint(48),r=n.loadBit(),o=n.loadBit();return{type:"liquid-staking:vote",queryId:s,votingAddress:(0,D.vn)(t,!0),expirationDate:e,vote:r,needConfirmation:o}}case Jt.kc.ChangeRecord:{var d;const e=n.loadBuffer(32).toString("hex"),r=(null===(d=Object.entries(Jt.nm).find((t=>{let[,n]=t;return e===n})))||void 0===d?void 0:d[0])??"unknown",o=n.loadAddress(),a=await(0,D.l_)(t,o);if(r===Jt.kJ.Wallet){if(n.remainingRefs>0){const e=n.loadRef().beginParse();n.endParse();const r=e.loadAddress(),o=e.loadUint(8);return{type:"dns:change-record",queryId:s,record:{type:"wallet",value:await De(t,r.toRawString()),flags:o},domain:a}}return{type:"dns:change-record",queryId:s,record:{type:"wallet",value:void 0},domain:a}}if(n.remainingRefs>0){const t=n.loadRef();return{type:"dns:change-record",queryId:s,record:r===Jt.kJ.Unknown?{type:"unknown",key:e,value:t.toBoc().toString("base64")}:{type:r,value:t.toBoc().toString("base64")},domain:a}}return{type:"dns:change-record",queryId:s,record:r===Jt.kJ.Unknown?{type:"unknown",key:e}:{type:r},domain:a}}case Jt.b2.TokenBridgePaySwap:return{type:"token-bridge:pay-swap",queryId:s,swapId:n.loadBuffer(32).toString("hex")};case Jt.CU.UnstakeRequest:return{type:"jetton-staking:unstake",queryId:s,amount:n.loadCoins(),isForce:n.loadBoolean()}}}catch(t){if(w.Oig){var l;const e=r,n=`0x${null===(l=o)||void 0===l?void 0:l.toString(16).padStart(8,"0")}`;(0,i.SJ)("parsePayload",n,e,"\n",t)}}}(t,e,s)??r:r}function Ke(t){if(!(t.remainingBits<32)&&t.loadUint(32)===Jt.$G.Comment&&(t.remainingBits||t.remainingRefs))return Je(t).toString("utf-8")}function je(t){let e=t.loadBit()&&t.remainingRefs?t.loadRef():void 0;if(!e&&t.remainingBits){const n=(new se.Builder).storeBits(t.loadBits(t.remainingBits));(0,S.y1)(0,t.remainingRefs).forEach((()=>{n.storeRef(t.loadRef())})),e=n.endCell()}return e??void 0}function Je(t){let e=Oe.alloc(0);for(;t.remainingBits>=8&&(e=Oe.concat([e,t.loadBuffer(t.remainingBits/8)]),t.remainingRefs);)t=t.loadRef().beginParse();return e}function ze(t){const{id:e,image:n,attributes:s}=t;let r,o,a={};var i,c,d;(n&&(a.imageUrl=n),void 0!==e&&(a.mtwCardId=e),s&&Array.isArray(s)&&s.length&&(r=null===(i=s.find((t=>"Card Type"===t.trait_type)))||void 0===i?void 0:i.value.replace(/[^\x20-\x7E]/g,"").trim().toLowerCase(),r))&&(o=null===(c=s.find((t=>"Text"===t.trait_type)))||void 0===c?void 0:c.value.toLowerCase(),a.mtwCardType=r,"standard"===r&&(a.mtwCardBorderShineType=null===(d=s.find((t=>"Shine"===t.trait_type)))||void 0===d?void 0:d.value.toLowerCase()),a.mtwCardTextType="dark"===o||"silver"===r?"dark":"light",a=(0,S.Oy)(a));return ie(a)?void 0:a}function Ve(t,e,n){if(e.metadata)try{const{address:s,index:r,collection:o,metadata:a,previews:i,sale:c,trust:d,owner:l}=e,{name:u,image:f,description:m,render_type:h,attributes:p,lottie:g}=a,y=o&&(0,D.vn)(o.address,!0,t);let v=!1;if(!y||!Kt(y))for(const t of[u,m].filter(Boolean))jt(t)&&(v=!0);const A="whitelist"===d,b=v||"SCAM"===m||"blacklist"===d,k="hidden"===h||b,E=i.find((t=>"1500x1500"===t.resolution)).url,C=$e(n,y),I={...Array.isArray(p)&&{attributes:p},...A&&g&&{lottie:(0,It.I5)(g)},...y===w.qL&&ze(a),...C&&{fragmentUrl:f.replace(w.Pjb,"https://$1")}};return(0,S.Oy)({index:r,name:u,ownerAddress:l?(0,D.vn)(l.address,!1,t):void 0,address:(0,D.vn)(s,!0,t),image:(0,It.fU)(E||f||""),thumbnail:i.find((t=>"500x500"===t.resolution)).url,isOnSale:Boolean(c),isHidden:k,isScam:b,description:m,...o&&{collectionAddress:y,collectionName:o.name,isOnFragment:C||w.q5n.includes(o.address),isTelegramGift:C},metadata:I})}catch(t){return void(0,i.SJ)("buildNft",t)}}function $e(t,e){var n;return!!e&&(null===(n=t[e])||void 0===n?void 0:n.id)===w.X6R}function Ge(t,e){const n=typeof t;if(n!==typeof e)return!1;if("object"!==n||null===t||null===e)return t===e;const s=Array.isArray(t);if(s!==Array.isArray(e))return!1;if(s){const n=t,s=e;return n.length===s.length&&n.every(((t,e)=>Ge(t,s[e])))}const r=t,o=e,a=Object.keys(r),i=Object.keys(o);return!!a.every((t=>o.hasOwnProperty(t)))&&!!i.every((t=>r.hasOwnProperty(t)))&&a.every((t=>Ge(r[t],o[t])))}var Qe=n(59288);function Ye(t){var e,n;return(null===(e=t.sseOptions)||void 0===e?void 0:e.appClientId)??(null===(n=t.sse)||void 0===n?void 0:n.appClientId)??"jsbridge"}let Ze,Xe;function tn(t){if("transaction"!==t.kind)return t;const{normalizedAddress:e,comment:n,isIncoming:s,nft:r}=t;let{metadata:o={}}=t;const a=Boolean(r),i=Lt(),c=!!n&&Ut.some((t=>t.test(n))),d=!(c||!n||!s||!a&&!n.toLowerCase().includes("claim"))&&(jt(n)||(l=n,w.rcB.test(Dt(l))));var l;return e in i&&(o={...o,...i[e]}),(c||d)&&(o.isScam=!0),{...t,metadata:o}}function en(t){return Xe===t}function nn(t){const{id:e,network:n}=t;return`${e}-ton-${n}`}async function sn(){const t=await R.getKeys();if(null!=t&&t.length){const e=[];for(const n of t){if(n.startsWith("backup_"))continue;const t=`backup_${n}`,s=await R.getItem(n,!0);(0,Qe.v)(void 0!==s,"Empty value!"),await R.setItem(t,s);const r=await R.getItem(t);(0,Qe.v)(Ge(s,r),"Data has not been saved!"),e.push([n,s])}for(const[t,n]of e){let e=!1;await R.setItem(t,n).catch((()=>{e=!0})),e&&(await R.removeItem(t),await R.setItem(t,n))}}}const rn="0:F6FF877DD4CE1355B101572045F09D54C29309737EB52CA542CFA6C195F7CC5B",on="0000000000000000000000000000000000000000000000",an=new Set(["0:901362FD85FC31D55F2C82617D91EADA1F1D6B34AF559A047572D56F20D046CA"]);async function cn(t){const{network:e,filter:n,limit:s,toTimestamp:r,fromTimestamp:o,shouldIncludeFrom:a,shouldIncludeTo:i,walletAddress:c,includeTypes:d,excludeTypes:l}=t,u={account:"address"in n?n.address:void 0,action_id:"actionId"in n?n.actionId:void 0,limit:s,start_utime:o&&Zt(o)+(a?0:1),end_utime:r&&Zt(r)-(i?0:1),sort:"desc",...(null==d?void 0:d.length)&&{action_type:d.join(",")},...(null==l?void 0:l.length)&&{exclude_action_type:l.join(",")}},{actions:f,address_book:m,metadata:h={}}=await Te(e,"/actions",u);return dn(e,c,f,m,h,await qt())}function dn(t,e,n,s,r,o,a){const i={network:t,addressBook:s,walletAddress:e,metadata:r,nftSuperCollectionsByCollectionAddress:o,isPending:a},c=[];for(const t of n)c.push(...ln(t,i));return c}function ln(t,e){let n=[];switch(t.type){case"ton_transfer":n=[un(t,e)];break;case"call_contract":n=[fn(t,e)];break;case"contract_deploy":n=[mn(t,e)];break;case"nft_transfer":n=[gn(t,e)];break;case"nft_mint":n=[yn(t,e)];break;case"jetton_transfer":n=[hn(t,e)];break;case"jetton_mint":n=[pn(t,e)];break;case"jetton_burn":n=[wn(t,e)];break;case"stake_deposit":n=[vn(t,e)];break;case"stake_withdrawal":n=[An(t,e)];break;case"stake_withdrawal_request":n=[bn(t,e)];break;case"jetton_swap":n=[kn(t,e)];break;case"change_dns":case"delete_dns":case"renew_dns":n=[En(t,e)];break;case"auction_bid":n=[Sn(t,e)];break;case"dex_deposit_liquidity":n=Dn(t,e);break;case"dex_withdraw_liquidity":n=function(t,e){const{addressBook:n}=e,{details:s,details:{source:r,pool:o,dex:a}}=t,i={...In(t,e,o,r),shouldLoadDetails:!0,type:"liquidityWithdraw",extra:{dex:Pn(a)}},c=Rn(t,"additional");return[{...i,amount:BigInt(s.amount_1),slug:Cn(n,s.asset_1)},{...i,id:c,amount:BigInt(s.amount_2),slug:Cn(n,s.asset_2)}]}(t,e)}for(let t=0;t<n.length;t++){var s;const e=n[t];e&&("nft"in e&&null!==(s=e.nft)&&void 0!==s&&s.isHidden&&(e.shouldHide=!0),"transaction"!==e.kind||e.isIncoming||(e.shouldLoadDetails??=!0),n[t]=tn(e))}return n.filter(Boolean)}function un(t,e){const{details:n,details:{encrypted:s,source:r,destination:o,value:a}}=t,i=!s&&n.comment||void 0,c=s&&n.comment||void 0;return{...In(t,e,r,o,a),slug:w.Tu9.slug,comment:i,encryptedComment:c}}function fn(t,e){const{walletAddress:n}=e,{details:s,details:{source:r,destination:o,value:a}}=t,i=In(t,e,r,o,a),c=Number(s.opcode),d=!i.isIncoming&&[Jt.$G.OurFee,Jt.s1.Ok].includes(c);let l;return Jt.br.includes(c)?l="excess":c===Jt.$G.Bounced?l="bounced":[Jt.CU.UnstakeRequest,Jt.CU.ClaimRewards].includes(c)?l="unstakeRequest":i.toAddress!==n&&(l="callContract"),{...i,slug:w.Tu9.slug,type:l,shouldHide:d}}function mn(t,e){const{details:{source:n,destination:s}}=t;if(n)return{...In(t,e,n,s),slug:w.Tu9.slug,type:"contractDeploy",shouldLoadDetails:!1,fee:0n}}function hn(t,e){const{addressBook:n}=e,{details:s,details:{is_encrypted_comment:r,forward_payload:o,sender:a,receiver:i,amount:c}}=t,d=In(t,e,a,i,c),{isIncoming:l,toAddress:u,fromAddress:f}=d,m=!r&&s.comment||void 0,h=r&&s.comment||void 0,p=n[s.asset].user_friendly,g=ke("ton",p),y=!l&&o===Jt.SQ;let v;return u===w.pV9?v="burn":u===w.xrY?v="stake":f===w.xrY?v="unstake":p===w.wpN.tokenAddress&&(f===w.BV6?v="unstake":u===w.BV6&&(v="stake")),{...d,slug:g,comment:m,encryptedComment:h,shouldHide:y,type:v}}function pn(t,e){const{addressBook:n}=e,{details:s,details:{receiver:r,receiver_jetton_wallet:o,amount:a}}=t,i=n[s.asset].user_friendly,c=ke("ton",i);let d,l="mint";return i===w.VG8.tokenAddress&&t.end_lt!==t.trace_end_lt?(l="unstakeRequest",d={...In(t,e,r,r,0),toAddress:w.BV6,isIncoming:!1,normalizedAddress:w.BV6}):d=In(t,e,o,r,a),{...d,slug:c,type:l}}function wn(t,e){const{network:n}=e,{details:s,details:{owner:r,owner_jetton_wallet:o,amount:a}}=t,i=ke("ton",(0,D.vn)(s.asset,!0,n));return{...In(t,e,r,o,a),slug:i,type:"burn"}}function gn(t,e){const{metadata:n,walletAddress:s,addressBook:r,nftSuperCollectionsByCollectionAddress:o}=e,{nft_item_index:a,nft_item:i,nft_collection:c,new_owner:d,old_owner:l,forward_payload:u,is_purchase:f,price:m,response_destination:h,marketplace:p}=t.details,{nft:g,isMetadataMissing:y}=Tn(n,i,o,c??void 0,a??void 0);let v=!g&&c?function(t,e){var n,s;const r=null===(n=e[t])||void 0===n?void 0:n.token_info[0];return null==r||null===(s=r.name)||void 0===s?void 0:s.includes("Withdrawal Payout")}(c,n):void 0;if(l&&d&&h){var A,b;const t=null===(A=r[l])||void 0===A?void 0:A.user_friendly,e=null===(b=r[d])||void 0===b?void 0:b.user_friendly;t!==s&&e!==s&&(v=!0)}const k={...In(t,e,l??i,d),shouldHide:v,slug:w.Tu9.slug,nft:g,comment:u&&(E=u,(0,te.A)((()=>{const t=mt.Cell.fromBase64(E);if(!t.isExotic)return Ke(t.asSlice())})))||void 0,shouldReload:y&&an.has(t.details.nft_collection)||void 0};var E;if(k.toAddress===w.pV9)k.type="burn";else if(f&&m){var S;const t=(null===(S=r[d])||void 0===S?void 0:S.user_friendly)===s;k.type="nftTrade",k.isIncoming=!t,k.amount=t?-BigInt(m):BigInt(m),k.extra={marketplace:p??void 0}}return k}function yn(t,e){const{metadata:n,nftSuperCollectionsByCollectionAddress:s}=e,{owner:r,nft_item_index:o,nft_item:a,nft_collection:i}=t.details,{nft:c,isMetadataMissing:d}=Tn(n,a,s,i??void 0,o??void 0);return{...In(t,e,r,a),slug:w.Tu9.slug,nft:c,type:"mint",shouldReload:d&&an.has(t.details.nft_collection)||void 0}}function vn(t,e){const{details:{stake_holder:n,pool:s,amount:r}}=t;return{...In(t,e,n,s,r),slug:w.Tu9.slug,type:"stake"}}function An(t,e){const{addressBook:n}=e,{details:s,details:{stake_holder:r,amount:o}}=t,a=s.pool??rn;return{...In(t,a in n?e:{...e,addressBook:{...n,[a]:{user_friendly:w.qMf,domain:null}}},a,r,o),slug:w.Tu9.slug,type:"unstake",shouldLoadDetails:"tonstakers"===s.provider&&!s.payout_nft}}function bn(t,e){const{details:{stake_holder:n,pool:s}}=t;return{...In(t,e,n,s,0),slug:w.Tu9.slug,type:"unstakeRequest"}}function kn(t,e){var n,s;const{metadata:r,isPending:o}=e,{end_utime:a,success:i,details:{dex_incoming_transfer:{amount:c,asset:d},dex_outgoing_transfer:{amount:l,asset:u}}}=t,f=d&&(null===(n=_n(d,r))||void 0===n?void 0:n.decimals)||w.Tu9.decimals,m=u&&(null===(s=_n(u,r))||void 0===s?void 0:s.decimals)||w.Tu9.decimals,h=d?(0,D.vn)(d,!0):void 0,p=u?(0,D.vn)(u,!0):void 0,g=h&&h!==w.oWZ?ke("ton",h):w.Tu9.slug,y=p&&p!==w.oWZ?ke("ton",p):w.Tu9.slug;return{kind:"swap",id:Rn(t),timestamp:Yt(a),from:g,fromAmount:(0,Xt.nI)(BigInt(c),f),to:y,toAmount:(0,Xt.nI)(BigInt(l),m),networkFee:"0",swapFee:"0",ourFee:"0",status:o?"pending":i?"completed":"failed",hashes:[],externalMsgHashNorm:t.trace_external_hash_norm??t.trace_external_hash,shouldLoadDetails:!0}}function En(t,e){const{metadata:n,nftSuperCollectionsByCollectionAddress:s}=e,{details:{source:r,asset:o}}=t,{nft:a}=Tn(n,o,s);let i;if("change_dns"===t.type){const{sum_type:e}=t.details.value;"DNSSmcAddress"===e?i="dnsChangeAddress":"DNSAdnlAddress"===e?i="dnsChangeSite":"DNSStorageAddress"===e?i="dnsChangeStorage":"DNSNextResolver"===e&&(i="dnsChangeSubdomains")}else i="renew_dns"===t.type||"delete_dns"===t.type&&t.details.hash.endsWith(on)?"dnsRenew":"dnsDelete";return{...In(t,e,r,o,0),slug:w.Tu9.slug,type:i,nft:a}}function Sn(t,e){const{metadata:n,nftSuperCollectionsByCollectionAddress:s}=e,{details:r}=t,{bidder:o,auction:a,nft_item_index:i,nft_item:c,nft_collection:d}=r,{nft:l}=Tn(n,c??void 0,s,d??void 0,i??void 0);return{...In(t,e,o,a,r.amount),slug:w.Tu9.slug,type:"auctionBid",nft:l}}function Dn(t,e){const{addressBook:n}=e,{details:s,details:{source:r,pool:o,destination_liquidity:a,dex:i}}=t,c={...In(t,e,r,o??a),type:"liquidityDeposit",extra:{dex:Pn(i)}},d=[{...c,amount:-BigInt(s.amount_1??0n),slug:Cn(n,s.asset_1)}];if(null!==s.amount_2){const e=Rn(t,"additional");d.push({...c,id:e,amount:-BigInt(s.amount_2),slug:Cn(n,s.asset_2)})}return d}function Cn(t,e){return e?ke("ton",t[e].user_friendly):w.Tu9.slug}function In(t,e,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const o=Rn(t),{walletAddress:a,network:i,addressBook:c,isPending:d}=e,l=c[n].user_friendly,u=c[s].user_friendly,f=u===a,m=(0,D.vn)(f?l:u,!0,i),h=f?BigInt(r):-BigInt(r);return{kind:"transaction",id:o,timestamp:Yt(t.end_utime),externalMsgHashNorm:t.trace_external_hash_norm??t.trace_external_hash,fee:0n,fromAddress:l,toAddress:u,isIncoming:f,normalizedAddress:m,amount:h,status:d?"pending":t.success?"completed":"failed"}}function Tn(t,e,n,s,r){try{const o=Bn(e,t,"nft_items");if(!o)return{isMetadataMissing:!0};const{name:a,description:i,extra:c}=o;let{image:d}=o;const l=null!=c&&c.lottie?(0,It.I5)(c.lottie):void 0,u=(0,D.vn)(e,!0),f=s?Bn(s,t,"nft_collections"):void 0,m=s?(0,D.vn)(s,!0):void 0,h=(null==c?void 0:c.domain)??a??"",{zone:p,base:g}=(0,ht.u_)(h)??{};if(p&&(!m||!d))return"ton"===p.suffixes[0]&&(d=`${w.X7L}${g}`),{nft:(0,S.Oy)({index:Number(r),name:h,address:u,thumbnail:(null==c?void 0:c._image_medium)??d,image:d,description:i,isOnSale:!1,collectionAddress:m??p.resolver,collectionName:p.collectionName,metadata:{...l&&{lottie:l}}})};let y=!1;if(!m||!Kt(m))for(const t of[a,i].filter(Boolean))jt(t)&&(y=!0);const v=y,A="hidden"===(null==c?void 0:c.render_type)||v,b=$e(n,m),k=m===w.qL,E=d?(0,It.fU)(d):void 0,C=(null==c?void 0:c._image_medium)??E;return{nft:(0,S.Oy)({index:Number(r),name:a,address:u,thumbnail:C,image:E,description:i,isOnSale:!1,isHidden:A,metadata:{...b&&{fragmentUrl:d.replace(w.Pjb,"https://$1")},...k&&ze({id:Number(r||0)+1,image:d,attributes:null==c?void 0:c.attributes})},...m&&{collectionAddress:m,collectionName:null==f?void 0:f.name,isOnFragment:b||w.q5n.includes(s),isTelegramGift:b}})}}catch(t){return(0,i.SJ)("parseToncenterNft",t),{}}}function _n(t,e){const n=(0,D.vn)(t,!0),s=ke("ton",n),r=ve(s);if(r)return r;const o=Bn(t,e,"jetton_masters");return o?{tokenAddress:n,slug:s,chain:"ton",name:o.name,symbol:o.symbol,image:o.image,decimals:Number(o.extra.decimals)}:void 0}function Bn(t,e,n){var s;const r=e[t];if(r&&r.is_indexed)return null===(s=r.token_info)||void 0===s?void 0:s.find((t=>t.type===n))}function Rn(t,e){const n=`${t.start_lt}-${t.action_id}`;return $t(t.trace_id??t.trace_external_hash_norm??t.trace_external_hash,n,e)}function Nn(t){const{hash:e,subId:n}=zt(t),[s,r]=n.split("-");return{traceId:e,startLt:s,actionId:r}}function Pn(t){switch(t){case"dedust":return"dedust";case"stonfi":case"stonfi_v2":return"ston";default:return}}function Un(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(Qt(t)?1:0)-(Qt(e)?1:0);return 0===s&&(s=t.timestamp-e.timestamp,0===s&&(s=t.id>e.id?1:t.id<e.id?-1:0)),n?s:-s}function xn(t,e){return t.sort(((t,n)=>Un(t,n,e)))}function Fn(t,e,n){const s=[t,e];for(let t=0;t<s.length;t++)On(s[t],n)||((0,i.SJ)(`Activity list ${t} is not sorted`,{stack:(new Error).stack}),s[t]=xn([...s[t]],n));return(0,S.yQ)(t,e,((t,e)=>Un(t,e,n)),!0)}function On(t,e){for(let n=1;n<t.length;n++)if(Un(t[n-1],t[n],e)>0)return!1;return!0}function Mn(){const t=new Set;function e(e){t.delete(e)}return{runCallbacks:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];t.forEach((t=>{t(...n)}))},addCallback:function(n){return t.add(n),()=>{e(n)}},removeCallback:e,hasCallbacks:function(){return Boolean(t.size)}}}var Wn=n(37836);const Ln=Mn();let qn=!0;function Hn(t,e,n){let s;const r=()=>{s(),n()};return s=(0,Wn.Gf)(t,(()=>{if(qn)r();else{const n=Ln.addCallback(r),o=(0,Wn.Gf)(e-t,r);s=()=>{n(),o()}}})),()=>s()}function Kn(t,e){return new Promise((n=>{Hn(t,e,n)}))}function jn(t){qn=t,t&&Ln.runCallbacks()}var Jn=n(48217);const zn=1e3,Vn=60*zn,$n=365,Gn=50,Qn="fakeTxId",Yn={updateOnStart:!0,minUpdateDelay:{focused:zn,notFocused:3*zn},fallbackUpdateStartDelay:3*zn,fallbackUpdatePeriod:{focused:1.1*zn,notFocused:10*zn},forceUpdatePeriod:{focused:Vn,notFocused:2*Vn}},Zn={updateOnStart:!1,minUpdateDelay:{focused:5*zn,notFocused:30*zn},fallbackUpdateStartDelay:5*zn,fallbackUpdatePeriod:{focused:30*zn,notFocused:Vn},forceUpdatePeriod:{focused:2*Vn,notFocused:5*Vn}};function Xn(t){let e,{period:n,minDelay:s=0,skipInitialPoll:r,prepare:o=()=>Promise.resolve(),poll:a}=t,i=!1;const c=new Ct.A,d=(0,Wn.nF)((async()=>{var t;if(i)return;null===(t=e)||void 0===t||t();const n=await c.promise;try{"stop"===await a(n)&&(i=!0)}finally{i||l()}}),(()=>Kn(...es(s))));function l(){var t;null===(t=e)||void 0===t||t(),e=Hn(...es(n),d)}return o().then((t=>{i||(c.resolve(t),r?l():d())})),{poll:d,stop(){var t;i=!0,null===(t=e)||void 0===t||t()}}}function ts(t,e){let n,s=!1;async function r(o,a){var i;null===(i=n)||void 0===i||i();try{return await e(o,...a)}finally{var c;!s&&o<t.length&&(null===(c=n)||void 0===c||c(),n=(0,Wn.Gf)(t[o],(()=>r(o+1,a))))}}return{run(){s=!1;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r(0,e)},cancel(){var t;s=!0,null===(t=n)||void 0===t||t()}}}function es(t){if("number"==typeof t)return[t,t];const{focused:e,notFocused:n}=t;return[e,n]}class ns{#t;#e;#n=!1;constructor(t,e){this.#t=e,t?this.#s():this.#r(),e.pollOnStart&&this.#o()}onSocketConnect(){this.#n||(this.#s(),this.#o())}onSocketDisconnect(){this.#n||this.#r()}onSocketMessage(){this.#n||this.#s()}destroy(){var t;this.#n=!0,null===(t=this.#e)||void 0===t||t.call(this)}#o=(0,Wn.nF)((async()=>{if(!this.#n)try{await this.#t.poll()}catch(t){(0,Jn.H)(t)}}),(()=>Kn(...es(this.#t.minPollDelay))));#r(){var t;null===(t=this.#e)||void 0===t||t.call(this);const{pollingStartDelay:e,pollingPeriod:n}=this.#t,s=()=>{this.#e=Hn(...es(n),s),this.#o()};this.#e=(0,Wn.Gf)(e,s)}#s(){var t;null===(t=this.#e)||void 0===t||t.call(this);const e=()=>{const{forcedPollingPeriod:t}=this.#t;this.#e=Hn(...es(t),(()=>{e(),this.#o()}))};e()}}class ss{#a;#i;#c=!1;#d=0;#l;#u=[];#f=Mn();#m=Mn();#h=Mn();constructor(t){this.#a=t.toString(),this.#p()}send(t){this.#i&&this.#c?this.#w(t):this.#u.push(t)}get isConnected(){return this.#c}reconnect(){this.close(),this.#p()}onMessage(t){return this.#f.addCallback(t)}onConnect(t){return this.#m.addCallback(t)}onDisconnect(t){return this.#h.addCallback(t)}close(){this.#g(),this.#c&&(this.#c=!1,this.#h.runCallbacks(!1))}#p(){this.#g(),this.#i=new WebSocket(this.#a),this.#i.binaryType="arraybuffer",this.#i.onerror=()=>(0,i.SJ)("WebSocket error event",this.#a),this.#i.onopen=this.#y,this.#i.onclose=this.#v,this.#i.onmessage=this.#A,this.#l=(0,Wn.Gf)(w.cSq,(()=>this.#v("openTimeout")))}#g(){var t;null===(t=this.#l)||void 0===t||t.call(this),this.#i&&(this.#i.onerror=null,this.#i.onopen=null,this.#i.onclose=null,this.#i.onmessage=null,this.#i.close(),this.#i=void 0)}#w(t){if(!this.#i)throw new Error("No active socket");this.#i.send(JSON.stringify(t))}#y=()=>{var t;for((0,i.MD)("WebSocket opened",this.#a),null===(t=this.#l)||void 0===t||t.call(this),this.#d=0;this.#u.length;)this.#w(this.#u.shift());this.#c||(this.#c=!0,this.#m.runCallbacks())};#v=t=>{"openTimeout"===t?(0,i.SJ)("WebSocket open timeout"):(0,i.SJ)("WebSocket closed unexpectedly",t.code,t.reason,t.wasClean),this.#g(),this.#d++;const e=Math.min(500*this.#d,5e3);if(this.#l=(0,Wn.Gf)(e,(()=>this.#p())),this.#c){if("openTimeout"===t)throw new Error("Unexpected timeout event in an open socket");this.#c=!1,this.#h.runCallbacks(!0)}};#A=t=>{let{data:e}=t;this.#f.runCallbacks(e instanceof ArrayBuffer?e:JSON.parse(e))}}const rs=20*zn,os=5*zn,as={};class is{#b;#i;#k={};#E=[];#S=new Set;#D=0;#C;#I;constructor(t){this.#b=t}watchWallets(t){let{onNewActivities:e,onConnect:n,onDisconnect:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.#D++,o={id:r,addresses:t,isConnected:!1,onNewActivities:e,onConnect:n,onDisconnect:s,destroy:this.#T.bind(this,r)};return this.#E.push(o),this.#_(),o}#T(t){const e=this.#E.findIndex((e=>e.id===t));e>=0&&(this.#E.splice(e,1),this.#_())}#_=(0,Wn.nF)((()=>{var t;this.#B()?(this.#i??=this.#R(),this.#i.isConnected&&this.#N()):(null===(t=this.#i)||void 0===t||t.close(),this.#i=void 0)}),10,!1);#R(){const t=function(t){const e=new URL("testnet"===t?w.pyR:w._J8);return e.protocol="wss:",e.pathname="/api/streaming/v1/ws",Nt(e),e}(this.#b),e=new ss(t);return e.onMessage(this.#A),e.onConnect(this.#P),e.onDisconnect(this.#U),e}#A=t=>{var e;null===(e=this.#I)||void 0===e||e.call(this),"status"in t&&"subscribed"===t.status&&this.#x(t),"type"in t&&("trace_invalidated"===t.type&&(t={...t,type:"pending_actions",actions:[],address_book:{},metadata:{}}),"actions"!==t.type&&"pending_actions"!==t.type||this.#F(t))};#P=()=>{var t;null===(t=this.#i)||void 0===t||t.send({operation:"configure",include_address_book:!0,include_metadata:!0,supported_action_types:[w.eaP]}),this.#N(),this.#O()};#U=()=>{var t;this.#S.clear(),null===(t=this.#C)||void 0===t||t.call(this);for(const t of this.#E)t.isConnected&&(t.isConnected=!1,t.onDisconnect&&(0,te.A)(t.onDisconnect))};#x(t){for(const e of this.#E)t.id&&Number(t.id)<e.id||e.isConnected||(e.isConnected=!0,e.onConnect&&(0,te.A)(e.onConnect))}#F=(0,Wn.SB)((async t=>{const e="pending_actions"===t.type,n=t.trace_external_hash_norm,s=await async function(t,e,n){const s=function(t,e){const n={};for(const r of t)for(const t of r.accounts){var s;const o=(null===(s=e[t])||void 0===s?void 0:s.user_friendly)??t;n[o]??=[],n[o].push(r)}return n}(e.actions,e.address_book),r={},o=await qt();for(const[a,i]of Object.entries(s))n.has(a)&&(r[a]=dn(t,a,i,e.address_book,e.metadata,o,"pending_actions"===e.type));return r}(this.#b,t,this.#M(!0)),r=this.#W(n,Object.keys(s),e);for(const t of this.#E)if(ds(t))for(const o of t.addresses)r.has(o)&&(0,te.A)((()=>t.onNewActivities({address:o,messageHashNormalized:n,arePending:e,activities:s[o]??[]})))}));#N(){const t=String(this.#D++),e=this.#S,n=this.#M(),s=(0,S.Hl)(e,n),r=(0,S.Hl)(n,e);s.length&&this.#i.send({operation:"unsubscribe",addresses:s}),r.length&&this.#i.send({operation:"subscribe",id:t,addresses:r,types:["actions","pending_actions"]}),this.#S=n}#B(){return this.#E.some((t=>t.addresses.length))}#M(t){const e=new Set;for(const n of this.#E)if(!t||ds(n))for(const t of n.addresses)e.add(t);return e}#O(){var t;null===(t=this.#C)||void 0===t||t.call(this);const e=setInterval((()=>{var t,e;null===(t=this.#i)||void 0===t||t.send({operation:"ping"}),null===(e=this.#I)||void 0===e||e.call(this),this.#I=(0,Wn.Gf)(os,(()=>{var t;null===(t=this.#i)||void 0===t||t.reconnect()}))}),rs);this.#C=()=>clearInterval(e)}#W(t,e,n){const s=this.#k[t]??[],r=[],o=new Set;for(const t of s)o.add(t);for(const t of e)o.add(t),n&&r.push(t);return r.length?this.#k[t]=r:delete this.#k[t],o}}function cs(t){return!t.arePending||!t.activities.length}function ds(t){return t.isConnected&&!!t.onNewActivities}function ls(t,e){const n={},s=s=>{n[s]??={},n[s].cancelReport??=(0,Wn.Gf)(t,(()=>{delete n[s].cancelReport;const{toReport:t}=n[s];t&&e([t])}))};return t=>{const r=t.messageHashNormalized;var o,a;cs(t)?(null===(o=n[r])||void 0===o||null===(a=o.cancelReport)||void 0===a||a.call(o),delete n[r],e([t])):n[r]?(n[r].toReport=t,s(r)):(e([t]),s(r))}}const us={focused:zn,notFocused:3*zn},fs=3*zn,ms={focused:1.1*zn,notFocused:10*zn},hs={focused:Vn,notFocused:2*Vn};class ps{#b;#L;#q;#H=function(){let t=[];const e=new Set;function n(t){for(const n of t)void 0!==n&&e.add(n);!function(){for(const t of e){if(e.size<=100)break;e.delete(t)}}()}return{get all(){return t},update:function(s,r,o){n((0,S.JY)(s,"externalMsgHashNorm")),o&&n((0,S.JY)(o.filter(cs),"messageHashNormalized")),r?t=xn([...r]):o&&(t=function(t,e){if(!e.length)return t;const n=new Set((0,S.JY)(e,"messageHashNormalized"));return Fn(t.filter((t=>!n.has(t.externalMsgHashNorm))),xn(e.flatMap((t=>t.arePending?t.activities:[]))))}(t,o)),t=t.filter((t=>{let{externalMsgHashNorm:n}=t;return!(n&&e.has(n))}))}}}();#K;#j;#J=Mn();#z=Mn();#V=!1;#$=[];#n=!1;constructor(t,e,n,s){this.#b=t,this.#L=e,this.#q=n,this.#K=function(t){return as[t]??=new is(t),as[t]}(t).watchWallets([e],{onConnect:this.#P,onDisconnect:this.#U,onNewActivities:ls(250,this.#G)}),this.#V=this.#K.isConnected,this.#j=new ns(this.#K.isConnected,{pollOnStart:s,minPollDelay:us,pollingStartDelay:fs,pollingPeriod:ms,forcedPollingPeriod:hs,poll:this.#o})}onUpdate(t){return this.#J.addCallback(t)}onLoadingChange(t){return this.#z.addCallback(t)}destroy(){this.#n=!0,this.#K.destroy(),this.#j.destroy()}#P=()=>{this.#V=!0,this.#j.onSocketConnect()};#U=()=>{this.#V=!1,this.#j.onSocketDisconnect()};#G=t=>{if(this.#n)return;const e=t.filter((t=>t.arePending)),n=xn(t.filter((t=>!t.arePending)).flatMap((t=>t.activities))),s=this.#V?[]:n,r=this.#V?n:[];this.#$.unshift(...r),this.#Q(s,void 0,e)};#o=async()=>{try{this.#z.runCallbacks(!0);const[t,e]=await Promise.all([ws(this.#b,this.#L),this.#Y()]);if(this.#n)return;this.#Q(Fn(e,this.#$.splice(0)),t),this.#V=!1}finally{this.#n||this.#z.runCallbacks(!1)}};async#Y(){for(;!this.#n;)try{return await cn({network:this.#b,filter:{address:this.#L},walletAddress:this.#L,fromTimestamp:this.#q,limit:Gn})}catch(t){if((0,i.SJ)("loadNewConfirmedActivities",t),this.#n||!this.#V)break;await Kn(...es(us))}return[]}#Q(t,e,n){(t.length||e||null!=n&&n.length)&&(t.length&&(this.#q=t[0].timestamp),this.#H.update(t,e,n),this.#J.runCallbacks(t,this.#H.all))}}async function ws(t,e){try{return await async function(t,e){const{actions:n,address_book:s,metadata:r={}}=await Te(t,"/pendingActions",{account:e});return dn(t,e,n,s,r,await qt(),!0)}(t,e)}catch(t){return void(0,i.SJ)("loadPendingActivities",t)}}function gs(t,e,n){const{now:s,hash:r,total_fees:o,description:{compute_ph:{exit_code:a}}}=e,i=1e3*s,c=!!e.in_msg.source&&!e.out_msgs.length,d=e.in_msg.hash_norm??e.in_msg.hash,l=c?[e.in_msg]:e.out_msgs;if(!l.length)return[];const u=BigInt(o)/BigInt(l.length),f=[];return l.forEach(((e,s)=>{const{source:o,destination:l,value:m,fwd_fee:h,opcode:p,hash:g,bounced:y}=e;if(!l)return;const v=n[o].user_friendly,A=n[l].user_friendly,b=(0,D.vn)(c?o:l,!0,t),k=u+BigInt(h??0),E=(0,S.Oy)({timestamp:i,isIncoming:c,fromAddress:v,toAddress:A,amount:c?BigInt(m):-BigInt(m),slug:w.Tu9.slug,fee:k,externalMsgHashNorm:c?void 0:d,normalizedAddress:b,shouldHide:!!a||void 0,hash:r,opCode:Number(p)||void 0,msgHash:g,type:y?"bounced":void 0,status:"completed"});f.push(E)})),f}async function ys(t,e,n){let s,r;if((0,ht.iy)(e)){const r=await async function(t,e){try{const n=(0,ht.u_)(e);if(!n)return;const s=await(0,pt.GK)((0,D.N7)(t),n.zone.resolver,n.base,Jt.kJ.Wallet);if(!(s instanceof mt.Address))return;return(0,D.vn)(s,void 0,t)}catch(t){var n;if(null===(n=t.message)||void 0===n||!n.includes("exit_code"))throw t;return}}(t,e);if(!r)return"dnsNotResolved";if(s=e,e=r,!n){const n=await async function(t,e){const n=(0,S.lD)(e,Ee);return(await Promise.all(n.map((e=>Te(t,"/addressBook",{address:e}))))).reduce(((t,e)=>Object.assign(t,e)),{})}(t,[e]);e=n[e].user_friendly}}try{r=vs(e)}catch{return"invalidAddress"}const o=Ht(r);return o?{address:e,...o,name:s??o.name}:{address:e,name:s}}function vs(t,e){return(0,D.vn)(t,!0,e)}var As=n(69780),bs=n(48287).Buffer;const ks=(0,As.A)((async(t,e)=>(await Cs(t,e)).isInitialized)),Es=(0,As.A)((async(t,e)=>{const{isInitialized:n,version:s}=await Cs(t,e);return n?!s:void 0}),(t=>void 0!==t));function Ss(t,e,n){const s=Ds(e,n);return(0,D.vn)(s.address,!1,t)}function Ds(t,e){"string"==typeof t&&(t=(0,ft.aT)(t));const n=D.ss[e];if(!n)throw new Error(`Unsupported wallet contract version "${e}"`);return n.create({publicKey:bs.from(t),workchain:Jt.Zm})}async function Cs(t,e){const n="string"==typeof e?e:(0,D.vn)(e.address,void 0,t);return(await Ce(t,[n]))[n]}async function Is(t,e){const n=await(0,D.N7)(t).getAddressInfo(e),{code:s,state:r}=n,o=bs.from(await(0,ft.sc)((0,ft.Kp)(s))).toString("hex"),a=Object.values(Jt.v4).find((t=>t.hash===o)),i=s&&mt.Cell.fromBase64(s).hash().toString("hex");return{isInitialized:"active"===r,isWallet:"active"===r?(null==a?void 0:a.type)===Jt.h$.Wallet:void 0,isSwapAllowed:null==a?void 0:a.isSwapAllowed,contractInfo:a,codeHash:i}}async function Ts(t){const{network:e}=I(t),{address:n}=await j(t);return _s(e,n)}async function _s(t,e){return(await Cs(t,e)).balance}async function Bs(t,e){const{seqno:n}=await Cs(t,e);return n||0}async function Rs(t,e){const n=await Ns(t,e),s=n.filter((t=>{let{version:e}=t;return e===w.RoE}))[0];if(s.lastTxId)return s;const r=n.reduce(((t,e)=>e.balance>((null==t?void 0:t.balance)??0n)?e:t),void 0);if(r)return r;const o=(0,S.Uk)(n,(t=>{let{lastTxId:e}=t;return!!e}));if(o)return o;const a=n.find((t=>{let{version:e}=t;return"v4R2"===e}));return(await xe(t,a.address)).length>0?a:s}async function Ns(t,e){const n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jt.ov).map((n=>{const s=Ds(e,n);return{wallet:s,address:(0,D.vn)(s.address,!1,t),version:n}})),s=await Ce(t,(0,S.JY)(n,"address"));return n.map((t=>({...s[t.address]??{balance:0n,isInitialized:!1},...t})))}function Ps(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jt.ov).map((n=>{const s=Ds(e,n);return{wallet:s,address:(0,D.vn)(s.address,!1,t),version:n}}))}function Us(t){const e=Fs(t);return(0,mt.beginCell)().storeWritable((0,mt.storeStateInit)(e.init)).endCell()}function xs(t,e,n){return n=(0,D.vn)(n,!1,t),Ps(t,e).find((t=>t.address===n))}function Fs(t){const{publicKey:e,version:n}=t;if(!e)throw new Error("Public key is missing");return Ds(e,n)}function Os(){return u.generateMnemonic()}function Ms(t){return u.validateMnemonic(t)}function Ws(t){return h().sign.keyPair.fromSeed((0,ft.aT)(t))}async function Ls(t,e,n){try{const{secretKey:s}=await qs(t,e,n)||{};return s}catch(t){return void console.error(t)}}async function qs(t,e,n){try{n=n??await V(t);const s=await lt(t,e,n);if(!s)return;return E(s)?Ws(s[0]):"bip39"===n.type?Vs(s):await u.mnemonicToKeyPair(s)}catch(t){return void(0,i.SJ)("fetchKeyPair",t)}}async function Hs(t,e,n){const s=await Ls(t,e);if(!s)return;const r=h().sign.detached((0,ft.aT)(n),s);return(0,ft.My)(r)}function Ks(t,e,n){const{publicKey:s}=Vs(e);return zs(s,t,n)}async function js(t,e,n){const{publicKey:s}=await u.mnemonicToKeyPair(t);return zs(s,e,n)}function Js(t,e,n){const{publicKey:s}=Ws(t);return zs(s,e,n)}async function zs(t,e,n){let s,r;n?s=Ds(t,n):({wallet:s,version:n,lastTxId:r}=await Rs(e,t));const o=(0,D.vn)(s.address,!1,e);return{type:"ton",publicKey:(0,ft.My)(t),address:o,version:n,index:0,lastTxId:r}}function Vs(t){const e=f.kw(t.join(" ")),{key:n}=k(Jt.W2,e.toString("hex"));return h().sign.keyPair.fromSeed(n)}function $s(t,e,n){if(!e.publicKey)throw new Error("The wallet has no public key");return{type:"ton",address:Ss(t,(0,ft.aT)(e.publicKey),n),publicKey:e.publicKey,version:n,index:e.index}}async function Gs(t,e){const n=await ys(t,e,!0);if("dnsNotResolved"===n)return{error:p.Nu.DomainNotResolved};if("invalidAddress"===n)return{error:p.Nu.InvalidAddress};const s=n.address,[r,o]=await Promise.all([Cs(t,s),(0,D.q5)(t,s)]);return{title:n.name,wallet:(0,S.Oy)({type:"ton",publicKey:o?(0,ft.My)(o):void 0,address:r.address,version:(null==r?void 0:r.version)??w.RoE,index:0,isInitialized:(null==r?void 0:r.isInitialized)??!1})}}var Qs=n(41758);function Ys(t){return w.zll[t]}n(48805);const Zs=Object.fromEntries(Object.entries(w.zll).map((t=>{let[e,{nativeToken:n}]=t;return[n.slug,e]})));function Xs(t){return"stars-fee"===t.status?0n:t.amount??0n}function tr(t){return"tokens:transfer"===(null==t?void 0:t.type)||"tokens:transfer-non-standard"===(null==t?void 0:t.type)}function er(t,e){const{type:n,ton:{version:s}}=t;return"ledger"!==n||e?"W5"===s?Jt.Bm:Jt.EV:Jt.qP}const nr="/diesel",sr="/diesel";async function rr(t,e,n,s){const{address:r,init:o}=e;let a;o&&!await t.isContractDeployed(r)&&(a=o);const i=(0,mt.external)({to:r,init:a?{code:a.code,data:a.data}:void 0,body:n}),c=(0,mt.beginCell)().store((0,mt.storeMessage)(i)).endCell(),d="w5"===s,l=c.hash().toString("base64"),u=function(t){return(0,mt.beginCell)().storeUint(2,2).storeUint(0,2).storeAddress(t.info.dest).storeUint(0,4).storeBit(!1).storeBit(!0).storeRef(t.body).endCell().hash().toString("base64")}(i),f=n.hash().toString("base64"),m=c.toBoc().toString("base64");let h;if(d){const t=await function(t){return _t(`${sr}/w5/sendBoc`,{boc:t,isAddition:!0},{shouldRetry:!0})}(m);h=t.paymentLink}else if("diesel"===s){const t=await function(t){return _t(`${nr}/sendBoc`,{boc:t,isAddition:!0},{shouldRetry:!0})}(m);h=t.paymentLink}else await t.sendFile(m);return{boc:m,msgHash:d?f:l,msgHashNormalized:u,paymentLink:h}}var or=n(8387),ar=n(48287).Buffer;let ir;function cr(){if(!ir){let t;ir=new Uint32Array(256);for(let e=0;e<256;e++){t=e;for(let e=0;e<8;e++)t=1&t?3988292384^t>>>1:t>>>1;ir[e]=t}}return ir}var dr=n(48287).Buffer;async function lr(t,e,n,s,r){const o=t instanceof mt.Address?t:mt.Address.parse(t),a=await("cell"===s.type?function(t,e,n,s){const r=(0,mt.beginCell)().storeUint(1968607266,32).storeUint((a=s.schema,function(t){const e=cr();let n=-1;for(let s=0;s<t.length;s++)n=n>>>8^e[255&(n^t[s])];return(-1^n)>>>0}(ar.from(a))),32).storeUint(e,64).storeAddress(t).storeStringRefTail((0,pt.Xy)(n)).storeRef(mt.Cell.fromBase64(s.cell)).endCell(),o=r.hash();var a;return new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}(o,e,n,s):async function(t,e,n,s){const r=dr.concat([dr.from([255,255]),dr.from("ton-connect/sign-data/"),ur(t),fr(dr.from(n),!0),mr(e,!0),dr.from("text"===s.type?"txt":"bin"),fr("text"===s.type?dr.from(s.text,"utf8"):dr.from(s.bytes,"base64"),!0)]);return new Uint8Array(await(0,ft.sc)(r))}(o,e,n,s));return h().sign.detached(a,r)}function ur(t){const e=dr.allocUnsafe(4+t.hash.length);return e.writeInt32BE(t.workChain),t.hash.copy(e,4),e}function fr(t,e){const n=dr.allocUnsafe(4+t.length);return e?n.writeInt32BE(t.length):n.writeInt32LE(t.length),t.copy(n,4),n}function mr(t,e){const n=dr.allocUnsafe(8),s=BigInt(t);return e?n.writeBigInt64BE(s):n.writeBigInt64LE(s),n}var hr=n(87963),pr=n.n(hr),wr=n(52598),gr=n(48287).Buffer;function yr(t){if(t.length<48)throw new Error;const e=t.slice(0,32),n=t.slice(32,48);return new(pr().ModeOfOperation.cbc)(e,n)}function vr(t,e){return async function(t,e){const n={name:"HMAC",hash:"SHA-512"},s=await crypto.subtle.importKey("raw",t,n,!1,["sign"]),r=await crypto.subtle.sign(n,s,e),o=new Uint8Array(r);if(64!==o.length)throw new Error;return o}(t,e)}async function Ar(t,e,n,s,r){if(!t||!t.length)throw new Error("empty comment");64===s.length&&(s=s.slice(0,32));const o=(new TextEncoder).encode(t),a=(new TextEncoder).encode((0,D.vn)(r,!0)),i=await async function(t,e,n,s,r){const o=await(0,wr.getSharedSecret)(s,n),a=await async function(t,e,n){const s=function(t){const e=(31+t&-16)-t,n=crypto.getRandomValues(new Uint8Array(e));if(n[0]=e,(e+t)%16!=0)throw new Error;return n}(t.length),r=new Uint8Array(s.length+t.length);return r.set(s,0),r.set(t,s.length),async function(t,e,n){if(t.length%16!=0)throw new Error;const s=(await vr(n,t)).slice(0,16),r=new Uint8Array(t.length+16);r.set(s,0);const o=yr(await vr(e,s)).encrypt(t);return r.set(o,16),r}(r,e,n)}(t,o,r),i=new Uint8Array(e.length+a.length);for(let t=0;t<e.length;t++)i[t]=n[t]^e[t];return i.set(a,e.length),i}(o,e,n,s,a),c=new Uint8Array(i.length+4),d=gr.alloc(4);return d.writeUInt32BE(Jt.$G.Encrypted),c.set(d,0),c.set(i,4),c}async function br(t,e,n,s){64===n.length&&(n=n.slice(0,32));const r=(new TextEncoder).encode((0,D.vn)(s,!0)),o=await async function(t,e,n,s){if(t.length<e.length)throw new Error("Failed to decrypt: data is too small");const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[n]^e[n];const o=await(0,wr.getSharedSecret)(n,r);return await async function(t,e,n){if(t.length<16)throw new Error("Failed to decrypt: data is too small");if(t.length%16!=0)throw new Error("Failed to decrypt: data size is not divisible by 16");const s=t.slice(0,16),r=t.slice(16),o=await vr(e,s),a=await async function(t,e,n,s){const r=yr(t).decrypt(n),o=(await vr(s,r)).slice(0,16);if(e.join(",")!==o.join(","))throw new Error("Failed to decrypt: hash mismatch");const a=r[0];if(a>r.length||a<16)throw new Error("Failed to decrypt: invalid prefix size");return r.slice(a)}(o,s,r,n);return a}(t.slice(e.length),o,s)}(t,e,n,r);return(new TextDecoder).decode(o)}var kr=n(48287).Buffer;function Er(t,e,n,s,r){if(s||"view"===e.type)return new Cr(e.ton);if("ledger"===e.type)return new Ir(I(t).network,e.ton,r);if(void 0===n)throw new Error("Password not provided");return new Dr(t,e,n)}class Sr{constructor(t,e){this.walletAddress=t,this.walletVersion=e}async signTonProof(t){const e=await this.getKeyPair();if("error"in e)return e;const n=await async function(t,e,n){const{timestamp:s,domain:r,payload:o}=n,a=t instanceof mt.Address?t:mt.Address.parse(t),i=dr.concat([dr.from("ton-proof-item-v2/"),ur(a),fr(dr.from(r),!1),mr(s,!1),dr.from(o)]),c=dr.concat([dr.from([255,255]),dr.from("ton-connect"),dr.from(await(0,ft.sc)(i))]);return h().sign.detached(new Uint8Array(await(0,ft.sc)(c)),e)}(this.walletAddress,e.secretKey,t);return kr.from(n)}async signTransactions(t){const e=await this.getKeyPair();return"error"in e?e:function(t,e,n){const s=kr.from(n.secretKey),r=Ds(n.publicKey,e);return t.map((t=>{if(r instanceof or.WalletContractV5R1)return r.createTransfer({...t,messages:[...t.messages].reverse(),secretKey:s});const{authType:n="external"}=t;if("external"!==n)throw new Error(`${e} wallet doesn't support authType "${n}"`);return r.createTransfer({...t,secretKey:s})}))}(t,this.walletVersion,e)}async signData(t,e,n){const s=await this.getKeyPair();if("error"in s)return s;const r=await lr(this.walletAddress,t,e,n,s.secretKey);return kr.from(r)}async encryptComment(t,e){const n=await this.getKeyPair();if("error"in n)return n;const s=await Ar(t,n.publicKey,e,n.secretKey,this.walletAddress);return kr.from(s.buffer,s.byteOffset,s.byteLength)}async decryptComment(t,e){const n=await this.getKeyPair();return"error"in n?n:br(t,n.publicKey,n.secretKey,e)}}class Dr extends Sr{isMock=!1;constructor(t,e,n){const{address:s,version:r}=e.ton;super(s,r),this.accountId=t,this.account=e,this.password=n}getKeyPair=(0,C.A)((async()=>await qs(this.accountId,this.password,this.account)||{error:p.QD.InvalidPassword}))}class Cr extends Sr{isMock=!0;constructor(t){let{address:e,version:n,publicKey:s}=t;super(e,n),this.publicKeyHex=s}getKeyPair(){const{publicKeyHex:t}=this;return{publicKey:t?(0,ft.aT)(t):kr.alloc(64),secretKey:kr.alloc(64)}}}class Ir{isMock=!1;constructor(t,e,n){this.network=t,this.wallet=e,this.subwalletId=n}async signTonProof(t){const{signTonProofWithLedger:e}=await Promise.all([n.e(909),n.e(76)]).then(n.bind(n,38861));return e(this.network,this.wallet,t)}async signTransactions(t){const{signTonTransactionsWithLedger:e}=await Promise.all([n.e(909),n.e(76)]).then(n.bind(n,38861));return e(this.network,this.wallet,t,this.subwalletId)}signData(){throw new Error("Ledger does not support SignData")}encryptComment(){throw new Error("Ledger does not support comment encryption")}decryptComment(){throw new Error("Ledger does not support comment decryption")}}const Tr={};function _r(t,e,n){const s=`${t} ${e}`,r=new Ct.A,o=[],a=t=>{o.push(t().catch(Jn.H))};return Tr[s]??=(0,Wn.JL)(1),Tr[s].run((async()=>{try{r.resolve(await n(a))}catch(t){r.reject(t)}await Promise.all(o)})),r.promise}var Br=n(39989);async function Rr(t,e,n,s){const{trace:r,addressBook:o}=await async function(t){const{network:e,msgHashNormalized:n,isActionPending:s}=t,r=await Te(e,s?"/pendingTraces":"/traces",{[s?"ext_msg_hash":"msg_hash"]:n,include_actions:!0});return{trace:r.traces[0],addressBook:r.address_book,metadata:r.metadata}}({network:t,msgHashNormalized:n,isActionPending:s});return r&&Nr({network:t,walletAddress:e,actions:r.actions,traceDetail:r.trace,addressBook:o,transactions:r.transactions})}function Nr(t){const{network:e,walletAddress:n,actions:s,traceDetail:r,addressBook:o,transactions:a}=t,i=0===r.children.length?function(t,e){const n=t.tx_hash,s=e[n];return[{hashes:new Set([n]),sent:0n,received:0n,networkFee:BigInt(s.total_fees),isSuccess:!1}]}(r,a):function(t,e,n,s,r){const o=Object.values(r).map((e=>gs(t,e,s))).flat(),a=(0,S.$z)(o,"hash"),i=[];let c=!1;return function t(n,s){const r=n.tx_hash,o=a[r]||[];if(c||(c=o.some((t=>{let{fromAddress:n,isIncoming:s}=t;return n===e&&!s})),c))for(const[a,c]of o.entries()){const{fromAddress:o,toAddress:l,amount:u,isIncoming:f,fee:m,msgHash:h,type:p}=c,w=s??a;w in i?i[w].hashes.add(r):i.push({hashes:new Set,sent:0n,received:0n,networkFee:0n,isSuccess:!0}),o!==e||f?l===e&&f&&"bounced"!==p&&(i[w].received+=(0,d.wg)(u)):(i[w].sent+=(0,d.wg)(u),i[w].networkFee=m);const g=n.children.find((t=>{let{in_msg_hash:e}=t;return e===h}));g&&t(g,w)}else n.children.forEach(t)}(n),i}(e,n,r,o,a);return{actions:s,traceDetail:r,addressBook:o,byTransactionIndex:i,totalSent:i.reduce(((t,e)=>{let{sent:n}=e;return t+n}),0n),totalReceived:i.reduce(((t,e)=>{let{received:n}=e;return t+n}),0n),totalNetworkFee:i.reduce(((t,e)=>{let{networkFee:n}=e;return t+n}),0n)}}const Pr=128,Ur=5,xr=zn,Fr=(0,As.A)((async(t,e)=>{const n=await async function(t){const{network:e,address:n,limit:s,toTimestamp:r,fromTimestamp:o,shouldIncludeFrom:a,shouldIncludeTo:i}=t,c=await Te(e,"/transactions",{account:n,limit:s,start_utime:o&&Zt(o)+(a?0:1),end_utime:r&&Zt(r)-(i?0:1),sort:"desc"}),{transactions:d,address_book:l}=c;return d.length?d.map((t=>gs(e,t,l))).flat():[]}({network:t,address:e,limit:1});return Boolean(n.length)}));async function Or(t,e,n,s,r,o){const{network:a}=I(t),{address:i}=await j(t);let c;if(e){let t=i;e!==w.Tu9.slug&&(await he.promise,t=await(0,D.jq)(a,i,ve(e).tokenAddress)),c=await cn({network:a,filter:{address:t},walletAddress:i,limit:r??Pr,fromTimestamp:s,toTimestamp:n,shouldIncludeFrom:o}),c=c.filter((t=>Gt(t).includes(e)))}else c=await cn({network:a,filter:{address:i},walletAddress:i,limit:r??Pr,fromTimestamp:s,toTimestamp:n,shouldIncludeFrom:o});return xn(c)}async function Mr(t,e){const{network:n}=I(t),{address:s}=await j(t);let r;for(let t=0;t<Ur&&!r;t++){t>0&&await(0,Wn.v7)(xr);const o=await Rr(n,s,e.externalMsgHashNorm,Qt(e));o&&(r=Wr(e,o))}return r||(0,i.SJ)("Trace unavailable for activity",e.id),r}function Wr(t,e){const{actionId:n}=Nn(t.id),{actions:s,byTransactionIndex:r}=e,o=s.find((t=>{let{action_id:e}=t;return e===n}));if(!o)return;const a=new Set(o.transactions),c=r.find((t=>(0,S.E$)(t.hashes,a).size));let d;return d="swap"===t.kind?function(t){const{action:e,tracePart:n,parsedTrace:{actions:s}}=t;let{activity:r}=t;const{details:o}=e;let a=n.sent,i=n.received;n.isSuccess&&(o.asset_in?o.asset_out||(i-=BigInt(o.dex_outgoing_transfer.amount)):a-=BigInt(o.dex_incoming_transfer.amount));const c=n.networkFee+a-i;let d;if(r={...r,networkFee:(0,Xt.nI)(c)},o.asset_in){const t=s.find((t=>"jetton_transfer"===t.type&&t.details.forward_payload===Jt.SQ));null!=t&&t.success&&(d=BigInt(t.details.amount))}else{const t=s.find((t=>"call_contract"===t.type&&Number(t.details.opcode)===Jt.$G.OurFee));null!=t&&t.success&&(d=BigInt(t.details.value))}if(d){const t=ve(r.from);r.ourFee=(0,Xt.nI)(d,null==t?void 0:t.decimals)}return delete r.shouldLoadDetails,{activity:r,sentForFee:a,excess:i}}({parsedTrace:e,activity:t,action:o,tracePart:c}):function(t){const{action:e,tracePart:n,parsedTrace:{addressBook:s,totalSent:r,totalReceived:o,totalNetworkFee:a}}=t;let{activity:i}=t,{networkFee:c,sent:d,received:l}=n;switch(e.type){case"ton_transfer":case"call_contract":d-=BigInt(e.details.value);break;case"nft_transfer":e.details.is_purchase&&(d-=BigInt(e.details.price));break;case"stake_deposit":d-=BigInt(e.details.amount);break;case"stake_withdrawal":l-=BigInt(e.details.amount);break;case"dex_deposit_liquidity":{const t=BigInt(Dn(e,{addressBook:s,network:"mainnet",walletAddress:"",metadata:{},nftSuperCollectionsByCollectionAddress:{}}).length);c=a/t,d=r/t,l=o/t,e.details.asset_1?e.details.asset_2||(d-=BigInt(e.details.amount_2??0n)/t):d-=BigInt(e.details.amount_1??0n)/t;break}case"dex_withdraw_liquidity":e.details.asset_1?e.details.asset_2||(l-=BigInt(e.details.amount_2)):l-=BigInt(e.details.amount_1),d/=2n,l/=2n}n.isSuccess||(d=0n,l=0n);const u=c+d-l;return i={...i,fee:u},delete i.shouldLoadDetails,{activity:i,sentForFee:d,excess:l}}({parsedTrace:e,activity:t,action:o,tracePart:c}),(0,i.MD)("Calculation of fee for action",{actionId:o.action_id,externalMsgHashNorm:t.externalMsgHashNorm,activityStatus:t.status,networkFee:(0,Xt.nI)(c.networkFee),realFee:(0,Xt.nI)(Lr(d.activity)),sentForFee:(0,Xt.nI)(d.sentForFee),excess:(0,Xt.nI)(d.excess),details:o.details}),d}function Lr(t){return"swap"===t.kind?(0,Xt.UH)(t.networkFee,w.Tu9.decimals):t.fee}async function qr(t,e,n,s){const r=function(t,e,n){const s=(0,mt.external)({to:t.address,init:n?void 0:{code:t.init.code,data:t.init.data},body:e});return(0,mt.beginCell)().store((0,mt.storeMessage)(s)).endCell().toBoc().toString("base64")}(e,n,s),o=await async function(t,e){const n="testnet"===t?w.pyR:w._J8;return(await(0,It.J5)(`${n}/api/emulate/v1/emulateTrace`,{method:"POST",headers:{..._e(t),"Content-Type":"application/json"},body:JSON.stringify({boc:e,ignore_chksig:!0,include_code_data:!1,with_actions:!0,include_address_book:!0,include_metadata:!0})})).json()}(t,r);return function(t,e,n,s){const r=Nr({network:t,walletAddress:e,actions:n.actions,traceDetail:n.trace,addressBook:n.address_book,transactions:n.transactions}),o=dn(t,e,n.actions,n.address_book,n.metadata,s),a=[];let c=0n,d=0n;for(let t of o)if(!(t.shouldHide||"transaction"===t.kind&&t.fromAddress!==e&&t.toAddress!==e)){if(t.shouldLoadDetails){const e=Wr(t,r);e?(t=e.activity,d+=e.excess):(0,i.SJ)("Unparsable trace for emulated activity",t.id)}a.push(t),c+=Lr(t)}return d&&function(t,e,n){const s=e.findIndex((t=>"transaction"===t.kind&&"excess"===t.type));if(-1!==s){const t=e.splice(s,1)[0];e.push({...t,amount:t.amount+n})}else e.push({id:Qn,timestamp:e[e.length-1].timestamp,kind:"transaction",amount:n,slug:w.Tu9.slug,normalizedAddress:w.pV9,fromAddress:w.pV9,toAddress:t,isIncoming:!0,fee:0n,type:"excess",status:"completed"})}(e,a,d),{networkFee:r.totalNetworkFee,received:r.totalReceived,byTransactionIndex:r.byTransactionIndex,activities:a,realFee:c}}(t,(0,D.vn)(e.address,!1,t),o,await qt())}var Hr=n(48287).Buffer;async function Kr(t,e,n,s){const{toAddress:r,payload:o}=s,a=Ae(n);if("string"!=typeof o||null==a||!a.customPayloadApiUrl)return s;const i=await He(t,r,o);if("tokens:transfer"!==i.type)throw new Error("Invalid payload");const{mintlessTokenBalance:c,isMintlessClaimed:d,stateInit:l,customPayload:u}=await Vr({network:t,token:a,fromAddress:e,tokenWalletAddress:s.toAddress});if(!c||d)return s;const f=(0,D.Dg)({toAddress:i.destination,queryId:i.queryId,tokenAmount:i.amount,forwardAmount:i.forwardAmount,forwardPayload:mt.Cell.fromBase64(i.forwardPayload),responseAddress:i.responseDestination,customPayload:mt.Cell.fromBase64(u)});return{...s,stateInit:l?mt.Cell.fromBase64(l):void 0,payload:f,isBase64Payload:!1}}async function jr(t){const{network:e,tokenAddress:n,fromAddress:s,toAddress:r,amount:o,shouldSkipMintless:a,forwardAmount:i=Jt.tF}=t;let{payload:c}=t;const d=await(0,D.jq)(e,s,n),l=Ae(n),{isTokenWalletDeployed:u=!!await Es(e,d),isMintlessClaimed:f,mintlessTokenBalance:m,customPayload:h,stateInit:p}=await Vr({network:e,fromAddress:s,token:l,tokenWalletAddress:d,shouldSkipMintless:a});if(u&&n!==await(0,D.uA)(e,d))throw new Error("Invalid contract");c=(0,D.Dg)({tokenAmount:o,toAddress:r,forwardAmount:i,forwardPayload:c,responseAddress:s,customPayload:h?mt.Cell.fromBase64(h):void 0});let{amount:w,realAmount:g}=Qr(l,Boolean(m)&&!f);return i>Jt.tF&&(w+=i),{amount:w,realAmount:g,toAddress:d,payload:c,stateInit:p?mt.Cell.fromBase64(p):void 0,mintlessTokenBalance:m,isTokenWalletDeployed:u}}async function Jr(t,e,n){const s=await(0,D.jq)(t,e,n),r=Ae(n),{isTokenWalletDeployed:o=!!await Es(t,s),mintlessTokenBalance:a}=await Vr({network:t,fromAddress:e,token:r,tokenWalletAddress:s});return zr(t,s,o,a)}async function zr(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0n,r=0n;return n&&(r+=await(0,D.kb)(t,e)),s&&(r+=s),r}async function Vr(t){const{network:e,fromAddress:n,token:s,tokenWalletAddress:r,shouldSkipMintless:o}=t;let a,i,c,d,l;if(s.customPayloadApiUrl&&!o&&(a=!!await Es(e,r),d=a&&await async function(t,e){return(await(0,D.N7)(t).runMethod(mt.Address.parse(e),"is_claimed")).stack.readBoolean()}(e,r),!d)){const t=await async function(t,e){const n=(0,D.m$)(e);return await(0,It.x3)(`${t}/wallet/${n}`).catch((()=>{}))}(s.customPayloadApiUrl,n),e=!t||Date.now()>new Date(1e3*Number(t.compressed_info.expired_at)).getTime();t&&!e&&(i=t.custom_payload,l=BigInt(t.compressed_info.amount),a||(c=t.state_init))}return{isTokenWalletDeployed:a,isMintlessClaimed:d,mintlessTokenBalance:l,customPayload:i,stateInit:c}}async function $r(t,e){return Gr(e,await async function(t,e){const{content:n}=await(0,D.Ow)(t,e);let s;const r=n.asSlice();if(r.loadUint(8)===Me){const t=Je(r).toString("utf-8");s=await qe(t)}else s=await async function(t){const e=t.loadDict(ae.Dictionary.Keys.Buffer(32),We),n={};for(const[t,r]of Object.entries(Le)){var s;const o=Oe.from(await(0,ft.sc)(Oe.from(t,"ascii"))),a=null===(s=e.get(o))||void 0===s?void 0:s.toString(r);a&&(n[t]=a)}return n}(r),s.uri&&(s={...await qe(s.uri),...s});return s}(t,e))}function Gr(t,e){const{name:n,symbol:s,image:r,image_data:o,decimals:a,custom_payload_api_uri:i}=e;return{slug:ke("ton",t),name:n,symbol:s,decimals:void 0===a?Jt.fI:Number(a),chain:"ton",tokenAddress:t,image:r&&(0,It.fU)(r)||o&&(c=o,(0,ft.QM)(c).includes("<svg")?`data:image/svg+xml;base64,${c}`:`data:image/png;base64,${c}`)||void 0,customPayloadApiUrl:i};var c}function Qr(t,e){let n=0n,s=0n;return t.slug===w.rUK?(n+=Jt.GV,s+=Jt.F0):t.isTiny?(n+=Jt.GV,s+=Jt.xB):(n+=Jt.LV,s+=Jt.qd),e&&(n+=Jt.CH,s+=Jt.CH),{amount:n,realAmount:s}}async function Yr(t,e,n){const s=await async function(t,e){return(await xe(t,e)).map((e=>function(t,e){if(e.jetton)try{const{balance:n,jetton:s,wallet_address:r}=e,o=Gr((0,D.vn)(s.address,!0,t),s);return{slug:o.slug,balance:BigInt(n),token:o,jettonWallet:(0,D.vn)(r.address,void 0,t)}}catch(t){return void(0,i.SJ)("parseTokenBalance",t)}}(t,e))).filter(Boolean)}(t,e),r=s.map((t=>{let{token:e}=t;return{...e,price:0,priceUsd:0,percentChange24h:0}}));return await we(r,n),await async function(t,e,n){await he.promise;const s=ye().bySlug,r=e.reduce(((t,e)=>{const n=s[e];return n&&"ton"===n.chain&&!n.codeHash&&["LP","STAKED","POOL"].some((t=>n.symbol.toUpperCase().includes(t)))&&t.push(n),t}),[]);if(!r.length)return;const o=(0,S.dU)(r,"tokenAddress");try{const e=await async function(t,e){const{accounts:n}=await Te(t,"/accountStates",{address:e.join(",")}),s=Object.fromEntries(e.map((t=>[(0,D.m$)(t),t])));for(const t of n)t.address=s[t.address.toLowerCase()];return(0,S.dU)(n,"address")}(t,r.map((t=>t.tokenAddress)));for(const t of Object.keys(e))o[t]&&(o[t].codeHash=Hr.from(e[t].code_hash,"base64").toString("hex"));await we(Object.values(o).filter((t=>t.codeHash)),n)}catch(t){(0,i.SJ)("Failed to fetch contract code hashes for tokens",t)}}(t,r.map((t=>t.slug)),n),Object.fromEntries(s.map((t=>{let{slug:e,balance:n}=t;return[e,n]})))}var Zr=n(48287).Buffer;const Xr=Vn,to=zn,eo=100000000n,no=900,so={status:"not-available",nativeAmount:0n,remainingFee:0n,realFee:0n};async function ro(t){const{accountId:e,amount:n=0n,tokenAddress:s,shouldEncrypt:r,isBase64Data:o,stateInit:a,forwardAmount:i,allowGasless:c}=t;let{toAddress:d,data:l}=t;const{network:u}=I(e);let f={};try{if(f=await oo(u,d),"error"in f)return f;d=f.resolvedAddress;const{isInitialized:t}=await Is(u,d);let h;if(a)try{h=mt.Cell.fromBase64(a)}catch{return{...f,error:p.KL.InvalidStateInit}}if(f.isBounceable&&!t&&!h)return f.isToAddressNew=!await Fr(u,d),{...f,error:p.KL.InactiveContract};if(f.resolvedAddress=d,n<0n)return{...f,error:p.KL.InvalidAmount};const w=await $(e),g=Fs(w.ton);if("string"==typeof l&&o&&(l=(0,ft.Kp)(l)),l&&"string"==typeof l&&r&&!await(0,D.q5)(u,d))return{...f,error:p.KL.WalletNotInitialized};const{address:y,isInitialized:v}=w.ton;let A;l&&"string"==typeof l&&!o&&(l=(0,D.km)(l));const{seqno:b,balance:k}=await Cs(u,g);let E,S,C;if(s){const t=await jr({network:u,tokenAddress:s,fromAddress:y,toAddress:d,amount:n,payload:l,forwardAmount:i});({amount:A,toAddress:d,payload:l}=t);const{realAmount:e,isTokenWalletDeployed:r,mintlessTokenBalance:o}=t;S=A,C=e;const a=d;E=await zr(u,a,r,o)}else E=k,A=n,S=0n,C=0n,l instanceof Uint8Array&&(l=r?(0,D.mo)(l):(0,D.DN)(l));const I=!s&&k===n,T=Er(e,w,void 0,!0),_=await ho({account:w,messages:[{toAddress:d,amount:A,payload:l,stateInit:h,hints:{tokenAddress:s}}],seqno:b,signer:T,doPayFeeFromAmount:I});if("error"in _)return{...f,error:_.error};const{networkFee:B}=ko(await go(u,g,_.transaction,v));let R;if(S+=B,C+=B,f.fee=S,f.realFee=C,f.diesel=so,s){const t=k>=S;c&&(f.diesel=await bo({accountId:e,tokenAddress:s,canTransferGasfully:t,toncoinBalance:k,tokenBalance:E})),R="not-available"!==(m=f.diesel).status&&void 0!==m.amount?n+Xs(f.diesel)<=E:t&&n<=E}else R=k>=S+(I?0n:n);return R?f:{...f,error:p.KL.InsufficientBalance}}catch(t){return{...(0,Br.QS)(t),...f}}var m}async function oo(t,e){const n={},s=await ys(t,e);if("dnsNotResolved"===s)return{...n,error:p.KL.DomainNotResolved};if("invalidAddress"===s)return{...n,error:p.KL.InvalidToAddress};n.addressName=s.name,n.resolvedAddress=s.address,n.isMemoRequired=s.isMemoRequired,n.isScam=s.isScam,e=s.address;const{isUserFriendly:r,isTestOnly:o,isBounceable:a}=(0,D.or)(e);n.isBounceable=a;const i=!/[+=/]/.test(e);return!r||!i||"mainnet"===t&&o?{...n,error:p.KL.InvalidAddressFormat}:n}async function ao(t){const{accountId:e,password:n,amount:s,tokenAddress:r,shouldEncrypt:o,isBase64Data:a,forwardAmount:c=Jt.tF,noFeeCheck:d}=t;let{stateInit:l}=t,{toAddress:u,data:f}=t;const{network:m}=I(e);try{const t=await $(e),{address:i,isInitialized:h}=t.ton,w=Fs(t.ton),g=Er(e,t,n);let y,v;if("string"==typeof f){const t=await co({network:m,toAddress:u,data:f,signer:g,shouldEncrypt:o,isBase64Data:a});if("error"in t)return t;({payload:f,encryptedComment:y}=t)}return r?({amount:v,toAddress:u,payload:f,stateInit:l}=await jr({network:m,tokenAddress:r,fromAddress:i,toAddress:u,amount:s,payload:f,forwardAmount:c})):(v=s,f instanceof Uint8Array&&(f=o?(0,D.mo)(f):(0,D.DN)(f))),await _r(m,i,(async e=>{const{seqno:n,balance:o}=await Cs(m,w),a=!r&&o===s,c=await ho({account:t,messages:[{toAddress:u,amount:v,payload:f,stateInit:l,hints:{tokenAddress:r}}],seqno:n,signer:g,doPayFeeFromAmount:a});if("error"in c)return c;const{transaction:A}=c;if(!d){const{networkFee:t}=await go(m,w,A,h);if(!(a?o>t:o>=v+t))return{error:p.jf.InsufficientBalance}}const b=(0,D.N7)(m),{msgHash:k,boc:E,msgHashNormalized:S}=await rr(b,w,A);return e((()=>wo(m,i,E,n))),{amount:s,seqno:n,encryptedComment:y,toAddress:u,msgHash:k,msgHashNormalized:S,toncoinAmount:v}}))}catch(t){return(0,i.SJ)("submitTransfer",t),{error:lo(t)}}}async function io(t){try{const{toAddress:e,amount:n,accountId:s,password:r,tokenAddress:o,shouldEncrypt:a,dieselAmount:i,isGaslessWithStars:c}=t;let{data:d}=t;const{network:l}=I(s),u=await $(s),{address:f,version:m}=u.ton;let h;if("string"==typeof d){const t=Er(s,u,r),n=await co({network:l,toAddress:e,data:d,signer:t,shouldEncrypt:a});if("error"in n)return n;({payload:d,encryptedComment:h}=n)}const p=[await jr({network:l,tokenAddress:o,fromAddress:f,toAddress:e,amount:n,payload:d})];return c||p.push(await jr({network:l,tokenAddress:o,fromAddress:f,toAddress:w.InW,amount:i,shouldSkipMintless:!0,payload:(0,D.Rc)()})),{...await fo({accountId:s,password:r,messages:p,isGasless:!0}),encryptedComment:h,withW5Gasless:"W5"===m}}catch(t){return(0,i.SJ)("submitTransferWithDiesel",t),{error:lo(t)}}}async function co(t){let e,n,{network:s,toAddress:r,data:o,shouldEncrypt:a,signer:i,isBase64Data:c}=t;if(o)if(c)e=(0,D.Pe)(o);else if(a){const t=await(0,D.q5)(s,r),a=await i.encryptComment(o,t);if("error"in a)return a;e=a,n=a.subarray(4).toString("base64")}else e=(0,D.km)(o);else e=void 0;return{payload:e,encryptedComment:n}}function lo(t){if(t instanceof Br.K$){if((0,D.EV)(t.message))return p.jf.IncorrectDeviceTime;if((0,D.ZN)(t.message))return p.jf.ConcurrentTransaction;if(400===t.statusCode)return t.message;if(t.displayError)return t.displayError}return p.jf.UnsuccesfulTransfer}async function uo(t,e,n,s){let r=0n;const{network:o}=I(t),a=await $(t);try{for(const{toAddress:t,amount:n}of e){if(n<0n)return{error:p.KL.InvalidAmount};const e="mainnet"===o,{isValid:s,isTestOnly:a}=(0,D.or)(t);if(!s||e&&a)return{error:p.KL.InvalidToAddress};r+=n}const{hasInsufficientTokenBalance:c,parsedPayloads:d}=await async function(t,e,n){const s=await Promise.all(n.map((async e=>{let{payload:n,toAddress:s}=e;if(!n)return{tokenResult:void 0,parsedPayload:void 0};try{const e=Eo({payload:n,isBase64Payload:!0}).toBoc().toString("base64"),r=await He(t,s,e);return"tokens:transfer"===(null==r?void 0:r.type)?{tokenResult:{tokenAddress:r.tokenAddress,amount:r.amount},parsedPayload:r}:{tokenResult:void 0,parsedPayload:r}}catch(t){(0,i.SJ)("isTokenBalanceInsufficient","Error parsing payload",t)}return{tokenResult:void 0,parsedPayload:void 0}}))),r={},o=s.map((t=>null==t?void 0:t.parsedPayload));let a=!1;for(const t of s)if(null!=t&&t.tokenResult){const{tokenAddress:e,amount:n}=t.tokenResult;if(!e){a=!0;continue}r[e]||(r[e]=0n),r[e]+=n}if(a)return{hasInsufficientTokenBalance:!0,parsedPayloads:o};const c=Object.keys(r);if(0===c.length)return{hasInsufficientTokenBalance:!1,parsedPayloads:o};const d=await Promise.all(c.map((n=>n!==w.oWZ?Jr(t,e,n):0n)));for(let t=0;t<c.length;t++){const e=c[t],n=r[e],s=d[t];if(e!==w.oWZ&&s<n)return{hasInsufficientTokenBalance:!0,parsedPayloads:o}}return{hasInsufficientTokenBalance:!1,parsedPayloads:o}}(o,a.ton.address,e),l=Fs(a.ton),{seqno:u,balance:f}=await Cs(o,l),m=Er(t,a,void 0,!0),h=await ho({account:a,messages:e,seqno:u,signer:m,doOverrideLedgerLimit:s});if("error"in h)return h;const g={emulation:ko(await go(o,l,h.transaction,a.ton.isInitialized)),parsedPayloads:d},y=!n&&f<r+g.emulation.networkFee;return c||y?{...g,error:p.KL.InsufficientBalance}:g}catch(t){return(0,Br.QS)(t)}}async function fo(t){let{accountId:e,password:n,messages:s,expireAt:r,isGasless:o}=t;const{network:a}=I(e),c=await $(e),{address:d,isInitialized:l,version:u}=c.ton;try{const t=Fs(c.ton);let i=0n;return s.forEach((t=>{i+=BigInt(t.amount)})),await _r(a,d,(async f=>{const{seqno:m,balance:h}=await Cs(a,t),w=o?"W5"===u?"w5":"diesel":void 0,g="w5"===w,y=Er(e,c,n),v=await ho({account:c,messages:s,expireAt:g?Math.round(Date.now()/1e3)+no:r,seqno:m,signer:y,shouldBeInternal:g});if("error"in v)return v;const{transaction:A}=v;if(!o){const{networkFee:e}=await go(a,t,A,l);if(h<i+e)return{error:p.jf.InsufficientBalance}}const b=(0,D.N7)(a),{msgHash:k,boc:E,paymentLink:C,msgHashNormalized:I}=await rr(b,t,A,w);o||f((()=>wo(a,d,E,m)));const T=s.map((t=>"string"!=typeof t.payload&&void 0!==t.payload?(0,S.cJ)(t,["payload"]):t));return{seqno:m,amount:i.toString(),messages:T,boc:E,msgHash:k,msgHashNormalized:I,paymentLink:C,withW5Gasless:g}}))}catch(t){return(0,i.SJ)("submitMultiTransfer",t),{error:lo(t)}}}async function mo(t,e,n,s,r){const o=await $(t);await _r(I(t).network,o.ton.address,(()=>{}));const a=await Bs(I(t).network,r??o.ton.address),i=Er(t,o,n,!1,r?Jt.Fx:void 0),c=await po({account:o,expireAt:s,messages:e,seqno:a,signer:i});return"error"in c?c:c.map((t=>{let{seqno:e,transaction:n}=t;return{seqno:e,base64:n.toBoc().toString("base64")}}))}async function ho(t){const e=await po({...t,allowOnlyOneTransaction:!0});return"error"in e?e:e[0]}async function po(t){let{account:e,messages:n,doPayFeeFromAmount:s,seqno:r,signer:o,expireAt:a=Math.round(Date.now()/1e3)+Jt.kF,shouldBeInternal:c,allowOnlyOneTransaction:d,doOverrideLedgerLimit:l}=t;const u=er(e,l),f=(0,S.lD)(n,u);if(d&&1!==f.length)throw new Error(0===f.length?"No messages to sign":`Too many messages for 1 transaction (${n.length} messages given)`);const m=f.map(((t,e)=>(o.isMock||(0,i.MD)("Signing transaction",{seqno:r,messages:t.map((t=>(0,S.Up)(t,["toAddress","amount"])))}),function(t){const{messages:e,seqno:n,doPayFeeFromAmount:s,expireAt:r,shouldBeInternal:o}=t;return{authType:o?"internal":void 0,seqno:n,messages:e.map((t=>{const{amount:e,toAddress:n,stateInit:s}=t;return(0,mt.internal)({value:e,to:n,body:Eo(t),bounce:(0,D.or)(n).isBounceable,init:(0,D.zq)(s)})})),sendMode:(s?mt.SendMode.CARRY_ALL_REMAINING_BALANCE:mt.SendMode.PAY_GAS_SEPARATELY)+mt.SendMode.IGNORE_ERRORS,timeout:r,hints:e[0].hints}}({messages:t,seqno:r+e,doPayFeeFromAmount:s,expireAt:a,shouldBeInternal:c})))),h=await o.signTransactions(m);return"error"in h?h:h.map(((t,e)=>({seqno:m[e].seqno,transaction:t})))}async function wo(t,e,n,s){const r=(0,D.N7)(t),o=Date.now()+Xr;for(;Date.now()<o;){const[o,a]=await Promise.all([r.sendFile(n).catch((t=>String(t))),Cs(t,e).catch((()=>{}))]);if(null!=o&&o.match(/(exitcode=33|exitcode=133|inbound external message rejected by account)/))break;if(a&&a.seqno>s)break;await(0,Wn.v7)(to)}}async function go(t,e,n,s){try{return{isFallback:!1,...await qr(t,e,n,s)}}catch(t){(0,i.SJ)("Failed to emulate a transaction",t)}const{code:r=null,data:o=null}=s?{}:e.init,{source_fees:a}=await(0,D.N7)(t).estimateExternalMessageFee(e.address,{body:n,initCode:r,initData:o,ignoreSignature:!0});return{isFallback:!0,networkFee:BigInt(a.in_fwd_fee+a.storage_fee+a.gas_fee+a.fwd_fee)}}async function yo(t,e){const{network:n}=I(t),{address:s,publicKey:r,version:o}=await j(t),a=(0,D.N7)(n),c=Ds(r,o),d=Jt.PY+e.length;let l=0,u=0;const f=[];return _r(n,s,(async t=>{for(;l<e.length&&u<d;){const{base64:r,seqno:o}=e[l];try{const{boc:i,msgHashNormalized:d}=await rr(a,c,mt.Cell.fromBase64(r));f.push({boc:i,msgHashNormalized:d});const u=()=>wo(n,s,i,o);l===e.length-1?t(u):await u(),l++}catch(t){if(t instanceof Br.K$&&(0,D.ZN)(t.message))return{error:p.jf.ConcurrentTransaction};(0,i.SJ)("sendSignedMessages",t)}u++}return f}))}async function vo(t,e,n,s){return Er(t,await $(t),s).decryptComment(Zr.from(e,"base64"),n)}function Ao(t,e){return bo({accountId:t,tokenAddress:e,canTransferGasfully:!1})}async function bo(t){let{accountId:e,tokenAddress:n,canTransferGasfully:s,toncoinBalance:r,tokenBalance:o}=t;const{network:a}=I(e);if("mainnet"!==a)return so;const i=await j(e),c=Fs(i),d=Ae(n);if(!d.isGaslessEnabled&&!d.isStarsEnabled)return so;const{address:l,version:u}=i;r??=await _s(a,c);const f=function(t){const e=!t.isGaslessEnabled&&t.isStarsEnabled;let{amount:n,realAmount:s}=Qr(t,!1);return e||(n*=2n,s*=2n),n+=w.dqR,s+=w.dqR,{amount:n,realFee:s,isStars:e}}(d),m=f.amount-r;if(r>=eo||m<=0n)return so;const h=await function(t,e,n,s,r){return Bt("/diesel/estimate",{address:t,tokenAddress:e,toncoinAmount:n,isW5:s,isStars:r})}(l,n,(0,Xt.nI)(m),"W5"===u,f.isStars),p={status:h.status,amount:void 0===h.amount?void 0:(0,Xt.UH)(h.amount,"stars-fee"===h.status?0:d.decimals),nativeAmount:m,remainingFee:r,realFee:f.realFee},g=Xs(p);if(0n===g)return p;o??=await Jr(a,l,n);const y=o>=g,v=Boolean(h.pendingCreatedAt&&Date.now()-new Date(h.pendingCreatedAt).getTime()<no*zn);return!s&&y||v?p:so}function ko(t){return"byTransactionIndex"in(t={...t,networkFee:(0,d.m1)(t.networkFee,Jt.FT)})&&(t.byTransactionIndex=t.byTransactionIndex.map((t=>({...t,networkFee:(0,d.m1)(t.networkFee,Jt.FT)})))),t}function Eo(t){let{payload:e,isBase64Payload:n}=t;if(void 0!==e){if(e instanceof mt.Cell)return e;if("string"==typeof e)return n?mt.Cell.fromBase64(e):(0,D.nN)((0,D.km)(e));if(e instanceof Uint8Array)return e.length?(0,D.nN)(e):void 0;throw new TypeError("Unexpected payload type "+typeof e)}}var So=n(48287).Buffer;async function Do(t,e){const{network:n}=I(t),{address:s}=await j(t),r=await qt(),o=await async function(t,e,n){const{collectionAddress:s,offset:r,limit:o}=n??{};return(await Ue(t).accounts.getAccountNftItems(e,{offset:r??0,limit:o??Re,indirect_ownership:!0,collection:s})).nft_items}(n,s,e);return(0,S.oE)(o.map((t=>Ve(n,t,r))))}async function Co(t,e){const{network:n}=I(t),{address:s}=await j(t),r=await function(t,e){return Ue(t).nft.getNftItemByAddress(e)}(n,e),o=Ve(n,r,await qt());return s===(null==o?void 0:o.ownerAddress)}async function Io(t,e){var n;const{network:s}=I(t),{address:r}=await j(t),o=await qt(),a=await async function(t,e,n){return(await Ue(t).accounts.getAccountEvents(e,{limit:Ne,start_date:n})).events}(s,r,e);e=(null===(n=a[0])||void 0===n?void 0:n.timestamp)??e,a.reverse();const i=[];for(const e of a)for(const n of e.actions){let e,a,c;const d=!!n.NftPurchase;if(n.NftItemTransfer){const{sender:t,recipient:r,nft:o}=n.NftItemTransfer;if(!t||!r)continue;e=r.address,a=(0,D.vn)(o,!0,s)}else{if(!n.NftPurchase)continue;{const{buyer:t}=n.NftPurchase;if(e=t.address,c=n.NftPurchase.nft,!c)continue;a=(0,D.vn)(c.address,!0,s)}}if(mt.Address.parse(e).equals(mt.Address.parse(r))){if(c||([c]=await Fe(s,[a])),c){const e=Ve(s,c,o);e&&i.push({type:"nftReceived",accountId:t,nftAddress:a,nft:e})}}else!d&&await Es(s,e)?i.push({type:"nftPutUpForSale",accountId:t,nftAddress:a}):i.push({type:"nftSent",accountId:t,nftAddress:a,newOwnerAddress:e})}return[e,i]}async function To(t){const{accountId:e,nfts:n,comment:s}=t;let{toAddress:r}=t;const{network:o}=I(e),a=await $(e),{address:i}=a.ton,c=await oo(o,r);if("error"in c)return c;r=c.resolvedAddress;const d=n.slice(0,"ledger"===a.type?1:w.gR8).map((t=>Bo(t,i,r,s))),l=await uo(e,d);if(l.emulation){const t=l.emulation.networkFee;c.fee=No(n.length,d.length,t,Jt.uS),c.realFee=No(n.length,d.length,t,Jt.nx)}return"error"in l&&(c.error=l.error),c}async function _o(t){const{accountId:e,password:n,nfts:s,toAddress:r,comment:o}=t,{address:a}=await j(e);return fo({accountId:e,password:n,messages:s.map((t=>Bo(t,a,r,o)))})}function Bo(t,e,n,s){return{payload:t.collectionAddress!==w.KmP||n!==w.pV9&&!w.WVU.includes(n)?Ro(e,n,s):function(t,e,n){const s=mt.Address.parse(e).hash.readUint8()>>4;return Ro(t,w.WVU[s],(new mt.Builder).storeUint(1609328194,32).storeUint(n,64).endCell(),w.APY)}(e,t.address,t.index),amount:Jt.uS,toAddress:t.address}}function Ro(t,e,n){let s,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jt.Wb,o=(new mt.Builder).storeUint(Jt.H3.TransferOwnership,32).storeUint((0,Qs.N)(),64).storeAddress(mt.Address.parse(e)).storeAddress(mt.Address.parse(t)).storeBit(!1).storeCoins(r);if(n)if("string"==typeof n){const t=(0,D.km)(n),e=Math.floor((o.availableBits-Jt.xA)/8);s=(0,D.DN)(t,e)}else s=n;return s instanceof Uint8Array?(o.storeBit(0),o=o.storeBuffer(So.from(s))):o=o.storeMaybeRef(s),o.endCell()}function No(t,e,n,s){const r=Math.floor(t/e);let o=t%e;return o>0&&o<e&&(o+=1),(0,d.m1)(n,(r*e+o)/e)+BigInt(t)*s}var Po=n(10309),Uo=n(96773);async function xo(t,e){const n=er(await $(t)),s=Math.ceil(e.length/n),r=e.slice(0,n).map(Wo),o=await uo(t,r);return"error"in o?o:{realFee:Jt.sl.changeDns*BigInt(e.length)+o.emulation.networkFee*BigInt(s)}}async function*Fo(t,e,n){const s=er(await $(t)),r=(0,S.lD)(n,s);for(const n of r){const s=n.map(Wo);yield{addresses:n,result:await fo({accountId:t,password:e,messages:s})}}}async function Oo(t,e,n){const s=await uo(t,[Lo(e,n)]);return"error"in s?s:{realFee:s.emulation.networkFee+Jt.sl.changeDns}}function Mo(t,e,n,s){return fo({accountId:t,password:e,messages:[Lo(n,s)]})}function Wo(t){return{toAddress:t,payload:Uo.n.buildFillUpMessage(),amount:Jt.sl.changeDns}}function Lo(t,e){return{toAddress:t,payload:Uo.n.buildChangeDnsWalletMessage(e),amount:Jt.sl.changeDns}}self.devSettings={};var qo=n(67132),Ho=function(t){return t[t.transfer_timelocked=3612397257]="transfer_timelocked",t}(Ho||{});class Ko extends qo.K{constructor(t){super(t),this.address=t}static createFromAddress(t){return new Ko(t)}async getTimeLockData(t){try{const e=(await t.get("get_timelock_data",[])).stack;return{lockedUsdeBalance:e.readBigNumber(),unlockTime:e.readNumber()}}catch(t){var e;if(null!==(e=t.message)&&void 0!==e&&e.includes("exit_code: -13"))return{lockedUsdeBalance:0n};throw t}}static transferTimelockedMessage(t){return(0,mt.beginCell)().storeUint(Ho.transfer_timelocked,32).storeUint(0,64).storeCoins(t.jettonAmount).storeAddress(t.to).storeAddress(t.responseAddress).storeMaybeRef(t.customPayload).storeCoins(t.forwardTonAmount).storeMaybeRef(t.forwardPayload).endCell()}}var jo=n(84752),Jo=n(86972);class zo{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new zo(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s={code:e,data:(0,mt.beginCell)().endCell()};return new zo((0,mt.contractAddress)(n,s),s)}async getListNominators(t){return(await t.get("list_nominators",[])).stack.readTuple().items.map((t=>{const e=t.map((t=>({type:"int",value:t}))),n=new mt.TupleReader(e),s=n.readBigNumber().toString(16).padStart(64,"0");return{address:mt.Address.parse(`0:${s}`),amount:n.readBigNumber(),pendingDepositAmount:n.readBigNumber(),withdrawRequested:Boolean(n.readNumber())}}))}}let Vo;const $o=new Ct.A,Go={};let Qo;const Yo=new Ct.A;function Zo(t,e){return Go[`${t}:${e}`]??{}}function Xo(t,e,n){const s=`${t}:${e}`;Go[s]={...Go[s],...n}}async function ta(){return await $o.promise,Vo}async function ea(){return await Yo.promise,Qo}var na=n(59121),sa=n(48287).Buffer;let ra,oa;async function aa(){if(ra||([ra,oa]=await Promise.all([W.getItem("clientId"),W.getItem("referrer")])),ra){const t=ra.split(":",1);!t[1]&&oa&&(ra=`${t[0]}:${oa}`,W.setItem("clientId",ra))}else{const t=sa.from((0,na.po)(10)).toString("hex");ra=`${t}:${oa??""}`,W.setItem("clientId",ra)}return ra}async function ia(t,e,n){let s;switch(n.type){case"nominators":if(e<Jt.sl.stakeNominators)return{error:p.KL.InvalidAmount};s=await ro({accountId:t,toAddress:n.pool,amount:e+Jt.sl.stakeNominators,data:Jt.v8}),"fee"in s&&s.fee&&(s.fee=Jt.sl.stakeNominators+s.fee);break;case"liquid":s=await ro({accountId:t,toAddress:w.qMf,amount:e+Jt.sl.stakeLiquid,data:(0,D.UY)()}),"fee"in s&&s.fee&&(s.fee=Jt.sl.stakeLiquid+s.fee);break;case"jetton":{const{tokenSlug:r,pool:o,period:a}=n,{tokenAddress:i}=ve(r);s=await ro({accountId:t,toAddress:o,tokenAddress:i,amount:e,data:Jo.Ml.stakePayload(a),forwardAmount:Jt.sl.stakeJettonsForward});break}case"ethena":s=await ro({accountId:t,toAddress:w.BV6,tokenAddress:w.wpN.tokenAddress,amount:e,forwardAmount:Jt.sl.stakeEthenaForward})}return s}async function ca(t,e,n){const{network:s}=I(t),{address:r}=await j(t),o=await ta();let a,i;switch(n.type){case"nominators":a=await ro({accountId:t,toAddress:n.pool,amount:Jt.sl.unstakeNominators,data:Jt.mv});break;case"liquid":{if(e>n.balance)return{error:p.KL.InsufficientBalance};i=e===n.balance?n.tokenBalance:(0,d.fC)(e,o.liquid.currentRate);const c=await ua(s,r,i);a=await ro({accountId:t,toAddress:c.toAddress,amount:c.amount,data:c.payload});break}case"jetton":i=e,a=await ro({accountId:t,toAddress:n.stakeWalletAddress,amount:Jt.sl.unstakeJettons,data:(0,D.ct)(e,!0)});break;case"ethena":if(e>n.balance)return{error:p.KL.InsufficientBalance};if(e===n.balance)i=n.tokenBalance;else{const t="testnet"===s?1:o.ethena.rate;i=(0,d.fC)(e,t)}a=await ro({accountId:t,toAddress:w.VG8.tokenAddress,amount:i,tokenAddress:w.VG8.tokenAddress,forwardAmount:Jt.sl.unstakeEthenaForward})}return{...a,type:n.type,tokenAmount:i}}async function da(t,e,n,s){let r;const{network:o}=I(t),{address:a}=await j(t);switch(s.type){case"nominators":r=await ao({accountId:t,password:e,toAddress:(0,D.vn)(s.pool,!0,o),amount:n+Jt.sl.stakeNominators,data:Jt.v8});break;case"liquid":r=await ao({accountId:t,password:e,toAddress:w.qMf,amount:n+Jt.sl.stakeLiquid,data:(0,D.UY)()});break;case"jetton":{const{tokenSlug:o,pool:a,period:i}=s,{tokenAddress:c}=ve(o);r=await ao({accountId:t,password:e,toAddress:a,tokenAddress:c,amount:n,data:Jo.Ml.stakePayload(i),forwardAmount:Jt.sl.stakeJettonsForward}),"error"in r||(r.toAddress=a);break}case"ethena":r=await ao({accountId:t,password:e,toAddress:w.BV6,tokenAddress:w.wpN.tokenAddress,amount:n,forwardAmount:Jt.sl.stakeEthenaForward})}return"error"in r||Xo(t,a,{stakedAt:Date.now()}),r}async function la(t,e,n,s){const{network:r}=I(t),{address:o}=await j(t);let a;switch(s.type){case"nominators":a=await ao({accountId:t,password:e,toAddress:(0,D.vn)(s.pool,!0,r),amount:Jt.sl.unstakeNominators,data:Jt.mv});break;case"liquid":{const i=s.instantAvailable?p.Dn.Default:p.Dn.BestRate,c=await ua(r,o,n,i);a=await ao({accountId:t,password:e,toAddress:c.toAddress,amount:c.amount,data:c.payload});break}case"jetton":a=await ao({accountId:t,password:e,toAddress:s.stakeWalletAddress,amount:Jt.sl.unstakeJettons,data:(0,D.ct)(n,!0)});break;case"ethena":a=await ao({accountId:t,password:e,toAddress:w.VG8.tokenAddress,amount:n,tokenAddress:w.VG8.tokenAddress,forwardAmount:Jt.sl.unstakeEthenaForward}),"error"in a||(a.localActivityParams={slug:w.VG8.slug,amount:0n,toAddress:w.VG8.tokenAddress})}return a}async function ua(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.Dn.Default;const r=await(0,D.jq)(t,e,w.Kzb),o=(0,D.Is)({amount:n,responseAddress:e,fillOrKill:s===p.Dn.Instant,waitTillRoundEnd:s===p.Dn.BestRate});return{amount:Jt.sl.unstakeLiquid,toAddress:r,payload:o}}async function fa(t,e,n,s){const{network:r}=I(t),{address:o}=await j(t),{loyaltyType:a,shouldUseNominators:i,type:c}=n,l={accountId:t,backendState:n,commonData:e,address:o,loyaltyType:a,network:r,balances:s},u=[];for(const t of e.jettonPools)ke("ton",t.token)in s&&u.push(ha(l,t));return(i||"nominators"===c)&&u.push(async function(t){var e,n;let{network:s,address:r,backendState:o,commonData:a}=t;const i=o.balance,{address:c,apy:d}=o.nominatorsPool,l=Date.now()>a.prevRound.unlock,u=l?a.round.start:a.prevRound.start,f=l?a.round.unlock:a.prevRound.unlock;let m;if("nominators"===o.type){const t=(0,D.N7)(s).open(new zo(mt.Address.parse(c))),e=await t.getListNominators(),n=mt.Address.parse(r);m=e.find((t=>t.address.equals(n)))}return{type:"nominators",id:"nominators",tokenSlug:w.Tu9.slug,balance:m?i:0n,annualYield:d,yieldType:"APY",pool:c,start:u,end:f,pendingDepositAmount:(null===(e=m)||void 0===e?void 0:e.pendingDepositAmount)??0n,unstakeRequestAmount:null!==(n=m)&&void 0!==n&&n.withdrawRequested?i:0n}}(l)),!(w.wpN.slug in s)||e.ethena.isDisabled&&!w.Oig||u.push(async function(t){const{network:e,balances:n,address:s,commonData:r,commonData:{ethena:{apy:o,apyVerified:a}},backendState:{ethena:{isVerified:i}}}=t,c="testnet"===e?1:r.ethena.rate,l=(0,D.N7)(e),u=await(0,D.jq)(e,s,w.VG8.tokenAddress),f=l.open(Ko.createFromAddress(mt.Address.parse(u))),{lockedUsdeBalance:m,unlockTime:h}=await f.getTimeLockData(),p=n[w.VG8.slug]??0n,g=(0,d.m1)(p,c),y={id:"ethena",type:"ethena",tokenSlug:w.wpN.slug,yieldType:"APY",annualYield:i?a:o,annualYieldStandard:o,annualYieldVerified:a,balance:g,pool:w.BV6,tokenBalance:p,unstakeRequestAmount:m,unlockTime:h&&m?1e3*h:void 0,tsUsdeWalletAddress:u};return void 0!==i||function(t){return Boolean(t.balance||t.unstakeRequestAmount||"unclaimedRewards"in t&&t.unclaimedRewards>w.dL4)}(y)||(y.annualYield=a),y}(l)),[ma(l),...await Promise.all(u)]}function ma(t){var e;let{accountId:n,address:s,backendState:r,commonData:o,loyaltyType:a,balances:i}=t;const{currentRate:c}=o.liquid,l=i[ke("ton",w.Kzb)]??0n,u=(0,Xt.UH)((null===(e=r.liquid)||void 0===e?void 0:e.unstakeRequestAmount)??0),f=Zo(n,s),m=Math.max(f.stakedAt??0,r.stakedAt??0),h=Date.now()-m>w.NFS&&!(self.devSettings??{}).simulateLongUnstaking?o.liquid.available:0n,{start:p,end:g}=function(t){const{prevRound:e,round:n}=t,s=Date.now(),r=w.N7B,o=s>e.unlock&&s<e.unlock+r&&!t.liquid.collection||s>=e.unlock+r?n:e;return{start:o.start,end:o.unlock+r}}(o);let y=o.liquid.apy;a&&a in o.liquid.loyaltyApy&&(y=o.liquid.loyaltyApy[a]);const v=(0,d.m1)(l,c)+u;return{type:"liquid",id:"liquid",tokenSlug:w.Tu9.slug,pool:w.qMf,balance:v,annualYield:y,yieldType:"APY",tokenBalance:l,unstakeRequestAmount:u,instantAvailable:h,start:p,end:g}}async function ha(t,e){const{network:n}=t,{pool:s,token:r,poolConfig:o}=e,{decimals:a,slug:i}=Ae(r),{tvl:c,rewardJettons:d}=(0,D.wx)(o),{rewardsDeposits:l}=Object.values(d)[0],u=Math.floor(Date.now()/1e3);let f=0n;for(const{startTime:t,endTime:e,distributionSpeed:n}of Object.values(l))t<u&&e>u&&(f+=n);const m=function(t){let{tvl:e,dailyReward:n,decimals:s}=t;if(!e)return 0;const r=(0,Xt.CF)(n,s).div((0,Xt.CF)(e,s)).mul($n).mul(100).toFixed(2);return Number(r)}({tvl:c,dailyReward:f,decimals:a}),{address:h,balances:p}=t,w=e.periods[0],g=ke("ton",w.token),y=await(0,D.C6)(n,s,w.period,h);let v,A=0n,b=0n;if(g in p){const t=await y.getStorageData().catch((()=>{}));if(t){const e=await(0,D.jq)(n,s,r),a=jo.sH.getAvailableRewards(t,o);A=(a&&a[e])??0n,b=t.jettonBalance,v=Object.keys(a)}}return{type:"jetton",id:s,pool:s,tokenAddress:r,tokenSlug:i,annualYield:m,yieldType:"APR",balance:b,unclaimedRewards:A,poolWallets:v,stakeWalletAddress:(0,D.vn)(y.address,!0),tokenAmount:0n,tvl:c,dailyReward:f,period:w.period}}async function pa(t){const e=await $(t),n=await async function(t,e){const n=await aa(),s=await Bt(`/staking/state/${t}`,{isViewMode:e?1:void 0},{"X-App-ClientID":n});if(s.balance=(0,Xt.UH)(s.balance),s.totalProfit=(0,Xt.UH)(s.totalProfit),!(0,ft.Jx)(s.nominatorsPool.address))throw Error("Unexpected pool address, likely a malicious activity");return s}(e.ton.address,"view"===e.type);return{...n,nominatorsPool:{...n.nominatorsPool,start:1e3*n.nominatorsPool.start,end:1e3*n.nominatorsPool.end}}}function wa(t,e,n){return ao({accountId:t,password:e,toAddress:n.stakeWalletAddress,amount:Jt.sl.claimJettons,data:(0,D.jf)(n.poolWallets)})}async function ga(t,e,n){const{address:s}=await j(t),r=await ao({accountId:t,password:e,toAddress:n.tsUsdeWalletAddress,amount:Jt.sl.unstakeEthenaLocked,data:Ko.transferTimelockedMessage({jettonAmount:n.unstakeRequestAmount,to:mt.Address.parse(w.VG8.tokenAddress),responseAddress:mt.Address.parse(s),forwardTonAmount:Jt.sl.unstakeEthenaLockedForward})});return"error"in r||(r.localActivityParams={type:"unstake",amount:n.unstakeRequestAmount,isIncoming:!0,slug:w.wpN.slug,fromAddress:w.BV6,toAddress:s}),r}var ya=n(48287).Buffer;function va(t){return function(t){let e=new mt.Cell;return t&&(t instanceof mt.Cell?e=t:"string"==typeof t?t.length>0&&(e=(new mt.Builder).storeUint(0,32).storeStringTail(t).asCell()):e=(new mt.Builder).storeBuffer(ya.from(t)).asCell()),e.toBoc()}(t).toString("base64")}async function Aa(t){try{return await(0,D.N7)(t).getMasterchainInfo(),!0}catch(t){return!1}}const ba=[w.yTE,w.InW],ka=1000000000n;async function Ea(t,e,n,s){const r=(r,o)=>{(0,Qe.v)(r,o,{network:t,address:e,request:n,transfers:s})};r(s.length<=2,"Too many transfers");const[o,a]=s;if(n.from===w.Tu9.symbol){const e=(0,Xt.UH)(n.fromAmount)+(0,Xt.UH)(n.ourFee)+ka,{isSwapAllowed:s,codeHash:i}=await Is(t,o.toAddress);r(!!s,`Not allowed swap contract: ${i}`),r(o.amount<=e,"Main transfer amount is too big"),a&&(r(a.amount<=o.amount,"Fee transfer amount is too big"),r(a.amount+o.amount<e,"Total amount is too big"),r(ba.includes((0,D.vn)(a.toAddress,!1)),"Unexpected fee transfer address"))}else{const s=Ae(n.from);r(!!s,'Unknown "from" token');const i=(0,Xt.UH)(n.fromAmount,s.decimals)+(0,Xt.UH)(n.ourFee??0,s.decimals)+(0,Xt.UH)(n.dieselFee??0,s.decimals),c=ka,d=await(0,D.jq)(t,e,s.tokenAddress),l=await He(t,o.toAddress,o.payload);r(o.toAddress===d,"Main transfer address is not the token wallet address"),r(tr(l),"Main transfer payload is not a token transfer");const{amount:u,destination:f}=l;r(u<=i,"Main transfer token amount is too big"),r(o.amount<c,"Main transfer TON amount is too big");const{isSwapAllowed:m}=await Is(t,f);if(r(!!m,"Main transfer destination is not a swap smart contract"),a){const e=await He(t,a.toAddress,a.payload);r(a.amount+o.amount<c,"Total TON amount is too big"),r(a.toAddress===d,"Fee transfer address is not the token wallet address"),r(tr(e),"Fee transfer payload is not a token transfer");const{amount:n,destination:s}=e;r(u+n<=i,"Total token amount is too big"),r(ba.includes((0,D.vn)(s,!1)),"Unexpected fee transfer destination")}}}function Sa(t){return{...t,id:(e=t.id,$t(e,void 0,"backend-swap")),kind:"swap",from:Da(t,t.from),to:Da(t,t.to),shouldLoadDetails:!t.cex};var e}function Da(t,e){return e===w.Tu9.symbol?w.Tu9.slug:t.cex?(null===(n=Ae(e))||void 0===n?void 0:n.slug)??e:ke("ton",e);var n}async function Ca(t){const{address:e,swapId:n,authToken:s,msgHash:r,error:o}=t,{swapVersion:a}=await ea();await _t(`/swap/history/${e}/${n}/update`,{swapVersion:a??w.AuB,msgHash:r,error:o},{method:"PATCH",authToken:s})}function Ia(t){return{...t,status:"pending"===t.status?"pendingTrusted":t.status}}const Ta=4,_a=zn,Ba=100;async function Ra(t,e,n,s){try{e=await async function(t,e){try{const{network:n}=I(t),{address:s}=await j(t);let r=e.filter((t=>t.shouldReload)).map((t=>Nn(t.id).actionId));for(let t=0;t<Ta&&r.length;t++)(0,i.MD)(`Reload incomplete activities #${t+1}`,r),await(0,Wn.v7)(_a),({activities:e,actionIdsToReload:r}=await Na(n,s,e,r))}catch(t){(0,i.SJ)("reloadIncompleteActivities",t)}return e}(t,e),e=await async function(t,e,n,s){if(!e.length||"testnet"===I(t).network||!function(t,e){return t?w.dGN.has(t):e.some((t=>Gt(t).some((t=>w.dGN.has(t)))))}(n,e))return e;try{const{ton:{address:r}={}}=await V(t);if(!r)return e;const o=e[0].timestamp,a=e[e.length-1].timestamp,[i,c]=o<a?[o,s?Date.now():a]:[a,s?Date.now():o],d=e.map((t=>{let{id:e}=t;return zt(e).hash})),l=await async function(t,e){const{swapVersion:n}=await ea();return(await _t(`/swap/history/${t}`,{...e,swapVersion:n??w.AuB})).map(Ia)}(r,{fromTimestamp:i,toTimestamp:c,asset:n?ve(n).tokenAddress??w.Tu9.symbol:void 0,hashes:d,isCex:!0});if(!l.length)return e;const u=[],f=new Set;for(const t of l)t.hashes.forEach((t=>f.add(t))),t.timestamp>i&&t.timestamp<c&&u.push(Sa(t));const m=e.map((t=>"transaction"===t.kind&&f.has(zt(t.id).hash)?{...t,shouldHide:!0}:t));return Fn(xn(u),m)}catch(t){return(0,i.SJ)("swapReplaceCexActivities",t),e}}(t,e,n,s)}catch(t){(0,i.SJ)("enrichActivities",t)}return e}async function Na(t,e,n,s){const r=(0,S.lD)(s,Ba),o=(await Promise.all(r.map((async n=>(await cn({network:t,filter:{actionId:n},walletAddress:e,limit:Ba})).filter((t=>!t.shouldReload)))))).flat();if(o.length){const t=(0,S.dU)(o,"id"),e=o.map((t=>Nn(t.id).actionId));n=n.map((e=>t[e.id]??e)),s=(0,S.Hl)(s,e)}return{activities:n,actionIdsToReload:s}}class Pa{#b;#i;#E=[];#D=0;constructor(t){this.#b=t}watchWallets(t){let{onNewActivity:e,onConnect:n,onDisconnect:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.#D++,o={id:r,wallets:t,isConnected:!1,onNewActivity:e,onConnect:n,onDisconnect:s,destroy:this.#T.bind(this,r)};return this.#E.push(o),this.#_(),o}#T(t){const e=this.#E.findIndex((e=>e.id===t));e>=0&&(this.#E.splice(e,1),this.#_())}#_=(0,Wn.nF)((async()=>{const{isWebSocketEnabled:t}=await ea();var e;t&&this.#B()?(this.#i??=this.#R(),this.#i.isConnected&&this.#N()):(null===(e=this.#i)||void 0===e||e.close(),this.#i=void 0)}),10,!1);#R(){const t=function(t){const e=new URL(w.HUv);return e.protocol="http"===e.protocol?"ws":"wss",e.pathname+=("testnet"===t?"testnet/":"")+"ws",Nt(e),e}(this.#b),e=new ss(t);return e.onMessage(this.#A),e.onConnect(this.#P),e.onDisconnect(this.#U),e}#A=t=>{switch(t.type){case"subscribed":this.#x(t);break;case"newActivity":this.#Z(t)}};#P=()=>{this.#N()};#U=()=>{for(const t of this.#E)t.isConnected&&(t.isConnected=!1,t.onDisconnect&&(0,te.A)(t.onDisconnect))};#x(t){for(const e of this.#E)t.id<e.id||e.isConnected||(e.isConnected=!0,e.onConnect&&(0,te.A)(e.onConnect))}#Z(t){const e=new Set(t.addresses);for(const{wallets:n,isConnected:s,onNewActivity:r}of this.#E)if(s&&r)for(const s of n)s.chain===t.chain&&e.has(s.address)&&s.events.includes("activity")&&(0,te.A)((()=>r(s)))}#N(){const t=this.#M(["activity"]),e=this.#D++;this.#i.send({type:"subscribe",id:e,addresses:t.map((t=>({...t,events:["activity"]})))})}#B(){return this.#E.some((t=>t.wallets.length))}#M(t){const e=[];for(const n of this.#E)for(const s of n.wallets)s.events.some((e=>t.includes(e)))&&e.push({chain:s.chain,address:s.address});return e}}const Ua={};class xa{#t;#K;#j;#n=!1;#X;constructor(t){var e;this.#t=t,this.#K=(e=t.network,Ua[e]??=new Pa(e),Ua[e]).watchWallets([{chain:t.chain,events:["activity"],address:t.address}],{onNewActivity:this.#tt,onConnect:this.#P,onDisconnect:this.#U}),this.#j=new ns(this.#K.isConnected,{pollOnStart:t.updateOnStart,minPollDelay:t.minUpdateDelay,pollingStartDelay:t.fallbackUpdateStartDelay,pollingPeriod:t.fallbackUpdatePeriod,forcedPollingPeriod:t.forceUpdatePeriod,poll:this.#et})}destroy(){this.#n=!0,this.#K.destroy(),this.#j.destroy()}#tt=()=>{this.#X=!0,this.#nt(),this.#j.onSocketMessage()};#P=()=>{this.#et(),this.#j.onSocketConnect()};#U=()=>{this.#j.onSocketDisconnect()};#et=()=>{this.#X??=!1,this.#nt()};#nt=(0,Wn.nF)((async()=>{if(void 0===this.#X)return;if(await(0,Wn.v7)(10),this.#n)return;const t=this.#X;this.#X=void 0,await this.#t.onUpdate(t)}),(()=>{const[t,e]=es(this.#t.minUpdateDelay);return Kn(t-10,e-10)}))}const Fa=Mn();class Oa{#st=new Set;#rt;constructor(t){this.#rt=t}get isOn(){return this.#st.size>0}on(t){this.toggle(t,!0)}off(t){this.toggle(t,!1)}toggle(t,e){const n=this.isOn;this.#st[e?"add":"delete"](t);const s=this.isOn;n!==s&&this.#rt(s)}}class Ma{#ot;#at=[];#H=function(){let t=[],e=[];return{get all(){return Fn(t,e)},updateAfterRawUpdate:(n,s)=>{const r=new Set((0,S.JY)(n,"externalMsgHashNorm"));e=Fn(e,t.filter((t=>r.has(t.externalMsgHashNorm)))),t=s},updateAfterEnrichment:t=>{const n=new Set((0,S.JY)(t,"externalMsgHashNorm"));e=e.filter((t=>!n.has(t.externalMsgHashNorm)))}}}();#it=new Oa((t=>this.#z.runCallbacks(t)));#J=Mn();#ct=function(t){let e=[];return(n,s)=>{!n.length&&(0,S.k)(e,s)||t(n,s),e=s}}(this.#J.runCallbacks);#z=Mn();#n=!1;#dt;constructor(t,e){this.#ot=t,this.#dt=[e.onUpdate(this.#lt),e.onLoadingChange((t=>this.#it.toggle("raw",t)))]}onUpdate(t){return this.#J.addCallback(t)}onLoadingChange(t){return this.#z.addCallback(t)}destroy(){this.#n=!0;for(const t of this.#dt)t()}#lt=(t,e)=>{this.#H.updateAfterRawUpdate(t,e),this.#ut([]),t.length&&(this.#at.unshift(...t),this.#ft())};#ft=(0,Wn.nF)((async()=>{if(!this.#n)try{this.#it.on("enrich");const t=this.#at;this.#at=[];const e=await Ra(this.#ot,t,void 0,!0);this.#H.updateAfterEnrichment(t),this.#ut(e)}finally{this.#it.off("enrich")}}),0);#ut(t){this.#n||this.#ct(t,this.#H.all)}}const Wa=3*zn,La={focused:2*zn,notFocused:10*zn},qa={focused:Vn,notFocused:5*Vn},Ha={focused:Vn,notFocused:5*Vn},Ka={focused:5*zn,notFocused:20*zn},ja={focused:5*Vn,notFocused:15*Vn},Ja={focused:10*zn,notFocused:Vn},za={focused:15*zn,notFocused:2*Vn},Va={focused:Vn,notFocused:5*Vn},$a=5*zn,Ga=(0,Wn.JL)();function Qa(t,e,n,s,r){if(!("ton"in e)||!e.ton)return()=>{};const o=function(t,e,n){const s=Ya(t,e,n);return{...Xn({period:qa,minDelay:La,poll:s.update}),getBalances:s.get}}(t,n,s.bind(void 0,"balance")),a=function(t,e,n,s,r,o){let a,c,d=!1;const l=(0,S.oE)(Object.values(n));let u=l.length?Math.max(...l):void 0;function f(t){t.length&&s()}function m(e,n){e.slice().reverse().forEach((t=>{Fa.runCallbacks(t)})),r({type:"newActivities",chain:"ton",activities:e,pendingActivities:n,accountId:t})}return(async()=>{const n=void 0===u;n&&(u=await async function(){try{return o(!0),await async function(t,e){var n;let s=await Or(t,void 0,void 0,void 0,Gn);s=await Ra(t,s,void 0,!0);const r={[w.Tu9.slug]:s.filter((t=>Gt(t).includes(w.Tu9.slug)))},o=null===(n=s[0])||void 0===n?void 0:n.timestamp;return e({type:"initialActivities",chain:"ton",accountId:t,mainActivities:s,bySlug:r}),o}(t,r)}catch(t){return void(0,i.SJ)("loadInitialConfirmedActivities",t)}finally{o(!1)}}(),s()),d||(a=new ps(I(t).network,e,u,!n),c=new Ma(t,a),a.onUpdate(f),c.onUpdate(m),c.onLoadingChange(o))})(),()=>{var t,e;d=!0,null===(t=c)||void 0===t||t.destroy(),null===(e=a)||void 0===e||e.destroy()}}(t,e.ton.address,r,(async function(){await(0,Wn.v7)(Wa),o.poll(),c.poll(),d.poll()}),n,s.bind(void 0,"activities")),c=function(t,e){let n=Math.round(Date.now()/1e3);const s=ts([$a],(async()=>{try{const s=await Io(t,n).catch(Za);if(s){let t;[n,t]=s,t.filter((t=>!("nftReceived"===t.type&&t.nft.isHidden))).forEach(e)}}catch(t){(0,i.SJ)("setupNftPolling updatePartial",t)}})),r=Xn({period:Va,async poll(){s.cancel();try{const s=await Do(t).catch(Za);s&&(n=Math.round(Date.now()/1e3),e({type:"updateNfts",accountId:t,nfts:s}))}catch(t){(0,i.SJ)("setupNftPolling updateFull",t)}}});return{poll:(0,Wn.nF)(s.run,(()=>Kn(...es(La)))),stop(){s.cancel(),r.stop()}}}(t,n),d=function(t){return Xn({period:Ha,minDelay:La,async poll(){try{const e=await j(t);if(e.isInitialized)return"stop";const{network:n}=I(t);let s;if(e.publicKey){const t=await ks(n,e.address);t&&(s={isInitialized:t})}else{const t=await Gs(n,e.address);!("error"in t)&&t.wallet.isInitialized&&(s=(0,S.Up)(t.wallet,["isInitialized","publicKey","version"]))}s&&await async function(t,e){return Q(t,{ton:{...await j(t),...e}})}(t,s)}catch(t){(0,i.SJ)("checkWalletInitialization",t)}}})}(t),l=function(t,e){const{network:n}=I(t);let s;return Xn({period:ja,async poll(){try{const{type:r,ton:o}=await V(t);if("bip39"===r||!o)return"stop";const{publicKey:a,version:i,isInitialized:c}=o;if(!a){if(!c)return;return e({type:"updateWalletVersions",accountId:t,currentVersion:i,versions:[]}),"stop"}const d=(0,ft.aT)(a),l=("ledger"===r?w.iQn:w.eZ2).filter((t=>t!==i)),u=await Ns(n,d,l),f=u.map((t=>{let{wallet:e,...n}=t;return n}));Ge(u,s)||(s=u,e({type:"updateWalletVersions",accountId:t,currentVersion:i,versions:f}))}catch(t){(0,i.SJ)("setupWalletVersionsPolling",t)}}}).stop}(t,n),u=function(t,e){let n;return Xn({period:za,async poll(){try{const s=await async function(t){const{network:e}=I(t),{address:n}=await j(t),s=await Bt("/dns/getDomains",{address:n}),r=await qt(),o={},a={},i={};return Object.keys(s).forEach((t=>{const{lastFillUpTime:n,linkedAddress:c,nft:d}=s[t];o[t]=new Date(n).getTime()+Po.UX,c&&(a[t]=c);const l=Ve(e,d,r);l&&(i[t]=l)})),{expirationByAddress:o,linkedAddressByAddress:a,nfts:i}}(t);Ge(s,n)||(n=s,e({type:"updateAccountDomainData",accountId:t,...(0,S.Up)(s,["expirationByAddress","linkedAddressByAddress","nfts"])}))}catch(t){(0,i.SJ)("setupTonDnsPolling",t)}}}).stop}(t,n),f=function(t,e,n){if(w.OuE||"mainnet"!==I(t).network)return()=>{};let s;return Xn({period:Ka,async poll(){try{const[r,o,a]=await Promise.all([ta(),e(),pa(t)]),i=await fa(t,r,a,o),{shouldUseNominators:c,totalProfit:d}=a;Ge(i,s)||(s=i,n({type:"updateStaking",accountId:t,states:i,totalProfit:d,shouldUseNominators:c}))}catch(t){(0,i.SJ)("setupStakingPolling",t)}}}).stop}(t,o.getBalances,n),m=function(t,e){if(w.TI6)return()=>{};let n;return Xn({period:Ja,async prepare(){const{isVestingEnabled:t}=await ea();return t},async poll(s){if(!s)return"stop";try{const s=await async function(t){const{network:e}=I(t),n="testnet"===e,{address:s}=await j(t);return Bt(`/vesting/${s}`,{isTestnet:n})}(t);Ge(n,s)||(n=s,e({type:"updateVesting",accountId:t,vestingInfo:s}))}catch(t){(0,i.SJ)("setupVestingPolling",t)}}}).stop}(t,n);return()=>{o.stop(),a(),c.stop(),l(),u(),f(),m()}}function Ya(t,e,n){const{network:s}=I(t);let r,o,a=new Ct.A;async function c(n){const{balance:r,domain:a=!1}=await Cs(s,n);return a!==o&&(e({type:"updateAccount",accountId:t,chain:"ton",domain:a}),o=a),r}return{get:async function(){return await a.promise,r},update:async function(){null==n||n(!0);try{const n=await j(t),[o,i]=await Promise.all([c(n.address),Yr(s,n.address,e)]),d={[w.Tu9.slug]:o,...i},l=!Ge(r,d);r=d,l&&e({type:"updateBalances",accountId:t,chain:"ton",balances:r}),a.resolve()}catch(t){(0,i.SJ)("setupBalanceAndDomainPolling update",t),a.reject(t),a=new Ct.A}finally{null==n||n(!1)}}}}function Za(t){(0,i.SJ)("Polling error",t)}function Xa(t,e,n){if(!("ton"in e)||!e.ton)return()=>{};const s=Ya(t,n),r=new xa({...Zn,chain:"ton",network:I(t).network,address:e.ton.address,onUpdate:Ga.wrap((async()=>{await s.update()}))});return()=>{r.destroy()}}var ti=n(17718);let ei;const ni={},si=Ys("tron");function ri(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mainnet";return ei||(ei={mainnet:new ti.TronWeb({fullHost:si.mainnet.apiUrl}),testnet:new ti.TronWeb({fullHost:si.testnet.apiUrl})}),ei[t]}async function oi(t){if(!(t in ni)){const e=await ri(t).trx.getChainParameters(),n=e.find((t=>"getEnergyFee"===t.key)).value,s=e.find((t=>"getTransactionFee"===t.key)).value;ni[t]={energyUnitFee:n,bandwidthUnitFee:s}}return ni[t]}function ai(t){const{usdtAddress:e}=Ys("tron")[t],n=ke("tron",e);return[w.X7T.slug,n]}async function ii(t,e,n,s,r){const{network:o}=I(t),{address:a}=await J(t);let i;if(e===w.X7T.slug){const t=await async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Ys("tron")[t].apiUrl,r=new URL(`${s}/v1/accounts/${e}/transactions`);return(await(0,It.x6)(r.toString(),n)).data}(o,a,{min_timestamp:s?s+1e3:void 0,max_timestamp:n?n-1e3:void 0,limit:r,search_internal:!1});i=t.map((t=>function(t,e){const{raw_data:n,txID:s,energy_fee:r,net_fee:o,block_timestamp:a}=e,i=n.contract[0].parameter.value,c=BigInt(i.amount??0),d=ti.TronWeb.address.fromHex(i.owner_address),l=ti.TronWeb.address.fromHex(i.to_address||i.receiver_address||i.contract_address),u=l===t;return{id:s,kind:"transaction",timestamp:a,fromAddress:d,toAddress:l,amount:u?c:-c,slug:w.X7T.slug,isIncoming:u,normalizedAddress:u?d:l,fee:BigInt(r+o),type:"TriggerSmartContract"===n.contract[0].type?"callContract":void 0,shouldHide:"TransferAssetContract"===n.contract[0].type,status:"completed"}}(a,t))).filter(Boolean)}else{const{tokenAddress:t}=ve(e),c=await async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Ys("tron")[t].apiUrl,r=new URL(`${s}/v1/accounts/${e}/transactions/trc20`);return(await(0,It.x6)(r.toString(),n)).data}(o,a,{contract_address:t,min_timestamp:s?s+1e3:void 0,max_timestamp:n?n-1e3:void 0,limit:r});i=c.map((t=>function(t,e){const{transaction_id:n,block_timestamp:s,from:r,to:o,value:a,token_info:i}=e,c=BigInt(a),d=o===t;return{id:n,kind:"transaction",timestamp:s,fromAddress:r,toAddress:o,amount:d?c:-c,slug:ke(w.X7T.chain,i.address),isIncoming:d,normalizedAddress:d?r:o,fee:0n,status:"completed"}}(a,t)))}return xn(i)}async function ci(t,e,n){const{network:s}=I(t),r=ai(s),o=(await Promise.all([ii(t,w.X7T.slug,e,void 0,n),...r.map((s=>ii(t,s,e,void 0,n)))])).filter((t=>t.length));if(!o.length)return[];const a=o.reduce(((t,e)=>t.length>e.length?t:t.length<e.length||t[t.length-1].timestamp<e[e.length-1].timestamp?e:t),[]),i=a[a.length-1].timestamp,[c,...d]=o;return di(c,...d).filter((t=>{let{timestamp:e}=t;return e>=i}))}function di(t){const e=new Set,n=t=>!!e.has(t)||(e.add(t),!1),s=(0,S.dU)(t,"id");let r=[];for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];for(const t of a)r=Fn(r,t.filter((t=>!n(t.id))).map((t=>{const e=s[t.id];return"transaction"===t.kind&&"transaction"===(null==e?void 0:e.kind)&&(t.fee=e.fee),t})));return Fn(r,t.filter((t=>!n(t.id)&&("transaction"!==t.kind||t.toAddress))))}async function li(t,e){const n=ri(t);return BigInt(await n.trx.getUnconfirmedBalance(e))}async function ui(t,e,n){const s=await async function(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4?arguments[4]:void 0;try{const o=await t.transactionBuilder.triggerSmartContract(e,n,{_isConstant:!0},s,r);return o&&o.result?o.constant_result:[]}catch(t){return(0,i.SJ)("callContract",t),[]}}(ri(t),e,"balanceOf(address)",[{type:"address",value:n}],n);return s.length?BigInt(`0x${s[0]}`):0n}async function fi(t,e){try{const n=ri(t),s=await n.trx.getAccount(e);if(!s||ie(s))return!1;const r=new Set;if(s.owner_permission.threshold>1)return!0;for(const t of s.owner_permission.keys)r.add(n.address.fromHex(t.address));for(const t of s.active_permission){if(t.threshold>1)return!0;for(const e of t.keys)r.add(n.address.fromHex(e.address))}if(r.size>1)return!0;for(const t of r)if(t!==e)return!0;return!1}catch(t){return(0,i.SJ)("isTronAccountMultisig",t),!1}}const mi=(0,Wn.JL)();function hi(t,e,n,s,r){if(!("tron"in e)||!e.tron)return()=>{};const{address:o}=e.tron,a=pi(t,o,n,s.bind(void 0,"balance")),c=function(t,e,n,s){const{network:r}=I(t),o=ai(r);return{update:async function(){s(!0);try{e=ie(e)?await async function(t,e,n){const s={},r={},o=await Promise.all(e.map((async e=>{var n;let o=await ii(t,e,void 0,void 0,Gn);return o=await Ra(t,o,e,!0),s[e]=null===(n=o[0])||void 0===n?void 0:n.timestamp,r[e]=o,o}))),[a,...i]=o,c=di(a,...i);return c.slice().reverse().forEach((t=>{Fa.runCallbacks(t)})),n({type:"initialActivities",chain:"tron",accountId:t,mainActivities:c,bySlug:r}),s}(t,o,n):await async function(t,e,n,s){const r={},o=await Promise.all(n.map((async n=>{var s;let o=e[n];const a=await ii(t,n,void 0,o,Gn);return o=(null===(s=a[0])||void 0===s?void 0:s.timestamp)??o,r[n]=o,a}))),[a,...i]=o;let c=di(a,...i);return c=await Ra(t,c,void 0,!0),c.slice().reverse().forEach((t=>{Fa.runCallbacks(t)})),c.length>0&&s({type:"newActivities",chain:"tron",activities:c,pendingActivities:[],accountId:t}),r}(t,e,o,n)}catch(t){(0,i.SJ)("setupActivityPolling update",t)}finally{s(!1)}}}}(t,r,n,s.bind(void 0,"activities")),d=function(t,e,n){const{network:s}=I(t);let r;return{update:async function(){try{const o=await fi(s,e),a=r!==o;return r=o,a&&n({type:"updateAccount",accountId:t,chain:"tron",isMultisig:o}),a}catch(t){return(0,i.SJ)("setupMultisigPolling update",t),!1}}}}(t,o,n);let l=!0;const u=new xa({...Yn,chain:"tron",network:I(t).network,address:o,onUpdate:async function(t){t||l?await Promise.all([a.update(),c.update(),d.update()]):await a.update()&&await Promise.all([c.update(),d.update()]),l=!1}});return()=>{u.destroy()}}function pi(t,e,n,s){const{network:r}=I(t),{usdtAddress:o}=Ys("tron")[r],a=ke("tron",o);let c;return{update:async function(){null==s||s(!0);try{const[s,i]=await Promise.all([li(r,e),ui(r,o,e)]),d={[w.X7T.slug]:s,[a]:i},l=!Ge(c,d);return c=d,l&&n({type:"updateBalances",accountId:t,chain:"tron",balances:c}),l}catch(t){(0,i.SJ)("setupBalancePolling update",t)}finally{null==s||s(!1)}return!1}}}function wi(t,e,n){if(!("tron"in e)||!e.tron)return()=>{};const{address:s}=e.tron,r=pi(t,s,n),o=new xa({...Zn,chain:"tron",network:I(t).network,address:s,onUpdate:mi.wrap((async()=>{await r.update()}))});return()=>{o.destroy()}}const gi={transferTrc20Estimated:28214970n},yi=1000000n;var vi=n(48287).Buffer;const Ai=65;async function bi(t){const{accountId:e,amount:n,toAddress:s,tokenAddress:r}=t,{network:o}=I(e),a=ri(o),c={};try{if(!a.isAddress(s))return{error:p.KL.InvalidToAddress};c.resolvedAddress=s;const{address:t}=await J(e),[i,d,{energyUnitFee:l,bandwidthUnitFee:u}]=await Promise.all([li(o,t),a.trx.getBandwidth(t),oi(o)]);let f;if(r)f=await async function(t,e){const{network:n,tokenAddress:s,toAddress:r,energyUnitFee:o,fromAddress:a}=e;let{amount:i}=e;const c=await ui(n,s,a);if(!c)return gi.transferTrc20Estimated;(void 0===i||i>c)&&(i=1n);const{energy_required:d}=await t.transactionBuilder.estimateEnergy(s,"transfer(address,uint256)",{},[{type:"address",value:r},{type:"uint256",value:Number(i)}],a);return BigInt(o*d)}(a,{network:o,toAddress:s,tokenAddress:r,amount:n,energyUnitFee:l,fromAddress:t});else{const[e,r]=await Promise.all([a.transactionBuilder.sendTrx(s,Number(n??1),t),a.trx.getAccount(s)]),o=69+vi.from(e.raw_data_hex,"hex").byteLength+Ai;f=d>o?0n:BigInt(o)*BigInt(u),void 0===r.balance&&(f+=yi)}return c.fee=f,c.realFee=f,i>=(r?f:(n??0n)+f)||(c.error=p.KL.InsufficientBalance),c}catch(t){return(0,i.SJ)("tron:checkTransactionDraft",t),{...(0,Br.QS)(t),...c}}}async function ki(t){const{accountId:e,password:n="",toAddress:s,amount:r,fee:o=0n,tokenAddress:a}=t,{network:c}=I(e);try{const t=ri(c),d=await V(e),{address:l}=d.tron;if(!(await li(c,l)>=(a?o:o+r)))return{error:p.jf.InsufficientBalance};const u=await lt(e,n,d),f=t.fromMnemonic(u.join(" ")).privateKey.slice(2);if(a){const{transaction:e}=await async function(t,e){const{amount:n,tokenAddress:s,toAddress:r,feeLimit:o,fromAddress:a}=e,{transaction:i}=await t.transactionBuilder.triggerSmartContract(s,"transfer(address,uint256)",{feeLimit:Number(o)},[{type:"address",value:r},{type:"uint256",value:Number(n)}],a);return{transaction:i}}(t,{toAddress:s,tokenAddress:a,amount:r,feeLimit:o,fromAddress:l}),n=await t.trx.sign(e,f);return{amount:r,toAddress:s,txId:(await t.trx.sendRawTransaction(n)).transaction.txID}}{const e=await t.trx.sendTransaction(s,Number(r),{privateKey:f});if("code"in e&&(!("result"in e)||!e.result)){const t="message"in e&&e.message?function(t){let e="";for(let n=0;n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.slice(n,n+2),16));return e}(e.message):e.code.toString();return(0,i.SJ)("submitTransfer",{error:t,result:e}),{error:t}}return{amount:r,toAddress:s,txId:e.transaction.txID}}}catch(t){return(0,i.SJ)("submitTransfer",t),{error:p.jf.UnsuccesfulTransfer}}}function Ei(t,e){const{address:n,publicKey:s}=ri(t).fromMnemonic(e.join(" "));return{type:"tron",address:n,publicKey:s,index:0}}function Si(t){const e=ri(t).isConnected();return Boolean(e)}const Di={ton:s,tron:r},Ci={};async function Ii(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];for(const e of Ci[t]??[])try{await e(...n)}catch(e){(0,i.SJ)(`callHooks:${t}`,e)}}let Ti=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",t[t.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({}),_i=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({}),Bi=function(t){return t.MAINNET="-239",t.TESTNET="-3",t}({});const Ri={rE:"4.1.3"};function Ni(t){const e=["SendTransaction",{name:"SendTransaction",maxMessages:t?Pi(t):Jt.Bm}];return t&&"ledger"===t.type||e.push({name:"SignData",types:["text","binary","cell"]}),{platform:Ui(),appName:w.C39,appVersion:Ri.rE,maxProtocolVersion:w.gY_,features:e}}function Pi(t){const{type:e}=t;return"ledger"===e?Jt.EV:er(t)}function Ui(){var t;const{userAgent:e}=navigator,n=navigator.platform||(null===(t=navigator)||void 0===t||null===(t=t.userAgentData)||void 0===t?void 0:t.platform)||"";let s;return s=w.hL1||w.tKX?"browser":/Android/.test(e)?"android":-1!==["iPhone"].indexOf(n)?"iphone":-1!==["iPad","iPod"].indexOf(n)?"ipad":-1!==["macOS","Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(n)?"mac":-1!==["Win32","Win64","Windows","WinCE"].indexOf(n)?"windows":/Linux/.test(n)?"linux":"browser",s}var xi=n(14235);const Fi=new Map;class Oi{promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}function Mi(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,xi.A)();const e=new Oi;Fi.set(t,e);const{promise:n}=e;return{promiseId:t,promise:n}}function Wi(t,e){const n=Fi.get(t);n&&(n.resolve(e),Fi.delete(t))}let Li;function qi(t){Li=t}async function Hi(t,e,n){var s;const r=null===(s=await Y(t,"dapps"))||void 0===s?void 0:s[e];if(r)return r[n]}async function Ki(t,e,n){const s=await Vi(t);s[e.url]||(s[e.url]={}),s[e.url][n]=e,await X(t,"dapps",s)}async function ji(t,e,n,s){const r=await Vi(t);return e in r&&(delete r[e][n],ie(r[e])&&delete r[e],await X(t,"dapps",r),Li&&en(Li)&&Li({type:"dappDisconnect",accountId:t,url:e}),s||await Ii("onDappDisconnected",t,e),await Ii("onDappsChanged"),!0)}async function Ji(t){const e=Object.keys(await Vi(t));await X(t,"dapps",{}),e.forEach((e=>{Li({type:"dappDisconnect",accountId:t,url:e}),Ii("onDappDisconnected",t,e)})),await Ii("onDappsChanged")}async function zi(t){const e=await Vi(t);return Object.values(e).flatMap((t=>Object.values(t)))}async function Vi(t){return await Y(t,"dapps")||{}}function $i(){return W.getItem("dapps")}async function Gi(t){await Z(t,"dapps"),Ii("onDappsChanged")}async function Qi(){await W.removeItem("dapps"),await Ii("onDappsChanged")}function Yi(t){return tt(t,"dapps")}function Zi(t){let{isLandscape:e}=t;return Bt("/v2/dapp/catalog",{isLandscape:e})}const{ton:Xi}=Di;function tc(t,e){const{network:n}=I(t);return Xi.fetchToken(n,e)}function ec(t,e,n){return Di.ton.resolveTokenWalletAddress(t,e,n)}function nc(t,e){return Di.ton.resolveTokenAddress(t,e)}function sc(t,e){const n=Di.ton,s=Ae(t);return n.getToncoinAmountForTransfer(s,e)}let rc;const{ton:oc,tron:ac}=Di;function ic(t){rc=t}async function cc(t,e,n,s){try{let r=n?await function(t,e,n,s){return"ton"===function(t){const e=t.split("-");return e.length>1?e[0]:Zs[t]}(n)?oc.fetchActivitySlice(t,n,s,void 0,e):ac.getTokenTransactionSlice(t,n,s,void 0,e)}(t,e,n,s):await async function(t,e,n){const s=await V(t),[r,o]=await Promise.all(["ton"in s?oc.fetchActivitySlice(t,void 0,n,void 0,e):[],"tron"in s?ac.getAllTransactionSlice(t,n,e):[]]);return function(t,e){if(!t.length)return e;if(!e.length)return t;const n=Math.max(t[t.length-1].timestamp,e[e.length-1].timestamp),s=t=>{let{timestamp:e}=t;return e>=n};return Fn(t.filter(s),e.filter(s))}(r,o)}(t,e,s);return r=await Ra(t,r,n),r}catch(t){return void(0,i.SJ)("fetchPastActivities",n,t)}}function dc(t,e){return Di[t].checkTransactionDraft(e)}async function lc(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{accountId:s,password:r,toAddress:o,amount:a,tokenAddress:i,comment:c,fee:d,realFee:l,shouldEncrypt:u,isBase64Data:f,withDiesel:m,dieselAmount:h,isGaslessWithStars:p,noFeeCheck:w}=e,g="string"==typeof e.stateInit?mt.Cell.fromBase64(e.stateInit):e.stateInit,y=await K(s,t);let v;if(v=m&&"ton"===t?await oc.submitTransferWithDiesel({accountId:s,password:r,toAddress:o,amount:a,tokenAddress:i,data:c,shouldEncrypt:u,dieselAmount:h,isGaslessWithStars:p}):await Di[t].submitTransfer({accountId:s,password:r,toAddress:o,amount:a,tokenAddress:i,data:c,shouldEncrypt:u,isBase64Data:f,stateInit:g,fee:d,noFeeCheck:w}),"error"in v)return v;if(!n)return v;const A=i?ke(t,i):Ys(t).nativeToken.slug;let b;if("msgHash"in v){const{encryptedComment:e,msgHashNormalized:n}=v;[b]=fc(s,t,[{id:n,amount:a,fromAddress:y,toAddress:o,comment:u?void 0:c,encryptedComment:e,fee:l??0n,slug:A,externalMsgHashNorm:n,extra:{..."withW5Gasless"in v&&{withW5Gasless:v.withW5Gasless}}}]),"paymentLink"in v&&v.paymentLink&&rc({type:"openUrl",url:v.paymentLink,isExternal:!0})}else{const{txId:e}=v;[b]=fc(s,t,[{id:e,amount:a,fromAddress:y,toAddress:o,comment:c,fee:l??0n,slug:A}])}return{...v,activityId:b.id}}function uc(t,e,n,s){return Di.ton.decryptComment(t,e,n,s)}function fc(t,e,n){const{network:s}=I(t),r=n.map(((t,n)=>{const{toAddress:r}=t;let o;return o=t.normalizedAddress?t.normalizedAddress:"ton"===e?oc.normalizeAddress(r,s):r,function(t,e,n){const s=Vt(t.id,n);return tn({status:"pendingTrusted",kind:"transaction",timestamp:Date.now(),isIncoming:!1,normalizedAddress:e,...t,amount:-t.amount,id:s})}(t,o,n)}));return r.length&&rc({type:"newLocalActivities",activities:r,accountId:t}),r}function mc(t,e){return Di.ton.fetchEstimateDiesel(t,e)}async function hc(t,e){const n=await Di.ton.fetchActivityDetails(t,e);return(null==n?void 0:n.activity)??e}function pc(t,e,n,s){const r=[];let o=0;return s.forEach((s=>{if(s.shouldHide||s.id===Qn)return;const a=function(t,e,n,s,r){const o={id:Vt(e,n),timestamp:Date.now(),externalMsgHashNorm:e,status:"pending"};if("transaction"===t.kind){let e=t.normalizedAddress;if(!e&&"ton"===s&&r){const{network:n}=I(r);e=Di.ton.normalizeAddress(t.toAddress,n)}return{...t,...o,normalizedAddress:e||t.normalizedAddress}}return{...t,...o}}(s,n,o,e,t);r.push(a),o++})),r.length&&rc({type:"newLocalActivities",activities:r,accountId:t}),r}class wc extends Br.aU{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;super(t),this.code=e,this.displayError=n}}class gc extends wc{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Manifest content error",Ti.MANIFEST_CONTENT_ERROR)}}class yc extends wc{constructor(){let t=arguments.length>1?arguments[1]:void 0;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown error.",_i.UNKNOWN_ERROR,t)}}class vc extends wc{constructor(){let t=arguments.length>1?arguments[1]:void 0;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Bad request",_i.BAD_REQUEST_ERROR,t)}}class Ac extends wc{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown app error",_i.UNKNOWN_APP_ERROR)}}const bc=2e3;function kc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return"string"==typeof t&&t.length<=e}function Ec(t){if(!kc(t,bc))return!1;try{return new URL(t),!0}catch(t){return!1}}function Sc(t,e){return function(t){return"nft:transfer"===(null==t?void 0:t.type)}(e)?e.newOwner:tr(e)?e.destination:t}function Dc(t){return"unknown"===(null==t?void 0:t.type)}var Cc=n(48287).Buffer;const Ic="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Tc=Di.ton;let _c;const Bc=new Promise((t=>{_c=t}));let Rc;function Nc(t){Rc=t,_c()}async function Pc(t,e,n){try{await Kc(!0),Rc({type:"dappLoading",connectionType:"connect",isSse:t&&"sseOptions"in t});const s=await qc(e.manifestUrl),r=t.url||s.url,o=e.items.find((t=>{let{name:e}=t;return"ton_addr"===e})),a=e.items.find((t=>{let{name:e}=t;return"ton_proof"===e})),i=a?{timestamp:Math.round(Date.now()/1e3),domain:new URL(r).host,payload:a.payload}:void 0;if(!o)throw new vc("Missing 'ton_addr'");if(i&&!i.domain.includes("."))throw new vc("Invalid domain");let c=await async function(){const t=await nt();if(!t)throw new vc("The user is not authorized in the wallet");return t}();const{promiseId:d,promise:l}=Mi(),u={...s,url:r,connectedAt:Date.now(),...t.isUrlEnsured&&{isUrlEnsured:!0},..."sseOptions"in t&&{sse:t.sseOptions}},f=Ye(t);Rc({type:"dappConnect",identifier:"identifier"in t?t.identifier:void 0,promiseId:d,accountId:c,dapp:u,permissions:{address:!0,proof:!!i},proof:i});const m=await l;c=m.accountId,t.accountId=c,await Ki(c,u,f);const h=await $(c),p=Ni(h),w=[Lc(c,h.ton)];return i&&w.push(function(t,e){const{timestamp:n,domain:s,payload:r}=t,o=Cc.from(s);return{name:"ton_proof",proof:{timestamp:n,domain:{lengthBytes:o.byteLength,value:o.toString("utf8")},signature:e,payload:r}}}(i,m.proofSignature)),Rc({type:"updateDapps"}),Rc({type:"dappConnectComplete"}),{event:"connect",id:n,payload:{items:w,device:p}}}catch(t){return(0,i.SJ)("tonConnect:connect",t),(0,te.A)((()=>{Rc({type:"dappCloseLoading",connectionType:"connect"})})),Wc(n,t)}}async function Uc(t,e){try{const{url:n,accountId:s}=await Hc(t),r=Ye(t);if(!await Hi(s,n,r))throw new Ac;await async function(t,e,n,s){const r=await Hi(t,e,n);r&&await Ki(t,{...r,...s},n)}(s,n,r,{connectedAt:Date.now()});const o=await $(s),a=Ni(o);return{event:"connect",id:e,payload:{items:[Lc(s,o.ton)],device:a}}}catch(t){return(0,i.SJ)("tonConnect:reconnect",t),Wc(e,t)}}async function xc(t,e){try{const{url:e,accountId:n}=await Hc(t),s=Ye(t);await ji(n,e,s,!0),Rc({type:"updateDapps"})}catch(t){(0,i.SJ)("tonConnect:disconnect",t)}return{id:e.id,result:{}}}async function Fc(t,e){try{var n;const{url:s,accountId:r}=await Hc(t),{network:o}=I(r),a=JSON.parse(e.params[0]),{messages:i,network:c}=a,l=await $(r),{type:u,ton:{address:f,publicKey:m}}=l,h=Pi(l);if(i.length>h)throw new vc(`Payload contains more than ${h} messages, which exceeds limit`);const g=c?c===Bi.MAINNET?"mainnet":"testnet":void 0;let y=a.valid_until;y&&y>10**10&&(y=Math.round(y/1e3));const v="ledger"===u;let A;if(a.from&&(0,D.vn)(a.from)!==(0,D.vn)(f)){const t=(0,ft.aT)(m);if(!v||!await async function(t,e,n){var s;const[r,o]=await Promise.all([Is(t,n),(0,D.q5)(t,n)]);return"vesting"===(null===(s=r.contractInfo)||void 0===s?void 0:s.name)&&Ge(e,o)}(o,t,a.from))throw new vc(void 0,p.jf.WrongAddress);A=a.from}if(g&&o!==g)throw new vc(void 0,p.jf.WrongNetwork);await Kc(!0),Rc({type:"dappLoading",connectionType:"sendTransaction",accountId:r,isSse:Boolean("sseOptions"in t&&t.sseOptions)});const b=await async function(t,e,n){const s=e.map((t=>{const{address:e,amount:s,payload:r,stateInit:o}=t;return{toAddress:(0,D.PZ)(e)?(0,D.vn)(e,!0,n):e,amount:BigInt(s),payload:r?mt.Cell.fromBase64(r):void 0,stateInit:o?mt.Cell.fromBase64(o):void 0}})),r=await Tc.checkMultiTransactionDraft(t,s,!1,!0);return"error"in r&&r.error===p.KL.InsufficientBalance&&r.emulation?{emulation:{isFallback:!0,networkFee:r.emulation.networkFee},parsedPayloads:r.parsedPayloads}:r}(r,i,o);if("error"in b)throw new vc(b.error,b.error);const k=Ye(t),E=await Hi(r,s,k),C=await function(t,e,n,s){return Promise.all(e.map((async(r,o)=>{var a;let{address:i,amount:c,payload:l,stateInit:u}=r;const f=BigInt(c),m=(0,D.PZ)(i)?(0,D.vn)(i,!0,t):i,h=(0,D.vn)(i,void 0,t),p=(null==s?void 0:s[o])??(l?await He(t,m,l):void 0),{isScam:w}=Ht(h)||{};return{toAddress:m,amount:f,rawPayload:l,payload:p,stateInit:u,normalizedAddress:h,isScam:w,isDangerous:Dc(p),displayedToAddress:Sc(m,p),networkFee:n.isFallback?(0,d.fC)(n.networkFee,e.length):(null===(a=n.byTransactionIndex[o])||void 0===a?void 0:a.networkFee)??0n}})))}(o,i,b.emulation,b.parsedPayloads),{promiseId:T,promise:_}=Mi();Rc({type:"dappSendTransactions",promiseId:T,accountId:r,dapp:E,transactions:C,emulation:b.emulation.isFallback?void 0:(0,S.Up)(b.emulation,["activities","realFee"]),validUntil:y,vestingAddress:A});const B=await _;if(y&&y<Date.now()/1e3)throw new vc("The confirmation timeout has expired");const R=await Tc.sendSignedTransactions(r,B);if("error"in R)throw new yc(R.error,R.error);if(0===R.length)throw new yc("Failed transfers");R.length<B.length&&Rc({type:"showError",error:p.jf.PartialTransactionFailure});const N=R[0].msgHashNormalized;return!b.emulation.isFallback&&(null===(n=b.emulation.activities)||void 0===n?void 0:n.length)>0?pc(r,"ton",N,b.emulation.activities):fc(r,"ton",C.map((t=>{const{amount:e,normalizedAddress:n,payload:s,networkFee:r}=t,o="comment"===(null==s?void 0:s.type)?s.comment:void 0;return{id:N,amount:e,fromAddress:f,toAddress:n,comment:o,fee:r,slug:w.Tu9.slug,externalMsgHashNorm:N}}))),Rc({type:"dappTransferComplete",accountId:r}),{result:R[0].boc,id:e.id}}catch(t){return(0,i.SJ)("tonConnect:sendTransaction",t),Oc(t,e.id,"sendTransaction")}}function Oc(t,e,n){(0,te.A)((()=>{Rc({type:"dappCloseLoading",connectionType:n})}));let s,r=_i.UNKNOWN_ERROR,o="Unhandled error";return t instanceof Br.KB?(r=_i.USER_REJECTS_ERROR,o=t.message):t instanceof wc?(r=t.code,o=t.message,s=t.displayError):s=t instanceof Br.K$?t.displayError:p.QD.Unexpected,Rc&&en(Rc)&&s&&Rc({type:"showError",error:s}),{error:{code:r,message:o},id:e}}async function Mc(t,e){try{const{url:n,accountId:s}=await Hc(t);await Kc(!0),Rc({type:"dappLoading",connectionType:"signData",accountId:s,isSse:Boolean("sseOptions"in t&&t.sseOptions)});const{promiseId:r,promise:o}=Mi(),a=Ye(t),i=await Hi(s,n,a),c=JSON.parse(e.params[0]);Rc({type:"dappSignData",promiseId:r,accountId:s,dapp:i,payloadToSign:c});const d=await o;return Rc({type:"dappSignDataComplete",accountId:s}),{result:d,id:e.id}}catch(t){return(0,i.SJ)("tonConnect:signData",t),Oc(t,e.id,"signData")}}function Wc(t,e){let n=Ti.UNKNOWN_ERROR,s="Unhandled error";return e instanceof Br.KB?(n=Ti.USER_REJECTS_ERROR,s=e.message):e instanceof wc&&(n=e.code,s=e.message),{id:t,event:"connect_error",payload:{code:n,message:s}}}function Lc(t,e){const{network:n}=I(t),{publicKey:s,address:r}=e,o=Tc.getWalletStateInit(e);return{name:"ton_addr",address:(0,D.m$)(r),network:"mainnet"===n?Bi.MAINNET:Bi.TESTNET,publicKey:s,walletStateInit:o.toBoc({idx:!0,crc32:!0}).toString("base64")}}async function qc(t){try{const{url:e,name:n,iconUrl:s}=await(0,It.x3)(t),r=s.startsWith("data:")||""===s?Ic:s;if(!Ec(e)||!kc(n)||!Ec(r))throw new Error("Invalid data");return{url:e,name:n,iconUrl:r,manifestUrl:t}}catch(t){throw(0,i.SJ)("fetchDapp",t),new gc}}async function Hc(t){if(!t.url)throw new vc("Missing `url` in request");if(t.accountId)return t;const{network:e}=I(await async function(){const t=await nt();if(!t)throw new Error("The user is not authorized in the wallet");return t}()),n=await async function(t,e){const n=await $i()||{};let s,r=0;return Object.entries(n).forEach((n=>{let[o,a]=n;const i=a[e];i&&I(o).network===t&&Object.values(i).forEach((t=>{t.connectedAt>r&&(r=t.connectedAt,s=o)}))})),s}(e,t.url);if(!n)throw new vc("The connection is outdated, try relogin");return{...t,accountId:n}}async function Kc(t){return!(!w.hL1||!t&&Rc&&en(Rc)||(await Ii("onWindowNeeded"),await Bc,0))}var jc=n(48287).Buffer;const Jc=300,zc=24,Vc=6e4,$c=w.UMQ;let Gc,Qc,Yc,Zc,Xc=[];async function td(t){let{url:e,isFromInAppBrowser:n,identifier:s}=t;const{searchParams:r,origin:o}=new URL(e),a=r.get("ret")||"back",c=Number(r.get("v")),d=r.get("id"),l="back"!==a&&"none"!==a,u=r.get("r");if(!u)return l&&(Qc={validUntil:Date.now()+Vc,url:a,isFromInAppBrowser:n}),$c?"empty":void 0;const f=(0,te.A)((()=>JSON.parse(u)))||JSON.parse(decodeURIComponent(u));(0,i.MD)("SSE Start connection:",{version:c,appClientId:d,connectRequest:f,ret:a,connectionOrigin:o,identifier:s});const{secretKey:m,publicKey:p}=h().box.keyPair(),w=(0,ft.My)(m),g=(0,ft.My)(p),y={url:void 0,identifier:s,sseOptions:{clientId:g,appClientId:d,secretKey:w,lastOutputId:0}};if(await H,!f)return void Yc({type:"showError",error:"Invalid TON Connect link"});const v=await Pc(y,f,0);if("connect_error"===v.event){const{code:t}=v.payload;[Ti.MANIFEST_CONTENT_ERROR,Ti.MANIFEST_NOT_FOUND_ERROR,Ti.BAD_REQUEST_ERROR,Ti.UNKNOWN_APP_ERROR,Ti.METHOD_NOT_SUPPORTED].includes(t)&&Yc({type:"showError",error:v.payload.message})}return await nd(v,w,g,d),"connect_error"!==v.event&&await ed(),l?a:void 0}async function ed(){const[t,e,n]=await Promise.all([W.getItem("sseLastEventId"),$i(),et()]);if(!e||!n)return;Xc=Object.entries(e).reduce(((t,e)=>{let[s,r]=e;if(I(s).network!==n)return t;for(const e of Object.values(r))for(const n of Object.values(e)){var o;null!==(o=n.sse)&&void 0!==o&&o.clientId&&t.push({...n.sse,accountId:s,url:n.url})}return t}),[]);const s=(0,S.JY)(Xc,"clientId").filter(Boolean);s.length&&(Gc&&((0,te.A)((()=>{Gc.close()})),Gc=void 0),Gc=function(t,e){const n=new URL(`${w.Qxf}events`);return n.searchParams.set("client_id",t.join(",")),e&&n.searchParams.set("last_event_id",e),new EventSource(n)}(s,t),Gc.onopen=()=>{$c&&Yc({type:"tonConnectOnline"}),(0,i.MD)("EventSource opened")},Gc.onerror=t=>{(0,i.SJ)("EventSource",t.type)},Gc.onmessage=async t=>{const{from:e,message:n}=JSON.parse(t.data),s=Xc.find((t=>{let{appClientId:n}=t;return n===e}));if(!s)return void(0,i.MD)(`Dapp with clientId ${e} not found`);const{accountId:r,clientId:a,appClientId:c,secretKey:d,url:l,lastOutputId:u}=s,f=function(t,e,n){const s=jc.from(t,"base64"),r=s.subarray(0,zc),o=s.subarray(zc),a=h().box.open(o,r,jc.from(e,"hex"),jc.from(n,"hex")),i=new TextDecoder("utf-8").decode(a);return JSON.parse(i)}(n,c,d);(0,i.MD)("SSE Event:",f),await function(t){return W.setItem("sseLastEventId",t)}(t.lastEventId);const m={clientId:a,appClientId:c,secretKey:d,lastOutputId:u},p=await o[f.method]({url:l,accountId:r,sseOptions:m},f);if(await nd(p,d,a,c),Qc){const{validUntil:t,url:e,isFromInAppBrowser:n}=Qc;t>Date.now()&&Yc({type:"openUrl",url:e,isExternal:!n}),Qc=void 0}})}function nd(t,e,n,s,r){const o=function(t,e,n){const s=(0,m.randomBytes)(zc),r=h().box(t,s,jc.from(e,"hex"),jc.from(n,"hex"));return jc.concat([s,r]).toString("base64")}(jc.from(JSON.stringify(t)),s,e);return async function(t,e,n,s){const r=new URL(`${w.Qxf}message`);r.searchParams.set("client_id",e),r.searchParams.set("to",n),r.searchParams.set("ttl",Jc.toString()),s&&r.searchParams.set("topic",s);const o=await fetch(r,{method:"POST",body:t});await(0,It.EQ)(o)}(o,n,s,r)}async function sd(){return await W.getItem("baseCurrency")??w.wOb}function rd(t){return W.setItem("baseCurrency",t)}const od=new Promise((t=>{Zc=t}));function ad(){Zc()}async function id(){await od}const{ton:cd}=Di;function dd(){}function ld(t,e,n){return cd.checkStakeDraft(t,e,n)}function ud(t,e,n){return cd.checkUnstakeDraft(t,e,n)}async function fd(t,e,n,s,r){const{address:o}=await j(t),a=await cd.submitStake(t,e,n,s);if("error"in a)return a;let i;return s.tokenSlug,w.Tu9.slug,[i]=fc(t,"ton",[{id:a.msgHashNormalized,amount:n,fromAddress:o,toAddress:a.toAddress,fee:r??0n,type:"stake",slug:s.tokenSlug,externalMsgHashNorm:a.msgHashNormalized}]),{...a,txId:i.id}}async function md(t,e,n,s,r){const{address:o}=await j(t),a=await cd.submitUnstake(t,e,n,s);if("error"in a)return a;const[i]=fc(t,"ton",[{id:a.msgHashNormalized,amount:a.toncoinAmount,fromAddress:o,toAddress:a.toAddress,fee:r??0n,type:"unstakeRequest",slug:w.Tu9.slug,externalMsgHashNorm:a.msgHashNormalized,...a.localActivityParams}]);return{...a,txId:i.id}}async function hd(t){const{ton:e}=await V(t);return e?Bt(`/staking/profits/${e.address}`):[]}async function pd(){try{const t=(0,D.N7)("mainnet"),e=await Bt("/staking/common"),n={...e,liquid:{...e.liquid,available:(0,Xt.UH)(e.liquid.available)},jettonPools:await Promise.all(e.jettonPools.map((async e=>{const n=t.open(Jo.Ml.createFromAddress(mt.Address.parse(e.pool))),s=await n.getStorageData();return{...e,poolConfig:s}})))};n.round.start*=1e3,n.round.end*=1e3,n.round.unlock*=1e3,n.prevRound.start*=1e3,n.prevRound.end*=1e3,n.prevRound.unlock*=1e3,function(t){Vo=t,$o.resolve()}(n)}catch(t){(0,i.SJ)("tryUpdateLiquidStakingState",t)}}async function wd(t,e,n,s){const{address:r}=await j(t);let o;switch(n.type){case"jetton":o=await cd.submitTokenStakingClaim(t,e,n);break;case"ethena":o=await cd.submitUnstakeEthenaLocked(t,e,n)}if("error"in o)return o;const[a]=fc(t,"ton",[{id:o.msgHashNormalized,amount:o.amount,fromAddress:r,toAddress:o.toAddress,fee:s??0n,slug:w.Tu9.slug,externalMsgHashNorm:o.msgHashNormalized,...o.localActivityParams}]);return{...o,txId:a.id}}var gd=n(48287).Buffer;const yd=gd.from("MyTonWallet_AuthToken_n6i0k4w8pb");function vd(t,e){return Di[t].checkApiAvailability(e)}async function Ad(t,e){const n=await j(t);let{authToken:s}=n;const{publicKey:r,isInitialized:o}=n;if(!s){const r=await Di.ton.fetchPrivateKey(t,e),o=h().sign.detached(yd,r);s=gd.from(o).toString("base64"),await Q(t,{ton:{...n,authToken:s}})}return o||(s+=`:${r}`),s}async function bd(){try{const[t,e,n]=await Promise.all([G(),W.getItem("stateVersion"),W.getItem("mnemonicsEncrypted")]);return JSON.stringify({accounts:t,stateVersion:e,mnemonicsEncrypted:n})}catch(t){return void(0,i.SJ)("fetchAccountConfigForDebugPurposesOnly",t)}}function kd(){return!0}function Ed(t,e,n){Xo(t,e,n)}async function Sd(t,e,n){try{return await Bt("/onramp-url",{chain:t,address:e,theme:n})}catch(t){return(0,i.SJ)("getMoonpayOnrampUrl",t),(0,Br.QS)(t)}}const Dd=Di.ton;let Cd;function Id(t){Cd=t}async function Td(t,e,n){const{network:s}=I(t),r=await Ad(t,e),{address:o,version:a}=await j(t);n.walletVersion=a;const{id:i,transfers:c}=await Pd(r,n),d=c.map((t=>({...t,amount:BigInt(t.amount),isBase64Payload:!0})));try{await Dd.validateDexSwapTransfers(s,o,n,d);const e=await Dd.checkMultiTransactionDraft(t,d,n.shouldTryDiesel);return"error"in e?(await Ca({address:o,swapId:i,authToken:r,error:e.error}),e):{...e,id:i,transfers:c}}catch(t){throw await Ca({address:o,swapId:i,authToken:r,error:Bd(t)}),t}}async function _d(t,e,n,s,r){const o=s.id,a=await j(t),{address:i}=a,c=a.authToken??await Ad(t,e);try{const a=n.map((t=>({...t,amount:BigInt(t.amount),isBase64Payload:!0})));s.from!==w.Tu9.symbol&&(a[0]=await Dd.insertMintlessPayload("mainnet",i,s.from,a[0]));const d=await Dd.submitMultiTransfer({accountId:t,password:e,messages:a,isGasless:r});if("error"in d)return await Ca({address:i,swapId:o,authToken:c,error:d.error}),d;delete d.messages[0].stateInit;const l=Da(s,s.from),u=Da(s,s.to),f={...s,id:Vt(d.msgHashNormalized),from:l,to:u,kind:"swap",externalMsgHashNorm:d.msgHashNormalized,extra:(0,S.Oy)({withW5Gasless:d.withW5Gasless})};return Cd({type:"newLocalActivities",accountId:t,activities:[f]}),await Ca({address:i,swapId:o,authToken:c,msgHash:d.msgHash}),Ii("onSwapCreated",t,f.timestamp-1),{activityId:f.id}}catch(t){throw await Ca({address:i,swapId:o,authToken:c,error:Bd(t)}),t}}function Bd(t){return"string"==typeof t?t:t.stack}async function Rd(t,e){const{address:n}=await j(t),s=await Promise.allSettled(e.map((t=>async function(t,e){const{swapVersion:n}=await ea();return Ia(await Bt(`/swap/history/${t}/${e}`,{swapVersion:n??w.AuB}))}(n,t.replace("swap:",""))))),r=[],o=s.map(((t,n)=>{if("rejected"!==t.status)return Sa(t.value);t.reason instanceof Br.K$&&404===t.reason.statusCode&&r.push(e[n])})).filter(Boolean);return{nonExistentIds:r,swaps:o}}async function Nd(t,e){const n=(await j(t)).version,{swapVersion:s}=await ea();return _t("/swap/ton/estimate",{...e,swapVersion:s??w.AuB,walletVersion:n},{isAllowBadRequest:!0})}async function Pd(t,e){const{swapVersion:n}=await ea();return _t("/swap/ton/build",{...e,swapVersion:n??w.AuB,isMsgHashMode:!0},{authToken:t})}function Ud(){return Bt("/swap/assets")}function xd(t){return Bt("/swap/pairs",{asset:t})}function Fd(t){return _t("/swap/cex/estimate",t,{isAllowBadRequest:!0})}function Od(t){return Bt("/swap/cex/validate-address",t)}async function Md(t,e,n){const s=await Ad(t,e),{swapVersion:r}=await ea(),{swap:o}=await _t("/swap/cex/createTransaction",{...n,swapVersion:r??w.AuB},{authToken:s}),a=Ia(o),i=Sa(a);return Cd({type:"newActivities",accountId:t,activities:[i]}),Ii("onSwapCreated",t,a.timestamp-1),{swap:a,activity:i}}async function Wd(t,e,n){const s=await lc(t,e,!1);if("ton"===t&&"msgHash"in s){const{accountId:t,password:r}=e,{address:o}=await j(t),a=await Ad(t,r??"");await Ca({address:o,authToken:a,msgHash:s.msgHash,swapId:n})}return s}const Ld=30*zn,qd=Vn,Hd=30*zn,Kd={focused:Vn,notFocused:10*Vn},jd=1e3;let Jd,zd,Vd;const $d=w.gmk?function(){const t={};let e;function n(e,n){if(t[e])return;const s=Object.values(Di).map((t=>t.setupInactivePolling(e,n,Jd)));t[e]=()=>{for(const t of s)t()}}function s(){for(const[e,n]of Object.entries(t))n(),delete t[e]}const r=Wn.SB;return{setActiveAccount:r((async function(r){var o;if(r===e)return;if(void 0===r)return void s();if(!e||I(r).network!==I(e).network)return void await async function(t){s(),e=t;const{network:r}=I(e),o=await G(),a=Object.keys(o).filter((t=>t!==e&&I(t).network===r));a.map((t=>n(t,o[t])))}(r);const a=e;e=r,null===(o=t[e])||void 0===o||o.call(t),delete t[e];const i=await z(a);i&&n(a,i)})),addAccount:r((function(t,s){const r=t===e,o=e&&I(t).network===I(e).network;!r&&o&&n(t,s)})),removeAccount:r((function(e){var n;null===(n=t[e])||void 0===n||n.call(t),delete t[e]})),removeNetworkAccounts:r((function(t){e&&I(e).network===t&&s()})),removeAllAccounts:r((function(){s()}))}}():void 0,Gd=function(){const t=new Map;return(e,n,s,r)=>{const o=`${e} ${s}`;let a=t.get(o);a||(a=new Oa((t=>{Jd({type:"updatingStatus",kind:s,accountId:e,isUpdating:t})})),t.set(o,a)),a.toggle(n,r)}}();function Qd(t){var e;Jd=t,async function(){try{const t=await me.all();await we(t)}finally{he.resolve()}}(),Promise.allSettled([Wt(),Yd(),!w.OuE&&Zd(),pd()]).then((()=>ad())),Xd(),null===(e=zd)||void 0===e||e(),zd=function(){const t=[Xn({period:Ld,skipInitialPoll:!0,poll:Yd}).stop,Xn({period:qd,skipInitialPoll:!0,async poll(){await Promise.all([Wt(),!w.OuE&&pd(),Xd(),Zd()])}}).stop];return()=>{for(const e of t)e()}}()}async function Yd(){try{const t=await sd(),e=await Bt("/assets",{base:t});for(const t of e)t.isFromBackend=!0;await he.promise;const n=ye(),s=Object.values(n.bySlug).reduce(((t,e)=>(!e.isFromBackend&&e.tokenAddress&&t.push(e.tokenAddress),t)),[]),r=s.length?await _t(`/assets?base=${t}`,{assets:s.slice(0,jd)}):void 0;await we(e,Jd,r,t,!0)}catch(t){(0,i.SJ)("tryUpdateTokens",t)}}async function Zd(){try{const t=await Ud();await he.promise;const e=ye(),n=t.reduce(((t,n)=>{var s;return t[n.slug]={...(0,S.cJ)(n,["blockchain"]),chain:"blockchain"in n?n.blockchain:n.chain,tokenAddress:"contract"in n&&n.contract!==w.Tu9.symbol?n.contract:n.tokenAddress,price:(null===(s=e.bySlug[n.slug])||void 0===s?void 0:s.price)??0},t}),{});Jd({type:"updateSwapTokens",tokens:n})}catch(t){(0,i.SJ)("tryUpdateSwapTokens",t)}}async function Xd(){try{const t=await Bt("/utils/get-config");!function(t){Qo=t,Yo.resolve()}(t);const{isLimited:e,isCopyStorageEnabled:n=!1,supportAccountsCount:s=1,now:r,country:o,swapVersion:a,isUpdateRequired:i}=t;Jd({type:"updateConfig",isLimited:e,isCopyStorageEnabled:n,supportAccountsCount:s,countryCode:o,isAppUpdateRequired:i,swapVersion:a});const c=(new Date).getTime();Math.abs(r-c)>Hd&&Jd({type:"incorrectTime"})}catch(t){(0,i.SJ)("tryUpdateConfig",t)}}async function tl(t,e){var n;if(null===(n=Vd)||void 0===n||n(),Vd=void 0,null==$d||$d.setActiveAccount(t),t){const n=await V(t),s=[!w.TI6&&nl(t,n).stop,...Object.keys(Di).map((s=>Di[s].setupActivePolling(t,n,Jd,Gd.bind(void 0,t,s),function(t,e){const{slug:n}=Ys(e).nativeToken;return Object.entries(t).reduce(((t,s)=>{let[r,o]=s;return(r===n||r.startsWith(`${e}-`))&&(t[r]=o),t}),{})}(e,s))))];Vd=()=>{for(const t of s)t&&t()}}}function el(){null==$d||$d.removeAllAccounts()}function nl(t,e){let n;const s=(0,S.cJ)(e,["mnemonicEncrypted"]);return Xn({period:Kd,async poll(){try{const e=await _t("/account-config",s);Ge(e,n)||(n=e,Jd({type:"updateAccountConfig",accountId:t,accountConfig:e}))}catch(t){(0,i.SJ)("setupBackendAccountPolling",t)}}})}async function sl(t,e){!function(t){Xe=t}(t);const n=(0,_.k)(e);(0,l.q)(),al(t),Qd(t),ic(t),Id(t),Ql(t),n.isDappSupported&&(qi(t),Nc(t)),n.isSseSupported&&(Yc=t),await function(t,e,n){return Ze=async function(t,e,n){let s=Number(await W.getItem("stateVersion",!0));if(19===s)return;if(w.TI6&&!s&&await async function(t){const e=w.hL1?W:M,[n="v3R2",s,r,o,a,i,c]=await Promise.all([e.getItem("walletVersion"),e.getItem("isTestnet"),e.getItem("address"),e.getItem("words"),e.getItem("publicKey"),e.getItem("proxy"),e.getItem("magic")]);s&&t({type:"updateSettings",settings:{isTestnet:!0}});const d=s?"testnet":"mainnet",l=`0-ton-${d}`;if(r&&o&&a){const u="mainnet"===d?"testnet":"mainnet",f=`0-ton-${u}`,m=(0,D.vn)(r,!1,u),h={};h[l]={type:"ton",mnemonicEncrypted:o,ton:{type:"ton",address:r,version:n,publicKey:a,index:0}},h[f]={type:"ton",mnemonicEncrypted:o,ton:{type:"ton",address:m,version:n,publicKey:a,index:0}},await W.setItem("accounts",h),t({type:"migrateCoreApplication",isTestnet:s,accountId:l,address:r,secondAccountId:f,secondAddress:m,isTonProxyEnabled:i,isTonMagicEnabled:c}),["walletVersion","isTestnet","words","address","publicKey","magic","proxy","isLedger","ledgerTransportType","__time","isDebug"].forEach((t=>{e.removeItem(t)}))}}(t),w.UMQ&&!s)if(await W.getItem("accounts",!0))s=10;else{const t=await F.getItem("stateVersion");t&&(s=Number(t))}if(w.hL1&&!s&&!await W.getItem("addresses")&&(s=await F.getItem("stateVersion"),s)){const t=await F.getAll();await W.setMany(t)}if(!s)return void await W.setItem("stateVersion",19);if(!s){const t=await W.getItem("mnemonicEncrypted");if(t&&(await W.setItem("mnemonicsEncrypted",JSON.stringify({[w.Kih]:t})),await W.removeItem("mnemonicEncrypted")),!t)for(const t of["mnemonicsEncrypted","addresses","publicKeys"]){const e=await W.getItem(t);if(!e)continue;const n=JSON.parse(e),s=Object.entries(n).reduce(((t,e)=>{let[n,s]=e;const[r,o="ton"]=n.split("-");return t[[r,o].join("-")]=s,t}),{});await W.setItem(t,JSON.stringify(s))}s=1,await W.setItem("stateVersion",s)}if(1===s){const t=await W.getItem("addresses");if(t&&t.includes("-undefined"))for(const t of["mnemonicsEncrypted","addresses","publicKeys"]){const e=(await W.getItem(t)).replace("-undefined","-ton");await W.setItem(t,e)}s=2,await W.setItem("stateVersion",s)}if(s>=2&&s<=4){for(const t of["addresses","mnemonicsEncrypted","publicKeys","dapps"]){const e=await W.getItem(t);"string"==typeof e&&await W.setItem(t,JSON.parse(e))}s=5,await W.setItem("stateVersion",s)}if(5===s){const t=await W.getItem("dapps");if(t){for(const e of Object.values(t))for(const t of Object.values(e))t.connectedAt=1;await W.setItem("dapps",t)}s=6,await W.setItem("stateVersion",s)}if(6===s){for(const t of["addresses","mnemonicsEncrypted","publicKeys","accounts","dapps"]){let e=await W.getItem(t);e&&(e=Object.entries(e).reduce(((t,e)=>{let[n,s]=e;const r=I(n),o=nn({...r,network:"mainnet"}),a=nn({...r,network:"testnet"});return{...t,[o]:s,[a]:s}}),{}),await W.setItem(t,e))}s=7,await W.setItem("stateVersion",s)}if(7===s){const e=await W.getItem("addresses");if(e){const n=await W.getItem("publicKeys"),s=await W.getItem("accounts")??{};for(const[r,o]of Object.entries(e)){const e=(0,D.vn)(o,!1);s[r]={...s[r],address:e,publicKey:n[r]},t({type:"updateAccount",accountId:r,chain:"ton",address:e})}await W.setItem("accounts",s),await W.removeItem("addresses"),await W.removeItem("publicKeys")}s=8,await W.setItem("stateVersion",s)}if(8===s){if((0,_.u)().isSseSupported){const t=await W.getItem("dapps");if(t){const e=[];for(const n of Object.values(t))for(const t of Object.values(n)){var r,o;null!==(r=t.sse)&&void 0!==r&&r.appClientId&&e.push({clientId:null===(o=t.sse)||void 0===o?void 0:o.appClientId})}}}s=9,await W.setItem("stateVersion",s)}if(9===s){if(w.UMQ){const t=await F.getAll();for(const[e,n]of Object.entries(t))if(await R.setItem(e,n),!Ge(n,await R.getItem(e,!0)))throw new Error("Migration error!");await F.clear()}s=10,await W.setItem("stateVersion",s)}let a=!1;if((0,_.u)().isIosApp&&s>=10&&s<=13&&(await sn(),a=!0),10===s||11===s||12===s){const t=await W.getItem("accounts",!0);if(t){for(const n of Object.values(t)){const{publicKey:t,address:s,version:r}=n;if(r||!t)continue;const o=(0,ft.aT)(t),a=e.pickWalletByAddress("mainnet",o,s);n.version=a.version}await W.setItem("accounts",t)}s=13,await W.setItem("stateVersion",s)}if(13===s){const e=await W.getItem("accounts",!0);if(e){for(const[n,s]of Object.entries(e)){const{network:e}=I(n);"testnet"===e&&(s.address=(0,D.vn)(s.address,!1,e),t({type:"updateAccount",accountId:n,chain:"ton",address:s.address}))}s=14,await W.setItem("accounts",e)}}14!==s&&15!==s||((0,_.u)().isIosApp&&!a&&await sn(),s=16,await W.setItem("stateVersion",s)),16===s&&(await async function(){const t=await W.getItem("accounts");if(!t)return;const e=await W.getItem("mnemonicsEncrypted"),n={};for(const[s,r]of Object.entries(t)){const{address:t,version:o,publicKey:a,authToken:i,ledger:c,isInitialized:d}=r,l={type:"ton",address:t,version:o,publicKey:a,authToken:i,isInitialized:d,index:(null==c?void 0:c.index)??0};n[s]=c?{type:"ledger",ton:l,driver:c.driver,deviceId:c.deviceId,deviceName:c.deviceName}:{type:"ton",mnemonicEncrypted:e[s],ton:l}}await W.setItem("accounts",n)}(),s=17,await W.setItem("stateVersion",s)),17===s&&(await async function(){const t=await W.getItem("dapps");if(!t)return;const e={};for(const[n,s]of Object.entries(t)){e[n]={};for(const[t,r]of Object.entries(s)){const s=Ye(r);e[n][t]={[s]:r}}}await W.setItem("dapps",e)}(),s=18,await W.setItem("stateVersion",s)),18===s&&(await async function(t){if(!t||0===t.length)return;const e=await W.getItem("accounts");e&&await W.setItem("accounts",(0,S.Up)(e,t))}(n),s=19,await W.setItem("stateVersion",s))}(t,e,n).catch((t=>{var e;(0,i.SJ)("Migration error",t),null===(e=Xe)||void 0===e||e({type:"showError",error:"Migration error"})})),Ze}(t,Di.ton,e.accountIds),n.isSseSupported&&ed(),async function(t){let e=await W.getItem("referrer");e||(e=t.referrer??await async function(){return(await Bt("/referrer/get")).referrer}(),e&&await W.setItem("referrer",e))}(e)}function rl(){!async function(){var t;null===(t=zd)||void 0===t||t(),zd=void 0,el(),await tl(void 0,{})}(),Xe=void 0}let ol;function al(t){ol=t}async function il(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await Ze;const n=!await nt();await W.setItem("currentAccountId",t),q(),w.hL1&&Ii("onFirstLogin"),n&&be(ol),tl(t,e)}async function cl(){tl(void 0,{}),await W.removeItem("currentAccountId"),w.hL1&&Ii("onFullLogout")}function dl(t){return j(t)}function ll(t){return V(t)}!function(t){for(const[e,n]of Object.entries(t))Ci[e]=(Ci[e]??[]).concat([n])}({onDappDisconnected:async function(t,e){const n=Xc.find((n=>n.url===e&&n.accountId===t));if(!n)return;const{secretKey:s,clientId:r,appClientId:o}=n,a={event:"disconnect",id:n.lastOutputId+1,payload:{}};await nd(a,s,r,o)},onDappsChanged:ed});const{ton:ul,tron:fl}=Di;function ml(t){return t?f.we(256).split(" "):ul.generateMnemonic()}function hl(t,e,n,s){return s||(s=w.RoE),wl(t,e,n,s)}function pl(t){return it(t)&&w.iAh||Di.ton.validateMnemonic(t)}async function wl(t,e,n,s){const r=E(e);let o=it(e);const a=await ul.validateMnemonic(e);if(!(r||a||o&&w.iAh))throw new Error("Invalid mnemonic");const i=await ct(e,n),c=await dt(i,n).catch((()=>{}));if(!n||!c)return{error:p.QD.DebugError};let d,l;try{if(o&&a&&(l=await ul.getWalletFromMnemonic(e,t,s),l.lastTxId&&(o=!1)),o){const n=fl.getWalletFromBip39Mnemonic(t,e);l=await ul.getWalletFromBip39Mnemonic(t,e),d={type:"bip39",mnemonicEncrypted:i,tron:n,ton:l}}else l||(l=r?await ul.getWalletFromPrivateKey(e[0],t,s):await ul.getWalletFromMnemonic(e,t,s)),d={type:"ton",mnemonicEncrypted:i,ton:l};const n=await bl(t,d),c=w.TI6?await gl({accountId:n,network:t,mnemonic:e,mnemonicEncrypted:i,version:s}):void 0;return il(n),{accountId:n,addressByChain:st(d),secondNetworkAccount:c}}catch(t){return(0,Br.QS)(t)}}async function gl(t){const{mnemonic:e,version:n,mnemonicEncrypted:s}=t,{network:r,accountId:o}=t,a=await ul.getWalletFromMnemonic(e,r,n),i="testnet"===r?"mainnet":"testnet";a.address=(0,D.vn)(a.address,!1,i);const c={type:"ton",mnemonicEncrypted:s,ton:a};return{accountId:await bl(i,c,I(o).id),addressByChain:{ton:a.address},network:i}}function yl(t,e,n){return zs(t,e,n)}async function vl(t,e){const{publicKey:n,address:s,index:r,driver:o,deviceId:a,deviceName:i,version:c}=e;return{accountId:await bl(t,{type:"ledger",ton:{type:"ton",address:s,publicKey:n,version:c,index:r},driver:o,deviceId:a,deviceName:i}),address:s,walletInfo:e}}const Al=(0,Wn.JL)(1);async function bl(t,e,n){const s=await Al.run((async()=>{const s=await async function(t,e){const n=(await async function(){return Object.keys(await W.getItem("accounts")||{})}()).map((t=>I(t).id));return function(t){const{id:e,network:n}=t;return`${e}-${n}`}({id:void 0===e||n.includes(e)?0===n.length?L:Math.max(...n)+1:e,network:t})}(t,n);return await X(s,"accounts",e),s}));return function(t,e){null==$d||$d.addAccount(t,e)}(s,e),s}async function kl(t){!function(t){null==$d||$d.removeNetworkAccounts(t)}(t),await Promise.all([cl(),tt(t,"accounts"),(0,_.u)().isDappSupported&&Yi(t)])}async function El(){el(),await Promise.all([cl(),W.removeItem("accounts"),(0,_.u)().isDappSupported&&Qi(),me.clear()])}async function Sl(t,e,n){!function(t){null==$d||$d.removeAccount(t)}(t),await Promise.all([Z(t,"accounts"),(0,_.u)().isDappSupported&&Gi(t)]),await il(e,n)}async function Dl(t,e){for(const[n,s]of Object.entries(await G())){if(!("mnemonicEncrypted"in s))continue;const r=await dt(s.mnemonicEncrypted,t),o=await ct(r,e);await Q(n,{mnemonicEncrypted:o})}}async function Cl(t,e){try{const n={type:"view"};let s;if(e.ton){const r=await ul.getWalletFromAddress(t,e.ton);if("error"in r)return{...r,chain:"ton"};n.ton=r.wallet,s=r.title}e.tron&&(n.tron={type:"tron",address:e.tron,index:0});const r=await bl(t,n);return il(r),{accountId:r,title:s,resolvedAddresses:st(n)}}catch(t){return(0,Br.QS)(t)}}async function Il(t,e){const{network:n}=I(t),s=await $(t),r={...s,ton:ul.getOtherVersionWallet(n,s.ton,e)},o=await G(),a=Object.entries(o).find((t=>{var e;let[,n]=t;return(null===(e=n.ton)||void 0===e?void 0:e.address)===r.ton.address&&n.type===r.type}));if(a)return{isNew:!1,accountId:a[0]};const i="ledger"===s.type?{index:s.ton.index,driver:s.driver}:void 0;return{isNew:!0,accountId:await bl(n,r),address:r.ton.address,ledger:i}}var Tl=n(48287).Buffer;const _l=Di.ton;async function Bl(t,e){const n=await V(t),s=await Ls(t,e,n);return Tl.from(s).toString("hex")}async function Rl(t,e){return lt(t,e,await V(t))}function Nl(){return u.wordlists.default}async function Pl(){try{const t=await G();return!!t&&"object"==typeof t&&Object.keys(t).length>0}catch{return!1}}async function Ul(t){try{const[e,n]=await async function(){const t=await G();return Object.entries(t).find((t=>{let[,{type:e}]=t;return"ledger"!==e&&"view"!==e}))}()??[];if(!e||!n)return!1;const s=await lt(e,t,n);return Boolean(s)}catch{return!1}}function xl(t,e){Wi(t,e)}function Fl(t,e){Wi(t,e)}function Ol(t,e){Wi(t,e)}function Ml(t,e){Wi(t,e)}function Wl(t,e){!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown rejection reason";const n=Fi.get(t);n&&(n.reject(new Br.KB(e)),Fi.delete(t))}(t,e)}async function Ll(t,e){const{network:n}=I(t);return e||({address:e}=await j(t)),_l.getWalletSeqno(n,e)}function ql(t,e){return K(t,e)}function Hl(t,e){return Di.ton.isAddressInitialized(t,e)}function Kl(t,e,n){return Di[t].getWalletBalance(e,n)}function jl(t,e){return Di.ton.getContractInfo(t,e)}function Jl(t,e){return Di.ton.getWalletInfo(t,e)}async function zl(t,e){try{return await oo(t,e)}catch(t){return(0,Br.QS)(t)}}async function Vl(t){const e=await j(t);return _l.getWalletStateInit(e).toBoc({idx:!0,crc32:!0}).toString("base64")}const{ton:$l}=Di;let Gl;function Ql(t){Gl=t}async function Yl(t,e){if(!(await V(t)).ton)return;const n=await $l.getAccountNfts(t,{collectionAddress:e});Gl({type:"updateNfts",accountId:t,nfts:n,shouldAppend:!0})}function Zl(t){return $l.checkNftTransferDraft(t)}async function Xl(t,e,n,s,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0n;const{address:a}=await j(t),i=await $l.submitNftTransfers({accountId:t,password:e,nfts:n,toAddress:s,comment:r});if("error"in i)return i;const c=(0,d.fC)(o,Object.keys(i.messages).length),l=fc(t,"ton",i.messages.map(((t,e)=>({id:i.msgHashNormalized,amount:0n,fromAddress:a,toAddress:s,comment:r,fee:c,normalizedAddress:t.toAddress,slug:w.Tu9.slug,externalMsgHashNorm:i.msgHashNormalized,nft:null==n?void 0:n[e]}))));return{...i,activityIds:(0,S.JY)(l,"id")}}async function tu(t,e){return"ton"in await V(t)&&$l.checkNftOwnership(t,e)}const{ton:eu}=Di;function nu(t,e){const n=(0,S.JY)(e,"address");return eu.checkDnsRenewalDraft(t,n)}async function su(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0n;const{address:r}=await j(t),o=(0,S.dU)(n,"address"),a=[];for await(const{addresses:i,result:c}of eu.submitDnsRenewal(t,e,Object.keys(o))){if("error"in c){a.push(c);continue}const e=fc(t,"ton",i.map((t=>{const e=o[t];return{id:c.msgHashNormalized,amount:0n,fromAddress:r,toAddress:e.address,fee:s/BigInt(n.length),normalizedAddress:e.address,slug:w.Tu9.slug,externalMsgHashNorm:c.msgHashNormalized,nft:e,type:"dnsRenew"}})));a.push({activityIds:(0,S.JY)(e,"id")})}return a}function ru(t,e,n){return eu.checkDnsChangeWalletDraft(t,e.address,n)}async function ou(t,e,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0n;const{address:o}=await j(t),a=await eu.submitDnsChangeWallet(t,e,n.address,s);if("error"in a)return a;const[i]=fc(t,"ton",[{id:a.msgHashNormalized,amount:0n,fromAddress:o,toAddress:n.address,fee:r,normalizedAddress:n.address,slug:w.Tu9.slug,externalMsgHashNorm:a.msgHashNormalized,nft:n,type:"dnsChangeAddress"}]);return{activityId:i.id}}async function au(t,e,n){const s=Er(t,await $(t),n),r=await s.signTonProof(e);return"error"in r?r:{signature:r.toString("base64")}}async function iu(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{password:s,validUntil:r,vestingAddress:o}=n,a=Di.ton,i=e.map((t=>{let{toAddress:e,amount:n,stateInit:s,rawPayload:r,payload:o}=t;return{toAddress:e,amount:n,payload:r?mt.Cell.fromBase64(r):void 0,stateInit:s?mt.Cell.fromBase64(s):void 0,hints:{tokenAddress:"tokens:transfer"===(null==o?void 0:o.type)?ve(o.slug).tokenAddress:void 0}}}));return a.signTransfers(t,i,s,r,o)}async function cu(t,e,n,s){const r=Math.floor(Date.now()/1e3),o=new URL(e).host,a=await $(t),i=Er(t,a,s),c=await i.signData(r,o,n);return"error"in c?c:{signature:c.toString("base64"),address:a.ton.address,timestamp:r,domain:o,payload:n}}async function du(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.wOb;await he.promise;const s=ve(t);return s?Bt(`/prices/chart/${s.chain===w.Tu9.chain&&s.tokenAddress?s.tokenAddress:s.symbol}`,{base:n,period:e}):[]}async function lu(t){try{return await _t("/notifications/subscribe",t,{shouldRetry:!0})}catch(t){return(0,i.SJ)("subscribeNotifications",t),(0,Br.QS)(t)}}async function uu(t){try{return await _t("/notifications/unsubscribe",t,{shouldRetry:!0})}catch(t){return(0,i.SJ)("unsubscribeNotifications",t),(0,Br.QS)(t)}}!function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:self;function s(t,s){t.channel=e,s?n.postMessage(t,s):n.postMessage(t)}(arguments.length>3?arguments[3]:void 0)||function(t){self.onerror=e=>{var n,s;const r=(null===(n=e.error)||void 0===n?void 0:n.message)||"Uncaught exception in worker";(0,i.SJ)(r,e.error),t({type:"unhandledError",error:{message:r,stack:null===(s=e.error)||void 0===s?void 0:s.stack}})},self.addEventListener("unhandledrejection",(e=>{var n,s;const r=(null===(n=e.reason)||void 0===n?void 0:n.message)||"Unhandled rejection in worker";(0,i.SJ)(r,e.reason),t({type:"unhandledError",error:{message:r,stack:null===(s=e.reason)||void 0===s?void 0:s.stack}})}))}(s),n.addEventListener("message",(function(n){var r;(null===(r=n.data)||void 0===r?void 0:r.channel)===e&&async function(t,e,n,s,r){switch(s||(s=t=>{n({type:"update",update:t})}),e.type){case"init":{var o;const{args:n}=e,a="function"==typeof t?t("init",r,s,...n):null===(o=t.init)||void 0===o?void 0:o.call(t,s,...n);await a;break}case"callMethod":{const{messageId:s,name:o,args:a,withCallback:d}=e;try{if("function"!=typeof t&&!t[o])return;if(s&&d){const t=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const o=e[e.length-1];var a;n({type:"methodCallback",messageId:s,callbackArgs:e},(a=o)instanceof ArrayBuffer||a instanceof ImageBitmap?[o]:void 0)};c.set(s,t),a.push(t)}const e="function"==typeof t?await t(o,r,...a):await t[o](...a),{arrayBuffer:i}="object"==typeof e&&e&&"arrayBuffer"in e||{};s&&n({type:"methodResponse",messageId:s,response:e},i?[i]:void 0)}catch(t){(0,i.SJ)(o,t),s&&n({type:"methodResponse",messageId:s,error:{message:t.message}})}s&&c.delete(s);break}case"cancelProgress":{const t=c.get(e.messageId);t&&(t.isCanceled=!0);break}}}(t,n.data,s)}))}((function(t,e){for(var n=arguments.length,s=new Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];return"init"===t?sl(s[0],s[1]):t.startsWith("tonConnect_")?(t=t.replace("tonConnect_",""),(0,o[t])(...s)):(0,a[t])(...s)}))},23174:(t,e,n)=>{"use strict";n.d(e,{Dn:()=>s.D,KL:()=>r.KL,Nu:()=>r.Nu,QD:()=>r.QD,jc:()=>r.jc,jf:()=>r.jf});var s=n(10428),r=n(56051)},24082:(t,e,n)=>{"use strict";n.d(e,{HE:()=>i,d$:()=>c});var s=n(809);const r="undefined:";function o(t,e){return void 0===e?`${r}marker`:e}function a(t,e){return"string"==typeof e&&e.startsWith(s.tH)?BigInt(e.slice(s.tH.length)):"string"==typeof e&&e.startsWith(r)?void 0:e}function i(t){return JSON.stringify(t,o)}function c(t){return"string"==typeof t?JSON.parse(t,a):t}},24887:(t,e,n)=>{"use strict";n.d(e,{in:()=>i,GK:()=>m,Xy:()=>f});var s=n(1307),r=n(3476),o=n(75269),a=n(48287).Buffer;function i(t){return t?(e=t,BigInt(`0x${(0,o.sha256_sync)(e).toString("hex")}`)):0n;var e}function c(t,e,n){const r=t.asSlice(),o=r.loadUint(8),a=r.loadUint(8);if(o!==e||a!==n)throw new Error("Invalid dns record value prefix");return function(t){t.loadUint(3);let e=t.loadUintBig(8);e>127n&&(e-=256n);const n=t.loadUintBig(256);if("0:0"==`${e.toString(10)}:${n.toString(16)}`)return;const r=`${e.toString(10)}:${n.toString(16).padStart(64,"0")}`;return s.Address.parse(r)}(r)}function d(t){return c(t,186,147)}function l(t){const e=t.asSlice(),n=e.loadUint(8),s=e.loadUint(8);if(116!==n||115!==s)throw new Error("Invalid dns record value prefix");return e.loadBuffer(4).toString("hex")}async function u(t,e,n,o,a){const f=8*n.length,m=(new s.Builder).storeBuffer(n).asCell(),h=i(o),{stack:p}=await t.callGetMethod(s.Address.parse(e),"dnsresolve",[{type:"slice",cell:m},{type:"int",value:h}]),w=p.readNumber();let g;try{g=p.readCell()}catch(t){}if(0!==w){if(w%8!=0)throw new Error("domain split not at a component boundary");if(w>f)throw new Error(`invalid response ${w}/${f}`);if(w===f)return o===r.kJ.DnsNextResolver?g?d(g):void 0:o===r.kJ.Wallet?g?function(t){return c(t,159,211)}(g):void 0:o===r.kJ.Site?g?function(t){const e=t.asSlice(),n=e.loadUint(8),s=e.loadUint(8);return 173===n||1===s?function(t){const e=t.asSlice(),n=e.loadUint(8),s=e.loadUint(8);if(173!==n||1!==s)throw new Error("Invalid dns record value prefix");return e.loadBuffer(4).toString("hex")}(t):l(t)}(g):void 0:o===r.kJ.BagId?g?l(g):void 0:g;if(g){const e=d(g);return a?o===r.kJ.DnsNextResolver?e:void 0:u(t,e.toString(),n.slice(w/8),o,!1)}}}function f(t){if(!t||!t.length)throw new Error("empty domain");if("."===t)return"";t=t.toLowerCase();for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<=32)throw new Error("bytes in range 0..32 are not allowed in domain names");for(let e=0;e<t.length;e++){const n=t.substring(e,e+1);for(let t=127;t<=159;t++)if(n===String.fromCharCode(t))throw new Error("bytes in range 127..159 are not allowed in domain names")}const e=t.split(".");return e.forEach((t=>{if(!t.length)throw new Error("domain name cannot have an empty component")})),`${e.reverse().join("\0")}\0`}function m(t,e,n,s,r){let o=f(n);return o.length<126&&(o=`\0${o}`),u(t,e,a.from(o),s,r)}},31481:(t,e,n)=>{"use strict";n.d(e,{APY:()=>Et,AuB:()=>It,BV6:()=>tt,C39:()=>a,FHx:()=>w,Guj:()=>r,HGV:()=>D,HUv:()=>T,InW:()=>p,Irq:()=>b,Kih:()=>v,KmP:()=>kt,Kzb:()=>W,MVx:()=>d,N7B:()=>F,NFS:()=>P,Oig:()=>c,OuE:()=>N,PcM:()=>y,Pcx:()=>ft,Pjb:()=>K,Q$0:()=>C,Qxf:()=>R,RoE:()=>pt,SKs:()=>I,TI6:()=>o,TUC:()=>vt,Tu9:()=>z,UMQ:()=>u,VG8:()=>it,WRE:()=>At,WVU:()=>St,X1K:()=>U,X6R:()=>j,X7L:()=>st,X7T:()=>V,_$E:()=>_,_J8:()=>A,aPk:()=>O,cSq:()=>yt,dGN:()=>et,dL4:()=>L,dqR:()=>x,eO4:()=>B,eZ2:()=>wt,eaP:()=>Tt,gR8:()=>bt,gY_:()=>q,gmk:()=>f,gs5:()=>Bt,hL1:()=>l,hl5:()=>i,iAh:()=>g,iQn:()=>gt,kNZ:()=>Dt,lHX:()=>E,lfO:()=>dt,oWZ:()=>nt,pV9:()=>ht,pyR:()=>S,q5n:()=>H,qL:()=>J,qMf:()=>M,rQT:()=>ut,rUK:()=>Z,rcB:()=>Ct,tKX:()=>m,vPi:()=>lt,wOb:()=>mt,wpN:()=>at,xlJ:()=>k,xrY:()=>X,yTE:()=>h,zll:()=>G});var s=n(65606);const r="production",o=!1,a=o?"TON Wallet":"MyTonWallet",i="4.1.3",c="production"!==r&&"perf"!==r&&"test"!==r,d=!1,l=!1,u=(s.env.IS_OPERA_EXTENSION,!1),f=!1,m=!0,h="UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp",p="UQC9lQOaEHC6YASiJJ2NrKEOlITMMQmc8j0_iZEHy-4sl3tG",w="Shoot!\nSomething went wrong, please see the error details in Dev Tools Console.",g=!o,y=64,v="0-ton-mainnet",A="https://toncenter.mytonwallet.org",b="",k="",E="https://tonapiio.mytonwallet.org",S="https://toncenter-testnet.mytonwallet.org",D="cd6d372885d0ebc7bbd92d55f3d3121068ab75daac4ca6192e966106e3ff10d3",C="",I="https://tonapiio-testnet.mytonwallet.org",T="https://api.mytonwallet.org",_="https://api.mytonwallet.org/proxy",B="https://ipfs.io/ipfs/",R="https://tonconnectbridge.mytonwallet.org/bridge/",N=o,P=65536e3,U=1000000000n,x=15000000n,F=12e5,O=[],M="EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o",W="EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE",L=100000000n,q=2,H=["0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2","0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2"],K=/^https?:\/\/nft\.(fragment\.com\/gift\/[\w-]+-\d+)\.\w+$/i,j="super:telegram-gifts",J="EQCQE2L9hfwx1V8sgmF9keraHx1rNK9VmgR1ctVvINBGykyM",z={name:"Toncoin",symbol:"TON",slug:"toncoin",decimals:9,chain:"ton",cmcSlug:"toncoin"},V={name:"TRON",symbol:"TRX",slug:"trx",decimals:6,chain:"tron",cmcSlug:"tron"},$={name:"MyTonWallet Coin",symbol:"MY",slug:"ton-eqcfvnlrbn",decimals:9,chain:"ton",minterAddress:"EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w"},G={ton:{isMemoSupported:!0,isDnsSupported:!0,addressRegex:/^([-\w_]{48}|0:[\da-h]{64})$/i,addressPrefixRegex:/^([-\w_]{1,48}|0:[\da-h]{0,64})$/i,nativeToken:z},tron:{isMemoSupported:!1,isDnsSupported:!1,addressRegex:/^T[1-9A-HJ-NP-Za-km-z]{33}$/,addressPrefixRegex:/^T[1-9A-HJ-NP-Za-km-z]{0,33}$/,nativeToken:V,mainnet:{apiUrl:"https://tronapi.mytonwallet.org",usdtAddress:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"},testnet:{apiUrl:"https://api.shasta.trongrid.io",usdtAddress:"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs"}}},Q="tron-tr7nhqjekq",Y="tron-tg3xxyexbk",Z="ton-eqcxe6mutq",X="EQC3roTiRRsoLzfYVK7yVVoIZjTEqAjQU3ju7aQ7HWTVL5o5",tt="EQChGuD1u0e7KUWHH5FaYh_ygcLXhsdG2nSHPXHW8qqnpZXW",et=new Set([z.slug,Z,V.slug,Q]),nt="EQCM3B12QK1e4yZSf8GtBRT0aLMNyEsBc_DhVfRRtOEffLez",st="https://dns-image.mytonwallet.org/img?d=",rt={name:"Tether USD",symbol:"USDT",decimals:6,chain:"tron"},ot={name:"Tether USD",symbol:"USD₮",chain:"ton",slug:Z,decimals:6,tokenAddress:"EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs"},at={name:"Ethena USDe",symbol:"USDe",chain:"ton",tokenAddress:"EQAIb6KmdfdDR7CN1GBqVJuP25iCnLKCvBlJ07Evuu2dzP5f",slug:"ton-eqaib6kmdf",decimals:6,image:"https://imgproxy.toncenter.com/binMwUmcnFtjvgjp4wSEbsECXwfXUwbPkhVvsvpubNw/pr:small/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvVVNEZS5wbmc"},it={name:"Ethena tsUSDe",symbol:"tsUSDe",chain:"ton",tokenAddress:"EQDQ5UUyPHrLcQJlPAczd_fjxn8SLrlNQwolBznxCdSlfQwr",slug:"ton-eqdq5uuyph",decimals:6,image:"https://cache.tonapi.io/imgproxy/vGZJ7erwsWPo7DpVG_V7ygNn7VGs0szZXcNLHB_l0ms/rs:fill:200:200:1/g:no/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvdHNVU0RlLnBuZw.webp"},ct=(it.tokenAddress,z.slug,V.slug,z.slug,V.slug,{isFromBackend:!0,price:0,priceUsd:0,percentChange24h:0}),dt={toncoin:{...z,isFromBackend:!0,price:3.1,priceUsd:3.1,percentChange24h:0},trx:{...V,...ct},[Q]:{...rt,slug:Q,tokenAddress:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",...ct},[Y]:{...rt,slug:Y,tokenAddress:"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs",...ct},[Z]:{...ot,image:"https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp",slug:Z,...ct},[$.slug]:{...$,image:"https://cache.tonapi.io/imgproxy/Qy038wCBKISofJ0hYMlj6COWma330cx3Ju1ZSPM2LRU/rs:fill:200:200:1/g:no/aHR0cHM6Ly9teXRvbndhbGxldC5pby9sb2dvLTI1Ni1ibHVlLnBuZw.webp",...ct},[at.slug]:{...at,...ct},[it.slug]:{...it,...ct}},lt=(z.symbol,z.chain,z.slug,z.decimals,z.slug,z.slug,z.slug,"keyval-store"),ut="keyval",ft="windowProvider",mt="USD",ht=(z.symbol,"UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ"),pt="W5",wt=["v3R1","v3R2","v4R2","W5"],gt=["v3R2","v4R2"],yt=1e4,vt=3,At=500,bt=4,kt="EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW",Et=30000000n,St=["EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2","EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ","EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s","EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm","EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd","EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD","EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p","EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO","EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe","EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-","EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu","EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH","EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy","EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT","EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu","EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw"],Dt=/((ftp|https?):\/\/)?(?<host>(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z][-a-zA-Z0-9]{1,62})\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g,Ct=/telegram[:\s-]*((@[a-z0-9_]+)|(https:\/\/)?(t\.me|telegram\.me|telegram\.dog)\/[a-z0-9_]+)/gim,It=(new Set(["173e31eee054cb0c76f77edc7956bed766bf48a1f63bd062d87040dcd3df700f","5226dd4e6db9af26b24d5ca822bc4053b7e08152f923932abf25030c7e38bb42","fea2c08a704e5192b7f37434927170440d445b87aab865c3ea2a68abe7168204","e691cf9081a8aeb22ed4d94829f6626c9d822752e035800b5543c43f83d134b5","301ce25925830d713b326824e552e962925c4ff45b1e3ea21fc363a459a49b43","02250f83fbb8624d859c2c045ac70ee2b3b959688c3d843aec773be9b36dbfc3","dba3adb2c917db80fd71a6a68c1fc9e12976491a8309d5910f9722efc084ce4d","7da9223b90984d6a144e71611a8d7c65a6298cad734faed79438dc0f7a8e53d1","ddf80de336d580ab3c11d194f189c362e2ca1225cae224ea921deeaba7eca818","eb9d9891a32ec94425c09735f6ade73f4c171da0091f874d6e9d25247d583990","f66c149de251ffd031bdb34b79abe43a062ba16b815433691e3ec40a77f01d71","bca42dbdcbc0d885aaffb1eeeb027d9f338c2dd68701a05641c1d1c3171a7400"]),new Set(["ton-eqcqc6ehrj","ton-eqcbzvsfwq",it.slug]),z.slug,z.slug,3),Tt="v1",_t=[{suffixes:["ton"],baseFormat:/^([-\da-z]+\.){0,2}[-\da-z]{4,126}$/i,resolver:"EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz",collectionName:"TON DNS Domains"},{suffixes:["t.me"],baseFormat:/^([-\da-z]+\.){0,2}[-_\da-z]{4,32}$/i,resolver:"EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi",isTelemint:!0,collectionName:"Telegram Usernames"},{suffixes:["vip","ton.vip","vip.ton"],baseFormat:/^([-\da-z]+\.){0,2}?[\da-z]{1,24}$/i,resolver:"EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS",collectionName:"VIP DNS Domains",isUnofficial:!0},{suffixes:["gram"],baseFormat:/^([-\da-z]+\.){0,2}[\da-z]{1,127}$/i,resolver:"EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ",collectionName:"GRAM DNS Domains",isUnofficial:!0}],Bt=o?_t.filter((t=>{let{isUnofficial:e}=t;return!e})):_t},37836:(t,e,n)=>{"use strict";n.d(e,{Gf:()=>a,JL:()=>i,SB:()=>c,nF:()=>o,v7:()=>r});var s=n(9705);const r=t=>new Promise((e=>{setTimeout((()=>e()),t)}));function o(t,e){let n,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!1;async function a(){await("function"==typeof e?e():r(e)),i()}async function i(){if(n)try{const e=n;n=void 0,await t(...e)}finally{a()}else o=!1}return function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n=e,o||(o=!0,s?i():a())}}function a(t,e){const n=setTimeout(e,t);return()=>clearTimeout(n)}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=[];let n=0;const r=r=>{const o=new s.A;return e.push((async()=>{try{o.resolve(await r())}catch(t){o.reject(t)}})),n<t&&(async()=>{for(n++;e.length;){const t=e.shift();await t()}n--})(),o.promise};return{run:r,wrap:t=>function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return r((()=>t(...n)))}}}function c(t){return i(1).wrap(t)}},39989:(t,e,n)=>{"use strict";n.d(e,{K$:()=>a,KB:()=>o,QS:()=>i,aU:()=>r});var s=n(23174);class r extends Error{constructor(t,e){super(t),this.displayError=e,this.name=this.constructor.name}}class o extends r{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Canceled by the user")}}class a extends r{constructor(t,e){super(t,s.QD.ServerError),this.statusCode=e}}function i(t){if(t instanceof a)return{error:t.displayError};throw t}},41758:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});var s=n(809);function r(){return(0,s.nd)(8)}},45232:(t,e,n)=>{"use strict";n.d(e,{EQ:()=>f,I5:()=>h,J5:()=>l,fU:()=>p,x3:()=>c,x6:()=>d});var s=n(31481),r=n(39989),o=n(55029),a=n(37836);const i=3e4;function c(t,e,n){return d(function(t){return`${s._$E}/download-json?url=${encodeURIComponent(t)}`}(t.toString()),e,n)}async function d(t,e,n){const s=new URL(t);return e&&Object.entries(e).forEach((t=>{let[e,n]=t;void 0!==n&&(Array.isArray(n)?n.forEach((t=>{s.searchParams.append(e,t.toString())})):s.searchParams.set(e,n.toString()))})),(await l(s,n)).json()}async function l(t,e,n){const{retries:c=s.TUC,timeouts:d=s.cSq,shouldSkipRetryFn:l=m}=n??{};let f,h="Unknown error.";for(let n=1;n<=c;n++)try{n>1&&(0,o.MD)(`Retry request #${n}:`,t.toString(),f);const s=Array.isArray(d)?d[n-1]??d[d.length-1]:Math.min(d*n,i),r=await u(t,e,s);if(f=r.status,f>=400){const{error:t}=await r.json().catch((()=>{}));throw new Error(t??`HTTP Error ${f}`)}return r}catch(t){if(h="string"==typeof t?t:t.message??h,l(h,f))throw new r.K$(h,f);n<c&&await(0,a.v7)(s.WRE*n)}throw new r.K$(h)}async function u(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.cSq;const r=new AbortController,o=setTimeout((()=>{r.abort()}),n);try{return await fetch(t,{...e,signal:r.signal})}finally{clearTimeout(o)}}async function f(t,e){if(!(t.ok||null!=e&&e.includes(t.status))){let{error:e,errors:s}=await t.json().catch((()=>{}));var n;throw!e&&s&&s.length&&(e=null===(n=s[0])||void 0===n?void 0:n.msg),new r.K$(e??`HTTP Error ${t.status}`,t.status)}return t}function m(t,e){return e&&[400,404].includes(e)}function h(t){return`${s._$E}/download-lottie?url=${encodeURIComponent(t)}`}function p(t){return t.replace("ipfs://",s.eO4)}},48217:(t,e,n)=>{"use strict";n.d(e,{H:()=>u});var s=n(31481),r=n(10309);const o=s.hL1&&!["chrome-extension:","moz-extension:"].includes(self.location.protocol);var a=n(55029),i=n(37836);const c=("development"===s.Guj||"staging"===s.Guj)&&"object"==typeof window&&!o,d=(0,i.nF)((t=>window.alert(t)),10*r.Z2);function l(t){t instanceof ErrorEvent&&"ResizeObserver loop limit exceeded"===t.message||(t.preventDefault(),u(t instanceof ErrorEvent?t.error||t.message:t.reason))}function u(t){(0,a.SJ)("handleError",t);const e="string"==typeof t?t:t.message,n="object"==typeof t?t.stack:void 0;e.endsWith("Failed to import rlottie-wasm.js")||c&&d(`${s.FHx}\n\n${e||t}\n${n}`)}self.addEventListener("error",l),self.addEventListener("unhandledrejection",l)},48805:(t,e,n)=>{"use strict";n.d(e,{z:()=>h});var s=1e6,r="[big.js] ",o=r+"Invalid ",a=o+"decimal places",i=o+"rounding mode",c=r+"Division by zero",d={},l=void 0,u=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function f(t,e,n,s){var r=t.c;if(n===l&&(n=t.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(i);if(e<1)s=3===n&&(s||!!r[0])||0===e&&(1===n&&r[0]>=5||2===n&&(r[0]>5||5===r[0]&&(s||r[1]!==l))),r.length=1,s?(t.e=t.e-e+1,r[0]=1):r[0]=t.e=0;else if(e<r.length){if(s=1===n&&r[e]>=5||2===n&&(r[e]>5||5===r[e]&&(s||r[e+1]!==l||1&r[e-1]))||3===n&&(s||!!r[0]),r.length=e,s)for(;++r[--e]>9;)if(r[e]=0,0===e){++t.e,r.unshift(1);break}for(e=r.length;!r[--e];)r.pop()}return t}function m(t,e,n){var s=t.e,r=t.c.join(""),o=r.length;if(e)r=r.charAt(0)+(o>1?"."+r.slice(1):"")+(s<0?"e":"e+")+s;else if(s<0){for(;++s;)r="0"+r;r="0."+r}else if(s>0)if(++s>o)for(s-=o;s--;)r+="0";else s<o&&(r=r.slice(0,s)+"."+r.slice(s));else o>1&&(r=r.charAt(0)+"."+r.slice(1));return t.s<0&&n?"-"+r:r}d.abs=function(){var t=new this.constructor(this);return t.s=1,t},d.cmp=function(t){var e,n=this,s=n.c,r=(t=new n.constructor(t)).c,o=n.s,a=t.s,i=n.e,c=t.e;if(!s[0]||!r[0])return s[0]?o:r[0]?-a:0;if(o!=a)return o;if(e=o<0,i!=c)return i>c^e?1:-1;for(a=(i=s.length)<(c=r.length)?i:c,o=-1;++o<a;)if(s[o]!=r[o])return s[o]>r[o]^e?1:-1;return i==c?0:i>c^e?1:-1},d.div=function(t){var e=this,n=e.constructor,r=e.c,o=(t=new n(t)).c,i=e.s==t.s?1:-1,d=n.DP;if(d!==~~d||d<0||d>s)throw Error(a);if(!o[0])throw Error(c);if(!r[0])return t.s=i,t.c=[t.e=0],t;var u,m,h,p,w,g=o.slice(),y=u=o.length,v=r.length,A=r.slice(0,u),b=A.length,k=t,E=k.c=[],S=0,D=d+(k.e=e.e-t.e)+1;for(k.s=i,i=D<0?0:D,g.unshift(0);b++<u;)A.push(0);do{for(h=0;h<10;h++){if(u!=(b=A.length))p=u>b?1:-1;else for(w=-1,p=0;++w<u;)if(o[w]!=A[w]){p=o[w]>A[w]?1:-1;break}if(!(p<0))break;for(m=b==u?o:g;b;){if(A[--b]<m[b]){for(w=b;w&&!A[--w];)A[w]=9;--A[w],A[b]+=10}A[b]-=m[b]}for(;!A[0];)A.shift()}E[S++]=p?h:++h,A[0]&&p?A[b]=r[y]||0:A=[r[y]]}while((y++<v||A[0]!==l)&&i--);return E[0]||1==S||(E.shift(),k.e--,D--),S>D&&f(k,D,n.RM,A[0]!==l),k},d.eq=function(t){return 0===this.cmp(t)},d.gt=function(t){return this.cmp(t)>0},d.gte=function(t){return this.cmp(t)>-1},d.lt=function(t){return this.cmp(t)<0},d.lte=function(t){return this.cmp(t)<1},d.minus=d.sub=function(t){var e,n,s,r,o=this,a=o.constructor,i=o.s,c=(t=new a(t)).s;if(i!=c)return t.s=-c,o.plus(t);var d=o.c.slice(),l=o.e,u=t.c,f=t.e;if(!d[0]||!u[0])return u[0]?t.s=-c:d[0]?t=new a(o):t.s=1,t;if(i=l-f){for((r=i<0)?(i=-i,s=d):(f=l,s=u),s.reverse(),c=i;c--;)s.push(0);s.reverse()}else for(n=((r=d.length<u.length)?d:u).length,i=c=0;c<n;c++)if(d[c]!=u[c]){r=d[c]<u[c];break}if(r&&(s=d,d=u,u=s,t.s=-t.s),(c=(n=u.length)-(e=d.length))>0)for(;c--;)d[e++]=0;for(c=e;n>i;){if(d[--n]<u[n]){for(e=n;e&&!d[--e];)d[e]=9;--d[e],d[n]+=10}d[n]-=u[n]}for(;0===d[--c];)d.pop();for(;0===d[0];)d.shift(),--f;return d[0]||(t.s=1,d=[f=0]),t.c=d,t.e=f,t},d.mod=function(t){var e,n=this,s=n.constructor,r=n.s,o=(t=new s(t)).s;if(!t.c[0])throw Error(c);return n.s=t.s=1,e=1==t.cmp(n),n.s=r,t.s=o,e?new s(n):(r=s.DP,o=s.RM,s.DP=s.RM=0,n=n.div(t),s.DP=r,s.RM=o,this.minus(n.times(t)))},d.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},d.plus=d.add=function(t){var e,n,s,r=this,o=r.constructor;if(t=new o(t),r.s!=t.s)return t.s=-t.s,r.minus(t);var a=r.e,i=r.c,c=t.e,d=t.c;if(!i[0]||!d[0])return d[0]||(i[0]?t=new o(r):t.s=r.s),t;if(i=i.slice(),e=a-c){for(e>0?(c=a,s=d):(e=-e,s=i),s.reverse();e--;)s.push(0);s.reverse()}for(i.length-d.length<0&&(s=d,d=i,i=s),e=d.length,n=0;e;i[e]%=10)n=(i[--e]=i[e]+d[e]+n)/10|0;for(n&&(i.unshift(n),++c),e=i.length;0===i[--e];)i.pop();return t.c=i,t.e=c,t},d.pow=function(t){var e=this,n=new e.constructor("1"),s=n,r=t<0;if(t!==~~t||t<-1e6||t>1e6)throw Error(o+"exponent");for(r&&(t=-t);1&t&&(s=s.times(e)),t>>=1;)e=e.times(e);return r?n.div(s):s},d.prec=function(t,e){if(t!==~~t||t<1||t>s)throw Error(o+"precision");return f(new this.constructor(this),t,e)},d.round=function(t,e){if(t===l)t=0;else if(t!==~~t||t<-s||t>s)throw Error(a);return f(new this.constructor(this),t+this.e+1,e)},d.sqrt=function(){var t,e,n,s=this,o=s.constructor,a=s.s,i=s.e,c=new o("0.5");if(!s.c[0])return new o(s);if(a<0)throw Error(r+"No square root");0===(a=Math.sqrt(s+""))||a===1/0?((e=s.c.join("")).length+i&1||(e+="0"),i=((i+1)/2|0)-(i<0||1&i),t=new o(((a=Math.sqrt(e))==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+i)):t=new o(a+""),i=t.e+(o.DP+=4);do{n=t,t=c.times(n.plus(s.div(n)))}while(n.c.slice(0,i).join("")!==t.c.slice(0,i).join(""));return f(t,(o.DP-=4)+t.e+1,o.RM)},d.times=d.mul=function(t){var e,n=this,s=n.constructor,r=n.c,o=(t=new s(t)).c,a=r.length,i=o.length,c=n.e,d=t.e;if(t.s=n.s==t.s?1:-1,!r[0]||!o[0])return t.c=[t.e=0],t;for(t.e=c+d,a<i&&(e=r,r=o,o=e,d=a,a=i,i=d),e=new Array(d=a+i);d--;)e[d]=0;for(c=i;c--;){for(i=0,d=a+c;d>c;)i=e[d]+o[c]*r[d-c-1]+i,e[d--]=i%10,i=i/10|0;e[d]=i}for(i?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},d.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==l){if(t!==~~t||t<0||t>s)throw Error(a);for(n=f(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return m(n,!0,!!r)},d.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==l){if(t!==~~t||t<0||t>s)throw Error(a);for(t=t+(n=f(new n.constructor(n),t+n.e+1,e)).e+1;n.c.length<t;)n.c.push(0)}return m(n,!1,!!r)},d[Symbol.for("nodejs.util.inspect.custom")]=d.toJSON=d.toString=function(){var t=this,e=t.constructor;return m(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},d.toNumber=function(){var t=Number(m(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(t.toString()))throw Error(r+"Imprecise conversion");return t},d.toPrecision=function(t,e){var n=this,r=n.constructor,a=n.c[0];if(t!==l){if(t!==~~t||t<1||t>s)throw Error(o+"precision");for(n=f(new r(n),t,e);n.c.length<t;)n.c.push(0)}return m(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!a)},d.valueOf=function(){var t=this,e=t.constructor;if(!0===e.strict)throw Error(r+"valueOf disallowed");return m(t,t.e<=e.NE||t.e>=e.PE,!0)};var h=function t(){function e(n){var s=this;if(!(s instanceof e))return n===l?t():new e(n);if(n instanceof e)s.s=n.s,s.e=n.e,s.c=n.c.slice();else{if("string"!=typeof n){if(!0===e.strict&&"bigint"!=typeof n)throw TypeError(o+"value");n=0===n&&1/n<0?"-0":String(n)}!function(t,e){var n,s,r;if(!u.test(e))throw Error(o+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(n<0&&(n=s),n+=+e.slice(s+1),e=e.substring(0,s)):n<0&&(n=e.length),r=e.length,s=0;s<r&&"0"==e.charAt(s);)++s;if(s==r)t.c=[t.e=0];else{for(;r>0&&"0"==e.charAt(--r););for(t.e=n-s-1,t.c=[],n=0;s<=r;)t.c[n++]=+e.charAt(s++)}}(s,n)}s.constructor=e}return e.prototype=d,e.DP=20,e.RM=1,e.NE=-7,e.PE=21,e.strict=!1,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}()},50110:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var s=n(31481),r=n(48217);const o=!s.MVx;function a(t,e){if(!o)return t();const{rescue:n,always:s,shouldIgnoreError:a}=e??{};try{return t()}catch(t){return null==n||n(t),void(a||(0,r.H)(t))}finally{null==s||s()}}},51936:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const s=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);function r(t){return!s.has(t&&t.code)}},52598:function(t,e){!function(t){"use strict";const e=Object.freeze({__proto__:null,default:{}}),n=BigInt(0),s=BigInt(1),r=BigInt(2),o=BigInt(8),a=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),i=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:a,n:a,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),c=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),d=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const l=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),u=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),f=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),m=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class h{constructor(t,e,n,s){this.x=t,this.y=e,this.z=n,this.t=s}static fromAffine(t){if(!(t instanceof b))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(b.ZERO)?h.ZERO:new h(t.x,t.y,s,P(t.x*t.y))}static toAffineBatch(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;const r=new Array(t.length),o=U(t.reduce(((t,s,o)=>s===n?t:(r[o]=t,P(t*s,e))),s),e);return t.reduceRight(((t,s,o)=>s===n?t:(r[o]=P(t*r[o],e),P(t*s,e))),o),r}(t.map((t=>t.z)));return t.map(((t,n)=>t.toAffine(e[n])))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){w(t);const{x:e,y:n,z:s}=this,{x:r,y:o,z:a}=t,i=P(e*a),c=P(r*s),d=P(n*a),l=P(o*s);return i===c&&d===l}negate(){return new h(P(-this.x),this.y,this.z,P(-this.t))}double(){const{x:t,y:e,z:n}=this,{a:s}=i,o=P(t*t),a=P(e*e),c=P(r*P(n*n)),d=P(s*o),l=t+e,u=P(P(l*l)-o-a),f=d+a,m=f-c,p=d-a,w=P(u*m),g=P(f*p),y=P(u*p),v=P(m*f);return new h(w,g,v,y)}add(t){w(t);const{x:e,y:s,z:o,t:a}=this,{x:i,y:c,z:d,t:l}=t,u=P((s-e)*(c+i)),f=P((s+e)*(c-i)),m=P(f-u);if(m===n)return this.double();const p=P(o*r*l),g=P(a*r*d),y=g+p,v=f+u,A=g-p,b=P(y*m),k=P(v*A),E=P(y*A),S=P(m*v);return new h(b,k,S,E)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,n=[];let s=this,r=s;for(let o=0;o<e;o++){r=s,n.push(r);for(let e=1;e<2**(t-1);e++)r=r.add(s),n.push(r);s=r.double()}return n}wNAF(t,e){!e&&this.equals(h.BASE)&&(e=b.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=e&&A.get(e);r||(r=this.precomputeWindow(n),e&&1!==n&&(r=h.normalizeZ(r),A.set(e,r)));let o=h.ZERO,a=h.BASE;const i=1+256/n,c=2**(n-1),d=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let e=0;e<i;e++){const n=e*c;let i=Number(t&d);t>>=u,i>c&&(i-=l,t+=s);const f=n,m=n+Math.abs(i)-1,h=e%2!=0,w=i<0;0===i?a=a.add(p(h,r[f])):o=o.add(p(w,r[m]))}return h.normalizeZ([o,a])[0]}multiply(t,e){return this.wNAF(q(t,i.l),e)}multiplyUnsafe(t){let e=q(t,i.l,!1);const r=h.BASE,o=h.ZERO;if(e===n)return o;if(this.equals(o)||e===s)return this;if(this.equals(r))return this.wNAF(e);let a=o,c=this;for(;e>n;)e&s&&(a=a.add(c)),c=c.double(),e>>=s;return a}isSmallOrder(){return this.multiplyUnsafe(i.h).equals(h.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(i.l/r).double();return i.l%r&&(t=t.add(this)),t.equals(h.ZERO)}toAffine(t){const{x:e,y:n,z:r}=this,a=this.equals(h.ZERO);null==t&&(t=a?o:U(r));const i=P(e*t),c=P(n*t),d=P(r*t);if(a)return b.ZERO;if(d!==s)throw new Error("invZ was invalid");return new b(i,c)}fromRistrettoBytes(){y()}toRistrettoBytes(){y()}fromRistrettoHash(){y()}}function p(t,e){const n=e.negate();return t?n:e}function w(t){if(!(t instanceof h))throw new TypeError("ExtendedPoint expected")}function g(t){if(!(t instanceof v))throw new TypeError("RistrettoPoint expected")}function y(){throw new Error("Legacy method: switch to RistrettoPoint")}h.BASE=new h(i.Gx,i.Gy,s,P(i.Gx*i.Gy)),h.ZERO=new h(n,s,s,n);class v{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=i,n=P(d*t*t),r=P((n+s)*f);let o=BigInt(-1);const a=P((o-e*n)*P(n+e));let{isValid:c,value:u}=O(r,a),p=P(u*t);_(p)||(p=P(-p)),c||(u=p),c||(o=n);const w=P(o*(n-s)*m-a),g=u*u,y=P((u+u)*a),v=P(w*l),A=P(s-g),b=P(s+g);return new h(P(y*b),P(A*v),P(v*b),P(y*A))}static hashToCurve(t){const e=N((t=L(t,64)).slice(0,32)),n=this.calcElligatorRistrettoMap(e),s=N(t.slice(32,64)),r=this.calcElligatorRistrettoMap(s);return new v(n.add(r))}static fromHex(t){t=L(t,32);const{a:e,d:r}=i,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",a=N(t);if(!function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(T(a),t)||_(a))throw new Error(o);const c=P(a*a),d=P(s+e*c),l=P(s-e*c),u=P(d*d),f=P(l*l),m=P(e*r*u-f),{isValid:p,value:w}=M(P(m*f)),g=P(w*l),y=P(w*g*m);let A=P((a+a)*g);_(A)&&(A=P(-A));const b=P(d*y),k=P(A*b);if(!p||_(k)||b===n)throw new Error(o);return new v(new h(A,b,s,k))}toRawBytes(){let{x:t,y:e,z:n,t:s}=this.ep;const r=P(P(n+e)*P(n-e)),o=P(t*e),a=P(o*o),{value:i}=M(P(r*a)),c=P(i*r),l=P(i*o),f=P(c*l*s);let m;if(_(s*f)){let n=P(e*d),s=P(t*d);t=n,e=s,m=P(c*u)}else m=l;_(t*f)&&(e=P(-e));let h=P((n-e)*m);return _(h)&&(h=P(-h)),T(h)}toHex(){return D(this.toRawBytes())}toString(){return this.toHex()}equals(t){g(t);const e=this.ep,n=t.ep,s=P(e.x*n.y)===P(e.y*n.x),r=P(e.y*n.y)===P(e.x*n.x);return s||r}add(t){return g(t),new v(this.ep.add(t.ep))}subtract(t){return g(t),new v(this.ep.subtract(t.ep))}multiply(t){return new v(this.ep.multiply(t))}multiplyUnsafe(t){return new v(this.ep.multiplyUnsafe(t))}}v.BASE=new v(h.BASE),v.ZERO=new v(h.ZERO);const A=new WeakMap;class b{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,A.delete(this)}static fromHex(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{d:n,P:r}=i,o=(t=L(t,32)).slice();o[31]=-129&t[31];const a=B(o);if(e&&a>=r)throw new Error("Expected 0 < hex < P");if(!e&&a>=c)throw new Error("Expected 0 < hex < 2**256");const d=P(a*a),l=P(d-s),u=P(n*d+s);let{isValid:f,value:m}=O(l,u);if(!f)throw new Error("Point.fromHex: invalid y coordinate");const h=(m&s)===s;return!!(128&t[31])!==h&&(m=P(-m)),new b(m,a)}static async fromPrivateKey(t){return(await V(t)).point}toRawBytes(){const t=T(this.y);return t[31]|=this.x&s?128:0,t}toHex(){return D(this.toRawBytes())}toX25519(){const{y:t}=this;return T(P((s+t)*U(s-t)))}isTorsionFree(){return h.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new b(P(-this.x),this.y)}add(t){return h.fromAffine(this).add(h.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return h.fromAffine(this).multiply(t,this).toAffine()}}b.BASE=new b(i.Gx,i.Gy),b.ZERO=new b(n,s);class k{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=L(t,64),n=b.fromHex(e.slice(0,32),!1),s=B(e.slice(32,64));return new k(n,s)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof b))throw new Error("Expected Point instance");return q(e,i.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(T(this.s),32),t}toHex(){return D(this.toRawBytes())}}function E(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.every((t=>t instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const s=e.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(s);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r}const S=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function D(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=S[t[n]];return e}function C(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const s=2*n,r=t.slice(s,s+2),o=Number.parseInt(r,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[n]=o}return e}function I(t){return C(t.toString(16).padStart(64,"0"))}function T(t){return I(t).reverse()}function _(t){return(P(t)&s)===s}function B(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+D(Uint8Array.from(t).reverse()))}const R=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function N(t){return P(B(t)&R)}function P(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;const s=t%e;return s>=n?s:e+s}function U(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;if(t===n||e<=n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=P(t,e),o=e,a=n,c=s;for(;r!==n;){const t=o%r,e=a-c*(o/r);o=r,r=t,a=c,c=e}if(o!==s)throw new Error("invert: does not exist");return P(a,e)}function x(t,e){const{P:s}=i;let r=t;for(;e-- >n;)r*=r,r%=s;return r}function F(t){const{P:e}=i,n=BigInt(5),o=BigInt(10),a=BigInt(20),c=BigInt(40),d=BigInt(80),l=t*t%e*t%e,u=x(l,r)*l%e,f=x(u,s)*t%e,m=x(f,n)*f%e,h=x(m,o)*m%e,p=x(h,a)*h%e,w=x(p,c)*p%e,g=x(w,d)*w%e,y=x(g,d)*w%e,v=x(y,o)*m%e;return{pow_p_5_8:x(v,r)*t%e,b2:l}}function O(t,e){const n=P(e*e*e),s=P(n*n*e);let r=P(t*n*F(t*s).pow_p_5_8);const o=P(e*r*r),a=r,i=P(r*d),c=o===t,l=o===P(-t),u=o===P(-t*d);return c&&(r=a),(l||u)&&(r=i),_(r)&&(r=P(-r)),{isValid:c||l,value:r}}function M(t){return O(s,t)}function W(t){return P(B(t),i.l)}function L(t,e){const n=t instanceof Uint8Array?Uint8Array.from(t):C(t);if("number"==typeof e&&n.length!==e)throw new Error(`Expected ${e} bytes`);return n}function q(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)throw new TypeError("Specify max value");if("number"==typeof t&&Number.isSafeInteger(t)&&(t=BigInt(t)),"bigint"==typeof t&&t<e)if(s){if(n<t)return t}else if(n<=t)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function H(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function K(t){if(32!==(t="bigint"==typeof t||"number"==typeof t?I(q(t,c)):L(t)).length)throw new Error("Expected 32 bytes");return t}function j(t){const e=H(t.slice(0,32)),n=t.slice(32,64),s=W(e),r=b.BASE.multiply(s),o=r.toRawBytes();return{head:e,prefix:n,scalar:s,point:r,pointBytes:o}}let J;function z(){if("function"!=typeof J)throw new Error("utils.sha512Sync must be set to use sync methods");return J(...arguments)}async function V(t){return j(await et.sha512(K(t)))}function $(t){return j(z(K(t)))}function G(t,e,n){e=L(e),n instanceof b||(n=b.fromHex(n,!1));const{r:s,s:r}=t instanceof k?t.assertValidity():k.fromHex(t);return{r:s,s:r,SB:h.BASE.multiplyUnsafe(r),pub:n,msg:e}}function Q(t,e,n,s){const r=W(s),o=h.fromAffine(t).multiplyUnsafe(r);return h.fromAffine(e).add(o).subtract(n).multiplyUnsafe(i.h).equals(h.ZERO)}const Y={getExtendedPublicKey:$,getPublicKey:function(t){return $(t).pointBytes},sign:function(t,e){t=L(t);const{prefix:n,scalar:s,pointBytes:r}=$(e),o=W(z(n,t)),a=b.BASE.multiply(o),c=P(o+W(z(a.toRawBytes(),r,t))*s,i.l);return new k(a,c).toRawBytes()},verify:function(t,e,n){const{r:s,SB:r,msg:o,pub:a}=G(t,e,n),i=z(s.toRawBytes(),a.toRawBytes(),o);return Q(a,s,r,i)}};function Z(t,e,n){const s=P(t*(e-n));return[e=P(e-s),n=P(n+s)]}b.BASE._setWindowSize(8);const X={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(t,e){const r=function(t,e){const{P:r}=i,o=q(t,r),a=q(e,r),c=BigInt(121665),d=o;let l,u=s,f=n,m=o,h=s,p=n;for(let t=BigInt(254);t>=n;t--){const e=a>>t&s;p^=e,l=Z(p,u,m),u=l[0],m=l[1],l=Z(p,f,h),f=l[0],h=l[1],p=e;const n=u+f,r=P(n*n),o=u-f,i=P(o*o),w=r-i,g=m+h,y=P((m-h)*n),v=P(g*o),A=y+v,b=y-v;m=P(A*A),h=P(d*P(b*b)),u=P(r*i),f=P(w*(r+P(c*w)))}l=Z(p,u,m),u=l[0],m=l[1],l=Z(p,f,h),f=l[0],h=l[1];const{pow_p_5_8:w,b2:g}=F(f),y=P(x(w,BigInt(3))*g);return P(u*y)}(function(t){const e=L(t,32);return e[31]&=127,B(e)}(e),B(H(L(t,32))));if(r===n)throw new Error("Invalid private or public key received");return T(P(r,i.P))},scalarMultBase:t=>X.scalarMult(t,X.BASE_POINT_U)},tt={node:e,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},et={bytesToHex:D,hexToBytes:C,concatBytes:E,getExtendedPublicKey:V,mod:P,invert:U,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if((t=L(t)).length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return P(B(t),i.l-s)+s},randomBytes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(tt.web)return tt.web.getRandomValues(new Uint8Array(t));if(tt.node){const{randomBytes:e}=tt.node;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>et.randomBytes(32),sha512:async function(){const t=E(...arguments);if(tt.web){const e=await tt.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(tt.node)return Uint8Array.from(tt.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.BASE;const n=e.equals(b.BASE)?e:new b(e.x,e.y);return n._setWindowSize(t),n.multiply(r),n},sha512Sync:void 0};Object.defineProperties(et,{sha512Sync:{configurable:!1,get:()=>J,set(t){J||(J=t)}}}),t.CURVE=i,t.ExtendedPoint=h,t.Point=b,t.RistrettoPoint=v,t.Signature=k,t.curve25519=X,t.getPublicKey=async function(t){return(await V(t)).pointBytes},t.getSharedSecret=async function(t,e){const{head:n}=await V(t),s=b.fromHex(e).toX25519();return X.scalarMult(n,s)},t.sign=async function(t,e){t=L(t);const{prefix:n,scalar:s,pointBytes:r}=await V(e),o=W(await et.sha512(n,t)),a=b.BASE.multiply(o),c=P(o+W(await et.sha512(a.toRawBytes(),r,t))*s,i.l);return new k(a,c).toRawBytes()},t.sync=Y,t.utils=et,t.verify=async function(t,e,n){const{r:s,SB:r,msg:o,pub:a}=G(t,e,n),i=await et.sha512(s.toRawBytes(),a.toRawBytes(),o);return Q(a,s,r,i)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},53297:(t,e,n)=>{"use strict";n.d(e,{M:()=>r});var s=n(50110);function r(t){return(0,s.A)((()=>t.readCellOpt()),{shouldIgnoreError:!0})??void 0}},55029:(t,e,n)=>{"use strict";n.d(e,{MD:()=>u,SJ:()=>l,ao:()=>d});var s=n(31481),r=n(59288);const o=999,a=[];function i(t,e){return e instanceof Error?{name:e.name,message:e.message,stack:e.stack,metadata:e instanceof r.p?e.metadata:void 0}:e}function c(t){a.length>o&&a.shift(),a.push({...t,args:t.args.map((t=>JSON.stringify(t,i))),time:Date.now()})}function d(){return a}function l(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];c({message:t,level:"debugError",args:n}),s.Oig&&console.error(`[DEBUG][${t}]`,...n)}function u(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];c({message:t,level:"debug",args:n}),s.Oig&&console.log(`[DEBUG] ${t}`,...n)}},56051:(t,e,n)=>{"use strict";n.d(e,{KL:()=>o,Nu:()=>r,QD:()=>s,jc:()=>i,jf:()=>a});let s=function(t){return t.Unexpected="Unexpected",t.ServerError="ServerError",t.DebugError="DebugError",t.UnsupportedVersion="UnsupportedVersion",t.InvalidPassword="InvalidPassword",t}({}),r=function(t){return t.InvalidMnemonic="InvalidMnemonic",t.InvalidAddress="InvalidAddress",t.DomainNotResolved="DomainNotResolved",t}({}),o=function(t){return t.InvalidAmount="InvalidAmount",t.InvalidToAddress="InvalidToAddress",t.InsufficientBalance="InsufficientBalance",t.InvalidStateInit="InvalidStateInit",t.DomainNotResolved="DomainNotResolved",t.WalletNotInitialized="WalletNotInitialized",t.InvalidAddressFormat="InvalidAddressFormat",t.InactiveContract="InactiveContract",t}({}),a=function(t){return t.PartialTransactionFailure="PartialTransactionFailure",t.IncorrectDeviceTime="IncorrectDeviceTime",t.InsufficientBalance="InsufficientBalance",t.UnsuccesfulTransfer="UnsuccesfulTransfer",t.WrongAddress="WrongAddress",t.WrongNetwork="WrongNetwork",t.ConcurrentTransaction="ConcurrentTransaction",t}({}),i=function(t){return t.HardwareOutdated="HardwareOutdated",t.BlindSigningNotEnabled="BlindSigningNotEnabled",t.RejectedByUser="RejectedByUser",t.ProofTooLarge="ProofTooLarge",t}({})},59121:(t,e,n)=>{"use strict";function s(t){return self.crypto.getRandomValues(new Uint8Array(t))}n.d(e,{po:()=>s}),n(48287).Buffer},59288:(t,e,n)=>{"use strict";n.d(e,{p:()=>s,v:()=>r});class s extends Error{constructor(t,e){super(t),this.metadata=e}}function r(t,e,n){if(!t)throw new s(e,n)}},60341:(t,e,n)=>{"use strict";n.d(e,{Jx:()=>l,Kp:()=>c,My:()=>a,QM:()=>d,aT:()=>i,sc:()=>o});var s=n(31481),r=n(48287).Buffer;function o(t){return crypto.subtle.digest("SHA-256",t)}function a(t){return r.from(t).toString("hex")}function i(t){return Uint8Array.from(r.from(t,"hex"))}function c(t){return Uint8Array.from(r.from(t,"base64"))}function d(t){return r.from(t,"base64").toString("utf-8")}function l(t){return s.aPk.some((e=>t.endsWith(e)))}},61995:(t,e,n)=>{"use strict";n.d(e,{Hc:()=>o,Hx:()=>s,xT:()=>r});const s={GET_STATIC_DATA:801842850,REPORT_STATIC_DATA:2339837749,GET_STORAGE_DATA:1535698380,REPORT_STORAGE_DATA:2863966447,EXCESSES:3576854235,TRANSFER_JETTON:260734629,INTERNAL_TRANSFER:395134233,TRANSFER_NOTIFICATION:1935855772,PROVIDE_WALLET_ADDRESS:745978227,TAKE_WALLET_ADDRESS:3513996288,BURN_JETTON:1499400124,STAKE_JETTONS:3818940809,ADD_REWARDS:3675696277,SEND_CLAIMED_REWARDS:1153179619,SEND_UNSTAKED_JETTONS:4213386179,APPROVE_STAKE:2443044737,CANCEL_STAKE:2662179289,ADD_REWARD_JETTONS:275213031,CLAIM_COMMISSIONS:3165188199,REQUEST_UPDATE_REWARDS:4123376291,CLAIM_REWARDS:2027548937,RECEIVE_JETTONS:3599387329,UNSTAKE_JETTONS:1234866786,UNSTAKE_REQUEST:23647415,CANCEL_UNSTAKE_REQUEST:2760970010,UPDATE_REWARDS:2928871374,CONFIRM_TRANSFER:3162893073,DEPLOY_NEW_POOL:3666222871,SEND_COMMISSIONS:3110787818,SET_CODE:3805467153,CHANGE_CREATION_FEE:1725256331,CHANGE_CONTENT:247632384,UPDATE_CODES:2244551631},r={MIN_RESERVE:20000000n,DEPLOY_POOL:340000000n,NOTIFICATION:340000000n,JETTON_TRANSFER:55000000n,BURN_JETTONS:340000000n,STAKE_JETTONS:300000000n,UNSTAKE_JETTONS:340000000n,CANCEL_UNSTAKE:340000000n,SEND_COMMISSIONS:340000000n,SIMPLE_UPDATE_REQUEST:340000000n,ADD_REWARDS:340000000n,APPROVE_TRANSFER:340000000n,SAVE_UPDATED_REWARDS:340000000n,MIN_EXCESS:10000000n,SEND_STAKED_JETTONS:630000000n},o={COMMISSION_DIVIDER:10000n,REWARDS_DIVIDER:1e3,DISTRIBUTION_SPEED_DIVIDER:BigInt(86400),DISTRIBUTED_REWARDS_DIVIDER:100000000000000000000000000000000000000n}},67132:(t,e,n)=>{"use strict";n.d(e,{K:()=>r});var s=n(1307);class r{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new r(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o={code:e,data:(0,s.beginCell)().endCell()};return new r((0,s.contractAddress)(n,o),o)}async sendDeploy(t,e,n){await t.internal(e,{value:n,sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:(0,s.beginCell)().endCell()})}async getJettonBalance(t){return"active"!==(await t.getState()).state.type?0n:(await t.get("get_wallet_data",[])).stack.readBigNumber()}static transferMessage(t,e,n,r,o,a){return(0,s.beginCell)().storeUint(260734629,32).storeUint(0,64).storeCoins(t).storeAddress(e).storeAddress(n).storeMaybeRef(r).storeCoins(o).storeMaybeRef(a).endCell()}async sendTransfer(t,e,n,o,a,i,c,d,l){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:r.transferMessage(o,a,i,c,d,l),value:n})}static burnMessage(t,e,n){return(0,s.beginCell)().storeUint(1499400124,32).storeUint(0,64).storeCoins(t).storeAddress(e).storeMaybeRef(n).endCell()}async sendBurn(t,e,n,o,a,i){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:r.burnMessage(o,a,i),value:n})}static withdrawTonsMessage(){return(0,s.beginCell)().storeUint(1838046780,32).storeUint(0,64).endCell()}async sendWithdrawTons(t,e){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:r.withdrawTonsMessage(),value:(0,s.toNano)("0.1")})}static withdrawJettonsMessage(t,e){return(0,s.beginCell)().storeUint(1988776114,32).storeUint(0,64).storeAddress(t).storeCoins(e).storeMaybeRef(void 0).endCell()}async sendWithdrawJettons(t,e,n,o){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:r.withdrawJettonsMessage(n,o),value:(0,s.toNano)("0.1")})}async getWalletData(t){const e=await t.get("get_wallet_data",[]);return{balance:e.stack.readBigNumber(),owner:e.stack.readAddress(),minter:e.stack.readAddress(),code:e.stack.readCell()}}}},67491:(t,e,n)=>{"use strict";n.d(e,{$7:()=>a,iy:()=>r,u_:()=>o});var s=n(31481);function r(t){return void 0!==o(t)}function o(t){for(const e of s.gs5){const{suffixes:n,baseFormat:s}=e;for(let r=n.length-1;r>=0;r--){const o=n[r];if(!t.endsWith(`.${o}`))continue;const a=t.slice(0,-o.length-1);if(s.test(a))return{base:a,zone:e}}}}function a(t){return s.gs5.find((e=>e.resolver===t))}n(10309)},68249:(t,e,n)=>{"use strict";n.d(e,{k:()=>a,u:()=>i});var s=n(31481);const r="file://";let o;function a(t){const e=function(t){return t.isElectron?r:s.UMQ||s.hL1?null===(e=self)||void 0===e?void 0:e.origin:void 0;var e}(t);return o={...t,isDappSupported:!0,isSseSupported:t.isElectron||s.UMQ&&!t.isNativeBottomSheet,apiHeaders:e?{"X-App-Origin":e}:{},toncenterMainnetKey:t.isElectron?s.xlJ:s.Irq,toncenterTestnetKey:t.isElectron?s.Q$0:s.HGV},o}function i(){return o}},69780:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const s=new WeakMap;function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>!!t;return async function(){let n=s.get(t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const i=function(t){return t.reduce(((e,n)=>`${e}_${"object"==typeof n?JSON.stringify(t):n}`),"")}(o);if(n){const t=n.get(i);if(t)return t}else n=new Map,s.set(t,n);const c=await t(...o);return e(c)&&n.set(i,c),c}}},71281:()=>{},79838:()=>{},84752:(t,e,n)=>{"use strict";n.d(e,{sH:()=>a});var s=n(1307),r=n(53297),o=n(61995);class a{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new a(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=function(t){return(0,s.beginCell)().storeAddress(t.stakingPoolAddress).storeAddress(t.minterAddress).storeAddress(t.ownerAddress).storeRef((0,s.beginCell)().storeUint(t.lockPeriod,32).storeUint(1,19).endCell()).endCell()}(t),o={code:e,data:r};return new a((0,s.contractAddress)(n,o),o)}static getAvailableRewards(t,e){if(!e.rewardJettons)return{};const n=Math.floor(Date.now()/1e3),s=e.lockPeriods.get(Number(t.lockPeriod)).rewardMultiplier,r={};for(const a of e.rewardJettons.keys()){const i=e.rewardJettons.get(a),c=t.rewardsDict.get(a);let d=c?c.unclaimedRewards:0n;const l=c?c.distributedRewards:0n;let u=i.distributedRewards;for(const t of i.rewardsDeposits.keys()){const s=i.rewardsDeposits.get(t);s.startTime<n&&e.tvlWithMultipliers&&(u+=s.distributionSpeed*BigInt(Math.min(n,s.endTime)-s.startTime)*o.Hc.DISTRIBUTED_REWARDS_DIVIDER/(o.Hc.DISTRIBUTION_SPEED_DIVIDER*e.tvlWithMultipliers))}d+=(u-l)*t.jettonBalance*BigInt(s)/(o.Hc.DISTRIBUTED_REWARDS_DIVIDER*BigInt(o.Hc.REWARDS_DIVIDER)),r[a.toString()]=d}return r}async getStorageData(t){const{stack:e}=await t.get("get_storage_data",[]),n={stakingPoolAddress:e.readAddress(),ownerAddress:e.readAddress(),lockPeriod:e.readBigNumber(),jettonBalance:e.readBigNumber(),rewardsDict:(0,r.M)(e),unstakeRequests:(0,r.M)(e),requestsCount:e.readBigNumber(),totalRequestedJettons:e.readBigNumber(),isActive:Boolean(e.readNumber()),unstakeCommission:e.readBigNumber(),unstakeFee:e.readBigNumber(),minDeposit:e.readBigNumber(),maxDeposit:e.readBigNumber(),whitelist:(0,r.M)(e),minterAddress:e.readAddress()};return n.rewardsDict&&(n.rewardsDict=n.rewardsDict.beginParse().loadDictDirect(s.Dictionary.Keys.Address(),{serialize:(t,e)=>{e.storeUint(t.distributedRewards,256).storeCoins(t.unclaimedRewards).endCell()},parse:t=>({distributedRewards:t.loadUintBig(256),unclaimedRewards:t.loadCoins()})})),n.unstakeRequests&&(n.unstakeRequests=n.unstakeRequests.beginParse().loadDictDirect(s.Dictionary.Keys.Uint(32),s.Dictionary.Values.BigVarUint(4))),n.whitelist&&(n.whitelist=n.whitelist.beginParse().loadDictDirect(s.Dictionary.Keys.Address(),s.Dictionary.Values.Bool())),n}}},86972:(t,e,n)=>{"use strict";n.d(e,{Ml:()=>a});var s=n(1307),r=n(53297),o=n(61995);class a{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new a(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=function(t){return(0,s.beginCell)().storeAddress(t.factoryAddress).storeUint(t.poolId,32).endCell()}(t),o={code:e,data:r};return new a((0,s.contractAddress)(n,o),o)}static stakePayload(t){return(0,s.beginCell)().storeUint(o.Hx.STAKE_JETTONS,32).storeUint(t,32).endCell()}async getData(t){const{stack:e}=await t.get("get_nft_data",[]);return{init:e.readBoolean(),index:e.readBigNumber(),collection:e.readAddressOpt(),owner:e.readAddressOpt(),content:e.readCell()}}async getStorageData(t){const{stack:e}=await t.get("get_storage_data",[]),n={inited:e.readBoolean(),poolId:e.readBigNumber(),adminAddress:e.readAddress(),creatorAddress:e.readAddress(),stakeWalletCode:e.readCell(),lockWalletAddress:e.readAddress(),tvl:e.readBigNumber(),tvlWithMultipliers:e.readBigNumber(),minDeposit:e.readBigNumber(),maxDeposit:e.readBigNumber(),rewardJettons:(0,r.M)(e),rewardJettonsCount:e.readBigNumber(),rewardsDepositsCount:e.readBigNumber(),lockPeriods:e.readCellOpt(),whitelist:(0,r.M)(e),unstakeFee:e.readBigNumber(),collectedCommissions:e.readBigNumber(),rewardsCommission:e.readBigNumber(),version:e.readBigNumber()};return n.rewardJettons&&(n.rewardJettons=n.rewardJettons.beginParse().loadDictDirect(s.Dictionary.Keys.Address(),{serialize:(t,e)=>{e.storeUint(t.distributedRewards,256).storeDict(t.rewardsDeposits,s.Dictionary.Keys.Uint(32),{serialize:(t,e)=>{e.storeCoins(t.distributionSpeed).storeUint(t.startTime,32).storeUint(t.endTime,32).endCell()},parse:t=>({distributionSpeed:t.loadCoins(),startTime:t.loadUint(32),endTime:t.loadUint(32)})}).endCell()},parse:t=>({distributedRewards:t.loadUintBig(256),rewardsDeposits:t.loadDict(s.Dictionary.Keys.Uint(32),{serialize:(t,e)=>{e.storeCoins(t.distributionSpeed).storeUint(t.startTime,32).storeUint(t.endTime,32).endCell()},parse:t=>({distributionSpeed:t.loadCoins(),startTime:t.loadUint(32),endTime:t.loadUint(32)})})})})),n.lockPeriods&&(n.lockPeriods=n.lockPeriods.beginParse().loadDictDirect(s.Dictionary.Keys.Uint(32),{serialize:(t,e)=>{e.storeCoins(t.curTvl).storeCoins(t.tvlLimit).storeUint(t.rewardMultiplier,16).storeUint(t.depositCommission,16).storeUint(t.unstakeCommission,16).storeAddress(t.minterAddress).endCell()},parse:t=>({curTvl:t.loadCoins(),tvlLimit:t.loadCoins(),rewardMultiplier:t.loadUint(16),depositCommission:t.loadUint(16),unstakeCommission:t.loadUint(16),minterAddress:t.loadAddress()})})),n.whitelist&&(n.whitelist=n.whitelist.beginParse().loadDictDirect(s.Dictionary.Keys.Address(),s.Dictionary.Values.Bool())),n}async getWalletAddress(t,e,n){const{stack:r}=await t.get("get_stake_wallet_address",[{type:"slice",cell:(0,s.beginCell)().storeAddress(e).endCell()},{type:"int",value:BigInt(n)}]);return r.readAddressOpt()}}},87894:(t,e,n)=>{"use strict";function s(t,e){return t.reduce(((t,n)=>(t[n[e]]=n,t)),{})}function r(t,e){return t.reduce(((t,n)=>{const s=n[e];return t[s]?t[s].push(n):t[s]=[n],t}),{})}function o(t,e){return Object.keys(t).reduce(((n,s,r)=>(n[s]=e(t[s],s,r,t),n)),{})}function a(t,e){return e.reduce(((e,n)=>(e[n]=t[n],e)),{})}function i(t,e){const n=new Set(e.map(String));return a(t,Object.keys(t).filter((t=>!n.has(t))))}function c(t){return Object.keys(t).reduce(((e,n)=>{const s=n;return void 0!==t[s]&&(e[s]=t[s]),e}),{})}function d(t){return t.filter(Boolean)}function l(t,e){return t.length===e.length&&t.every(((t,n)=>t===e[n]))}function u(t,e){const n=[];for(let s=0;s<t.length;s+=e)n.push(t.slice(s,s+e));return n}function f(t,e){let n=t.length;for(;n--;)if(e(t[n],n,t))return t[n]}function m(t,e){const n=[];for(let s=t;s<e;)n.push(s++);return n}function h(t,e){return t.reduce(((t,n,s)=>(t[n]=Array.isArray(e)?e[s]:e,t)),{})}function p(t,e){return t.map((t=>t[e]))}function w(t,e){const n=new Set(e),s=[];for(const e of t)n.has(e)||s.push(e);return s}function g(t,e){const n=new Set;for(const s of e)t.has(s)&&n.add(s);return n}function y(t,e,n,s){let r=0,o=0;const a=[];for(;r<t.length&&o<e.length;){const i=n(t[r],e[o]);0===i?(a.push(t[r]),s||a.push(e[o]),r++,o++):i<0?(a.push(t[r]),r++):(a.push(e[o]),o++)}for(;r<t.length;r++)a.push(t[r]);for(;o<e.length;o++)a.push(e[o]);return a}n.d(e,{$z:()=>r,E$:()=>g,Hl:()=>w,JY:()=>p,LG:()=>o,Oy:()=>c,Uk:()=>f,Up:()=>a,cJ:()=>i,dU:()=>s,k:()=>l,lD:()=>u,oE:()=>d,rs:()=>h,y1:()=>m,yQ:()=>y})},87963:function(t){!function(){"use strict";function e(t){return parseInt(t)===t}function n(t){if(!e(t.length))return!1;for(var n=0;n<t.length;n++)if(!e(t[n])||t[n]<0||t[n]>255)return!1;return!0}function s(t,s){if(t.buffer&&"Uint8Array"===t.name)return s&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!n(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(e(t.length)&&n(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function r(t){return new Uint8Array(t)}function o(t,e,n,s,r){null==s&&null==r||(t=t.slice?t.slice(s,r):Array.prototype.slice.call(t,s,r)),e.set(t,n)}var a,i={toBytes:function(t){var e=[],n=0;for(t=encodeURI(t);n<t.length;){var r=t.charCodeAt(n++);37===r?(e.push(parseInt(t.substr(n,2),16)),n+=2):e.push(r)}return s(e)},fromBytes:function(t){for(var e=[],n=0;n<t.length;){var s=t[n];s<128?(e.push(String.fromCharCode(s)),n++):s>191&&s<224?(e.push(String.fromCharCode((31&s)<<6|63&t[n+1])),n+=2):(e.push(String.fromCharCode((15&s)<<12|(63&t[n+1])<<6|63&t[n+2])),n+=3)}return e.join("")}},c=(a="0123456789abcdef",{toBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},fromBytes:function(t){for(var e=[],n=0;n<t.length;n++){var s=t[n];e.push(a[(240&s)>>4]+a[15&s])}return e.join("")}}),d={16:10,24:12,32:14},l=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],u=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],m=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],h=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],p=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],w=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],g=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],y=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],A=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],b=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],k=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],E=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],S=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function D(t){for(var e=[],n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}var C=function(t){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(t,!0)}),this._prepare()};C.prototype._prepare=function(){var t=d[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,s=4*(t+1),r=this.key.length/4,o=D(this.key);for(e=0;e<r;e++)n=e>>2,this._Ke[n][e%4]=o[e],this._Kd[t-n][e%4]=o[e];for(var a,i=0,c=r;c<s;){if(a=o[r-1],o[0]^=u[a>>16&255]<<24^u[a>>8&255]<<16^u[255&a]<<8^u[a>>24&255]^l[i]<<24,i+=1,8!=r)for(e=1;e<r;e++)o[e]^=o[e-1];else{for(e=1;e<r/2;e++)o[e]^=o[e-1];for(a=o[r/2-1],o[r/2]^=u[255&a]^u[a>>8&255]<<8^u[a>>16&255]<<16^u[a>>24&255]<<24,e=r/2+1;e<r;e++)o[e]^=o[e-1]}for(e=0;e<r&&c<s;)f=c>>2,m=c%4,this._Ke[f][m]=o[e],this._Kd[t-f][m]=o[e++],c++}for(var f=1;f<t;f++)for(var m=0;m<4;m++)a=this._Kd[f][m],this._Kd[f][m]=b[a>>24&255]^k[a>>16&255]^E[a>>8&255]^S[255&a]},C.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,n=[0,0,0,0],s=D(t),o=0;o<4;o++)s[o]^=this._Ke[0][o];for(var a=1;a<e;a++){for(o=0;o<4;o++)n[o]=m[s[o]>>24&255]^h[s[(o+1)%4]>>16&255]^p[s[(o+2)%4]>>8&255]^w[255&s[(o+3)%4]]^this._Ke[a][o];s=n.slice()}var i,c=r(16);for(o=0;o<4;o++)i=this._Ke[e][o],c[4*o]=255&(u[s[o]>>24&255]^i>>24),c[4*o+1]=255&(u[s[(o+1)%4]>>16&255]^i>>16),c[4*o+2]=255&(u[s[(o+2)%4]>>8&255]^i>>8),c[4*o+3]=255&(u[255&s[(o+3)%4]]^i);return c},C.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,n=[0,0,0,0],s=D(t),o=0;o<4;o++)s[o]^=this._Kd[0][o];for(var a=1;a<e;a++){for(o=0;o<4;o++)n[o]=g[s[o]>>24&255]^y[s[(o+3)%4]>>16&255]^v[s[(o+2)%4]>>8&255]^A[255&s[(o+1)%4]]^this._Kd[a][o];s=n.slice()}var i,c=r(16);for(o=0;o<4;o++)i=this._Kd[e][o],c[4*o]=255&(f[s[o]>>24&255]^i>>24),c[4*o+1]=255&(f[s[(o+3)%4]>>16&255]^i>>16),c[4*o+2]=255&(f[s[(o+2)%4]>>8&255]^i>>8),c[4*o+3]=255&(f[255&s[(o+1)%4]]^i);return c};var I=function(t){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new C(t)};I.prototype.encrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),a=0;a<t.length;a+=16)o(t,n,0,a,a+16),o(n=this._aes.encrypt(n),e,a);return e},I.prototype.decrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),a=0;a<t.length;a+=16)o(t,n,0,a,a+16),o(n=this._aes.decrypt(n),e,a);return e};var T=function(t,e){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=r(16);this._lastCipherblock=s(e,!0),this._aes=new C(t)};T.prototype.encrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),a=0;a<t.length;a+=16){o(t,n,0,a,a+16);for(var i=0;i<16;i++)n[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(n),o(this._lastCipherblock,e,a)}return e},T.prototype.decrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),a=0;a<t.length;a+=16){o(t,n,0,a,a+16),n=this._aes.decrypt(n);for(var i=0;i<16;i++)e[a+i]=n[i]^this._lastCipherblock[i];o(t,this._lastCipherblock,0,a,a+16)}return e};var _=function(t,e,n){if(!(this instanceof _))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=r(16);n||(n=1),this.segmentSize=n,this._shiftRegister=s(e,!0),this._aes=new C(t)};_.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,n=s(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var a=0;a<this.segmentSize;a++)n[r+a]^=e[a];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(n,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n},_.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,n=s(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var a=0;a<this.segmentSize;a++)n[r+a]^=e[a];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(t,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n};var B=function(t,e){if(!(this instanceof B))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=r(16);this._lastPrecipher=s(e,!0),this._lastPrecipherIndex=16,this._aes=new C(t)};B.prototype.encrypt=function(t){for(var e=s(t,!0),n=0;n<e.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},B.prototype.decrypt=B.prototype.encrypt;var R=function(t){if(!(this instanceof R))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"==typeof t?(this._counter=r(16),this.setValue(t)):this.setBytes(t)};R.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");if(t>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var e=15;e>=0;--e)this._counter[e]=t%256,t=parseInt(t/256)},R.prototype.setBytes=function(t){if(16!=(t=s(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},R.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var N=function(t,e){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof R||(e=new R(e)),this._counter=e,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new C(t)};N.prototype.encrypt=function(t){for(var e=s(t,!0),n=0;n<e.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[n]^=this._remainingCounter[this._remainingCounterIndex++];return e},N.prototype.decrypt=N.prototype.encrypt;var P={AES:C,Counter:R,ModeOfOperation:{ecb:I,cbc:T,cfb:_,ofb:B,ctr:N},utils:{hex:c,utf8:i},padding:{pkcs7:{pad:function(t){var e=16-(t=s(t,!0)).length%16,n=r(t.length+e);o(t,n);for(var a=t.length;a<n.length;a++)n[a]=e;return n},strip:function(t){if((t=s(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var n=t.length-e,a=0;a<e;a++)if(t[n+a]!==e)throw new Error("PKCS#7 invalid padding byte");var i=r(n);return o(t,i,0,0,n),i}}},_arrayTest:{coerceArray:s,createArray:r,copyArray:o}};t.exports=P}()},88823:(t,e,n)=>{"use strict";n.d(e,{jf:()=>wt,ct:()=>pt,UY:()=>dt,Is:()=>lt,Dg:()=>st,km:()=>ot,l_:()=>ht,PZ:()=>mt,Ow:()=>X,C6:()=>Z,Rc:()=>vt,kb:()=>ut,N7:()=>$,q5:()=>Y,EV:()=>kt,ZN:()=>bt,RS:()=>tt,DN:()=>at,nN:()=>it,mo:()=>ct,or:()=>ft,Pe:()=>rt,zq:()=>At,uA:()=>Q,jq:()=>G,vn:()=>et,m$:()=>nt,wx:()=>gt,ss:()=>V});var s=n(1307),r=n(94471),o=n(90746),a=n(3273),i=n(71902),c=n(99579),d=n(79145),l=n(28784),u=n(7941),f=n(8387),m=n(31481),h=n(67491),p=n(87894),w=n(55029),g=n(69780),y=n(96773);class v{static transfer=260734629;static transfer_notification=1935855772;static internal_transfer=395134233;static excesses=3576854235;static burn=1499400124;static burn_notification=2078119902;static provide_wallet_address=745978227;static take_wallet_address=3513996288;static mint=21;static change_admin=3;static change_content=4}class A{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new A(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=function(t){return(0,s.beginCell)().storeCoins(0).storeAddress(t.admin).storeRef(t.content).storeRef(t.wallet_code).endCell()}(t),o={code:e,data:r};return new A((0,s.contractAddress)(n,o),o)}async sendDeploy(t,e,n){await t.internal(e,{value:n,sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:(0,s.beginCell)().endCell()})}static jettonInternalTransfer(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(0,s.beginCell)().storeUint(v.internal_transfer,32).storeUint(r,64).storeCoins(t).storeAddress(void 0).storeAddress(n).storeCoins(e).storeBit(!1).endCell()}static mintMessage(t,e,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=(0,s.beginCell)().storeUint(v.internal_transfer,32).storeUint(0,64).storeCoins(n).storeAddress(void 0).storeAddress(t).storeCoins(r).storeMaybeRef(void 0).endCell();return(0,s.beginCell)().storeUint(v.mint,32).storeUint(a,64).storeAddress(e).storeCoins(o).storeCoins(n).storeRef(i).endCell()}async sendMint(t,e,n,r,o,a){if(a<=o)throw new Error("Total ton amount should be > forward amount");await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:A.mintMessage(this.address,n,r,o,a),value:a+(0,s.toNano)("0.015")})}static discoveryMessage(t,e){return(0,s.beginCell)().storeUint(745978227,32).storeUint(0,64).storeAddress(t).storeBit(e).endCell()}async sendDiscovery(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,s.toNano)("0.1");await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:A.discoveryMessage(n,r),value:o})}static changeAdminMessage(t){return(0,s.beginCell)().storeUint(v.change_admin,32).storeUint(0,64).storeAddress(t).endCell()}async sendChangeAdmin(t,e,n){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:A.changeAdminMessage(n),value:(0,s.toNano)("0.05")})}static changeContentMessage(t){return(0,s.beginCell)().storeUint(v.change_content,32).storeUint(0,64).storeRef(t).endCell()}async sendChangeContent(t,e,n){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:A.changeContentMessage(n),value:(0,s.toNano)("0.05")})}async getWalletAddress(t,e){return(await t.get("get_wallet_address",[{type:"slice",cell:(0,s.beginCell)().storeAddress(e).endCell()}])).stack.readAddress()}async getJettonData(t){const e=await t.get("get_jetton_data",[]);return{totalSupply:e.stack.readBigNumber(),mintable:e.stack.readBoolean(),adminAddress:e.stack.readCellOpt(),content:e.stack.readCell(),walletCode:e.stack.readCell()}}async getTotalSupply(t){return(await this.getJettonData(t)).totalSupply}async getAdminAddress(t){return(await this.getJettonData(t)).adminAddress}async getContent(t){return(await this.getJettonData(t)).content}}var b=n(61995),k=n(84752),E=n(86972),S=n(67132),D=n(60341),C=n(68249),I=n(3476),T=n(41758),_=n(61880),B=n(98737),R=n(7229),N=n(63853),P=n(93967),U=n(17275);const{isFormData:x,isStandardBrowserEnv:F,isUndefined:O}=U.A;async function M(t,e){let n;try{n=await fetch(t)}catch(n){return W("Network Error",e,"ERR_NETWORK",t)}const s={ok:n.ok,status:n.status,statusText:n.statusText,headers:new Headers(n.headers),config:e,request:t};if(n.status>=200&&204!==n.status)switch(e.responseType){case"arraybuffer":s.data=await n.arrayBuffer();break;case"blob":s.data=await n.blob();break;case"json":s.data=await n.json();break;case"formData":s.data=await n.formData();break;default:s.data=await n.text()}return s}function W(t,e,n,s,r){return _.A.AxiosError&&"function"==typeof _.A.AxiosError?new _.A.AxiosError(t,_.A.AxiosError[n],e,s,r):function(t,e,n,s,r){return t.config=e,n&&(t.code=n),t.request=s,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}(new Error(t),e,n,s,r)}var L=n(91179),q=n.n(L),H=n(45232);q()(_.A,{retries:m.TUC,shouldResetTimeout:!0,retryDelay:t=>t*m.WRE,onRetry:(t,e,n)=>{var s;(0,w.MD)(`Retry request #${t}:`,n.url,null===(s=e.response)||void 0===s?void 0:s.status)}}),_.A.defaults.adapter=async function(t){const e=function(t){const e=new Headers(t.headers);if(t.auth){const n=t.auth.username||"",s=t.auth.password?decodeURI(encodeURIComponent(t.auth.password)):"";e.set("Authorization",`Basic ${btoa(`${n}:${s}`)}`)}const n=t.method.toUpperCase(),s={headers:e,method:n};"GET"!==n&&"HEAD"!==n&&(s.body=t.data,x(s.body)&&F()&&e.delete("Content-Type")),t.mode&&(s.mode=t.mode),t.cache&&(s.cache=t.cache),t.integrity&&(s.integrity=t.integrity),t.redirect&&(s.redirect=t.redirect),t.referrer&&(s.referrer=t.referrer),O(t.withCredentials)||(s.credentials=t.withCredentials?"include":"omit");const r=(0,R.A)(t.baseURL,t.url),o=(0,P.A)(r,t.params,t.paramsSerializer);return new Request(o,s)}(t),n=[M(e,t)];t.timeout&&t.timeout>0&&n.push(new Promise((n=>{setTimeout((()=>{const s=t.timeoutErrorMessage?t.timeoutErrorMessage:`timeout of ${t.timeout}ms exceeded`;n(W(s,t,"ECONNABORTED",e))}),t.timeout)})));const s=await Promise.race(n);return new Promise(((e,n)=>{s instanceof Error?n(s):"[object Function]"===Object.prototype.toString.call(t.settle)?t.settle(e,n,s):(0,N.A)(e,n,s)}))};class K extends B.x{constructor(t){super(t),this.initParameters=t}getAddressInfo(t){return this.callRpc("getAddressInformation",{address:t})}callRpc(t,e){return this.sendRequest(this.parameters.endpoint,{id:1,jsonrpc:"2.0",method:t,params:e})}async sendFile(t){const e="object"==typeof t?t.toString("base64"):t;await this.callRpc("sendBocReturnHashNoError",{boc:e})}async sendRequest(t,e){e.method;const n={...this.initParameters.headers,"Content-Type":"application/json"};this.parameters.apiKey&&(n["X-API-Key"]=this.parameters.apiKey);const s=JSON.stringify(e),r=await(0,H.J5)(t,{method:"POST",body:s,headers:n},{shouldSkipRetryFn:(t,e)=>function(t,e,n){return Boolean(422===n||(null==e?void 0:e.match(/(exit code|exitcode=|duplicate message)/)))}(0,t,e)});return(await r.json()).result}}var j=n(48287).Buffer;const J=127;let z;const V={simpleR1:r.m,simpleR2:o.t,simpleR3:a.A,v2R1:i.H,v2R2:c.a,v3R1:d.G,v3R2:l.N,v4R2:u.U,W5:f.WalletContractV5R1};function $(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mainnet";if(!z){const{apiHeaders:t,toncenterMainnetKey:e,toncenterTestnetKey:n}=(0,C.u)();z={mainnet:new K({endpoint:`${m._J8}/api/v2/jsonRPC`,timeout:m.cSq,apiKey:e,headers:t}),testnet:new K({endpoint:`${m.pyR}/api/v2/jsonRPC`,timeout:m.cSq,apiKey:n,headers:t})}}return z[t]}const G=(0,g.A)((async(t,e,n)=>{const r=$(t).open(new A(s.Address.parse(n)));return et(await r.getWalletAddress(s.Address.parse(e)),!0,t)})),Q=(0,g.A)((async(t,e)=>{const n=$(t).open(new S.K(s.Address.parse(e)));return et((await n.getWalletData()).minter,!0,t)})),Y=(0,g.A)((async(t,e)=>{const n=await $(t).runMethodWithError(s.Address.parse(e),"get_public_key");if(0!==n.exit_code)return;const r=n.stack.readBigNumber().toString(16).padStart(64,"0");return(0,D.aT)(r)})),Z=(0,g.A)((async(t,e,n,r)=>{const o=$(t),a=o.open(E.Ml.createFromAddress(s.Address.parse(e))),i=await a.getWalletAddress(s.Address.parse(r),n);return o.open(k.sH.createFromAddress(i))}));function X(t,e){return $(t).open(new A(s.Address.parse(e))).getJettonData()}function tt(t){return s.Cell.fromBoc(j.from(t))}function et(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.e2,n=arguments.length>2?arguments[2]:void 0;return"string"==typeof t&&(t=s.Address.parse(t)),t.toString({urlSafe:!0,bounceable:e,testOnly:"testnet"===n})}function nt(t){return"string"==typeof t&&(t=s.Address.parse(t)),t.toRawString()}function st(t){const{queryId:e,tokenAmount:n,toAddress:r,responseAddress:o,forwardAmount:a,customPayload:i}=t;let c=t.forwardPayload,d=(new s.Builder).storeUint(I.LY.Transfer,32).storeUint(e||(0,T.N)(),64).storeCoins(n).storeAddress(s.Address.parse(r)).storeAddress(s.Address.parse(o)).storeMaybeRef(i).storeCoins(a??0n);return c instanceof Uint8Array&&(c=at(c,Math.round(d.availableBits/8))),c?d="string"==typeof c?d.storeBit(!1).storeUint(0,32).storeBuffer(j.from(c)):c instanceof Uint8Array?d.storeBit(!1).storeBuffer(j.from(c)):d.storeBit(!0).storeRef(c):d.storeBit(!1),d.endCell()}function rt(t){try{return s.Cell.fromBase64(t)}catch(e){return(0,w.SJ)("parseBase64",e),Uint8Array.from(j.from(t,"base64"))}}function ot(t){const e=j.from(t),n=new Uint8Array(e.length+4),s=j.alloc(4);return s.writeUInt32BE(I.$G.Comment),n.set(s,0),n.set(e,4),n}function at(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J;return j.from(t).length<=e?t:it(t)}function it(t){const e=J;let n;for(let r=Math.ceil(t.length/e)-1;r>=0;r--){const o=r*e,a=Math.min(e,t.length-o),i=j.from(t.buffer,t.byteOffset+o,a),c=(new s.Builder).storeBuffer(i);n&&c.storeRef(n),n=c.endCell()}return n??s.Cell.EMPTY}function ct(t){if(t.length>39+16*J)throw new Error("Input text is too long");return(new s.Builder).storeBuffer(j.from(t.subarray(0,39))).storeRef(it(t.subarray(39))).endCell()}function dt(t){return(new s.Builder).storeUint(I.Ad.Deposit,32).storeUint(t||0,64).asCell()}function lt(t){const{queryId:e,amount:n,responseAddress:r,waitTillRoundEnd:o,fillOrKill:a}=t,i=function(t,e){return(new s.Builder).storeUint(Number(t),1).storeUint(Number(e),1).asCell()}(o,a);return(new s.Builder).storeUint(I.LY.Burn,32).storeUint(e??0,64).storeCoins(n).storeAddress(s.Address.parse(r)).storeBit(1).storeRef(i).asCell()}function ut(t,e){return $(t).open(new S.K(s.Address.parse(e))).getJettonBalance()}function ft(t){try{if(s.Address.isRaw(t))return{address:s.Address.parseRaw(t),isRaw:!0,isValid:!0};if(s.Address.isFriendly(t))return{...s.Address.parseFriendly(t),isUserFriendly:!0,isValid:!0}}catch(t){}return{isValid:!1}}function mt(t){return Boolean(ft(t).isRaw)}async function ht(t,e){"string"==typeof e&&(e=s.Address.parse(e));const n=$(t).open(new y.n(e)),r=et((await n.getNftData()).collectionAddress,!0),o=(0,h.$7)(r);return`${null!=o&&o.isTelemint?await n.getTelemintDomain():await n.getDomain()}.${null==o?void 0:o.suffixes[0]}`}function pt(t,e,n){return(0,s.beginCell)().storeUint(b.Hx.UNSTAKE_JETTONS,32).storeUint(n??0,64).storeCoins(t).storeBit(e??!1).endCell()}function wt(t,e){const n=s.Dictionary.empty(s.Dictionary.Keys.Address(),s.Dictionary.Values.Bool());for(const e of t)n.set(s.Address.parse(e),!0);return(0,s.beginCell)().storeUint(b.Hx.CLAIM_REWARDS,32).storeUint(e??0,64).storeDict(n,s.Dictionary.Keys.Address(),s.Dictionary.Values.Bool()).endCell()}function gt(t){return yt(t)?(0,p.LG)(t,(t=>t instanceof s.Dictionary?gt((0,p.rs)(t.keys(),t.values())):yt(t)?gt(t):t)):t}function yt(t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===Object.prototype}function vt(){return(new s.Builder).storeUint(I.$G.OurFee,32).endCell()}function At(t){return t&&(0,s.loadStateInit)(t.asSlice())}function bt(t){return t.match(/exitcode=(33|133)\D/)}function kt(t){return t.match(/exitcode=(35|136)\D/)}},91179:function(t,e,n){"use strict";var s=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function a(t){try{c(s.next(t))}catch(t){o(t)}}function i(t){try{c(s.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,i)}c((s=s.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_OPTIONS=e.exponentialDelay=e.isNetworkOrIdempotentRequestError=e.isIdempotentRequestError=e.isSafeRequestError=e.isRetryableError=e.isNetworkError=e.namespace=void 0;const o=r(n(51936));function a(t){return!t.response&&!!t.code&&!["ERR_CANCELED","ECONNABORTED"].includes(t.code)&&(0,o.default)(t)}e.namespace="axios-retry",e.isNetworkError=a;const i=["get","head","options"],c=i.concat(["put","delete"]);function d(t){return"ECONNABORTED"!==t.code&&(!t.response||t.response.status>=500&&t.response.status<=599)}function l(t){var e;return!!(null===(e=t.config)||void 0===e?void 0:e.method)&&d(t)&&-1!==i.indexOf(t.config.method)}function u(t){var e;return!!(null===(e=t.config)||void 0===e?void 0:e.method)&&d(t)&&-1!==c.indexOf(t.config.method)}function f(t){return a(t)||u(t)}function m(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;const n=Math.pow(2,t)*e;return n+.2*n*Math.random()}function h(t,n){const s=function(t,n){return Object.assign(Object.assign(Object.assign({},e.DEFAULT_OPTIONS),n),t[e.namespace])}(t,n||{});return s.retryCount=s.retryCount||0,s.lastRequestTime=s.lastRequestTime||Date.now(),t[e.namespace]=s,s}e.isRetryableError=d,e.isSafeRequestError=l,e.isIdempotentRequestError=u,e.isNetworkOrIdempotentRequestError=f,e.exponentialDelay=m,e.DEFAULT_OPTIONS={retries:3,retryCondition:f,retryDelay:function(){return 0},shouldResetTimeout:!1,onRetry:()=>{}};const p=(t,e)=>({requestInterceptorId:t.interceptors.request.use((t=>(h(t,e),t))),responseInterceptorId:t.interceptors.response.use(null,(n=>s(void 0,void 0,void 0,(function*(){const{config:r}=n;if(!r)return Promise.reject(n);const o=h(r,e);if(yield function(t,e){return s(this,void 0,void 0,(function*(){const{retries:n,retryCondition:s}=t,r=(t.retryCount||0)<n&&s(e);if("object"==typeof r)try{return!1!==(yield r)}catch(t){return!1}return r}))}(o,n)){o.retryCount+=1;const{retryDelay:e,shouldResetTimeout:s,onRetry:a}=o,i=e(o.retryCount,n);if(function(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}(t,r),!s&&r.timeout&&o.lastRequestTime){const t=Date.now()-o.lastRequestTime,e=r.timeout-t-i;if(e<=0)return Promise.reject(n);r.timeout=e}return r.transformRequest=[t=>t],yield a(o.retryCount,n,r),new Promise((e=>{setTimeout((()=>e(t(r))),i)}))}return Promise.reject(n)}))))});p.isNetworkError=a,p.isSafeRequestError=l,p.isIdempotentRequestError=u,p.isNetworkOrIdempotentRequestError=f,p.exponentialDelay=m,p.isRetryableError=d,e.default=p},96773:(t,e,n)=>{"use strict";n.d(e,{n:()=>a});var s=n(1307),r=n(24887),o=n(3476);class a{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new a(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={code:e,data:(0,s.beginCell)().endCell()};return new a((0,s.contractAddress)(n,r),r)}async getDomain(t){return(await t.get("get_domain",[])).stack.readString()}async getTelemintDomain(t){const e=(await t.get("get_domain_full",[])).stack.readString().replace(/\\u0000/g,".").replace(/\.$/,"").split(".");return e.reverse(),e.join(".")}async getNftData(t){const e=await t.get("get_nft_data",[]);return{index:e.stack.readBigNumber(),collectionAddress:e.stack.readAddress(),owner:e.stack.readAddressOpt()}}async getLastFillUpTime(t){return(await t.get("get_last_fill_up_time",[])).stack.readBigNumber()}static buildFillUpMessage(t){return a.buildDeleteDnsRecordMessage(t)}static buildDeleteDnsRecordMessage(t,e){return(0,s.beginCell)().storeUint(o.kc.ChangeRecord,32).storeUint(t??0n,64).storeUint((0,r.in)(e),256).endCell()}static buildChangeDnsWalletMessage(t,e){return(0,s.beginCell)().storeUint(o.kc.ChangeRecord,32).storeUint(e??0n,64).storeUint((0,r.in)(o.kJ.Wallet),256).storeRef((0,s.beginCell)().storeUint(40915,16).storeAddress(s.Address.parse(t)).storeUint(0,8).endCell()).endCell()}}}},s={};function r(t){var e=s[t];if(void 0!==e)return e.exports;var o=s[t]={exports:{}};return n[t].call(o.exports,o,o.exports,r),o.exports}r.m=n,r.x=()=>{var t=r.O(void 0,[800,885],(()=>r(21519)));return r.O(t)},t=[],r.O=(e,n,s,o)=>{if(!n){var a=1/0;for(l=0;l<t.length;l++){for(var[n,s,o]=t[l],i=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(r.O).every((t=>r.O[t](n[c])))?n.splice(c--,1):(i=!1,o<a&&(a=o));if(i){t.splice(l--,1);var d=s();void 0!==d&&(e=d)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[n,s,o]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,n)=>(r.f[n](t,e),e)),[])),r.u=t=>t+"."+{76:"479f7cdd2b48255d4577",800:"ec0c359c4355f20d60bd",885:"a1af566d0d93ef97e3ef",909:"425f7d2af5d72d1cad8d"}[t]+".js",r.miniCssF=t=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!t||!/^http(s?):/.test(t));)t=n[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t={941:1};r.f.i=(e,n)=>{t[e]||importScripts(r.p+r.u(e))};var e=self.webpackChunkmytonwallet=self.webpackChunkmytonwallet||[],n=e.push.bind(e);e.push=e=>{var[s,o,a]=e;for(var i in o)r.o(o,i)&&(r.m[i]=o[i]);for(a&&a(r);s.length;)t[s.pop()]=1;n(e)}})(),e=r.x,r.x=()=>Promise.all([r.e(800),r.e(885)]).then(e),r.x()})();
//# sourceMappingURL=941.9b59e9f6286e558142d5.js.map